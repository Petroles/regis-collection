<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.11377</field>
		<field name="filename">16653_001088914.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">
UNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL
INSTITUTO DE INFORMÁTICA

PROGRAMA DE PÓS-GRADUAÇÃO EM MICROELETRÔNICA

LEONARDO BISCH PICCOLI

Desenvolvimento de um Sistema em Chip
de processamento online para Manutenção

Inteligente

Tese apresentada como requisito parcial para a
obtenção do grau de Doutor em Microeletrônica

Orientador: Prof. Dr. Tiago Roberto Balen
Co-orientador: Prof. Dr. Renato Ventura Bayan
Henriques

Porto Alegre
2018



CIP — CATALOGAÇÃO NA PUBLICAÇÃO

Piccoli, Leonardo Bisch

Desenvolvimento de um Sistema em Chip de processamento
online para Manutenção Inteligente / Leonardo Bisch Piccoli. –
Porto Alegre: PGMICRO da UFRGS, 2018.

146 f.: il.

Tese (doutorado) – Universidade Federal do Rio Grande do
Sul. Programa de Pós-Graduação em Microeletrônica, Porto
Alegre, BR–RS, 2018. Orientador: Tiago Roberto Balen; Co-
orientador: Renato Ventura Bayan Henriques.

1. Manutenção inteligente. 2. Processamento em tempo real.
3. Circuitos integrados. 4. Tolerância a falhas. 5. Verilog. 6. Mi-
croeletrônica. I. Balen, Tiago Roberto. II. Henriques, Renato
Ventura Bayan. III. Título.

UNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL
Reitor: Prof. Rui Vicente Oppermann
Vice-Reitora: Profa. Jane Fraga Tutikian
Pró-Reitor de Pós-Graduação: Prof. Celso Giannetti Loureiro Chaves
Diretora do Instituto de Informática: Profa. Carla Maria Dal Sasso Freitas
Coordenadora do PGMICRO: Prof. Fernanda Gusmão de Lima Kastensmidt
Bibliotecária-chefe do Instituto de Informática: Beatriz Regina Bastos Haro



Apressa-te a viver bem e pensa que cada dia é, por si só, uma VIDA!

— SÊNECA





AGRADECIMENTOS

Ao Prof. Dr. Tiago Balen, pela orientação, dedicação, paciência e amizade durante

todo o processo.

Aos professores doutores Renato Ventura Bayan Henriques e Carlos Eduardo Pereira,

por todas as contribuições e pelo crédito dado ao desenvolvimento desta pesquisa.

À Escola de Engenharia da Universidade Federal do Rio Grande do Sul (UFRGS),

por ser o local necessário ao desenvolvimento deste trabalho.

À minha esposa Cristiane e filha Alice, pelo apoio emocional e espiritual.

Aos meus pais pelo auxílio durante o período de elaboração deste trabalho.

Aos membros do Grupo de Controle Automação e Robótica (GCAR) e ao Labora-

tório de Processamento de Sinais e Imagens (LaPSI) da UFRGS, pelo suporte acadêmico.

A todos os participantes da pesquisa, pela indispensável contribuição.





RESUMO

Estratégias de monitoramento, baseadas na análise da condição de equipamentos utili-
zando ferramentas de processamento digital de sinais, inteligência artificial e tolerância
a falhas, tornam-se cada vez mais necessárias nos processos industriais. As técnicas de
manutenção inteligente conferem confiabilidade, disponibilidade e eficácia, e são estuda-
das, neste trabalho, no atual estado da arte. Porém, grande parte delas utiliza medidas
com estados e parâmetros do processo que são dispendiosas e envolvem elevado tempo
de amostragem e análise. O objetivo deste trabalho é desenvolver um novo sistema ca-
paz de estimar a condição de saúde de um equipamento a partir das leituras de vibração
e torque de sensores, e assim, viabilizar a detecção, predição e identificação de falhas
online em atuadores elétricos utilizados em linhas de transporte de petróleo e/ou deri-
vados. Para isso, foi desenvolvida uma técnica que, por meio de um dispositivo com-
putacional, possibilita monitorar, considerando ruído e, de forma interativa, as variações
dos parâmetros de um processo físico, tais como: falhas abruptas, incipientes e intermi-
tentes. Isso corresponde às atividades de detecção, identificação de falhas e previsões
sobre possíveis problemas que venham a surgir em consequência de pequenos desvios
do comportamento normal do sistema. A metodologia empregada é baseada na estrutura
do modelo Open Systems Architecture for Condition-Based Maintenance (OSA-CBM),
que permite atuar nas seguintes camadas: 1) Aquisição de dados; 2) Manipulação de da-
dos; 3) Monitoramento das condições; 4) Avaliação da saúde. O sistema compreende
a análise simultânea das propriedades de tempo e frequência do sinal, extração de ca-
racterísticas e filtragem adaptativa. Uma bancada de testes foi utilizada para reproduzir
algumas falhas típicas que podem causar degradação na operação de atuadores fabricados
no mercado. O sistema foi denominado Fault Detection System (FDS) e é baseado em téc-
nicas de processamento de sinais que tem como saída um sinal de resíduo ou erro quando
na ocorrência de uma falha correspondente nos equipamentos monitorados. A versão em
software do sistema foi registrada no Instituto Nacional da Propriedade Industrial (INPI)
no "BR 51 2016 000863-6". Uma nova versão para prototipagem em hardware do FDS
em conjunto com um bloco auxiliar denominado Fault Detection Index (FDI), que tam-
bém é proposto neste trabalho, foi desenvolvido na linguagem Verilog e implementado
utilizando uma biblioteca Complementary Metal-Oxide-Semiconductor (CMOS) de 90
nm visando baixo consumo de energia (? 654 µW ), baixa utilização de área em silício
(? 0,14 mm2) e processamento em tempo real. Os resultados demonstram a eficácia
do método de detecção, diagnóstico e identificação de falhas apresentadas em atuadores
elétricos empregados para controle de válvulas.

Palavras-chave: Manutenção inteligente. Processamento em tempo real. Circuitos inte-

grados. Tolerância a falhas. Verilog. Microeletrônica.





ABSTRACT

Monitoring strategies based on the analysis of equipment condition with information de-
rived from digital signal processing, artificial intelligence and fault tolerance tools become
increasingly necessary in industrial process. In this context, intelligent maintenance tech-
niques provide reliability, availability and are being increasingly studied in the current
state of the art researches. However, most of them are based on measurements with states
and process parameters that are costly and involve high sampling and analysis time. In
order to avoid this problem, this work presents a new system capable of estimating the
health condition of an equipment from the vibration and torque measurements of sensors,
thus enabling online detection, prediction and identification of faults in electric actua-
tors. The developed system represents a technique that, by means of a computational
device, allows to monitor the variations of the parameters of a physical process such as
abrupt, incipient and intermittent failures. This corresponds to the activities of fault de-
tection, identification and prediction of possible problems that may arise due to minor
deviations of the normal behavior state of the system. The methodology is based on the
Open Systems Architecture for Condition-Based Maintenance (OSA-CBM) framework,
which allows to act in the following layers: 1) Data acquisition; 2) Data manipulation;
3) Condition monitoring; 4) Health assessment. The system comprises the simultaneous
analysis of signal time and frequency properties, feature extraction and adaptive filter-
ing. A testbench structure has been used to reproduce some typical faults that can cause
degradation in the operation of the available commercial actuators. The results show the
effectiveness of the method of detection, diagnosis and identification of faults that may
occur in electric valves. The system is denominated Fault Detection System (FDS) and it
is based on digital signal processing techniques producing a residue signal or error in the
occurrence of a corresponding fault in the monitored equipment. A software version of
the system was registered with the Instituto Nacional da Propriedade Industrial (INPI)
no "BR 51 2016 000863-6". A new version for hardware prototyping of FDS together
with the Fault Detection Index (FDI), which is also proposed in this work, was using Ver-
ilog language and implemented in a 90 nm Complementary Metal-Oxide-Semiconductor
(CMOS) library for low power consumption (? 654 µW ), low silicon area utilization
(? 0.14 mm2) and real time processing. The results demonstrate the effectiveness of
the method of detection, diagnosis and identification of faults present in electric actuators
used for controling fluidic valves.

Keywords: Intelligent Maintenance. Real Time Processing. Integrated Circuits. Fault

Tolerance. Verilog. Microelectronics.





LISTA DE ABREVIATURAS E SIGLAS

A/D Conversor Analógico/Digital

ARMA Auto-Regressive Moving Average

ASIC Application Specific Integrated Circuit

AWT Adaptive Wavelet Transform

BIST Built-in Self Test

CBM Condition Based Maintenance

CD Correlation Dimension

CDF Cohen Daubechies Feauveau

CEITEC Centro de Excelência em Tecnologia Eletrônica Avançada

CMOS Complementary Metal-Oxide-Semiconductor

CSN Chip Select Not

CWT Continuous Wavelet Transform

D/A Conversor Digital / Analógico

DC Design Compiler

DRC Design Rule Check

DSP Digital Signal Processing

DWT Discrete Wavelet Transform

EEMD Ensemble Empirical Mode Decomposition

EMD Empirical Mode Decomposition

ERC Electrical Rule Check

EWMA Exponentially Weighted Moving Average

FB Filter Banks

FD Fault Detection

FDI Fault Detection Index

FDS Fault Detection System

FIR Finite Impulse Response

FPGA Field Programmable Gate Array

GND Ground

IC Integrated Circuit Compiler

LFSR Linear Feedback Shift Register

LMS Least Mean Squares Algorithm

LS Lifting Scheme



LVS Layout Versus Schematic

MISO Master In Slave Out

MOSI Master Out Slave In

OSA-CBM Open Systems Architecture for Condition-Based Maintenance

PC Personal Computer

RC Encounter RTL Compiler

RTL Register Transfer Level

SANC Self-Adaptive Noise Cancellation

SCK Serial Clock

SDC Synopsys Design Constraints

SDI Serial Data In

SDO Serial Data Out

SOM Self-Organization Maps

SPI Serial Peripheral Interface

TPG Test Pattern Generation

VHDL VHSIC Hardware Description Language

VHSIC Very High Speed Integrated Circuit



LISTA DE SÍMBOLOS

?

a
b

Somatório da fração

? Nível 1 de decomposição em sub-bandas de frequência da DWT

? Nível 2 de decomposição em sub-bandas de frequência da DWT

? Nível 3 de decomposição em sub-bandas de frequência da DWT

? Nível 4 de decomposição em sub-bandas de frequência da DWT

µ Passo de adaptação do filtro adaptativo

? Fator de suavização

µC Microcontrolador





LISTA DE FIGURAS

Figura 1.1 Principais estratégias de manutenção. ...........................................................21

Figura 2.1 Relação entre defeito, falha, erro e falha sistêmica. ......................................28
Figura 2.2 Falha e consequências....................................................................................29
Figura 2.3 Arquitetura de um ambiente de injeção de falhas..........................................30
Figura 2.4 Curva P-F de resistência à falha. ...................................................................33
Figura 2.5 Diferentes técnicas de detecção e o seu correspondente custo de manu-

tenção. .....................................................................................................................34
Figura 2.6 Esquema do sistema de manutenção inteligente tolerante a falhas. ..............35
Figura 2.7 O esquema do sistema hidráulico para o equipamento de teste experimental.37
Figura 2.8 Histórico no domínio do tempo e espectro FFT sem restrição de estabi-

lidade sob pressão piloto de 0,3 MPa......................................................................39
Figura 2.9 O sistema experimental do motor. .................................................................39
Figura 2.10 Representação gráfica do fluxo de sinal do sistema de detecção de fa-

lhas do motor...........................................................................................................40
Figura 2.11 Sistema de teste de motor hidráulico de água..............................................40
Figura 2.12 Gráficos no domínio tempo-frequência da CWT de Morlet do sinal

simulado obtido pela modelagem do sinal de vibração em cinco condições do
pistão. ......................................................................................................................41

Figura 2.13 Esquemático da instalação do equipamento para teste de rolamento. .........42
Figura 2.14 Valor máximo normalizado com diferentes métodos de teste em rola-

mentos. ....................................................................................................................42
Figura 2.15 Nove condições de falha do rolamento........................................................43
Figura 2.16 Sinais de vibração para diferentes condições de degradação. .....................44
Figura 2.17 Método de filtragem de ruídos com algoritmos SANC e ANC. ..................45
Figura 2.18 Espectro de freqüência de sinais de falha simulados no transporte fer-

roviário. ...................................................................................................................46
Figura 2.19 Espectros de frequência de sinais de ruído a diferentes velocidades...........46
Figura 2.20 Configuração de hardware do sistema STFDOMS implementado. ............48
Figura 2.21 Representação do modelo de sistemas para detecção de falhas no Si-

mulink. ....................................................................................................................50

Figura 3.1 Primeiras etapas do CBM para manutenção inteligente. ...............................54
Figura 3.2 Arquitetura em hardware para o protocolo SPI.............................................60

Figura 4.1 Evolução da produção de petróleo, por localização (terra e mar). ................61
Figura 4.2 Transporte e armazenamento de petróleo e derivados. ..................................62
Figura 4.3 Componentes de um típico terminal. .............................................................64
Figura 4.4 Fluxograma simplificado da automação de um típico terminal.....................64
Figura 4.5 Redundância com válvulas em dutos.............................................................67
Figura 4.6 Componentes externos do atuador. ................................................................68
Figura 4.7 Detalhes construtivos dos atuadores. .............................................................69
Figura 4.8 Conjunto de engrenagens satélite do atuador. ...............................................71
Figura 4.9 Conjunto defeituoso de engrenagens do estudo de caso................................71
Figura 4.10 Diagrama de causa-efeito para identificar possíveis modos de falha no

conjunto atuador-válvula. .......................................................................................72
Figura 4.11 Modelagem do atuador elétrico, válvula e tubulação. .................................73
Figura 4.12 Arquitetura do sistema embarcado para manutenção inteligente. ...............74



Figura 4.13 Arquitetura do circuito de predição com filtro adaptativo. ..........................75

Figura 5.1 Arquitetura conceitual do sistema nas camadas do OSA-CBM. ...................79
Figura 5.2 Estrutura do sistema de detecção de falhas....................................................80
Figura 5.3 Diagrama de blocos da estrutura LS. .............................................................82
Figura 5.4 Arquitetura LS em hardware para wavelet 9/7..............................................82
Figura 5.5 Diagrama de blocos do filtro adaptativo LMS...............................................85
Figura 5.6 Arquitetura do FDS para síntese....................................................................87
Figura 5.7 Diagrama da pinagem do FDS.......................................................................87
Figura 5.8 Implementação na configuração Galois de 8-bit do LFSR............................88
Figura 5.9 Gerador de padrões de teste para o chip. .......................................................88
Figura 5.10 Esquema de funcionamento do gerador de padrões de teste. ......................89
Figura 5.11 Arquitetura do FDI para síntese...................................................................90
Figura 5.12 Arquitetura do chip FDS para predição de falhas com SPI. ........................90
Figura 5.13 Arquitetura do chip FDS e FDI para predição de falhas com SPI...............91
Figura 5.14 A estrutura geral com uma rede WirelessHARTTM. ....................................92
Figura 5.15 Configuração do projeto em rede Modbus...................................................93
Figura 5.16 Chip para predição de falhas com interface SPI. .........................................94
Figura 5.17 Esquemático do chip para predição de falhas com interface SPI. ...............94
Figura 5.18 Protocolo de comunicação com o chip. .......................................................95
Figura 5.19 Procedimento para configuração do chip.....................................................97

Figura 6.1 Etapas de operação para a obtenção de resultados. .....................................100
Figura 6.2 Entradas e saídas da ferramenta Design Compiler. .....................................100
Figura 6.3 Visão de topo do chip de predição de falhas................................................101
Figura 6.4 Verificação da síntese lógica e validação da qualidade dos resultados........101
Figura 6.5 Entradas e saídas da ferramenta IC Compiler. ............................................102
Figura 6.6 Síntese física do chip de predição de falhas em 90 nm...............................103
Figura 6.7 Verificação da síntese física e validação da qualidade dos resultados. ........103
Figura 6.8 Posicionamento e roteamento das células. ..................................................104
Figura 6.9 Distribuição da densidade de energia consumida. .......................................105
Figura 6.10 Estrutura da distribuição da árvore de relógio. ..........................................105
Figura 6.11 Síntese física do chip de predição de falhas em 0,6 µm............................110
Figura 6.12 Conexão do sistema com FPGA e microcontrolador.................................111
Figura 6.13 Atuador instrumentado na bancada de teste. .............................................114
Figura 6.14 Injeção de falhas com freio a disco............................................................115
Figura 6.15 Engrenagens usadas nos testes para injeção de falhas...............................115
Figura 6.16 Localização dos sensores instalados no atuador elétrico. ..........................116
Figura 6.17 Espectro de frequência do acelerômetro em condições normais. ..............117
Figura 6.18 Espectro de frequência do sensor de torque em condições normais..........118
Figura 6.19 Espectro de frequência do sensor de torque com pressão de 100 kPa. ....118
Figura 6.20 Espectro de frequência do sensor de torque com pressão de 300 kPa. ....118
Figura 6.21 Espectro de frequência do acelerômetro para engrenagens desgastadas. ..119
Figura 6.22 Espectro de frequência do acelerômetro para engrenagens com dentes

fraturados. .............................................................................................................119
Figura 6.23 Espectro de frequência do acelerômetro para engrenagens sem lubrifi-

cação. ....................................................................................................................119
Figura 6.24 Interface bash script para configurar e executar macros. ..........................120
Figura 6.25 Interação entre o usuário e o sistema para os testes...................................121
Figura 6.26 Experimento de falha com 100 kPa no disco de freio sobre a válvula.....123
Figura 6.27 Experimento de falha com 300 kPa no disco de freio sobre a válvula.....124



Figura 6.28 Experimento de falha com engrenagem de dente desgastado. ..................125
Figura 6.29 Experimento de falha com engrenagem de dente fraturado. .....................127
Figura 6.30 Experimento de falha sem lubrificação nas engrenagens. .........................128
Figura 6.31 Experimento de falha sem lubrificação nas engrenagens. .........................129
Figura 6.32 Formas de diagnóstico extraído do histograma. ........................................131





LISTA DE TABELAS

Tabela 1.1 Características das técnicas propostas. ..........................................................25

Tabela 2.1 Principais características das estratégias clássicas de manutenção. ..............31
Tabela 2.2 Estado da arte das principais estratégias inteligentes. ...................................52

Tabela 3.1 Algorítimo do filtro LMS. .............................................................................57
Tabela 3.2 Representação de números no formato Q......................................................59
Tabela 3.3 Sinais utilizados no protocolo SPI mestre. ....................................................60

Tabela 4.1 Procedimentos operacionais de um típico terminal. ......................................66
Tabela 4.2 Especificações do atuador elétrico modelo CSR6. ........................................70

Tabela 5.1 Pinagem do chip com interface SPI...............................................................94

Tabela 6.1 Análise de tempo do chip proposto. ............................................................106
Tabela 6.2 Área do chip implementado em 90 nm. ......................................................107
Tabela 6.3 Dissipação de energia do chip implementado em 90 nm............................107
Tabela 6.4 Circuitos digitais utilizados na síntese lógica..............................................109
Tabela 6.5 Dissipação de energia do chip implementado em 0,6 µm...........................110
Tabela 6.6 Conexão entre os módulos de FPGA e microcontrolador. ..........................112
Tabela 6.7 Ocupação do chip no dispositivo EP2C5T144C8. ......................................113
Tabela 6.8 Ciclos realizados de testes experimentais....................................................117
Tabela 6.9 Comparativo de consumo aproximado de 50 válvulas para 15 ciclos

diários......................................................................................................................132





SUMÁRIO

1 INTRODUÇÃO ...........................................................................................................21
1.1 Visão Geral dos Objetivos ......................................................................................24
1.2 Contribuições...........................................................................................................24
1.3 Apresentação dos Capítulos ...................................................................................25
2 ESTADO DA ARTE EM TÉCNICAS DE MANUTENÇÃO INTELIGENTE.....27
2.1 Tolerância a Falhas .................................................................................................27
2.1.1 Definições de Termos Empregados........................................................................28
2.1.2 Arquitetura de um Ambiente de Injeção de Falhas................................................29
2.2 Técnicas de Manutenção ........................................................................................30
2.2.1 Manutenção Baseada na Condição ........................................................................31
2.2.2 Manutenção Inteligente..........................................................................................34
2.3 Estado da Arte em Manutenção Inteligente .........................................................36
2.3.1 Resumo do Estado da Arte.....................................................................................50
3 REVISÃO DE TÉCNICAS E METODOLOGIAS ..................................................53
3.1 Métodos de Processamento Digital de Sinais........................................................53
3.1.1 Transformada Discreta de Wavelet ........................................................................54
3.1.2 Extração de Energia ...............................................................................................55
3.1.3 Filtro Adaptativo ....................................................................................................56
3.2 Sistemas de Tempo Real .........................................................................................58
3.3 Formato dos Dados de Dispositivos Digitais.........................................................58
3.3.1 Notação de Ponto Fixo no Formato Q ...................................................................58
3.4 O Protocolo de Comunicação Serial SPI ..............................................................59
3.4.1 Arquitetura de Hardware do Protocolo SPI ...........................................................60
4 UTILIZAÇÃO DE VÁLVULAS NO MODAL DUTOVIÁRIO DA INDÚS-

TRIA DO PETRÓLEO .......................................................................................61
4.1 Oferta e Demanda de Petróleo ...............................................................................61
4.2 Transporte e Armazenamento de Petróleo e Derivados ......................................62
4.2.1 Operações de um Típico Terminal .........................................................................63
4.3 Visão geral do Estudo de Caso...............................................................................67
4.3.1 Estudo de Caso deste Trabalho ..............................................................................68
4.3.2 Trabalhos Relacionados ao Estudo de Caso ..........................................................71
5 PROPOSTA E IMPLEMENTAÇÕES DO SISTEMA ............................................79
5.1 Sistema Embarcado FDS e FDI .............................................................................80
5.2 O Sistema FDS para Detecção e Predição de Falhas ...........................................80
5.2.1 Transformada Discreta de Wavelet ........................................................................81
5.2.2 Energia do Sinal .....................................................................................................83
5.2.3 Filtro Adaptativo LMS...........................................................................................84
5.3 O Sistema FDI para Diagnóstico de Falhas ..........................................................85
5.3.1 Índice de Detecção de Falhas.................................................................................85
5.4 Chip para Predição e Detecção de Falhas.............................................................86
5.4.1 Arquitetura do FDS................................................................................................86
5.4.2 Arquitetura para Autoteste Funcional ....................................................................87
5.4.3 Arquitetura do FDI.................................................................................................89
5.4.4 Arquitetura do FDS com SPI .................................................................................90
5.4.5 Arquitetura do FDS e FDI com SPI .......................................................................91
5.5 Arquitetura para Indústria 4.0 ..............................................................................91
5.6 Descrição Operacional do Chip .............................................................................93
5.6.1 Protocolo de Comunicação SPI para o Chip..........................................................95



5.6.2 Ajuste dos Parâmetros do Chip..............................................................................96
6 RESULTADOS OBTIDOS .........................................................................................99
6.1 Desenvolvimento do Chip na Biblioteca Educacional de 90 nm.......................100
6.1.1 Síntese Lógica do Chip ........................................................................................100
6.1.2 Síntese Física do Chip..........................................................................................102
6.1.3 Resultados da Síntese Física ................................................................................106
6.2 Desenvolvimento do Chip na Biblioteca Comercial de 0,6 µm .........................107
6.2.1 Síntese Lógica do Chip ........................................................................................108
6.2.2 Síntese Física do Chip..........................................................................................109
6.2.3 Resultados da Síntese Física ................................................................................109
6.3 Desenvolvimento do sistema com Microcontrolador e FPGA ..........................111
6.3.1 Implementação dos algoritmos em FPGA ...........................................................112
6.3.2 Testes Simulados com FPGA...............................................................................113
6.4 Experimentos com a Bancada de Teste ...............................................................113
6.4.1 Descrição dos Testes ............................................................................................115
6.4.2 Espectro de Frequência dos Sinais de Teste ........................................................117
6.5 Simulações do Chip Pós-síntese Física ................................................................120
6.5.1 Simulação com Falha por Pressão no Freio de 100 kPa.....................................122
6.5.2 Simulação com Falha por Pressão no Freio de 300 kPa.....................................123
6.5.3 Simulação com Falha por Engrenagem de Dente Desgastado.............................125
6.5.4 Simulação com Falha por Engrenagem de Dente Fraturado ...............................126
6.5.5 Simulação com Falha por Engrenagens sem Lubrificação ..................................127
6.5.6 Simulação de Autoteste Funcional.......................................................................129
6.6 Discussão dos Resultados .....................................................................................130
7 CONSIDERAÇÕES FINAIS ...................................................................................133
7.1 CONTRIBUIÇÕES TÉCNICAS .........................................................................135
7.2 TRABALHOS SUBMETIDOS OU PUBLICADOS..........................................136
7.3 TRABALHOS FUTUROS....................................................................................137
REFERÊNCIAS ...........................................................................................................139



21

1 INTRODUÇÃO

O avanço tecnológico permitiu que tarefas repetitivas ou de alto risco na indústria,

executadas por operadores humanos, fossem automatizadas. Entre os setores mais bene-

ficiados, pode-se listar o químico, petroquímico, siderúrgico, energético e de saneamento

básico. Esse fenômeno acarretou o surgimento de plantas industriais mais complexas com

práticas de controle e monitoramento online ou de tempo real. Independente dos avanços

obtidos, os equipamentos utilizados na indústria estão sujeitos à degradação na medida

em que são utilizados. Contribuem para isso danos causados por operadores, corrosão,

desgaste, rachaduras e outros problemas que podem agravar a degradação do sistema.

Nessa situação, reparos devem ser feitos a fim de não comprometer a cadeia produtiva e

manter um desempenho satisfatório do equipamento (LEE, 2003).

Em sistemas críticos como as linhas de transporte de petróleo em que sua interrup-

ção ou mau funcionamento representam riscos para vidas humanas, danos ao meio ambi-

ente ou custos patrimoniais, adotar estratégias de manutenção mais eficazes para aliviar

as causas (Figura 1.1), a monitorização, o prognóstico e diagnóstico, aliados a sistemas

de tempo real, são de suma importância.

Figura 1.1: Principais estratégias de manutenção.

Hoje se empregam principalmente dois tipos de manutenção no ramo petrolífero:

a corretiva e a preventiva. A manutenção puramente corretiva consiste no conserto ou

substituição de uma máquina ou equipamento após a quebra ou falha (e como a ação de

manutenção ocorre em reação à falha, esta alternativa também é muitas vezes chamada de

"manutenção reativa"). Neste caso, não há tempo ou recursos despendidos entre as falhas,

porém o custo da manutenção torna-se mais elevado e pode haver graves consequências,

como riscos aos funcionários e paradas forçadas no processo produtivo. Na manuten-

ção preventiva assume-se certo nível de degradação para as máquinas e equipamentos,



22

normalmente baseado em estatísticas de falhas anteriores ocorridas com os equipamen-

tos/processos, e realiza-se uma manutenção periódica. Com esta prática pode-se substituir

ou reparar equipamentos ou peças que ainda teriam condições de operar por mais tempo,

mas não se exclui paradas inesperadas por quebra. Nos dois casos os custos são altos e o

tempo de parada pode ser muito longo.

Quando um equipamento desempenha as tarefas ou serviços dentro da especifica-

ção para a qual foi projetado, se diz que este está em funcionamento normal. Havendo

desvio dessa condição, se determina a degradação de desempenho. Quando se atinge

um estado no qual o equipamento deixa de desempenhar suas funções de modo nominal,

considera-se uma falha. A manutenção preditiva ocorre em resposta às condições que não

correspondem ao funcionamento normal. Quando essa situação é detectada a tempo, um

diagnóstico da causa pode ser possível e decisões apropriadas para reparo são tomadas

(CHOLETTE et al., 2013).

Atualmente é possível transpor os limites impostos pela manutenção clássica (cor-

retiva, preventiva e preditiva) e avançar na direção da manutenção inteligente (seção

2.2.2), adicionando-se tolerância a falhas, devido ao desenvolvimento tecnológico dos

sensores, dos sistemas computacionais embarcados e da microeletrônica. São caracterís-

ticas da manutenção inteligente a rapidez e a precisão da avaliação do equipamento. Essas

qualidades possibilitam a detecção, o diagnóstico e a predição de falhas (BOSA, 2009).

No caso de uma falha ser detectada, em uma manutenção inteligente, o sistema

pode automaticamente se reconfigurar de forma a continuar operando, ainda que de ma-

neira degradada, até a ocorrência da manutenção (LEE, 1996). Esta característica de

reconfiguração permite, por exemplo, limitar o torque, ou a corrente, de um motor com

a intenção de reduzir o esforço sobre os componentes e assim prolongar o tempo de vida

útil dos sistemas.

Considerando o interesse em detectar e identificar possíveis problemas nos proces-

sos industriais em tempo hábil, este trabalho vem a contribuir com um sistema composto

por processamento digital de sinais (DSP - Digital Signal Processing) para a atividade de

detecção e predição de falhas como uma ferramenta de auxílio à manutenção inteligente.

As técnicas de DSP em sistemas de tempo discreto vêm sendo cada vez mais

empregadas com os sistemas de controle e manutenção inteligente. Será apresentado

neste trabalho o desenvolvimento de um chip que utiliza algumas dessas técnicas, a saber:

transformada discreta de wavelet (DWT - Discrete Wavelet Transform) (WALNUT, 2002),

extração de energia e filtro adaptativo para detecção de falhas em sistemas de engrenagem.



23

O Filtro Adaptativo pode possuir uma estrutura de resposta impulsional finita (FIR

- Finite Impulse Response) ou de resposta impulsional infinita (IIR - Infinite Impulse Re-

sponse). Pelo fato da estrutura FIR ser naturalmente estável, por não possuir realimenta-

ção e o método dos mínimos quadrados médios (LMS - Least-Mean Square) (HAYKIN,

2001) ser de baixa complexidade, será adotado neste trabalho a arquitetura de um filtro

adaptativo LMS do tipo FIR.

Como a operação do sistema em estudo ocorre online, todos os cálculos de proces-

samento digital devem ocorrer durante o tempo de um período de amostragem na aquisi-

ção dos dados dos sensores, ou seja, em tempo real. Neste sentido, a escolha de algoritmos

tais como DWT e Filtro Adaptativo com algoritmo LMS que apresentam baixa comple-

xidade computacional e bom desempenho tornam-se de grande relevância (KONEZNY;

RAO, 1995).

Neste trabalho, foi utilizada uma bancada de testes (HENRIQUES et al., 2010)

para validar a técnica desenvolvida em situações reais de falha identificadas em campo

do estudo de caso. O conjunto atuador-válvula em estudo, encontra-se instalado na ban-

cada de teste com um sistema de freio a disco acoplado ao seu eixo. Deste modo, os

esforços mecânicos exercidos pelo fluxo de fluidos no interior de uma válvula durante os

movimentos de abertura ou fechamento podem ser emulados.

O sistema foi instrumentado para possibilitar o monitoramento do esforço exer-

cido pelo atuador nas engrenagens que comandam a abertura e fechamento da válvula,

bem como situações atípicas oriundas do desgaste das engrenagens. Deste modo, senso-

res de torque e vibração foram instalados em pontos específicos para coletar dados em

condições de operação normal, de desgaste e de falha. Visando a predição em tempo real

e baixo consumo de energia, os sinais obtidos da variação do comportamento dinâmico do

sistema em teste foram aplicados aos algoritmos embarcados em hardware denominados

Fault Detection System (FDS) (PICCOLI et al., 2013a; PICCOLI et al., 2015a) e Fault

Detection Index (FDI) (PICCOLI et al., 2015b) e descritos em linguagem Verilog.

A implementação em hardware dos algoritmos FDS e FDI para o monitoramento

de condição de um sistema possibilitou o desenvolvido em chip para área de manuten-

ção inteligente, agregando em micro escala o baixo consumo de energia, a detecção e

diagnóstico em tempo real. Desta forma, foi testada em laboratório e apresentada uma

proposta inovadora que possa atender a diversos equipamentos no que tange ao processo

de predição, diagnóstico e detecção de falhas.



24

1.1 Visão Geral dos Objetivos

O principal objetivo deste trabalho é especificar, implementar e avaliar uma nova

solução descrita em hardware capaz de detectar, prever e diagnosticar falhas em tempo

de operação de equipamentos industriais. O caso em estudo foi testado em laboratório

com uma válvula elétrica comercial utilizada na indústria petrolífera que, durante o seu

funcionamento, foi submetida à injeção de falhas para emular os principais problemas

operacionais que ocorrem no ambiente industrial.

Este trabalho apresenta os passos para a concepção de um circuito integrado digital

aplicado à manutenção inteligente. Foi iniciado pelo fluxo de projeto, verificação e alguns

testes experimentais realizados com estudo de caso de uma aplicação real.

1.2 Contribuições

A principal contribuição deste trabalho é o desenvolvimento de um sistema de

manutenção inteligente no padrão Open Systems Architecture for Condition-Based Main-

tenance (OSA-CBM) (SWEARINGEN et al., 2007) de comunicação aberta para sistemas

de monitoração e diagnóstico de máquinas (seção 2.2.1 manutenção baseada na condi-

ção), testado e validado em ambiente de emulação real através de uma bancada de testes.

Foram utilizadas técnicas de injeção de falhas em hardware durante o funcionamento.

Em uma primeira versão denominada de Fault Detection System (FDS), o algo-

ritmo opera com técnicas de processamento de sinais em tempo real e monitora o com-

portamento de uma válvula elétrica industrial até o nível de detecção das condições do

padrão OSA-CBM.

Neste cenário, uma nova versão melhorada também é apresentada, adicionando o

Fault Detection Index (FDI) (PICCOLI et al., 2015b) ao FDS (PICCOLI et al., 2013a;

PICCOLI et al., 2015a). Com isso, implementa-se a técnica FDS proposta em conjunto

com FDI para realizar o mesmo monitoramento anterior e classificar os tipos de falhas,

revelando assim o diagnóstico e a saúde do equipamento em forma de gráficos.

As soluções propostas neste trabalho propõem que as técnicas desenvolvidas em

software (PICCOLI et al., 2013a; PICCOLI et al., 2015a; PICCOLI et al., 2015b) sejam

implementadas em hardware. Esta tese traz os seguintes avanços e contribuições técnicas:



25

Tabela 1.1: Características das técnicas propostas.

Técnica Característica e Resumo

FDS em hard-

ware

Apresenta o sistema FDS com processamento de sinais des-

crito em linguagem de hardware Verilog. No laboratório,

foi utilizado um conversor de sinal A/D com um sistema de

aquisição de dados para converter os sinais dos sensores de

torque e vibração em formato digital, e depois processados

com o algoritmo no computador.

FDS + FDI em

hardware

Apresenta os sistemas FDS e FDI em conjunto com proces-

samento de sinais descrito em linguagem de hardware. O

chip é descrito em Verilog, tem a funcionalidade de teste e

pode ser acessado via comunicação serial SPI.

1.3 Apresentação dos Capítulos

Este trabalho foi divido em três partes, conforme descrito abaixo:

Parte I – Fundamentos página 27 (Capítulos 2 ao 4):

• Capítulo 2 (ESTADO DA ARTE EM TÉCNICAS DE MANUTENÇÃO INTELI-

GENTE): Apresenta uma breve introdução relacionada aos principais conceitos que

envolvem tolerância a falhas e manutenção inteligente;

• Capítulo 3 (REVISÃO DE TÉCNICAS E METODOLOGIAS): Apresenta algumas

técnicas para a detecção de falhas, principais conceitos de sistema embarcado de

tempo real e ferramentas computacionais usadas na análise e no projeto de circuitos

digitais.

• Capítulo 4 (UTILIZAÇÃO DE VÁLVULAS NO MODAL DUTOVIÁRIO DA IN-

DÚSTRIA DO PETRÓLEO): Aborda a importância e crescimento do modal duto-

viário no Brasil e um esquema de abastecimento para um típico terminal. Apresenta

um dos equipamentos mais críticos, utilizado no transporte de derivados de petróleo

como estudo de caso. Por fim, é realizado um levantamento bibliográfico relativo ao

estudo de caso e ao estado da arte na área de manutenção inteligente que serviram

de inspiração e referência para este trabalho.



26

Parte II – Metodologia página 79 (Capítulo 5):

• Capítulo 5 (PROPOSTA E IMPLEMENTAÇÕES DO SISTEMA): Apresenta as

técnicas FDS e FDI, a implementação em hardware proposta neste trabalho, usado

para a atividade de identificar condições de falhas a partir do monitoramento na

abertura e fechamento de válvula, sinais de torque e vibração, e a degradação do

mecanismo acionado pelo rotor de um atuador elétrico.

Parte III - Resultados e Conclusões página 99 (Capítulos 6 e 7):

• Capítulo 6 (RESULTADOS OBTIDOS): Apresenta os resultados obtidos a partir

de experimentos com uma bancada de testes e injeção de falhas reais via hardware

através da inserção de peças defeituosas e uso de disco de freio em tempo de exe-

cução sobre a válvula elétrica, onde foi instalado sensores e comunicação com o

sistema desenvolvido;

• Capítulo 7 (CONSIDERAÇÕES FINAIS): Apresenta as conclusões relacionadas às

técnicas submetidas aos testes no capítulo anterior, as conclusões relacionadas ao

desenvolvimento desta tese e finalmente sugere alguns trabalhos para serem desen-

volvidos no futuro.



PARTE I - FUNDAMENTOS



27

2 ESTADO DA ARTE EM TÉCNICAS DE MANUTENÇÃO INTELIGENTE

Devido a consequências catastróficas em aplicações de equipamentos na presença

de falhas (PANDYA; MALEK, 1998), e a demanda por processamento em tempo real,

a questão de tolerância a falhas tem ganhado atenção da comunidade científica nos úl-

timos anos. Atualmente, muitos equipamentos requerem resposta rápida, correta e uma

maior confiabilidade, pois enquanto a complexidade e autonomia operacional aumenta, a

intervenção humana pode ser reduzida.

Após a ocorrência de uma falha na atuação de uma ou mais engrenagens em um

sistema mecânico, por exemplo, poderá ocorrer uma parada, uma quebra ou tornar esse

sistema incontrolável. A continuidade de execução e controle desse sistema é fundamental

do ponto de vista da manutenção inteligente, principalmente em equipamentos operando

sob condições hostis de trabalho e instalados em locais remotos com acesso difícil ou

demorado.

Inicialmente, serão abordados alguns fundamentos nos tópicos de tolerância a fa-

lhas e manutenção, e posteriormente, com mais detalhe, o estado da arte na área de manu-

tenção inteligente: Tolerância a Falhas na seção 2.1 (página 27); Técnicas de Manutenção

na seção 2.2 (página 30); Estado da Arte em Manutenção Inteligente na seção 2.3 (página

36).

2.1 Tolerância a Falhas

Com a inserção dos computadores nos diferentes ramos da sociedade moderna,

os sistemas computacionais tornaram-se ferramentas indispensáveis, visto os inúmeros

benefícios alcançados com seu uso (AVIZIENIS, 1997). Tais benefícios tornaram-se im-

prescindíveis, podendo ter consequências trágicas quando os sistemas computacionais

deixarem de operar ou funcionarem incorretamente, a exemplo de: aeronaves, ferrovias,

controle de tráfego de automóveis; sistemas de emergência; controle de tráfego aéreo;

sistemas de segurança de usinas nucleares; equipamentos médico-hospitalares (CLARK;

PRADHAN, 1995).

Sistemas tolerantes a falhas contém mecanismos para detecção antes que falhas

ocorram. A concepção dos mecanismos de detecção exige conhecimento das classes de

falhas e seus efeitos sobre o comportamento do sistema. Além disso, um estudo de causas

e efeitos ajuda a caracterizar a susceptibilidade de o sistema falhar.



28

Uma abordagem efetiva para alcançar estas metas são os procedimentos de inje-

ção de falhas. Porém, para obter resultados consistentes, essa por sua vez, deve prover

também um modelo que represente igualmente falhas encontradas em operações reais

(MIREMADI; TORIN, 1995).

2.1.1 Definições de Termos Empregados

As falhas são causadas por fenômenos naturais de origem interna ou externa e

ações humanas acidentais ou intencionais (LAPRIE, 1995). Quando ocorrem defeitos ou

faltas no sistema, sua manifestação interna dá origem às falhas, que subsequentemente,

em sua manifestação externa, resultam em erros. Esses, por sua vez, podem ocasionar

falhas sistêmicas devido ao desvio do comportamento especificado do sistema, por exem-

plo, parada ou quebra. Portanto, existe uma relação de causa-efeito relacionada a estes

eventos conforme explicitado na Figura 2.1.1.

Figura 2.1: Relação entre defeito, falha, erro e falha sistêmica.

Fonte: adaptado de (BALEN; LUBASZEWSKI, 2014).

Na literatura que trata da manutenção, encontram-se diversas definições e concei-

tos apresentados para determinados termos (ABNT, 1994; LAPRIE, 1995). Na ausência

de uma palavra diferente de "falha" para traduzir failure optou-se por adotar "falha sistê-

mica" neste texto:

• Degradação é o processo por envelhecimento e desgaste de peças que aumenta a

probabilidade de ocorrência de falhas e diminui a confiabilidade e desempenho;

• A falha é a manifestação interna no sistema de um defeito em função da degradação

do mesmo, mas não necessariamente pode levar a um erro;

• O erro é o mau estado de funcionamento de um sistema que compromete seu de-

sempenho esperado;

• A falha sistêmica marca o término da capacidade do dispositivo ou sistema de de-

sempenhar sua função, levando invariavelmente à indisponibilidade;



29

• A causa de um erro é uma falha e pode levar a uma falha sistêmica pela manifesta-

ção de um ou mais erros no serviço entregue;

• O serviço entregue por um sistema é o comportamento conforme é percebido por

outro sistema, interagindo com o sistema considerado: seu(s) usuário(s).

A Figura 2.2 mostra alguns conceitos relacionados à terminologia de tolerância a

falhas. Quando uma falha causa uma alteração incorreta no estado da máquina, um erro

ocorre. O tempo entre a ocorrência da falha e a primeira percepção de um erro é chamado

latência da falha. Embora uma falha permaneça localizada no código ou circuito afetado,

múltiplos erros podem se originar da mesma e se propagar através do sistema. Se os

dispositivos de detecção necessários estão presentes, a propagação do erro será constatada

após um período de tempo denominado latência dos mecanismos de tolerância a falhas.

Quando os mecanismos de tolerância a falhas detectam um erro, diversas ações

podem ser iniciadas para a manipulação da mesma, visando conter os erros. A recupera-

ção ocorre se essas ações têm sucesso, caso contrário, o sistema encontra-se com defeito

(CLARK; PRADHAN, 1995).

Figura 2.2: Falha e consequências.

Fonte: modificado de (CLARK; PRADHAN, 1995).

2.1.2 Arquitetura de um Ambiente de Injeção de Falhas

O uso de técnicas de tolerância a falhas em sistemas com característica de tempo

real exige que as mesmas sejam validadas. Na validação por injeção de falhas são testa-

dos os mecanismos tolerantes, possibilitando a observação do comportamento do sistema

frente aos estímulos provocados pelas falhas injetadas (CHILLAREGE; BOWEN, 1989).

Uma arquitetura genérica para um ambiente de injeção de falhas é demonstrado

na Figura 2.3 (HSUEH; TSAI; IYER, 1997). Um ambiente de injeção de falhas consiste

basicamente em:

• Controlador: responsável por coordenar todo o ambiente, normalmente é um com-

putador que gerencia o processo de testes;



30

• Gerador de carga: responsável pelo fornecimento de comandos, os quais devem

ser executados pelo sistema alvo, no caso de software utiliza-se uma biblioteca de

carga de trabalho;

• Monitor: observa o sistema em teste, executa instruções quando necessário e faz

a interface entre o controlador e o sistema sob teste, disparando a coleta de dados

sempre que necessário;

• Injetor de falhas: utilizado via software ou hardware para injeção das falhas, emu-

lando a presença de falhas no sistema alvo;

• Sistema alvo: sistema sob teste onde as falhas serão injetadas e monitoradas;

• Coletor de dados: recolhe os dados do sistema;

• Analisador de dados: responsável por processar e analisar os dados coletados,

podendo trabalhar offline, online ou em tempo real.

Figura 2.3: Arquitetura de um ambiente de injeção de falhas.

Fonte: (HSUEH; TSAI; IYER, 1997)

O injetor de falhas, que pode ser implementado por hardware ou por software,

pode suportar diferentes tipos, localizações e tempos de falhas.

2.2 Técnicas de Manutenção

Com o advento da Revolução Industrial, que permitiu uma transição para novos

processos de manufatura e a fabricação de produtos em larga escala , surgiram necessida-

des de melhoria e mudanças positivas do paradigma da manutenção (AFFONSO, 2006).

A Tabela 2.1 apresenta os métodos clássicos de manutenção, dentre os quais a es-



31

tratégia preditiva é mais eficiente, pois pode indicar as condições reais de funcionamento

das máquinas com base no monitoramento do equipamento, e assim prever o tempo de

vida útil dos componentes das máquinas e equipamentos e as condições para que esse

tempo de vida seja bem aproveitado.

Tabela 2.1: Principais características das estratégias clássicas de manutenção.

Características
Estratégias

Manutenção

Corretiva

Manutenção

Preventiva

Manutenção

Preditiva

Estado de operação da máqui-

na/equipamento
Fora de serviço Fora de serviço

Operando ou fora

de serviço

Razão da interferência Falha
Inspeção progra-

mada

Controle progra-

mado ou contínuo

Tarefas a serem executadas na

máquina/equipamento

Reposição de pe-

ças/componentes

Desligamento para

inspeção/reposição
Monitoramento

Objetivo da intervenção
Retorno ao traba-

lho

Manutenção do

funcionamento

Predição ou detec-

ção

Fonte: (MARÇAL; SUSIN, 2005).

A engenharia de controle, focada em métodos clássicos de manutenção e no de-

senvolvimento de critérios de desempenho tais como a estabilidade e precisão, por sua

vez, necessita de algoritmos de detecção de falhas e isolamento mais precisos e eficien-

tes (LO; WONG; RAD, 2006). Existe uma variação da manutenção preditiva conhecida

como manutenção baseada na condição (CBM - Condition Based Maintenance) (Qiu et

al., 2006), em que as ações de reparos pela equipe de manutenção são tomadas com base

nas condições monitoradas na planta industrial.

A manutenção poderá torna-se proativa, por meio de sensores inteligentes ou fer-

ramentas analíticas de dados desenvolvidos para esse fim. Então, com o objetivo de con-

tinuar operando de maneira inteligente, o sistema poderá ser reconfigurado automatica-

mente quando uma falha é detectada e o defeito corrigido antes que se propague para a

saída do sistema.

2.2.1 Manutenção Baseada na Condição

A manutenção baseada na condição (CBM - Condition Based Maintenance) é uti-

lizada para monitorar a condição do equipamento, para reduzir a incerteza das atividades



32

de manutenção. Compreende o acompanhamento dos indicadores de funcionalidade do

equipamento em tempo de execução online (de tempo real) ou offline, obtendo assim um

indicativo de potenciais problemas e falhas incipientes que fariam com que o equipamento

ou componente se desviassem de um nível de desempenho aceitável.

A arquitetura aberta Open System Architecture for Condition-Based Maintenance

(OSA-CBM) (SWEARINGEN et al., 2007) para uma interoperabilidade dos componentes

do CBM é descrita em termos de camadas funcionais: desde detecção e aquisição de

dados até suporte de decisão. Uma descrição detalhada das entradas, saídas e funções

gerais das camadas são especificadas abaixo:

1. Aquisição de dados: O módulo de aquisição de dados fornece o sistema CBM com

dados do sensor ou transdutor digitalizados;

2. Manipulação de dados: Este módulo recebe e processa sinais e dados oriundos do

módulo aquisição de dados e de outros módulos de manipulação de dados;

3. Monitoramento das condições: O monitor de condição recebe dados de módulos

anteriores e de outros também monitorados. Seu foco principal é de extrair e com-

parar características com os valores esperados ou limites operacionais e indicadores

de condição de saída (por exemplo, nível baixo, nível normal e nível alto). Também

deve ser capaz de gerar alertas baseadas em limites operacionais predefinidos;

4. Avaliação da saúde: Recebe dados de diferentes monitores de condição ou de

outros módulos de avaliação da saúde. O foco principal de seu trabalho é o de

prescrever se a saúde no componente, no equipamento ou no sistema monitorado,

tem se degradado. Deve ser capaz de gerar registros de diagnóstico e prever possi-

bilidades de falha. O diagnóstico deve ser baseado em tendências apresentadas no

histórico de saúde, estado operacional, carga e no histórico de manutenção;

5. Prognóstico: a principal função desta camada é projetar o estado de saúde futuro

do equipamento ou estimar sua vida útil remanescente e deve ter a possibilidade de

tomar conta de dados de todas as camadas anteriores;

6. Apoio à tomada de decisão: Recebe dados do módulo de avaliação de saúde e

módulo de prognóstico. Seu foco principal é fornecer recomendações relacionadas

às estratégias de manutenção e modificação da configuração ou perfis do ativo. O

módulo precisa levar em consideração o histórico de operações, perfis atuais e futu-

ros, gerar ações recomendadas de como executar o ativo até que a missão atual seja

concluída sem ocorrência de avaria;



33

7. Interface humana (apresentação): O módulo de apresentação deve disponibilizar

dados de todos os módulos anteriores. Normalmente o status das camadas mais im-

portantes (avaliações de saúde, avaliações prognósticas ou recomendações de apoio

à decisão) e alertas serão exibidos nesta camada, com a capacidade de detalhar as

camadas dependendo da necessidades de informação do usuário.

A manutenção CBM baseia-se no fato de que a maioria das falhas não ocorrem

instantaneamente e que muitas vezes é possível detectá-la durante os estágios de dete-

rioração do equipamento. A deterioração do equipamento pode ser vista em uma curva

com dois importantes pontos "P"e "F", de Potencial ou Deteção de Falha (Potential for

Failure) e Falha Sistêmica (Failure). A Figura 2.4 mostra essa curva, após o ponto P, a

falha iminente pode ser detectada e no ponto F, o equipamento falha. O tempo decor-

rido entre "F"e "P"define a viabilidade da estratégia de manutenção CBM, caso não haja

tempo para tomar medidas e evitar as consequências, a manutenção não pode ser realizada

eficientemente e a técnica CBM torna-se inviável.

Figura 2.4: Curva P-F de resistência à falha.

Fonte: Adaptado de (FONTAINE et al., 2013).

A demanda por confiabilidade, aumenta a necessidade da integração de técnicas

de sensoriamento para monitoramento das condições de máquinas rotativas (DUAN et al.,

2016). A sensibilidade de sensoriamento para o diagnóstico de falhas, tais como sinais de

vibração, análise de óleo e imagem infravermelha são resumidos na curva da Figura 2.5.

Quanto mais incipiente a descoberta da falha e sua origem, naturalmente menores são os

gastos associados a manutenção.



34

Figura 2.5: Diferentes técnicas de detecção e o seu correspondente custo de manutenção.

Fonte: Traduzido de (DUAN et al., 2016).

A manutenção inteligente leva para os limites mais à esquerda da curva P-F, resul-

tando em uma qualidade melhor do produto, mais disponibilidade dos ativos e aumento

dos lucros operacionais.

2.2.2 Manutenção Inteligente

A manutenção inteligente, ou proativa, possibilita o monitoramento contínuo e sis-

temático do estado operacional de equipamentos, revelando o comportamento temporal

por meio de indicadores da degradação de variáveis de interesse. Essas podem prever

riscos de um comportamento inaceitável ao longo do tempo, bem como identificar exa-

tamente quais componentes de uma máquina tendem a falhar. São utilizadas ferramentas

de predição e avaliação de desempenho de um determinado equipamento, que em última

instância, permitem a manutenção proativa para evitar as avarias, sua quebra e eventual

interrupção do processo (LEE, 2003).

Geralmente é aplicada em equipamentos mais complexos e críticos dentro de um

processo industrial, que exigem maior demanda de confiabilidade do sistema, segurança

e menor custo de operação. São utilizadas tecnologias tais como: sensores inteligen-

tes (smart sensors), capazes de transmitir informações do equipamento; sensores online

reprogramáveis, projetados para serem reconfigurados; processamento digital de sinais;

algoritmos genéticos, inteligência artificial, lógica fuzzy e rede neural, utilizados para

analisar tendências e indicar decisões sobre a probabilidade de falha de equipamentos

monitorados na planta.



35

A Figura 2.6 mostra o esquema do sistema de manutenção inteligente tolerante a

falhas (GAO; CECATI; DING, 2015), em que a supervisão está integrada com o diagnós-

tico de falhas. O diagnóstico de falhas em tempo real pode indicar se o sistema está com

falha, localizá-la e avaliar o nível de degradação do funcionamento do equipamento. Com

base nas informações obtidas, o sistema de supervisão pode, portanto, tomar ações apro-

priadas no que tange à tolerância a falhas, como modificar parâmetros para compensar

o esforço de um atuador, ajustar ou reconfigurar o controlador ou até mesmo indicar re-

paro para substituir componentes defeituosos, de modo que os efeitos adversos de paradas

sejam amenizados.

Figura 2.6: Esquema do sistema de manutenção inteligente tolerante a falhas.

Fonte: Traduzido de (GAO; CECATI; DING, 2015).

A entrada (u) e saída (y) do sistema da Figura 2.6, alimentam o algoritmo de

diagnóstico de falha submetido à falha do atuador (fa), componente (fc) e sensor (fs). A

consistência das informações do processo é verificada em tempo real de acordo com as

características do sistema e, um diagnóstico da saúde é extraído para tomada de decisão.

Através das técnicas apresentadas neste trabalho, serão explorados ferramentas e

métodos de prototipação que possibilitarão no futuro, além das tarefas de prever e detectar

falhas, a possibilidade de uma implementação de um sistema de sensor inteligente ou

então sensores inteligentes 1, com resposta em tempo real, baixo consumo de energia

e que possa ser aplicado em equipamentos automatizados com controle de feedback de

forma a diminuir os efeitos da degradação na presença de falhas em equipamentos.

1O sensor inteligente funciona não apenas como um dispositivo de captura de sinal, mas também como
uma máquina de classificação e análise. Uma abordagem com sistema de sensor inteligente (em ingês Smart
Sensor System), consiste em elementos integrados de detecção, dispositivos de captura de sinais, algoritmos
de processamento de sinais e procedimentos de interpretação e tomada de decisão. Na ausência de um
operador, o sistema deve processar sinais e indicar o estado do processo e suas alterações, interpretar a
informação detectada e decidir a ação de controle mais apropriada (WANG; GAO, 2006).



36

2.3 Estado da Arte em Manutenção Inteligente

As atividades de manutenção inteligente são usadas para planejar ações de manu-

tenção com base em condições das máquinas, resolvendo os problemas antecipadamente.

Assim, além de evitar falhas, controlam também a precisão das máquinas. Ao aumentar

o conhecimento nessa área, as empresas podem economizar dinheiro com menos para-

das, redução no custo de estoques, redução nos tempos de reparo e aumento da robustez

do processo de fabricação, levando a um desempenho mais previsível (RASTEGARI;

ARCHENTI; MOBIN, 2017).

O principal objetivo da pesquisa baseada em condições CBM é o de desenvolver

sistemas autoajustados e integrados capazes de monitorar várias condições de trabalho

e prever falhas com supervisão mínima do operador. Nesse sentido, nos últimos anos,

consolidou-se a produção científica voltada ao diagnóstico de falhas em diversas aplica-

ções.

A detecção limita-se a encontrar a falha via medições em tempo real. Já o diagnós-

tico, além disso, visa descobrir o tipo de falha e sua respectiva causa em fase de operação

da máquina (online) ou em manutenção (offline). Muitos são os transdutores que podem

ser usados para auxiliar na detecção de falhas, incluindo os sensores por emissão acústica,

torque, som, vibração, temperatura, corrente, entre outros. Os métodos de monitoramento

visam verificar a magnitude do sinal, o valor da raiz quadrada da média ou a magnitude

do espectro de potência e são inspecionados, tipicamente, através de um limite (WANG;

GAO, 2006). Os métodos mais comuns de monitoramento baseados na condição, utili-

zam uma gama grande de técnicas de detecção através da análise de sinais de medidas de

sensores de vibração e acústica, por exemplo.

Um exemplo de aplicação em sistemas de transissão veicular pelo monitoramento

de dados obtidos por sensor de pressão, pode ser obtido em Jian et al. (2018). A trans-

missão automática tornou-se amplamente utilizada na fabricação de caminhões onde o

sistema de embreagem-atuador eletro-hidráulico é muito utilizado devido à excelente de-

manda de fluxo e capacidade de controle de pressão. No entanto, a vibração induzida

pelas características internas não-lineares do movimento da bobina acoplada à válvula

com fluidos dinâmicos do sistema hidráulico acarreta em parâmetros inadequados, o que

provoca instabilidade e consequentemente a deterioração do desempenho e inesperados

danos ao hardware. Jian et al. (2018) apresentou um método de projeto ideal para a vál-

vula de controle de pressão que garante um desempenho estável e resposta rápida do



37

acionamento da embreagem do sistema.

Outras pesquisas analisaram o tempo de resposta dinâmico e a força de abertura

das válvulas hidráulicas, mas Jian et al. (2018) analisou os efeitos da pressão sobre a

estabilidade e a resposta dinâmica do sistema através da análise de bifurcação baseada no

modelo matemático não linear do sistema hidráulico e realizou uma comparação entre os

resultados da resposta de pressão experimental e simulação do modelo no domínio tempo

e frequência.

O esquema do sistema hidráulico para o equipamento de teste experimental é mos-

trado na Figura 2.7(a). A Figura 2.7(b) mostra a imagem do equipamento de teste experi-

mental.

Figura 2.7: O esquema do sistema hidráulico para o equipamento de teste experimental.

bomba
válvula de 
redução de

pressão

cárter

temperatura

tanque de fluidotermopar

aquisição 
de dados

válvula de 
alívio de
pressão

bomba

válvula solenoide

pistãocontrole e aquisição de dados

a) Esquemático do equipamento de teste (ET). b) Experimento com ET.

Fonte: traduzido de (JIAN et al., 2018).



38

O sistema hidráulico é composto por três elementos: uma válvula solenoide, uma

válvula de controle de pressão operada por piloto e um pistão de embreagem. A válvula

solenoide atua como um estágio da válvula piloto com uma pressão de alimentação Ps.

A força eletromagnética gerada pela corrente de controle aciona a válvula solenoide para

abrir e gerar a pressão de operação piloto Pc na câmara da válvula de controle de pressão.

A bobina da válvula de controle de pressão desliza horizontalmente na válvula para ajustar

a taxa de fluxo dentro e fora da câmara de pistão até que o sistema atinja um novo ponto de

equilíbrio. As portas da válvula estão conectadas com a câmara do pistão da embreagem

e o cárter com a mangueiras 1 e 2.

Uma bomba de engrenagem é acionada por um motor elétrico para fornecer um

fluxo constante de 160 L/min. Uma válvula de alívio de pressão é usada para ajustar a

pressão da linha do sistema e é conectada à válvula hidráulica de teste pela mangueira de

borracha. Os sensores de pressão PS1, PS2 e PS3 são usados para medir a pressão da

linha, a pressão operacional do piloto e a saída da válvula de controle de pressão. Para

o experimento, os parâmetros como pressão da linha, temperatura do fluido e parâmetros

da válvula foram definidos como idênticos aos parâmetros da simulação.

O experimento da válvula otimizada sem restrição de estabilidade com pressão

operacional de 0,3 MPa foi realizado para verificar a característica de oscilação da si-

mulação. Os dados de saída no domínio do tempo e os espectros de frequência da trans-

formada rápida de Fourier (FFT - Fast Fourier Transform correspondentes são mostrados

na Figura 2.8. A frequência de oscilação do resultado experimental é consistente com o

resultado da simulação. No entanto, a magnitude da oscilação da pressão no resultado da

simulação é um pouco menor do que no resultado experimental.



39

Figura 2.8: Histórico no domínio do tempo e espectro FFT sem restrição de estabilidade

sob pressão piloto de 0,3 MPa.

Fonte: traduzido de (JIAN et al., 2018).

Wang et al. (2013) apresentam um método baseado em transformada wavelet adap-

tativa (AWT - Adaptive Wavelet Transform), um conjunto de decomposição do modo em-

pírico (EEMD - Ensemble Empirical Mode Decomposition) e dimensão de correlação

(CD - Correlation Dimension), para detectar falhas, mesmo com valores de sinal de vi-

bração não-estacionário, em motor diesel da Figura 2.9.

Figura 2.9: O sistema experimental do motor.

Fonte: (WANG et al., 2013).

A ideia básica da metodologia com processamento de sinais na Figura 2.10 é o

de filtrar o ruído com AWT, o EEMD para extração de características e a identificação

de falhas com CD. Os testes foram realizados com um motor a diesel de seis cilindros



40

operando a 2300 rpm e a 100% de carga, um dinamômetro, um sistema multi-analisador

LMS SCADA III (amostragem de dados do acelerômetro de 20 kHz) e um computador.

Figura 2.10: Representação gráfica do fluxo de sinal do sistema de detecção de falhas do

motor.

Fonte: traduzido de (WANG et al., 2013).

Um método para modelar o sinal de vibração com base na transformada AWT foi

proposto por Chen, Chua e Lim (2006). Foi desenvolvida a otimização paramétrica da

AWT por um algoritmo genético (GA - Genetic Algorithm). Desta maneira, conforme a

Figura 2.11, dados de simulação foram utilizados para extrair características relevantes

para o diagnóstico de falha de um motor hidráulico à água.

Figura 2.11: Sistema de teste de motor hidráulico de água.

Fonte: traduzido de (CHEN; CHUA; LIM, 2006).



41

A Figura 2.12 mostra os gráficos planares no domínio tempo-freqüência dos sinais

simulados obtidos pela modelagem do sinal de vibração real em cinco condições do pis-

tão: (a) em condição normal; (b) e (c) com rachaduras curtas de 5 mm na parte inferior e

na parte superior do pistão; (d) e (e) com rachaduras longas de 10 mm na parte inferior e

na parte superior do pistão. Pode-se observar nos cinco sinais no plano tempo-frequência

gerados pelos cinco pistões do motor hidráulico, a mudança da forma de onda e amplitude

do impulso. Na Figura 2.12, as amplitudes de impulso da transformada contínua de wave-

let (CWT - Continuous Wavelet Transform) dos sinais aumentam de (a) para (e), sendo os

valores do módulo de coeficiente da CWT dos sinais de vibração em condições normais

os menores dentre as cinco condições do pistão.

Figura 2.12: Gráficos no domínio tempo-frequência da CWT de Morlet do sinal simulado

obtido pela modelagem do sinal de vibração em cinco condições do pistão.

M
ó

d
u

lo
d
o

c
o
e

fi
c
ie

n
te

M
ó

d
u

lo
d
o

c
o
e

fi
c
ie

n
te

M
ó
d

u
lo

d
o

c
o

e
fi
c
ie

n
te

M
ó
d

u
lo

d
o

c
o

e
fi
c
ie

n
te

Frequência (Hz)

Frequência (Hz)

Frequência (Hz)

Frequência (Hz)

Frequência (Hz) Te
mpo (sTempo

(s)

Tempo
(s)

Tempo
(s)

Temp
o (s)

Temp
o (s)

(a) Condição normal do pistão; (b) Rachadura superior curta; (c) Rachadura 
superior longa; (d) Rachadura inferior curta; (e) Rachadura inferior longa.

Fonte: traduzido de (CHEN; CHUA; LIM, 2006).

Como a água não é tóxica, ambientalmente amigável à prova de fogo, e ainda

de baixo custo, prontamente disponível e livremente descartável, ao contrário do óleo,

levou muitas indústrias a adotarem sistemas hidráulicos à água para substituir seus antigos

sistemas hidráulicos a óleo. O sistema hidráulico à água em questão permite o motor de

pistão axial operar na faixa de 300 a 3000 rpm, a velocidade de rotação de cada bomba



42

hidráulica à água (no total são 5) é de 1450 rpm. Então a técnica baseia-se nas suas

frequências fundamentais, que consistem em 55 Hz do motor hidráulico e 120 Hz da

bomba hidráulica. Porém, é um resultado parcial, visto que, na atualidade, uma bomba

convencional de pistão com motor giratório produz torque e momentos desequilibrados

no eixo e no corpo do cilindro, o que causam grandes vibrações mecânicas e ruídos que

não foram considerados na simulação.

Atualmente, na indústria as máquinas rotativas são amplamente utilizadas, porém

devido a severas condições de trabalho que são submetidas, tais como torque, força de im-

pacto e alta velocidade de operação, seus componentes sofrem inevitavelmente desgastes

e apresentam diversas falhas. Yuan et al. (2017) propõe o uso personalizado de múlti-

plas wavelets (PLONKA; STRELA, 1998) adaptável para monitoramento da degradação

da saúde e detecção de falhas fracas (baixa relação sinal/ruído), especialmente a iden-

tificação quantitativa de assinatura de falha fraca. A Figura 2.13 mostra o experimento

realizado com rolamento de locomotiva e caixa de redução para demonstrar a eficácia e

viabilidade do método proposto.

Figura 2.13: Esquemático da instalação do equipamento para teste de rolamento.

Fonte: traduzido de (YUAN et al., 2017).

O gráfico da Figura 2.14 (YUAN et al., 2017) demonstra a capacidade do mé-

todo para detectar falha fraca no rolamento em comparação com outros métodos, a saber,

Daubechies wavelets (Db4), Geronmo-Hardin-Massopust (GHM) wavelets e EEMD.

Figura 2.14: Valor máximo normalizado com diferentes métodos de teste em rolamentos.



43

Shao et al. (2017) explora o método de aprendizagem profunda associada a um tipo

de rede neural (autoencoder) aplicado para o diagnóstico de falhas em caixa de câmbio

e rolamentos de locomotivas elétricas. Conforme o autor, a complexidade computacional

é a principal deficiência do método de aprendizado profundo, no entanto, a maioria dos

testes pode ser concluída em menos de 40 s. São apresentados na Figura 2.15 os sinais

de vibração (à esquerda) e seus respectivos espectros de frequência (à direita) de nove

condições de trabalho do rolamento para um motor de 500 rpm.

Figura 2.15: Nove condições de falha do rolamento.

Fonte: traduzido de (SHAO et al., 2017).

O monitoramento em condição dos elementos rolantes em máquinas rotativas tem

sido objeto de extensa pesquisa devido ao seu papel crucial na sua operação ininterrupta.

Rai e Upadhyay (2017) apresentam um método aplicado a sinais de vibração coletados

em testes de rolamentos para avaliação da degradação do desempenho com base em de-



44

composição de modo empírico (EMD - Empirical Mode Decomposition) e agrupamento

de k-medoids, que por sua vez, é uma técnica de particionamento de grupos dividindo

dados compostos de n objetos em grupos definidos de k. Em offline as amostras de sinal

adquiridas são submetidas a técnica EMD. Os vetores de características extraídas ao longo

da vida útil de um rolamento degradado são usados para treinar o modelo k-medoids. Fi-

nalmente, é realizado o teste online, uma curva de valor de confiança é gerada entre 0 e 1,

onde valores próximos de 1 indicam que o rolamento está em condições normais e um va-

lor próximo a 0 indica falha no rolamento. Conforme os gráficos gerados na Figura 2.16,

com a técnica EMD já na etapa inicial desse trabalho, a degradação pode ser interpretada

por um especialista humano sem necessitar de todo o processamento com o agrupamento

de k-medoids.

Figura 2.16: Sinais de vibração para diferentes condições de degradação.

Fonte: (RAI; UPADHYAY, 2017).

Rai e Upadhyay (2017) também realizaram uma revisão bibliográfica que demons-

tra que os sinais de vibração são amplamente utilizados no monitoramento de condição.

No entanto, é muito difícil determinar as características de falha em rolamentos necessi-

tando construção de representação das características no espaço funcional que pode limi-



45

tar a informação de falha e sua precisão. Por outro lado, os modelos de prognóstico que

utilizam algoritmos de aprendizagem de máquina (redes neurais, mapas auto-organizados,

entre outros) para processar as características de entrada e construir o indicador de saúde

do rolamento, consequentemente necessitam menor tempo computacional para serem im-

plementados online.

Atualmente a tecnologia de emissão acústica (AE - Acoustic Emission) é empre-

gada para investigar técnicas de detecção de falhas em transporte ferroviário, pois é um

método eficaz para uso em detecção não destrutivo e de tempo real. Zhang et al. (2018),

apresenta um método de detecção de falhas em transporte ferroviário por algoritmo para

cancelamento adaptativo de ruído (ANC - Adaptive Noise Cancellation) com cancela-

mento auto-adaptativo de ruído (SANC - Self-Adaptive Noise Cancellation), pois os méto-

dos tradicionais são limitados por perderem informações úteis dos sinais ou não poderem

adaptar-se às variações do ruído.

Utilizou-se filtro adaptativo para eliminar ruídos de alta frequência, especialmente

para sobreposições de frequência entre sinais de ruído e de defeito, e método de entropia

Shannon (por energia) para detectar falhas nos trilhos. Considerando o requisito de tempo

real na detecção de falhas, o método de filtragem adaptativa com algoritmo de tamanho

de passo variável dos mínimos quadrados médios (VSS-LMS - Variable Step-Size Least

Mean Square) e o processamento por computador foi necessário para analisar grande

volume de dados.

A técnica de filtragem do ruído para compensar a distorção do sinal do trem na

velocidade máxima de 140 km/h é mostrada na Figura 2.17, onde o sinal de referência

está relacionado com o sinal de ruído com várias combinações diferentes de amplitude.

Figura 2.17: Método de filtragem de ruídos com algoritmos SANC e ANC.

Fonte: traduzido de (ZHANG et al., 2018).



46

Em uma simulação de falha crescente do monopolo (quebra de lápis), foram ad-

quiridos sinais de emissão acústica na superfície de contato da roda no trilho. O espectro

de freqüência desses sinais são mostrados na Figura 2.3, onde pode-se observar a dispo-

sição dos principais componentes de frequência na faixa entre 100 kHz e 400 kHz.

Figura 2.18: Espectro de freqüência de sinais de falha simulados no transporte ferroviário.

Fonte: traduzido de (ZHANG et al., 2018).

A Figura 2.3 mostra sinais de ruído com diferentes amplitudes e espectros de

frequência para velocidades entre 6 km/h e 120 km/h do trem, com um incremento

de 6 km/h para cada teste. Pode-se notar que os componentes de alta e baixa frequência

dos sinais de ruído têm sobreposições com os sinais de falha (Figura 2.3), principalmente

em alta velocidade do trem (acima de 78 km/h), podendo causar um efeito maior na

detecção de sinais de falha em baixa frequência (entre 100 kHz e 250 kHz) devido à

fricção e desgaste da superfície de contato da roda à ferrovia e ao aumento da força do

ruído aleatório.

Figura 2.19: Espectros de frequência de sinais de ruído a diferentes velocidades.

Fonte: traduzido de (ZHANG et al., 2018).



47

Pode-se observar que para o sistema da Figura 2.17, com uma taxa de amostragem

do sinal igual a 1 kHz, um grande volume de dados é necessário para processar o sinal

de referência e o sinal de leitura. Portanto, é necessário uma boa estação de trabalho para

essa tarefa pesada.

As máquinas rotativas estão presentes na produção de energia e transporte, entre

inúmeras outras aplicações. O tempo de inatividade, causado por falhas em componen-

tes tais como rolamentos ou engrenagens, reflete diretamente na viabilidade econômica

de grandes sistemas. Sobie, Freitas e Nicolai (2018) abordam diretamente esses desafios

gerando dados de treinamento obtidos com simulações dinâmicas de rolamento com fa-

lhas e o algoritmo de aprendizagem treinado foi validado com conjunto de quatro dados

experimentais. Foram feitas simulações em condições saudável e de falha externa para

velocidades de 1260, 1500, 1860 e 2220 rpm. Durante 50 dias foram coletados experi-

mentalmente dados de falha de rolamento de uma turbina de energia eólica comercial de

2 MW em operação com velocidade do eixo de aproximadamente 1800 rpm. Uma bar-

reira que impede sua implantação para o monitoramento de condições através da apren-

dizagem de máquina (machine learning) na indústria, é a sua dependência de dados de

falha em serviço (online). No entanto, essa pesquisa fornece um ponto de partida ao qual

os dados em tempo de execução podem ser adicionados ao algoritmo para melhorar ainda

mais o desempenho do classificador.

Em equipamentos de velocidade variável, como turbina de energia eólica e trens,

o sinal de vibração adquirido é não-estacionário e não-linear. As técnicas tradicionais

de processamento de sinais estacionário são ineficientes para diagnosticar as falhas da

máquina em condições que variam no tempo. Maheswari e Umamaheswari (2017) apre-

sentam uma revisão bibliográfica dos métodos desenvolvidos nos últimos 3 anos. Na

técnica parametrizada de análise no tempo-frequência, a transformada discreta de wave-

let (DWT - Discrete Wavelet Transform) (WALNUT, 2002) é usada para decompor o

sinal em bandas de baixa e alta frequência, uma vez que as assinaturas de falhas em altas

frequências do sinal de vibração são difíceis de detectar. Pode-se utilizar em conjunto

com outra técnica a exemplo da análise de assinatura atual do motor (MCSA - Motor

Current Signature Analysis). Nos modelos de observação baseados no conhecimento, os

pesos das redes neurais artificiais podem ser ajustados pelo algoritmo de mínimos quadra-

dos médios (LMS - Least Mean Squares) (HAYKIN, 2001). Já o filtro adaptativo LMS

foi empregado para extrair características estacionárias cíclicas de sinais de vibração e,

em seguida, a amplitude demodulada é analisada para encontrar assinaturas defeituosas



48

de rolamentos danificados.

Conforme Devi e Saravanan (2018), o diagnóstico de falhas em tempo real é im-

portante para turbinas a vapor pois são dispositivos chaves, devido ao fato de que as falhas

resultam na redução drástica do fornecimento de energia em uma usina. A Figura 2.20

mostra uma arquitetura de hardware implementada em FPGA para uma técnica existente

de detecção de falhas de turbina a vapor e sistema de gerenciamento da manutenção (STF-

DOMS - Steam Turbine Fault Detection and Operation Maintenance System) que pode se

comunicar, através de uma plataforma de prototipagem eletrônica de hardware Arduíno,

por troca de mensagem de falha em uma rede sem fio (GSM - Global System for Mobile

Communications) para as plantas localizadas em áreas remotas. Os dados dos sensores

são processados continuamente pelo Arduíno e um alerta é enviado para uma estação mó-

vel, quando algo for detectado. O diagnósticos de deterioração na eficiência da turbina

e consumo (em kW ) e suas interpretações apropriadas dependem de informações confiá-

veis de 7 parâmetros que são: fluxo do acelerador, a pressão do acelerador, a pressão do

primeiro estágio, a pressão de reaquecimento, a pressão de cruzamento, a eficiência das

turbinas de alta e baixa pressão. Foi projetado em linguagem de programação Verilog e

implementada em hardware FPGA um algoritmo para que quando os dados dos sinais

estejam além de um limite predefinido (threshold), o diagnóstico seja realizado imediata-

mente.

Figura 2.20: Configuração de hardware do sistema STFDOMS implementado.

Fonte: traduzido de (DEVI; SARAVANAN, 2018).

Os atuadores eletromecânicos aeroespaciais (EMA - Aerospace Electromechani-

cal Actuators), por oferecerem melhor manutenção do que seus equivalentes hidráulicos,

ganharam maior relevância na sua utilização em sistemas de propulsão para aeronaves nos



49

últimos anos. Arriola e Thielecke (2017) investigaram modelos de monitoramento base-

ados em algumas funções para detectar e isolar falhas críticas. As falhas mais comuns

no atuador operando a 180 Hz foram modeladas de acordo com seus efeitos. Cinco fun-

ções de monitoramento, incluindo efeitos parasitas não-lineares atribuídos ao sinal, foram

simuladas e detectadas. Foi verificado que as folgas nos componentes do atuador tem im-

pacto forte na definição de limiares de detecção (threshold) devido a incertezas (fricção

não-linear estática e columbiana).

Em Shahbazi, Poure e Saadate (2018) é apresentada e validada uma interface ele-

trônica de potência tolerante a falhas para sistemas de energia eólica com geradores de

indução duplamente alimentados. As turbinas eólicas estão instaladas em áreas remotas

onde sua manutenção é cara e demorada, os dispositivos conversores são apontados como

uma das partes mais frágeis e são responsáveis por aproximadamente 14% do tempo de

inatividade total das turbinas eólicas. Muitos dos algoritmos de detecção de falhas exis-

tentes são ineficientes ou mesmo incapazes de detectar a falha, devido ao fato da corrente

do rotor ser insuficiente em baixa frequência. Então, foi empregado um método de de-

tecção de falhas que baseia-se na comparação direta das tensões de polo com valores

estimados, ao invés das tradicionais medidas de corrente. Nesse método da Figura 2.21,

foram realizados as primeiras simulações no MATLAB/Simulink, os blocos foram com-

pilados com todas as funcionalidades para blocos de DSP, onde são utilizados bibliotecas

desenvolvidas pela Altera para implementar projetos em FPGAs. Desta maneira, todos

os blocos de DSP foram compilados automaticamente e algumas funções não disponíveis

na biblioteca foram desenvolvidas em códigos em linguagem de descrição de hardware

(VHDL - VHSIC Hardware Description Language) para serem integradas no projeto. De-

pendendo dos parâmetros do sistema, é configurado a variável N no algoritmo detecção

de falhas que depende diretamente do atraso total no loop de controle (incluindo senso-

res, A/D, D/A, FPGA e conversores), que está relacionada também com a duração de

um contador. A saída deste contador mede o tempo durante o qual o erro de tensão foi

suficientemente alto (maior que 30) para a detecção de falha. Então para uma simulação

com taxa de amostragem de 1 µs, na ocorrência de uma falha por um longo período de

tempo, o limite de atraso para o diagnóstico de falha, quando ajustado o parâmetro N do

contador para 30, corresponde a 30 µs. Essa técnica, com atraso de 30 µs de detecção foi

comparada com outras de monitoramento em Tempo Real com atrasos de 1,2 ms e 6 ms.



50

Figura 2.21: Representação do modelo de sistemas para detecção de falhas no Simulink.

Fonte: (SHAHBAZI; POURE; SAADATE, 2018).

Gonçalves et al. (2011) propôs uma implementação em hardware de um método

de detecção e diagnóstico de falha para uma válvula elétrica. Nesse trabalho, foi consi-

derada uma implementação em parte em FPGA e outra no computador (PC - Personal

Computer), limitando assim a aplicação do sistema em um cenário de baixo consumo de

energia. O atuador foi modelado por um conjunto de equações algébricas e diferenciais, a

fim de avaliar, por meio de simulação, o seu comportamento em diferentes condições de

operação, incluindo comportamento normal, de degradação e de falhas. A complexidade

do método adotado para realizar o diagnóstico com mapas auto-organizáveis pode limitar

a aplicação em tempo real.

Os efeitos da válvula elétrica em condições de falha também foram estudados por

meio de uma arquitetura de fusão de sensores, correlacionando sinais de torque e vibração

por (FACCIN, 2011), resultando em gráficos estatístico para avaliação do mesmo e na

identificação das assinaturas características das falhas por (BÖESCH, 2011).

2.3.1 Resumo do Estado da Arte

Os métodos de análise de sinais para o monitoramento da condição da máquina e

de reconhecimento de padrões com inteligência artificial, têm sido amplamente utilizados

para o diagnóstico de falhas, porém, segundo Shao et al. (2017), apresentam três proble-

mas inerentes: (1) os sinais de vibração adquiridos geralmente não são lineares e estacio-

nários. (2) As características sensíveis para aprendizagem são selecionadas manualmente

de acordo com o problema específico para capturar automaticamente o diagnóstico da

falha. (3) As arquiteturas de redes neurais, em diagnóstico de falhas de máquinas, são

difíceis de aprenderem eficazmente e superficiais na representação dos relacionamentos

complexos não-lineares. Embora Shao et al. (2017) tenham apresentado uma solução com

inteligência artificial adaptável para detecção online, boa parte do trabalho deve ser feita



51

offline.

Outro cenário abordado nas pesquisas atuais nos métodos e práticas de diagnóstico

de falhas mecânicas é o de não só estabelecer uma série de meios efetivos de detecção de

falhas durante o estágio de vida da máquina, mas também monitorar falhas devido aos

seguintes aspectos e dificuldades:

• Os sinais sempre sofrem perturbações por múltiplas fontes de ruído e são contami-

nados por interferência eletromagnética em instalações industriais, resultando em

uma baixa relação sinal-ruído (SNR - Signal to Noise Ratio) do sinal de falha;

• As falhas com potencial de erro ou em estágio inicial caracterizam-se por sintomas

não óbvios e assinaturas de detecção frágeis;

• Abordagens em sistemas com engrenagens de transmissão complexos onde os sen-

sores são instalados externamente na caixa de redução para detectar falhas internas,

reduzem os níveis de sinais de falha, levando à difícil identificação da assinatura.

Embora o Estudo de Caso deste trabalho esteja focado em Atuador Elétrico para

controle de abertura e fechamento de válvula, a maior parte das máquinas pesquisadas,

seja na indústria aeronáutica ou ferroviária, seja na de produção de energia eólica ou

de petróleo, opera em frequências próximas (centenas de Hertz) e possui engrenagens ou

componentes mecânicos que possam apresentar falhas internas (engrenagens desgastadas,

quebradas, rolamentos gastos ou fraturados) ou externas (sobrecarga mecânica, válvula

bloqueada) de origem similar.

A Tabela 2.2 mostra um resumo do estado da arte das principais estratégias inte-

ligentes abordadas neste capítulo, apresentando sua plataforma de implementação (PC,

FPGA ou ASIC), o tipo de detecção de falha (offline, online ou tempo real) e o sensor

utilizado.

Dentre tantas técnicas existentes, não se pode afirmar qual é a melhor, algumas

são extremamente complexas e por isso operam offline, outras nem tanto e podem ope-

rar online e ainda outras têm a capacidade de apresentar resultado em tempo real. O

que nenhuma técnica aborda ainda é que, além de todas as qualidades que possa ter, a

de consumir a menor energia possível para operar, é essencial para funcionar de forma

sustentável.



52

Tabela 2.2: Estado da arte das principais estratégias inteligentes.

Autor Aplicação Sensor Plata-

forma

Detecção

Jian et al. (2018) Atuador eletro-

hidráulico

Pressão PC offline

Wang et al. (2013) Motor a diesel Vibração PC offline

Chen, Chua e Lim (2006) Motor hidráulico Vibração PC offline

Yuan et al. (2017) Locomotiva Vibração PC offline

Shao et al. (2017) Locomotiva Vibração PC offline

Rai e Upadhyay (2017) Máquina rotativa Vibração PC online

Shao et al. (2018) Locomotiva Vibração PC offline

Hu et al. (2018) Big Data Dados brutos PC offline

Zhang et al. (2018) Transporte ferro-

viário

Emissão acústica PC online

Sobie, Freitas e Nicolai (2018) Turbina eólica Vibração PC offline

Maheswari e Umamaheswari (2017) Turbina eólica Vibração PC offline

Devi e Saravanan (2018) Turbina a vapor Diversos FPGA tempo real

Arriola e Thielecke (2017) Atuadores eletro-

mecânicos

Corrente FPGA tempo real

Shahbazi, Poure e Saadate (2018) Turbina eólica Tensão FPGA tempo real

Gonçalves et al. (2011) Atuador elétrico Simulado PC

FPGA

offline

Este trabalho Atuador elétrico Vibração torque ASIC

FPGA

tempo real

Fonte: o autor.

Em termos tecnológicos, a proposta e o objetivo desse trabalho é contribuir para a

área de detecção automática de falhas em sistemas dinâmicos, através da proposta de uma

nova arquitetura com características de baixo consumo de energia e de processamento

em tempo real, que poderá ser incorporada a um sensor. Para a obtenção desse objetivo,

foi projetado um sistema que utiliza algoritmo de otimização estocástico, adaptável para

qualquer equipamento mecânico com engrenagens cujas variáveis de estado são desco-

nhecidas ou indeterminadas.



53

3 REVISÃO DE TÉCNICAS E METODOLOGIAS

As ferramentas matemáticas utilizadas atualmente para o desenvolvimento de sis-

temas de manutenção inteligente (que possam identificar as possíveis falhas, além de

gerenciar suas consequências), permeiam as áreas de estatística, processamento de sinais,

de inteligência artificial e de filtragem adaptativa. Necessitam, basicamente, de senso-

res instalados nos equipamentos e o acesso aos sinais gerados por estes, que aliados a

aplicativos e simuladores, permitem a análise e predição de eventos de falha.

Neste capítulo, são abordados alguns conceitos e técnicas na área de microele-

trônica, utilizados como suporte para este trabalho, visando uma contextualização sobre

alguns temas relevantes para sua maior clareza e compreensão. Estão sendo apresentados

conceitos básicos relativos ao processamento digital de sinais, sistemas de tempo real,

formato de dados e protocolo de comunicação.

3.1 Métodos de Processamento Digital de Sinais

O processamento digital de sinais (DSP - Digital Signal Processing) baseia-se na

análise ou modificação do sinal, seja ele analógico ou digital, tornando-o mais apropriado

para algumas aplicações como determinação ou predição de algum fenômeno. Se os

dados processados forem continuamente monitorados e analisados, pode-se predizer qual

componente de uma máquina provavelmente irá falhar, reduzindo o tempo de parada para

manutenção.

As ferramentas de DSP também são muito utilizadas na extração de características,

no reconhecimento de padrões e na detecção e predição de falhas (CHOLETTE et al.,

2013), quando usadas em conjunto com técnicas estatísticas, de inteligência artificial ou

de filtragem adaptativa.

A Figura 3.1 mostra as três primeiras etapas da manutenção baseada na condi-

ção (CBM - Condition Based Maintenance) com exemplos de técnicas de DSP utilizadas

neste trabalho para identificar falhas em um equipamento. A implementação destes al-

goritmos será descrita no Capítulo 5, onde também será abordado o algoritmo para FDI

(PICCOLI et al., 2015b), desenvolvido com o propósito de tratar uma quarta etapa de

CBM, a avaliação da saúde do equipamento.



54

Figura 3.1: Primeiras etapas do CBM para manutenção inteligente.

Nas seções a seguir serão descritos os algoritmos utilizados em cada uma das eta-

pas: Manipulação de dados, com a transformada discreta de wavelet; Extração das

características, com energia do sinal; e Condição do equipamento, com filtro adapta-

tivo.

3.1.1 Transformada Discreta de Wavelet

As wavelets possibilitam alterar o tamanho da janela temporal em sinais que apre-

sentam grande variação de frequência, implementando uma janela temporal maior para

análise de sinais de baixa frequência e uma menor para as de alta frequência (VALINS,

2004). Assim, a transformada wavelet aplica-se para o estudo de fenômenos transitórios,

não estacionários ou variantes no tempo (SCHUCK, 1998). A transformada wavelet de

uma função arbitrária f(t) é definida pela integral de convolução:

w(a,b) =

? b

a

f(t)??s,?(t)dt (3.1)

Onde a função wavelet ?s,? é dilatada por um fator de escala s e transladada de

? no domínio do tempo. A transformada discreta de wavelet de uma função contínua

f(t) é definida como uma discretização de valores amostrados uniformemente em k

períodos deslocados de ? numa escala fixa s de uma exponencial 2j, cujas dilatações são

múltiplas. Portanto, se 2j assume valores menores que um, detalhes são perdidos e são

obtidos informações de baixa frequência. Se maior que um, são obtidos informações de

alta frequência.

Portanto, a função wavelet ? e função de escala ? podem ser expressas como:

?(2j?1, t) =
?

gj(k)? ??(2
jt?k)

?(2j?1, t) =
?

hj(k)? ??(2
jt?k)

(3.2)



55

Os coeficientes da função ? são calculados a partir dos coeficientes da função ?

com se segue:

gn = (?1)
nhL?1?n

n = 0,1, ...,L?1
(3.3)

Onde L é o número de coeficientes. O conjunto de coeficientes hj e gj define a

função escala da wavelet.

A análise de wavelet consiste na aproximação e detalhes dos coeficientes. Ela

pode ser aplicada a partir da construção de diferentes bases ortogonais. As componentes

de baixa frequência são obtidas a partir de valores aproximados e as componentes de alta

frequência a partir de aumento no detalhamento.

3.1.2 Extração de Energia

Após a transformação do sinal com wavelets, a energia resultante dos coeficientes

é utilizada para a extração de suas características. Uma vez que exista a condição de

conservação da energia pelo equilíbrio de Parseval 1 para a transformada de wavelet, o

sinal discreto no tempo x(n) para uma janela -N a N é determinada pela expressão a

seguir:

Etot = lim
N??

N
?

n=?N

|x(n)|
2 (3.4)

Onde N é a amostra cujo total de elementos é 2N+1.

Para sinais periódicos, é mais conveniente computar a energia média ou potência:

Ptot = lim
N??

1

(2N + 1)

N
?

n=?N

|x(n)|
2 (3.5)

1Em matemática, o teorema de Parseval comumente se refere ao operador unitário do resultado da
transformada de Fourier. A integral do quadrado de uma função deve ser igual a integral do quadrado
de sua transformada. Dese modo, a potência média de um sinal pode ser considerada como a soma das
potências associadas a cada componente da frequência. Já na transformada de wavelet, é requerido também
que seja ortogonal em relação as funções dilatadas e transladadas, e que o quadrado do sinal em análise seja
integrável.



56

3.1.3 Filtro Adaptativo

O filtro adaptativo atende a critérios, tais como processar sinais estocásticos e de-

tectar anormalidades estatísticas das características dos dados da extração de energia, an-

teriormente descritos. Dentre as ferramentas de filtragem adaptativa, tais como: os filtros

de Wiener, filtros adaptativos ou os filtros de Kalman, destacam-se os filtros adaptativos

(HAYKIN, 2001; NEGREIROS, 1994; WIDROW; STEARNS, 1985).

Os filtros adaptativos são filtros com coeficientes que variam ao longo do tempo,

adaptando-se automaticamente aos sinais de entrada. Geralmente, o processo de adapta-

ção é baseado em um filtro de resposta a impulso finita (FIR - Finite Impulse Response)

com método dos mínimos quadrados médios (LMS - Least-Mean Square) (HAYKIN,

2001).

O Algoritmo Adaptativo LMS com Filtro FIR

Existem duas implementações eficientes adotáveis para filtros de resposta a im-

pulso finita (FIR - Finite Impulse Response): implementação no domínio do tempo e

implementação no domínio da frequência.

A implementação no domínio do tempo utiliza poucos coeficientes do filtro e efe-

tua a filtragem através de uma convolução do sinal de entrada com estes coeficientes. Esta

implementação é bastante eficiente quando a ordem do filtro não é elevada (tipicamente

abaixo de 32). Devido a este fato, o algoritmo de mínimos quadrados médios (LMS -

Least Mean Squares) (HAYKIN, 2001) foi escolhido.

Neste método, o vetor de entrada possui N medidas nos respectivos instantes de

tempo. O objetivo do LMS é obter a curva que se aproxime o quanto possível dos dados

de entrada. O ponto ótimo é atingido quando a soma dos quadrados da diferença entre

os valores estimados ao longo do tempo é minimizada. O filtro adaptativo baseado neste

método é descrito pela equação:

W (n + 1) = W (n) + µ(n)e(n)X (n)

e(n) = d(n)?WTX (n)
(3.6)



57

onde W (n) = [w0 w1 ... wL?1 (n)]
T
X (n) é o vetor de coeficientes, e(n) é o

erro do sinal X (n) = [x [n] x(n?1) ... x(n?L + 1)]T é a saída do vetor de sinal e

µ(n) é o tamanho do passo (DINIZ, 2013).

A função J a ser minimizada é a soma dos quadrados dos erros:

J =
n

?

i=0

|e(n)|
2 (3.7)

O resumo do algoritmo LMS (BOROUJENY, 1998), é apresentado como segue:

Tabela 3.1: Algorítimo do filtro LMS.

Dados:

N ? número de coeficientes;

µ ? parâmetro de adaptação;

n ? instante no tempo.

0 &amp;lt;µ &amp;lt;2
força adaptativa

,

onde força adaptativa =
?M?1

k=0 E[|µ(n?k)|
2]

Inicialização:

x(0) = w(0) = [0 0 . . . 0]T

Execução:

x(n) = [x(n) x(n?1) . . . x(n?N + 1)]T

w(n) = [w0(n) w1(n) . . . wN?1(n)]
T

Sempre para para n ? 0 {

Filtragem : y(n) = wT (n)x(n)

ou seja y(n) =
?N?1

i=0 wi(n).x(n? i)

Estimação de erro : e(n) = d(n)?y(n)

Coeficiente de Adaptação : w(n + 1) = w(n) + µx(n)e(n)

}



58

3.2 Sistemas de Tempo Real

Sistemas de tempo real caracterizam-se pela necessidade fundamental de atuar de

acordo com a dinâmica de estados do processo. A chave do sucesso em sistemas de tempo

real é a oportunidade de execução de tarefas e processamento de dados, normalmente dis-

tribuidos e com requisitos rigorosos de tempo, se comunicarem para realizar um objetivo

em comum (MALCOLM; ZHAO, 1994).

Tais sistemas não dependem só do resultado lógico de computação, mas também

do tempo em que os resultados são produzidos, onde diversas tarefas são executadas e o

escalonamento em função das restrições temporais é um grande problema. Tarefas rece-

bem dados de entrada, executam um algoritmo e geram saídas. A tarefa está logicamente

correta se gerar uma saída correta em função dos dados de entrada em um prazo temporal

pré-determinado (RAMAMRITHAM; STANKOVIC, 1994).

Devido a isso pode-se afirmar que, o tempo é o recurso mais precioso utilizado por

sistemas de tempo real, pois as tarefas executadas pelo processador devem ser concluídas

antes de seu limite temporal (deadline) (SHIN; RAMANATHAN, 1994).

3.3 Formato dos Dados de Dispositivos Digitais

Os números empregados no cálculo com dispositivos digitais podem ser de dois ti-

pos: números inteiros e números em ponto-flutuante (números reais em matemática). São

representados internamente nestes circuitos em um formato binário, como uma sequência

de 0s e 1s. Além disso, as operações aritméticas no cálculo computacional utilizam-se de

palavras com um número limitado de bits. Assim os números são representados somente

em uma faixa de N bits.

Um número inteiro decimal pode sempre ser representado exatamente por um in-

teiro binário, mas isso não é verdade para os números fracionários. Para tratar desta

questão, este trabalho adotou o Formato Q.

3.3.1 Notação de Ponto Fixo no Formato Q

O Formato Q da empresa Texas Instrument (TEXAS INSTRUMENTS INCOR-

PORATED, 1988) consiste em transformar os números reais, cujo sistema de numeração



59

decimal é representado na base binária no computador, do formato em ponto-flutuante

para o formato em ponto-fixo.

Neste formato, a primeira parte dos bits da palavra é a parte inteira do número, e

a segunda, a fracionária. Na Tabela 3.2 está representado um número de 16 bits (GAN;

KUO, 2007), da direita para esquerda, do menos significativo para o mais significativo. A

letra S representa o sinal do número, I a parte inteira e F a parte fracionária.

Tabela 3.2: Representação de números no formato Q.
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1
S I I I I I F F F F F F F F F

Para representar os números neste formato, um número no Formato Q(N.M) é

representado por uma palavra de B bits:

Palavra = B = N + M

Tamanho da Palavra do formato Q.
(3.8)

Onde:

• N bits é usado para parte de números inteiros;

• M bits é usado para parte de números fracionários.

Para converter um número de ponto-flutuante para ponto-fixo, basta multiplicar

por [2M] e arredondar a parte fracionária:

ponto fixo = absoluto([2M]?ponto flutuante)

Conversão de ponto-flutuante para ponto-fixo.
(3.9)

3.4 O Protocolo de Comunicação Serial SPI

A comunicação da interface periférica serial (SPI - Serial Peripheral Interface) é

um protocolo síncrono utilizado para comunicação entre um dispositivo mestre e um ou

mais dispositivos escravos. O SPI não permite o endereçamento. A comunicação só pode

ser feita entre dois pontos, sendo um deles o dispositivo mestre que é definido em geral

como um microcontrolador que fornece o sinal de relógio para o escravo que é composto

por um circuito integrado qualquer. Em modo mestre, o microcontrolador além de enviar

o sinal de relógio, deve ter um pino de entrada/saída para habilitação de cada periférico.



60

3.4.1 Arquitetura de Hardware do Protocolo SPI

A arquitetura de hardware para o protocolo SPI apresenta duas linhas de controle

e duas linhas de dados:

• Linhas de controle: Chip Select Not (CSN) e Serial Clock (SCK);

• Linhas de dados: Serial Data In (SDI) e Serial Data Out (SDO).

A transmissão de dados é controlada pelo microcontrolador, selecionando o dis-

positivo SPI escravo (uma FPGA na Figura 3.2) pelo pino CSN, normalmente ativo em

nível baixo, os dados são enviados pelo pino SDO e recebidos pelo pino SDI. Quando o

dispositivo não está ativo, seu pino SDO entra em estado de alta impedância.

Figura 3.2: Arquitetura em hardware para o protocolo SPI.

Conforme a Figura 3.2, o equipamento mestre com SPI é um microcontolador,

esse opera no modo full-duplex e é composto por 4 sinais, a saber na Tabela 3.3 a seguir:

Tabela 3.3: Sinais utilizados no protocolo SPI mestre.

Sinal Significado Sentido
MOSI Master Out Slave In Mestre ? Escravo
MISO Master In Slave Out Escravo ? Mestre
SCK Serial Clock Mestre ? Escravo
SS Slave Select Mestre ? Escravo

Mais detalhes sobre estes e outros conceitos utilizados no desenvolvimento deste

trabalho são encontrados na literatura.



61

4 UTILIZAÇÃO DE VÁLVULAS NO MODAL DUTOVIÁRIO DA INDÚSTRIA

DO PETRÓLEO

Neste capítulo será abordada a logística de abastecimento do sistema Petrobras,

com uma atenção especial às operações de terminais e oleodutos, o crescimento da explo-

ração do segmento de petróleo e a relevância do modal dutoviário que possibilita agili-

dade, segurança e capacidade de fluxo na movimentação dos combustíveis entre refinarias

e terminais. Também será abordado o conjunto atuador-válvula como estudo de caso, por

ser um equipamento crítico nas operações de transporte e armazenamento de petróleo e

derivados.

4.1 Oferta e Demanda de Petróleo

A evolução do crescimento da produção de petróleo nacional pode ser observada

na Figura 4.1, com destaque ao fato de que a maior parte da produção nacional é extraída

de campos marítimos. Cabe ressaltar que uma maior taxa de exploração ocorreu a partir

do ano de 2013, após a criação da Pré-Sal Petróleo pela Lei 12.304/10, com destaque para

a exploração do pré-sal do campo de Lula (denominado campo Tupi antes de 2010), na

Bacia de Santos, relativamente o maior produtor de petróleo e gás com 1,5 milhões de

barris de óleo equivalente (óleo e gás) por dia em 2018 (PETROBRAS, 2018).

Figura 4.1: Evolução da produção de petróleo, por localização (terra e mar).

Fonte: adaptado de (ANP, 2018).



62

4.2 Transporte e Armazenamento de Petróleo e Derivados

O petróleo bruto é separado em frações, processado e convertido em derivados

em uma instalação industrial denominada refinaria, que manufatura produtos acabados

a partir de petróleo, óleos inacabados, líquidos de gás natural (LGN), álcool e outros

hidrocarbonetos.

Uma vez produzidos os derivados de petróleo nas refinarias, esses produtos são

transportados por dutos e armazenados em tanques e esferas (no caso de gás) em termi-

nais para posterior distribuição. Nas bases de distribuição, os produtos são vendidos ao

mercado, sendo o transporte realizado pelas empresas distribuidoras por meio rodoviário

ou então transportados para outras bases de distribuição, via duto, ferrovia ou rodovia.

As operações de transporte e armazenamento da Figura 4.2, permeiam todas as

etapas da cadeia produtiva e são realizados pelos modais dutoviário, ferroviário, rodo-

viário e marítimo, ou seja, por dutos, vagões-tanque, caminhões-tanque e navios-tanque,

respectivamente. Cabe a tarefa de distribuição às atividades de transporte dos derivados

de petróleo até os pontos de venda (RUSSO, 2004).

Figura 4.2: Transporte e armazenamento de petróleo e derivados.

De acordo com a Agência Nacional do Petróleo, Gás Natural e Biocombustíveis

(ANP) (ANP, 2018), em 2017, o parque de refino brasileiro contava com 17 refinarias,

102 terminais autorizados a funcionar, sendo 55 terminais aquaviários (com 1.403 tan-

ques) e 47 terminais terrestres (com 516 tanques), totalizando 1.919 tanques com capaci-

dade nominal de armazenamento de 13,5 milhões m3. Estes números denotam a grande

quantidade de componentes existentes para viabilizar a produção e transporte. Conforme

o relatório de inovações da Coester (COESTER, 2018), uma empresa fornecedora de atu-

adores elétricos para a Transpetro (TRANSPETRO, 2018), no ano de 2012, detinha mais



63

de 15 mil atuadores em operação no mercado.

No que tange o modal dutoviário, o transporte de petróleo é gerenciado pela Trans-

petro através de um sistema supervisório, sistemas de supervisão e aquisição de dados

(SCADA - Supervisory Control and Data Acquisition) (BOSA, 2009). O sistema possui

uma rede de comunicação para monitorar as informações operacionais e permite interati-

vidade para que os técnicos de operação comandem as válvulas e os equipamentos (p. ex.,

ligar e desligar bombas, abrir e fechar válvulas, alterar fluxo nas malhas, além de detectar

vazamentos e realizar as simulações operacionais).

4.2.1 Operações de um Típico Terminal

Os terminais, conforme exemplo mostrado na Figura 4.2, são de extrema impor-

tância dentro da cadeia produtiva, pois são responsáveis por receber, armazenar e enviar

os produtos manipulados. A Figura 4.3 mostra um esquema simplificado para um típico

terminal contendo os principais componentes utilizados, com destaque do uso de válvulas

nas linhas de distribuição e no controle dos tanques de armazenamento.

Ao analisar-se a o fluxo de operação da planta, a detecção de falhas em tempo real

de válvulas torna-se especialmente necessário em terminais com polidutos. Nos sistemas

de transporte e armazenamento em que a válvula permite a passagem de fluido indevida-

mente, pode causar a contaminação do conteúdo de um tanque, por exemplo, implicando

em sérias perdas econômicas. O bloqueio de passagem do fluido por um válvula quando

deveria permitir, também tem um potencial de perda econômica com prejuízo na progra-

mação e logística operacional.

Para estudar o fluxo de uma aplicação em tempo real do transporte de produtos,

um modelo simplificado das instalações de um típico terminal (Figura 4.3) é apresentado

em forma de fluxograma na Figura 4.4. Fazem parte do modelo não só os tanques, mas

principalmente as válvulas, pois elas atuam na passagem ou bloqueio do fluído, determi-

nando o fluxo dentro do processo e qual operação está ocorrendo. Outros equipamentos

como bombas, tanques de alívio e auxiliares não foram representados.



64

Figura 4.3: Componentes de um típico terminal.

Fonte: traduzido de (CONSERVATION, 2016).

Figura 4.4: Fluxograma simplificado da automação de um típico terminal.



65

No esquema da Figura 4.4, os derivados de petróleo (diesel e gasolina) chegam da

refinaria através de um poliduto (oleoduto que transporta múltiplos produtos). As setas

indicam a direção e sentido do fluxo da gasolina ou diesel recebidos ou enviados. As

válvulas direcionam os produtos para serem armazenados em tanques específicos (TQ-01,

TQ-02 ou TQ-03) e, posteriormente, enviados para as companhias distribuidoras.

Existem vários tipos e modelos de válvulas para a operação de um terminal. O

esquema simplificado apresentado na Figura 4.4, ilustra dois tipos de válvulas: uma com

símbolo de uma letra “M” para válvulas eletromecânicas com motores, aos quais possuem

sensores e instrumentação para indicação de sua posição em tempo real; outras são vál-

vulas com apenas componentes mecânicos que deverão ser acionadas manualmente em

caso de alguma falha nas válvulas eletromecânicas.

As válvulas eletromecânicas V-04 a V-7 são responsáveis pelo recebimento, arma-

zenamento e envio de gasolina dos tanques TQ-01 e TQ-02, enquanto as válvulas eletro-

mecânicas V-08 e V-09 são responsáveis pelas mesmas operações para o tanque TQ-03

com óleo diesel.

Alguns importantes cuidados operacionais devem ser levados em conta:

1. Para o melhor controle de volume enviado e para evitar que produtos de diferentes

especificações se misturem, dois ou mais tanques não podem ao mesmo tempo

enviar para a mesma companhia;

2. Da mesma forma, dois ou mais tanques não podem receber produtos ao mesmo

tempo da refinaria, pois cada produto possui suas próprias especificações e quali-

dades.

Deste modo, o terminal realiza basicamente dois procedimentos operacionais, o

de receber para armazenar e o de enviar o estoque. Com o devido cuidado operacional,

é possível realizar a medida de volume dos produtos transportados, sua identificação,

rastreamento e evitar que os produtos armazenados se misturem, mediante as seguintes

operações:

• Operação de recebimento: um produto chega através do poliduto (diesel ou ga-

solina) para um tanque correspondente. Para o recebimento de gasolina no tanque

TQ-01 e evitar que o produto seja enviado para outros tanques, por exemplo, as

válvulas V-01, V-02 e V-04 deverão permanecer com obturador aberto e as válvulas

V-06 e V-08 deverão permanecer com obturador fechado. A válvula V-05 também

deverá estar com obturador fechado para que o produto não escoe para as compa-



66

nhias distribuidoras ou então contamine o combustível do tanque TQ-02.

• Operação de Envio: determinado produto (diesel ou gasolina) é enviado de um tan-

que para uma companhia distribuidora. Para o envio de gasolina do tanque TQ-02,

por exemplo, as válvulas V-02 e V-10 deverão permanecer com obturador aberto. A

válvula V-05 deverá permanecer com obturador fechado para impedir o escoamento

do produto ao TQ-01, assim como a válvula V-06 também deverá permanecer com

obturador fechado para impedir entrada de produto no tanque TQ-02.

A Tabela 4.1 apresenta as possíveis operações de envio e recebimento de produ-

tos com as determinadas posições das válvulas (esquema da Figura 4.4), observando os

devidos cuidados operacionais citados anteriormente.

Tabela 4.1: Procedimentos operacionais de um típico terminal.

Tanque TQ-01 TQ-02 TQ-03

Válvula Envia Recebe Envia Recebe Envia Recebe

V-01 A - A - A -

V-02 A - A - - -

V-03 - - - - A -

V-04 A F F - F -

V-05 F A - F - -

V-06 F - A F F -

V-07 - F F A - -

V-08 F - F - A F

V-09 - F - F F A

V-10 - A - A - -

V-11 - - - - - A

Legenda: Válvula com obturador aberto (A); Válvula com obturador fechado (F).

Dentro dos ciclos de operação dos sistemas de transporte e armazenamento em

terminais, as válvulas sofrem inúmeras perturbações que caracterizam o processo como

dinâmico. A implementação de técnicas de detecção de falhas em tempo real ou online

permite, por exemplo, que operadores da planta suspendam uma operação, programem

uma manutenção ou simplesmente acionem válvulas mecânicas de emergência como é o

caso das válvulas V-02, V-03, V-10 e V-11 do esquema da Figura 4.4.

Note-se que as válvulas mecânicas também necessitam de sistemas de detecção

de falhas, pois podem apresentar desgastes nas engrenagens de redução para abertura e



67

fechamento manual. Na seção 4.3.2 foram abordadas as forças que atuam sobre a válvula

e favorecem a abertura do obturador, sendo no entando, o vazamento o principal problema.

O esquema abordado pode ter uma nova configuração com maior confiabilidade ao

se adotar o uso de recurso redundante, ou seja, possibilitar que o sistema tolere a parada ou

o mau funcionamento de uma válvula. Então uma segunda válvula estará imediatamente

disponível para uso quando uma válvula primária do sistema apresentar falha.

A Figura 4.5 ilustra uma segunda válvula alternativa V-02 em série com V-01. No

caso de detecção de falhas em uma válvula ou da necessidade de proteção, essa poderá

ser desativada e permanecer mecanicamente com obturador aberto no modo manual para

posterior desacoplação e manutenção do atuador elétrico. Então a operação remota do

sistema supervisório, por exemplo, será transferido integralmente à segunda válvula.

Figura 4.5: Redundância com válvulas em dutos.

No caso de detecção de falhas em ambas as válvulas, simultaneamente as mesmas

deverão ser desativadas para posterior desacoplação e manutenção do atuador elétrico.

Nesse último caso, enquanto a manutenção é realizada, a planta deverá conter também

válvulas paralelas na tubulação que isolem esse ponto do sistema da rede. Em uma grande

instalação industrial, por exemplo, poderá existir também válvulas direcionais na tubula-

ção para o produto ser distribuído a outros pontos da rede enquanto o processo apresentar

falhas.

4.3 Visão geral do Estudo de Caso

As válvulas estão presentes nas mais diversas aplicações e têm como finalidade

controlar o fluxo de fluidos em uma tubulação (água, esgoto ou petróleo). Uma planta

industrial pode conter centenas de válvulas. Um setor específico como o petroquímico

ou de saneamento básico pode conter milhares de válvulas instaladas. Existem diversos

tipos de válvulas: gaveta, esfera, ou globo, cada uma indicada para um tipo de aplicação

em particular. Podem estar operando sob condições de pressão e temperatura altas, por



68

exemplo, ou mesmo em locais remotos com acesso difícil ou demorado.

No exemplo de um típico terminal na seção anterior 4.2.1, a integridade do funci-

onamento das válvulas é uma questão estratégica, visto que uma indisponibilidade ope-

rativa pode representar, em termos de custos, muitas vezes mais do que custaria reparar

a própria falha. Em geral, quando as válvulas falham de forma indesejada, podem cau-

sar grandes prejuízos no modal dutoviário. Logo, é importante que se tenha informações

sobre o estado do equipamento com a antecedência necessária para que a equipe de ma-

nutenção planeje e chegue antes da falha (HENRIQUES et al., 2010).

4.3.1 Estudo de Caso deste Trabalho

Atuadores elétricos são dispositivos eletromecânicos capazes de controlar o nível

de abertura de válvulas, dampers, comportas e similares. O atuador elétrico pode ser

acoplado através de unidades de adaptação ou redutores, sendo sua principal função o

controle do movimento da haste da válvula, que controla o fluxo de produto dentro da

tubulação em que atua (COESTER AUTOMAÇÃO, 2001).

Externamente o dispositivo é composto por uma carcaça, com volante mecânico

manual, um acoplamento para válvula com caixa de engrenagens, uma caixa de bornes

para conectar o motor a um compartimento de circuito eletrônico de controle de aciona-

mento do atuador e um painel frontal com visor e comando local, conforme a Figura 4.6.

Figura 4.6: Componentes externos do atuador.

Fonte: Coester (COESTER AUTOMAÇÃO, 2001)



69

A representação esquemática da Figura 4.7, apresenta os componentes internos

dos atuadores da linha CSR 1, com sistema de engrenagens diferenciais que garantem

auto-travamento, alta capacidade de redução e acionamento manual através de acopla-

mento com alavanca. Cada item está numerado na figura sendo que os componentes de

(1) a (5) destinam-se ao acionamento elétrico e os componentes de (6) a (12) ao aciona-

mento manual e mecânico.

Figura 4.7: Detalhes construtivos dos atuadores.

Fonte: Coester (COESTER AUTOMAÇÃO, 2001)

O sistema de transmissão mecânica apresenta três tipos de reduções cinemáticas,

denominadas de primária, secundária e terciária: O motor (1), responsável pelo movi-

mento do equipamento, aciona o conjunto das engrenagens satélites (2), nas quais se

processa a redução primária. O movimento continua no par sem-fim (3) e coroa (5), que

acionam o acoplador deslizante (9), responsável pelo movimento da manga de saída (13)

ocorrendo então a redução secundária. Uma terceira redução ocorre no redutor de saída

(14) acoplado à saída da manga. O Volante manual (10), responsável pelo movimento do

equipamento, aciona o acoplador deslizante (9), quando o knob seletor (11), estiver na

posição comando manual. Caso seja acionado o comando elétrico, o comando manual

é automaticamente desativado através do prato de desacoplamento (12), garantindo total

segurança ao operador.

O atuador elétrico deste estudo de caso é um modelo inteligente CSR6, o mesmo

utilizado nos trabalhos de (FACCIN, 2011), (BÖESCH, 2011), (LAZZARETTI, 2012),

1As soluções da linha CSR da empresa Coester, se aplicam às válvulas tipo gaveta, globo e outros
equipamentos similares (COESTER, 2018).



70

(GIACOMOLLI, 2014), (STEIN, 2014), (MARIMON, 2014) e (ROCHA, 2016) com ca-

pacidade máxima de 60 N.m, motor tipo gaiola de esquilo para o acionamento, rotação de

42 rpm, carcaça em alumínio Copper Free, controle inteligente através de uma unidade

de processamento local, sensores e sistema de autodiagnóstico, além de capacidade de

comunicação via uma rede Modbus. As especificações desse atuador estão resumidas na

Tabela 4.2.

Tabela 4.2: Especificações do atuador elétrico modelo CSR6.

Atuador CSR6 Unidade Valor

Torque máximo N.m 60

Torque de trabalho N.m 60

Tensão de operação V 220

Tempo de operação s 46

Rotação rpm 42

Potência do motor kW 0,18

Rotação do motor rpm 3600

A função de autodiagnóstico disponível nos atuadores inteligentes da Coester é a

de monitorar e detectar diversos problemas tais como, o torque excessivo exercido sobre

a válvula, sobreaquecimento e falta de fase do motor.

Os atuadores inteligentes podem registrar as 500 últimas operações realizadas na

sua memória interna com os valores de torque exercido na haste (com resolução de 1

N.m) por percentual de abertura da válvula (a cada 5% de abertura) para posterior aná-

lise. O torque máximo exercido pelo atuador é dado pelo modelo do atuador, mas o limite

em que o atuador cessa o movimento pode ser configurado por software (COESTER AU-

TOMAÇÃO, 2001).

O sistema de transmissão mecânica do atuador em estudo é formado por quatro

tipos de engrenagens cilíndricas projetadas para transmitir movimento: uma de dentes

retos, um par coroa sem-fim e um conjunto de engrenagens helicoidais e planetárias (for-

mando um sistema de transmissão diferencial) (GONÇALVES et al., 2011).

As engrenagens cilíndricas de dentes retos internos fazem parte do conjunto de

engrenagens satélite do atuador. O conjunto apresentado na Figura 4.8 é responsável pela

transmissão do movimento do motor para a haste da válvula, onde encontra-se posicio-

nado também o sensor de torque.



71

Figura 4.8: Conjunto de engrenagens satélite do atuador.

Fonte: Coester (COESTER AUTOMAÇÃO, 2001)

Devido ao sistema de redução cinemática, o conjunto de engrenagens satélite do

atuador realiza grande esforço. Com o decorrer do tempo e da utilização dos atuadores

em campo, verifica-se a ocorrência de desgaste ou fratura de dentes nas engrenagens so-

licitadas ou até mesmo quebra do eixo sem-fim devido ao torque excessivo. Um conjunto

defeituoso de engrenagens cilíndricas de dentes retos, cedido pela empresa Coester, é

ilustrado na Figura 4.9.

Figura 4.9: Conjunto defeituoso de engrenagens do estudo de caso.

Fonte: (FACCIN, 2011; BÖESCH, 2011; PICCOLI et al., 2012)

4.3.2 Trabalhos Relacionados ao Estudo de Caso

À medida que os equipamentos no transporte dutoviário são utilizados, ficam su-

jeitos a vários tipos de degradação: desgaste, sujeira, corrosão, rachaduras e outras ano-

malias. Os trabalhos (GONÇALVES et al., 2011; BOSA, 2009) em parceria com as

empresas Transpetro e Coester utilizaram ferramentas para análise de uma manutenção

centrada em confiabilidade RCM (Reliability Centred Maintenance) e realizaram um le-



72

vantamento histórico de manutenção, aplicando técnicas quantitativas para determinação

de componentes mais críticos no sistema. Então foi aplicado método qualitativo por dia-

gramas de causa-efeito (FMECA - Failure Mode, Effects, and Criticality Analysis) ao es-

tudo de caso escolhido no estágio anterior. O diagrama gerado é mostrado na Figura 4.10,

onde são associados possíveis modos de falha em atuadores elétricos acoplados a válvulas

de dutos da Transpetro com um risco em potencial, ou seja, o vazamento da válvula.

Figura 4.10: Diagrama de causa-efeito para identificar possíveis modos de falha no con-

junto atuador-válvula.

Fonte: (GONÇALVES et al., 2011)

As falhas no conjunto atuador válvula têm as mais diversas causas que variam de

defeitos internos na válvula (desgastes nas engrenagens, umidade, corrosão, etc.), defei-

tos no atuador elétrico (rompimento de bobina do motor, rolamentos, curtos circuitos,

umidade, sobre torque, etc.) até defeitos internos no obturador (obstrução do obturador,

sedimentos na base, vazamentos, etc.) (BOSA, 2009).

Trabalhos com Modelagem Matemática

Foi realizado em Gonçalves et al. (2011) uma modelagem do estudo de caso, com

uma série de forças que atuam para que ocorra o movimento de abertura ou fechamento

do obturador da válvula. As forças são mostradas na Figura 4.11, onde: A força do

atuador é aquela transmitida pelo motor através do sistema de engrenagens; a força de

atrito corresponde ao atrito existente entre a haste e a gaxeta (peça usada para impedir

vazamentos); a força da mola serve para fazer com que a gaveta da válvula retorne à sua

posição inicial na ausência de alimentação; a força do fluido que é determinada a partir

do escoamento de um fluido através da tubulação.



73

Figura 4.11: Modelagem do atuador elétrico, válvula e tubulação.

Fonte: adaptado de (COESTER AUTOMAÇÃO, 2001; GONÇALVES et al., 2011).

Juntamente com a ferramenta Watchdog Agent (DJURDJANOVIC; LEE; NI, 2003),

foram implementados em MATLAB (MATrix LABoratory) o modelo matemático com da-

dos de torque do atuador e posição do obturador da válvula (GONÇALVES et al., 2011;

BOSA, 2009). A ferramenta Watchdog Agent possui um conjunto de ferramentas para

o processamento de sinais (transformada wavelet packet), a extração de características e

o recurso de fusão de dados de sensores. Quando bem treinada pelo operador, realiza

cálculos de desempenho (método da regressão logística e de reconhecimento estatístico

de padrões), predição de falhas e diagnóstico de saúde dos equipamentos. Então, foram

realizadas simulações das condições de comportamento do atuador e válvula (normal,

degradação e falha) com injeção de falhas, alterando os parâmetros Kh (coeficiente de

redução cinemática na haste), Km (coeficiente de Hook da mola) e Ca (constante de atrito

entre a haste e a gaxeta da válvula gaveta) do modelo matemático.

Bosa (2009) construiu um protótipo implementado em linguagem de descrição

de hardware (VHDL - VHSIC Hardware Description Language) do algoritmo de mapa

auto-organizável (SOM - Self-Organization Maps) sintetizável em FPGA. A Figura 4.12

mostra a arquitetura do sistema embarcado para prototipar o sistema de manutenção inte-

ligente em uma placa de desenvolvimento FPGA da Xilinx. O SOM é um tipo de Rede

Neural utilizado para representação de dados multidimensionais, o que facilita a visuali-

zação de grande quantidade de informações. O neurônio vencedor (W) tem a função de

localizar a menor distância Euclidiana no padrão do mapa (J) e atualizar a vizinhança para

uma representação gráfica que permita a visualização topológica de neurônios cooperati-



74

vos. Então, para desempenhar as tarefas de detecção de anormalidades e diagnóstico de

falhas no estudo de caso, os dados de entrada aplicados nesse protótipo foram os sinais de

energia (obtidos a partir da transformada wavelet packet) gerados na ferramenta Watchdog

Agent.

Figura 4.12: Arquitetura do sistema embarcado para manutenção inteligente.

Fonte: adaptado de (BOSA, 2009; GONÇALVES et al., 2011).

Em Gonçalves et al. (2011), os sinais de energia (obtidos a partir da transfor-

mada wavelet packet) gerados na ferramenta Watchdog Agent além de serem repassados

ao SOM embarcado da Figura 4.12, também foram aplicados a filtragem adaptativa para

a realização das etapas de detecção, classificação, predição de falhas e determinação do

tempo de vida útil do atuador elétrico. A Figura 4.13 mostra a arquitetura do filtro adap-

tativo e a máquina de estados do circuito de predição do VHDL embarcado. Compara-

tivamente, os resultados de desempenho do SOM e filtro adaptativo foram satisfatórios

e aproximadamente iguais em termos qualitativos nas tarefas de detecção e predição de

falhas. Nos termos de número de Slices, Flip Flops, Luts, blocos de entrada/saída e de

memória (BRAM - Block Random Access Memory) utilizados, o circuito desenvolvido a

partir do filtro adaptativo ocupou uma área menor na FPGA e apresentou menor tempo de

processamento em relação ao circuito SOM.



75

Figura 4.13: Arquitetura do circuito de predição com filtro adaptativo.

Fonte: (GONÇALVES et al., 2011).

Trabalhos com Bancada de Teste

Uma bancada de testes foi desenvolvida em HENRIQUES et al. (2010), no âmbito

de um projeto de pesquisa cooperativa entre o Grupo de Controle Automação e Robó-

tica (GCAR) com as empresas Transpetro e Coester, para realizar ensaios e experimentos

de degradação real dos componentes de um atuador eletromecânico para válvulas. São

descritos na seção 6.4 os procedimentos utilizados, neste e demais trabalhos (FACCIN,

2011; BÖESCH, 2011; PICCOLI et al., 2013a; LAZZARETTI, 2012; GIACOMOLLI,

2014; STEIN, 2014; MARIMON, 2014; ROCHA, 2016), para emular possíveis esforços

que a válvula sofre de acordo com a passagem de fluido no tubo e falhas comuns encontra-

das na aplicação no campo, onde o equipamento se torna suscetível à ação de degradação,

tais como envelhecimento, corrosão, rachaduras e danos causados por operadores.

Faccin (2011) realizou a análise dos tipos de falha na abertura e fechamento da

válvula com fusão de sensores. O procedimento de fusão de sensores seguiu as etapas:

processamento de sinais (pacotes wavelets), extração de características (energia do sinal)

e avaliação de desempenho (regressão logística). Para esta tarefa, a ferramenta Watchdog

Agent foi utilizada e comparada em duas plataformas diferentes, LabVIEW e MATLAB.

Na técnica, também foi calculado para cada sensor (de torque e vibração) o valor pico-a-



76

-pico, o pico máximo, o pico mínimo, o nível de corrente contínua, o valor da raiz qua-

drada da média (RMS - Root Mean Square), média aritmética e dados estatísticos como

a obliquidade e curtose. As falhas injetadas pelo freio apresentaram notórias alterações

no valor RMS dos sensores, já os sensores com acelerômetro apresentaram alterações de

frequência com engrenagens de dente desgastado ou fraturado. Por fim, demonstrou que

se projetada corretamente, a arquitetura de fusão de sensores pode melhorar a qualidade

do sensoriamento do processo.

Böesch (2011) apresentou um sistema elaborado com rotinas em MATLAB para

detecção de falhas aplicado aos dados coletados de sensores com a bancada de teste. O

programa analisou se há correlação cruzada de cada sinal com os sinais de referência,

tanto de falha quanto de operação normal e se apresentam características identificáveis

às assinaturas das falhas inseridas no sistema. Foi verificado os sinais de vibração para

operação do sistema em condição normal e na presença de falhas, como por exemplo

engrenagens desgastadas ou quebradas, onde apareceram frequências de vibração maiores

do que em operação normal.

Utilizando ferramentas de geração automática de código, Lazzaretti (2012) con-

verteu os algoritmos (energia da transformada wavelet packet e regressão logística) dis-

poníveis na ferramenta Watchdog Agent em software ou hardware embarcado. Entre as

plataformas MATLAB (com MATLAB Coder, Embedded Coder e HDL Coder) e Lab-

VIEW (com CompactRIO) utilizadas para gerar o hardware embarcado, obteve êxito ape-

nas com uma ferramenta para linguagem de descrição de hardware (HDL Coder - Hard-

ware Description Language Coder) do MATLAB aplicado ao algorítimo de regressão

logística. Enquanto para software embarcado, obteve êxito com ambos algoritmos (ener-

gia da transformada wavelet packet e regressão logística). O desempenho dos sistemas

de manutenção gerados em software/hardware embarcados foram comparados através de

parâmetros como tempo de execução e ocupação de memória ou de área na FPGA. O

monitoramento dos dados de vibração em conjunto com as técnicas de processamento de

sinais utilizadas no sistema de manutenção inteligente Watchdog Agent mostrou-se capaz

de detectar corretamente as falhas induzidas no atuador.

Em continuidade ao trabalho de fusão de sensores aplicada à manutenção inte-

ligente (FACCIN, 2011), Marimon (2014) comparou a ferramenta Watchdog Agent nas

plataformas LabVIEW e MATLAB. A versão da ferramenta Watchdog Agent para Lab-

VIEW foi mais indicada para o controle e análise do sistema analisado, pois permitiu

melhor compatibilidade e versatilidade. Os testes realizados com a válvula operando e



77

realizando os ciclos apresentaram resultados expressivos, através do monitoramento em

tempo real ativando um sinal amarelo ou vermelho para indicar quando o sistema neces-

sita de manutenção. Também foi realizada uma análise de viabilidade econômica consi-

derando o custo de implementação do sistema e a economia obtida com a substituição da

terceirização do serviço de manutenção preditiva, indicando uma recuperação estimada

do investimento do sistema na empresa em cerca de 20 meses.

O trabalho de Rocha (2016) descreve uma abordagem para auxiliar na determina-

ção dos ciclos de vida do produto com sinais de vibração coletados em tempo real. Através

de assinaturas de diferentes tipos de falhas, são analisadas sua variação entre amostras de

um mesmo lote e classificadas por tipos diferentes de falha. Com a identificação das fa-

lhas e seus respectivos componentes, foi determinado o estado do equipamento dentro da

curva de tempo início da vida (BOL - Beginning-of-Life), meio da vida (MOL - Middle-of-

-Life) e fim da vida (EOL - End-of-Life). A abordagem proposta foi construída em cima de

experiências anteriores (LAZZARETTI, 2012; MARIMON, 2014) em desenvolvimento

no projeto de Integração de Sistemas Inteligentes de Manutenção e Cadeia de Forneci-

mento de Peças Sobressalentes (I2MS2C). Descartando a fusão de sensores na análise, no

experimento foram utilizados apenas os dados do acelerômetro acoplado ao eixo do motor

do atuador. Pois, conforme outros estudos (LAZZARETTI, 2012), estes apresentam os

melhores resultados na detecção de degradação das engrenagens do atuador.

Stein (2014) desenvolveu um módulo com objetivo de ampliar as capacidades exis-

tentes na ferramenta Watchdog Agent. Para isso, introduziu um código em MATLAB ca-

paz de estimar o tempo de vida útil de uma determinada peça, analisando dados obtidos

de sensores de vibração acoplados à válvula elétrica. A partir do uso de modelo auto-

regressivo de médias móveis (ARMA - Auto-Regressive Moving Average), pôde determi-

nar uma provável data de quebra de uma peça ou equipamento baseando-se no comporta-

mento prévio (no caso, dados obtidos por simulação a partir de um padrão de degradação

adotado). O módulo desenvolvido para predição de saúde em MATLAB, tem a possibi-

lidade de oferecer informações para uma redução de custos do processo de manutenção.

O sistema permite a redução de gastos com estoques, insumos e matéria-prima no ambi-

ente de produção, por exemplo, pois os sistemas de otimização de cadeias de suprimento

obtêm as informações reais necessárias para a reposição de peças.



PARTE II - METODOLOGIA



78



79

5 PROPOSTA E IMPLEMENTAÇÕES DO SISTEMA

A metodologia proposta apresenta conceitos baseados no modelo de arquitetura

aberta para sistemas de manutenção CBM (OSA-CBM - Open System Architecture for

Condition-Based Maintenance) (SWEARINGEN et al., 2007), de manutenção centrada

em confiabilidade e técnicas de processamento de sinais reunidas num sistema inteligente

de apoio à tomada de decisão. O OSA-CBM é uma implementação da especificação fun-

cional ISO-13374 e define seis blocos de funcionalidade, ilustrados e enumerados na Fi-

gura 5.1. O sistema desenvolvido aborda os quatro primeiros blocos do modelo: 1) Aqui-

sição de dados; 2) Manipulação de dados; 3) Monitoramento das condições ; 4) Avaliação

da saúde.

Figura 5.1: Arquitetura conceitual do sistema nas camadas do OSA-CBM.

Sensor (vibração ou torque)

O
S

A
-C

B
M

1) Aquisição de dados

2) Manipulação de dados

3) Monitoramento das condições

4) Avaliação da saúde do sistema

5) Prognóstico

6) Apoio à tomada de decisão

FDS - Detecção

FDI - Diagnóstico

Trabalhos futuros

Fonte: adaptado de (JOHNSTON; WONG, 2018)

As arquiteturas para a concepção do projeto do circuito integrado dos sistemas

Fault Detection System (FDS) (PICCOLI et al., 2015a) dos blocos 1 ao 3 e Fault Detection

Index (FDI) (PICCOLI et al., 2015b) do bloco 4 para as tarefas de detecção e diagnós-

tico de falhas, bem como a comunicação com o módulo em hardware serão descritos

nas seções a seguir. As propostas foram implementadas na linguagem Verilog seguindo

orientações e expertise de Tumbush (2005) com algoritmos para concepção de DSP em

hardware. Os testes com o estudo de caso (válvula elétrica) para validação da proposta

escolhida da Figura 5.17, serão abordados no Capítulo 6.



80

5.1 Sistema Embarcado FDS e FDI

A escolha de algoritmos tais como DWT (WALNUT, 2002) e Filtro Adaptativo

com LMS (HAYKIN, 2001) foi relevante para o desenvolvimento do sistema em hard-

ware, pois apresentam baixa complexidade computacional e bom desempenho (KONEZNY;

RAO, 1995). Neste sentido, o processo de detecção de falhas com FDS (seção 5.2) com-

preende, na análise simultânea das propriedades do sinal em ambos os domínios de tempo

e frequência, a extração de características e filtragem adaptativa. O diagnóstico das fa-

lhas com FDI (seção 5.3), através do valor de uma integral sobre a detecção ao longo de

uma janela de tempo, produz um índice para identificação da falha e o estado de saúde do

equipamento.

5.2 O Sistema FDS para Detecção e Predição de Falhas

Visando a aplicação da detecção e predição de falhas em tempo real, este trabalho

propõe o uso de FDS em hardware. Conforme mostra a Fig. 5.2, o sistema realiza as

operações de uma DWT, extração de energia do sinal e filtragem adaptativa.

Figura 5.2: Estrutura do sistema de detecção de falhas.

FDS

s(n)
l(n)

h(n)

x(n) e(n)

µ

POTÊNCIADWT
FILTRO

LMS

Fonte: (PICCOLI et al., 2015a)

Nos processos industriais, alguns fenômenos manifestam informações observá-

veis que podem ser caracterizados com sinais s(n) (de vibração ou torque) obtidos de

transdutores. No esquema da Fig. 5.2, o bloco DWT é responsável pela decomposição do

sinal de entrada em diversos componentes, localizados no tempo e na frequência. Para al-

cançar um resultado desejado, de acordo com as características do sinal 1, o coeficiente de

aproximação l(n) ou de detalhe h(n) é repassado ao bloco POTÊNCIA, onde a ener-

gia do sinal é extraída. Em seguida, um filtro adaptativo LMS é utilizado para predizer

1Conforme o tipo de sensor utilizado para esta técnica, o sinal de entrada pode apresentar maior sen-
sibilidade na variação de amplitude (coeficiente de aproximação da DWT com sensor de torque) ou de
frequência (coeficiente de detalhe da DWT com sensor de vibração).



81

os valores do sinal de entrada do filtro x(n) com a própria resposta desejada, ou seja, o

sinal de entrada atrasado em um número específico de amostras. O passo de adaptação do

filtro adaptativo é configurado para controlar a estabilidade e velocidade de convergência

e, assim, obter a sensibilidade da variação em regime transitório no domínio tempo do

sistema. É importante observar que nesta aplicação, o sinal de saída, ou seja o erro e(n),

representa a detecção das possíveis falhas nos sinais observados.

5.2.1 Transformada Discreta de Wavelet

As vantagens da transformada de wavelet para determinadas aplicações frente às

convencionais, como a transformada de Fourier, já são bem conhecidas. Devido à pos-

sibilidade que oferece em obter uma representação no domínio tempo-frequência, essa

transformada é amplamente utilizada para análise de sinais.

Existem dois métodos principais para sua produção e implementação, um no do-

mínio do tempo e outro no domínio da frequência. O método baseado na frequência

é denominado de Filter Banks (FB) e, o baseado no tempo é denominado de Lifting

Scheme (LS).

Na estrutura FB, em geral, os coeficientes do filtro são números fracionários, por-

tanto, eles não são apropriados para a implementação em hardware. Além disso, o número

de cálculos aritméticos no método FB é elevado. Portanto, neste trabalho será abordado

o método LS.

Estrutura LS

Na estrutura LS, inicialmente as amostras do sinal de entrada são divididas em

amostras pares e ímpares. A função P (predição da amostra ímpar) é aplicada na amostra

par. A diferença entre a predição e o valor real da amostra ímpar, gera a parte do sinal de

alta frequência que é denominado de coeficientes de detalhe (d). Em seguida, é aplicada

a função U ao sinal de detalhe e o resultado combinado com as amostras ímpares para

atualizá-la de modo a obter os coeficientes de aproximação (a) com as propriedades de-

sejadas. Normalmente, coeficientes de aproximação contêm as mesmas propriedades do

sinal de entrada (x), mas com a metade do tamanho, ou seja, comprimido.



82

Figura 5.3: Diagrama de blocos da estrutura LS.

Para o bloco de predição P (Prediction) tem-se:

d = xodd ?P(xeven) (5.1)

Para o bloco de atualização U (Update) tem-se:

s = xeven + U(d) (5.2)

O número e composição dos blocos P e U na estrutura LS são diferentes para cada

tipo de wavelet. A Figura 5.4 mostra uma arquitetura proposta em (JOU; SHIAU; LIU,

2001) para a wavelet 9/7.

Figura 5.4: Arquitetura LS em hardware para wavelet 9/7.

Fonte: (JOU; SHIAU; LIU, 2001)

A implementação em particular da DWT deste trabalho é similar à utilizada em

compressão de imagem com perdas JPEG2000 (TAUBMAN; MARCELLIN, 2002) e

(BARUA et al., 2005), composta por Cohen-Daubechies-Feauveau 9/7 (CDF 9/7) (DAU-

BECHIES; SWELDENS, 1998). Os valores próximos das operações do JPEG2000 para

predição P e atualização U adotados especialmente neste trabalho, que permitem exclusi-

vamente a simplificação do circuito através de operações de deslocamento aritmético, são



83

listados a seguir:

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

?

P1 = ?.(1 + z); onde ? = ?(2
0 + 2?1 + 2?4 + 2?6 + 2?7) = ?1,5859375

U1 = ?.(z
?1 + 1); onde ? = ?(2?5 + 2?6 + 2?8 + 2?9) = ?0,052734375

P2 = ?.(1 + z); onde ? = (2
?1 + 2?2 + 2?3 + 2?7) = 0,8828125

U2 = ?.(z
?1 + 1); onde ? = (2?2 + 2?3 + 2?4) = 0,4375

K0 = K = (2
0 + 2?2) = 1,25

K1 = K
?1 = (2?1 + 2?2 + 2?4) = 0,8125

(5.3)

5.2.2 Energia do Sinal

Ao aplicar uma transformada com uma base ortonormal, base essa formada por

vetores unitários dois a dois ortogonais, como é o caso da transformada de Walvelet, a

relação de energia do sinal é mantida, dessa forma o teorema de Parseval afirma que pode-

-se obter essa mesma energia para sinais de tempo discretos (equação 3.4 no Capítulo 3).

Para sinais periódicos, a potência pode ser estimada em uma abordagem baseada

na detecção de consumo anormal com cálculo interativo da média móvel exponencial

ponderada (EWMA - Exponentially Weighted Moving Average) (MARTINEZ-ORTIZ;

BECK; WILDE, 2011). O algoritmo EWMA pode ser utilizado também como parte da

detecção de falhas proposta por Mansouri et al. (2018).

A Equação 5.4 foi adaptada para obter o sinal de potência com o algoritmo EWMA

sem a necessidade de utilizar muitos recursos de memória para a implementação da pro-

posta em hardware:

p[k] = (1??)×p[k ?1] + ?×u2[k]

? =
2

(N + 1)

(5.4)

A variável u[k] é composta por frequências baixas ou altas do bloco anterior

DWT, representado respectivamente, pelas variáveis de detalhe d[k] ou aproximação

a[k]. O parâmetro ? é um fator de suavização com número N de períodos unitários. Os

valores para ? são selecionados arbitrariamente na faixa de 0 a 1 (0 ? ? &amp;lt;1), que compõe

uma janela exponencialmente decrescente do sinal de entrada elevado ao quadrado u[k]2.



84

O valor adotado neste trabalho para o parâmetro N foi de 7 períodos (próximo ao número

de taps do filtro adaptativo da seção abaixo), com isso, o valor de ? foi de "2?2 = 0.25" e

"(1??) de "(2?1+2?2) = 0.75", o que permite a simplificação do circuito com operações

de deslocamento aritmético no sistema binário (base 2).

5.2.3 Filtro Adaptativo LMS

Quando o processo aleatório é estacionário, o filtro adaptativo pode facilmente

modelar os coeficientes de modo a apresentar uma saída de erro nulo, pois as proprieda-

des estatísticas do sinal não variam ao longo do tempo. Apesar de ser um ótimo estimador

recursivo para modelos lineares estocásticos, a saída do filtro adaptativo pode apresentar

sinal de erro e(z) caso o processo se transforme ligeiramente em não estacionário ou di-

nâmico. Esse comportamento deve-se ao fato que os sistemas dinâmicos sofrem influên-

cia não só de entradas conhecidas, como também agem sobre eles, problemas que causam

efeitos e não podem ser controlados, nem modelados deterministicamente, tais como:

mecanismos de falha nos equipamentos que podem causar deformações mecânicas e va-

riações no rendimento, falha na transmissão de sinais por interferências eletromagnéticas,

reverberações e ruídos de outras fontes.

Desta forma, assim como o algoritmo SANC da Figura 2.17 (Capítulo 2), proposto

por Zhang et al. (2018) para cancelar ruídos, neste trabalho o filtro adaptativo foi utilizado,

na tarefa de predição com o sinal de referência atrasado para determinar e adaptar-se à

condição futura do processo. Deste modo, o algoritmo LMS trabalha juntamente com o

filtro FIR, fazendo o ajuste dos coeficientes do filtro para minimizar o erro no sentido da

média dos quadrados. Então, a velocidade de convergência pode ser ajustada, através do

parâmetro µ de passo do filtro adaptativo LMS contido no algoritmo, para obter uma boa

abrangência na detecção de possíveis falhas.

A arquitetura proposta será desenvolvida a partir do diagrama do Filtro Adapta-

tivo LMS. Esse consiste em dois blocos principais, um de Filtro FIR e outro composto do

Algoritmo LMS. O diagrama de blocos representativo do Filtro Adaptativo LMS desen-

volvido encontra-se na Figura 5.5. A saída y(z) é subtraída do sinal desejado d(z) para

gerar o sinal de erro e(z). Este, por sua vez, é utilizado pelo algoritmo LMS, juntamente

com o parâmetro de adaptação µ, para calcular o próximo conjunto de coeficientes a ser

utilizado pelo Filtro FIR.



85

Figura 5.5: Diagrama de blocos do filtro adaptativo LMS.

Em algumas aplicações, as estruturas adaptativas apresentam uma grande quanti-

dade de coeficientes para adaptação do filtro (ZHANG et al., 2018), porém seu aumento

pode causar maior custo computacional do método em hardware. Logo, foi adotado neste

trabalho a dimensão do tap (número de atrasadores) do filtro FIR na ordem de 5. Esse

valor está relacionado com a quantidade de coeficientes do filtro e com sua função de

transferência idealmente finita aplicada ao sinal de entrada (sinal de sensores acoplados a

um sistema mecânico ideal de quinta ordem).

5.3 O Sistema FDI para Diagnóstico de Falhas

O índice de detecção de falhas ou Fault Detection Index (FDI) (PICCOLI et al.,

2015b) obtém uma informação probabilística e compactada do tipo de falha detectada

no bloco FDS para determinar, de uma forma diferenciada, a grandeza das amostras de

falha a serem analisadas dentro de uma janela de tempo durante o teste. Os cálculos

são realizados dentro do período de amostragem, obtendo-se assim o risco potencial e as

causas da falha em tempo real. Deste modo, a degradação do equipamento e o tipo de

falha podem ser monitorados constantemente pela probabilidade de sua ocorrência, e sua

severidade, pelo índice que corresponde à gravidade do efeito da falha.

5.3.1 Índice de Detecção de Falhas

A amplitude do sinal do resultado do bloco anterior FDS (entre 0 e 1) é compa-

rado com um limite pré-configurado (0,25 ou 2
9

211
neste caso, descartando os 9 bits menos

significativos do sinal de erro) no bloco FDI, de forma que um flag indique uma detec-

ção (FD - Fault Detection). O FDI soma o número de detecções em um dado conjunto

de amostras (frame) de tamanho N (256 neste trabalho). Como a saída do FDI também



86

é um sinal compactado em N vezes a taxa de dados do sinal FDS, pode ser mais facil-

mente analisado ou até mesmo transmitido por redes sem fio (por exemplo, protocolo

WirelessHARTTM), economizando energia e banda de transmissão de dados. O sistema

obedece à Equação 5.5 abaixo:

FDI[j] =

N×(j+1)?1
?

k=N×j

FD[k] (5.5)

Onde FD[k] é uma flag de índice [k] que indica se uma falha é detectada

(quando o sinal de erro excede um determinado limiar) em cada amostra na saída do FDS,

o índice [k] refere-se a um instante atual de tempo discreto, N é o número de medidas

discretas e [j] é a amostra de tamanho N.

5.4 Chip para Predição e Detecção de Falhas

A arquitetura conceitual é responsável pelo processamento das quatro primeiras

camadas do modelo OSA-CBM, ou seja, captura de dados e processamento inteligente

(que inclui processamento de sinais, monitoração de condição e diagnóstico). Divide-

-se o sistema em duas aplicações claramente diferenciadas: a aplicação de detecção de

falhas com FDS e a aplicação de diagnóstico com FDI. Para formar sensores inteligentes,

visto na seção 2.2.2, tais aplicações podem ser conectadas entre si em conjunto com um

conversor de dados A/D. Nas subseções, a seguir, foram abordadas as arquiteturas para

implementação em hardware: O sistema FDS e FDI; O sistema FDS e FDI com um

módulo de conversão A/D e o protocolo de comunicação SPI; O sistema FDS com o

protocolo de comunicação SPI; O sistema FDS com FDI e protocolo de comunicação

SPI, que posteriormente, será apresentado em detalhes.

5.4.1 Arquitetura do FDS

Dependendo do resultado desejado e do tipo de sinal, o sistema permite que o

usuário escolha o uso dos coeficientes de aproximação (amplitude do sinal da leitura

de torque) ou os coeficientes de detalhe (frequências do sinal da leitura de vibração) da

DWT para serem enviados ao bloco de POTÊNCIA, no qual a energia do sinal é cal-

culada. Caso o bloco gerador de padrões de teste (TPG - Test Pattern Generation) seja



87

selecionado, o sinal a ser processado será substituído por uma sequência pseudoaleatória.

O esquema do FDS sintetizado aplicado ao estudo de caso é apresentado na Fi-

gura 5.6. Contém um pino de relógio (clk), um pino de modo aproximação ou de-

talhe (mad), um pino de reiniciar (rst), um pino para realizar autoteste (tst), um

pino para habilitar o chip e sua máquina de estados (en), doze pinos de entrada de si-

nal (in[11:0]), dezesseis pinos para o parâmetro µ (step[15:0]), que é o passo de

adaptação do filtro LMS; e finalmente o sinal de detecção de saída (erro[15:0]). Con-

forme a Figura 5.7, este esquema necessita de 49 pinos de função e dois de alimentação

totalizando 51 pinos.

Figura 5.6: Arquitetura do FDS para síntese.

A imagem de topo com os sinais de entrada e saída do FDS encontra-se na Fi-

gura 5.7.

Figura 5.7: Diagrama da pinagem do FDS.

5.4.2 Arquitetura para Autoteste Funcional

Embutido na arquitetura do chip, foi utilizado um gerador de estímulos (veto-

res de teste) usando registradores de deslocamento com realimentação (LFSR - Linear

Feedback Shift Register), conforme Figura 5.8, com o polinômio primitivo característico



88

f(x) = x8 + x4 + x3 + x2 + 1, que é ativado na condição de autoteste do circuito emu-

lando uma sequência de sinal pseudoaleatória, obtendo-se assim um ruído como sinal de

entrada. O LFSR da Figura 5.8 é de configuração Galois (KHAN, 2013), que permite um

melhor desempenho em termos de velocidade, combinado com a técnica de clock gating

na implementação de hardware, permite também menor consumo de energia. O LFSR

atua como um contador de 8 bits, possui registradores de deslocamento e realimentação

linear que utiliza 8 flip-flops e, quando uma função primitiva é configurada, pode imple-

mentar 255 (28?1) estados (menos o zero) sem repetições destes (BEZERRA; VARGAS;

GOUGH, 2001).

Figura 5.8: Implementação na configuração Galois de 8-bit do LFSR.

A Figura 5.9 exibe a arquitetura do gerador de padrões de teste (TPG - Test Pattern

Generation) para o circuito sobre teste (CUT - Circuit Under Test), que por sua vez, é

composto pelos blocos do chip, entre eles o FDS, FDI e SPI.

Figura 5.9: Gerador de padrões de teste para o chip.

O autoteste funcional do chip é realizado conforme o esquemático da Figura 5.10.

Inicialmente o chip deve estar habilitado (pino EN), ter um sinal de relógio (pino CLK)

e o autoteste ser selecionado (pino TST). O teste pode ser reinicializado pela opção de

reiniciar o chip (pino RST).



89

Figura 5.10: Esquema de funcionamento do gerador de padrões de teste.

Sempre que o autoteste for inicializado, o algoritmo LFSR receberá um valor

inicial denominado de semente. Conforme o andamento dos pulsos de relógio, vetores

pseudoaleatórios do LFSR são gerados até coincidir com o valor da semente. Então, o

comparador ativa o contador de 8 bits para incrementar um valor até que chegue no limite

de 256 (28), neste momento, a semente é zerada para que não haja mais a geração dos

vetores pseudoaleatórios. Deste modo, a sequência de teste é encerrada com dados que

permitem a produção de um gráfico ou histograma, onde visualmente o padrão de teste

pode ser verificado.

5.4.3 Arquitetura do FDI

O sistema FDI foi elaborado para ser acoplado ao FDS e ampliar sua capacidade.

Em sua estrutura, contém dois contadores e um comparador, onde um contador determina

o número de amostras, enquanto o outro realiza a contagem do número de detecções. O

circuito sintetizável é apresentado na Figura 5.11. Seu funcionamento é similar ao traba-

lho de Shahbazi, Poure e Saadate (2018). Note que a variável de detecção de erro ?k0 da

Figura 2.21 (Capítulo 2), neste trabalho é denominado FD. É realizada uma comparação

com um limiar no bloco "&gt; h", e o mesmo ocorre com o bloco comparador na implemen-

tação da Figura 5.11. A variável N é utilizada nos dois trabalhos da mesma forma para

realizar contagem de detecções, só que em (SHAHBAZI; POURE; SAADATE, 2018), é

utilizado também para sincronizar e reconfigurar o processo, já que o sistema foi montado

em malha fechada.



90

Figura 5.11: Arquitetura do FDI para síntese.

5.4.4 Arquitetura do FDS com SPI

Uma vez que o escopo deste trabalho é a parte digital do sistema, o módulo A/D

foi removido, assim a compilação e síntese do código fica limitada somente à parte digital.

A Figura 5.12 é apresentada a arquitetura com FDS e SPI sintetizada.

Figura 5.12: Arquitetura do chip FDS para predição de falhas com SPI.

O diagrama da pinagem do chip é apresentado na Figura 5.16 e uma lista dos

sinais de entrada e saída na Tabela Tabela 5.1. Com esta nova estrutura, a pinagem do

chip ficou reduzida, apresentando seis pinos de função e dois de alimentação. O SPI

escravo desenvolvido utiliza 16 bits para transmissão, compatível com um SPI mestre

comercial que opere com 8 bits de transmissão. Conforme o protocolo de comunicação

do chip (seção 5.6.1), o relógio do chip é alimentado pela própria interface SPI e os 16

bits recebidos serialmente representam o sinal ou coeficiente de adaptação do filtro LMS

mais a opção de seleção de coeficientes de aproximação ou detalhe da DWT. Os 16 bits



91

enviados serialmente no modo full duplex, representam a detecção de falhas do chip.

5.4.5 Arquitetura do FDS e FDI com SPI

A arquitetura para o sistema FDI (seção 5.3) contém dois contadores e um compa-

rador, um contador determina o número de amostras, enquanto o outro realiza a contagem

do número de detecções.

O FDI foi integrado e sintetizada ao FDS com o módulo SPI (seção 5.4.4) e é

apresentado na Figura 5.13:

Figura 5.13: Arquitetura do chip FDS e FDI para predição de falhas com SPI.

Esta estrutura apresenta a mesma pinagem do chip anterior e o mesmo diagrama

da Figura 5.16. Adicionalmente para este esquemático com FDI, foi incluído um pino

STS de status, que é ativado sempre que seu valor for superior ou igual a 75% ( (2
7+26)
28

).

A Tabela Tabela 5.1 apresenta a lista dos sinais de entrada e saída.

5.5 Arquitetura para Indústria 4.0

O monitoramento do funcionamento de equipamentos, através do chip de predição

de falhas, permite identificar problemas antes que se tornem graves, possibilitando uma

maior eficiência na linha de produção. Evita-se, dessa maneira, perdas financeiras em

futuras fábricas que estejam diretamente ligados à coleta e análise de grande volume de

dados sempre que seja utilizado o paradigma da Internet das coisas industrial (IIoT -

Industrial Internet of Things) (BOYES et al., 2018) e Indústria 4.0 (HOFMANN; RüSCH,



92

2017), por exemplo.

Diferentes dispositivos podem comunicar-se com um único microcontrolador atra-

vés do protocolo SPI (seção 6.3), pois sempre haverá um mestre (um microcontrolador)

e um ou mais escravos (nesse caso, FPGAs ou chips para predição e detecção de falhas).

Deste modo, pode-se implementar no microcontrolador protocolos seguros de rede tais

como Modbus, WirelessHartTM, entre outros, que, por sua vez, possuem também ferra-

mentas de diagnóstco.

O escravo poderá operar em baixa frequência pelo ajuste do relógio da comuni-

cação serial, uma vez que, para a transmissão WirelessHartTM, os dados de detecção de

falhas podem ser enviados com uma taxa máxima de 250 kbit/s. Já em uma rede para

comunicação a longas distâncias e com consumo baixo de energia (LoRa - Long Range)

(MIKHAYLOV; PETAEJAEJAERVI; HAENNINEN, 2016), por exemplo, a taxa máxima

de transmissão é de 50 kbit/s.

A estrutura geral de uma rede WirelessHARTTM com dispositivos de detecção de

falha foi abordada por Piccoli et al. (2013b) e pode ser visualizada na Figura 5.14. Nela,

é possível identificar os elementos fundamentais além do handheld (com ou sem fio, para

comissionamento e inspeção) e da ligação com o barramento de dados da planta. Nesta

Figura, o gerenciador de rede, o gateway (que possibilita a comunicação entre a aplicação

host da planta e os dispositivos de campo) e o ponto de acesso estão contidos em um único

equipamento, o que tem sido utilizado comercialmente.

Figura 5.14: A estrutura geral com uma rede WirelessHARTTM.

Fonte: (PICCOLI et al., 2013b).



93

A rede de comunicação da Figura 5.15 com protocolo de linha serial Modbus RTU

(Remote Terminal Unit) foi proposta por Piccoli et al. (2013a), que utilizaram um gestor

de rede, ou mestre, responsável por iniciar a transmissão. O dispositivo para detecção

de falhas, denominado de escravo, ficou disponível para consulta e respondeu às requi-

sições do mestre. Nesse protocolo, somente um mestre por vez pode ser conectado ao

barramento, enquanto que até 247 nós escravos podem ser ligados a este barramento.

Figura 5.15: Configuração do projeto em rede Modbus.

Fonte: (PICCOLI et al., 2013a).

Os protótipos dos módulos mestre/escravo deste sistema, são compostos por mi-

crocontroladores e redes de comunicação que utilizam circuitos integrados, transceptores

para converter os sinais nos padrões RS-485 como meio físico de transmissão. O proto-

colo Modbus RTU foi implementado em software e embarcado nos microcontroladores.

O sistema teve um nó mestre que emitiu comandos para um ou mais nós escravos com

sistema de detecção e predição de falhas, que por sua vez processaram as respostas.

5.6 Descrição Operacional do Chip

A imagem de topo com os sinais de entrada e saída do FDS da Figura 5.7 (seção

5.4.1) com ou sem acoplamento do FDI (seção 5.4.3) e a interface de comunicação SPI,

fica reduzida a função de sete pinos como mostra a Figura 5.16.



94

Figura 5.16: Chip para predição de falhas com interface SPI.

O esquemático da Figura 5.17 apresenta o diagrama de blocos internos do chip.

Ele contém uma interface de comunicação serial através do protocolo SPI, que realiza

uma conversão serial/paralelo dos dados de entrada e saída, e é estimulado pelo gerador

de relógio serial do dispositivo mestre, conectado ao barramento. Possui ainda a opção de

habilitar ou não o chip, reiniciá-lo e colocá-lo no estado de teste.

Figura 5.17: Esquemático do chip para predição de falhas com interface SPI.

A comunicação do chip via SPI com um mestre, visto na seção 3.4, contém as

principais conexões para a arquitetura proposta. A Tabela 5.1 lista e descreve os sinais de

entrada e saída (E/S) do chip.

Tabela 5.1: Pinagem do chip com interface SPI.

Nome E/S Bits Ativo Descrição

RST E 1 Alto Zera a memória e todos os sinais

SDI E 1 - Dados de entrada Serial

SDO S 1 - Dados de saída Serial

SCK E 1 - Relógio Serial para o SPI

TST E 1 - Autoteste funcional do chip

STS S 1 - Status

CSN E 1 Baixo Inicialização ou seleção do chip

Total 7 pinos de função e 2 de alimentação (VDD e VSS)



95

5.6.1 Protocolo de Comunicação SPI para o Chip

Por padrão a comunicação SPI permite a configuração das bordas de comunicação

do relógio SCK através de sua polaridade (CPOL - Clock Polarity) e fase (CPHA - Clock

Phase). A configuração estabelecida no dispositivo embarcado foi 0 (zero) para ambos

CPOL e CPHA, com borda de troca na subida, ocorrendo a transição no meio do bit.

A posição do bit mais significativo (MSB - Most Significant Bit) foi estabelecida como

o primeiro bit da comunicação. É possível observar na Figura 5.18 todas essas caracte-

rísticas pelo traçado vertical entre a borda de subida do relógio e a sequencia de dados

transmitidos (MISO) e/ou recebidos (MOSI).

Figura 5.18: Protocolo de comunicação com o chip.

O chip comunica-se através do protocolo SPI com microcontroladores através de

14 bits de dados e 2 bits de controle, enviando para o microcontrolador 16 bits de dados

correspondente ao sinal de detecção de falhas:

1. O bit C02 (em binário a posição [15]) do MOSI é utilizado para identificar os

dados de entrada. Caso o valor seja “1”, os dados representam o sinal adquirido

do sensor. Quando “0”, os dados equivalem ao número do coeficiente de ajuste do

filtro adaptativo;

2. O bit C01 (em binário a posição [14]) do MOSI é reservado para a seleção entre

os coeficientes de aproximação ou de detalhe da transformada DWT;

3. Os bits X01 e X02 do MOSI e X01 a X08 do MISO são reservados para algum outro

uso;



96

4. Os bits D01 a D12 do MOSI representam o sinal ou coeficiente, dependendo de

C02. Estes números devem estar anotados em ponto fixo no formato Q5.11 (Qm.n:

m é a parte inteira e n a fracionária, ver seção 3.3.1).

5. Os bits D01 a D08 do MISO representam números inteiros de detecção do bloco

FDI.

5.6.2 Ajuste dos Parâmetros do Chip

Uma análise sobre o algoritmo FDS e FDI apresentado neste trabalho, revela que o

processamento dos sinais no chip é limitado com uma certa quantidade de bits. Portanto,

para evitar saturação ou estouro da capacidade de armazenamento de um registrador e

evitar perda de precisão dos cálculos no chip, é necessário, principalmente, o ajuste de

um valor razoável de ganho do sinal do sensor de entrada.

Levando em conta que os dados de entrada do circuito são representados em um

número limitado de bits, na representação de ponto fixo do sinal, o peso do bit mais signi-

ficativo deve ser fixado de acordo com a dinâmica do valor do sinal do sensor. A otimiza-

ção no formato Q, do peso do bit menos significativo, é realizado através do truncamento

do tamanho ou comprimento da palavra, assim pode-se manter uma certa precisão dos

cálculos no chip e diminuir sua complexidade em nível de hardware.

O procedimento para configuração do chip (ou treinamento do sistema de detec-

ção de falhas) da Figura 5.19, deve ocorrer durante a condição de operação normal do

equipamento, ou seja, com o sistema funcionando sem falha. Inicialmente, é necessário

adquirir os dados do sensor e quantificá-los no formato de ponto fixo, durante a operação

normal do sistema monitorado.

A seguir o chip deve apresentar um valor de erro estacionário, para isso, o ganho

do sensor é ajustado em um valor mais alto e o parâmetro de adaptação do filtro adaptativo

LMS em um valor mais baixo. Feito isso, o valor do ganho do sinal de entrada é diminuído

até que o erro de estado estacionário seja nulo.

Então, o valor do passo de adaptação do filtro deve ser aumentado até aparecer o

erro novamente. Em seguida, o valor do último ajuste do parâmetro, enquanto o chip não

indicava sinal de erro, deve ser configurado no chip.



97

Figura 5.19: Procedimento para configuração do chip.

O usuário pode realizar a configuração do chip, enviando os parâmetros via co-

nexão SPI. Os comandos inseridos no protocolo para ativar o modo de configuração do

chip, são apresentados na seção 5.6.1. Uma vez que a comunicação é estabelecida entre

o chip e o microcontrolador (seção 6.3) o chip processa os dados recebidos do microcon-

trolador, analisa e devolve via conexão SPI em tempo real. A visualização dos resultados

é realizada pelo usuário em um histograma no computador.



PARTE III - RESULTADOS E CONCLUSÕES



98



99

6 RESULTADOS OBTIDOS

A linguagem Verilog suporta vários níveis de abstração e estilos de descrição es-

trutural, comportamental e de fluxo de dados. Todas essas formas são simuláveis, porém

nem toda abstração tem representação válida sintetizável para uma netlist final na bibli-

oteca de fabricação escolhida. O projeto deste trabalho levou em conta este fator, com

a maior parte da descrição em nível estrutural, poucas implementações em nível com-

portamental e 0% utilizando outras descrições de hardware (esquemáticos e blocos de

propriedade intelectual ou de terceiros).

Para a elaboração do leiaute de um circuito integrado de aplicação específica

(ASIC), O projeto foi particionado em módulos e sub-módulos hierárquicos baseados

na funcionalidade de cada bloco do sistema. Foram criados blocos para a DWT, EWMA,

TPG (com LFSR), Filtro LMS, FDI e SPI de modo que as lógicas com características

similares foram agrupadas e conectadas para melhorar a qualidade da síntese. A hierar-

quia do projeto e o modo com que este é particionado podem influenciar no resultado da

síntese, então, quantas vezes foram necessárias, toda essa descrição depois de simulada

foi sintetizada, otimizada e simulada novamente.

A síntese lógica do projeto foi realizada com as ferramentas das empresas Sy-

nopsys (para a biblioteca de 90 nm) e Cadence (para a biblioteca de 0,6 µm), a seguir, foi

projetada a árvore de distribuição do sinal de relógio do circuito. De posse da descrição

netlist do circuito desenvolvido, foi realizada a simulação deste, utilizando a ferramenta

Verilog Compiler and Simulator (VCS) da Synopsys e vsim da Mentor Graphics a fim

de verificar as atividades de chaveamento do circuito.

Visando a elaboração de um leiaute para a solução proposta em ASIC, será apre-

sentada também, sua implementação utilizando a tecnologia FPGA de hardware progra-

mável em conjunto com um microcontrolador. O microcontrolador realizou a conversão

dos valores entre os formatos de ponto fixo e ponto flutuante, e serviu como uma ponte de

comunicação entre a FPGA e a estação de trabalho do usuário, neste caso um computador,

mas poderia ser também outro equipamento ou hardware específico.

Conforme a Figura 6.2, a síntese física do chip foi realizada na etapa de leiaute,

utilizando as ferramentas de síntese das empresas mencionadas anteriormente e analisadas

as estimativas de tempo, área e consumo de energia do circuito. Ao final dessa etapa, o

leiaute com a descrição física do circuito foi validado mediante testes com as ferramentas

existentes para que ele possa ser fabricado.



100

Figura 6.1: Etapas de operação para a obtenção de resultados.

Na etapa de experimentação com bancada de teste, os dados de operação do atu-

ador elétrico foram coletados em condições normais e de falha. Finalmente, a simulação

pós-síntese do leiaute físico foi realizada com dados do estudo de caso obtidos na etapa

anterior em conjunto com um testbench. De posse dos resultados dessa etapa, os gráficos

para análise foram gerados na ferramenta Scilab.

6.1 Desenvolvimento do Chip na Biblioteca Educacional de 90 nm

No desenvolvimento do chip na biblioteca educacional de 90 nm desta pesquisa,

foram utilizadas duas ferramentas de software da Synopsys de síntese, chamadas de De-

sign Compiler (DC) e Integrated Circuit Compiler (IC).

6.1.1 Síntese Lógica do Chip

A ferramenta Design Compiler (DC) foi utilizada na síntese lógica. A Figura 6.2

mostra os dados de entrada e saída utilizados nessa síntese. Dentre os arquivos de entrada

podem ser citados: a biblioteca da synopsys SAED 90 nm (extensão .library); Arqui-

vos fontes em Verilog (.v); Arquivo de restrições (.sdc). A ferramenta DC foi utilizada

para optimizar o circuito, analisar problemas da arquitetura e gravar os resultados nos

formatos de saída (.v , .sdc, .rep).

Figura 6.2: Entradas e saídas da ferramenta Design Compiler.

Foi habilitada a opção para a técnica de clock gating da ferramenta DC com a di-



101

retiva insert_clock_gating. Deste modo, um sinal de controle que é repassado ao banco

de registradores e implementado automaticamente à logica de distribuição do sinal de

relógio. Já o processo de otimização da área do projeto foi realizado com a opção com-

pile_ultra e diretiva para esforço máximo area_effort_high_script. Assim, pode-se redu-

zir a dissipação de energia e a área do projeto (reduzindo à lógica combinacional), o que

permite aumentar a frequência máxima de operação do circuito.

A Figura 6.3 ilustra a visão de topo do chip gerado pela ferramenta DC.

Figura 6.3: Visão de topo do chip de predição de falhas.

A ferramenta Formality da Synopsys da Figura 6.4 foi utilizada para validação e

verificação de equivalência frontend (entre RTL e netlist gerados), obtendo assim uma

correlação precisa da qualidade dos resultados (QoR - Qality of Results) antes e após a

síntese lógica: temporização, área e potência utilizada. As palavras (Verification Suc-

ceeded) indicam que a verificação dos requisitos de tempo foi bem sucedida e ambos os

projetos são equivalentes.

Figura 6.4: Verificação da síntese lógica e validação da qualidade dos resultados.



102

6.1.2 Síntese Física do Chip

A ferramenta Integrated Circuit Compiler (IC) foi utilizada na síntese física. A

Figura 6.5 mostra os dados de entrada e saída utilizados nessa síntese. Dentre os arquivos

de entrada pode-se citar: a biblioteca da Synopsys SAED 90 nm (extensão .library);

Arquivos netlist (.ddc); Arquivo de restrições (.sdc); Informação parasitas dos compo-

nentes (.map); Informações específicas da tecnologia, tais como os nomes, característi-

cas (físicas e elétricas) para cada camada de metal (.tf); Informações de energia, célula

lógica, tempo (.db).

Essa ferramenta foi utilizada para elaboração do leiaute e preparar os dados se-

guindo todas as etapas de fluxo de projeto: Floorplanning, Power Planning, Placement,

Clock Tree Distribution, Routing, Physical Verification e gravar os resultados em formato

de arquivo com a descrição do circuito integrado (.v , .gds, .spef), usado pelas foun-

dries como referência para sua fabricação.

Figura 6.5: Entradas e saídas da ferramenta IC Compiler.

O processo de síntese física da Figura 6.6, otimizado para atender às especificações

exigidas, consiste em 9 camadas de metal nas quais as camadas metálicas ímpares são

usadas somente para conexões horizontais e as pares somente para conexões verticais. A

camada de metal 1 foi usada para posicionar células padrão; A camada de metal 2 foi

usada para relógio vertical e roteamento de sinal; A camada de metal 3 foi usada para

relógio horizontal e roteamento de sinal; Da camada de metal 4 até a camada de metal 9

foram usadas principalmente para trilhas de energia e aterramento; Parte do roteamento do

sinal também foi utilizado entre as camadas de metal 4 e 7 para evitar erros na verificação

de regras de projeto (DRC - Design Rule Checking).



103

Figura 6.6: Síntese física do chip de predição de falhas em 90 nm.

A ferramenta Formality da Synopsys da Figura 6.7, também foi utilizada no fluxo

de projeto para validação e verificação de equivalência backend (entre netlist e leiaute

gerados). As palavras (Verification Succeeded) indicam que a verificação dos requisitos

de tempo foi bem sucedida e ambos os projetos são equivalentes.

Figura 6.7: Verificação da síntese física e validação da qualidade dos resultados.



104

A Figura 6.8 abaixo, ilustra o modo de visualização de posição dos blocos do

sistema, após a conclusão da síntese física com a ferramenta IC. As barras coloridas desta

ferramenta são histogramas e indicam a proporção de células padrão utilizadas para cada

bloco do projeto. Pode-se observar, a partir dessa ilustração, que a maior parte da área

ocupada no chip é devido ao bloco do filtro adaptativo LMS com 6101 do total de 7596

células padrão, totalizando 80,32% de ocupação. Já o bloco TPG para autoteste funcional

com 62 células padrão ocupou 0,81% do total.

Figura 6.8: Posicionamento e roteamento das células.

A distribuição de densidade de energia consumida do esquemático mapeado na

biblioteca educacional da Synopsys SAED 90 nm, incluindo os registradores de entrada

e saída que sincronizam o circuito, é mostrado na Figura 6.9. Poucos objetos apresenta-

ram energia consumida por unidade de área acima de 174057 (µW/cm2), sendo que 4

apresentaram maior densidade de consumo no valor de 348113 (µW/cm2), porém todos

esses pontos críticos encontram-se dispersos ao longo do circuito integrado, o que vem a

minimizar seus efeitos.



105

Figura 6.9: Distribuição da densidade de energia consumida.

A estrutura da distribuição da árvore de relógio da Figura 6.10 mostra o sinal

de relógio serial SCK dividido em 12 níveis dentro do chip. As barras coloridas desta

ferramenta são histogramas e indicam a proporção de objetos para cada nível na árvore de

relógio. Pode-se observar, a partir dessa ilustração, que o primeiro domínio (Level 0) do

relógio serial SCK é estabelecido para dois objetos dentro da área do SPI (registradores de

entrada e saída). O sétimo domínio (Level 6) está distribuído dentro da área ocupada pelo

filtro adaptativo LMS com 633 objetos, dentre os diferentes domínios é onde se encontra

a maior quantidade de objetos conectados.

Figura 6.10: Estrutura da distribuição da árvore de relógio.



106

6.1.3 Resultados da Síntese Física

A síntese física do chip com a biblioteca de células padrão SAED 90 nm (GOLD-

MAN et al., 2009) foi realizada, sem a necessidade de adicionar na sua implementação,

blocos de propriedade intelectual ou de terceiros, processadores ou algum tipo de soft-

ware embarcado. Esta versão implementada no ASIC foi capaz de processar os dados dos

sensores com um relógio mínimo de 4 kHz (permitindo o recurso de baixo consumo de

energia) para detectar vários tipos de falhas mecânicas no estudo de caso.

Como as operações do sistema ocorrem em tempo real, todos os cálculos de pro-

cessamento digital são processados durante o tempo de um período de amostragem na

aquisição dos dados dos sensores. A amostragem do sinal dos sensores processada foi de

256 Hz (onde, a frequência mínima de 4 kHz é de 256 Hz × 16 bits da comunicação

serial síncrona), o suficiente para satisfazer a frequência de nyquist na amostragem dos

sinais, considerando a faixa de frequência de interesse para o atuador elétrico da Coester.

A eficácia do hardware proposto pode ser comprovada a partir dos resultados do

processo de síntese e análise de temporização estática do projeto. Os resultados apre-

sentados abaixo foram obtidos considerando um período de relógio de 250 µs, restrições

de relógio com 10% de margem (25 µs setup e hold) e 10% margem para atrasos de

entrada/saída, e pós-síntese nas condições típicas de operação com tensão de alimentação

de 1,20 V e 25 ?C de temperatura. Considerou-se também, o pior e o melhor caso das

condições de operação, com tensão de alimentação de 0,70 V e 1,32 V , e temperatura de

125 ?C e -40 ?C, respectivamente.

A Tabela 6.1 mostra de forma resumida resultados de análise estática de tempo, a

fim de se determinar os valores máximos de tempos de chegada, de subida e de descida e

os valores mínimos de tempos requeridos de subida e de descida do circuito.

Tabela 6.1: Análise de tempo do chip proposto.

Parâmetro Tempo (ps)

Tempo requerido dos dados 235000,00

Tempo dos dados de chegada 125000,56

Slack 109999,44

O termo slack da Tabela 6.1, com quantidade folgada de tempo 0,11 µs, é definido

como a diferença entre o tempo em que um sinal é necessário em um caminho mais crítico

do circuito (tempo requerido) e o tempo em que o sinal chega de fato neste ponto (tempo



107

de chegada), considerando o período do relógio.

A Tabela 6.2 mostra a área mínima do sistema proposto (144493,67 µm2). O

atraso de propagação máximo do caminho crítico é resultante do bloco SPI (5,95 ns).

Assim, a frequência máxima de operação do circuito é de 168,07 MHz.

Tabela 6.2: Área do chip implementado em 90 nm.

Parâmetro Área (µm2)

Área de lógica combinacional 107112,96

Área não combinacional 23977,26

Área de interconexões 13403,44

Área total da célula 131090,22

Área total 144493,67

A divisão da área total ocupada em termos de cada bloco foi de 12,9% para a

DWT, 0,8% para o TPG, 7,0% para a EWMA, 76,6% para o FILTRO LMS, 0,9% para o

FDI, 1,3% para o SPI e 0,5% para as portas de interface (tristate, mux e latch).

Devido à baixa frequência de relógio e à implementação de clock gating, foi obtido

baixo consumo de energia dinâmica. Portanto, pode-se notar na Tabela 6.3, a influência

da corrente de fuga no gasto de energia deste projeto.

Tabela 6.3: Dissipação de energia do chip implementado em 90 nm.

Potência

estática (µW )

Potência

dinâmica (nW )

Potência

total (µW )

654,37 26,61 654,39

A divisão do consumo total em termos de cada bloco foi de 12,5% para a DWT,

0,8% para o TPG, 5,8% para a EWMA, 77,6% para o FILTRO LMS, 1,0% para o FDI,

1,6% para o SPI e 0,7% para as portas de interface (tristate, mux e latch).

6.2 Desenvolvimento do Chip na Biblioteca Comercial de 0,6 µm

Nesta etapa de desenvolvimento do trabalho havia a possibilidade de submeter

este trabalho ao Projeto Multiusuário Brasileiro (PMUB) no Centro de Excelência em

Tecnologia Eletrônica Avançada (CEITEC) (CEITEC, 2018). Por isso, as sínteses do

circuito também foram realizadas nas ferramentas da Cadence denominadas de RC (En-



108

counter RTL Compiler) e EDI (Encounter Digital Implementation) considerando a biblio-

teca XC06 da empresa X-FAB (X-FAB, 2018) para fabricação de um ASIC na tecnologia

CMOS de 0,6 µm.

6.2.1 Síntese Lógica do Chip

A síntese lógica foi realizada na ferramenta RC, onde a descrição do sistema com-

pleto em um nível de abstração usando uma linguagem de descrição de hardware (HDL -

Hardware Description Language), com informações do comportamento do circuito inte-

grado e a montagem do leiaute RTL foi transformada em um arquivo de baixo nível imple-

mentado em termos de interligações entre portas lógicas (Gate-Level Netlist), correspon-

dentes às disponíveis na biblioteca XC06, processo intermediado pela empresa CEITEC

S.A. (CEITEC, 2018).

Para iniciar o fluxo do RC na biblioteca comercial XC06, além da implementação

em RTL, os seguintes arquivos foram necessários:

• Bibliotecas no formato Liberty Timing Files: Contendo informações de temporiza-

ção, de dissipação de energia interna e estática das células. Arquivos fontes D_-

CELLS_typ_3_3V_25C.lib e IO_ CELLS_F_typ_3_3V_25C.lib.

• Bibliotecas no formato Library Exchange Format: Contendo informações físicas

das camadas de metal presentes (dimensões e vias utilizadas para interligação entre

camadas) e o formato de cada célula (pinagem e sua distribuição nas camadas de

metal). Arquivos fontes xc06_m3_FE.lef, D_CELLS.lef e IO_CELLS_F.lef.

Toda a elaboração da síntese lógica do projeto foi executada através de funções,

scripts e macros escritos na linguagem de comandos de uma ferramenta (TCL - Tool

Command Language).

Dessa forma, também foram gerados arquivos de restrições de projeto referentes à

bilioteca da tecnologia adotada para o próximo passo no fluxo de projeto que corresponde

à síntese física do circuito. O comando report gates foi utilizado para extração do relatório

da Tabela 6.4.



109

Tabela 6.4: Circuitos digitais utilizados na síntese lógica.

Circuitos digitais Instâncias Área (µm2)

lógico 5817 3216095,52

sequencial 655 790817,28

inversor 1155 140870,40

buffer 48 8743,68

tristate 1 303,60

clock gating 4 2914,56

Total 7680 4159745,04

6.2.2 Síntese Física do Chip

A ferramenta EDI foi utilizada com os arquivos de projeto Gate-Level Netlist e

de restrições da Synopsys (SDC - Synopsys Design Constraints) gerados na ferramenta

RC da síntese anterior. Deste modo, foram seguidas todas as etapas do fluxo de projeto

para elaboração do leiaute funcional com base nas informações da bilioteca XC06: posi-

cionamento dos blocos, definição dos pinos de alimentação, criação do anel e linhas de

alimentação, roteamento dos sinais de alimentação, colocação das células padrão de cada

bloco, roteamento entre todas as células e verificação das regras do projeto.

6.2.3 Resultados da Síntese Física

O processo de síntese física da Figura 6.11, otimizado para atender às especifica-

ções exigidas, consiste em 3 camadas de metais para o roteamento. As barras de alimenta-

ção verticais foram adicionadas na camada de metal 1 e conectadas ao anel de alimentação

na camada de metal 2; Ao redor do circuito, os anéis de alimentação foram posicionados

nas camadas de metal 2 e 3 para trilhas horizontais e verticais, respectivamente; Para evi-

tar erros na verificação de regras de projeto (DRC - Design Rule Checking), o roteamento

de sinal e da árvore de relógio ocorreu entre as camadas de metal 1, 2 e 3.

Como principais resultados da síntese física do chip, podem ser destacados a área

total de células de 4153612,32 µm2, o consumo de energia estimado de 43,61596 µW

para um relógio de 20 kHz e o tempo para estabilizar o sinal no caminho combinacional

mais longo (caminho crítico do bloco SPI) de 25 ms (25002287 ps). Como o período



110

do sinal de relógio é de 50 µs e 10% de margem para atraso externo de 5 µs, tem-se

uma margem de 19,99 µs, denominada de slack. Deste modo, a frequência máxima de

operação do circuito é de 39,99 MHz.

Figura 6.11: Síntese física do chip de predição de falhas em 0,6 µm.

A dissipação de energia do chip é mostrada na Tabela 6.5, onde o maior consumo

de energia é da lógica combinacional. Isso deve ao fato que o maior número de instâncias

e área ocupada pertencem aos circuitos lógicos, ver Tabela 6.4.

Tabela 6.5: Dissipação de energia do chip implementado em 0,6 µm.

Potência

estática (µW )

Potência

dinâmica (µW )

Potência

total (µW )

40,31 3,31 43,62

A diferença dos resultados de síntese entre as bibliotecas de 90 nm da Tabela 6.3 e

0,6 µm da Tabela 6.5, deve-se à diferença de tensão de alimentação (1,2 V e 3,30 V , res-

pectivamente), de relógio (4 kHz e 20 kHz, respectivamente), de área (144493,67 µm2

e 4159745,04 µm2, respectivamente) e da quantidade de portas lógicas ou blocos especí-

ficos implementados da biblioteca utilizada.



111

6.3 Desenvolvimento do sistema com Microcontrolador e FPGA

O objetivo da prototipação em FPGA é obter um hardware funcional que possa ser

validado em trabalhos futuros utilizando a bancada existente, e que possa também facilitar

a sua implementação em outras aplicações.

A arquitetura do projeto proposta para aplicações distribuídas da seção 5.5 são

possíveis através da união entre dois módulos. O primeiro trata dos algoritmos FDS e FDI

com interface de comunicação SPI embarcados em FPGA, onde os cálculos para detecção

e predição de falhas são realizados em tempo real, o segundo, sobre o microcontrolador

que serve de interface de funcionamento e comunicação. A prototipação do projeto com

os módulos de FPGA (Escravo no protocolo de comunicação SPI) e microcontrolador

(Mestre) são mostrados na Figura 6.12.

Figura 6.12: Conexão do sistema com FPGA e microcontrolador.

A comunicação entre os dispositivos foi realizada com o protocolo SPI, utilizando

os pinos de entrada e saída do microcontrolador (mestre) e do FPGA (escravo). O co-

mando SPI.transfer16 da biblioteca do microcontrolador foi utilizado para enviar e re-

ceber dados de dois bytes entre os dispositivos. A seguir, é listado o código da função

setupFPGA, utilizado para configurar a plataforma.

1 v o i d setupFPGA ( ) {

pinMode ( CS , OUTPUT ) ; / / c o n f i g u r a o p i n o s e l e t o r como s a í d a

3 d i g i t a l W r i t e ( CS , LOW) ; / / c o l o c a o p i n o do e s c r a v o em n í v e l b a i x o

S P I . b e g i n ( ) ; / / i n g r e s s a a o b a r r a m e n t o S P I

5 S P I . s e t D a t a M o d e ( SPI_MODE0 ) ; / / d e f i n e o modo d e c o m u n i c a ç a? o

S P I . s e t C l o c k D i v i d e r ( SPI_CLOCK_DIV2 ) ; / / d i v i s o r do c l o c k p r i n c i p a l

7 S P I . s e t F r e q u e n c y ( 4 0 0 0 ) ; / / A j u s t a f r e q u ê n c i a ( 4 kHz )

S P I . s e t B i t O r d e r ( MSBFIRST ) ; / / B i t m a i s s i g n i f i c a t i v o p r i m e i r o

9 }



112

A conexão e função de cada pino entre os dispositivos da Figura 6.12 são mostra-

das na seguinte Tabela 6.6.

Tabela 6.6: Conexão entre os módulos de FPGA e microcontrolador.

NodeMCU

µC

Mestre

? Placas ?

EP2C5

FPGA

Escravo

Descrição Pino Nome Conexão Pino Nome

Massa (terra) G GND ? terra ? 2 GND

Autoteste funcional do chip - - Botão do FPGA 144 TST

Status - - LED-0 do FPGA 3 STS

Reiniciar chip 2 D4 Mestre ? Escravo 44 RST

Relógio de sincronização 14 D5 Mestre ? Escravo 43 SCK

Dados do Escravo para Mestre 12 D6 Escravo ? Mestre 42 SDO

Dados do Mestre para Escravo 13 D7 Mestre ? Escravo 41 SDI

Seleção do Escravo 15 D8 Mestre ? Escravo 40 CSN

O modelo de FPGA da empresa Altera do kit de desenvolvimento EP2C5 mini-

board é o EP2C5T144C8, que é um dispositivo de baixo custo comercial e possui poucos

recursos dentro da família Cyclone II, com apenas 4.608 unidades lógicas internas, mas o

suficiente para este projeto. A placa NodeMCU é uma plataforma de baixo custo para a

Internet das coisas, de código aberto, possui um microcontrolador ESP8266 de arquitetura

com um conjunto reduzido de instruções (RISC - Reduced Instruction Set Computer) de

32 bits, suporte integrado à rede WiFiTMe serviços de comunicação serial SPI.

6.3.1 Implementação dos algoritmos em FPGA

O projeto do chip em hardware, com sistema FDI, FDS e uma interface de co-

municação SPI, foi implementado e sintetizado na ferramenta Altera Quartus II v9.1. A

frequência máxima de operação obtida fmax foi de 52,59 MHz (periodo de 19,014 ns),

e os resultados de ocupação no dispositivo considerado são apresentados na Tabela 6.7.

O resultado nulo para blocos de memória utilizados e o baixo número de elementos

lógicos, revelam que o sistema é adequado para uma implementação eficiente (do ponto

de vista de ocupação de área) em ASIC. Isso porque em um projeto com biblioteca de

células padrão para ASIC, os circuitos digitais são elaborados com base em portas lógicas



113

elementares, sendo assim, as memórias sintetizadas consomem muito mais espaço na

pastilha que os demais circuitos. Portanto, este projeto sintetizado em FPGA pode ser

convertido e validado também em um leiaute de ASIC.

Tabela 6.7: Ocupação do chip no dispositivo EP2C5T144C8.

Utilizados Disponíveis Ocupação

Total de elementos lógicos 894 4608 19 %

Total de funções combinacionais 775 4608 17 %

Total de registradores lógicos 407 4608 9 %

Total de pinos 9 89 10 %

Total de memória (bits) 0 119808 0 %

Multiplicadores embarcados 24 26 92 %

PLLs 0 2 0 %

6.3.2 Testes Simulados com FPGA

Os testes foram realizados em kits de baixo custo comerciais EP2C5 mini-board e

NodeMCU no valor de U$ 17 e U$ 8, respectivamente, totalizando U$ 25 dólares (SER-

VICES, 2018). O NodeMCU consegue se comunicar com o PC enviando e recebendo

dados através do barramento serial universal (USB - Universal Serial Bus). Através de

um monitor serial no ambiente de desenvolvimento integrado (IDE - Integrated Develop-

ment Environment) do dispositivo para o PC, alguns valores foram trocados a fim de testar

o sistema.

6.4 Experimentos com a Bancada de Teste

As técnicas de manutenção inteligente, para que sejam validadas em diversas situ-

ações ocorridas quando em operação de um sistema em ambiente de produção industrial,

precisam de ensaios com possíveis comportamentos do equipamento sejam estes de ope-

ração normal, degradação ou falha.

Desta forma, a bancada de testes do Laboratório de Controle, Automação e Robó-

tica (LASCAR), proposta por HENRIQUES et al. (2010), foi desenvolvida para a reali-

zação de ensaios de esforços, injeção de falhas e verificação do comportamento dinâmico

do atuador da empresa Coester Automação.



114

A Figura 6.13 mostra o conjunto de equipamentos instalados na bancada, proje-

tados para configurar comportamentos e situações similares aos defeitos mais comuns

encontrados em campo, onde o equipamento torna-se suscetível à ação da degradação tais

como: desgaste, corrosão, trincas e danos causados por operadores.

Figura 6.13: Atuador instrumentado na bancada de teste.

A bancada é composta por um atuador elétrico CSR6 da empresa Coester Automa-

ção, acelerômetros 8705A50M1 da empresa Kistler, posicionados em pontos específicos

do atuador, uma controlador CompactRIO NI cRIO-9004 com placa de aquisição de da-

dos da empresa National Instruments (ARCHITECTURES; PRACTICES, 2009), uma

válvula de ar comprimido MPT40 da empresa Parker e um disco de freio.

O equipamento CompactRIO foi utilizado em conjunto com o software LAB-

VIEW (SUMATHI; SUREKHA, 2007) para controle da abertura e fechamento da válvula

pelo atuador elétrico e aquisição de dados dos sensores de vibração e torque.

Os esforços mecânicos exercidos pelo atuador e a simulação do fluxo de fluidos

no interior da válvula durante os movimentos de abertura ou fechamento, são regulados

pela válvula de ar comprimido que, por sua vez, exerce pressão no sistema de freio a disco

acoplado ao eixo do atuador.



115

6.4.1 Descrição dos Testes

Um tipo de teste para injeção de falhas com a bancada, causando variações no

torque e vibração do conjunto atuador válvula, foi realizado com o uso do disco de freio.

O mesmo, ver Figura 6.14, encontra-se instalado junto ao rolamento onde está conectada

a haste da válvula, sendo acionado e regulado por meio de uma válvula proporcional

pneumática que controla o fluxo de ar comprimido vindo de um compressor.

Deste modo, é possível realizar uma simulação de possíveis esforços que a válvula

exerce ao ser acionada pelo atuador, situação essa enfrentada na presença de falhas e em

função da passagem dos fluídos na tubulação.

Figura 6.14: Injeção de falhas com freio a disco.

(a) Válvula pneumática. (b) Freio a disco.

Comparando as falhas injetadas utilizadas para simular os diversos tipos de esfor-

ços a que o conjunto se submete em campo, a variação brusca do torque pode indicar

um evento de falha como a quebra de uma peça, obstrução na passagem do corpo da vál-

vula (sede da válvula), por exemplo. Diferentes níveis de pressão no freio, podem indicar

também uma condição de degradação do sistema ao longo de sua utilização.

A simulação do atuador na bancada de teste com injeção de falhas, também foi

realizada através da substituição de engrenagens com níveis diferentes de degradação. As

engrenagens utilizadas no estudo de caso são ilustradas na Figura 6.15, uma engrenagem

em condição normal e outras duas apresentando falhas por desgastes e dentes fraturados.

Figura 6.15: Engrenagens usadas nos testes para injeção de falhas.

Engrenagem normal,

com dentes desgastados,

com dentes fraturados.



116

Engrenagens de redução, eixos articulados e rolamentos, tipicamente são os pri-

meiros componentes a sofrerem falhas, devido ao desgaste de uso e a cargas aplicadas

(BEGG; BYINGTON; MAYNARD, 2000; ZAKRAJSEK; LEWICKI, 1998). Nesses ca-

sos, os estudos demonstram a existência de mudanças no padrão de vibração do equipa-

mento em decorrência da degradação dos dentes das engrenagens. A degradação começa

com desgaste e uma fissura no dente da engrenagem, apresentando um pequeno entalhe

na área do filete de um dente até evoluir em alguns segundos na sua ruptura, desde que

mantida uma determinada carga.

Dessa forma, o atuador na bancada de teste está instrumentado com sensores tanto

de torque (visando os ensaios com pressão no disco de freio) quanto de vibração (visando

a obtenção dos níveis de vibração da estrutura com diferentes engrenagens).

De acordo com os trabalhos anteriores (BÖESCH, 2011; FACCIN, 2011; PICCOLI

et al., 2012), o acelerômetro acoplado ao eixo do motor é o que apresenta melhores resul-

tados em termos de sinal de vibração para a detecção da degradação das engrenagens do

atuador. Com isso, as informações foram coletadas no sistema de aquisição de dados por

meio de um sensor de vibração e outro de torque distribuídos no equipamento conforme

mostra a Figura 6.16.

Figura 6.16: Localização dos sensores instalados no atuador elétrico.

(a) Sensor de torque no compartimento do motor do
atuador elétrico.

(b) Acelerômetro fixado na carcaça, próximo ao mo-
tor.

Para a realização dos testes do estudo de caso, a Tabela 6.8 mostra as operações

efetuadas, que simulam os ciclos de abertura e fechamento da válvula sob condições

normais e de falha.



117

Tabela 6.8: Ciclos realizados de testes experimentais.

Condição Descrição

Normal Ciclo normal a vazio e sem esforço externo sobre o sistema

Falha tipo 1 Ciclo com pressão no freio equivalente a 100 kPa

Falha tipo 2 Ciclo com pressão no freio equivalente a 300 kPa

Falha tipo 3 Ciclo executado usando duas engrenagens desgastadas

Falha tipo 4 Ciclo executado utilizando uma engrenagem com três dentes fraturados

Falha tipo 5 Ciclo executado com engrenagens boas, mas sem lubrificação

O ciclo normal de acionamento do atuador elétrico, consiste em um movimento

completo de abertura e fechamento do obturador da válvula, isso sem interrupção e sem

esforço adicional. O ciclo com pressão no freio equivale à força exercida do obturador

com a passagem do fluido, obstruções, sedimentos na base, entre outros. O ciclo execu-

tado com substituição de engrenagens simula a degradação ocorrida no acoplamento da

caixa de redução do atuador e nos rolamentos. Já a falta de lubrificação das engrenagens,

simula demais defeitos apresentados pela ausência de manutenção na válvula.

6.4.2 Espectro de Frequência dos Sinais de Teste

Considerando os fundamentos teóricos de DSP, mais especificamente a transfor-

mada discreta de Fourier das amostradas dos sinais de operação normal e com falhas

realizados experimentalmente, podem-se elaborar os gráficos de operação da válvula em

condições normais: na Figura 6.17 com sensor de vibração; e na Figura 6.18 com sensor

de torque.

Figura 6.17: Espectro de frequência do acelerômetro em condições normais.

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

1 000

200

400

600

800

1 200

1 400

1 600

Frequência Angular Normalizada

M
a
g
n
it

u
d

e

Influência
redução de
saída em 

42 rpm

Rotação
do motor
3600 rpm

Sinais
de ruído

Zoom na 
magnitude 120

0-800 -600 -400 -200 200 400 600 800
0

100

20

40

60

80

120

O modelo CSR6 do atuador da Coester tem rotação de saída no redutor de 42 rpm

e rotação do motor de 3600 rpm (seção 4.3.1), frequência angular de 377 rad/s e 4,4



118

rad/s, respectivamente. Pode-se notar, que em condições normais, a presença de ruídos

são mais intensos com os sinais de vibração (Figura 6.17) do que com os sinais de torque

(Figura 6.18). Em ambas leituras, a influência das harmônicas da caixa de redução tem

picos elevados.

Figura 6.18: Espectro de frequência do sensor de torque em condições normais.

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

200

400

100

300

Frequência Angular Normalizada

M
a
g
n
it

u
d

e

Influência
redução de
saída em 

42 rpm

Rotação
do motor
3600 rpm

Sinais
de ruído

Zoom na 
magnitude 120

0-800 -600 -400 -200 200 400 600 800
0

100

20

40

60

80

120

Os gráficos de operação da válvula com injeção de falhas e leitura do sensor de

torque é apresentado na Figura 6.19 por pressão no disco de freio de 100 kPa, e na

Figura 6.20 com pressão de 300 kPa.

Figura 6.19: Espectro de frequência do sensor de torque com pressão de 100 kPa.

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

200

400

600

100

300

500

700

Frequência Angular Normalizada

M
a
g
n
it

u
d

e

Zoom na 
magnitude 120

0-800 -600 -400 -200 200 400 600 800
0

100

20

40

60

80

120

Pode-se notar em geral, que os sinais de ruído permanecem com mesma magni-

tude, porém nas frequências menores que 400 rad/s da Figura 6.20 aumentam em relação

à Figura 6.19.

Figura 6.20: Espectro de frequência do sensor de torque com pressão de 300 kPa.

Frequência Angular Normalizada

M
a
g
n

it
u

d
e

Zoom na 
magnitude 120

0

100

20

40

60

80

120

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

1 000

200

400

600

800

1 200

0-800 -600 -400 -200 200 400 600 800

Os gráficos de operação da válvula com injeção de falhas e leitura do sensor de



119

vibração, é apresentado na Figura 6.21 por engrenagem com dente desgastado, na Fi-

gura 6.22 por engrenagem com dente fraturado, e na Figura 6.23 por engrenagens sem

lubrificação.

Figura 6.21: Espectro de frequência do acelerômetro para engrenagens desgastadas.

Frequência Angular Normalizada

M
a
g
n
it

u
d

e

Zoom na
magnitude 120

0

100

20

40

60

80

120

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

1 000

200

400

600

800

1 200

1 400

1 600

0-800 -600 -400 -200 200 400 600 800

Figura 6.22: Espectro de frequência do acelerômetro para engrenagens com dentes fratu-

rados.

Frequência Angular Normalizada

M
a
g
n

it
u

d
e

Zoom na 
magnitude 120

0

100

20

40

60

80

120

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

1 000

200

400

600

800

1 200

1 400

0-800 -600 -400 -200 200 400 600 800

Figura 6.23: Espectro de frequência do acelerômetro para engrenagens sem lubrificação.

Frequência Angular Normalizada

M
a
g
n

it
u

d
e

Zoom na 
magnitude 120

0

100

20

40

60

80

120

0-4 000 -2 000 2 000 4 000-5 000 -3 000 -1 000 1 000 3 000 5 000

0

1 000

200

400

600

800

1 200

1 400

0-800 -600 -400 -200 200 400 600 800

Salvo as medidas realizadas pelo sensor de torque, os gráficos demonstram que

pela análise espectral de frequência deste estudo de caso, não se consegue extrair muita

informação. Nas leituras de vibração, dificilmente um especialista, seja humano ou por

inteligência artificial, sem um bom treinamento conseguirá tomar decisões baseadas nes-

tes resultados, a não ser que utilize outras técnicas tais como FDS e FDI validadas na

próxima seção 6.5. Essa dificuldade é apontada por inúmeros artigos recentes, seja no

transporte, na aeronáutica e na geração de energia, que o problema mais comum encon-

trado em diversas aplicações reais é a sua baixa relação sinal e ruído encontrada entre

interferências não-estacionárias e não-lineares.



120

6.5 Simulações do Chip Pós-síntese Física

O propósito principal da simulação pós-síntese física é a de verificar com maior

exatidão, o desempenho da implementação do ASIC da seção 6.1.3, e se o projeto está

dentro das especificações pretendidas.

Foi desenvolvido no computador uma aplicação em linguagem bash script para

que todo o processo de teste do ASIC, desde a configuração até o armazenamento e exibi-

ção dos resultados em forma de gráfico, pudesse ser automatizado. A Figura 6.24 mostra

sua interface, onde o usuário pode selecionar o tipo de teste, configurar o modo de opera-

ção do chip (aproximação ou detalhe), o ganho do sensor e o coeficiente de adaptação.

Figura 6.24: Interface bash script para configurar e executar macros.

Uma vez instalado um sensor com o sistema de predição de falhas no equipamento,

o usuário pode realizar os ajustes de parâmetros relevantes para o processo (tensão de re-

ferência para o sensor e o valor do parâmetro de adaptação do filtro do FDS), ver seção

5.6.2. Os valores padrões recomendados já vêm predefinidos no chip, no entanto, o usuá-

rio pode modificá-los para melhorar a detecção de falhas, ou seja, realizar o treinamento

do sistema para o estudo de caso ou processo em particular.

Em seguida, nos primeiros segundos de operação, deve ser selecionado o tipo de

teste a ser realizado. Nos experimentos com a bancada (Tabela 6.8), foram aplicados ao

sistema um ciclo normal com abertura e fechamento da válvula e em sequência, os ciclos



121

de falha específica. O sinal capturado foi armazenado e quantificado no formato Q de 16

bits para ser testado no leiaute físico da arquitetura FDS e FDI do chip.

Para regular a abrangência na detecção de possíveis falhas, conforme mostrado na

seção 5.6.2, foi definido o modo de operação do chip (aproximação ou detalhe) e ajustado

o valor do parâmetro de adaptação do filtro adaptativo LMS. Deste modo, a detecção e

predição de falha pôde ser produzida na primeira fase com o bloco FDS e, na segunda

fase, o diagnóstico com FDI pôde ser realizado em forma de histograma.

A Figura 6.25 mostra o fluxograma utilizado com os dados experimentais da ban-

cada de teste da seção 6.4.1, representando as etapas de interação entre o usuário e o

sistema a ser testado.

Figura 6.25: Interação entre o usuário e o sistema para os testes.

Na interface bash script, são selecionados os dados obtidos na banca de teste e

criado um arquivo teste.hex e outro arquivo modo.txt com demais configurações a serem

utilizadas. Feito isso, uma caixa de simulação em linha de comando inicia automati-

camente a compilação de uma macro chip.do na aplicação vsim ("vsim -c -do

chip.do"). Então um algoritmo testebench em Verilog, responsável por simular um SPI

mestre, por configurar o chip, por enviar os valores dos sensores do equipamento sob teste

e por capturar o resultado da saída do circuito, gera um arquivo de saída fdi.hex com a

simulação do ASIC deste trabalho.



122

Próximo passo, o comando "scilab -nw -f chip.sci" com uma macro

chip.sci é executado automaticamente no bash script, baseado nos arquivos carrega-

dos (teste.hex, fds.hex e fdi.hex), gera gráficos com informações do sinal do sensor, do

FDS e do FDI com um histograma do teste realizado.

Deste modo, a ferramenta Scilab (NAGAR, 2017) é utilizada com o objetivo

apenas de elucidar a interpretação dos resultados dos testes em forma de gráficos, onde

são carregados os dados brutos obtidos com as informações produzidas pelo sistema na

ferramenta vsim (MENTOR GRAPHICS CORPORATION, 2008) ou VCS com Cos-

mosScope da Synopsys (BHATNAGAR, 2002).

Finalmente, de posse dos resultados no formato de um histograma, o usuário pode

visualizar o estado de funcionamento do sistema com o índice de saúde do equipamento

monitorado. Este procedimento foi utilizado em todos os testes das próximas subseções.

O mesmo método também foi descrito em artigos e relatórios anteriores, até a primeira

fase com FDS (PICCOLI et al., 2015a) e até a segunda com FDI (PICCOLI et al., 2015b).

6.5.1 Simulação com Falha por Pressão no Freio de 100 kPa

Nessa simulação, foram usados dados do sensor de torque armazenados no com-

putador do experimento, realizado na bancada de teste com pressão no freio equivalente

a 100 kPa. A aplicação em linguagem bash script descrita anteriormente, utilizou o al-

goritmo testebench juntamente com os dados do sinal de torque, para simular o hardware

pós sintese via interface SPI do leiaute físico do chip.

A Figura 6.27(a) mostra o gráfico gerado pela ferramenta vsim, onde o primeiro

sinal representa o status (pino STS), o segundo sinal o valor do sensor recebido pela serial

(pino SDI), o terceiro sinal mostra a saída do bloco FDI do chip pela serial (pino SDO) e

o quarto sinal a resposta do bloco FDS do circuito representando ou não a falha detectada.

Pode-se notar que o sensor posicionado para medir o torque, apresenta um rápido

e elevado aumento de amplitude, causado principalmente pelo arranque do motor. Porém,

isso não reflete necessariamente uma falha (falso positivo) para o algoritmo FDS. Ao

passo que, quando o motor entra em regime permanente sob pressão constante no freio de

100 kPa, a falha é sinalizada corretamente pelo valor de erro de saída do FDS, tanto no

processo de abertura, quanto no de fechamento da válvula. O sinal de status foi ativado

algumas vezes seguidas durante o teste de injeção de falhas.



123

Figura 6.26: Experimento de falha com 100 kPa no disco de freio sobre a válvula.

SDI

SDO

FDS

STS

SDI

SDO

FDS

STS

SDI

SDO

FDS

STS

Ciclo normal Ciclo de teste (pressão de 100kPa no freio)

status intermitente

(a) Sinais nos pinos do ASIC no Vsim.

Tempo (s)

Ciclo normal Ciclo de teste (pressão de 100kPa no freio)

0 25 50 75

F
D

I
(D

e
c

im
a
l)

Abertura Fechamento Abertura Fechamento

T
e

n
s
ã

o
(V

)

0,50

0,45

0,40

0,35

0,30

0,25

0,20

0,15

0,10

0,05

0

256

192

128

64

0

(b) Sinal de torque de entrada e sinal FDI no Scilab. (c) Histograma do sinal do FDI no Scilab.

Conforme a Figura 6.27(b), o erro foi sinalizado para este tipo de falha. O his-

tograma gerado na Figura 6.27(c), demostra que a detecção ficou um pouco distribuída

devido à repentina elevação do valor de pressão. Nesta simulação, a energia foi extraída

dos coeficientes de aproximação utilizados da DWT, com valor de ganho do sinal de en-

trada igual a 1,1 e o coeficiente de adaptação do filtro LMS igual a 0,12 ( 00FF
211

), totalizando

435 detecções de 1563 leituras do FDI.

6.5.2 Simulação com Falha por Pressão no Freio de 300 kPa

O mesmo procedimento da simulação anterior foi repetido, porém com pressão

aplicada no freio equivalente a 300 kPa.

A Figura 6.28(a) mostra o gráfico produzido no vsim, onde o primeiro sinal re-

presenta o status (pino STS), o segundo sinal o valor do sensor recebido pela serial (pino

SDI), o terceiro sinal mostra a saída do bloco FDI do chip pela serial (pino SDO) e o



124

quarto sinal a resposta do bloco FDS do circuito representando ou não a falha detectada.

Ao aplicar a pressão de 300 kPa e ativar o freio, o nível do sinal do sensor de

torque tornou-se ligeiramente elevado. Então o processo passou para um novo estado,

operando em uma situação mais exaustiva de falha. Na teoria, o valor do sensor deveria

ser estacionário, mas a medição no ambiente real mostra que existe a presença do ruído,

o que não impede o FDS de trabalhar adequadamente. O sinal de status sempre ficou

ativado durante a injeção de falhas do teste realizado.

Figura 6.27: Experimento de falha com 300 kPa no disco de freio sobre a válvula.

SDI

SDO

FDS

STS

SDI

SDO

FDS

STS

SDI

SDO

FDS

STS

SDI

SD?

FDS

STS

Ciclo normal Ciclo de teste (pressão de 300 kPa no freio)

status ativo

(a) Sinais nos pinos do ASIC no Vsim.

Ciclo normal Ciclo de teste (pressão de 300kPa no freio)

0 25 50 75

F
?
?

(?

e
c

im
a

l)

Abertura Fechamento Abertura Fechamento

256

192

128

64

0

0,7

0,6

0,5

0,4

0,3

0,2

0,1

0

0,9

0,8

1,0

T

e
n

s
ã

o
(V

)

Te??? (s)

(b) Sinal de torque de entrada e sinal FDI no Scilab. (c) Histograma do sinal do FDI no Scilab.

Conforme a Figura 6.28(b), o erro foi sinalizado para este tipo de falha. As barras

do histograma gerado na Figura 6.28(c), demostram que a detecção ficou concentrada à

direita devido à pressão mais acentuada no disco de freio, com o triplo do valor utilizado

em relação ao teste anterior. Nesta simulação, a energia foi extraída dos coeficientes de

aproximação utilizados da DWT, com valor de ganho do sinal de entrada igual a 1,1 e o

coeficiente de adaptação do filtro LMS igual a 0,12, totalizando 744 detecções (pratica-

mente o dobro da simulação anterior) de 1563 leituras do FDI.



125

6.5.3 Simulação com Falha por Engrenagem de Dente Desgastado

Nessa simulação, foram usados dados do sensor de vibração, armazenados no

computador do experimento realizado na bancada de teste com uma engrenagem boa da

caixa de transmissão do atuador, substituída por outra com dentes severamente desgasta-

dos. A aplicação em linguagem bash script utilizou o algoritmo testebench juntamente

com dados do sensor de vibração, para simular o hardware pós sintese via interface SPI

do leiaute físico do chip.

A Figura 6.29(a) mostra o gráfico gerado pela ferramenta vsim, onde o primeiro

sinal representa o status (pino STS), o segundo sinal o valor do sensor recebido pela serial

(pino SDI), o terceiro sinal mostra a saída do bloco FDI do chip pela serial (pino SDO) e

o último sinal a resposta do bloco FDS do circuito representando ou não a falha detectada.

Figura 6.28: Experimento de falha com engrenagem de dente desgastado.

SDI

SDO

FD?

STS

?DI

?DO

FDS

STS

Ciclo normal Ciclo de teste (dentes desgastados)

status intermitente

(a) Sinais nos pinos do ASIC no Vsim.

256

192

128

64

0

F
D

I
(D

e
c

im
a
l)

T
e

n
s
ã

o
(V

)

(b) Sinal de vibração de entrada e sinal FDI no Scilab. (c) Histograma do sinal do FDI no Scilab.



126

Conforme a característica do sinal de erro apresentado pelo sistema FDS, também

pode-se detectar antecipadamente qual o tipo de falha que está ocorrendo. No gráfico da

Figura 6.29(a), por exemplo, ao longo do tempo verifica-se a presença de variações no

sinal de detecção de falhas no FDS, o que pode caracterizar um folga no acionamento das

engrenagens devido ao seu desgaste. O sinal de status foi ativado duas vezes durante o

teste de injeção de falhas.

Os resultados da Figura 6.29(b), demonstram que o erro foi sinalizado para este

tipo de falha. As barras do histograma gerado na Figura 6.29(c), demostram que a de-

tecção ficou mais distribuída devido ao desgaste homogêneo nos dentes da engrenagem.

Nesta simulação, a energia foi extraída dos coeficientes de detalhe utilizados da DWT,

com valor de ganho do sinal de entrada igual a 1,1 e o coeficiente de adaptação do filtro

LMS igual a 0,12, totalizando 674 detecções de 1563 leituras do FDI.

6.5.4 Simulação com Falha por Engrenagem de Dente Fraturado

O mesmo procedimento da simulação anterior foi repetido, porém com dados do

experimento realizado na bancada de teste com uma engrenagem boa da caixa de trans-

missão do atuador, substituída por outra com dentes fraturados. O testebench, juntamente

com dados do sensor de vibração, foi utilizado para simular o hardware pós sintese via

interface SPI do leiaute físico do chip.

A Figura 6.30(a) mostra o gráfico produzido no vsim, onde o primeiro sinal re-

presenta o status (pino STS), o segundo sinal o valor do sensor recebido pela serial (pino

SDI), o terceiro sinal mostra a saída do bloco FDI do chip pela serial (pino SDO) e o

último sinal, a resposta do bloco FDS do circuito representando ou não a falha detectada.

Conforme a característica do sinal de erro apresentado pelo sistema FDS, também

pode-se detectar antecipadamente qual o tipo de falha que está ocorrendo, por exemplo

no gráfico da Figura 6.29(b) ao longo do tempo, ocorrem picos intercalados no sinal

do FDS, o que caracteriza a assinatura da falha correspondente aos dentes fraturados da

engrenagem. O sinal de status foi ativado três vezes durante o teste de injeção de falhas.



127

Figura 6.29: Experimento de falha com engrenagem de dente fraturado.

S??

S?O

F?S

STS

Ciclo norm?l Ciclo ?? teste (??d??? fratu???o??

statu? inte?mrtente

(a) Sinais nos pinos do ASIC no Vsim.

0,2

0,0

-0,2
-0,4
-0,6
-0,8
-1,0

1,0

0,8

0,6

0,4

Ciclo de teste (dentes frat	
a?os)Ciclo normal

25 50 75 Temp? (
?

T
e

n
s
ã
o

(V
)

F
D
I
(D

e
c
im

a
l)

256

192

128

64

0

(b) Sinal de vibração de entrada e sinal FDI no Scilab. (c) Histograma do sinal do FDI no Scilab.

O sistema sinalizou a detecção da falha injetada pela notação mais à esquerda

da distribuição das barras no histograma da Figura 6.30(c). A concentração do índice

de detecção mais à esquerda deve-se ao fato de que a falha é detectada apenas quando

os dentes danificados estão participando da transmissão do movimento, sendo assim um

evento mais esporádico. Nesta simulação, a energia foi extraída dos coeficientes de de-

talhe utilizados da DWT, com ganho do sinal de entrada igual a 1,1 e o coeficiente de

adaptação do filtro LMS igual a 0,12, totalizando 267 detecções de 1563 leituras do FDI.

6.5.5 Simulação com Falha por Engrenagens sem Lubrificação

Nessa simulação, foram usados dados do sensor de vibração armazenados no com-

putador do experimento, realizado na bancada de teste com as engrenagens da caixa de

transmissão do atuador trabalhadas a seco sem lubrificação. O algoritmo testebench junta-



128

mente com dados do sensor de vibração, foi utilizado para simular o hardware pós sintese

via interface SPI do leiaute físico do chip.

A Figura 6.31(a) mostra o gráfico gerado pela ferramenta vsim, onde o primeiro

sinal representa o status (pino STS), o segundo sinal o valor do sensor recebido pela serial

(pino SDI), o terceiro sinal mostra a saída do bloco FDI do chip pela serial (pino SDO) e o

último sinal, a resposta do bloco FDS do circuito representando ou não a falha detectada.

Conforme a Figura 6.31(b), o efeito do atrito nas engrenagens sem lubrificação

gerou mudanças sutis na vibração da máquina, mas o suficiente para o FDI identificar a

sua falha. O sinal de status oscilou rapidamente durante o teste de injeção de falhas.

Figura 6.30: Experimento de falha sem lubrificação nas engrenagens.

S??

S?O

F?S

STS

S??

S?O

F?S

STS

S??

S?O

F?S

STS

S??

S??

F?S

STS

Ciclo norm?l Cicl? ?? teste (sem l??	
ficação)

status intermitente

(a) Sinais nos pinos do ASIC no Vsim.

Ciclo normal Ciclo de teste (sem lubrifica?ão)

0 25 50 75

F
D
I
(D

e
c
im

a
l)

Abertura Fechamento Abertura Fechamento 256

192

128

64

0

Te?
? (s)

0,2

0,0

-0,2
-0,4
-0,6
-0,8
-1,0

1,0

0,8

0,6

0,4

T
e
n
s
ã
o

(V
)

(b) Sinal de vibração de entrada e sinal FDI no Scilab. (c) Histograma do sinal do FDI no Scilab.

Pode-se observar na Figura 6.31(c), que o erro foi sinalizado para este tipo de

falha. As barras do histograma gerado demostram que a detecção ficou distribuída mais

à direita devido ao efeito do atrito (maior vibração e força exigida) nas superfícies das

engrenagens. Nesta simulação, a energia foi extraída dos coeficientes de aproximação



129

utilizados da DWT, com valor de ganho do sinal de entrada igual a 1,1 e o coeficiente de

adaptação do filtro LMS igual a 0,12, totalizando 749 detecções de 1563 leituras do FDI.

6.5.6 Simulação de Autoteste Funcional

Nessa simulação, o autoteste (pino TST), descrito na seção 5.4.1, foi ativado. Com

isso, o algoritmo testebench passou a operar em função de um vetor aleatório gerado

internamente no circuito.

A Figura 6.32(a) mostra o gráfico gerado pela ferramenta vsim, onde o primeiro

sinal representa o status (pino STS), o segundo sinal mostra a saída do bloco FDI do chip

pela serial (pino SDO), o terceiro sinal mostra a resposta do bloco FDS do circuito repre-

sentando ou não a falha detectada, o quarto sinal mostra o valor do vetor pseudoaleatório

de teste na saída do bloco TPG do chip e o último sinal, o valor do bloco contador interno

do chip que registra o número de eventos combinados entre a semente e o vetor do LFSR.

Figura 6.31: Experimento de falha sem lubrificação nas engrenagens.

L?S?

S?O

F?S

CONT

STS statu? ati?ostatu? inter?itente

(a) Sinais nos pinos do ASIC no Vsim.

Teste com  etor ???	

0 25000 50000 75000

F
D
I
(D

e
c
im

a
l)

256

192

128

64

0

Re
ógio

V
a
lo

?
d
o

L
F
S

?

256

192

128

64

0

(b) Sinal TPG interno e sinal FDI no Scilab.

10 20 30 40 50 60 70 80 90 100

P


?
c e

n
ta

??

m

??
ín
??
c e

??
D

e
te

c

ç?

(%
)

His??????? ????????ado do F?I (%)

70

60

50

40

30

20

10

0

(c) Histograma do sinal do FDI no Scilab.



130

A Figura 6.32(b) mostra, na ferramenta gráfica Scilab, o sinal interno do TPG

até 65280 pulsos (255 × 256 igual aos estados do LFSR multiplicados pelo limite do

contador) e o histograma, que por sua vez, revela o padrão de comportamento do circuito

em modo autoteste. Durante o autoteste realizado, inicialmente o sinal de status ficou

desligado, logo que o mesmo começou a oscilar rapidamente, foi ativado até que fosse

cessada a geração de vetores pseudoaleatório do bloco TPG.

Então a geração de vetores de teste está embutida no circuito, enquanto que a

verificação da assinatura do autoteste é realizada pela observação da Figura 6.32(c) em

forma de um histograma. O controle do teste é realizado na interface do circuito e na

comunicação serial SPI pelo algoritmo testebench: pino CS para habilitar o circuito; pino

SCK para fornecer pulso de relógio; pino RST para reiniciar o teste. Com isso, pode-

-se desempenhar uma verificação funcional da mesma forma que em uma arquitetura de

autoteste integrado (BIST - Built-in Self-Test) genérica (BEZERRA; VARGAS; GOUGH,

2001), onde os módulos responsáveis pela geração de vetores de teste, comparação da

resposta (assinatura) e controle do fluxo de teste são incorporados em hardware. Ressalta-

-se que a estrutura desenvolvida tem como objetivo realizar apenas um teste funcional

(faltando um teste estrutural completo), obtendo assim a garantia de que os blocos internos

do chip estejam funcionando conforme suas especificações.

6.6 Discussão dos Resultados

Os resultados apresentados neste capítulo demonstram, no escopo de tolerância a

falhas, que a arquitetura proposta fornece uma boa percepção ao usuário dos problemas

ocorridos no sistema.

Conforme as simulaçoes realizadas, a evolução da falha no sistema, em decorrên-

cia do aumento do esforço envolvido na operação do atuador elétrico, pode ser facilmente

acompanhada pela análise do histograma da Figura 6.33(a). Assim, a distribuição das

barras desse gráfico localizada mais à esquerda, representa menos deterioração do equi-

pamento. Já a distribuição localizada mais à direita, demonstra uma deterioração mais

severa. Deste modo, com o deslocamento à direita do gráfico, a percepção do restante da

vida útil do equipamento é compreendida pelo aumento do torque exercido na transmissão

da haste para a gaveta da válvula e a força exercida pelo fluido.



131

Figura 6.32: Formas de diagnóstico extraído do histograma.

(a) Modo aproximação e sensor de torque.

(b) Modo detalhe e sensor de vibração.

O diagnóstico produzido no histograma da Figura 6.33(b), proveniente dos dados

de vibração do sistema, é um pouco mais complexo. A distribuição das barras desse

gráfico localizada mais a esquerda, representa falha nas engrenagens em decorrência de

dentes fraturados. A distribuição centrada das barras, representa falha nas engrenagens

em decorrência de dentes desgastados. Já a distribuição localizada mais à direita, uma

deterioração com as engrenagens sem lubrificação.

Em ambos os gráficos mencionados anteriormente, em algum momento o sinal de

status foi ativado durante os testes de injeção de falhas. Foi sinalizado de forma cons-

tante nos resultados mais à direita da distribuição das barras e de forma intermitente aos

resultados mais à esquerda da distribuição das barras.

Outro ponto ressaltado pela metodologia proposta neste trabalho é na redução do

consumo de energia pela utilização de circuitos integrados. Em uma empresa como a Pe-

trobras, com milhares de válvulas sejam elétricas ou não, pode-se estimar que com o uso

do FDS ocorreria uma vantagem significativa do ponto de vista do consumo de energia.



132

Para obter-se uma estimativa, levando em conta que as principais técnicas consideradas

são baseadas nas plataformas de ASIC, FPGA ou PCs, o consumo será calculado.

Supondo uma pequena área da Transpetro, que contenha aproximadamente 50 atu-

adores funcionando com uma média de 15 ciclos de abertura e fechamento por dia, a

energia (em Wh) consumida é estimada na Tabela 6.9. Considerando que cada ciclo de

abertura e fechamento da válvula demanda 2 minutos, isso representa um tempo de 750

horas mensais de consumo em funcionamento e 35.250 horas de consumo em espera.

Ao final de cada mês o consumo total para uma técnica utilizando ASIC seria

de 0,02 kWh, o consumo utilizando somente FPGA seria de 14,03 kWh e o consumo

utilizando computador PC seria de 8.850 kWh. Conforme dados atualizados em (EU-

ROSTAT, 2017) da energia elétrica na Europa, que podem ser obtidos pelo preço atual de

energia em U$/kWh, custa em média 0,220 U$/kWh. Então, para uma técnica, utilizando

ASIC, o consumo de energia mensal seria de U$ 5×10?3, utilizando somente FPGA seria

de U$ 3,09 e, com computador PC de U$ 1947.

Tabela 6.9: Comparativo de consumo aproximado de 50 válvulas para 15 ciclos diários.

Plataforma
Consumo para operar Consumo parado Total no mês

W Wh W Wh kWh U$

ASIC 8,67×10?8 6,5×10?5 6,45×10?4 22,74 0,02 5×10?3

FPGA 0,04 33,64 0,40 13.996,72 14,03 3,09

PC 50,00 37.500,00 250,00 8.812.500,00 8.850,00 1947

Considerando o período de 12 meses, para uma técnica utilizando ASIC, o con-

sumo de energia seria de U$ 60×10?3 e com computador PC um fator de 389214 maior,

ou seja, de U$ 23364,00. Em menos de um ano, só a economia do ponto de vista de con-

sumo de energia cobre os investimentos com a aquisição desses equipamentos para ma-

nutenção. Conforme visto na seção 6.3.2, o custo de cada sistema composto por FPGA

e microcontrolador com interface wireless, o investimento chegaria a U$ 1250,00 (U$

50,00?50 dispositivos). A mesma análise do ponto de vista de investimento na aquisição

de PCs por válvula, torna-se inviável.

Deste modo, na medida em que se extrapola o raciocínio para tempos maiores ou

mesmo uma quantidade maior de atuadores, como uma refinaria inteira, a economia de

energia e investimento podem ser bem consideráveis.



133

7 CONSIDERAÇÕES FINAIS

Este trabalho apresentou o desenvolvimento de uma metodologia para concepção

de um circuito integrado aplicado à manutenção inteligente, visando ao diagnóstico e pos-

sível prognóstico de falhas como auxílio à tomada de decisão. Para alcançar uma melhor

qualidade e produtividade do complexo de distribuição de petróleo e seus derivados, me-

lhorando sua confiabilidade e disponibilidade, a metodologia foi concebida e validada em

um equipamento crítico existente na operação da malha dutoviária de terminais. Trata-se

do conjunto atuador-válvula como estudo de caso.

Para validar o hardware proposto utilizou-se uma bancada instrumentada. Foram

realizados ensaios de esforços no atuador elétrico acoplado a um sistema de freio a disco

e engrenagens defeituosas para a injeção de falhas de modo a replicar condições mais

frequentes levantadas em campo. Em todos os experimentos, a falha injetada foi detectada

com o bloco FDS e o seu diagnóstico produzido através de diferentes assinaturas de falha

com o bloco FDI permitindo a construção de um histograma.

O sistema implementado opera em duas fases. Na primeira, através do FDS, é

realizada a detecção instantânea da falha, ou seja, a percepção de que algo está errado e

pode estar levando o processo a algum desvio mais significativo do seu funcionamento

normal. Neste ponto ainda não se sabe a localização ou o motivo que ocasionou a falha.

Nesta fase, os testes demonstraram que o modelo constituído pelo filtro adaptativo,

quando apresenta discrepâncias em comparação ao processo real, produz uma estimativa

igualmente deficitária, seja nas condições dinâmicas ou estacionárias, produzindo a de-

tecção correta das falhas. Isto pode ser concluído de acordo com os valores dos resíduos

ou erros muito próximos a zero em funcionamento normal do processo. No momento que

a falha ocorre, os resíduos refletem o comportamento esperado de falha nos testes.

A partir do sinal de saída do FDS, é possível monitorar variações dos parâmetros

do processo físico com falhas abruptas, incipientes e intermitentes, o que corresponde às

atividades de detecção e identificação. A etapa de diagnóstico, nessa fase, necessita de

interpretações pela representatividade visual dos sinais de saída em modo de falha.

A segunda fase, através do FDI, é a identificação da falha. O diagnóstico é simpli-

ficado através de conclusões diretas indicadas em um histograma, que permite verificar o

componente ou local físico dentro do sistema onde o problema detectado no passo anterior

se encontra. Neste momento pode-se classificar as falhas.

O sistema é responsável pelo processamento das quatro primeiras camadas do



134

modelo OSA-CBM, ou seja, captura de dados e processamento inteligente (que inclui

processamento de sinais, monitoração de condição e diagnóstico). Dessa forma, pode-se

acompanhar o desenvolvimento de uma falha, evitando que a mesma surpreenda e cause

danos mais expressivos. Considerando a quantificação das anormalidades detectadas e a

localização física destas no processo, de maneira direta, esta técnica também pode ser útil

para o prognóstico de falhas e da qualidade do processo.

A estrutura proposta composta pelo FDS e FDI é uma alternativa eficiente para se

detectar falhas ocorrendo em um sistema. Destaca-se ainda que a estrutura apresentada

possui a capacidade de aplicação em ambientes reais, considerando ruído. Como a solu-

ção proposta se baseia em um algoritmo de estimação do filtro para sinais estocásticos,

uma consequência natural e direta é a capacidade de seu funcionamento mesmo diante da

presença de ruídos de medição de processos.

O sistema pode ser implementado como um sequência de instruções executadas

por um microprocessador de propósito geral ou mesmo embarcado em FPGA. De acordo

com os resultados obtidos na implementação utilizando uma FPGA (seção 6.3) em con-

junto com um microcontrolador de uso geral como interface de comunicação, o projeto

apresenta-se viável também para a implementação em aplicações distribuídas (seção 5.5).

No entanto, objetivando circuitos de baixo consumo, com linguagem de hardware,

pode ser implementado em um circuito integrado personalizado para a produção de um

chip. Na elaboração de um leiaute físico foi abordado o escalonamento dinâmico de

frequência e clock gating. Considerando a frequência mais baixa de operação de 4 kHz

para a bilioteca educacional de 90 nm, os resultados demonstram após a síntese física a

dissipação estática e dinâmica de 654,37 µW e 26,61 nW , respectivamente. Limitando-

-se ao caminho crítico pela comunicação serial da interface SPI, a frequência máxima de

operação obtida foi de até 168 MHz. Com isso, pode-se dizer que o sistema apresenta

potencial para processar grandes quantidades de dados em tempo real e baixo consumo

de energia.

Finalmente, conforme abordado na seção 4.2.1, esse trabalho permite auxiliar na

solução de um problema de impacto econômico e extremamente relevante na operação

da movimentação de petróleo, que consiste em garantir a qualidade e continuidade do

bombeio de petróleo e derivados em dutos para o suprimento de terminais e refinarias.

Aliado a procedimentos tolerantes e redundantes, decisões podem ser tomadas em tempo

de execução (online) antes que a linha de produção pare ou mesmo misture os diferentes

subprodutos de petróleo utilizados.



135

7.1 CONTRIBUIÇÕES TÉCNICAS

O principal benefício e diferencial desse trabalho, comparado com outras abor-

dagens relacionadas com o estudo de caso no suprimento de petróleo (seção 4.3.2), é a

apresentação de uma solução nas primeiras camadas OSA-CBM totalmente embarcada

em hardware que possa obter uma otimização de consumo de energia e operar em tempo

real. As informações providas dessa solução também vêm enriquecer a forma como se

monitora a saúde dos equipamentos nos processos industriais, permitindo uma análise

facilitada do desempenho e das condições dos equipamentos para área da manutenção

inteligente.

Dentre as contribuições observadas, pode-se destacar:

• Um projeto ASIC de um sistema de diagnóstico e detecção de falhas em tempo real

aplicado a válvulas eletromecânicas;

• Descrição do circuito integrado em nível estrutural, sem utilizar outras descrições

de hardware, esquemáticos, blocos de propriedade intelectual ou de terceiros;

• Baixo consumo de energia em decorrência das otimizações de hardware;

• A simplificação do circuito através de operações de deslocamento aritmético e pro-

cessamento em ponto-fixo no formato Q;

• A degradação do equipamento pode ser monitorada pela frequência de detecção de

falha e sua severidade pelo índice que corresponde à gravidade do efeito da falha;

• O sistema pode ser integrado a futuros modelos de fábrica 4.0, por meio do proto-

colo de comunicação industrial sem fio WirelessHARTTM;

• A visualização de sintomas que indicam a formação de uma falha incipiente, tais

como a falta de lubrificação ou o simples desgaste de uma engrenagem;

• Simplificação do processo de diagnóstico, a partir de conclusões diretas indicadas

pela representatividade de um histograma em modo de falha;

• Validação da proposta através de experimentos como o estudo de caso, onde se

verifica a presença de ruídos de medição e de processo;

• A possibilidade de detectar a ocorrência de diferentes falhas, sejam abruptas, inci-

pientes ou intermitentes, mesmo que ocorram simultaneamente;

• A importância de realizar tarefas de detecção e diagnóstico de falhas em tempo real

de maneira online, viabilizando operações sob ótica da tolerância a falhas;

• A análise de desempenho com diversas ferramentas de síntese de um ASIC, que



136

de algum modo, satisfazem os requisitos requeridos de cada bloco da arquitetura

proposta;

• A necessidade de conhecer o equipamento, o tipo certo de sensor e o seu devido

posicionamento próximo a locais em que possam ocorrer as falhas.

7.2 TRABALHOS SUBMETIDOS OU PUBLICADOS

Foram publicados trabalhos completos em anais de eventos científicos, um artigo

submetido para análise, dois capítulos de livro e um registro de software.

Inicialmente é apresentado os trabalhos publicados em anais de eventos:

• Leonardo B. Piccoli, Eduardo L. Schneider, Renato V. Henriques, Carlos E. Pereira.

Desenvolvimento de um Sistema Embarcado para Predição e Detecção de Fa-

lhas em Válvula de Transmissão de Petróleo e Derivados. Em: Workshop em

Sistemas Embarcados para a Indústria de Óleo, Gás e Energia - WES2012. Rio

grande, RS, Brasil: [s.n.], 2012.

• Leonardo B. Piccoli, Eduardo L. Schneider, Renato V. Henriques, Carlos E. Pereira.

Predição e Detecção de Falhas em Atuadores Elétricos Através de um Sistema

Embarcado. Em: IV PCIC BR - Petroleum, Chemical Industry Technical Confe-

rence. Rio de Janeiro, RJ, Brasil: [s.n.], 2012.

• Leonardo B. Piccoli, Renato V. Henriques, Carlos E. Pereira, Eduardo L. Schneider.

Uma Solução Embarcada para a Predição e Detecção de Falhas em Válvula de

Transmissão de Petróleo e Derivados. Em: XIX Congresso Brasileiro de Auto-

mática - CBA. Campina Grande, PB, Brasil: [s.n.], 2012.

• Leonardo B. Piccoli, Carlos S. Guimaraes, Renato Ventura B. Henriques, Carlos

E. Pereira. Proposal of an Embedded Distributed System for Fault Detection.

IFAC Proceedings Volumes, v. 46, n. 7, p. 144-149, 2013.

• Leonardo B. Piccoli, Carlos S. Guimarães Jr., Renato Ventura B. Henriques, Jean

Michel Winter, Ivan Muller, João C. Netto, Carlos E. Pereira. Embedded Fault

Detection System Using WirelessHART Networks. Em: Simpósio em Compu-

tação e Automação para Indústria Naval, Offshore e Subaquática - Navcomp. Rio

grande, RS, Brasil: [s.n.], 2013.

• Edzel R. Lapira, Behrad Bagheri, Wenyu Zhao, Jay Lee, Renato VB Henriques,

Carlos E. Pereira, Leonardo Piccoli, CSS Guimarães. A systematic approach to



137

intelligent maintenance of production systems with a framework for embedded

implementation. IFAC Proceedings Volumes, v. 46, n. 7, p. 23 – 28, 2013.

Posteriormente são apresentados os capítulos de livro:

• Leonardo Piccoli, Renato Ventura Bayan Henriques, Eric Ericson Fabris, Edu-

ardo Schneider, Carlos Pereira. Embedded Systems Solutions for Fault De-

tection, Prediction in Electrical Valves. Em: Engineering Asset Management.

Cham: Springer International Publishing, 2015. cap. 1, p. 493–504. ISBN

9783319024615.

• Leonardo Piccoli, Renato Ventura Bayan Henriques, Clayton Rocha, Eric Ericson

Fabris, Carlos Pereira. Proposal of a Quality Index Applied to Fault Detection

Method in Electrical Valves. Em: Engineering Asset Management. Cham: Sprin-

ger International Publishing, 2015. cap. 1, p. 401–412. ISBN 9783319095066.

Em seguida o registro de software efetivado:

• Carlos Eduardo, Leonardo Piccoli e Renato Ventura Bayan Henriques. Fault De-

tection System. 2016. 51 2016 000863-6080. Disponível em:&amp;lt;http://www.inpi.

gov.br&gt;. Acesso em: 09 de outubro de 2018.

Finalmente o artigo submetido para revista Journal of Integrated Circuits, Systems.

• Leonardo Piccoli, Eduardo Schneider, Renato V. Henriques, Tiago R. Balen. De-

sign of an On-Chip System for Real-Time Fault Detection, Diagnosis in Electro-

mechanical Valves. 2018.

7.3 TRABALHOS FUTUROS

Além das contribuições apresentadas, devido à heterogeneidade de áreas dentro do

escopo deste estudo, a proposta pode receber outras melhorias e adaptações para possíveis

trabalhos futuros. Para que haja também uma quantidade maior de informações é neces-

sário que as abordagens deste trabalho sejam ampliadas para outras aplicações. A seguir,

alguns estudos que ficarão para serem desenvolvidos posteriormente à apresentação desta

tese:

• Mesmo que o objeto principal seja a predição e diagnóstico de falhas em equipa-

mentos, o sistema pode ser adaptado para tomar decisões com base em mecanismos

de tolerância a falhas (seção 4.2.1);

http://www.inpi.gov.br
http://www.inpi.gov.br


138

• Integração com ferramentas (BOUSDEKIS et al., 2018) voltadas ao prognóstico e

gerenciamento das falhas no equipamento;

• Adaptação da proposta com redundância de informações em uma rede de sensores,

visando adicionar a detecção, diagnóstico e correção de falha nos transdutores;

• Verificação da integridade dos dados transmitidos utilizando os 2 bits reservados do

protocolo (seção 5.6.1);

• Estudo do aumento da quantidade de sensores (FACCIN, 2011) e a identificação

dos locais adequados para a sua instalação (mais próximo a uma engrenagem ou

rolamento);

• Execução do aumento da precisão do cálculo realizado de 16 bits do algoritmo

embarcado no ASIC. Essa quantidade foi definida em virtude da resolução do con-

versor A/D de 12 bits utilizado;

• Possibilidade de implementação do algoritmo com base em uma interface padrão

para sensor inteligente (LEE, 1998), permitindo maior escalabilidade do sistema

pela conexão em rede facilitada;

• Exploração de outras maneiras de falha que possam ser analisadas e adicionadas a

este estudo;

• A existência de uma base de dados da avaliação da saúde, à medida que for grande

o suficiente, fará com que o prognóstico da vida útil restante de um equipamento

seja realizado adicionando outras técnicas (ex.: modelos ARMA (STEIN, 2014));

• Realização de ensaios de compatibilidade eletromagnética (EMC - Electromagnetic

Compatibility) para validar o sistema implementado através de uma FPGA e um

microcontrolador. Esses ensaios visam verificar a susceptibilidade do sistema pro-

posto à interferência eletromagnética (EMI - Electromagnetic interference), ou seja,

qual é a sua capacidade em detectar e diagnostar falhas quando operando em um

ambiente de alto ruído eletromagnético.

Finalmente, sugere-se, com base na experiência na elaboração de um ASIC desse

trabalho, que este tipo de técnica possa ser fabricada industrialmente.



139

REFERÊNCIAS

AFFONSO, L. O. A. Equipamentos mecânicos: análise de falhas e solução de
problemas. 2. ed. [S.l.]: QUALITYMARK, 2006. 336 p. ISBN 9788573036343.

ANP. Agência Nacional do Petróleo, Gás Natural e Biocombustíveis. 2018. Disponível
em:&amp;lt;http://www.anp.gov.br/dados-estatisticos&gt;. Acesso em: 09 de outubro de 2018.

ARCHITECTURES, R. L.; PRACTICES, D. CompactRIO Developers Guide. System,
National Instruments, December 2009.

ARRIOLA, D.; THIELECKE, F. Model-based design and experimental verification of
a monitoring concept for an active-active electromechanical aileron actuation system.
Mechanical Systems and Signal Processing, v. 94, n. Supplement C, p. 322–345, 2017.
ISSN 0888-3270.

ASSOCIAÇÃO BRASILEIRA DE NORMAS TÉCNICAS. NBR 5462: Confiabilidade
e mantenabilidade. Rio de Janeiro, 1994. 37 p.

AVIZIENIS, A. Toward Systematic Design of Fault-Tolerant Systems. IEEE Computer,
v. 30, n. 4, p. 51–58, 1997.

BALEN, T.; LUBASZEWSKI, M. Teste e Projeto Visando a Testabilidade de Circuitos
e Sistemas Integrados. In: . Tópicos em Micro e Nano Eletrônica. 1. ed. Ijuí/RS:
Editora Unijui, 2014. v. 1, cap. 8, p. 219–264. ISBN 978-85-419-0010-9.

BARUA, S. et al. An efficient architecture for lifting-based two-dimensional discrete
wavelet transforms. Integration, v. 38, n. 3, p. 341–352, 2005. ISSN 0167-9260. ACM
Great Lakes Symposium on VLSI.

BEGG, C. D.; BYINGTON, C. S.; MAYNARD, K. P. Dynamic simulation of mechanical
fault transition. In: 54th meeting of the Society for Machinery Failure Prevention
Technology. Virginia Beach, VA: Society for Machinery Failure Prevention Technology,
2000. p. 203–212.

BEZERRA, E. A.; VARGAS, F.; GOUGH, M. P. Improving reconfigurable systems
reliability by combining periodical test and redundancy techniques: A case study.
Journal of Electronic Testing, v. 17, n. 2, p. 163–174, Apr 2001.

BHATNAGAR, H. Advanced ASIC Chip Synthesis: Using Synopsys’ Design
Compiler and PrimeTime. 2. ed. [S.l.]: Springer, 2002. ISBN 978-0-306-47507-8.

BÖESCH, K. Detecção de falhas por fusão de sensores em atuadores elétricos.
Correlação entre sinais de torque e vibração. Dissertação (Trabalho de diplomação)
— Departamento de Engenharia Elétrica. Escola de Engenharia. Universidade Federal
do Rio Grande do Sul, Porto Alegre, 2011.

BOROUJENY, F. B. Adaptive Filters: Theory and Applications. [S.l.]: John Wiley &amp;amp;
Sons, UK, 1998.

http://www.anp.gov.br/dados-estatisticos


140

BOSA, J. L. Sistema Embarcado para a Manutenção Inteligente de Atuadores
Elétricos. Dissertação (Mestrado) — Universidade Federal do Rio Grande do Sul,
Instituto de Informática, Programa de Pós-Graduação em Computação, Porto Alegre,
2009.

BOUSDEKIS, A. et al. Enabling condition-based maintenance decisions with proactive
event-driven computing. Computers in Industry, v. 100, p. 173 – 183, 2018. ISSN
0166-3615.

BOYES, H. et al. The industrial internet of things (iiot): An analysis framework.
Computers in Industry, v. 101, p. 1 – 12, 2018. ISSN 0166-3615.

CEITEC. Centro de Excelência em Tecnologia Eletrônica Avançada. 2018. Disponível
em:&amp;lt;http://www.ceitec-sa.com&gt;. Acesso em: 09 de outubro de 2018.

CHEN, H.; CHUA, P. S.; LIM, G. Adaptive wavelet transform for vibration signal
modelling and application in fault diagnosis of water hydraulic motor. Mechanical
Systems and Signal Processing, v. 20, n. 8, p. 2022–2045, 2006. ISSN 0888-3270.

CHILLAREGE, R.; BOWEN, N. S. Understanding large system failures-a fault injection
experiment. In: [1989] The Nineteenth International Symposium on Fault-Tolerant
Computing. Digest of Papers. [S.l.: s.n.], 1989. p. 356–363.

CHOLETTE, M. E. et al. Condition Monitoring and Operational Decision Making in
Semiconductor Manufacturing. IEEE Transactions on Semiconductor Manufacturing,
v. 26, n. 4, p. 454–464, Nov 2013.

CLARK, J. A.; PRADHAN, D. K. Fault Injection: A Method for Validating
Computer-System Dependability. IEEE Computer, v. 28, n. 6, p. 47–56, 1995.

COESTER. Coester Automação Ltda. 2018. Disponível em:&amp;lt;http://www.coester.com.
br/br/produtos/detalhes/14&gt;. Acesso em: 09 de outubro de 2018.

COESTER AUTOMAÇÃO. Coester Automação, Manual Atuador - Linha CSR CSR
12- CSR 25 - CSR 50 Integral. [S.l.], 2001.

CONSERVATION, A. D. of E. Aboveground Storage Tank Operator Handbook. 3.
ed. Alaska, US: State of Alaska, 2016.

DAUBECHIES, I.; SWELDENS, W. Factoring Wavelet Transforms into Lifting Steps.
Journal of Fourier Analysis and Applications, v. 4, n. 3, p. 245–267, 1998.

DEVI, S.; SARAVANAN, M. An innovative modular device and wireless control system
enabling thermal and pressure sensors using FPGA on real-time fault diagnostics of
steam turbine functional deterioration. Mechanical Systems and Signal Processing,
v. 102, n. Supplement C, p. 312–328, 2018. ISSN 0888-3270.

DINIZ, P. S. R. Adaptive Filtering: Algorithms and Practical Implementation. 4. ed.
Secaucus, NJ, USA: Springer-Verlag New York, Inc., 2013. ISBN 9781461441069.

DJURDJANOVIC, D.; LEE, J.; NI, J. Watchdog agent - an infotronics-based prognostics
approach for product performance degradation assessment and prediction. Advanced
Engineering Informatics, v. 17, n. 3-4, p. 109–125, 2003.

http://www.ceitec-sa.com
http://www.coester.com.br/br/produtos/detalhes/14
http://www.coester.com.br/br/produtos/detalhes/14


141

DUAN, L. et al. Segmented infrared image analysis for rotating machinery fault
diagnosis. Infrared Physics &amp;amp; Technology, v. 77, p. 267–276, 2016.

Carlos Eduardo, Leonardo Piccoli e Renato Ventura Bayan Henriques. Fault Detection
System. 2016. 51 2016 000863-6080. Disponível em:&amp;lt;http://www.inpi.gov.br&gt;. Acesso
em: 09 de outubro de 2018.

EUROSTAT. Electricity price statistics. 2017. Disponível em:&amp;lt;http://ec.europa.eu/
eurostat/statistics-explained/index.php/Electricity_price_statistics&gt;. Acesso em: 22 de
dezembro de 2017.

FACCIN, F. C. Manutenção Inteligente: Fusão de sensores aplicada na detecção de
falhas em atuadores elétricos. Dissertação (Trabalho de diplomação) — Departamento
de Engenharia Elétrica. Escola de Engenharia. Universidade Federal do Rio Grande do
Sul, Porto Alegre, 2011.

FONTAINE, M. D. et al. Ieee / esw applying reliability centered maintenance (rcm) to
electrical equipment critical to worker safety. In: 2013 IEEE IAS Electrical Safety
Workshop. [S.l.: s.n.], 2013. p. 105–112. ISSN 2326-330X.

GAN, W.-S.; KUO, S. M. Embedded Signal Processing with the Micro Signal
Architecture. [S.l.]: Wiley-IEEE Press, 2007. ISBN 0471738417.

GAO, Z.; CECATI, C.; DING, S. X. A Survey of Fault Diagnosis and Fault-Tolerant
Techniques - Part I: Fault Diagnosis With Model-Based and Signal-Based Approaches.
IEEE Trans. Industrial Electronics, v. 62, n. 6, p. 3757–3767, 2015.

GIACOMOLLI, A. A. Proposta de Arquitetura Orientada a Serviços para um
Sistema de Manutenção Inteligente. Dissertação (Dissertação de mestrado) —
Departamento de Engenharia Elétrica. Programa de Pós-Graduação em Engenharia
Elétrica. Universidade Federal do Rio Grande do Sul, Porto Alegre, 2014.

GOLDMAN, R. et al. Synopsys’ open educational design kit: Capabilities, deployment
and future. In: IEEE International Conference on Microelectronic Systems
Education, MSE ’09, San Francisco, CA, USA, July 25-27, 2009. [S.l.: s.n.], 2009. p.
20–24.

GONÇALVES, L. F. et al. Fault Detection, Diagnosis and Prediction in Electrical Valves
Using Self-Organizing Maps. J. Electron. Test., Kluwer Academic Publishers, Norwell,
MA, USA, v. 27, n. 4, p. 551–564, ago. 2011. ISSN 0923-8174.

HAYKIN, S. Adaptive Filter Theory. 4. ed. [S.l.]: Prentice Hall, 2001. Hardcover.
ISBN 0130901261.

HENRIQUES, R. V. B. et al. Detecção de Falhas em atuadores nas linhas de transporte
de petróleo e/ou derivados. In: ANAIS DO BRAZIL AUTOMATION ISA 2010. 14th
Congresso Internacional e Exposição Sul-Americana de Automação, Sistemas e
Instrumentação. São Paulo, Brasil, 2010.

HOFMANN, E.; RüSCH, M. Industry 4.0 and the current status as well as future
prospects on logistics. Computers in Industry, v. 89, p. 23 – 34, 2017. ISSN 0166-3615.

http://www.inpi.gov.br
http://ec.europa.eu/eurostat/statistics-explained/index.php/Electricity_price_statistics
http://ec.europa.eu/eurostat/statistics-explained/index.php/Electricity_price_statistics


142

HSUEH, M.-C.; TSAI, T. K.; IYER, R. K. Fault Injection Techniques and Tools. IEEE
Computer, v. 30, n. 4, p. 75–82, 1997.

HU, G. et al. A deep boltzmann machine and multi-grained scanning forest ensemble
collaborative method and its application to industrial fault diagnosis. Computers in
Industry, v. 100, p. 287 – 296, 2018. ISSN 0166-3615.

JIAN, H. et al. Optimization of a pressure control valve for high power automatic
transmission considering stability. Mechanical Systems and Signal Processing, v. 101,
n. Supplement C, p. 182–196, 2018. ISSN 0888-3270.

JOHNSTON, A. T.; WONG, P. Open System Architecture for Condition-Based
Maintenance. An Operations and Maintenance Information Open System Alliance,
2018. Disponível em:&amp;lt;www.mimosa.org/mimosa-osa-cbm&gt;. Acesso em: 09 de outubro
de 2018.

JOU, J. M.; SHIAU, Y.-H.; LIU, C.-C. Efficient VLSI Architectures for The Biorthogonal
Wavelet Transform by Filter Bank and Lifting Scheme. Circuits and Systems, 2001.
ISCAS 2001. The 2001 IEEE International Symposium on, p. vol.2, pp.529–532, 2001.

KHAN, Y. Power Optimization of Linear Feedback Shift Register Using Clock Gating.
International Journal of Electronics and Communication Technology (IJECT), v. 4,
p. 109–115, 2013.

KONEZNY, M.; RAO, S. Improving the DWT-LMS algorithm: boundary filter DWT
matrix construction. In: Signals, Systems and Computers, 1995. 1995 Conference
Record of the Twenty-Ninth Asilomar Conference on. [S.l.: s.n.], 1995. v. 1, p. 75–81
vol.1.

LAPRIE, J. C. DEPENDABLE COMPUTING AND FAULT TOLERANCE :
CONCEPTS AND TERMINOLOGY. In: Fault-Tolerant Computing, 1995,
Highlights from Twenty-Five Years., Twenty-Fifth International Symposium on.
[S.l.: s.n.], 1995. p. 2–.

LAZZARETTI, E. P. Avaliação de Desempenho de Implementações em Hardware
e Software de Algoritmos para Aplicações de Manutenção Inteligente. Dissertação
(Dissertação de mestrado) — Departamento de Engenharia Elétrica. Programa de
Pós-Graduação em Engenharia Elétrica. Universidade Federal do Rio Grande do Sul,
Porto Alegre, 2012.

LEE, J. Measurement of machine performance degradation using a neural network
model. Comput. Ind., Elsevier Science Publishers B. V., Amsterdam, The Netherlands,
The Netherlands, v. 30, n. 3, p. 193–209, out. 1996. ISSN 0166-3615.

LEE, J. E-manufacturing-fundamental, tools and transformation. In: LSEVIER (Ed.).
Pointlike structures inside and outside hadrons. Milwaukee, WI, USA: Science
Direct, 2003. p. 501–507.

LEE, K. IEEE Standard for a smart transducer interface for sensors and actuators -
transducer to microprocessor communication protocols and transducer electronic data
sheet (TEDS) formats. IEEE Std 1451.2-1997, 1998.

www.mimosa.org/mimosa-osa-cbm


143

LO, C. H.; WONG, Y.-K.; RAD, A. B. Intelligent system for process supervision and
fault diagnosis in dynamic physical systems. IEEE Trans. Industrial Electronics, v. 53,
n. 2, p. 581–592, 2006.

MAHESWARI, R. U.; UMAMAHESWARI, R. Trends in non-stationary signal
processing techniques applied to vibration analysis of wind turbine drive train – A
contemporary survey. Mechanical Systems and Signal Processing, v. 85, n. Supplement
C, p. 296–311, 2017. ISSN 0888-3270.

MALCOLM, N.; ZHAO, W. The Timed-Token Protocol for Real-Time Communications.
IEEE Computer, v. 27, n. 1, p. 35–41, 1994.

MANSOURI, M. et al. Wavelet optimized EWMA for fault detection and application to
photovoltaic systems. Solar Energy, v. 167, p. 125–136, 2018. ISSN 0038-092X.

MARÇAL, R.; SUSIN, A. Detecting Incipient Faults in Rotating Machines. Revista
Gestão Industrial, p. 83–92, 2005. ISSN 1808-0448.

MARIMON, G. C. Fusão de Sensores Aplicada à Manutenção Inteligente.
Dissertação (Trabalho de diplomação) — Departamento de Engenharia Elétrica. Escola
de Engenharia. Universidade Federal do Rio Grande do Sul, Porto Alegre, 2014.

MARTINEZ-ORTIZ, C.; BECK, M.; WILDE, P. D. Ewma based approaches for
automated building energy analysis. In: 2011 IEEE International Symposium on
Signal Processing and Information Technology (ISSPIT). [S.l.: s.n.], 2011. p.
562–566. ISSN 2162-7843.

MENTOR GRAPHICS CORPORATION. Modelsim SE Reference Manual 6.3f. [S.l.],
2008. Disponível em:&amp;lt;www.mentor.com/products/fv/modelsim&gt;. Acesso em: 03 de
agosto de 2015.

MIKHAYLOV, K.; PETAEJAEJAERVI, . J.; HAENNINEN, T. Analysis of capacity and
scalability of the lora low power wide area network technology. In: European Wireless
2016; 22th European Wireless Conference. [S.l.: s.n.], 2016. p. 1–6.

MIREMADI, G.; TORIN, J. Evaluating processor-behavior and three error-detection
mechanisms using physical fault-injection. IEEE Transactions on Reliability, v. 44,
n. 3, p. 441–454, Sep 1995. ISSN 0018-9529.

NAGAR, S. Introduction to Scilab: For Engineers and Scientists. 1st. ed. Berkely,
CA, USA: Apress, 2017.

NEGREIROS, M. Filtros adaptativos aplicados à separação de sinais. Dissertação
(Mestrado) — Universidade Federal do Rio Grande do Sul. Escola de Engenharia.
Programa de Pós-Graduação em Engenharia Metalurgica e dos Materiais, Porto Alegre,
1994.

PANDYA, M.; MALEK, M. Minimum Achievable Utilization for Fault-Tolerant
Processing of Periodic Tasks. IEEE Trans. Computers, v. 47, n. 10, p. 1102–1112,
1998.

PETROBRAS. Petróleo Brasileiro S.A. 2018. Disponível em:&amp;lt;http://www.petrobras.
com.br&gt;. Acesso em: 09 de outubro de 2018.

www.mentor.com/products/fv/modelsim
http://www.petrobras.com.br
http://www.petrobras.com.br


144

PICCOLI, L. et al. Embedded Systems Solutions for Fault Detection and Prediction in
Electrical Valves. In: Engineering Asset Management. Cham: Springer International
Publishing, 2015. cap. 1, p. 493–504. ISBN 9783319024615.

PICCOLI, L. et al. Proposal of a Quality Index Applied to Fault Detection Method in
Electrical Valves. In: Engineering Asset Management. Cham: Springer International
Publishing, 2015. cap. 1, p. 401–412. ISBN 9783319095066.

PICCOLI, L. B. et al. Proposal of an Embedded Distributed System for Fault Detection.
IFAC Proceedings Volumes, v. 46, n. 7, p. 144–149, 2013. ISSN 1474-6670.

PICCOLI, L. B. et al. Embedded Fault Detection System Using WirelessHART
Networks. In: Simpósio em Computação e Automação para Indústria Naval,
Offshore e Subaquática - Navcomp. Rio grande, RS, Brasil: [s.n.], 2013.

PICCOLI, L. B. et al. Desenvolvimento de um Sistema Embarcado para Predição e
Detecção de Falhas em Válvula de Transmissão de Petróleo e Derivados. In: Workshop
em Sistemas Embarcados para a Indústria de Óleo, Gás e Energia - WES2012. Rio
grande, RS, Brasil: [s.n.], 2012.

PLONKA, G.; STRELA, V. Construction of multiscaling functions with approximation
and symmetry. SIAM Journal on Mathematical Analysis, v. 29, n. 2, p. 481–510, 1998.

Qiu, H. et al. Wavelet filter-based weak signature detection method and its application on
rolling element bearing prognostics. Journal of Sound Vibration, v. 289, p. 1066–1090,
fev. 2006.

RAI, A.; UPADHYAY, S. Bearing performance degradation assessment based on a
combination of empirical mode decomposition and k-medoids clustering. Mechanical
Systems and Signal Processing, v. 93, n. Supplement C, p. 16–29, 2017. ISSN
0888-3270.

RAMAMRITHAM, K.; STANKOVIC, J. A. Scheduling algorithms and operating
systems support for real-time systems. Proceedings of the IEEE, v. 82, n. 1, p. 55–67,
Jan 1994. ISSN 0018-9219.

RASTEGARI, A.; ARCHENTI, A.; MOBIN, M. Condition based maintenance of
machine tools: Vibration monitoring of spindle units. In: 2017 Annual Reliability and
Maintainability Symposium (RAMS). [S.l.: s.n.], 2017. p. 1–6.

ROCHA, C. G. M. Análise da Variabilidade de Vibração em Atuadores Elétricos.
Dissertação (Dissertação de mestrado) — Departamento de Engenharia Elétrica.
Programa de Pós-Graduação em Engenharia Elétrica. Universidade Federal do Rio
Grande do Sul, Porto Alegre, 2016.

RUSSO, E. E. R. e. a. A Realidade Virtual na Indústria de Exploração e Produção
de Petróleo. [S.l.]: Editora Mania de Livro. São Paulo, SP: Realidade Virtual: Conceitos
e Tendências, 2004. 283–288 p.

SCHUCK, A. Análise e processamento de sinais de voz disfônica através da
transformada wavelet discreta. Tese (Doutorado) — Universidade Federal do Rio
Grande do Sul, Escola de Engenharia, Programa de Pós-Graduação em Engenharia
Elétrica, Porto Alegre, 1998.



145

SERVICES, A. W. Shop HiLetgo. 2018. Disponível em:&amp;lt;https://www.amazon.com/l/
HiLetgo&gt;. Acesso em: 01 de setembro de 2018.

SHAHBAZI, M.; POURE, P.; SAADATE, S. Real-time power switch fault diagnosis
and fault-tolerant operation in a DFIG-based wind energy system. Renewable Energy,
v. 116, n. Part B, p. 209–218, 2018. ISSN 0960-1481.

SHAO, H. et al. Rolling bearing fault detection using continuous deep belief network
with locally linear embedding. Computers in Industry, v. 96, p. 27 – 39, 2018. ISSN
0166-3615.

SHAO, H. et al. A novel deep autoencoder feature learning method for rotating
machinery fault diagnosis. Mechanical Systems and Signal Processing, v. 95, n.
Supplement C, p. 187–204, 2017. ISSN 0888-3270.

SHIN, K. G.; RAMANATHAN, P. Real-time computing: a new discipline of computer
science and engineering. Proceedings of the IEEE, v. 82, n. 1, p. 6–24, Jan 1994. ISSN
0018-9219.

SOBIE, C.; FREITAS, C.; NICOLAI, M. Simulation-driven machine learning: Bearing
fault classification. Mechanical Systems and Signal Processing, v. 99, n. Supplement
C, p. 403–419, 2018. ISSN 0888-3270.

STEIN, F. da S. Desenvolvimento de Módulo de Predição de Comportamento para
Manutenção Inteligente de Atuador Elétrico. Dissertação (Trabalho de diplomação)
— Departamento de Engenharia Elétrica. Escola de Engenharia. Universidade Federal
do Rio Grande do Sul, Porto Alegre, 2014.

SUMATHI, S.; SUREKHA, P. LabVIEW based Advanced Instrumentation Systems.
[S.l.]: Springer Verlag, 2007. 728 p.

SWEARINGEN, K. et al. An Open System Architecture for Condition Based
Maintenance Overview. In: Aerospace Conference, 2007 IEEE. [S.l.: s.n.], 2007.
p. 1–8. ISSN 1095-323X.

TAUBMAN, D. S.; MARCELLIN, M. W. JPEG2000: standard for interactive imaging.
Proceedings of the IEEE, v. 90, n. 8, p. 1336–1357, 8 2002. ISSN 0018-9219.

TEXAS INSTRUMENTS INCORPORATED. First generation TMS320 user’s
guide. [S.l.]: Texas Instruments ; Englewood Cliffs, N.J. : Prentice-Hall, 1988. ISBN
2868860249.

TRANSPETRO. Petrobras Transporte S.A. 2018. Disponível em:&amp;lt;www.transpetro.
com.br&gt;. Acesso em: 09 de outubro de 2018.

TUMBUSH, G. Signed arithmetic in verilog 2001 - opportunities and hazards. In: . San
José, CA, US: Design and Verification Conference and Exhibition, 2005.

VALINS, T. F. Relé digital de distância baseado na teoria de ondas viajantes e
transformada Wavelet. Dissertação (Mestrado) — Universidade de São Paulo. Escola
de Engenharia de São Carlos. Engenharia Elétrica., Porto Alegre, 2004.

https://www.amazon.com/l/HiLetgo
https://www.amazon.com/l/HiLetgo
www.transpetro.com.br
www.transpetro.com.br


146

WALNUT, D. F. An introduction to wavelet analysis. [S.l.]: Birkhäuser Basel, 2002.
(Applied and Numerical Harmonic Analysis). ISBN 9780817639624.

WANG, L.; GAO, R. X. Condition Monitoring and Control for Intelligent
Manufacturing (Springer Series in Advanced Manufacturing). Secaucus, NJ, USA:
Springer-Verlag New York, Inc., 2006. ISBN 1846282683.

WANG, X. et al. Fault diagnosis of diesel engine based on adaptive wavelet packets and
EEMD-fractal dimension. Mechanical Systems and Signal Processing, v. 41, n. 1, p.
581–597, 2013. ISSN 0888-3270.

WIDROW, B.; STEARNS, S. D. Adaptive Signal Processing. Englewood Cliffs, NJ:
Prentice-Hall, 1985.

X-FAB. Analog/Mixed-Signal Semiconductor Foundry. 2018. Disponível em:
&lt;https://www.xfab.com/technology/cmos/06-um-xc06/&gt;. Acesso em: 09 de outubro de
2018.

YUAN, J. et al. Weak fault detection and health degradation monitoring using
customized standard multiwavelets. Mechanical Systems and Signal Processing, v. 94,
n. Supplement C, p. 384–399, 2017. ISSN 0888-3270.

ZAKRAJSEK, J. J.; LEWICKI, D. G. Detecting gear tooth fatigue cracks in advance of
complete fracture. Tribotest, v. 4, n. 4, p. 407–422, 6 1998.

ZHANG, X. et al. An improved AE detection method of rail defect based on multi-level
ANC with VSS-LMS. Mechanical Systems and Signal Processing, v. 99, n.
Supplement C, p. 420–433, 2018. ISSN 0888-3270.

https://www.xfab.com/technology/cmos/06-um-xc06/

	Agradecimentos
	Resumo
	Abstract
	Lista de Abreviaturas e Siglas
	Lista de Símbolos
	Lista de Figuras
	Lista de Tabelas
	Sumário
	1 INTRODUÇÃO
	1.1 Visão Geral dos Objetivos
	1.2 Contribuições
	1.3 Apresentação dos Capítulos

	2 ESTADO DA ARTE EM TÉCNICAS DE MANUTENÇÃO INTELIGENTE
	2.1 Tolerância a Falhas
	2.1.1 Definições de Termos Empregados
	2.1.2 Arquitetura de um Ambiente de Injeção de Falhas

	2.2 Técnicas de Manutenção
	2.2.1 Manutenção Baseada na Condição
	2.2.2 Manutenção Inteligente

	2.3 Estado da Arte em Manutenção Inteligente
	2.3.1 Resumo do Estado da Arte


	3 REVISÃO DE TÉCNICAS E METODOLOGIAS
	3.1 Métodos de Processamento Digital de Sinais
	3.1.1 Transformada Discreta de Wavelet
	3.1.2 Extração de Energia
	3.1.3 Filtro Adaptativo

	3.2 Sistemas de Tempo Real
	3.3 Formato dos Dados de Dispositivos Digitais
	3.3.1 Notação de Ponto Fixo no Formato Q

	3.4 O Protocolo de Comunicação Serial SPI
	3.4.1 Arquitetura de Hardware do Protocolo SPI


	4 UTILIZAÇÃO DE VÁLVULAS NO MODAL DUTOVIÁRIO DA INDÚSTRIA DO PETRÓLEO
	4.1 Oferta e Demanda de Petróleo
	4.2 Transporte e Armazenamento de Petróleo e Derivados
	4.2.1 Operações de um Típico Terminal

	4.3 Visão geral do Estudo de Caso
	4.3.1 Estudo de Caso deste Trabalho
	4.3.2 Trabalhos Relacionados ao Estudo de Caso


	5 PROPOSTA E IMPLEMENTAÇÕES DO SISTEMA
	5.1 Sistema Embarcado FDS e FDI
	5.2 O Sistema FDS para Detecção e Predição de Falhas
	5.2.1 Transformada Discreta de Wavelet
	5.2.2 Energia do Sinal
	5.2.3 Filtro Adaptativo LMS

	5.3 O Sistema FDI para Diagnóstico de Falhas
	5.3.1 Índice de Detecção de Falhas

	5.4 Chip para Predição e Detecção de Falhas
	5.4.1 Arquitetura do FDS
	5.4.2 Arquitetura para Autoteste Funcional
	5.4.3 Arquitetura do FDI
	5.4.4 Arquitetura do FDS com SPI
	5.4.5 Arquitetura do FDS e FDI com SPI

	5.5 Arquitetura para Indústria 4.0
	5.6 Descrição Operacional do Chip
	5.6.1 Protocolo de Comunicação SPI para o Chip
	5.6.2 Ajuste dos Parâmetros do Chip


	6 RESULTADOS OBTIDOS
	6.1 Desenvolvimento do Chip na Biblioteca Educacional de 90 nm
	6.1.1 Síntese Lógica do Chip
	6.1.2 Síntese Física do Chip
	6.1.3 Resultados da Síntese Física

	6.2 Desenvolvimento do Chip na Biblioteca Comercial de 0,6 m
	6.2.1 Síntese Lógica do Chip
	6.2.2 Síntese Física do Chip
	6.2.3 Resultados da Síntese Física

	6.3 Desenvolvimento do sistema com Microcontrolador e FPGA
	6.3.1 Implementação dos algoritmos em FPGA
	6.3.2 Testes Simulados com FPGA

	6.4 Experimentos com a Bancada de Teste
	6.4.1 Descrição dos Testes
	6.4.2 Espectro de Frequência dos Sinais de Teste

	6.5 Simulações do Chip Pós-síntese Física
	6.5.1 Simulação com Falha por Pressão no Freio de 100 kPa
	6.5.2 Simulação com Falha por Pressão no Freio de 300 kPa
	6.5.3 Simulação com Falha por Engrenagem de Dente Desgastado
	6.5.4 Simulação com Falha por Engrenagem de Dente Fraturado
	6.5.5 Simulação com Falha por Engrenagens sem Lubrificação
	6.5.6 Simulação de Autoteste Funcional

	6.6 Discussão dos Resultados

	7 CONSIDERAÇÕES FINAIS
	7.1 CONTRIBUIÇÕES TÉCNICAS
	7.2 TRABALHOS SUBMETIDOS OU PUBLICADOS
	7.3 TRABALHOS FUTUROS

	Referências

</field>
	</doc>
</add>