<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.09464</field>
		<field name="filename">14450_001088673.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">UNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL INSTITUTO DE INFORMÁTICA CURSO DE CIÊNCIA DA COMPUTAÇÃO
DANIEL MACHADO NIDEJELSKI
Projeto de um sistema de controle de combustíveis em tanques de armazenamento utilizando microcontrolador Arduíno
Monografia apresentada como requisito parcial para a obtenção do grau de Bacharel em Ciência da Computação
Orientador: Prof. Dr. Marcelo Johann
Porto Alegre 2018
UNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL
Reitor: Prof. Rui Vicente Oppermann
Vice-Reitora: Profa. Jane Fraga Tutikian
Pró-Reitor de Graduação: Prof. Vladimir Pinheiro do Nascimento
Diretora do Instituto de Informática: Profa. Carla Maria Dal Sasso Freitas Coordenador do Curso de Ciência de Computação: Prof. Sérgio Luis Cechin Bibliotecária-chefe do Instituto de Informática: Beatriz Regina Bastos Haro
RESUMO
A crise de abastecimento de combustíveis que tomou conta do país no ano de 2018, com a paralisação dos caminhoneiros, teve reflexos diretos no mercado de trabalho, na recuperação econômica e na inflação (CONTABIL, 2018), com impactos diretos no PIB do país (expectativa de recuo de 0,3%) (BRAZILIENSE, 2018), deixando em evidência como todos os setores da economia são completamente dependentes não somente do transporte de carga rodoviário, mas também dos combustíveis fósseis como a gasolina e o óleo diesel, ambos produtos derivados do petróleo.
O combustível, além de ser um produto valioso, peça importante como engrenagem da economia, tem em seus custos um grande peso nos gastos de qualquer negócio, seja ele uma empresa de transportes de carga, rodoviários ou até mesmo os caminhoneiros e qualquer pessoa que possua um veículo. Sendo assim, qualquer medida de gerenciamento de gastos é bem-vinda.
Atualmente, algumas empresas da área de transportes têm enfrentado problemas no controle e administração de abastecimentos e consumo de combustíveis. Detalhes na hora de gerenciar os combustíveis fazem diferença, e manter o controle dos tanques de armazenamento desses produtos se torna essencial. Reduzir custos é fundamental, independente do momento em que a empresa se encontra, e para isso, sistematizar o controle dos abastecimentos e saída de combustível é uma medida importante para racionalizar gastos extras. Neste contexto, o objetivo deste trabalho é projetar e desenvolver um sistema capaz de monitorar os tanques de armazenamento de combustíveis em uma empresa de transporte público, com uso de um microcontrolador, extraindo dados e informações em tempo real para facilitar o gerenciamento e controle desse produto, possibilitando a avaliação de estoque e diminuindo desperdícios nos abastecimentos.
Palavras-chave: Combustíveis. Economia. PIB. Controle. Gerenciamento. Desperdício. Sistema. Microcontrolador.
ABSTRACT
The crisis of fuel supply that took over the country in the year 2018, with the stoppage of the truck drivers, had direct effects on the labor market, economic recovery and inflation (CONTABIL, 2018), with direct impacts on the country's GDP (0.3% decline) (BRAZILIENSE, 2018), highlighting how all sectors of the economy are completely dependent not only on road haulage but also on fossil fuels such as gasoline and diesel, both petroleum products.
Fuel, besides being a valuable product, an important part of the economy, has in its costs a great weight in the expenses of any business, be it a cargo transport company, road or even the truck drivers and anyone who has a vehicle. Therefore, any expense management measure is welcome.
Currently, some transportation companies have faced problems in the control and administration of fuel supplies and fuel consumption. Details on managing fuels make a difference, and keeping control of storage tanks for these products becomes essential. Reducing costs is crucial, regardless of when the company is, and for this, systematizing the control of fuel supply and output is an important measure to rationalize extra spending.
In this context, the objective of this work is to design and develop a system capable of monitoring fuel storage tanks in a public transportation company using a microcontroller, extracting data and information in real time to facilitate the management and control of this product , making it possible to evaluate inventory and reduce waste in supplies.
Keywords: Fuel. Economy. GDP. Control. Management. Waste. System. Microcontroller.
LISTA DE FIGURAS
Figura 2.1 Tanque com régua graduada...........................................16
Figura 2.2 Tanque com visor de nível...........................................16
Figura 2.3 Tanque com sensor de ultrassom......................................17
Figura 2.4 Tanque aéreo horizontal.............................................20
Figura 2.5 Tanque subterrâneo..................................................20
Figura 3.1 Medidor direto com visor de nível externo...........................21
Figura 3.2 Tanque aéreo horizontal da empresa..................................22
Figura 5.1 software NIVELCO....................................................29
Figura 5.2 software SiloTrack..................................................30
Figura 5.3 software WebCal.....................................................31
Figura 5.4 Trabalho de conclusão desenvolvido por Lucas Brollo Alpi............31
Figura 5.5 Artigo Antonio P Alfredo, Hipolito A.S Gomes e Ailton Cavali, 1o Simpósio de Eletrônica da Universidade Unianchieta ...........................32
Figura 6.1 Arduíno UNO R3......................................................33
Figura 6.2 Sensor ultrassónico HC-SR04.........................................34
Figura 6.3 Princípio de funcionamento HC-SR04..................................35
Figura 6.4 Medição de nível de líquido com sensor de ultrassom.................35
Figura 6.5 Geometria tanque cilindro horizontal................................36
Figura 6.6 Ligações do Arduíno com o sensor HC-SR04............................37
Figura 6.7 Simulação de ligações do Arduíno com 3 sensores	HC-SR04.............38
Figura 6.8 Arquitetura geral do projeto........................................39
Figura 6.9 Esquema Arduíno......................................................39
Figura 6.10 Esquema na protoboard...............................................40
Figura 6.11 Esquema implementado na prática....................................41
Figura 6.12 Esquema implementado na prática com tanques........................41
Figura 6.13 Fluxograma do algoritmo do projeto.................................42
Figura 6.14 Modificação em Ultrasonic.h para calcular distância em mm..........44
Figura 6.15 Modificação em Ultrasonic.cpp para calcular distância em mm........45
Figura 6.16 Programa principal do projeto na IDE Arduino.......................46
Figura 6.17 Programa principal do projeto na IDE Arduino.......................47
Figura6.18 Ethernet Shield W5100...............................................49
Figura 6.19 Arduíno integrado ao Ethernet Shield W5100.........................49
Figura 6.20 Esquema de comunicação.............................................50
Figura 6.21 Esquema de comunicação na prática..................................50
Figura 7.1 Arquitetura cliente servidor........................................53
Figura 7.2 Tela de login.......................................................56
Figura 7.3 Menu principal......................................................57
Figura 7.4 Tela de Consulta Online.............................................58
Figura 7.5 Tela de relatórios..................................................59
Figura 7.6 Tela de gráficos....................................................60
LISTA DE TABELAS
Tabela 2.1 Procedimento para abastecimento...............................12
Tabela 3.1 Tabela de preços (R$) óleo diesel Rio Grande do Sul...........23
Tabela 6.1 Tabela das medições de volume medido e real...................47
Tabela 7.1 Tabela de usuários no banco de dados com exemplos.............54
Tabela 7.2 Tabela de medições no banco de dados com exemplos.............55
PIB	Produto Interno Bruto
ANP	Agência Nacional Petróleo, Gás Natural e Biocombustíveis
IDE	Integrated Development Environment
TOF	Time Of Flight
PWM	Pulse Width Modulation
USB	Universal Serial Bus
ICSP	In-Circuit Serial Programming
VCC	Voltage at the Common Collector - Nível lógico 1 (5 V)
GND	GrouND - Nível lógico 0 (0V)
P2P	Peer To Peer
SGBD	Sistema de Gerenciamento de Banco de Dados
PHP	PHP Hypertext Preprocessor (acrônimo recursivo)
IP	Internet Protocol
TCP	Transmission Control Protocol
UDP	User Datagram Protocol
SD	Secure Digital
DHCP	Dynamic Host Configuration Protocol
SUMÁRIO
1	INTRODUÇÃO...........................................................10
2	FUNDAMENTAÇÃO.......................................................12
2.1	Abastecimento......................................................12
2.2	Medições de nível..................................................13
2.2.1	Classificação e tipo	de medidores de nível.......................14
2.2.1.1	Medição direta.................................................14
2.2.1.2	Medição indireta...............................................14
2.2.1.3	Medição descontínua............................................15
2.2.1.4	Utilização.....................................................15
2.2.1.5	Exemplos.......................................................15
2.2.2	Razões para investimento em medição de nível.....................17
2.3	Armazenamento de combustíveis......................................18
2.3.1	Forma dos tanques................................................19
2.3.1.1	Cilíndricos....................................................19
2.3.1.2	Esféricos......................................................19
2.3.2	Localização de tanques.........................................19
2.3.2.1	Aéreos.........................................................19
2.3.2.2	Subterrâneos...................................................20
3	DETALHAMENTO DO PROBLEMA............................................21
3.1	Desperdícios e furtos..............................................21
3.2	Impacto financeiro.................................................22
3.3	Contratos..........................................................23
3.3.1	Licitações.......................................................24
3.3.2	Contratos Administrativos .......................................24
4	OBJETIVOS...........................................................26
4.1	Objetivo Geral.....................................................26
4.2	Objetivos específicos..............................................26
5	TRABALHOS SIMILARES.................................................28
5.1	NIVISION...........................................................28
5.2	SiloTrack..........................................................29
5.3	WebCal.............................................................30
5.4	Trabalho de conclusão	de curso....................................31
5.5	Artigo em Simpósio de	Eletrônica...................................32
6	PROJETO EM HARDWARE.................................................33
6.1	Arduíno............................................................33
6.2	Sensores...........................................................34
6.2.1	Medição de nível utilizando sensores ultrassónicos...............35
6.2.2	Cálculo volumétrico do cilindro horizontal.......................36
6.3	Arquitetura........................................................37
6.4	Esquema prático....................................................38
6.4.1	Esquema Arduíno..................................................39
6.4.2	Esquema protoboard...............................................40
6.4.3	Esquema implementado.............................................40
6.5	Análise do código fonte no microcontrolador........................42
6.6	Testes realizados..................................................47
6.7	Resultados e discussões............................................48
6.8	Comunicação entre hardware e software..............................48
6.8.1	Ethernet Shield W5100............................................48
6.8.2	Comunicação.......................................................50
6.8.3	Leitura dos dados pela aplicação..................................51
7	PROJETO EM SOFTWARE - APLICAÇÃO......................................52
7.1	Definição da arquitetura do sistema................................52
7.1.1	Arquitetura cliente-servidor......................................52
7.1.1.1	Vantagens.......................................................52
7.1.1.2	Desvantagens....................................................53
7.2	Definições das tecnologias utilizadas...........................54
7.2.1	Banco de Dados....................................................54
7.2.2	Linguagem de programação..........................................55
7.2.3	Google Charts.....................................................55
7.3	Telas da aplicação................................................55
7.3.1	Teladelogin.......................................................55
7.3.2	Menu principal....................................................56
7.3.3	Consulta Online...................................................57
7.3.4	Relatórios........................................................59
7.3.5	Gráficos..........................................................60
8	CONCLUSÃO............................................................61
REFERÊNCIAS.............................................................64
11NTRODUÇÃO
O combustível é um produto essencial no mundo moderno. Seja na vida das pessoas, na de pequenos à grandes negócios, em todos setores da economia, somos todos dependentes destes derivados do petróleo para que as coisas funcionem.
A greve dos caminhoneiros em maio de 2018 deixou exposto a dependência do país em torno desse produto. A paralisação fez com que o abastecimento de combustíveis não chegasse aos postos das cidades, comprometendo não somente a distribuição de alimentos e mercadorias, mas também o transporte de grande parte da população.
Sendo o combustível um componente importante no funcionamento da sociedade contemporânea como um todo, este é um item que acaba tendo seu custo elevado dentro de qualquer empresa ou negócio. Em uma empresa de transporte rodoviário, seja público ou privado, o preço do combustível afeta diretamente o preço da passagem, sendo ele responsável por 15% a 20% do preço total (PARANAENSE, 2017) (BARROSO, 2016).
A tarefa de medir o volume de combustível em tanques instalados em postos de abastecimento de veículos automotores é tradicionalmente realizada de forma manual por algumas empresas, sendo necessário utilizar régua de medição de nível para executar esse processo. A continuidade dessa situação tem potencial suficiente para comprometer a eficiência no controle de estoque por avaliação imprecisa, expor o funcionário aos perigos do ambiente com atmosfera explosiva e abre precedentes para a possibilidade de ocorrer fraudes. Assim sendo, é fundamental que se tenha um alto nível de controle e gerenciamento dos combustíveis, tanto como forma eficiente de se reduzir gastos quanto para diminuir desperdícios. Com este intuito, e para obter uma melhor maneira de controlar os níveis de combustíveis em tanques com grande capacidade de armazenamento, foi escolhido o tema “como gerenciar os níveis de combustível com precisão e em tempo real através de um sistema digital”.
Os objetivos desse trabalho são identificar um ponto de melhoria no gerenciamento de combustível em tanques de armazenamento, controlando os níveis em tempo real e evitando desperdícios no abastecimento, elaborar uma proposta de solução e executar um protótipo permitindo que uma empresa de transporte possa avaliar o estoque desse item em tempo real e com precisão, e pedir a entrega sobre demanda da quantidade do produto para abastecimento. Não faz parte deste trabalho questões que envolvem a segurança da aplicação referente à parte física do projeto, pois por se tratar de um sistema que lida com um produto como o combustível, existe uma série de normas, validações, protocolos e
certificações no que se refere à segurança do projeto de um sistema de combustíveis e que não serão tratadas nesse projeto.
Este trabalho está organizado em 8 capítulos. No próximo capítulo é apresentada a fundamentação, pesquisa realizada para o desenvolvimento do projeto. No capítulo 3 são descritos os principais problemas ligados ao tema proposto. Os objetivos gerais e específicos são descritos no capítulo 4. No capítulo 5 são apresentados os trabalhos semelhantes. O projeto de hardware é mostrado no capítulo 6, com detalhamento da estrutura e dos componentes e dispositivos que compõe o sistema físico. No capítulo 7 é apresentado a aplicação desenvolvida para atender os requisitos do trabalho e descrição da parte que se refere ao software. No capítulo 8 é apresentada a conclusão.
2	FUNDAMENTAÇÃO
Neste capítulo inclui uma breve fundamentação esclarecendo como funciona desde o ato de abastecimento de combustível dos tanques de armazenamento, os prejuízos que as empresas de transporte podem ter com o excessivo desperdício desses itens e como é realizado o gerenciamento dos níveis dos produtos nos tanques de estoque pela empresa transporte público de Porto Alegre. Será apresentada uma solução para facilitar o processo de controle em tempo real do produto. Alguns dados foram obtidos pelo autor, que trabalha na Companhia Carris Porto-Alegrense.
2.1	Abastecimento
O abastecimento e o reabastecimento de tanques, veículos e máquinas é um processo quase contínuo, que é necessário e que faz parte da rotina de trabalho de uma empresa de transportes. Por ser tão frequente, algumas vezes acaba-se esquecendo do quanto é perigoso. O perigo está no fato de que a gasolina, álcool ou diesel evaporam rapidamente e seus vapores invisíveis podem se espalhar para locais onde menos espera-se que estejam.
No reabastecimento não há apenas vapores, mas também outros riscos. Assim sendo, é imprescindível tomar bastante cuidado nesta operação. Na tabela 2.1 são descritos os procedimentos básicos para abastecimento de tanques de combustível em postos:
	abela 2.1: Procedimento para abastecimento
Etapa	Descrição
Estacionamento	-	O responsável pelo recebimento de caminhões do posto deve orientar o motorista a estacionar no local de descarga; -	O caminhão deve ser estacionado de forma que possa sair rapidamente em caso de emergência; -	Certificar-se de que não há qualquer fonte (equipamentos elétricos, soldas e etc.) próxima ao local de descarregamento (raio de no mínimo 3 metros) que possa causar explosão.
Segurança	- Análise da documentação; Certificar se há espaço suficiente no tanque do posto para receber a descarga; Garantir que nenhuma chama/faísca ou telefone celular estejam próximos a área de descarga; Checar as aberturas dos tanques que não serão utilizadas (hermeticamente fechados); Verificar se as escotilhas de entrada e válvulas de saída estão lacradas e em bom estado; Solicitar ao motorista que instale todos os equipamentos de segurança; Interromper a operação das bombas interligadas ao tanque que for receber o produto; Efetuar o descarga de apenas um compartimento por vez; Indicar ao motorista a boca de descarga referente ao tanque para cada produto
Conferência	- Procedimentos de análise do material recebido devem ser feitos a fim de averiguar a procedência do produto, como: verificar quantidade do produto no tanque do caminhão, drenar certa quantidade do produto para análise, coletar amostra e anotar volumes e medições.
Análise	- Caso não realize os testes, deve preencher um formulário com os dados enviados pelo distribuidor, assumindo como verídicos e responsabilizando-se por qualquer irregularidade que venha a ser detectada depois. Em caso de qualquer irregularidade detectada na análise, o adquirinte é obrigado a recusar o recebimento do produto.
Descarregamento	-	Verificar se o motorista conectou o cachimbo na boca do tanque subterrâneo; -	Em seguida conectar o engate rápido do mangote na válvula do compartimento que será descarregado;
Término	- Procedimento de verificação da descarga do material devem ser feitos, como: verificar fechamento da válvula do caminhão tanque e desconexão do mangote, averiguar fechamento da boca de descarga do tanque, inspeção visual do interior do tanque do caminhão para certificar-se do total esvaziamento, entre outros.
Fonte: (POSTOS, 2013)
2.2	Medições de nível
A medição e controle de nível é o processo fundamental no gerenciamento de combustíveis. É possível medir a quantidade de produto em um tanque de armazenamento de matéria prima, podendo assim prever quantas produções devem ser realizadas antes de solicitar novamente o enchimento desse tanque, influenciando diretamente na decisão dos gestores de produção, medir a quantidade de produto que está sendo utilizado em um determinado período, medir a quantidade de produto armazenado que será consumido (controle de custos e inventário), em medições de segurança de processos evitando
transbordamentos de produtos perigosos ou quebra de equipamentos.
Existem diversas técnicas de medição de nível que podem ser aplicadas, dependendo das condições de processo, cabendo a empresa e a equipe responsável definir em consenso qual o melhor equipamento a ser utilizado e a precisão que se almeja.
2.2.1	Classificação e tipo de medidores de nível
A medição de nível de um produto em um equipamento ou tanque é efetuado de maneira a manter a variável em um valor fixo, entre valores pré-determinados ou para determinar a quantidade de massa ou volume.
Existem três métodos de medição utilizados (BROCKVELD, 2017) :
2.2.1.1	Medição direta
É a medição que tem como referência a posição do plano superior do produto medido, sendo elas:
•	Boia ou flutuadores
•	Réguas ou gabaritos
•	Visores de nível
2.2.1.2	Medição indireta
É o método de medição que determina o nível em função de uma segunda variável. Exemplos:
•	Ultrassónico
•	Borbulhador
•	Pressão diferencial
•	Capacitivo
•	Por peso (células de carga)
•	Empuxo
•	Radar
Radioativo
2.2.1.3	Medição descontínua
Método de medição pontual, que utiliza sensores que não podem medir continuamente, colocando então um limite físico. São normalmente utilizados em casos de segurança, pois trabalham em um limite máximo de atuação até que ocorra sua falha. Alguns exemplos são:
•	Chave de nível tipo boia magnética
•	Chave de nível por eletrodo
•	Chave de nível capacitiva
•	Chave de nível vibratória
•	Chave de nível tipo boia lateral
•	Chave de nível tipo pêra
•	Chave de nível tipo pá rotativa
2.2.1.4	Utilização
As medições feitas com método direto tem preferência, principalmente por não sofrerem tanta influência do mundo externo, ou seja, por condições que afetam as medições de nível, como a temperatura, pressão, concentração em caso de misturas, e o fato de que não depende de fonte de energia externa para funcionar (em caso de queda de energia ainda é possível realizar a medição local). Entretanto, na maioria das vezes isso não é possível, por isso as medições por métodos indiretos são as mais utilizadas atualmente. Dado o avanço da tecnologia, hoje atingem uma excelente precisão e podem ser instaladas nas mais diversas situações, possuindo recursos para otimizar as medições quando são conhecidas as possíveis interferências.
As medições descontínuas, conforme mencionado anteriormente, são implantadas em medições pontuais, e normalmente são usadas como intertravamento de segurança, principalmente para evitar transbordamento em tanques.
2.2.1.5	Exemplos
Medidores de nível por medição direta
2.2.1.5.1	Medidor de nível tipo régua ou gabarito
Utiliza uma régua graduada com comprimento específico relacionado ao tamanho do tanque ou equipamento, que será colocado no interior do reservatório para efetuar a
Figura 2.1: Tanque com régua graduada d?
Tanque
100% 0%	g	
Fonte: (JUNIOR, 2017)
medição do nível (JUNIOR, 2017). A indicação do nível será efetuada através da leitura direta do comprimento marcado na régua pelo nível. São instrumentos de medição bastante simples e com baixo custo. A graduação da régua pode ser em volume, massa, comprimento ou porcentagem.
2.2.1.5.2	Visor de nível
Medidores que trabalham com o princípio de vasos comunicantes. Um tubo transparente é alocado a partir de uma base até um topo, permitindo a leitura do nível do produto. O nível é observado através de um visor especial, podendo haver uma escala graduada que acompanha o visor (BROCKVELD, 2017).
Figura 2.2
: Tanque com visor de nível
Fonte: (BROCKVELD, 2017)
Medidores de nível por medição indireta
2.2.1.5.3	Ultrassónico
Sensores ultrassónicos são usados para medição contínua de nível sem contato em tanques. Eles trabalham transmitindo um pulso ultrassónico de ar pressurizado para a superfície do material em um vaso ou recepiente, permitindo uma alta precisão a um custo relativamente baixo. O pulso reflete o material e retorna ao sensor na forma de um eco que é recebido por um microfone. O sensor envia os dados de medição diretamente para um sistema de controle ou módulo de exibição, com alguns sistemas permitindo que os dados sejam enviados para um utilitário de operação do PC e software de diagnóstico (CHRISTENSEN, 2014).
O método referido será utilizado no protótipo e no desenvolvimento desse trabalho para monitoramento dos níveis de combustíveis nos tanques de armazenamento.
Figura 2.3: Tanque com sensor de ultrassom
Fonte: (CHRISTENSEN, 2014)
2.2.2	Razões para investimento em medição de nível
Uma Medição de Nível de qualidade baseia-se em três pilares:
•	Aumentar a segurança
•	Reduzir custos
Elevar a eficiência
A eficiência do sistema depende da qualidade da instrumentação, da confiabilidade dos equipamentos e do suporte de fornecedores. A indústria vem aumentado a demanda de controle de processos a cada dia. Manter um controle adequado é cada vez mais importante não apenas para operadores de campo, mas também para toda a empresa, incluindo executivos e gerentes de diferentes setores. Isso é resultado da redução dos custos de produção e do aumento do foco em segurança do trabalho.
O principal objetivo da medição de nível é manter o controle do processo produtivo, seja em volume ou peso. Se a sua medição é eficiente, o resultado será um maior rendimento da produção, pois os processos serão feitos sem interrupções. A Medição de Nível é um elemento fundamental dentro de um sistema de gerenciamento de ativos. Medições de nível mais precisas aumentam significativamente a eficiência do sistema. É possível encontrar níveis de precisão de até 1mm.
Com um controle adequado da medição de nível contínuo, o consumo desta matéria prima poderá ser monitorada remotamente em tempo real pela empresa e, dependendo da aplicação, até mesmo pelo fornecedor para despachar um novo embarque para reabastecimento. É uma otimização que pode ser usada para se ter um diferencial. Além disso, muitos processos necessitam de um fluxo contínuo, entrada e saída de materiais. É inviável obter um fornecimento consistente com taxas variáveis ou se houver incidentes na linha de abastecimento ou no processo logístico.
Outro ponto a se destacar é que a medição de nível também é feita por razão de segurança. O transbordamento acidental de um tanque por uma medição imprecisa pode resultar em grandes prejuízos. Incidentes podem ocorrer com os mais diversos produtos, desde ácidos à diversos outros tipos de materiais comuns na indústria, como inflamáveis, reagentes, entre outros. Prevenir transbordamentos e detectar vazamentos também é importante para cumprir todas as regulações ambientais.
2.3	Armazenamento de combustíveis
Um tanque de armazenamento, também chamado de reservatório, é um recipiente destinado a armazenar fluídos superior ou igual à pressão atmosférica. A maior parte dos tanques de armazenamento são construídos de acordo com os requisitos definidos pelo código americano. Estes tanques podem ter dimensões variadas, indo desde 2 à 3m de diâmetro até 50m ou mais. Como regra geral, estão instalados no interior de bacias de contenção com o intuito de impedir derrames em caso de ruptura do tanque. A sua
construção pode ser feita com teto fixo ou flutuante, externo ou interno, dependendo das características e o tipo de produto a armazenar. É de extrema importância realizar, de forma constante e periódica, a verificação e limpeza das estruturas e dos equipamentos usados para armazenar os produtos. Assim, é garantido que as características dos produtos não irão se alterar, bem como, evitar ou diminuir a possibilidade de contaminação do meio ambiente por degradação dos tanques (LINDENBERG, 2008).
2.3.1	Forma dos tanques
2.3.1.1	Cilíndricos
São todos aqueles cujo formato tem a forma cilíndrica, ou seja, corpo longo e arredondado de igual diâmetro em todo o comprimento. Estes podem ser verticais ou horizontais (LINDENBERG, 2008).
2.3.1.2	Esféricos
Entre todos os tipos de tanques de armazenamento, o mais recomendado e usado para armazenar gás é o tanque esférico. A sua forma geométrica não permite, quando esvaziado, que nenhum resíduo ou sobra de gás permaneça no interior do tanque. Não apresenta vértices, o que possibilita uma libertação mais eficaz do gás contido nele.
2.3.2	Localização de tanques
2.3.2.1	Aéreos
Os tanques de armazenamento aéreo têm forma cilíndrica e podem ser verticais ou horizontais. Os tanques aéreos verticais são utilizados quando o consumo é muito intenso e quando se tem um grande estoque de fluídos. Para receber uma determinada entrega, é preciso possuir mais do que um tanque deste tipo, já que o fluído não irá ser distribuído na hora, sendo necessário deixar o ar sair, e a água e os detritos depositarem-se no fundo. Para aplicações de pequeno consumo, usam-se os tanques aéreos horizontais. Estes podem ser colocados sobre tijolos, bacia metálica ou em uma estrutura de betão armado, e deve ser considerado, na sua instalação, o ângulo de inclinação do seu comprimento no sentido da válvula de drenagem. É também importante que a estrutura seja reforçada com
vigas de betão, e entre o berço e o tanque haja uma manta em borracha ou asfalto. A estrutura do tanque deve ter uma distância de seiscentos milímetros do solo para a pintura, drenagem e verificação do reservatório (LINDENBERG, 2008). Os tanques de armazenamento utilizados na empresa onde trabalha o autor e onde será implementado o protótipo são do tipo aéreo horizontal, conforme mostra a figura 2.4.
Figura 2.4: Tanque aéreo horizontal
Fonte: (ANTAO, 2016)
2.3.2.2	Subterrâneos
Os tanques subterrâneos são usados para o armazenamento de combustíveis fósseis. Esta classe de tanques, fabricados em aço-carbono, ficam sujeitos aos efeitos da corrosão principalmente nos pontos de solda das chapas e conexões. Os principais fatores que influenciam o processo de corrosão estão relacionados com o pH, a humidade e a salinidade do solo onde os tanques estão enterrados.
Fonte: (ARAUJO, 2009)
O próximo capítulo apresenta os problemas relacionados ao estoque e medições de combustíveis em empresas de transporte no Brasil.
3	DETALHAMENTO DO PROBLEMA
3.1	Desperdícios e furtos
Como a grande maioria das empresas de transporte possuem uma frota de tamanho considerável, tanto de veículos utilizados para esse fim quanto de veículos internos, de apoio e também máquinas utilizadas nas mais diversas funções, e uma vez que grande parte dos abastecimentos são realizados pelos caminhões comboio (o que dificulta a supervisão do processo), é cada vez mais comum a adoção de sistemas automatizados para controle. Todavia, ainda não são uma unanimidade, já que muitas empresas ainda fazem o seu controle manualmente.
O controle da empresa onde o autor atua é feito por medição direta com visor de nível externo, através de um pêndulo que indica a medição atual de combustível armazenado no tanque, conforme mostra a figura 3.1. Os níveis de medição de cada tanque são anotados diariamente em uma planilha de papel, onde posteriormente são transferidos para uma planilha eletrônica para controle do setor responsável pelo gerenciamento do combustível.
Figura 3.1: Medidor direto com visor de nível externo
Fonte: O Autor
O controle manual de abastecimento, além de possibilitar a abertura de brechas na segurança do processo - com ocorrência de desvios ou desperdício de combustível -
também compromete de maneira considerável sua eficiência, uma vez que todo o controle é baseado em apontamentos que podem estar incorretos, ilegíveis ou que podem ser extraviados e comprometer a prestação de contas posteriormente. Esse modelo de controle também acaba por envolver mais profissionais, resultando num tempo maior de parada dos veículos para abastecimento, o que impacta diretamente na produtividade da frota.
Figura 3.2: Tanque aéreo horizontal da empresa
f iranga
Fonte: O Autor
Além de o combustível ser um dos maiores insumos de uma empresa de transportes, é um produto facilmente vendido em mercados clandestinos, o que faz do controle deste processo seja essencial para a operação da empresa e para redução de custos por desperdício e roubos, principalmente em caminhões comboios, que podem chegar a operar em um raio grande de distância do alcance dos gestores.
O uso de sistemas automatizados para o controle de abastecimento podem evitar desperdícios e desvios de combustíveis, proporcionando uma economia de até 20% no abastecimento (ALMEIDA, 2016). O controle automatizado ainda não é uma prática comum, porém o mercado de controle de combustível está em uma grande ascensão, e há uma crescente busca por melhores sistemas de gerenciamento de combustíveis com qualidade e precisão nas medições de níveis.
3.2	Impacto financeiro
As empresas de transporte, como qualquer outra empresa, precisam de dinheiro para se sustentar. A diminuição dos prejuízos é fundamental para balancear as contas e
honrar com seus compromissos perante aos colaboradores e fornecedores. A tabela 3.1 apresenta o valor do combustível de óleo diesel para o mês de agosto segundo o Sistema de Levantamento de Preços divulgada pela ANP de 2018, que contém dados do valor do produto para algumas cidades do estado do Rio Grande do Sul no perído.
Tabela 3.1: Tabela de preços (R$) óleo diesel Rio Grande do Sul
Municipio	Vl. Médio Consumidor	Vl. Médio Distribuidor
Passo Fundo	3,652	3,185
Pelotas	3,641	3,125
Porto Alegre	3,569	3,174
Rio Grande	3,632	3,002
Fonte: (ANP, 2018)
Em uma simulação rasa, desconsiderando-se algumas variáveis, com base no consumo médio diário da empresa do autor, onde a frota consome em média 35 mil litros de óleo diesel, teríamos um consumo mensal de 1 milhão e 50 mil litros de combustível. Considerando esse consumo e multiplicando pelo valor médio aplicado no município de Porto Alegre mostrado na tabela 3.1, sendo a compra feita diretamente com o distribuidor, chegamos a um valor de 3.332.700,00 R$ mensais gastos somente com combustível. Conforme mencionado anteriormente, a economia gerada através de um sistema automatizado pode chegar à 20%, ou seja, um valor de 666.540 R$ mensais, sendo esse um prejuízo considerável que faz falta para a empresa e que poderia estar sendo melhor utilizado em outros recursos e/ou em investimentos.
Além desse enorme prejuízo, ainda existe o problema citado no tópico abaixo, relacionado aos contratos entre fornecedores e empresas de transporte público.
3.3	Contratos
Toda pessoa jurídica ou física tem a liberdade de comprar e firmar contratos. Contudo, essa liberdade esta limitada pelas regras do mercado e são diariamente submetidas ao regime jurídico do direito civil e comercial. Na administração pública, e consequentemente em empresas de transporte público, não ocorre dessa maneira, estando essa restrita às condições estabelecidas pelo legislador, para que não haja uma utilização do dinheiro público em interesses pessoais ao invés do interesse da coletividade (FERNANDES, 2016).
3.3.1	Licitações
Vista como um procedimento preliminar de natureza administrativa, é realizada toda vez que a Administração Pública deseja adquirir bens e serviços, realizar obras, fazer alienações e locações, sendo colocada como uma medida preliminar ao contrato.
Sua finalidade é selecionar a proposta de contratação mais vantajosa para a Administração Pública conforme os parâmetros fixados da licitação, ou seja, no edital. Assim, a licitação além de possibilitar uma igualdade de oportunidades entre aqueles que desejam contratar, também permite que seja feita a melhor escolha dentre uma gama de fornecedores, possibilitando a realização da melhor contratação, evitando-se assim apadrinhamentos, favorecimentos e perseguições (FERNANDES, 2016).
Tem como princípios norteadores os da legalidade, isonomia, competitividade, impessoalidade, publicidade e economicidade. Todos são princípios que visam garantir um mecanismo de controle dos recursos públicos, evitando desvios de finalidade por parte dos administradores, combatendo a corrupção, a fuga do dinheiro público e proporcionando que as verbas sejam bem destinadas, sempre visando o interesse comum.
3.3.2	Contratos Administrativos
Após identificar a proposta mais vantajosa, a Administração celebra um contrato com o particular. Este contrato é chamado de contrato administrativo.
Portanto, contrato administrativo é um acordo de vontades celebrado entre a Administração Pública e o particular, sujeito a um regime jurídico peculiar chamado de regime jurídico administrativo, com natureza de direito público (aplicando subsidiariamente princípios do direito privado), através do qual a Administração recebe uma série de prerrogativas e sujeições (FERNANDES, 2016).
O problema surge quando fornecedores em final de contrato deixam de realizar seus deveres pois acreditam que não precisam mais fornecer seus produtos ou serviços tendo em vista que o respectivo contrato está para expirar. Assim sendo, deixam de cumprir totalmente ou parcialmente com o que foi acordado, sabendo que, dependendo da maneira com que foi efetivado o contrato, serão irrisoriamente punidos/multados.
A empresa do autor sofreu com esses problemas pois a manutenção dada aos equipamentos eletrônicos que faziam as medições nos tanques foi cessada. Sem manutenção, os equipamentos pararam de funcionar com o tempo, e a empresa ficou na dependência
da renovação dos contratos para que houvesse manutenção dos equipamentos. Até o presente momento, e sem a renovação do contrato, as medições precisam então serem feitas manualmente, com anotações em planilhas de papel e eletrônica, conforme mencionado. Essa dependência é prejudicial para a empresa. Assim, a ideia do trabalho é fornecer um projeto que utilize a tecnologia a favor da empresa, para que a mesma, além de utilizar mecanismos de medição mais precisos e confiáveis, não fique à mercê de fornecedores passados e futuros.
4	OBJETIVOS
Este capítulo apresenta o propósito deste trabalho.
4.1	Objetivo Geral
O objetivo geral deste trabalho é projetar um sistema para facilitar o controle dos níveis de combustíveis presente em tanques com grande capacidade de armazenamento e evitar o desperdício destes produtos, além de demonstrar a viabilidade de execução de um projeto que vise aumentar a confiabilidade e precisão no processo de medição de níveis nos tanques com combustíveis, bem como mostrar as vantagens desse tipo de procedimento e razões para investir nesse sistema. Ainda, ajudará a aprofundar os conhecimentos no desenvolvimento de uma aplicação que utiliza microcontroladores e sensores para captação de dados físicos, do mesmo modo que no desenvolvimento de um software que utiliza e transforma esses dados em informação útil para o gerenciamento. Para atingir este objetivo, é necessário coletar as informações referentes aos tanques de armazenamentos, aos processos de medição de nível, aos combustíveis utilizados, aos microcontroladores e sensores a serem empregados no processo de implantação do projeto e ao procedimento de comunicação e transferência de dados do microcontrolador para a aplicação.
Conforme citado na introdução, este trabalho não aborda as questões ligadas a segurança de um projeto de um sistema de gerenciamento de combustíveis, visto que, por se tratar de um produto extremamente perigoso, existe uma gama de normas, protocolos, validações e certificações que envolvem o quesito segurança relacionado a esse processo. A passagem de um protótipo do projeto para uma aplicação real que envolve os tanques de armazenamento de combustíveis exigiria o atendimento aos requisitos mínimos das normas segurança e também das certificações necessárias para que fosse possível implementar o sistema em definitivo.
No tópico a seguir são listados os objetivos específicos.
4.2	Objetivos específicos
Para o desenvolvimento deste trabalho, destacam-se os seguintes objetivos específicos a serem atingidos:
•	Aplicar os conhecimentos adquiridos durante o curso de Ciências da Computação da UFRGS;
•	Exercitar estes conhecimentos através de uma necessidade prática e real;
•	Desenvolver uma aplicação que contemple a solução apresentada;
•	Avaliar a aplicação desenvolvida.
O próximo capítulo apresenta ferramentas similares e um comparativo entre eles e a proposta deste trabalho.
5	TRABALHOS SIMILARES
Através de uma busca na Internet foram encontradas seis ferramentas para medição de níveis. Entre elas estão a NVISION da NIVELCO, TankMaster da Emerson, software proprietário da Endress+Hauser, SiloTrack da MonitorTech, módulo de gerenciamento de níveis da SMAR, e a WebCal da FLOWLINE. Neste capítulo foram elencados três sistemas para gerência do processo de controle e gerenciamento de níveis de produtos mais completos - NIVISION, SiloTrack e WebCal.
Também foram encontrados dois trabalhos acadêmicos que são similares ao projeto proposto. Um deles é o trabalho de conclusão de curso da UFRGS para o curso de Engenharia da Computação, do então aluno Lucas Brollo Alpi, no ano de 2016. O segundo trabalho fez parte do primeiro Simpósio de Engenharia Eletrónica da Universidade Unianchieta, no ano de 2015, feito pelos participantes Antonio P. Alfredo, Hipolito A.S Gomes e Ailton Cavali.
Com a pesquisa sobre os trabalhos similares foi possível obter um melhor entendimento dos processos referentes as medições de nível em tanques de armazenamento e os serviços fornecidos para melhor precisão, controle e diminuição de desperdícios.
5.1	NIVISION
O NIVISION foi projetado e é mantido pela NIVELCO Group, que é uma empresa familiar de terceira geração, com sede em Budapeste, Hungria, que mantém escritórios, instalações de desenvolvimento e produção da empresa. A empresa, com uma tradição que remonta a sete décadas, tem 35 anos de experiência em desenvolvimento e produção, produzindo instrumentos de medição de temperatura e nível.
O NIVISION foi desenvolvido para aplicações desktop, onde o software pode ser instalados em ambientes Windows 2000, XP, Vista, 7, 8 e 10.
O software permite comunicação com transmissores ou chaves inteligentes e controladores, configuração dos tanques de armazenamento e dos transmissores, análise em tempo real das medições dos níveis dos produtos, bem como o registro dos dados e manipulação do banco de dados. Além disso, permite conexão remota com a Internet.
O sistema possui um módulo de visualização dos tanques com design gráfico de qualidade, onde é possível monitorar os volumes. O software é customizado para observação de processos industriais, monitoramento online de valores medidos e dos tanques
de armazenamento, possuindo sistemas de alarmes e gestão de inventário (NIVELCO, 2018).
Figura 5.1: software NIVELCO
Fonte: (NIVELCO, 2018)
5.2	SiloTrack
A MonitorTech é uma empresa estadounidense que por 60 anos tem fornecido solução práticas para medição de níveis para gestão de inventário e para o armazenamento e processamento de diversos produtos.
O software de gerenciamento de inventário SiloTrack é um software de aplicativo baseado em PC que fornece aos usuários uma interface gráfica flexível para sensores de monitoramento de inventário, baseada em seus próprios sensores que utilizam radar de onda guiada contínuo para medição de nível.
O software SiloTrack inclui uma versão de servidor e cliente. Juntos, oferecem capacidade de monitoramento e gerenciamento de inventário para um número vasto de usuários. Os usuários podem ser internos e externos, permitindo implementar o monitoramento de inventário remoto e até um inventário gerenciado pelo fornecedor. A parte servidor do software é a principal interface de operação para os sensores. Este software é instalado no PC no qual a rede de sensores de comunicação será conectada. Toda a configuração do aplicativo é feita com o software do servidor (SILOTRACK, 2018).
O software fornece aos usuários remotos acesso ao sistema de monitoramento e podem interagir com o servidor via LAN, WAN e/ou Internet. O tipo e o método de conexão são estabelecidos no software do cliente. O servidor permite que se estabeleça
segurança para acesso conforme permissões do cliente.
Figura 5.2: software SiloTrack
r-—
V * I
Ho
OMl-up OH hMnwHWAH :	t
Fonte: (SILOTRACK, 2018)
5.3	WebCal
A WebCal foi desenvolvida pela FLOWLINE, que é uma empresa dos Estados Unidos que fornece soluções que medem inventários de tanques e automatizam esses processos. Possuem módulos que garantem segurança no local de trabalho e protegem o meio ambiente. Entre seus clientes estão fabricantes industriais, distribuidores de produtos químicos, municípios e fornecedores de energia e de alimentos, que utilizam seu software para gerenciar com segurança e eficiência seus ativos líquidos e sólidos.
O software WebCal é um programa utilitário de PC que permite aos usuários configurar e testar os sensores de nível, produzidos pela própria empresa, compatíveis com seus requisitos de medição e controle. Foi desenvolvido para aplicações desktop, onde o software pode ser instalados em ambientes Windows XP, Vista, 7, 8 e 10.
O sistema permite a configuração de sensores e de níveis, pontos de ajuste para medição e requisitos de controle, suportando diversos tipos de configurações. É possível alterar a saída do sinal do sensor de distância para se adequar às formas de cada tanque (FLOWLINE, 2018).
Figura 5.3: software WebCal
Fonte: (FLOWLINE, 2018)
5.4	Trabalho de conclusão de curso
O trabalho do aluno de Engenharia da Computação da UFRGS, Lucas Brollo Alpi, se refere à medição de nível em dois tanques acoplados. O título do trabalho é Desenvolvimento de uma Planta Didática para o Controle de Nível de Tanques Acoplados (ALPI, 2016). Este trabalho detalha bastante os aspectos de engenharia envolvidos no processo de controle de tanques acoplados. A medição de nível é feita somente no segundo tanque, e também utiliza um sensor de ultrassom para medir o volume medido.
Figura 5.4: Trabalho de
conclusão desenvolvido por Lucas Brollo Alpi
Tinqua 1
Târvqu* 2

Fonte: (ALPI, 2016)
5.5	Artigo em Simpósio de Eletrônica
O trabalho desenvolvido pelos participantes Antonio P. Alfredo, Hipolito A.S Gomes e Ailton Cavali, no 1o Simpósio de Eletrónica da Universidade Unianchieta, trata sobre medição de nível em um recepiente com volume máximo de 5L. O trabalho possui o título de Medição Volumétrica com Módulo Ultrassónico (ALFREDO; GOMES; CAVALI, 2015). O trabalho descreve o desenvolvimento de um circuito eletrónico desenvolvido por eles, com bastante foco na parte eletrónica do projeto, mas que utiliza também um sensor ultrassónico para medir o volume. O trabalho deles foi de grande ajuda no que se refere ao cálculo de volume em tanques horizontais.
Figura 5.5: Artigo Antonio P. Alfredo, Hipolito A.S Gomes e Ailton Cavali, 1o Simpósio de Eletrónica da Universidade Unianchieta
Fonte: (ALFREDO; GOMES; CAVALI, 2015)
6	PROJETO EM HARDWARE
O protótipo concebido consiste basicamente na utilização de um microcontrolador e alguns sensores ultrassónicos para medição dos níveis nos tanques, no qual o microcontrolador fará a comunicação e transmissão dos dados lidos nos sensores para a aplicação, que se encarregará de mostrar a informação de modo que a visualização seja simples e eficiente.
6.1	Arduíno
O Arduíno é uma plataforma eletrônica de código aberto baseada em hardware e software. Ou seja, o Arduíno é uma plataforma formada por dois componentes: a placa, que é o hardware utilizado para construir projetos e a IDE Arduino, que é o software onde são escritos os programas que serão codificados para que a placa execute o que for solicitado.
O hardware é composto por um microcontrolador Atmel e circuitos de entrada e saída. A placa é programada via IDE, utilizando uma linguagem baseada em C/C++, sem a necessidade de equipamentos extras além de um cabo USB (SOUZA, 2013).
O Arduíno que será utilizado no projeto é o Arduíno Uno R3, que é uma placa de microcontrolador baseado no ATmega328. Ele tem 14 pinos de entrada/saída digital (dos quais 6 podem ser usados como saídas PWM), 6 entradas analógicas, um cristal oscilador de 16MHz, uma conexão USB, uma entrada de alimentação, uma conexão ICSP e um botão de reset (ARDUINO, 2018).
Figura 6.1: Arduíno UNO R3
mÓwÉRWTÑfiLOGjjÑj
Fonte: (ARDUINO, 2018)
O objetivo deste trabalho não é aprofundar totalmente conhecimentos específicos em relação ao Arduíno, como sua composição de circuitos, alimentação, arquitetura, características especiais, etc, mas sim utilizar o componente explorando suas vantagens como fácil utilização e custo baixo.
6.2	Sensores
Para este trabalho, e com o objetivo de medir os níveis de combustíveis presentes nos tanques de armazenamento, serão utilizados sensores ultrassónicos. O dispositivo utilizado será o sensor ultrassónico HC-SR04, é um componente muito comum em projetos com Arduíno, e permite que sejam efetuadas leituras de distâncias entre 2 cm e 4 metros, com precisão de 3 mm.
Figura 6.2: Sensor ultrassónico HC-SR04
Fonte: (ELECTRONICS, 2018)
O sensor ultrassónico usa o método de TOF para medição de distância, que se refere ao tempo gasto para um pulso viajar do transmissor para um objeto observado e de volta ao receptor. Ou seja, se baseia no envio de sinais ultrassónicos pelo sensor, que aguarda o retorno (echo) do sinal, e com base no tempo entre envio e retorno, calcula a distância entre o sensor e o objeto detectado (KALEEMUDDIN; BOSE; RAMACHAN-DRAN, 2016).
Primeiramente é enviado um pulso de 10 microssegundos, indicando o início da transmissão de dados. Depois disso, são enviado 8 pulsos de 40 KHz e o sensor então aguarda o retorno (em nível alto/high), para determinar a distância entre o sensor e o objeto, utilizando a equação
T * V
Distancia =	(6.1)
onde T é o tempo echo em nível alto e V é a velocidade do som (THOMSEN, 2011).
6.2.1	Medição de nível utilizando sensores ultrassônicos
A ideia por trás dos métodos sem contato é medir a distância entre o transmissor e um objeto, no caso um fluído (combustível). Assim, o objetivo é emitir pulsos ultrassôni-cos curtos e medir o tempo de viagem desse pulso do transmissor (sensor) para o líquido e de volta para o mesmo. O pulso ultrassônico vai refletir a partir do nível do líquido, e isso acontece devido à mudança de densidade do meio de viagem (pulso ultrassônico primeiro irá viajar através do ar e quando atingir o líquido será refletido). Como o fluído tem densidade mais alta, a maior parte do pulso é refletida (PONGRACZ, 2015).
Figura 6.4: Medição de nível de líquido com sensor de ultrassom
Fonte: (PONGRACZ, 2015)
Para medição de volumes, é preciso conhecer as dimensões do recepiente onde será armazenado o líquido. As dimensões dependem do tipo de recipiente que será utilizado. Caso seja utilizado um recipiente retangular, precisa-se conhecer altura, largura e comprimento. No entanto, se utilizado um tanque cilíndrico, é necessário saber o raio do
tanque, bem como sua altura. E assim por diante, conforme o tipo de tanque de armazenamento.
6.2.2	Cálculo volumétrico do cilindro horizontal
A medição do volume de uma substância armazenada em um tanque pode ser obtida através do cálculo de seu próprio volume. Para obter o resultado desse cálculo, é necessário saber as dimensões do tanque e acompanhar, com um sensor, o nível desse líquido. Todavia, para um tanque cilíndrico na posição horizontal, o cálculo se torna um pouco mais complexo. A Figura 6.5 ilustra esse tanque e suas variáveis para desenvolvimento do cálculo volumétrico.
O volume da parte preenchida é:
Volume = A * L
Temos que:
A' = tf, -	)
Podemos usar as equações geométricas:
cos$ =
R - y
R
(6.2)
(6.3)
(6.4)
Assim:
y = 2R — h
cos$ =
(6.5)
(6.6)
h — R
R
Pela transformação trigonométrica:
, h - R	(h - R)
cosip =	&lt;p = arccos
(6.7)
Chegamos ao cálculo do volume do cilindro horizontal:
h - R
R
h - R
R
Volume = LR2{arccos(
) - -sen[2(arccos(
)]}
(6.8)
(ALFREDO; GOMES; CAVALI, 2015)
6.3	Arquitetura
A ligação do sensor ao Arduíno vai utilizar, além dos pinos de alimentação (5V e GND), os pinos digitais PWM, podendo ser de 2 a 13. Como exemplo da imagem, estão ligados os pinos 4 para o Trigger e 5 para o Echo. A alimentação é feita pelo pino 5V do Arduíno:
Figura 6.6: Ligações do Arduíno com o sensor HC-SR04
Fonte: (THOMSEN, 2011)
O projeto contará com 3 sensores HC-SR04, um em cada tanque de armazenamento de combustíveis, para que sejam feitas as medições necessárias. O microcontrola-dor fica responsável pelo envio dos dados para a aplicação. Como teste de arquitetura, é possível colocar todos os sensores sendo alimentados pelo pinos 5V e GND do Arduíno, bem como o Trigger conectado a todos os sensores pelo mesmo pino PWM, conforme mostra a figura 6.6 (no caso, para o pino 8). Os pinos que se diferenciam são os pinos de Echo utilizados para leitura dos níveis de cada sensor, sendo assim, os pinos devem ser
colocados em diferentes pinos PWM (no caso, 5, 6 e 7).
Figura 6.7: Simulação de ligações do Arduíno com 3 sensores HC-SR04
Fonte: O Autor
A arquitetura geral do projeto é composta pelo microcontrolador, os sensores que serão localizados nos tanques, e a comunicação com a aplicação. A aplicação será discutida no próximo capítulo.
Vale salientar que na passagem deste protótipo para uma aplicação real nos tanques de armazenamento, tendo em vista a distância que existe entre os tanques, seriam necessário 3 microcontroladores do tipo Arduíno, cada qual com seu sensor ultrassónico. A aplicação continuaria funcionando da mesma maneira conforme descrito nos próximos tópicos e capítulos (já que funciona alimentando um banco de dados), bastando alterar apenas algumas porções do código e a tabela de medições do banco de dados.
6.4	Esquema prático
O esquema prático do protótipo consiste na instalação dos fios que ligam os sensores ao microcontrolador Arduíno. Isso é feito através de uma protoboard. Conforme mencionado anteriormente, os fios que devem ser ligados aos sensores ultrassónicos são os fios de alimentação VCC e GND, e os fios de Echo e Trigger.
Figura 6.8: Arquitetura geral do projeto
Fonte: O Autor
6.4.1	Esquema Arduíno
Assim, os fios de alimentação são instalados no Arduíno pelos pinos de POWER e são disponibilizados nas linhas verticais da protoboard para uso nos 3 sensores. O fio de Trigger é colocado no pino PWM de número 4, enquanto os fios de Echo são instalados nos pinos 5, 6 e 8 do Arduíno, conforme mostra figura 6.8. Por uma questão de simplicidade e para uma melhor visualização, os fios foram separados em cores, onde a cor preta é utilizada para GND e a vermelha para VCC, enquanto os fios de Trigger são verdes e os de Echo são amarelos.
Figura 6.9: Esquema Arduíno
Fonte: O Autor
6.4.2	Esquema protoboard
Na protoboard, os pinos de alimentação VCC e GND são colocados nas conexões verticais da placa para utilização por todos os sensores. O fio de Trigger é distribuído nas conexões horizontais da protoboard, bem como os fios de Echo. O fio de Trigger pode ser utilizado por todos sensores, enquanto os fios de Echo precisam ser únicos para cada sensor ultrassónico pois estes farão a medição do nível através do sinal de Echo que cada um recebe. A figura 6.9 mostra como fica o esquema na protoboard, e a figura 6.10 mostra como ficou implementado o esquema na prática.
Figura 6.10: Esquema na protoboard
Fonte: O Autor
Vcc			*
GND			/•
Echo (P5)			
Trigger			• • ■ • • •
Echo (P6)			■ • • •
			:: •
	cn (D		
	e 2		■ •
	(0 (D		•
	S c		* • J
	o o		• •
			■ •
6.4.3	Esquema implementado
Na prática, foram utilizados fios macho/macho para as conexões entre Arduíno e a placa da protoboard, e também nas conexões internas (horizontais) da protoboard. Para conectar esses fios aos sensores, com o intuito de instalar os sensores nos tanques de armazenamento posteriormente, foi preciso de cabos mais longos e que pudessem ser conectados aos pinos de cada sensor. Para isso, foram utilizados fios macho/femea.
Como protótipo para idealizar os tanques de armazenamento, foram utilizadas 3
6.11:
na
Fonte: O Autor
garrafas de plástico com capacidade de 1 litro, colocadas lado a lado e suportadas em uma elevação para representar a realidade dos tanques aéreos horizontais. As garrafas possuem um raio de 4cm (diâmetro de 8cm), e um comprimento de 20cm. Essas dimensões serão usadas para calcular o volume medido nos tanques.
Os sensores foram implantados no topo de cada garrafa. A figura 6.11 demonstra como ficou o protótipo do projeto com as conexões entre Arduíno, protoboard e os sensores nos tanques. Para preenchimento dos tanques, foram instalados funis em cada um deles para realização dos testes de medição de nível.
Figura 6.12: Esquema implementado na prática com tanques
Fonte: O Autor
6.5	Análise do código fonte no microcontrolador
A IDE Arduíno possui uma estrutura padrão de programa contendo as funções setup() e loop().
•	setup() - É nessa parte do programa são configuradas as opções iniciais do programa: os valores iniciais de uma variável, porta que serão utilizadas como entrada ou saída, mensagens para o usuário, etc. Essa função irá executar apenas uma vez no início do programa.
•	loop() - Diferente da função setup(), essa parte do programa repete uma estrutura de comandos de forma contínua ou até que alguma comando de “parar” seja enviado ao Arduíno.
O fluxograma abaixo demonstra intuitivamente como funciona o programa.
Figura 6.13: Fluxograma do algoritmo do projeto
Começo^

Inicialização das variáveis globais e configuração dos pinos de Trigger e Echo dos sensores
setupO
Configura a taxa de dados em bits por segundo (baud) para transmissão de dados serial
Realiza leitura da
distância sensor 2
Armazena volume tanque2
&gt; 81 mm?
Zera vanáveis
Realiza leitura da distância sensor 1
f Armazena/ volume I tanquel y ó
Realiza leitura da distância sensor 3 í Armazena volume tanque3
Envio das informações para a aplicação
•Sim-&gt;| h = 80mm [
L = 200mm
R = 40mm
Vol = Fórmula Volume
Fonte: O Autor
Primeiramente, é importada a biblioteca Ultrasonic.h, que foi importada para a pasta Libraries do diretório do Arduíno no computador. Essa biblioteca é parte fundamental para o funcionamento dos sensores, e é uma biblioteca minimalista para módulo de ultrassom para Arduíno, sendo um módulo de ultrassom para trabalhar com os sensores de maneira simples e leve. Compatível com os dispositivos HC-SR04, Ping e sensor Seeed Studio. Esta biblioteca tem como objetivo a eficiência de recursos e simplificar o acesso aos dados.
O programa começa inicializando as variáveis globais como volume dos tanques, distâncias lidas dos sensores, raio e comprimento dos tanques, etc, e configurando os pinos de Trigger e Echo dos sensores. Em seguida, são declarados os sensores que usarão a função da biblioteca para leitura da distância (função distanceRead(J). Essa função tem por padrão a leitura da distância em centímetro, bastando passar como parâmetro a variável CM, que é definida como o inteiro 28. Todavia, o módulo foi alterado para permitir a leitura da distância em milimetros. Com apenas algumas modificações no cálculo, é possível fazer a leitura em milimetros. Para que a função identifique que deve realizar o cálculo da distância em milimetros, foi necessário fazer a passagem de parâmetro com outro inteiro, no caso ’MM’, definido como 58.
Posteriormente, o programa utiliza sua primeira função setup() e realiza a configuração da taxa de dados em bits por segundos para a transmissão de dados serial. Essa configuração é feita pelo função Serial.begin(9600). Essa utilização da leitura serial é feita por motivos de testes, e foi utilizada em todos os testes de leitura dos valores de medição lidos nos sensores através do Serial Monitor.
Após o setup(), o programa entra na função loop(), que é um laço contínuo que executa no programa indefinidamente ou até um pedido de parada. Quando entra no laço, as variáveis como volume e leituras das distâncias são zeradas. Feito isso, o programa começa a leitura da distância do sensor 1, que está localizado no topo do tanque 1. Através da distância lida é possível efetuar o cálculo do volume de líquido no tanque, já que temos as dimensões de raio e de comprimento do tanque, bem como a distância entre o sensor e o líquido. Caso o valor da distância lida seja maior que o diâmetro do tanque, então a variável da distância é atribuída como o tamanho total do diâmetro, e assim, assume-se que o tanque está vazio, ou seja, a medição deve apontar 0 Litros. Essa diferença pode acontecer sutilmente (questão de milimetros), para mais do que o total do diâmetro, e deve-se a posição do sensor estar um pouco acima do topo. Efetuado o cálculo do volume no tanque 1 e armazenado seu valor, o programa segue com as leituras das distâncias dos
Figura 6.14: Modificação em Ultrasonic.h para calcular distância em mm
Fonte: O Autor
sensores 2 e 3, e calcula os volumes presentes em cada tanque, armazenando seus valores.
Por último, com os valores medidos nos três tanques, é preciso enviar os dados armazenados para que possam ser visualizados pela aplicação. O envio das informações referentes às medições faz parte da comunicação entre o microcontrolador Arduíno e o servidor de aplicação. Esse tópico de comunicação é uma das partes essenciais do projeto, e será discutido mais adiante neste capítulo.
Figura 6.15: Modificação em Ultrasonic.cpp para calcular distância em mm
*C:\Program Files (x86)\Arduino\libraries\Ultrasonic-2.1.0\src\Ultrasonic.cpp - Notepad++ [Administrator]
Arquivo Editar Localizar Visualizar Formatar Linguagem Configurações Tools Macro Executar Plugins Janela ?
a « 0 Q &amp;amp; I «V fi1 3 C | tt | í '	Ijfl s £	• I ® a &gt; B ©
ich : Ed Ultrasonic.cpp £3
Ultrasonic.cpp
Library for Ultrasonic Ranging Module created 3 Apr 2014 by Erick modified by Erick modified by Erick modified by Eliot
Simões 23 Jan Simões 04 Mar Simões 15 May Lim
(github:	@ErickSimoes
2017	
(github:	@ErickSimoes
2017	
(github:	@ErickSimoes
2017	
(github:	Seliotlim)
in a minimalist way
I twitter: QAloErickSimoes)
I twitter: @AloExickSimoes)
I twitter: @AloExickSimoes)
* Released
*/
♦include&amp;lt;Ardumo.h&gt; ♦include "Ultrasonic.h
into the MIT License.
FlUltrasonic:¡Ultrasonic(uint8_t trigPin, uint8_t echoPin, unsigned long timeOut) { trig = trigPin; echo = echoPin;
threePins = trig = echo ? true : false;
pinMode(trig, OUTPUT);
pinMode(echo, INPUT); timeout = timeOut;
Aunsigned int Ultrasonic:¡timing() if (threePins)
pinMode(trig, OUTPUT);
Í
digitalWrite(trig, LOW) ; delayMicroseconds( ); digitalWrite(trig, HIGH); delayMicroseconds(	);
digitalWrite(trig, LOW);
if (threePins) pinMode(trig
, INPUT);
return pulseln(echo, HIGH, timeout); // duration
I-.}
Aunsigned int Ultrasonic::distanceRead() (
A /*
*	If the unit of measure is not passed as a parameter,
*	by default, it will return the distance in centimeters.
*	To change the default, replace CM by INC.
- */
return distanceRead(CM);
J Modificação do código para cálculo em mm
//distance by divisor
Figura 6.16: Programa principal do projeto na IDE Arduino
Fonte: O Autor
6.6	Testes realizados
Os testes foram realizados ao adicionar água em cada tanque na quantidade de 200ml por vez, até atingir o máximo de 1 litro em cada tanque. Dessa maneira, foi possível anotar os valores de volume em cada recipiente, adicioná-los em uma tabela, juntamente com um cálculo de erro, e comparar os valores medidos com a realidade.
A tabela 6.1 apresenta o resultado dos testes aplicados na medição de nível dos tanques.
Tabela 6.1: Tabela das mec		ições de volume medido e real	
Vol. Real(ml)	Vol. Medido Tq.1	Vol. Medido Tq.2	Vol. Medido Tq.3
0	0	0	0
200	220	210	230
400	420	410	400
600	580	600	570
800	780	770	750
1000	1010	850	910
Fonte: O Autor
Ainda, é possível aproximar, através de um gráfico comparativo, os volumes reais e os volumes que foram medidos no tanques.
Figura 6.17: Programa principal do projeto na IDE Arduino
Medições volumétricas
vol.real tanquel tanque2 tanque3
1250
IMO
750
medições
Fonte: O Autor
6.7	Resultados e discussões
De acordo com os valores observados, conclui-se que o erro obtido nas medições deve-se ao formato das garrafas plásticas, que não são uniformemente cilíndricas de ponta a ponta. A área do bico possui alguns centímetros a menos que a área de sua base, e um formato diferente, que vai afinando até a ponta.
Observou-se também que quando a garrafa está cheia, há oscilação dos valores lidos pelos sensores. Observa-se uma pequena oscilação que deve ser provocada devido as garrafas serem fechadas e pequenas, visto que a medição depende da velocidade do som.
O módulo ultrassónico possui relativamente uma boa precisão, além de ter um custo baixo. Os sensores não propiciaram nenhuma complexidade adicional na interface com o microcontrolador.
A fórmula do volume para tanques cilíndricos posicionados na horizontal, e que foi implantada no microcontrolador, mostrou-se bastante útil, e cuja precisão depende somente do formato cilíndrico do recepiente que vai armazenar o líquido, do seu tamanho e da precisão da leitura da distância dos sensores.
6.8	Comunicação entre hardware e software
A comunicação entre o hardware e o software é uma das partes mais críticas do projeto, uma vez que é nela que as informações fluem através do sistema, ou seja, é nesse momento que ocorre a transmissão dos dados lidos nos sensores para a aplicação, para registro das informações no banco de dados e visualização dos mesmos no software desenvolvido.
6.8.1	Ethernet Shield W5100
O Shield Ethernet W5100, consiste em um shield que possui dois módulos, um módulo Ethernet, que irá permitir a conexão do Arduíno com uma rede local e a internet, e um módulo para cartão micro SD. Sendo assim, é perfeitamente possível utilizar este módulo somente para ler/escrever dados em um cartão de memória ou apenas para conectar o Arduino UNO a uma rede local. Dessa forma, pode-se armazenar dados em um
servidor online ou criar um servidor Web dentro do próprio microcontrolador Arduíno.
É baseado no chip ethernet da WIZnet ethernet W5100, que oferece acesso à rede (IP), utilizando os protocolos UDP/TCP, e pode ser facilmente utilizado com auxílio das bibliotecas Ethernet Library e SD Library. Este shield suporta até quatro conexões de socket simultâneas.
Figura 6.18: Ethernet Shield W5100
Fonte: (FILIPEFLOP, 2018)
O W5100 pode ser facilmente integrado ao Arduíno, bastando conectar os pinos de acordo com suas posições e, assim, sobrepor um ao outro. Desse modo, as conexões dos fios com os pinos dos Arduíno precisaram ser retiradas e recolocadas nos pinos do Shield. A figura 6.19 mostra como fica esse módulo integrado ao Arduíno.
Fonte: O Autor
6.8.2	Comunicação
Para conectar o Arduíno à rede local, é preciso ligar um cabo RJ-45 (cabo comum de rede) ao shield W5100 e o conectar com o roteador da rede local. Feito essa conexão, é preciso primeiramente verificar se o módulo está funcionando corretamente. Para isso, através de um simples exemplo da própria biblioteca Ethernet, podemos descobrir se foi atribuído por DHCP um IP correto ao shield. Caso a conexão seja feita de maneira correta, e o módulo esteja funcionando, será atribuído um IP, que utilizaremos no código do projeto para fazer a conexão com o servidor da aplicação. O endereço IP do servidor também é necessário para estabelecer a transmissão de dados corretamente.
Figura 6.20: Esquema de comunicação
Fonte: O Autor
Figura 6.21: Esquema de comunicação na prática
Fonte: O Autor
Para que os dados fossem transmitidos corretamente, foi necessário, além de adicionar no código os comandos para conexão do Arduíno à rede local, criar uma página em PHP chamada data.php, que recebe os dados através do método GET. Esse método utiliza a própria URL para enviar dados ao servidor, fazendo com que o navegador pegue as informações e coloque junto com a URL, separando o endereço da URL dos dados do formulário por um “?” (ponto de interrogação). A página utilizará os dados lidos da URL para fazer a inserção das informações no banco de dados.
Com a página de recebimento e registro dos dados criada, é possível pelo código utilizado no Arduíno e através da rede local, chamar essa página pela rede e adicionar os dados lidos pelos sensores (volume de cada tanque) à URL, para que o processo de armazenamento no banco seja feito pela página. Esse esquema de leitura dos sensores e o processo de chamada da página é executado pelo microcontrolador a cada 10 segundos, portanto, temos esses intervalo de inserção de registros no banco de dados.
6.8.3	Leitura dos dados pela aplicação
Uma vez que os dados foram inseridos no banco, basta que a aplicação faça a leitura do último registro lido pelo hardware que tenha sido armazenado no banco, para se ter a informação em tempo real dos volumes contidos nos tanques. Os demais registros podem ser utilizados futuramente para desenvolvimento de relatórios, para manutenção do histórico dos volumes e também para montar os gráficos.
Com a informação dos últimos registros inseridos no banco, é preciso então somente disponibilizar esses dados para visualização. Na página de consulta online da aplicação, isso é feito utilizando uma consulta ao banco de dados pelo último registro atualizado na tabela de medições, e, em seguida, armazenando essas informações em arquivos texto (por facilidade de leitura da aplicação através de código JavaScript), colocando essa informação para visualização na página.
7	PROJETO EM SOFTWARE - APLICAÇÃO
Este tópico descreve os aspectos gerais do sistema que dão forma ao projeto e implementação.
7.1	Definição da arquitetura do sistema
A aplicação contará com uma arquitetura cliente-servidor, onde o servidor será um servidor web, e o cliente poderá fazer a conexão e as requisições através da utilização de um navegador (browser).
7.1.1	Arquitetura cliente-servidor
O modelo cliente-servidor é uma estrutura de aplicação distribuída que compartilha as tarefas entre os que fornecem um serviço, chamados de servidores, e os requisitantes dos serviços, chamados de clientes.
Geralmente os clientes e servidores comunicam-se por uma rede de computadores em computadores distintos, todavia ambos podem residir em um mesmo computador.
Um servidor é um hospedeiro que está executando um ou mais serviços que compartilham recursos com os clientes. Um cliente não compartilha recursos, porém pode solicitar um conteúdo ou função de um servidor. Os clientes iniciam sessões de comunicação com os servidores, enquanto estes ficam no aguardo de requisições de entrada de clientes.
7.1.1.1	Vantagens
A arquitetura cliente-servidor permite que as responsabilidades e funções de um sistema possam ser distribuídos entre vários computadores independentes de uma rede. Assim, cria-se uma vantagem dessa arquitetura: maior manutenibilidade, ou seja, é mais fácil de executar manutenções.
Todos os dados são armazenados nos servidores, que no geral possuem controles de segurança melhores do que a dos clientes. Os servidores controlam melhor o acesso a recursos, podendo garantir que somente os clientes com credenciais verificadas possam acessar e alterar certas informações;
Figura 7.1: Arquitetura cliente servidor
Clientes
Fonte: O Autor
Através de um armazenamento de dados centralizado, as atualizações dos dados são mais fáceis de administrar em comparação com a arquitetura P2P. Em P2P, atualizações de dados podem precisar ser distribuídas e aplicadas a cada nó na rede, consumindo bastante tempo e sendo passível de inclusão de erros, já que podem haver vários nós na rede;
Diversas tecnologias avançadas de cliente-servidor estão disponíveis e foram projetadas para garantir a segurança, facilidade de interface do usuário e facilidade de uso, funcionando com variados tipos de clientes e com capacidades diferentes.
7.1.1.2	Desvantagens
Clientes podem somente fazer solicitações de serviços, todavia não podem oferecê-los para outros clientes. Sendo assim, existe um sobrecarregamento do servidor, já que quanto mais requisições de clientes, maior é o número de informações, e maior será a demanda, portanto, mais banda será consumida. Assim, um servidor poderá ficar sobrecarregado se receber muitas solicitações simultâneas de clientes a mais do que consegue suportar;
Ainda, o modelo cliente-servidor não possui a robustez de uma rede P2P. Nessa arquitetura, caso um servidor crítico falhe, os pedidos dos clientes não conseguirão ser en-
tregues. Por outro lado, nas redes P2P, os recursos são distribuídos entre os diversos nós. Desse jetio, mesmo que uma ou mais máquinas falhem no momento de uma requisição, as demais ainda terão as informações necessárias para completar a operação.
7.2	Definições das tecnologias utilizadas
7.2.1	Banco de Dados
O MySQL é o SGBD que será utilizado neste trabalho. Utiliza uma linguagem de consulta estruturada, ou seja, uma linguagem padrão de gerenciamento de dados, que é usada exclusivamente para criar tabelas, manipular os dados das tabelas e principalmente, consultar os dados. Sua escolha deve-se ao fato do autor já ter um contato prévio com a ferramenta, facilitando assim possíveis manutenções. É um bancos de dados robusto em questão de segurança e capacidade de dados, sendo bastante utilizado na Web, além de ser gratuito.
O uso do banco de dados é utilizado nesse trabalho na parte de login de usuários, uma vez que para validar o acesso à aplicação, é necessário fazer uma consulta ao usuário e senha na tabela de usuários presente no banco, bem como no registro dos dados de volumes lidos pela parte de hardware do projeto, onde o registro é feito através da comunicação presente entre hardware e software.
A utilização do banco de dados poderá ser futuramente aplicável para manutenção do histórico dos volumes armazenados, a fim de ser usado para visualização nos gráficos e relatórios. Esse serviço não foi implementado nesse primeiro protótipo do sistema, mas poderá facilmente ser desenvolvido em versões futuras, bastando utilizar as informações contidas no banco para representação dos gráficos e demonstração nos relatórios.
Tabela 7.1: Tabela de usuários no banco de dados com exemplos
ID	PAD	Usuário	Nome	Senha
1	243337	daniel.machado	Daniel Machado Nidejelski	12345
2	220076	michael.pereira	Michael da Silva	54321
3	235678	julio.souto	Júlio Couto Souto	67891
Fonte: O Autor
Tabela 7.2: Tabela de medições no banco de dados com exemplos
ID	Timestamp	Vol. Tanquel	Vol. Tanque2	Vol. Tanque3
1	19-11-2018 17:11	0.000	0.250	0.778
2	19-11-2018 17:12	0.000	0.250	0.567
3	19-11-2018 17:12	0.000	0.111	0.448
Fonte: O Autor
7.2.2	Linguagem de programação
As linguagens de programação utilizadas foram PHP, JavaScript, CSS e HTML5, que são linguagens bastante utilizadas em aplicações Web, feitas em código livre e aberto, bem intuitivas e que possuem grandes comunidades para suporte.
7.2.3	Google Charts
O Google Charts é uma biblioteca de gráficos baseada em JavaScript, criada para melhorar os aplicativos da Web, adicionando recursos de gráficos interativos. O Google Charts fornece uma grande variedade de gráficos, como gráficos de linhas, spline charts, gráficos de área, gráficos de barras, gráficos de pizza e assim por diante.
O Google Charts foi utilizado no projeto para ser uma maneira fácil e intuitiva de visualizar a informação dos volumes medidos nos tanques, através de um gráfico de barras.
7.3	Telas da aplicação
Neste tópico são apresentadas as principais telas do sistema desenvolvido, e para cada uma delas são apresentadas uma breve descrição com suas funções.
7.3.1	Tela de login
Esta tela tem como função executar o login do usuário ou administrador do sistema.
Para acesso ao sistema, o administrador realizará o pré-cadastro dos usuários, onde o mesmo recebe um e-mail para o primeiro acesso, com possibilidade para alteração da senha. Assim, após este processo, o usuário está apto para acessar no sistema, devendo,
para tal, preencher obrigatoriamente os campos de PAD (que é a matrícula do usuário na empresa, e que será o seu login) e senha.
Figura 7.2: Tela de login
Fonte: O Autor
Por questões de segurança, o sistema não terá opção do usuário se cadastrar. No próximo tópico é apresentada a tela inicial do sistema.
7.3.2	Menu principal
Depois de realizado com sucesso o login do usuário, o mesmo será encaminhado à página principal do sistema. Esta tela terá um menu com acesso as principais opções disponibilizadas pela aplicação (que serão abordadas nos tópicos a seguir):
•	“Consulta Online”;
•	’’Relatórios”;
•	“Gráficos”;
Essa tela tem por objetivo redimensionar o usuário para as páginas com os principais serviços.
Figura 7.3: Menu principal
Fonte: O Autor
7.3.3	Consulta Online
Essa tela representa a principal parte do projeto. É nessa parte da aplicação onde é possível visualizar, de maneira fácil e intuitiva, a quantidade dos volumes lidos pelos sensores nos tanques de armazenamento, em tempo real, ou seja, a visualização da informação da medição de nível nos tanques é precisamente o que consta fisicamente dentro dos tanques naquele momento. Cada quantidade é representada por uma barra no gráfico de barras, podendo ser visualizada a quantidade tanto pelo gráfico quanto colocando o mouse em cima da barra que representa cada tanque, onde será mostrada a quantidade exata do volume lido pelos sensores.
As quantidades volumétricas dos tanques são lidas pelos arquivos de texto armazenadas no disco local do servidor, conforme mencionado anteriormente. Através desses arquivos, são lidos os valores presentes dentro dos mesmos e transformados em variáveis pela aplicação, que fornece estas como parâmetro para ser utilizada pelo gráfico e disponibilizada como informação de fácil visualização. Essa parte de apresentação de gráficos é feita em JavaScript pela leitura dos valores contidos nos arquivos de texto, e plotada em
forma de gráfico pelo envio desses valores como parâmetros através do Google Charts.
Figura 7.4: Tela de Consulta Online
Fonte: O Autor
Essa tela é a representação total do motivo pelo qual o trabalho foi desenvolvido. Por ela é possível ter a noção da quantidade real presente nos tanques a cada momento do dia, sendo possível fazer a aferição sem ter que se deslocar até a área dos tanques de armazenamento e fazer as leituras pelo próprio dispositivo do funcionário, seja esse um computador, notebook, tablet ou celular, precisando somente de um navegador (browser). Assim, em um dos momentos mais cruciais de todo o ciclo de abastecimento da empresa, ou seja, no momento de encomendar a carga do produto para os fornecedores, é possível fazer o pedido por demanda, com uma leitura real e fidedigna do que está nos tanques naquele instante, sendo possível, através dessa leitura, encomendar somente o que é vital e necessário, evitando, desse modo, desperdícios e exageros.
7.3.4	Relatórios
Tanto a tela de relatórios como a de gráficos serve, nesse parte de desenvolvimento de um protótipo de sistema, como uma demonstração das possibilidades de serviços que a aplicação pode fornecer. Sendo assim, não foram completamente implementadas de acordo com o que se espera de uma aplicação completa.
O relatório abaixo é apenas uma tradução literal da planilha eletrônica que é transferida da planilha de papel pelos funcionários da empresa, e que mostra somente os registros das leituras de medições de nível feita de forma direta pelo visor de nível exterior (pêndulo) em cada um dos tanques de armazenamento do pátio, em cada dia do mês para um determinado mês.
Figura 7.5: Tela de relatórios
dl Sistema de Controle de Combustíveis
Relatórios
Setembro 2018 Dia	Imprimir Vol. Tanquel	Vol. Tanque2	Vol. Tanque3
01	10 922	11699	28 750
02			
03	9 449	10 136	28 917
04	7 193	7 761	29 156
05	3 620	4 110	29 140
06	13 790	14 366	28 711
07	14 431	15.000	28 770
08			
09			
10	6 770	9 447	28 662
11	6 058	6 722	29 098
12	5 434	6 056	28 416
13	14 156	14 732	28 545
14	11 912	12 692	28 346
15	12 937	13.619	29 140
16			
17	12 998	13 695	28 819
18	11 450	12 224	29 140
19	9 990	10 772	29 148
Fonte: O Autor
É possível notar pelo relatório que existem lacunas em branco em alguns dias do mês, que não apresentam registros de valores dos volumes dos tanques. Isso deve-se ao fato de que em algumas datas, principalmente em dias como sábados, domingos e
feriados, não há ninguém do setor responsável pelas medições diretas presente na empresa para verificar e anotar os volumes e medições dos tanques. Esse problema abre uma brecha muito grande para fraudes e inconsistências. Tal problema não existiria com a adoção de um sistema eletrônico como o apresentado, visto que os dados das medições seriam devidamente avaliados e registrados pelo sistema, sem necessidade da presença de funcionários nesses dias.
7.3.5	Gráficos
Uma das melhores maneiras para visualizar algumas informações é através de gráficos. Eles expressam de forma fácil e simples uma variedade de dados, e são de fundamental importância nas áreas de gestão e gerenciamento.
Como mencionado anteriormente, a tela de gráficos também serve, nessa parte de prototipação e desenvolvimento do projeto, como demonstração das possibilidades de serviços que podem ser ofertados pela aplicação.
O gráfico abaixo é a representação gráfica de linha da planilha eletrônica mostrada na tela de relatórios. É possível ter uma boa noção através dele das quantidades e níveis de medições de cada dia.
__________________________Figura 7.6: Tela de gráficos________________________
dl Sistema de Controle de Combustíveis
Gráficos
Voltar
Fonte: O Autor
8	CONCLUSÃO
O projeto do protótipo, de uma maneira geral, não apresentou tanta complexidade, mas exige um certo nível de conhecimento em algumas áreas específicas da computação, como programação e circuitos digitais, bem como um conhecimento em nível dos detalhes que envolvem o abastecimento e armazenamento de produtos em tanques/recipientes e dos processos envolvidos. O trabalho foi dividido em três grandes partes, onde foi possível estruturar uma lógica de desenvolvimento, sendo elas: a parte de levantamento das informações relativas ao abastecimento e estocagem de produtos em tanques de armazenamento e todo conhecimento dos processos e detalhes que envolvem esse procedimento, a parte de hardware e dos componentes e dispositivos que foram utilizados e que constituem o projeto em nível físico, e a parte de software.
A parte de software envolveu algum esforço no que se refere aos testes e funcionamento dos elementos principais e interligação/comunicação e envio de dados com a parte de hardware. A parte de software praticamente não trouxe grandes problemas para o projeto, e cada erro que surgiu pode ser solucionado com ajustes diretos no código fonte.
O hardware composto no projeto foi criado para atender as demandas do protótipo e ser responsável por capturar os dados físicos lidos no sistema. Essa parte pôde ser dividida em quatro partes: componentes do sistema, arquitetura idealizada, arquitetura e esquema implementados na prática, e a comunicação entre hardware e software. Uma parte do projeto que necessitou de bastante trabalho foi a parte de transformação das distâncias lidas pelos sensores e o cálculo de volume com o uso desse valor de distância como parâmetro. A primeira parte para resolver esse problema foi encontrar uma maneira para converter a distância lida pelos sensores em centímetros para milímetros. Esse problema foi resolvido alterando algumas linhas de código diretamente na biblioteca do módulo de ultrassônicos importada pela IDE do Arduíno. Depois de resolvido esse problema, foi preciso verificar o porque de algumas leituras pelos sensores marcarem valores que não condiziam com a realidade. Foi necessário fazer algumas alterações no código para garantir o cálculo de volume. Para isso, os valores de distância que marcavam estar acima do valor do diâmetro das garrafas teve de ser ajustado manualmente para o valor do diâmetro real. Isso se deve ao fato dos sensores serem bastante sensíveis e utilizar a velocidade do som para calcular a distância percorrida pelo mesmo. Com essa correção, foi possível ter os cálculos de volume ajustados. Por último, como problema, os valores lidos quando as garrafas estavam cheias não marcavam o volume real do total da garrafa,
que era de 1L. Isso aconteceu pelo sensor estar muito próximo do líquido, e sendo assim, com a velocidade do som, a distância marcada pelo sensor não era a correta pelo diminuto espaço que havia entre o sensor e a água. Para corrigir esse problema, foi ajustado a distância do sensor no topo e verificado que o erro acontecia somente nesses casos onde o sensor estava muito próximo.
Outra parte crítica do projeto de hardware foi a comunicação entre hardware e software, que necessitou de bastante conhecimento de como funciona o dispositivo de comunicação e de vários testes para encontrar a causa de alguns problemas. O principal problema relacionado à comunicação era referente à questão da rede local e do que era "visto"pelo servidor e pelo dispositivo de comunicação (o shield W5100). Foi preciso entender o porquê do shield conseguir ter um IP válido através do DHCP mas não conseguir se comunicar com a rede local. Para resolver esse problema, foi necessário utilizar um IP fixo no servidor e disponibilizar esse IP através de alterações nos arquivos de configurações do servidor (Apache e PHP), de modo a deixar o IP e porta da aplicação disponíveis na rede.
O controle de nível e a medição do volume nos tanques de armazenamento utilizando o controlador do tipo Arduíno, representa, de certa forma, uma consolidação dos conhecimentos teóricos aplicados de uma maneira prática. O desenvolvimento deste projeto envolveu bastante aprendizado, visto que engloba alguns conceitos de disciplinas como Algoritmos e Programação, Técnicas de Construção de Programas, Arquitetura e Organização de Computadores, Circuitos Digitais, Arquiteturas Avançadas, e até mesmo algumas noções e concepções de disciplinas da área matemática, todas estas que compõem a grade curricular do Curso de Ciência da Computação da UFRGS. O projeto desse protótipo de sistema abrange diversos conceitos e serve também como aprendizado para entender como estas definições se comportam na prática e na vida real, e quais dificuldades devem e poderão surgir em futuros projetos.
Por último, fica evidente como a implantação de um sistema eletrônico de controle e gerenciamento de nível de produtos em tanques traz diversos benefícios para uma empresa. O objetivo do trabalho era mostrar a viabilidade de desenvolvimento de um sistema que pudesse substituir o método tradicional de forma confiável, precisa e barata, e que pudesse atender as demandas de uma empresa de transporte, bem como mostrar os benefícios e vantagens que esse sistema possui em relação ao sistema tradicional de medição direta.
O sistema eletrônico não possui como vantagem única a sua precisão, já que tem
diversas outras. O controle em tempo real do volume dos tanques tem telas que permitem a leitura das informações físicas presentes nos tanques de armazenamento, sem complicações e com uma interface intuitiva que facilita a visualização, além de permitir o acesso por uma plataforma Web, fazendo com que que o gestor tenha sempre números atualizados.
Ainda, através do sistema, é possível identificar vazamentos ao aferir constantemente o volume dos tanques. Assim, o sistema se transforma em uma poderosa arma para combater os vazamentos de combustíveis. Acidentes desse tipo podem ser devastadores para o meio ambiente e também para da empresa de uma maneira geral.
Como outro benefício, podemos citar ainda os relatórios, em que toda e qualquer movimentação nos tanques é registrada pelo sistema, o que significa que relatórios gerados demonstram toda utilização dos tanques. Este recurso é uma ótima ferramenta contra o desperdício de produto e também de tempo (que ocorre na medição de volume nas entregas de produtos nos tanques), eliminando, desta forma, todo o controle manual. Os relatórios auxiliam também no controle de fraudes e detectam qualquer indício de contaminação de combustíveis provenientes de erro de descarga (quando, por exemplo, há uma confusão na hora de abastecer os tanques).
O sistema de controle e gerenciamento eletrônico, como o que foi proposto, extingue também as fraudes. Esse é um problema que acontece constantemente durante o processo de reabastecimento dos tanques. Existem diversos relatos de gestores que sofrem com fraudes antes e durante o transporte da carga, bem como no momento de descarga do mesmo. O sistema de medição automático de tanque é uma ferramenta que ajuda a detectar e eliminar estes desvios.
Finalmente, o sistema mede o volume de combustível presente nos tanques. Sendo assim, ele funciona como um pilar fundamental para sustentar as operações de logística e reposição de estoque do produto. Ele permite que seja feito um planejamento dos pedidos aos fornecedores, evitando surpresas como a falta de um tipo de combustível. Parte essencial de qualquer negócio não pode e não deve ficar à mercê de um processo arcaico de averiguação no qual qualquer inclinação nas réguas de medição pode gerar um erro de cálculo envolvendo dezenas de litros de combustível. Os prejuízos financeiros e erros de gestão não valem a economia do dinheiro. Em um mercado cada vez mais competitivo, dizer "não"às melhorias que são oferecidas pela tecnologia pode ser um erro estratégico e que pode causar grande impacto.
REFERÊNCIAS
ALFREDO, A.; GOMES, H.; CAVALI, A. Medição Volumétrica com Módulo Ultrassônico. [S.l.], 2015. Available from Internet:&amp;lt;http://www.portal.anchieta.br/ revistas-e-livros/simposio-eletronica/pdf/2-medicao-volumetrica-modulo-ultrassonico. pdf--&gt;Acessado_em_10/11/2018&gt;.
ALMEIDA, A. H. Abastecimento seguro e sem desperdícios. 2016. Available from Internet:&amp;lt;https://revistarpanews.com.br/ed/58-edicao2015/edicao-177/ 760- asbastecimento- agricola-177- -&gt;Acessado_em_10/09/2018&gt;.
ALPI, L. B. Desenvolvimento de uma planta didática para o controle de nível de tanques acoplados. 2016. Available from Internet:&amp;lt;https://www.lume.ufrgs.br/handle/10183/ 150947--&gt;Acessado_em_08/10/2018&gt;.
ANP. Síntese dos preços praticados - rio grande do sul. 2018. Available from Internet:&amp;lt;http://anp.gov.br/preco/prc/Resumo_Por_Estado_Index.asp--&gt;Acessado_em_13/09/ 2018&gt;.
ANTAO, T. Tanques para postos de serviços, abastecimento e armanamento.
2016.	Available from Internet:&amp;lt;https://pt.slideshare.net/KATIAARAUJO7/ tanque- subterraneo--&gt;Acessado_em_07/09/2018&gt;.
ARAUJO, K. Tanque (reservatório). 2009. Available from Internet:&amp;lt;https: //pt.wikipedia.org/wiki/Tanque_(reservat%C3%B3rio)--&gt;Acessado_em_06/09/2018&gt;.
ARDUINO. Arduino uno rev3. 2018. Available from Internet:&amp;lt;https://store.arduino.cc/ arduino-uno-rev3--&gt;Acessado_em_26/09/2018&gt;.
BARROSO, L. Nova tarifa do transporte coletivo será de r$ 3,75. 2016. Available from Internet:&amp;lt;http://www2.portoalegre.rs.gov.br/portal_pmpa_novo/default.php?p_noticia= 184645&amp;amp;NOVA+TARIFA+DO+TRANSPORTE+COLETIVO+SERA+DE+R$+3,75--&gt; Acessado_em_28/08/2018&gt;.
BRAZILIENSE, C. Quanto vai custar a greve dos caminhoneiros à economia brasileira? 2018. Available from Internet:&amp;lt;https: //www.correiobraziliense.com.br/app/noticia/economia/2018/06/04/internas_economia, 685943/quanto-vai-custar-a-greve-dos-caminhoneiros-a-economia-brasileira.shtml--&gt; Acessado_em_18/08/2018&gt;.
BROCKVELD, S. L. Aula - medição de nível. 2017. Available from Internet:&amp;lt;http://docente.ifsc.edu.br/sergio.brockveld/MaterialDidatico/Instrumenta%C3%A7% C3%A3o/Aula%20-%20Medi%C3%A7%C3%A3o%20de%20N%C3%ADvel.pdf--&gt; Acessado_em_02/09/2018&gt;.
CHRISTENSEN, T. P J. A practical approach to selecting continuous level sensors. 2014. Available from Internet:&amp;lt;https://www.azosensors.com/article.aspx?ArticleID= 558--&gt;Acessado_em_08/09/2018&gt;.
CONTABIL, S. Greve dos caminhoneiros afeta o crescimento econômico, emprego e inflação do país. 2018. Available from Internet:&amp;lt;https://www.sitecontabil.com.br/ noticias/artigo.php?id=2907--&gt;Acessado_em_17/08/2018&gt;.
ELECTRONICS, M. Ultrasonic sensor hc-sr04. 2018. Available from Internet:&amp;lt;https://www.makerlab-electronics.com/product/ultrasonic-sensor-hc-sr04/--&gt; Acessado_em_30/09/2018&gt;.
FERNANDES, A. C. Licitações públicas e contratos administrativos. 2016. Available from Internet:&amp;lt;https://alysoncf.jusbrasil.com.br/artigos/439816437/ licitacoes-publicas-e-contratos-administrativos--&gt;Acessado_em_14/09/2018&gt;.
FILIPEFLOP. Ethernet shield w5100 para arduino. 2018. Available from Internet:&amp;lt;https://www.filipeflop.com/produto/ethernet-shield-w5100-para-arduino/--&gt;Acessado_ em_06/11/2018&gt;.
FLOWLINE. Webcal software. 2018. Available from Internet:&amp;lt;https://www.flowline. com/webcal-software/--&gt;Acessado_em_16/09/2018&gt;.
JUNIOR, P J. I. Medição de nível - medidores diretos - parte 1. 2017.
Available from Internet:&amp;lt;http://portalinstrumentacao.blogspot.com/2017/11/ medicao-de-nivel-medidores-diretos.html--&gt;Acessado_em_04/09/2018&gt;.
KALEEMUDDIN, M.; BOSE, D.; RAMACHANDRAN, K. Performance comparison of infrared and ultrasonic sensors for obstacles of different materials in vehicle/robot navigation applications. 2016. Available from Internet:&amp;lt;http://iopscience.iop.org/article/ 10.1088/1757-899X/149/1/012141/pdf--&gt;Acessado_em_01/10/2018&gt;.
LINDENBERG, A. Área de tancagem. Salvador da Bahia, Brasil: SENAI, 2008. 2-11 -&gt;Acessadoem06/09/2018 p.
NIVELCO. Process visualization software. 2018. Available from Internet:&amp;lt;https: //www.nivelco.com/products#!/product/2?view=1--&gt;Acessado_em_16/09/2018&gt;.
PARANAENSE, I. Greca divulga gráfico com custos do transporte para justificar valor da tarifa. 2017. Available from Internet:&amp;lt;http://informativoparanaense.blogspot.com/ 2017/02/greca-divulga-grafico-com-custos-do.html--&gt;Acessado_em_20/08/2018&gt;.
PONGRACZ, A. von. Intro: Measuring water level with ultrasonic sensor. 2015. Available from Internet:&amp;lt;https://www.instructables.com/id/ Measuring-water- level-with- ultrasonic- sensor/- -&gt;Acessado_em_14/10/2018&gt;.
POSTOS, B. Passo a passo para recebimento de combustíveis nos postos. 2013. Available from Internet:&amp;lt;https://www.brasilpostos.com.br/noticias/gerenciamento-do-posto/ passo-a-passo-para-recebimento-de-combustiveis-nos-postos/--&gt;Acessado_em_01/09/ 2018&gt;.
SILOTRACK. Inventory management software. 2018. Available from Internet:&amp;lt;https://www.monitortech.com/product_c_c_st.shtml--&gt;Acessado_em_16/09/2018&gt;.
SOUZA, F. Arduino uno. 2013. Available from Internet:&amp;lt;https://www.embarcados.com. br/arduino-uno/--&gt;Acessado_em_29/09/2018&gt;.
THOMSEN, A. Arduino e sensor ultrassônico hc-sr04. 2011. Available from Internet:&amp;lt;https://www.filipeflop.com/blog/sensor-ultrassonico-hc-sr04-ao-arduino/--&gt;Acessado_ em_07/10/2018&gt;.</field>
	</doc>
</add>