<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.19373</field>
		<field name="filename">2706_GabrielFeriancic_M.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">
GABRIELFERIANCIC

MODELAGEM MATEMATICADO.

PROBLEMADEPROGRAMAÇAO DE

ENTREGAS DEDERIVADOS DEPETROLEO

Dissertação apresentada à Escola
Politécnica da Universidade de São
Paulo para obtenção do Título de
Mestre em Engenharia.

L

/''\

SAOPAULO

2005



GABRIELFERIANCIC

MODELAGEM MATEMATICADO

PROBLEMADEPROGRAMAÇAODE

l
ENTREGAS DEDERIVADOS DEPETROLEO

Dissertação apresentada à Escola
Politécnica da Universidade de São

Paulo para obtenção do Título de
Mestre em Engenharia.

Área de Concentração:
Engenharia de Sistemas Logísticos

Orientador:
Prof. Dr. Cláudio Barbieri da Cunha

SAOPAULO

2005

/'N

..-'\



/q.

ll'\.

/«

Dedico essa conquista

a Mansa e otan,

aviva,

l Cartel,

eni ineniona, aos meus avos

O valor das coisas tido está no tetnpo que elas duram,

il\as tlcl intensidade cotll que acotttecent.

Por isso, existettt tnotnetttos inesquecíveis,

coisas inexplicáveis e pessoas incotnparáveis

(Fernando Pessoa)



11

AGRADECIMENTOS

Ao meu orientador Cláudio Barbieri da Cunha, por guiar e incentivar a todo o momento,

pela confiança desde o início, e pelo grande exemplo de seriedade e simplicidade.

Aos outros professores das disciplinas de Engenharia de Sistemas Logísticos, pelos

valiosos ensinamentos passados dentro e fora da sala de aula: Hugo Yoshizaki, Marco

Mesquita, Nicolau Gualda, Mttrco Brinati e Rui Botter

Ao atnigo Frederico Mourad, pelos trabalhos desenvolvidos, pelas discussões e pela

ajuda mútua nas aulas e no desenvolvimento desse trabalho.

Aos amigos Fernando Fleury, José Henrique Venoni e Rodrigo Verroni, que me

apoiaram, pennitindo dedicar esse tempo tão precioso ao meu desenvolvimento e

aprendizado

Ao meu pai, Stanislav Feriancic, que sempre me inspirou, incentivou e apoiou pessoal e

orofissionalnlente

/«

p'\

r'
r'q



.'''x

/#\.

11 1

RESUMO

Esta dissertação trata do problema da distribuição de combustíveis com caminhões-

tanque para realizar a entrega de derivados de petróleo para diversos postos de

abastecimento a partir de uma base cle distribuição.

O problema consiste da detemunação de rotas para veículos de uma frota heterogénea,

visando minimizar o custo total de distribuição dos veículos envolvidos sujeitos a

restrições de capacidade dos compartimentos cle cada veículos. O objetivo é garantir que

cada entrega seja aloc:tda a exatamente um veículo e que todos os veículos sejam

adequadamente seqijenciados. Deve-se notar que cada caminhão pode ter até seis

compartimentos com diferentes capacidades. Além disso, são consideradas restrições

que impedem que um veículo atenda determinado cliente.

As restrições relacionadas a essa alocação de pedidos aos compartimentos dos veículos

fazem esse problema tornar-se muito diferente de outros problemas de roteirização de

veículos. Para ilustrou isso, uma entrega de 5.000 litros pala um cliente apent\s pode ser

alocada em um compartimento de exatainente 5.000 litros, mas não a um

compartimento maior preenchido parcialmente. Adicionalmente, caminhões do mesmo

tamanho e capacidade (e.g. 30.000 litros) podem possuir diferentes números de

compartimentos, inclusive de diferentes tamanhos (e.g. um caminhão de 30.000 litros

pode ter 6 compartimentos cle 5.000 litros ou 2 compartimentos cle l0.000 litros e 2

compartimentos de 5.000 litros), tornando o problema ainda mais complexo.

Propõe-se inicialmente uma modelagem matemática inédita para o problema. Dada a

dificulclacle de resolver instâncias de tamanhos reais utilizando ferramentas comerciais

de otimização como o ILOG CPLEX 9.0, foi talnbéin proposto um algoritmo heurístico

que pode alcançar boas soluções em tempos curtos de processamento. Este algorítmo é

inspirado em algumas idéias do GRASP. Ele se baseia eln um método heurístico rápido

de construção, que é repetidamente aplicado, baseado em um algoritmo cle controle que,

repedida e aleatoriamente, remove alguns pedidos da solução corrente, e então

reconstrói umtt nova solução a partir dos pedidos não-alocados restantes.

Também são relatados resultados computacionais com diversos problemas de teste que

rolam gerados, considerando diferentes tamanhos de problema, bem como diferentes

níveis de dificuldade de alocação de pedidos aos caininhões.



,''\

lv

ABSTRACT

This Manter's dissertation deals with the problenl of distributing fuels by petroleum

tank trucks in the context of the delivery of petroleum products to gas stations

originating at a single distribution base

The problem comprises detemüning the vehicle delivery routes for a heterogeneous

fleet, aiming to minimize the total distribution and fixed cosas of the vehicles involved

subject to capacity constraints for the tank compartments of each vehicle. Thc objectivo

is to ensure that each delivery is assigned to exactly one truck and all trucks are properly

sequenced. It should be noticecl that each truck may have one to six tank compartments

with different capacities eventually. In addition, there m:ty be restrictions on which

vehiclescan service each client

/'\.

f'&gt;.

,#""\

F''x. The constraints related to the assignment of deliveries to truck compartments makes this

probleln much different from other vehicle routing problema, thus preventing the

tra(titional routing approaches and formulations to be applied in this c:lse. To illustrate

this, a delivery of 5,000 liters to a single client can only be assigned to a compartment

of exact]y 5,000 ]iters, but not to a ]arger compartment which is not entirely Hilled up. In

acldition, trucks of the some size and capacity (e.g. 30,000 liters) may have different

numbers of coinpartments and even different sizes (e.g. a 30,000 liters truck may have 6

compartinents of 5,000 liters or 2 compartments of l0,000 liters ímd 2 compartments of

5,000 liters), making the problem even more complicated.

We initially propose a novel inathematical IP formulation for this problem. Given the

difficulty to solve instances of the same dize as founcl in practice using off-the-sllelf

cutting-edge optimization tools like ILOG CPLEX 9.0, we also propose a heuristic

algorithm that can reach good solutions in very short CPU times. This algorithin is

inspirem on some ideal of GRASP. It relies on a fast constructive heuristic, which is

repeatedly applied, based on a contrai algorithm that repeatedly ttnd randomly remove

some deliveries from the current solution, and then rebuilds a new solution from the

remaining tmassigned and unrouted deliveries.

We also report the computational results with several test problems th:tt we have

generated, considering different problem sizes, tts well as different leveis of difficulty

related to assignment of orders to trucks.

.''\

.fn-

'P'q.

.,'''\



/\

SUMÁRIO

1.INTRODUÇÃO.................

1.1. Apresentação .--...---'-.
1.2. Relevância do Problema

].3. Organização --.-..--.-..-

.1

.1

,2

.3

2. REVISÃO BIBLIOGRÁFICA......''................'.''''''.....

2.1. O Problema de Roteirização de Veículos ......'''-'...------

2.2. O Problema de Distribuição de Combustíveis na Literatura

2.3. Considerações Finais.-..-..-'-'-

.4

,4

.8

.14

.'-\
3. CARACTERIZAÇÃO DO PROBLEN'IA -.--.--
3.1. A Cadeia Logística de Distribuição de Derivados de Petróleo

3.1.1. Das Refinarias para as Distribuidoras...

3.1.2. Contercializ.ação.

3.1.3. A Frota ......'''''-'''''-...--.---

3. 1.4. Alocct ção dct l)ish'ibuição.

3.1.5. Tipos de Pedido.......-... '''........

3.1.6. Alocução Nlanuat Entpírica........

3.2. Nlodelagem Nlatemática do Problema.---.-

3.2.1. Modelagent dos Cantinhões- Tanque.

3.2.2. Modelagent dos Clientes e da Base ...

3.2.3. h'lodetagent dos Pedidos.

3.2.4. Variáveis de Decisão .....

3.2.5. Função objetivo..

3.2.6. Restrições

3.2.7. Sumário da Modelagent Matemática

3.3. Considerações Finais.

15

15

.]5

.]Ó

/7
./8

.2a

,21

.22

.23

.25

.27

.27

.28

.3a

,31

'''\

/''K

.'''\

4. DETERMINAÇÃO DA SOLUÇÃO EXATA

4.1. Solução Utilizando o So/ver para Planilha Eletrânica

4.1.1. Dados de Entrada.........

4.1.2. Variáveis de Decisão ....

4.1.3. Restrições -

4. 1.4. Resultados Obtidos Através do Solver...

.32

,32

33

.34

.37

.40



VI

''''w

4.2. Solução Utilizando Co/zcerf Tec/zo/OÉ'} do /l,OG CPI,/fX em C++

4.2.1. Implementação...........-...........

4.2.2. Exemplo de Solução Obtida peão ]].OG CPI,EX...........................

4.3. Outros problemas resolvidos através do ILOG CPLEX ....-

4.4. Considerações Finais.-

.42

42

.42

.44

,46

5. DESENVOLVINIENTO DA ESTRATÉGIA DE SOLUÇÃO HEURÍSTICA

5.1. Ferramentas de Desenvolvimento....

5.2. Aspectos Gerais do h'létodo Proposto.

S.2.1.GRASP

5.2.2. Contparação entre a Estratégia Adorada e o GRASP.

5.3. 1\'método Heurístico de Solução Desenvolvido.

5.3.1. Heurística Rápida de Alocução

S.3.2. Veri$cação (ta função objetivo ..

5.3.3. 1)efinições de novas condições iniciais para busca de nova solução .

S.3.4. Verificação do critério de parada ................

5.4. Considerações Finais.

.47

.47

.48

.49

.5]

.52

.54

.Ó2

.Ó3

.66

6. EXPERINIENTOS CONIPUTACIONAIS ......'''...

6.1. Geração de Instâncias de Problemas para Teste

6.1.1. Critérios de geração de lltstâncias .......

6.2. Variação do Nível de Restrição.

fi.3. Exemplo de Resultado-.-...--.-.

fi.4. Variação dos Parâmetros --

6.5. Resultados Obtidos........-.---'-.

6.6. Análise Detalhada dos Resultados Obtidos--

6.7. Considerações Finais-----.---.

68

68

.72

.72

.75

.75

.78

.80

7. CONCLUSÕES E RECOMENDAÇÕES

'iTA R .qr/BTor/R.q ......

82

85

89

,91

.96

REFERÊNCIASBIBLIOGRÁFICAS

APENDICEA NIODELAGEM PARA EVITAR SUBTOURS

APENDICE B - IN'lPLEh'TENTAÇÃO EM ILOG CPLEX PARA C++

APÊNDICE C - PLANILHA DE AUXÍLIO NO DESENVOLVIA'LENTO

APÊNDICE D - RESULTADOS DOS PROCESSANIENTOS .101



.'''\

.#-'k.

Vll

LISTADEFIGURAS

Figura 4. 1 Dados dos Veículos

Figura 4.2 - Dados de Distância ....

Figura 4.3 Dados de Restrição entre Clientes e Veículos

Figur:\ 4.4 -- Dados dos Pedidos.................

Figura 4.5 -- Variáveis de Decisão X

Figura 4.6 -- Variáveis cle Decisão Y

Figura 4.7 Variáveis de Decisão Z

Figura 4.8 - Restrição cle Alocução de Pedidos a Veículos

Figura 4.9 - Restrição de Compartimentos de 5000 litros...

Figura 4. 10 - Restrição de Volume Máximo.......................

Figura 4. 1 1 Restrição de Alocução de Veículos a Cliente

Figunt 4. 12 Restrição entre Veículos e Clientes

Figunt 4. 1 3 - Restrição de Continuidade das Rotas

Figunt 4. 14 - Restrição de Máximo de Rotas ....

Figuni 4. 15 - Primeira Restrição para Evitar Sub-Rotas ..................

Figuni 4. 16 -- Segtmda Restrição para Evitar Sub-Rotas .......................

Figura 4. 1 7 -- Exemplo de Saída do Aplicativo eill ILOG CPLEX

Figura 5. 1 -- Fluxograma genérico de método GRASP.

Figura 5.2 - Fluxograma geral do algoritmo proposto

Figura 5.3 --Visão Geral da Heurística Rápida de Alocução

Figura 5.4 - Função de Verificação clãs Restrições Estáticas .......

Figura 5.5 - Parâmetro de Pedidos para um Mesmo Cliente

Figura 5.6 Parâmetros de Serventia do Veículo e Facilidade de Alocação do Pedido.

Figura 5.7 -- Função de Busca para Determinação de Pedido a Alocar

Figura 5.8 Visão Geral da Geração de Novas Condições Iniciais

.33

.33

.34

.34

.35

.36

.36

.37

.37

38

.38

.38

.39

.39

.39

.40

.43

.50

.53

.55

.57

.58

.60

.6]

.64



./\

.,'''\

.''x

,'''x.

''-\

,i-5

-'''3

Vlll

Figura 5.9 -- Sorteio e Desalocação de Pedidos

Figura 6. 1 - Exemplo de Relatório de Comportamento do Algoritmo...

Figura 6.2 - Exemplo de Rotas Geradas.

Figura A. 1 - Rede Ilustrativa sem Slrb/otl/s .....

Figura A.2 - Rede Ilustrativa com Dois Slrb/Olr/s ......-

Figura B. 1 - Exemplo de Implementação em ILOG CPLEX para C++.

Figura C.l Dados de clientes ...........-

Figura C.2 -- Dados de pedidos ...

Figura C.3 - Dados cle frota ......

Figura C.4 - Mapeamento dos clientes

Figura C.5 - Matriz de restrições

Figura C.6 - Matriz de alocação

.65

.73

.74

.89

.90

.95

.96

.97

.98

.98

.99

100



'\

./R

.''\

,''\

/-''':\

/''*

,«'''\

#''X.

lx

LISTADEQUADROSETABELAS

Quadro 3. 1 -- Codificação dos Tipos de Caminhões ..

Quadro 3.2 Exemplo de Tabelas para Alocação de Pedidos (Volumes em 1000 1)

18

.21

Tabela 2. ] - Exemp]o de Matriz de Compartimentos Disponíveis.

Tabela 4. 1 - Resultado da Implementação no So/ve/

Tabela 4.2 - Instâncias e Resultados do Processamento no ILOG CPLEX

Tabela 5.] Exemp]o de Cá]cu]o de Serventia e Faci]idade.......................

Tabela 6. 1 - Distribuição Arbitrada pura Volume dos Pedidos...................

Tabela 6.2 - Distribuição Arbitrada para Tipo de Veículo...

Tabela 6.3 - Resumo dos Resultados dos Testes Realizados ....

Tabela C. 1 -- Codificação dos Tipos de Caminhões ..

Tabela D. 1 - Resultados para Classe A - Restrição 20% ...

Tabela D.2 Resultados paul Classe A - Restrição 40%

T:tbela D.3 - Resultados para Classe A - Restrição 60% ...

Tabela D.4 -- Resultados para Classe B Restrição 20qc

Tabela D.5 Resultados para Classe B - Restrição 40%

Tabela D.6 -- Resultados para Classe B -- Restrição 60% ..

Tabela D.7 Resultados para Classe C -- Restrição 20% ..

Tabela D.8 - Resultados para Classe C - Restrição 40qo

Tabela D.9 - Resultados para Classe C -- Restrição 60qü

.9

,41

.45

.59

.70

.71

.77

.98

102

102

103

103

104

104

105

105

106



,a\
,'\

/''b.

.--x

;#b

X

LISTADEABREVIATURASESIGLAS

ANP

EPUSP

USP

SA

DA

TS

GA

AS

NN

GRASP

INMETRO

Agência Nacional de Petróleo

Escola Politécnica da Universidade de São Paulo

Universidade de São Paulo

Simulated Annealing

Detenninistic Annealing

Tabu Search / Busca Tabu

Genetic Algorithm / Algoritm

Ant System

Neural Network / Rede Neura\l

Greedy Randomized A(taptative Search Procedure

Instituto Nacional de Metrologia, Normalização e Qualidade Industrial

o Genéticoe

''\



l ixvunDIJ('An
,'\
.p':X

1.1. Apresentação

O presente trabalho trata da modelagem matemática e da elaboração de uma proposta de

solução para o problema cle programação de entregtts de derivados de petróleo em

postos de abastecimento

As redes distribuidoras desses produtos concentram em pontos estratégicos as bases

operacionais onde os combustíveis comprados das refinarias são amlazenados. A partir

desses locais, os diferentes produtos (gasolina, álcool e óleo diesel) são distribuídos aos

postos de abastecimento utilizando veículos específicos. Tais veículos, chamados de

caminhões-tanque, são apropri:idos para o transporte de líquidos inflamáveis e possuem

compartimentação interna que permite o transporte simultâneo de um ou mais produtos

para diferentes clientes

Essa compartimentação constitui como um dos principais elementos complicaclores do

problema aqui proposto, pois os veículos que compõem a frota não são idênticos. Em

outras palavras, os veículos-tanque apresentam diferentes tamanhos e também

compartimentações diferentes em ternos clo ntlmero de tanques e das capacidades dos

tanques, levando o problema a uma formulação de distribuição com frota heterogênea.

Há ainda outras particularizações que podem gerar mais restrições e que serão

apresentadas e discutidas

A decisão de alocação da frota ptua realizar a distribuição passa pela análise de um

número muito grande de possíveis combinações de pedidos e veículos. Quanto maior o

problemtt a ser solucionado, maior é o número de possíveis combinações, que pode

crescer exponencialmente, tornando mais difícil encontra' a solução ótima.

Assim, este trabalho tem como objetivos principais propor un] modelo matemático que

represente adequadamente o problema e conceber, implementar e testar uma solução

heurística para este problema.



2

1.2. Relevância do Problema

''''"\.
A cadeia logística elos combustíveis automotoras é parte da cadeia petroquímica. Os

processos envolvidos nessa cadeia começttm na extração do produto natural bruto,

seguindo-se o transporte às refinarias, os processos industriais de defino e

beneficiamento e cle distribuição, até o consumo Hlnal na forma dos mais variados

produtos como combustíveis, lubrificantes, parafinas e asfalto, entre outros

O papel dos óleos combustíveis é fundamental no desenvolvimento económico, e os

preços finais desses produtos causam impacto em todas as cadeias produtivas e na

própria situação económica do país. Isso é ainda mais verdadeiro sob a ótica de um país

colmo o Brasil que, segundo o GEIPOT (2001), tem em seu sistema rodoviário o

principal meio de escoamento da produção nacional, o qual correspondeu a 60,5qo da

produção de transporte de carga em 2000 (em toneladas-quilómetro).

Conforme indicado pela ANP - Agência Nacional de Petróleo (2001), em 2000 os

postos revendedores de combustíveis automotivos (postos de combustível) totalizavttm

29.11 1 estabelecimentos em todo o território nacional, sendo 7.878 localizados apenas

no Estado de São Paulo. A maior distribuidora do Brasil possuía, sozinha, 1 .546 postos

neste estado

O clesaüio de distribuição de uma rede deste porte passa por questões comuns a qualquer

problema dessa natureza, idas talllbém por detalhes operacionais que cliülcultam sua

otinlização. O transporte da distribuição elos combustíveis para o varão é apenas uma

pequena etapa da cadeia produtiva, mas que gera uma parcela significativa no custo

final dos produtos.

Assim, o presente prqeto de pesquisa tem por objetivo contribuir para a racionalização

da atividade de distribuição de derivados de petróleo. A redução de custos em

combustíveis automotivos, em especial, impacta de forma benéfica todos os setores da

econonua.

Além da economia dos custos sociais em todos setores produtivos possibilitada pela

otimização na distribuição de combustíveis automotivos, a importância cla pesquisa

proposta pode ser vista pela sua complexidade do ponto cle vista de modelagem

matemática e solução, pois o problema tem relevantes características combinatórias.

Busca-se contribuir, então, através da elaboração de uma modelagem matemática



3

inédita e da experimentação no uso de uma heurística de solução. Adicionalmente, trata-

se de um oroblelna muito pouco estudado na literatura

No caso particular do problema de roteirização e programação de entrega de
combustíveis, além dos aspectos usuais de um problema de distribuição, as

características operacionais, em especial a necessidade de compatibilização dos volumes

pedidos com as capacidades dos compartimentos dos veículos, impede a utilização dos

métodos de solução propostos na literatura, requerendo o desenvolvimento de uma

estratégia de solução específlica.

1.3. Organização

O presente texto está organizado da seguinte fonna: o Capítulo 2 apresenta a revisão

bibliogránlca abordando duas vertentes: :t questão de roteirização de veículos, incluindo

trabalhos desenvolvidos na EPUSP, e estudos sobre o problema específico tema deste

trabalho

O problema proposto é caracterizado no Capítulo 3 e permite compreender os aspectos

práticos da questão. Este capítulo compreende ainda :\ formulação da modelagem

illatemática do problema de otimização da distribuição de combustíveis

O Capítulo 4 trata das tentativas de obter a solução exata ptua o problema. São

apresentadtts duas formulações: ein planilha eletrõnica Exce/ e no aplicativo /Z,OG

CPZ,EX. O desempenho e os resultados dessas formulações também são apresentados no

capítulo

A estratégia de solução heurística para otimização do problema em estudo é apresentad:\

no Capítulo 5.

No Capítulo 6 são apresentados os resultados alcançados a partir da resolução de várias

instâncias de problema através do método proposto No mesmo capítulo são discutidos

os resultados alcançados, avaliado o desempenho do método e apresentadas análises

consideradas relevantes.

l-içõ'-s Ê recomendações do Presente trabalho de
O Capítul

pesquisa.

7 apresenta concÍlsi'es0



2.REVISÃOBIBLIOGRÂFICA

2.1. O Problema de Roteirização de Veículos

A formulação original do problema de roteirização de veículos foi proposta por Dantzig

e Ramser (1959) e, desde então, este problema vem sendo intensivamente estudado,

abordando diferentes tipos de problemas e suas formulações, bem como diferentes

estratégias de solução. Essa classe de problemas tem como fonnulação geral a

detemunação de rotas para os veículos de uma detenninada frota, com o objetivo de

minimizar os custos cle transporte. Bodin e/ a/. (1983) apresentam discussões e

formulações para diversas categorias do problema de roteirização.

Problemas de que envolvem roteirização e programação de veículos em geral são

problemas combinatórios, do tipo NP-difíci], o que torna impossível a obtenção de

soluções ótimas para instâncias encontradas no mundo real, trazendo o desafio da busca

de novas heurísticas mais eficientes que possibilitem a sua aplicação a problemas

práticos do dia-a-dia das empresas (Cunha, 2000)

Ainda segundo Cunha (2000), o constante interesse em busca de novas estratégias de

solução se deve ao fato de que, devido à complexidade computacional, as estratégias de

solução que permitem resolver problemas reais são heurísticas, apoiam-se em

abordagens intuitivas, na qual a estrutunt particular do problema possa ser considerada e

explorada de forma inteligente, para a obtenção de uma solução adequada (Cunha,

1997)

Estratégias de solução heurísticas são, por natureza, bastante específicas e, em geral,

carecem de robustez, isto é, não conseguem proporcionar boas soluções pura problemas

com características, condicionantes ou restrições às vezes um pouco diferentes daquelas

para as quais foram desenvolvidas (Teixeira e Cunha, 2002). Em outras palavras,

roteirização de veículos é uma área onde uma solução para um determinado tipo de

problema e dados e condicionantes pode não ser adequada para outro problema similar,

conforme apontado por Hall e Partyka (1997).

Laporte ef a/. (2000) apresentam tuna revisão de métodos heurísticos par:t solução de

problemas de roteirização de veículos. Os autores descrevem inicialmente a modelagem-n

da versão mais estudada do problema de roteirização de veículos:



Seja G = (V, E) um grifo, onde

' V =fvo, v/, ...., 1,,,} é um conjuntode nós; e

' E= {(vf,U): vi,»cV, i&lt;./} éumconjuntodearcos.

O vértice vo representa um depósito onde estão sediados //l veículos idênticos de

capacidade (2. A cada vértice vf é associada uma demanda não-negativa qf. Também é

associado um custo não-negativo cü a cada arco (vi, U).

O problema de roteirizttção cle veículos consiste de determinar um conjunto de /n rotas,

que busque um custo total mínimo, mas que sejam restritas a:

e Cada uma delas iniciar e terminar no depósito (vO);

. Cada cliente (vr, com i &gt; 0) visitado uma única vez e por uin único veículo;

. A demanda total da rota de cada veículo não ultrapasse sua capacidade Q.

Deve-se notam que essa formulação não considera frota heterogênea e os eventuais

''frade-off' que podem ocorrer. Qual a alternativa de menor custo: um número menor de

caminhões maiores perconendo maior distância total ou uma frota maior de veículos

menores percorrendo menor distância total?

As heurísticas de solução são classificadas por Laporte e/ a/. em /zelrrúficas c/óssícas e

}lett} ísticcls }llodertlcls.

As /zeu/"Ê/fias c/ás.s-fias são, por sua vez, classificadas em três categorias. Helírú/ices

de co/zs/rlíção geram ou constroem soluções viáveis buscando otiinizíu o custo cla

solução, porém sem unia fase de melhoria destacada. f/eurúf/cas de /zze//lorpa buscam a

me[horia de qua[quer solução possível através de trocas de segmentos de solução de

cada rota dentro da própria rota ou entre rotas diferentes. He /rú//cczs de d aslases, por

fim, decompõem o problema em dois componentes: agrupamento de vértices ein rotas

possíveis e construção de rotas, com possível troca de infonnações entre essas fases.

Laporte e/ a/. listam algtmlas heurísticas modernas, também conhecidas como /nefcz-

/zelar ricczs, que já foram aplicadas a problemas dessa natureza: Si/nz /área Án/?ecz/Ing

(SA), Deferlttinistic Antlealing (DA), Busca Tabu (TS), Algorifmos Genéticos (GA), Ant

Systents (AS) e Redes Neurais ÇNN).



6

Os algoritmos Simzr/a/e(/ Á/7nea/í/?g, Z)Crer/7?/n fs/lc Á/7/zea/f/7g e Busca Tabu iniciam por

uma solução inicial e a cada iteração movem para uma solução vizinha até atingir uin

critério de pENada.

Algoritmos da classe Á/gorar/nos Gene/fios exaininanl uma população de soluções, na

qual cadtt geração é derivada de geração uma precedente através da combinação de seus

melhores elementos e descartando os piores.

A estratégia ch:unadtt de Á/zf Sysre/ns baseia-se ntt construção de diversas soluções em

c:tda iterttção utilizando infonnações colhidas nas itert\ções anteriores. Esse método é

inspirado no comportamento operativo das fomligas para encontrar o melhor caminho,

onde cada indivíduo compartilha a informação com os outros indivíduos acerca de seu

caminho aleatório experimentado

Algoritmo clo tipo Rede JVelíra/ é um mecanismo que gradualmente ajusta parâmetros

até alcançar a solução.

Segundo Pirlot (1996), esses métodos são inspirados em processos que não estão

relacionados à otimização. Seus sucessos, no entanto, estão justamente relacionados à

referência de processos encontrados na Natureza, aplicabilidade genérica, flexibilidade

pífia aceitar restrições específicas de casos leais e excelente relação (//ade-(?lg) entre a

qualidade da solução e a facilidade de implementação ou tempo computacional.

Diversos autores demonstrtuam aplicações desses métodos en] problemtts clássicos cle

roteirização de veículos, como tt aplicação de uma estratégia de busca tabu para uin

problema com frota heterogênea descrito por Gendreau e/ a/. (1 999).

Segundo Cunha (2000), mais recentemente, ein particular na última década, o esforço

de pesquisa vem sendo direcionado à investigação das chamadas meta-heurísticas, como

as propostas no presente trabalho.

Este trabalho integra um conjtmto de pesquisas que vêm sendo realizadas nas áreas de

Logística e de Engenharia de Transportes na Escola Politécnica da USP e que

envolvem, genericamente, o desenvolvimento e a implementação computacional de

novos algoritmos e heurísticas de solução para problemas cle roteirização e progntmação

de veículos, cujas principais contribuições mais recentes estão relacionadas a seguir:

8 Cunha (1997) tratou do problema de roteirização de veículos com restrições

operacionais de janelas de tempo e duração máxima cla jornada. A estratégia de



7

solução proposta baseou-se na relaxação lagrangeana das restrições do modelo, a

partir da qual foram desenvolvidas duas heurísticas para o problema com frota

homogênea e uma terceira para frota heterogênea;

Souz:\ (1999) propôs uma estratégia de solução pura o problema de transporte clo

tipo ''Cargtt Unica Colega e Entrega" (r'u// Truz-k Z,oízd P/c#///2 a/zd Z)e/fveO')

com janelas de tempo em duas etapas: na primeira são gerados todos os roteiros

tecnicamente viáveis para atender as requisições de transporte dentro do período

de programação, e ntt segunda é resolvido um problema de programação linear,

do tipo píutição de conjunto (sei' pí/rrírfo/?f/zg) para a seleção dos melhores

roteiros que minimizem o custo total clo transporte;

Znamensky (2000) tratou do problema de roteirização e programação de

veículos para o transporte porta-a-porta de idosos e portadores de necessidades

especiais, atnlvés de veículos de pequena capacidade, tais como peruas ou vans.

Nesse trabalho, buscou-se determinar roteiros económicos que atendam a um

conjunto de pessoas e, ainda, que respeitem as restrições operacionais e

temporais. Destaca-se nesse problema sua fonnulação de múltiplas bttses. A

estratégia de solução para o problema de porte real foi baseada na heurística de

inserção paralela que produziu soluções de boa qualidade (redução de custos

operacionais e de frota) com agilidade computacional;

Teixeira (2001) propôs heurísticas para tratar o ploblenla de dimensionamento e

roteirização de uma frota heterogênea baseadas na utilização do algoritmo Out-

of-Killer. Essas heurísticas baseiam-se nas combinações de rotas a partir da

solução dos problemas de designação, pois o problema em questão consiste,

resuinidíunente, em compor e roteirizar uma frota de veículos, considerando os

seus custos fixos e variáveis e as restrições de capacidade, de tal forma que os

custos de distribuição sejam minimizados. Assim, o problema de designação foi

entendido colmo um problema de circulação com custo mínimo;

Fonseca (2002) tratou da alocação de atendimentos (roleta e entrega cle

mercadorias) às rotas elos veículos das empresas cle remessa expressa eln

grandes centros urbanos, e propôs uma estratégia de solução para minimizar os

tempos e custos cle colete e entrega de inercadoritts ("porta-a-porta"), com base

nos conceitos da heurística de inserção concebida por Solomon (1987), porém

e

e



8

com alocação sequencial dos atendimentos e inserção paralela em cada unia das

rotas do conjunto.

Galvão (2004) considerou o problema de programação de veículos de colete de

resíduos de biomassa de madeira, visando à sua utilização como combustível

para abastecimento de uma central produtora de energia e/ou de vapor. O

problema consiste na escolha de conjunto de fornecedores, pari\ minimizar o

custo de abastecimento, e na determinação da frota mínima necessária ptua

realizar a cometa durante um horizonte de programação correspondente a vários

dias, considerando que cada cliente tem uma periodicidade cle coleta diferente.

Os veículos realizam viagens com carga completa entre a central e cada unia das

geradoras

e

2.2. O Problema de Distribuição de Combustíveis na Literatura

A distribuição de derivados de petróleo precisa considerou essa compartimentação dos

veículos da frota. O caminhão-tanque é nonnalmente dividido em vários

compartimentos e, para melhor aproveitamento de cada veícljlo, cada cliente deve

apenas receber um volume do produto correspondente a um ou mais compartimentos

preenchidos totalmente. A prática do setor de transporte de combustíveis impede que

em uin mesmo compartimento seja carregado combustível ptua mais de um cliente. Essa

questão será discutida enl maior profundidade no próximo capítulo.

Bechtua e Galeão (1984) tratartun do problema cle roteirização de veículos paul entrega

de combustíveis ressaltando que um dos fatores complicadores ao problema é a

compartiinentação de veículos.

Bechara e Galvão (1984) sugerem, coi-no alternativa para tnodelar essa restrição, a

proibição de combinações de pedidos em veículos que sejam impossíveis de ocorrerem

pelas configurações de compartimentos existentes em um mesmo veículo. Ou seja, toda

ligação entre quaisquer dois clientes cujas demanctas não correspondam a dois

compartimentos existentes no mesmo veículo deve ser proibida

Uma alternativa proposta pelos autores é a substituição da capacidade dos veículos por

restrições associadas a uma matriz que indique os compê\rtimentos disponíveis em cada



9

veículo. Ptua cada caininhão, então, considera-se capacidades discretas (ao invés de

contínuas), confonne exemplo dado pelos autores, presente na Tabela 2.1 a seguir. Por

exemplo, o Veíc 1/0 2 possui 2 compartimentos de 8000 1, 1 de 5000 1 e l de 3000 1.

Tabela 2. 1

Para cada ligação adicionada a um elemento dtt frota, a m:\triz de compartimentos

disponíveis deve ser atualizada

Bechara e Galvão não apresentam método eficiente cle solução para esse caso

específico, Dias ressaltam cl:\lamente que essa restrição comprometia em muito a

qualidade das soluções para o algoritmo heurístico de Carke &amp;amp; Wright, utilizado por

eles par o desenvolvimento de solução para o problema de roteatnento de veículos.

Brown e Graves (1981) descrevem a elaboração de un] sistema de distribuição

automatizado enl tempo-real, com sub-rotinas de otimização para substituir o trabalho

manual e otinlizar os custos de distribuição.

O problema consiste na distribuição de até ] 6 diferentes produtos derivados de petróleo

a partir de centros de distribuição através dos quais os caminhões-tanque são

abastecidos. Os veículos varia\m muito e, em cad:\ região, possuem configurações

resultantes de legislações locais, padrões geográficos e temporais de demanda e práticas

históricas de gestão. São também diferenciados caminhões próprios de terceirizados,

indicando que podem ter composições diferentes de valor de frete.

Brown e Graves analisaram o processo na seguinte seqüência de eventos:

1) Pré-análise do despacho: VeriHlcação das informações dos pedidos e dos

veículos, revisão de casos especiais e complementação de informações faltando.

2) Edição de Veículo Compatível: Determinação de quais veículos podem ser
-'.' n... .t..dp.. r , medida considerando as restrições de equipamento e

usados para atendem

comDartimentação

 11.000 litros 8.0001itros 5.000 litros 3.000 litros
 0 2 l  

2 0 2   
3 l



10

3) Alocar Pedidos a Veículos: Alocação com objetivo de miniiniziu ctlstos

respeitando restrições do veículo e da operação.

4) Ajuste das Quantidades dos Pedidos: Ajuste nas quantidades dos pedidos,

caso necessário, para adequa-los :t compartimentação disponível e à seqiiência

de carregamento possível.

5) Revisão Final: Identificação de condições excepcionais restantes e realização

de pequenos ajustes.

6) Despacho: linpressão dos documentos de carregamento na base de

distribuição.

Os autores descreveram que os pítssos l e 5 são de julgamento humt\no e os passos 2 e 4

pareciam ser feitos de forma simples com pequen:\s regra\s básicas. O foco do trabalho

foi então a modelagem da automação do passo 3, correspondente à alocação dos

pedidos.

Para desenvolvimento dessa alocação, Brown e Graves propuserttm um modelo de

progn\mação inteira. A formulação considerava uma função objetivo em que se busca

minimizar os custos e as penalidades por desrespeitar restrições de duração da rota. Ou

seja, a formulação permite violação de restrições aplicando uma penalidade de custo. O

modelo limitou-se a entregas de veículo completo Oü// /r/rck /oízC/), pois os

consumidores eran] instruídos a pedir apenas dessa forma. As entregas de carga

parcelada eram exceções e os autores infomlanun que a alocação par:t essas viagens de

múltiplos pontos de atendimento não era facilmente automatizada, além de não haver

informações disponíveis de tempo e distância de viagens entre clientes distintos.

A otimização por programação inteira foi implementada e testada. Comprado com o

método manual, os resultados geraram uma melhor distribuição de carga de trabalho

entre os veículos com signiHlcativas reduções de custo. Os resultados também revelaram

que diversos critérios admitidos anteriormente pela alocação manual eram muito

antieconõinicos

O sistema de alocação, porém, foi considerado não-ideal para funcionar em tempo real

ein conjunto com a operação. A grande qut\ntidade de dados e o volume de transações

do banco de dados já consumittm a maior parte da capacidade de process:tmento do
I'- nn--p« r;lnlirirl lde nílra a execucão da otimização por esse métodoiestan(sistema



1 1

Brown e Graves, então, propuseram a adoção de uma heurística eficiente com

otimização inclusa (l{/7lcfenr /zelirís/íc wíf/z e/lzbed(/ed 0/2rí//zizaríon). A heurística foi

desenvolvida com um seqüenciamento de geração e resolução de problemas de rede. A

cada geração, alguns pedidos são alocados por critério do custo proletado e penalizado,

respeitando restrições dos veículos

Segundo os :\utores, após diversos ajustes e testes a heurística pennitiu o módulo de

automação da distribuição produzir excelentes resultados com boa perfomlance e

eficiência

A partir do sistema de programação de viagens desenvolvido por Brown e Graves

(1981) pt\ra uma única base de distribuição, foi desenvolvida uma extensão por Brown

ef a/. (1987). Neste trabalho seguinte, a heurística de alocução foi utilizada com uma

parte de unl mecanismo de processamento maior de forma a permitir a alocação da

distribuição a partir de múltiplas bases e com roteirização de atendimentos a diversos

clientes por cad:\veículo.

Brown e/ a/. (1987) relataram a implantação de um sistema de auxílio computacional

(chamado de co/npir/er assfsred dispare/z) no controle centralizado do comércio e da

distribuição de derivados de petróleo em todo o território continental dos Estados

Unidos da América. Segundo os autores, esse sistemtt representou importttntes reduções

de custos e equipes e melhorias do serviço aos clientes. Eles ressaltam que os custos

operacionais são muito sensíveis à decisão da alocação que a decisão no tnonlento do

despacho segue regrtts complexas que envolvem segurança e eficiência da operação

Assim, programadores de despacho ''humanos" buscam apenas soluções possíveis

aceitáveis e a otimização do problema é muito complexa para ser realizada dessa folha.

O sistema considerado por Brown e/ a/. (1987) é composto por muitos terminais e cada

temunal podendo conter diferentes produtos disponíveis entre 20 diferentes tipos. A

frota considerada era mista (veículos próprios e terceirizados), alocada em alguns

temunais. Outros terminais não dispõem cle frota no local. Os caininhões possuíam

diferentes capacidades e formatos de compartimentação. Os objetivos do processo de

despacho são minimizou os custos, balancear o trabalho entre as companhias de

hõeq e buscar o maior :u)roveitamento possível da frota.camin}1]



12

As decisões tomadas para atingir esses objetivos são: escolher o tenninal que atende

cada pedido, alocar os pedidos a cada veículo, verificar a adequação dos volumes aos

compartimentos do veículo e roteirizar os caminhões e seqilenciar as entregas.

Uma das partes de todo o sistema desenvolvido por eles é um módulo de processamento

automatizado que busca a otimização dessa alocação, pela aplicação de, segundo os
n. ,..át.H.. Hp '-ti«.ivní'ãn }ljt,.,..intn especializados". Esses

autores, "unl conjunto de métodos de

métodos são divididos em seis etapas:

1) Edição e Análise: Construção de tabelas de custos, restrições e outras

informações com relação à ligação das b:\ses com os clientes, entre os clientes e

dos catninhões com os clientes.

2) Alocação Inicial: Aloctu pedidos como carregamentos, sem ver

sequência de entrega, sendo apenas o ponto de início da otimização

3) Alocação Lineiu: A alocação de pedidos aos caminhões é realizada

objetivando a redução de custos esperados. Baseia-se na troca entre pedidos

sitnples, duplas de pedidos e assim por diante, enl geral permitindo até a segunda

troca por veículo (também chamado de melhorias k-opt).

4) Alocação Quadrática: A alocação determina, então, qual a melhor rota, ou

sequência de carregamentos e entreg:\s para os veículos, através de uma

formulação do Problema do Caixeiro Viajante

ainda aificar

5) Carregamento Final: Após a alocação e seqüenciamento de todos os pedidos,

uma rotina especifica e verifica quanto de cada produto será carregado em cada

coinpartiinento de cada veículo

6) Trocas: A solução final é testada, então, para possíveis melhorias a partir dos

custos conhecidos (e não estimados) através da tentativtt de trocar um pedido de

veículo ou trocar dois pedidos entre veículos.

Avella, Boccia e Sforza (2004) abordaram uin problema de distribuição de combustível

com uma formulação próxima à desenvolvida neste trabalho. Eles estudaram a

distribuição para postos, a partir de um único local, com uso de frota heterogênea de
ifprpnfpç cnnacidades e oerfil de comptutimentosctuninhões-tanque, isto é,Saiil] L



13

O objetivo do problema descrito pelos autores é otimizar os custos de transporte com os

recursos já disponíveis. A solução do problema é um conjunto de rotas de cada veículo

que devem iniciar e terminal em um depósito (base)

As restrições que restringem a distribuição são: cada cliente deve ser visitado uma única

vez por dia; o custo total de viagem diária precisa oconer dentro do tempo de um dia de

trabt\lho de cada veículo; e cada veículo não pode ser canelado além de sua capacidade

ptua cada\ rota simples.

O enfoque dado pelos autores buscou resolver o problema por um método exato a partir

de uma nlodelagein baseada ein Sef Parfí//o/zlng, sendo utilizado um algoritmo fira/zc/z-

a/zd-Prime para a solução do problema. A estratégia de solução proposta pelos autores

compreendeu ainda uma heurística rápida para a busca de uma boa solução viável e para

realizar o pré-processíunento do algoritmo exato a Him de limitam o número de

combinações avaliadas

Para essa solução, os autores elaboraram uma naatriz na qual cada linha representa um

cliente e cada coluna uma rota de um caininhão. Um custo é calculado através dessas

rotas e associado a cada coluna. Para reduzir o número de colunas e identificar eliminar

algumas soluções inviáveis, realiza-se um processamento que elimina colunas quando

elas não satisfazem as restrições do problema (como capacidade do caminhão e jornada

máxima) ou quantia não satisfazem a economia mínima dada pela heurística.

Elll seguida, a otimização é dada pela minimização do custo total sujeito às restrições de

cada cliente ser visitado apenas unia vez por dia e o custo total por caminhão não

exceder a jornada de trabalho do dia

As soluções encontradas foram comparttdas qu

custo total e número de catninhões utilizados

A primeira diferença entre o problema estudado por Avella, Boccia e Sforza e o

problema apresentado neste trabalho é na formulação matemática, voltada para o

método de solução de Sef Parfiff0/7íng. As restrições principais estão consideradas nas

colunas geradas e eliminadas, sobrando um problema de otimização com fonnulação

mais simples.

A segunda diferença é que os caminhões podem fazer mais de unia viagem e o
dP ««áliKe é cima jornada de trabalho diária. A formulação é focada para

anto ao tempo compull

horizonte

racional necessário



14

diversos clientes a serem atendidos diariamente e, por conseqüência, na decisão da frota

a ser adorada. No problema que será aqui apresentado, no entanto, a decisão é na fonna

de atender uln grupo de pedidos a serem entregues com ct\da caminhão realizando

apenas unia viagem.

Além disso, outros detalhes também diferem como tamanhos e compartimentação dos

veículos e o número de clientes que podem ser atendidos em cada viagem: quatro,

:apesar dos veículos possuírem de sete :t nove compartimentos.

2.3. Considerações Finais

O problema proposto nesse trabalho é o de distribuição com frota heterogênea com

compartimentação com veículos atendendo múltiplos clientes a partir de uma única

base. Outras especificidades são considerada\s e descritas no próximo capítulo. Propõe-

se também a busca por um método heurístico de solução.

Assim, o trabalho aqui proposto se difere dos demais, seja pela formulação do problema

(distribuição atendendo múltiplos clientes a ptutir de uma única base), sqa pela

estratégia de solução aditada (solução através de uin método heurístico)

Por ülm, é possível sintetizar os principais aspectos da literatura existente para

distribuição de combustíveis para postos de abastecimento:

e Bechar:\ e Galvão (1984) apenas apontam a existência da questão d:\

compartiinentação dos veículos como fator complicador do problema de

distribuição.

. Brown e Graves (1981) resolvem o problema para atendimentos de um único
i; n.. .,PÍP--],. , n«-tir e iimll única btise atrttvés de método exato e

cliente por

heurístico.

. Brown e/ a/. (1987) estendem a solução heurí

clientes para veículos partindo de múltiplas bases.

e Avella, Boccia e Sforza (2004) resolvem um problema semelhante ao aqui

proposto, a partir de uma base, com veículos atendendo a múltiplos clientes,

através de uin método exato, utilizando uma heurística para realizar o pré

processamento do mesmo. Esta fomaulação baseia-se, no entanto, numa

modelagem Sef Par/i//o/?//zg.

stic:\ tinterior para múltiplos



15

3 CARACTERIZAÇÃODOPROBLENIA

Este capítulo tem por objetivo apresentar a caracterização completa do problema

proposto da programação de entregas de derivados de petróleo em postos de

abastecimentos a partir de umtt base de distribuição Inicialmente, é apresentado na

seção 3.1 a caracterização geral, sua inserção na cadeia logística petroquímica e as

principais características e condicionantes do problema. Na seção 3.2, em seguida, é

apresentado o detalhamento do modelo matemático proposto

3.1. A Cadeia Logística de Distribuição de Derivados de Petróleo

A cadeia petroquímica é composta por diversas etapas, que vão desde a extração do

produto natural bruto até o consumo final na forma de derivados. Segtmdo Silveira

(2002): "Na cadeia petrolífera, compreendem o &amp;amp;lp.ç//ea/}z as atividades de exploração e

produção de petróleo e gás natural. O segmento /?z/dsf/ea/zz inclui as atividades de

defino, transporte, e a importação e exportação de petróleo, gás natural e derivados.

Define-se como dow/zs/rea/rz. o segmento da cadeia petrolífera que inclui a distribuição e

,i revenda de derivados a partir das refinarias de petróleo'

O ciclo dow/]sfrea//i é caracterizado pelas etapas de transporte dos produtos da refinaria

às bases das distribuidoras, tun)azenagem e distribuição o ponto de atendimento tto

consumidor final: os postos de abastecimento, também chamados de "postos de

combustível

A distribuição de derivados consiste, então, no transporte do produto final no ciclo

dovt,nsfrea/7z, a partir dos insumos recebidos por refinarias de petroquímicas e reüinaritts

de álcool

3.1.1. Das Re$ttarias para as Distribuidoras

Os reservatórios das distribuidoras são os pontos onde são armazenados os combustíveis

visando a sua distribuição pal'a os postos de combustível.

Em geral, gasolina e óleo diesel são originários de uma refinaria petroquímica onde são
H- ..trÁ]Pn hl'iitn }itrllvés dn transoorte usualmente feito

produzidos a partir do reíinorti(IL



16

por duros. Por isso, ao redor das refinarias é comum o estabelecimento de diversas bases

de redes de companhias distribuidoras (por exemp]o: She]], ]piranga, BR etc.).

O Álcool é recebido, geralmente, por meio rodoviário, através de caminhões-tanque que

trazem o produto originário de regiões de plantio e beneHiciamento de cana-de-açúcar.

Os produtos são comprados por volume e existem quatro tipos de produtos recebidos:

Óleo Diesel, Gasolina Tipo A, Álcool Anidro e Álcool Hidratado.

O Óleo Diesel e o Álcool Hidratado são os mesmos produtos vendidos posteriomlente

nos postos. A Gasolina Tipo A e o Álcool Anidro são misturados pelas distribuidora\s na

proporção 80% e 20qo, respectivamente, para formar a Gasolina Tipo C, que é a vendida

nos postos de combustível.

3.1.2. Comerciatiz,ação

A comercialização dos produtos aos postos de combustível e demais clientes (empresas

de transporte, indústrias etc.) pelas distribuidoras pode ser realizada pelo escritório

localizado na base de distribuição ou enl escritórios comerciais avançados. Caso a

distribuidora possua mais de uma base, a eficiência logística pode estar atrelada à

decisão de que base deve atender cada pedido, antes de proceder a programação de

distribuição e a roteirização dos pedidos.

Algum:ts distribuidoras, no entanto, visualizam cada base de distribuição colmo uma

unidade de comercialização e, assim, pedidos vendidos por cada base são atendidos por

ela, mesmo que a eficiência do resultado global possa ser comprometida

A distribuidora, como o próprio nome define, tem como produto principal o transporte

dos derivados pma os pontos de venda e sua eülciência logística atinge diretamente o

preço (valor do frete) e :t qualidade (tempo e confiabilidade de entrega).

Entre práticas percebidas durante a venda que visam economia no transporte, percebeu-

se que os vendedores são instruídos a tentar realizar ve/idas casadczs, isto é, tentou

completar volumes de 15.000 1 ou 30.000 1 para uma mesma região. Esses volumes

estão relacionados à capacidade máxima de um caminhão típico e permite uma vlagein

com caiba completa. Porém, isso acaba sendo apenas intuitivo e extremtunente

lp-.tp dp rnndicões de comercialização e da demanda dos clientes.
depen

/''b



17

3.1.3. A Flora

A compartimentação dos veículos é uma importante restrição do problema. Ela é

padronizada e os pedidos apenas podem ser alocados em compartimentos completos,

lo apenas utiliza um compartimento totalmente vazio ou totalmenteisto é, u

cheio

veicuIn

A verificação da quantidade de combustível em um compartimento durante o
recebimento é feita pela sua capacidade total, não sendo usualmente pr:tticada a

medição de um volume inferior ao do compartimento cheio. Por isso, não se utiliza um

compartimento para atender mais de um posto de combustível

Por essas razões, os veículos-tanque devem portttr o documento de calibragem válido

para realizar qualquer transporte de líquidos a granel, chamado Certificado de

Verificação. A capacidade nominal de cada compartimento é indicada por um

dispositivo de referência, que é uma gemi-esfera na ponta de uma haste metálica.

Conforme o INMETRO (1998), o volume nominal é correspondente ao líquido no nível

desta esfera, com uma tolerância de 30mm. Esse dispositivo é populannente conhecido

como''seta''

Quando o volume está abaixo ou acima da seta, não existe nenhum tipo de escala que

indique qual o volume no tanque, apenas sabe-se que é superior ou inferior ao volume

nominal

O padrão estabelecido pelo mercado para os veículos-tanque e, conforme classificação

do TNMETRO (1993) são:

e Caininhão-tanque, com tanque montado sobre o próprio chassi. Chamado de

fruck, padronizado em três compartimentos de 5.000 litros, totalizando

15.000 litros.

e Tanque-reboque ou semi-reboque, sem propulsão própria, transportados com

auxílio de caininhão tutor (cavalo). Esses veículos são ch:\mados de cafre/a. Os

compartimentítdos, possuetn dois padrões: seis compartimentos de 5.000 litros;
,i. «nnn ]it.nç p anis de 10.000. Ambos padrões

ou dois compartimentos d

totalizando 30.0001itros



18

Para o problema aqui proposto, então, foram considerados os três tipos comuns de

veículo, confonne a sua compartimentação. Isso também permite identificar o tamanho

do veículo. A codificação do tipo de veículo no exemplo criado segue a apresentada no

Quadro 3.1:

3.1.4. Alocução da l)istribttição

O objetivo da distribuição é realizar as entregas tios clientes, geralmente postos de

abastecimento, comi o menor custo total. Existem dois componentes tradicionais na

determinação do custo total: custos variáveis por veículo e custos fixos por veículo. O

custo variável por veículo, neste caso, é diretamente proporcional à quilometragem

percorrida e representa a parcela referente ao gasto com combustível, lubriHlc:\ates,

pneus, desgastes com peças, etc. O custo fixo por veículo é a parcela referente à mão-

de-obra alocada disponível, depreciação e remuneração de capital sobre o valor da frota

e custos administrativos como seguros, licenciamentos, entre outros.

O objetivo da alocação, por tanto, é realizou as entregas com o menor custo total. Esse

custo é representado por um:t parcela de custos variáveis, proporcional à soma de

distâncias perconidas, e uma parcela de custos ülxos, proporcional ao número de

veículos alocados. Portanto, o objetivo é minimizou as distâncias percorridas e a

quantidade de veículos utilizados.

A frota pode ser própria ou terceirizada. A frota terceirizada é composta por empresas

transportadoras especializadas nesse tipo de serviço ou de caminhoneiros autõnonlos

cadastrados pela distribuidora. No caso de frota terceirizada, é usual o custo fixo ser

diluído ein um valor de frete quilométrico

Para análise de frota própria, é importante ressaltar que existe unl problema anterior ao

problema aqui exposto, que é a decisão do tamanho e composição da frota. Não será

tãn de decisão de tam:anho e composição da frota, luas apenas}ibordaclo portanto, a quisi'taClz

Tipo Tamanho
Volume Máximo

(ntros)

Compartimentação
(10' litros)

 Truck 15.000 5 - 5 - )
2 Carret a 30.000 5 - 5 - ) - ) - ) - )

3 Carreta  



19

a otiinização de utilização de uma frota pré-determinada. Esse trabalho, no entanto,

pode permitir que as alocações mais económicas revelem, em médio prazo, a real

necessidade de frota de unl determinado distribuidor.

Ein caso de frotas mistas (própria e terceirizada), considera-se a preferência pelo uso da

frota própria, pois ela é teoricamente mais barata. Além dela já estar disponível, com

parte dos seus custos já consumados e que incidem independentemente do uso, a frota

própria não inclui a parcela de lucro do frotista terceiro. A frota utilizada é, então,

complementada por veículos terceirizados apenas quando necessário. É prática de

algumas empresas do setor, inclusive, a utilização de terceiros para a demanda que

excede a capacidade da frota regular própria nos momentos de picos de

contercialização.

3.1.5. TiposdePedido

Podem existir diversas restrições operacionais no pedido, como, por exemplo

e Horário de entrega;

e Padrão do veículo;

e Tamanho do veículo

Com relação ao horário de entrega, pode existir a necessidade de definição de uma

janela de tempo para os clientes por razões de horário de funcionamento,

disponibilidade de funcionário capacitado :\o recebimento e descanegainento do veículo

ou restrições de circulação em vias urbe\nas. Como, na prática, unl número muito

reduzido de pedidos tem esse tipo de restrição, essa restrição foi desconsiderada com o

objetivo de simplificou o problema e sua resolução-

O padrão do veículo é a pintura do veículo pela qual é identificada a distribuidora. As

distribuidoras, em geral, exigem da sua rede de postos que o combustível sqa exclusivo

da própria distribuidora. Porém, na prática, existem postos que complain combustível de

outras distribuidoras, exigindo que o veículo esteja identificado como sendo da

distribuidora correspondente ao posto

A consideração ou não dessa restrição deve ser avaliada caso a caso, pois existem
Ip ....:. -unir'$i t'ede dispensando. portanto, esse tipo

distribuidoras q

de restrição

ue atendem a postos (S(

.Õ''\



20

O tamanho do veículo pode ser restrito enl postos menores, que não suporttun o

recebimento por carretas. Neste caso, a entrega deve ser exclusiv:tmente realizada por

veículos do tipo /rlíc-k.

3.1.6. Alocução Manual Entpírica

As distribuidoras geralmente realizam a programação diária das entregas manualmente,

de maneira empírica. Preferencialmente, os pedidos devem ser entregues até o dia

seguinte. Na prática, no entanto, os prazos dependem de relações comerciais específicas

entre a distribuidora e cada posto de combustível. As solicitações são feitas direto para a

distribuidora portelefone

Essa alocação é feita através de pessoal treinado que trabalham utilizando as seguintes

informações:

e Localização dos clientes, agrupados por regiões;

. Pedidos já aprovados para entrega, com características de cada pedido;

e Frota disponível, com características de cada veículo.

Durante a alocação, os pedidos mais difíceis de atender, chamados de especiais, são

resolvidos antes. Isto é, existe prioridade para alocação dos pedidos de acordo com:

,'\

e Exigência de padrão de caminhão;

e Horário de entrega programado;

e Distância muito grande.

Enl seguida, tenta-se completar a carga desses veículos com outros pedidos da mesma

área. As áreas de agrupamento de pedidos são correspondentes às rotas de tráfego

usuais. Isto é, são, na verdade, grupos de clientes localizados em cidades posicionadas

ao longo de um mesmo eixo rodoviário.

Pontos de atendimento mais distantes tendem a ser atendidos pelos veículos

terceirizados, dando prioridade a atendimentos mais próximos através dos veículos

próprios. O tempo de ciclo dos veículos próprios torna-se menor, permitindo que

realizem um maior número de viagens

De forma geral, tem-se uma lista de frota, com tipo do veículo, compartimentação e
1;,1.. i.dinnrln rnM 0 VOIUiite. 0 lOCal e aS

A outra lista possui os pe(padrão cle pintulít
Sstz(



21

observações de restrição. O Quadro 3.2 apresenta exemplos de dados disponíveis para a

realização da alocação.

Pedidos de uma mesma região, ou rota, são agrupados até completar um veículo

completo.

3.2. Modelagem Nlatemática do Problema

Descreve-se nesta seção a modelagem matemática proposta pífia o problema da

distribuição de combustível a partir de uma base de abastecimento (em geral, um

terminal) de uma distribuidora para postos de combustível. Para a realização dessa

distribuição, dispõe-se de uma frota heterogênea de caminhões-tanque e é necessãno

determinar a forma colmo essa frota disponível será alojada pari\ o atendimento de um

conjunto de pedidos

Mais especificamente, pretende-se definir a alocação ótima dos pedidos t\os veículos e a

sequência de entrega de cada veículo. Trata-se de uin problema de roteirização de

veículos com frota heterogênea a partir de uma única base e com restrições especiais de

capacidade devidas à compartimentação dos veículos. Os roteiros envolvem um número

limitado de paradas, correspondente ao máximo de seis para as carretas, embora na

prática un] veículo não faça mais que duas a três paradas.

O objetivo da distribuição é realizar as entregas com o menor custo total possível. Como

a frota é heterogênea essa solução deve levar em consideração que cada veículo tem um

:la questão de utilizar frota própria ou de terceirosalémcusto diferente associadoS
[lS [

Pedidos
Local Volume Observações

São Paulo-SP 5.0001 nenllttma

Sorocaba-SP 20.0001 Dttdrão: A ou B

Diadema - SP 15.0001
horário: 7-12h /

só truck

São Paulo - SP 5.0001 oadrão: só C

ltu - SP 5.000] só truck

   

Frota

I'iPO Compart. Tipo Pintura
[ntck 5-5-5 Próprio A

Cara'eta 5- 1 0-5-10 Próprio B

I'rock 5-5-5 Próprio C

Carreta 5-5-5-5-5-5 Terceiro A

    
    



22

3.2.1. Modelagent dos Caminhões-Tanque

Além do p:tdrão de pintura e do tipo (tamanho e compartimentação) dos veículos, é

importante considerar que parte da frota é própria da distribuidora e parte conesponde a

veículos terceiriz:idos. Os veículos que compõem a frota própria possuem custos fixos

maiores e custos variáveis menores. Veículos terceirizados, no entanto, possuem custo

variável elevado, uma vez que o frete dos serviços prestados deve cobrir toda

retnuneração, inclusive :t referente :\os custos fixos nos momentos de ociosidade. Desse

modo, busca-se a maior utilização possível de veículos próprios, uma vez que a

ociosidade destes é indesejável para a distribuidora, pois incidem custos, ao contrario

dos veículos de terceiros. Por outro lado, caso a frota própria não consiga atender toda a

demanda é preciso determinar qual a melhor alocação e utilização das frotas própria e

terceirizada, de tal modo a minimiza\r o custo total de distribuição.

O conjunto de veículos disponíveis é dado por V:l1,2,...,1y l}

Os veículos v € y são, então, diferenciados através de três características principais:

e Pt\drão cle Pintura;

e Propriedade (próprio ou terceirizado);

e Tipo e tamanho de veículo.

O padrão de pintura interfere diretamente na possibilidade ou não de unl determinado

veículo atender um detemunado cliente. Confonne mencionado anteriormente, pode ser

uma restrição não atava en] alguns problemas

A identiHlcação se o veículo é próprio ou terceirizado e o tipo e tamanho de veículo têm

implicações diretas nos custos fixos e variáveis que são atribuídos à rodagem de cada

veículo

Assim, como este caso configura-se com frota heterogênea, essas características

(propriedade e tipo de veículo) levam à necessidade de atribuir um custo Hlxo para cada

veículo v c y , dado por c#

De modo semelhante, define-se o custo variável de rodagem para cada veículos c V

cOlHo cv.,

A atribuição de custo fixo aos veículos pemlite maior flexibilidade no uso do modelo,

hém rjiie ele auxilie a decisão sobre o melhor uso de frota. No caso da
permitindo taml (

..''\



23

decisão ser operacional, isto é, programação diária dos roteiros de entregas a partir de

veículos já alocados à operação, os custos fixos da frota própria podem ser

desconsiderados, umt\ vez que os veículos já estão disponíveis para uso, não inconendo

nenhum custo adicional para tanto. Neste caso, o modelo matemático proposto permite

ainda definir ena que rotas é melhor usar a frota própria e quais devem ser alocadt\s a

terceiros, caso a frota própria não consiga atender todas as entregas programadas.

Conforme afirmado anteriormente, os compartimentos presentes nos veículos podem ser

de 5.000 ou de l0.000 litros. Uma vez que o volume de cada pedido é sempre múltiplo

de 5.000 litros, a identificação da quantidade de compartimentos de 5.000 litros dos

veículos é importante na modelagem para garantir que uma quantidade de 5.000 litros

não sela alocada a um compartimento de l0.000 litros.

Por exemplo, para transportar um pedido de 5.000, 15.000 ou 25.000 litros é necessário

assegurar que o veículo disponha, além da capacidade total, de pelo menos um

compartimento de 5.000 ]itros. Por outro lado, um pedido de 10.000, 20.000 ou 30.000

litros, no entanto, apenas necessita da disponibilidade de seu volume total para que seja

possível sua alocação, sem qualquer restrição quanto ao tamanho dos compartimentos.

Essa percepção evita que seja necessária a modelagem da alocação de cada pedido a

compartimentos específicos. Assim, apenas o monitorainento da necessidade de uso dos

compartimentos de 5.000 litros garante que a alocação de pedidos a unl caminhão esteja

adequada e seja viável

Por isso, define-se V5.. indicando a quantidade de compartimentos de 5.000 litros de

cada veículo v c y

Outra característica importante na modelagem é o volume máximo, ou capacidade,

admitido (ein litros) em cada catninhão y c V , dada por V/?zíz.r.

3.2.2. Modelageltt dos Clielttes e daB

Cada cliente corresponde a um posto de combustível capaz de realizar um pedido de um

tipo de combustível para a distribuidora. As seguintes características dos clientes foram

considera\das para solução do problema:

B Localização geográfica;

Tina de c inlinhões club podem atender

ase

e



24

O conjtmto de clientes é dado por {1,2,...,1 / 1} . Adiciona-se ao conjunto o ponto {0},

correspondendo à base de distribuição de onde partem os veículos. Assim, define-se

/ = {1,2,...,1 / 1} u {O} , onde {O} corresponde à base de distribuição

Define-se um grafo G = (N,.A) onde ]V é o conjunto de nós do problema / , enquanto

A é o conjtmto de arcos ou ligações entre os nós.

A localização real do cliente corresponde a uin ponto numa malha viária, que derme uin

nó í € N no grafo G . Como se considera que o caminhão sempre utilizará o traçado de

caldinho mínimo ou de menor impedância, pode-se determinar os arcos (í,J)c A da

rede e a mt\triz de distâncias entre os clientes, obtida pela aplicação de uin algoritmo de

caldinho itiínimo entre todos os p:\res de nós do grifo G . Unl código-fonte para esse

algoritmo ein C++ é apresentado por Sedgewick (2002).

Assim, assume-se serem conhecidas todas as distâncias d.J entre clientes í, ./ c / que

correspondem a arcos do grafo.

A outra informação importante para caracterização de cada cliente é o tipo de veículo

que pode atendê-lo. Conforme mencionado anteriormente, existe a limitação do padrão

de pintura e do tamanho do veículo

O padrão do veículo é definido pela pintura do mesmo veículo a qual identifica a

distribuidora. Algumas distribuidonis exigem da sua rede de postos que o combustível

seja exclusivo da própria distribuidora. Muitos postos compram combustível de outras

dístribuidortts, Dias exigem que o veículo estqa identificado como sendo da

distribuidora correspondente ao posto. Conseqilentemente, decidiu-se pela incorporação

dessa restrição, pois é fator determinante na viabilidade prática da solução do problema

para muitas distribuidoras, particularmente as menores. Essa característica, no entanto,

não é estendida a todas as operações dessa natureza. A maior parte das distribuidoras

operam apenas com veículos de um único padrão.

O tamanho do veículo pode ser restrito em postos menores, com área reduzida, que não

suportam o iecebilnento por carretas. Neste caso, a entrega deve ser exclusivamente

realizada por veículos menores.

Assim, a fim de considerar as condicionantes de padrão de veículo e tamanho, para cada
,+;...H. ..n .á nn..í«PI nii nãn n :rendimento de um determinado pedidoveículo ine (



'\

'\

25

através de uma mt\triz de coeficientes binários, que representa o conjunto dessas

restrições. Mais especificamente, para cada cliente í c / -- {0} , temos a possibilidade ou

impedimento do mesmo ser atendido por detenninado veículo v c V da frota, dada por:

11, se o veículo v pode atender o ponto i

10, caso contrário
R

3.2.3. Modelagent dos Pedidos

A modelagem proposta considera apenas os pedidos que a distribuidora deve entregar,

desconsiderando, por motivos óbvios, eventuais pedidos retirados pelos clientes na

própria distribuidora utilizando veículo próprio ou de terceiros.

Cada solicitação de um cliente indica uma combinação de quantidades de derivados de

petróleo a serem entregues. Por exemp]o: 15 000 litros de gasolina, 5.000 litros de
álcool e l0.000 litros de óleo diesel. Os pedidos são sempre padronizados, como

múltiplos de 5.000 litros e :t quantidade máxima de 30.000 litros.

Dada a grande dificuldade de modelagem dos pedidos compostos de quantidades de

diferentes combustíveis, decidiu-se pela representação dos pedidos de fauna

simplificada. Por exemplo, uma solicitação que envolva gasolina, álcool e óleo diesel,

cuja soma seja maior que a capacidade de um caminhão, não é possível, a priori, saber

qual desses combustíveis deveria ser agrupado dos demais que resultasse na solução

ótima. Então, pedidos formados por grupos de pedidos teriam que possuir uma estrutura

de dados que permitisse seu agrupamento e desagrupainento. O algoritmo, por suta vez,

também deveria ser capaz de testar as várias hipóteses. Deve-se destacar que, na prática,

pedidos contendo múltiplos itens e quantidades elevadas são raros e podem ser tratados

separadamente, dada a sua complexidade e a necessidade de un] ou mais veículos

exclusivos para atendê-los

Assim, a representação dos pedidos foi, então, determinada através de pedidos

desmembrados que nunca podem ser alocados em um mesmo compartimento. Em

outra\s palavras, cada pedido conesponde a um único tipo de combustível. Por exemplo,

um pedido de um cliente correspondente a l0.000 litros de gasolina e 5.000 litros de
dp'''..nnoRtQ e representado Dor dois pedidos sept\Fados, uln pedido de 5.000álcool é



26

litros e outro de l0.000 litros, ambos destinados para um mesmo local ou cliente. Isso

facilita a modelagem da alocação dos pedidos aos veículos com diferentes

coinpartinaentos. Ressalta-se que, então, pode eventualmente ocorrer de um cliente

receber pedidos divididos em vários caininhões.

Assim, a representação dos pedidos foi simplificada a duas características:

e Identificação do cliente;

e Volume do pedido, ou seja, a quantidttde de um tipo de combustível a ser

entregue, que deve ser transportada em unl ou mais compartimentos cheios de

un] veículo.

O conjunto de pedidos é dado por P: {1,2,...,1 P l}

Pari\ cada pedido pc P é conhecido o cliente C/fe/?re,, t\o qual o pedido deve ser

entregue, tal que C/le/?/e., € /

Paul evitar que algum pedido não possa ser atendido, um pré-processamento deve evitar

que existam pedidos maiores que a máxima capacidade do maior caminhão (30.000

litros, no caso estudado). Caso exista\ um pedido maior, deve-se septuar em pedidos

maiores possíveis e unl único pedido menor. Por exemplo, um pedido de 35.000 litros

decomposto enl dois pedidos para um mesmo cliente: um de 30.000 litros e outro de

5.000 litros./(A.

Adotou-se, como premissa para o modelo aqui proposto, não consider:\r a otimização da

divisão de pedidos maiores que 30.000 litros. A decisão da forma de dividir esses

pedidos pode afetar o resultado da alocação final e é um problema adicional bastante

complexo por si só, que se sugere contemplar em unia abordagem futura.

Assim, determinttmos o volume de cada pedido p c P como VoZ,

Conforme explicado anteriormente, é necessário observar se, por seu volume, o pedido

necessita do uso de um compartimento de 5.000 litros ou se ele pode igualmente ser

atendido por compartimentos de 5.000 e l0.000 litros. Assim, pedidos de 5.000, 15.000

e 25.000 litros necessitam de, ao menos, um compartimento de 5.000 litros para serem

i...,i... E..., ;dp«tira«.-ão é feitio nau cada pedido p c P através de:
C



27

ÍI, se necessita o uso de compartimento de 5 .000 1
- R5 -&lt;

1 0, caso contrário

3.2.4. Variáveis de Decisão

Para cada arco que liga a base e os clientes, define-se uma variável binária que indica se

o caminhão v c V passa pelo arco (i, ./) c A , com í, ./ c / , da seguinte forma:

ÍI, se ./ é visitado imediatamente após f pelo veículo y- x"::q' "
1 0,caso contrário

Para cada pedido e veículo existe uma variável binária que indica se o pedido p c P

está alocado no veículo y c y

ÍI, se o pedido p é avocado :!o veículo v

[0, caso contrário

Para cada arco (/, ./)e À e cada veículo v c V' , define-se também uma variável de fluxo

pica evitar a criação de sub-rotas, como será visto adiante (restrições (9) e(IO».

z:':à o

3.2.5. Fultção objetivo

A função objetivo corresponde à minimização do custo total, composto pelas parcelas

de custo fixo dos veículos e custo variável proporcional à distância total percorrida.

mi«E:Íd x XJ, +EI«., x a., x XÓll
\'cv .je./ \... /e/ /

(1)



28

3.2.6. Restrições

Cada uln dos pedidos p c P deve ser avocado a um e :\penas um único veículo:

qj ietlte. 'qpc P (IZ3

Nenhum veículo pode ter pedidos alocados que necessitem de mais conlpartiinentos de

5.000 litros maior que o número desses compartimentos disponíveis em cada veículo

E IXS, x yp.IÉ V5..
/K/'

VvcV (3)

Nenhum veículo vc V pode ter sua capacidade máxima superada pela quantidade de

volume total alocado:

E lv./, * r, ., 1 : v -*..
/KP

(4)

Parti todo pedido p c P , o cliente ./ = C/fe/?re, , quando alocado a uin caminhão vc V

precisa necessariamente ser visitado por este caminhão.

qPe P , Nve V 'qàc: l (5)

Cada um dos veículos vc ydeve respeitar as restrições de tamanho e de padrão de

veículo permitido para cada cliente j € /

X
Í€/

V/ c / -- {0} , Vv c V (6)

Cada ponto k c / da malha no qual chega um detemunado veículos vc V , deve sair o

rno veículo, garantindo a continuidade de fluxo das rotas determinadas:iões

- Ex;l
jeJfc/

Vk c / , Vv c V (7)



29

Cada veículo vc V pode fazer apenas uma rota, isto é, ele pode deixar a base {O} c /

a,l)enas t,imtt única vez

\'

X ÉI
OJ

Je/-lol

(8)

As condições de continuidade e de realização de umzt única rota não garantem por si só

que o conjunto de soluções representem rotas válidas. Soluções inválidas que aqui se

refere são aquelas que foram as chttmadas sub-rotas (sllbfol rs). Entre as formulações

existentes na literatura para proibir esse fenómeno, foi escolhida a formulação proposta

por Gavish e Graves (1978) aplrd Bodin ef a/. (1983), conforme ilustrado no Apêndice

A, que introduz uma variável de decisão Z;j que, atrelada pela equação (IO) aos arcos

que conlpõenl a solução, cria um sequência de valores válida para todos os pontos

exceto a base de veículos 10} c /

Porém, no caso estudado faz-se necessária um:t modificação em relação à formulação

originalmente proposta. Os autores determinaram equações para solução do Problema

do Caixeiro Viajante, no qual um determinado veículo percorre todos os pontos da rede.

No caso aqui estudado, o veículo apenas percone alguns pontos e estes pontos são

indicados pela variável de decisão X;j

Ou seja, para pontos não selecionados como parte da rota de uln veículo, as variáveis

que seqüencianl os arcos serão nulas em torno desse ponto, assim como a diferença em

torno

Assim, em cada conjunto de arcos que são atendidos por cada veículo v c V , tem-se:

)l.lz;', -}.lzà: = -tx)l.lx;, vk € .r - {o} , vv c y
3el iel jei

Z;) $ M x X;J

(9)

Vv c V , Vj,V/ c / , A/ &gt;1 / 1 (10)

Define-se /W como uma constante suülcientemente grande. Na prática, basta assegurar

que À/ 21 / 1.



30

Por fim, definem-se as variáveis de decisão Xjjj

não nulos.

{o,l}

y,,.. c {0,1}

7'' &gt; n
'ij ' '

e y como binárias e ZI , como reais
1/,1' ' JtJ

' qve'V , NiNie l

qPe P.N'oc:V

' qv e'V , ''qi,Nic l

(1 1 )

(12)

(13)

3.2.7. Sumáüo da Modelagem Matemática

A ordem de grandeza de variáveis da formulação matemática excita é

2* l,r'l: - l.r'llx lv'l -- lpl x l\''l
H

Sendo:

a quantidade de pedidos;

a quantidade de veículos;

/'l a quantidade de clientes mais a base

A seguir, apresenta-se um resumo da modelagem

anteriomlente.

Função OtÜetivo:

Restrições:

}ey jeJ \. lc/«*«:=1 a, *xJ, -- :G«. *'., *x;;lley Je/ \. íc/

matemática apresentada

(1)

VPe P (2)

H E ip.s, xb.. IÉ vs..
/KP

Vvc V (3)



31

E G"/,, * r,, ., ) ' «,««..
/n/''

(4)

x.'} à y,.
f€/

- :X;') ÉR jt'
f€/

/ Cliente,, , 'qpe P , ''gv e V (5)

(6)

(7)

(8)

V/ c / -- {0} , Vv c y

Ex;l x;', :o
iel je:J

- :xà', çi
je/-l01

Vk c / , Vv c y

Vk € / -- {0} , Vv c V (9)

(10)Vv c V , VÍ,Vj c / , /14 21 / 1

Considerações Finais

Buscou-se aqui demonstrar a estrutura geral do problema de roteirização de entregas de

petróleo, suas condicionantes e ainda contribuir através da elaboração de um modelo

matemático píua o probletna. Esta modelagem conesponde a uma instância de um

problema mais geral de roteirização de veículos: a roteirização de entregas a partir de

uma base única, com o uso de uma frota heterogênea, veículos compartimentados e com

restrições adicionais para determinado veículo atender determinado cliente.

Colmo descrito anterionnente, problemas de roteirização de veículos são de classe NP-

difícil (Cunha, 2000), o que significa que o esforço computacional cresce

exponencialmente com o tamanho do problema. Portanto, torna-se impossível resolver

através de métodos exatos utilizando pacotes comerciais. A implementação da

modelagem matemática em pacotes comerciais de programação linetu inteira mista e a

resolução de pequenas instâncias de problema são apresentados no Capitulo 4 a seguir.

Coloca-se, então, a necessidade de desenvolver uma heurística que permita a solução de

-"";'-' Pn'''»ntrndnq nli nrática. No Caoítulo 5 é apresentada a estratégia de soluçãoinstâncias e

proposta



32

4 DETERNlINAÇÃODASOLUÇÃOEXATA

Como foi visto anteriormente no Capítulo 3, o problema de roteirização de veículos

apresenta complexidade exponencial, o que impede a solução de instâncias reais

utilizando pacotes comerciais de programação linear inteira, tais como o /Z,OG CPLEX,

GÀÀ/S, etc, requerendo o uso de métodos heurísticos.

A fim de validar a modelagem matemática proposta no capítulo anterior (seção 3.2) e

permitir a verificação dos resultados da heurística de otimização proposta no próximo

capítulo, foram elaboradas duas implementações do modelo matemático utilizando dois

pacotes comerciais de programação linear inteira mista

O primeiro modelo, em planilha eletrõnica, teve como objetivo auxiliar na elaboração e

validar a formulação matemática proposta, aproveitando a característica visual desses

modelos com a facilidade de estruturação, e está descrito na seção 4.1.

Para esta implementação foi criada uma instância de pequeno porte para auxiliar na

validação do modelo matemático e pemutindo a conferência manual da solução obtida

ein termos das restrições do modelo e da solução ótima da função objetivo. Essa

instância possui 10 pedidos, 4 clientes e 4 veículos, como será detalhado adiante

O segundo modelo, apresentado na seção 4.2, foi fonnulado para servir de teste na

solução do problema aqui apresentado e, caso fosse possível, serviria para comparar

com os resultados do algoritmo heurístico proposto no Capítulo 5.

Nesta segunda implementação, foi inicialmente buscada a solução da mesma instância

utilizado no teste da planilha eletrõnica. Em seguida, foram criadas e testadas as

soluções de outras instâncias, progressivamente maiores, apresentadas na seção 4.3.

Ambas as implementações utilizam as mesmas fórmulas e nomenclaturas das variáveis

indicadas anterionnente na seção 3.2

4.1. Solução Utilizando o So/ver para Planilha Eletrânica

O modelo matemático desenvolvido foi implementado em planilha eletrõnica para ser

resolvido através do aplicativo de otiinização So/ver da F'r0/7f/íne Sysfe//zs e distribuído

com o 714icros(záf Exce/. O So/ve/", entre outras funções, permite obter a solução ótima

para problemtts de programação linear e linear inteira.



33

A versão utilizada permite apenas a solução de problemas de até 200 variáveis de

decisão. Dessa forma, foi proposto o maior problema que pudesse ser resolvido com o

So/ver, limitado a 200 variáveis de decisão. Foi, então, gerado um problema de

distribuição de 10 pedidos para 4 possíveis clientes, utilizando 4 veículos.

4.1.1. Dados de Entrada

Apenas com função ilustrativa adotou-se, nas figuras, as células em amarelo

correspondem aos dados de entrada, as azuis aos valores calculados, em vermelho os

valores sqeitos a restrições e em verde as variáveis de decisão do problema.

Os dados de entrada foram implementados na planilha eletrõnica conforme as Hlguras

apresentadas nesta seção. Na Figura 4.1 são apresentados os dados de cada veículo v:

custo Rixa, custo variável, quantidade de compartimentos de 5.000 litros e capacidade

total (em milhares de litro).

Veículos

v:tl, ;, ... , lv
V

l

2

3

4

A Figura 4.2 indica a implementação dos dados referentes à matriz de distância entre a

base (ponto O) e os clientes (i e./) e entre os próprios clientes.

Clientes e Base

1=10l+Í1, 2, .- , 111} [k] = 0 = Base

Figura 42.:.Dildex.ÉIÊ..!2i$!ânçü

i\l 0 l 2 3
0 0 l ]., 4

2 2, 8

]  0 2 3 3, 6
2 1, 4 2 0 3, 6 3

3   3, 6 0  
4 l 2, 8

2 l u



34

Na Figura 4.3 apresentam-se os dados referentes às restrições de permissão de cada

veículo v atender cada cliente l.

Restrições

Figura 4.3

Na Figura 4.4 estão apresentados os dados de cada pedido p: para qual cliente é o

pedido e o volume pedido. A partir do volume, é calculado se ele necessita ou não de

um compartimento de 5.000 litros.

Pedidos

4.1.2. Variáveis de Decisão

Nesta seção, as figuras a seguir apresentam a implementação das variáveis de decisão na

planilha eletrânica.

ti \\ v--. l 2  4

    
l

]

3 l ] l l

4 l   

p Cliente [

 
2

 
4

5 2 10 0
 
 

8 3 5 .

10 4 10 0



35

A Figura 4.5 apresenta as variáveis de decisão XÜ, enquanto as variáveis y,, se

encontram na Figura 4.6. Por fim, a Figura 4.7 demonstra a implementação das

variáveis Zà em planilha eletrânica.

Variáveis de Decisão

Figura 4:5

v=ll lj.\j 0 l 2 3 4
0 0 ] 0 0 0

 F 0  
0

0

0

0

 0
0

0

0

0

0

0

v=21 !j.\j 0 l 2 3 4

l  0 0
l 0

00 0

 0 0  
0

0

0

l

4 0 0  o l o

V

0   
3

0

4

0

2   
0

0

0

0

0

0

3 0 0
0 0 0

4 0 0 0 o l o

V 0 ] 2 3 4

0 0  0 0 0
l 0 0 l 0 0

2 l 0 0 0 0

3 0 0 0 0
0

4 0 0 o l o l o



36

Figura 4.6 Variáveis de Decisão YI

Figura 4.Z Variáveis..dÊ.]12çç!$ãQ.Z

IP \\ v--. l 2  4

 0    
3 l 0 0 0

5 0  
0

0

0

]

6 0 0 0 ]

 0  
0

0

0

0

9 0 ] 0
0

LO 0 l o l o

V 0 ]
2  4

 0, 00, 0
L, O

0, 0
0, 0
0, 0

0, 0
0, 0

0, 0
0, 0

2

0, 0
0, 0 0, 0

0, 0
0, 0
0, 0

0, 0
0, 0

0, 0
o , o3

4 0, 0 0, 0 o, o l o, o l o, o

v=211i\j 0 l 2 3 4
0 0, 0 0, 0 0, 0 3, 0 0, 0

l 0, 0 0, 0 0, 0 0, 0 0, 0

2 c), o 0, 0 0, 0 0, 0 0, 0

3 0, 0 0, 0 0, 0 0, 0 2, 0

4 0, 0 0, 0  
v=31li \:j 0 ]

2 3 4

0 0, 0 0, 0 0, 0 0, 0 o, u

l 0, 0 0, 0 0, 0 0, 0 u, u

2 0, 0 0, 0 0, 0 0, 0 o, u

3 0, 0 0, 0 0, 0 0, 0 u, u

4 0, 0 0, 0 o!Q

v=4 1 + j-\ j 0     
0 0, 0 2, 0 0, 0

1, 0

0, 0
0, 0

u, u
0, 0

l 0, 0 0, 0

2 0, 0 0, 0 0, 0 0, 0 u, u

3 0, 0 0, 0 0, 0 o , o u , u

4 0, 0 0, 0  



37

4.].3. Restüções

As restrições do modelo matemático proposto foram implementadas na planilha

eletrânica conforme as figuras que ilustram esta seção

A Figura 4.8 ilustra a restrição de cada pedido estar alojado a um único veículo.

Pedido x Veículo

Fieura4.8

A restrição que verifica a quantidade de pedidos que necessitam de compartimentos de

5.000 litros não excede o disponível aparece representada na Figura 4.9.

Figura 4.9

A Figura 4.10 a seguir indica a restrição de nenhum veículo pode ter sua capacidade

total excedida.

P

l  
2 l l

4 ÍTI
5 l l

J e l
8 l l

  [

V E [v]&amp;lt;-

l 2 2

 0  
4 0 2



38

Volume Máximo

A restrição que impõe que cada veículo deve passar pelos clientes que Ihe estão

alocados encontra-se na Figura 4.1 1.

A Figura 4.12 ilustra a restrição que cada veículo deve respeitar a restrições de atender

cada cliente.

Figura 4:12 Restrição ÇQ11g. Veículos e Clientes

2 l 30 l 30
3 l o 1 1 5
4 30 l 30

1 : 1 p .L .L L p.. 1.. '

  q
1 1 0 0 0 i l
o l o 1 1 1 0 1 0
o l o 1 1 1 0 1 0

9  0 o l o l t1 9Lo l o 1 1 : o i oLO

lv \\ i---  E 3 l ' «- ] «- ] sz]l l. l l l l l
3 0 l 0 1 1 1 1 1 f l ! l

5   0
o l l l l l l l l



39

A continuidade das rotas é garantida pela restrição ilustrada na Figura 4.13

Continuidade das Rotas

0 000

000

000

000

000

A Figura 4. 14 apresenta a restrição de cada veículo realizar apenas uma rota

Veículo faz no máximo uma Rota

Para a eliminação de sub-rotas foram elaboradas na planilha eletrõnica as restrições que

se encontram na Figura 4.15 e na Figura 4.16 a seguir.

Figura 4.15 Primeira Re

y ].Et=t.l.
i

 

l k\v--. l 2 3 4     
: l -i, o l o, o
i l silo l -i,o H :L.L.I J::.9.I 'd L',Q.I d.4
i l o, o 1 -1, o
Í l silo l -i,o H

i!..tJ o,o L=1, q.LJ,oJ.o,o



40

Figura 4.16

4.1.4. Restlttados Obtidos Através do Solver

Conforme visto anteriormente, o problema de distribuição testado possui 10 pedidos a

serem entregues a partir de uma base para 4 possíveis clientes, com a disponibilidade de

4 diferentes veículos

O So/ver do ElEGe/ levou 8 horas para encontrar a solução ótima do problema ilustrado

em um computador Pentium IV / 3.06 GHz. Computacionalmente, podemos perceber

que é gasto um tempo muito grande para resolver um problema muito simples. O valor

dn fimrãn nhiÊtivn atino,idn Dará essa instância corresponde a um custo total de $45,64

V

Í ] Êl
! l 5: l f: 1; f: l f: l .:s::.

o, o l o, o l 4, o l o, o l o, o to,o
T[i[d. ] .,o ] o,Q] o,o L o,o ] ',o:'i'] ÉIÀ l"'ili' ['i]i' f'i]. Í'.].#

3 0, 0 0, 0 0, 0 0, 0 0, 0 o, o o, o o, o o, o } o,o
4 0, 0 0, 0 0, 0 0, 0 0, 0 o, o o, o o, o o, o ] o,o

V 0 l 2 3 4&amp;lt;-&amp;lt;- «- l «- l «-

:+ ã H H# +
o, o l o, o l o, o l 4, o lo,o
o, o l o, o i o, o i o, o lo,o
4,0 l o,o l o,o l o,Q L&amp;amp;!}

3 0, 0 0, 0 0, 0 0, 0 2, 0 0, 0 0, 0 0, 0 0, 0 4, 0

4 0, 0 0, 0 L, O 0, 0 0, 0 o, o i o, o l 4, o l o, o !o,o

 i i i ! +
.- l «- l «- l «- l «-

o, o o, o l o, o l o, o lo,o
o, o o, o l o, o o, o l o,o
o, o j o, o l o, o o, o lo,o

3 0, 0 0, 0 0, 0 0, 0 0, 0 o, o l o, o l o, o o, o lo,o
4 0, 0 0, 0 0, 0 0, 0 0, 0 o, o i o, o l o, o o, o lo,o

v=4 1 l i\j+

+ é Ê É #
&lt;- 1 S- 1 «- 1 ''- l ..

o, o l 4, o l o, o } o, o lo,o
. . . . l . .
o, o l 4, o l o, o l o, o lu,u
o, o o, o l 4, o l o, o lo,o

2 0, 0 0, 0 0, 0 0, 0 0, 0 4, o } o, o l o, o l o, o to,o
3 0, 0 0, 0 0, 0 0, 0 0, 0 o, o o, o 0, 0 o, o l o, o

4 0, 0 0, 0 0, 0 0, 0 0, 0 o , o l o, o l o, o l o, o }. o,o



41

Foi atingido o limite de variáveis possíveis pt\ra resolução na versão do aplicativo

utilizado, mesmo para um problema que não representa a ordem de grandeza de

problemas reais.

A solução ótima do problema é indicada na Tabela 4.1. Esta tabela indica quanto

combustível foi alocado a cada caininhão parti entregar a cada cliente.

Tabeltt 4. 1

Esta solução indica que cada cliente recebe exatamente os pedidos que Ihe foram

solicitados, que pode ser observado também nas restrições indicadas na seção anterior

na Figunt 4.1 1 e na Figura 4.12

Os caminhões passam pelos clientes que foram alocados para atender, como pode ser

facilmente percebido nos resultados das variáveis de decisão X;) apresentadas na

Figura 4.5. O veículo l sai da base (ponto O) até o cliente l e retorna até a base. O

veículo 2 faz o roteiro saindo da base passando, na ordem, pelos clientes 3, 4 e 2, e volta

para a base. O veículo 3 não é utilizado. Por fim, o veículo 4 parte da base par:\ o cliente

l,cliente 2 e retorna à base.

Não foi possível encontrar nenhuma rota mais eficientes que as encontradas pelo

aplicativo para atender o problema proposto

Coi-n base nos resultados da solução ótima obtida, indicados na Figura 4.5, também

pode-se verificar que não houve formação de sub-rotas.

A Tabela 4.1 também demonstra, que os volumes alojados respeita\m a capacidade total

dos caminhões, como apresentado antes na Figura 4.10. Pela Figura 4.9 pode-se

perceber que a quantidade de coinpartiinentos de 5.000 litros de cada veículo são

suficientes para atender os pedidos alocados.

Cliente
Volume Alojado (1.000 1)

Veículo l Veículo 2 Veículo 3 Veículo 4 Total

 30 0 0 10 40
2 0 5 0 20 25

3 0 10 ( ) () 1 o

4 0 15 0 () 15

Total 30 3() () 3()  



42

Percebe-se (lue foi possível a utilização cle apenas três caminhões para atender os

pedidos, sendo que esse era o número mínimo de caminhões, sendo que os pedidos

totalizavam 90.000 litros. Esse volume foi atendido por três caminhões de 30.000 litros,

não sendo utilizado um veículo com capacidade de 15.000 litros. Se este caininhão

menor fosse incorporado à solução, não seria possível o uso de apenas três veículos.

Como o custo fixo é alto, percebe-se que não existe solução com quatro caininhões

melhor que a solução com três

Pode-se afirmar, então, que os objetivos de auxiliou na fomlulação dt\ modelagem

matemática e verificar sua consistência fontm atingidos

4.2. Solução Utilizando Co/zcerf rec/zology do .rZ,OG CPI,EX em C++

Conforme discutido anteriormente, o problema proposto evidencia ser de natureza

combinatória, uma vez que é um caso particular de problemas de roteirização,

considerandos como sendo pertencentes à classe NP-difícil, que requer o uso de

métodos aproximados ou heurísticos par:t a sua solução

A fim de avaliar os resultados da heurística para instâncias maiores que a possível de ser

modelada em planilha eletrõnica usando o So/ver, o modelo matemático foi

implementado utilizando Co/zcer/ Tec/20/0gy para /LOG CPZ,EX na linguagem C++.

4.2.1. Implementação

O código-fonte em C++ corresponde à implementação do modelo matemático proposto

para o problema de distribuição de derivados de petróleo no pacote /Z,OG CPZ,EX

apresentado no Apêndice B, na Figura B.l.

O modelo implementado segue a mesma estrutura de linguagem e introduz no modelo

as mesmas equações detemiinadas na Modelagem Matemática (seção 3.2) deste

trabalho.

4.2.2. Exemplo de Solução Obtida pelo ILOG CPLEX

A nlesnl:\ instância do problema implementado em planilha eletrânica foi colocado par:\

permitir a avaliação do correto funcionamento do algoritmo fonnulado com o uso do



43

ILOG CPLEX. O seu resultado será exposto aqui para ilustrar as infonnações obtidas

através do aplicativo

O problema é o mesmo problema de distribuição de 10 pedidos para 4 clientes, com

disponibilidade de 4 veículos, apresentado na seção 4.1. O resultado pode ser visto na

Figura 4.17 a seguir

Selected objective sente
Selected objectivo name
Selected RHS nome
Selected bound name

MINIMIZE
obj
rhs
bnd

Problem 'distcomb100.mps' read.
Read time = 0.06 sec.

Tried aggregator l time+
MIP Presos.ve e].iminated 22 tons and 25 columns.
Reduced MIP has 192 rows, 215 columns, and 953 nonzeros
Presolve ti.me = 0.04 sec.

Clique table members: 43
MIP emphasis: balance optimali.ty and feasibility
Root re]axation so].uti.on time = 0.02 sec.

Flo'w cuts applied: 17
Gomory fractional cuts applíed 12

]lnteger optimal solution: Objective = 4.5640000000e+001
Solution time = 6.16 sec. lterations = 63519 bodes = 4544

Vara,abre Name

y[o, o]
y [1, 3]
y [2, 3]
y[3, 1]
y [4, 0]
y [5, 0]
y [6, 1]
y [7, 1]
y [8, 1]
y [9, 1]
x [0, 2, 1]
x[3, 0, 1]
x [0, 0', 2]
x [1, 4, 2]
x [1, 0, 3]
x [1, 3, 4]
x [0, 1, 0]
x [1, 2. 0]
x [3, 1, 0]
z [0, 2, 1]
z [0, 0, 2]
z [1, 2. 0]
z [1, 4, 2]
z [1, 0, 3]
z j1, 3i 4]
z [3, 0, 1]
All other variables

Solution Vague
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l.oooooo
l..oooooo
1.oooooo
2.000000
1..oooooo
2.'000000
4.,000000
3.000000
l..oooooo

the range 1-240in are zero

Figura 4. 17 Exemplo deS



44

Percebe-se pela figura que o resultado da função objetivo (Obyec/lve) atingido foi unl

custo total de $45,64. Esse valor, como esperado, é exatamente o mesmo que aquele

resultante da otimização através da planilha eletrânica, como indicado na seção 4.1 .4.

As vaüáveis de decisão obtidas estão indica\dtts abaixo de Varlab/e Na/zze, possuem o

valor indicado ao lado de cada uma (So/urí0/7 Va/líe). Todas as outras variáveis são

nulas. As variáveis podem ser conferidas com aquelas presentes Os valores são os

mesmo indicados nas figuras que indicam as variáveis de decisão na seção 4.1.2. A

indexação dos pedidos no /Z,OG CPZ,EX inicia em 0, ao invés de, como no So/ver,

começar em 1. Assim, compantndo a Figura 4.17 com os resultados da Figura 4.6, é

possível verificar que as respostas são iguais, sendo igualmente utilizados apenas três

veículos: um veículo atende os pedidos 0, 4 e 5 (no So/ver são os pedidos 1, 5 e 6),

outro veículo atende os pedidos 3, 6, 7, 8 e 9 (4, 7, 8, 9 e 10 no So/ver) e, por Him, o

último veículo atende os pedidos l e 2 (2 e 3 no So/ver).

O tempo total de processamento foi cerca de seis segundos. A planilha, colmo visto,

levou oito horas através do aplicativo de otimização So/ver. Isso se deve ao fato do

/Z,OG CPZ,EX possuir bibliotecas mais avançadas e específicas para a resolução de

problemas de programação lineu inteira mista, enquanto o So/ver utilizado nesta

pesquisa é a versão "srízndard" disponibilizada gratuitamente com o /Wícroso${ Exce/ e,

portanto,senior recursos.

4.3. Outros problemas resolvidos através do ILOG CPLEX

Para permitir a comparação de resultado c desempenho do método heurístico de solução

proposto mais adiante neste trabalho no Capítulo 5, fora\m propostas outras instâncias de

problemas de teste para resolução através do /Z,OG CPZ,EX.

Foi possível perceber, no entanto, que ao aumentar o número de pedidos, de cliente e de

caminhões, o tempo de processamento aumentou dramaticamente, o que comprova o

problema ser de complexidade exponencial, conforme pode ser observado na Tabela

4.2

O nível de restrição do problemtt pode ser visualizado através da matriz R;., (vede seção

3.2.2), que indica se detenninado veículo pode atender detenninado cliente ou não. O
a. .,.H. .-, H«.tn nela rpl,rãn enfrn }ls variáveis restritas e o total de

percentual de resüiçS ll l ;



45

variáveis. As variáveis restritas são aquelas quais R;... =0 e o total de variáveis

corresponde z\o produto / x V'

Entretanto, como seria de se esperar, o tamanho do problema, no entanto, dados pelo

número de pedidos, clientes e veículos, exerce maior influência no tempo de

processamento. Algumas das instâncias geradas e sua tentativa de resolução são listadas

na Tabela 4.2 a seguir. A coluna ''Tempo'' indica o tempo de processamento até o

témuno da otilnização ou até ser interrompido. O Gízp é a diferença entre a melhor

solução viável inteira encontrada e a solução relaxadtt de referência (/ott'er-bozr/?(7). Um

Gap final de valor Oqu indica que a solução ótima foi encontrada. Todas as instâncias

testadas possuem ao menos uma solução viável, obtida manualmente ou através da

heurística proposta no capítulo seguinte.

Tabela 4.2 Instâncias e Resultados do Processamento no ILOG CPLEX

Após o tempo de ptocessameilto indicctdo, llel\luiilia solução viável ainda havia sitio encontra(tct c o

processtimento foi interrott\pide.

Note-se que para os dois últimos problemas não foi possível sequer encontrar uma

solução viável após um tempo cle processamento bttstante elevado

O algoritmo criado em /Z,OG CPZ,EX seria utilizado para realizar os testes de resultado

e desempenho do método heurístico, porém foi demonstrada a inviabilidade do método

excito de solução para o problema aqui proposto. O tempo de processamento é muito

grande para problemas bem inferiores aos problemas reais existentes e que serão

testados Diva a heurística proposta adiante

Veículos Pedidos
Clientes
+ Base

Variáveis de

Decisão
Restrição I'empo Gap

4 10 5 200 o% 6 sego seg o%

10 13 8 1.250 28,6% 153 seg o%

16 18 13 5.280 57,3% l0.978 sea 11%
16 18 13 5.280 20,8% 3.062 seg n/a;}

31 36 27 44.640 62,2 2.718 seg R/üõ



46

4.4. Considerações Finais

O modelo matemático ptua o problema de progntmação de entregas de derivados de

petróleo proposto na seção 3.2 foi validado a partir dos problemas resolvidos. Através

de sua implementação em duas ferramentas diferentes, foram testadas instâncias

pequenas de fonna a permitir uma análise manual pudesse concluir que a solução

encontrada era ótilna e que todas as restrições haviam sido respeitadas.

Os resultados não puderam, contudo, serem obtidos ptua instâncias com maior número

de variáveis. O tempo de processamento tornou-se muito elevado e mesmo o pttcote

comercial mais eficiente testado não conseguiu obter solução para instâncias de

tamanho compatível com problemas reais encontrados na prática

A natureza combinatória do problema, então, impede a obtenção de soluções ótimas

mesmo para instâncias de pequeno porte. Estas instâncias, caso solucionadas, poderiam

ser utilizadas para avaliar a qualidade d:\s soluções obtidas pelo método heurístico

proposto e detalhado no próximo ci\pítulo



47

5 DESENVOLVIMENTO DA ESTRATÉGIA DE SOLUÇÃO HEURÍSTICA

Este capítulo descreve a estratégia de solução proposta para o problema de roteirização

da distribuição de combustível por caininhões-tanque. Conforme apresentado no

Capítulo 4, o problema evidencia ser de natureza combinatória e complexidade

exponencial, o quc impede a obtenção de solução ótima através de métodos exatos,

mesmo com pacotes comerciais computacionais mais soHlsticados. Assim, propõe-se

uma estratégia de solução heurística que permite a solução de instâncias encontradas na

prática.

Inicialmente, na seção 5.1, são apresentadas as ferramentas de desenvolvimento

utilizadas no trabalho. Em seguida, serão explicados e justificados na seção 5.2 os

aspectos do método escolhido. Por fim, na seção 5.3, apresenta-se uma visão da

concepção geral do algoritmo desenvolvido e o detalhttmento de cada uma de suas

partes, procurttndo explicar os conceitos adotados.

5.1. Ferramentas de Desenvolvimento
/'\

Para desenvolvimento da solução heurística, foram utilizadas como ferramentas uma

linguagem de programação e uma planilha eletrânica que auxiliou a concepção inicittl

da estratégia

A ]inguagenl de programação escolhida para o desenvolvimento do algoritmo é a

linguagem C++. Conforme descrito pela "The C++ Resources Network" (2004), esta é

uma linguagem que pennite programação orientada a objeto, pode ser compilada em

quase qualquer tipo de computador ou sistema operacional e tem um desempenho muito

eficiente

Para auxiliar na concepção e no desenvolvimento da estratégia de solução heurística

proposta, foi proposto uin problema típico de roteirização da distribuição de derivados

de petróleo, contendo a distribuição de 36 pedidos em 26 clientes, distribuídos

aleatoriamente eln torno de uma base, que podem ser atendidos através de 55 veículos.

O exemplo foi todo modelado ein uma planilha eletrânica para testar e verificar a

consistência dos resultados de cada etapa de desenvolvimento do algoritmo. Essa

planilh:t encontra-se detalhada no Apêndice C



48

A avaliação que se fez durante o desenvolvimento do t\lgoritmo é que a planilha

eletrânica, apesar de possuir limitação na resolução do problema, pemute uma excelente

visualização clo andamento cla solução. Uma importttnte utilidade que deve ser

destacada é a o apoio à depuração do código, ou seja, a busca e identinlcação de erros de

programação que oconeram e foram corrigidos durante a fase de desenvolvimento.

5.2. Aspectos Gerais clo N'létoclo Proposto

A estratégia de solução deve ser adequada a um problema que apresenta natureza

combinatória e, ao mesmo tempo, é muito restrito em decorrência das restrições

anteriormente apresentadas na formulação matemática.

Não existe na literatura nenhum algoritmo que possa ser diretamente aplicado ao

problema descrito, conforme observado na revisão bibliográfica (vede seção 2). A

complexidade combinatória do problema impõe a adoção de métodos heurísticos para a

resolução de instâncias reais, uma vez que a quantidade de variáveis eleva

exponencialmente o esforço computacional para a determinação da solução excita

Inicialmente, foi considerado o desenvolvimento de uma estratégia de solução baseada

em alguma meta-heurística consagrada, tal como Algoritmo Genético ou Busca Tabu. O

que se percebeu, já de início, é que algoritmos baseados nessas meta-heurísticas não

seriam eficientes, uma vez que requereriam uin esforço computacional elevado para

encontrar soluções viáveis, dado o grande número de restrições existentes

Mais especificamente, em relação aos Algorítmos Genéticos, a própria estrutur:t do

problema dificulta a definição de uma representação crontossâmica adequada, além da

dificuldade de implementar o operador de cruzamento de forma a pemutir obter

soluções viáveis em termos das restrições do problema.

Da mesma forma, uma estratégia eficiente baseada em Busca Tabu fica dificultada pelas

restrições do problema que tornam a exploração de uma vizinh:\nça uma tarefa

complexa. Mais especificamente, os movimentos que pennitein a evolução de uma

solução conente para uma solução vizinha ficaria dificultados e são pouco eficientes,

tendo em vista as restrições do problema que precisam ser verificadas. Em outras
....,..,.. - -..-r '''-"'-,..-''.,.;,.anal '-,r,. PYnjnrlr a vizinhança de uma solucão em busca

ptut (



49

de unia solução melhor é bastante elevado e que requereria unl mec:\nisnlo de busca

bastante complexo.

Assim, a estratégia de solução proposta apóia-se em uma heurística rápida que permite a

determinação de uma boa solução. A heurística consiste, primeiramente, em classificar

os pedidos e os caminhões confonne a facilidade de alocação e a utilidade parti

alocação, respectivamente. Em seguida, busca-se agrupar pedidos próximos, iniciando

pelos de mais difícil alocação.

O algoritmo proposto define uma ordem de alocação dos pedidos aos veículos e vai

executando as alocações segundo essa ordem, sem considerar o efeito posterior de uma

alocação nos demais pedidos ainda não atendidos. Assim, o algoritmo não analisa o

impacto de cada alocação nas iterações seguintes, por isso ele pode ser classificado

como "greedy a/gori//znz" (ou ''algoritmo guloso"). O encaminhamento da solução

adequada Rica por conta da classificação prévia que direciona a ordem de alocação dos

pedidos.

Esse algoritmo foi então aprimorado para lmla estratégia mais complexa inspirada nt\

heurística originalmente proposta por Feo e Resende (1989). A estratégia é baseada

numa heurística gulosa no qual é introduzido uin fator probabilístico, sendo a mesma

reiniciada por diversas vezes até atingir um critério de parada. Inicialmente proposto

para solução de problemas Ser Coverí/tg, a estratégia tem sido aplicada a diversos outros

tipos de problemas de natureza combinatória.

Esta estratégia concebida por esses autores foi posteriormente denominada Greedy

Ra/zdo/?zlzed Adczp/íz/íve Seízrc/z P/.oced r/'e -- GRASP -- e suas diversas aplicações são

listad:ts por Feo e Resende (1995), incluindo a roteirização de veículos.

5.2./. Gl?ÁSP

A estratégia GRASP consiste, basicamente, em um método de busca de soluções através

da construção de soluções por um método guloso. Nele é inserida uma variabilidade

aleatória para permitir diversificar as soluções encontradas. Como o esforço

computacional para geração de cada solução é bem reduzido, procede-se diversas vezes

com a construção de novas soluções até que se alcance uin critério de parada e obtenha-

se a solução mais próxima possível do ótimo.



50

Feo e Resende (1995) apresentam o conceito da estratégia GRASP, discutem a

metodologia dessa técnica, demonstram como desenvolver uma solução desse tipo e

apresentam uma revisão da literatura de implenlentações de GRASP.

Nesse trabalho, os autores apresentam o GRASP como uma heurística dividida ein duas

fases: (A) uma construção de uma solução rápida com fator aleatório e (B) uma busca

local. Esse\s fases estão dispostas conforme fluxograma apresentado na Figura 5.1 a

sega,tir

Lê dadosiniciais

(A) Construção
rápida randomizada

de solução

(B) Busca Local

Verifica o
critéri

par

Atendido

Fieurtt 5. 1

A fase de construção da solução (A) baseia-se enl uma heurística rápida com as

se.quintos canlcterísticas:

. Greedy: Gulosa. E uma heurística míope, isto é, a cada iteração insere unl novo

'n".p«t. ., ..l--rlin hn e tdn amenas no benefício isolado de selecionar cadaelemento

elemento;



5]

e Ra/ d0/7ifze(/: Aleatória. A seleção de cada elemento é feita com unl sorteio entre

elementos candidatos, composta por um con)unto de melhores elementos com

base no benefício medido;

8 A(/apraríve: Adaptativa. Pois o benefício t\ssociado a cada elemento é atualizado

a cada inserção de lun elemento na solução

Após cada fase de construção determinar uma solução completa, aplica-se uma busca

local (B), pois conforme explicado por Feo e Resende (1995), as soluções geradas por

uma construção GRASP não são localmente ótimas

Um exemplo da utilização da estratégia GRASP pode ser encontrado no trabalho de

Delorme, Gandibleux e Rodriguez (2004), em un] problema do tipo Ser Pízckíng

De fonna geral, a estratégia GRASP é interess:\nte para o problema de roteirização de

entregas de derivados de petróleo aqui proposto por duas cttracterísticas:

e A estratégia GRASP permite buscou' soluções ótinlas através cla inserção cle

variabilid:tde nas soluções geradas através de construção heurística gulosa

respeitando a estrutura de construção de soluções de cada problema.

e O problema abordado é muito restrito, não sendo eficazes estratégias de troca de

valores entre algumas poucas variáveis (como ocorre, por exemplo, em outras

estratégias de melhoritt como 2-opr ou 3-opr).

Assim, para um problema com elevado nível de restrição e com características muito

particulares como o aqui proposto, parece ser indicada uma estratégia com
características semelhantes às do GRASP

Em resumo, a partir da análise da estro\tégia GRASP foram identificadas duas

importantes características desejadas íto método proposto: heurística rápida e introdução

de unl fator aleatório. Essas características foram consideradas no desenvolvimento de

uma heurística que permitisse a solução do problema de alocação

5.2.2. Contparação entre a Estratégia Adotada e o GRASP

A estratégia GRASP possui um módulo de busca local bem definido. Porém, para o

problema aqui contemplado, devido ao alto número de restrições, um módulo deste tipo

geraria unl esforço computacional muito elevado em face de um benefício rclativaillente

restrito.



52

Assim, confon le será detalhado adiante, não foi criada uma rotina para a busca local

para gerar uma busca na vizinh:onça de uma determinada solução. Foi preferido, em seu

lugar, aplicar o mesmo método de construção, aplicado a sub-conjuntos dos elementos

anteriormente alojados, permitindo que a buscít se limite a uma vizinhança de uma

solução. Essa justiHlcativa é a mesma que Feo e Resende utilizam na concepção da fase

de busca local do GRASP

O fator aleatório, na estratégia GRASP, está contido na fase cle construção (alocação).

Este favor, no algoritmo aqui proposto, é introduzido na fase de geração de novas

condições, na qual ícone tt definição dos elementos que permanecem na solução, ao

redor dos quais será pesquisada a vizinhança.

Em resumo, foram adotadas, então, duas alterações em relação ao método GRASP:

e Não utilização de sorteio entre elementos candidatos na fase de construção,

realizando-se a iteração de construção da solução através da inserção do

elemento de melhor benefício.

e Supi'essão de uma heurística especínlca de busca local, utilizando-se o próp

algoritmo cle construção para gerar soluções na vizinhança da solução :interior

rio

5.3. h'método Heurístico de Solução Desenvolvido

A estratégia de solução adotada foi estabelecer uintt heurística rápida que permitisse

encontrttr facilmente soluções possíveis, isto é, que respeitassem as restrições do

problema.

Estabeleceu-se, então, um algoritmo que se utiliza dessa heurística rápida piua inicia-la

com diferentes condições iniciais, verificar a qualidade da solução gerada, controlar um

critério de parada e reiniciá-la com novas condições

O algoritmo, então, pode ser dividido ein:

e

e

e

e

e

(a) Leitura dos dados iniciais;

(b) Definição cle solução através de heurística rápida de alocução

(c) Cálculo da função objetivo;

(d) Comparação com a melhor solução;

(e) Verificação do critér.io de parada;



53

. (f) Definição de novas condições iniciais para busca de nova solução

O fluxogranla do processo está indicado na Figura 5.2.

ja) Lê dadosiniciais

(d) Compara com
melhor solução

Atendido(e) Verifica
do critéri
de parad

Ó
ão Atendido

Figura 5.2 -ropQ$!9

Cada um desses passos será detalhado adiante, porém a questão que se faz imediata na

compreensão da estratégia escolhida é como foi tratada a relação entre a heurística de

alocação (b) e a geração de novas condições para reinício (f).

O processo de alocação tem como objetivo principal deülnir quais pedidos serão

atendidos por quais caminhões. Como será demonstrado na seção 5.3.1, cada passo

dessa alocação depende da alocação estabelecida até aquele momento.

Percebeu-se, então que unia possível forma de gerar novas soluções sem descartar parte

da qualidade de uma solução inicial é realizar uin sorteio de alguns veículos de unia

solução para terem os respectivos pedidos desalocados. Isso permite uma busca em uma

vizinhança da solução encontrada anterionnente.



54

Cota alguns pedidos mantidos e outros removidos aleatoriamente, uma nova alocação

ptucial tende a gerar uma solução diferente da anterior. Portanto, a geração de novas

condições configurou-se na desalocação de uma parte dos pedidos da solução anterior.

Deve-se destacar que a heurística proposta tem por finalidade principal a resolução do

problema operacional diário de programação das entregas e não o problema tático de

dimensionamento da frota. Assim, pressupõe-se que a frota própria é utilizada

prioritariamente, sendo os veículos de terceiros alocados apenas à medida da

necessidade em decorrência da falta de veículos próprios pan\ realizar as entregas.

5.3.1. Heurística Rápida de Alocução

A heurística rápida de alocação integra a estratégia aditada para criação do algoritmo

club resolva o problema proposto Dado o grande número de restrições envolvidas, unia

alocução rápida bem estruturada pemute gerar boas soluções, mesmo que sub-ótimas.

S.3.1.]. Visão Geral

A heurística rápida de alocação foi formulada com objetivos bem deHlnidos:

8 Encontrar rapidamente uma solução possível;

8 Gerar soluções ttdequadas ao objetivo da solução do problema.

Para a geração de soluções, a heurística de alocação procura, da mesma forma que a

função objetivo do problema, minimizar as rotas a serem percorridas pelos veículos. Ou

sqa, a soma das distâncias totais percorridas deve ser a menor possível.

A heurística para ser rápida, porém, admite-se que a mesma não deve ficar avaliando

diversas combinações possíveis. Ela deve se limitar, a cada itcração, no benefício

isolado que a adição de cada um dos elementos promove na solução ein construção-

A forma ''inteligente" de fazer isso é estabelecer regras claras para que a alocação

ocona. Para que isso fosse possível, buscou-se definir características importantes que

deveriam ser considerttdas. Entre elas:

8 Pedidos agrupados em um mesmo veículo devem estar mais próximos possível;

B Perlidns Dará unl mesmo cliente preferencialmente estão agrupados-



55

e Melhor alocar antes pedidos os mais difíceis de serem alocados, ou sela, mais

restritos;

e Um pedido muito difícil só consegue ser combinado com outros pedidos em

caminhões mais úteis, ou seja, de maior serventia, uma medida de quantos

pedidos ainda podem ser alocados tt um caminhão, confonne explicado anais

adiante.

Em outras palavras, a cada passo o algoritmo, apesar de núope, deve escolher pedidos e

caininhões de forma a gerar unia boa solução. Ptua poder realizar isso sem o esforço

computacional de comparar diversas combinações, utilizartun-se parâmetros que são

atualizados a cada iteração.

O fluxogramzt geral da heurística rápida de alocação pode ser visto na Figura 5.3 a

seguir:f'''''\

Sim (1) Verifica
se há

grupos

Não

(2) Busca pedido no
maior grupo

(3) Busca pedido
mais difícil

(4) Busca caminhão
próprio de maior

serventia
Sim

(5) Busca caminhão
terceirizado de maior

serventia
(1 1 )

Verifica se
há pedidos

(6) Aloca pedido no
caminhão

(7) Atualiza
restrições e
parâmetros

Passa para próximo caminhão

Busca novo pedido

Não (8) Cabe
outro

pedido? (lO) Atualiza
restrições e
parâmetrosSim

(9) Busca pedido
mais próximo e

doca no caminhão

Figur



56

De fomla geral, a seqiiência de procedimentos realizados pela heurística de alocação é a

seguinte:

' (1) Verifica se existem pedidos em um mesmo cliente:

B Caso sim: (2) Busca um pedido no maior grupo de pedidos a um cliente;

8 Caso não: (3) Busca pedido sozinho mais difícil de alocar

8 (4) Busca caininhão próprio de maior serventia:

. Caso não exista: (5) Busca caininhão terceirizado de maior serventia.

. (6) Aloca pedido no caminhão;

' (7) Atualiza restrições e parâmetros;

e (8) Verifica se cabem mais pedidos no caininhão:

. Caso sim:

' (9) Busca pedido mais próximo e doca no caininhão;

' (lO) Atualiza restrições e parâmetros;

8 Continua até não caber outro pedido.

C:tso não: (1 1) Verifica se há mais pedidos a alocar:

e Caso sim: Reinicia;

e Caso não: Encen'a.

e

S.3.1.2. Restrições

As restrições às quais estão sujeitas a alocações dos pedidos nos veículos foram

sepmadas em duas categorias: restrições estáticas e restrições dinâmicas

Restrições estáticas são aquelas que são válidas :t qualquer momento,

independentemente da alocação de outros pedidos. Um exemplo de restrição estática é a

limitação quanto ao padrão de pintura do veículo: independente de outros pedidos

estarem alocados ao veículo, um detemunado veículo pode ou não atender o cliente

daquele pedido

Restrições dinâmicas são aquelas que, ao contrário, dependem da alocação de outros

pedidos ptua verificar se um pedido pode ou não ser atendido pelo veículo. Um exemplo

lo volume dos pedidos em relação à capacidade máxima do caminhão-tttnquee a soiiiêt (



57

O primeiro passo da heurística de alocação é criar a primeira matriz de restrições

estáticas. Essa matriz é uma matriz binária de dimensão (n x /}i), onde /z é o número de

cttminhões e //i o número cle pedidos. As restrições estáticas são composttts pelas

seguintes compíuações:

Padrão de pintura do veículo x permissão do cliente do pedido quanto o padrão;

Tamanho do caminhão x restrição de tamanho pelo cliente;

e Se o pedido é maior que 15.000 litros: Pedido x capacidade do caminhão.

A seguir, apresenta-se a função responsável pela verificação das restrições estáticas:

e

l
2

3
4

5
6

7
8

9

10

Função Compara(ID.Caminhaor ID.CJ-i.ente.do.Pedi-do){

permite = verdadeiro;
se(Cl:tente..do.Pedido não permitir Padrão do Camínhão)
ou (C.llente..dQ.Pedido não permitir T.ipo do Camlnhão)
ou ((Volume do ped-ido &gt; 15) e (T:ipo do Caminhão -- l){

permi.te = falso;

retoma permite;
}

Figura 5.4 -- Função de Verifiç

Na linha 3 do código é inicializada a variável como verdadeira, isto é, indicando que a

alocução do pedido no caminhão poderia ser feita. Caso o padrão do caminhão, seu tipo

ou o volume do pedido seja maior que o volume máximo comportado pelo caminhão

(linhas 4, 5 e 6), é atribuído falso à variável.

Confonue a alocação é realizada, são verificadas as restrições dinâlBic

garantir que não selain alocados mais pedidos que o possível no veículo.

Colho pedidos de 5.000 litros ocupam necessariamente um compartimento desse

tamanho, existe um limite de pedidos desse tamanho possíveis em cada caminhão,

mesmo que a capacidade total esteja respeitada. Isto evita que o algoritino aloque dois

pedidos de 5.000 litros em um compartimento de l0.000 litros. Assim, t\s duas
comparações que norteiam as restrições dinâmicas são:

e Soma dos pedidos alocttdos x capacidade total do veículo;

,.l;,l.. H. nnn l;t..n. ,tnn,rlnç Y núl-neto de coinoartimentos cle 5.000 litros

as que buscam

Pee



58

5.3. t.3. Pal'âttletros (te Atocaçclo

Além das restrições, para que o algoritino tenha o desempenho adequado, for:un

elaborados alguns parâmetros que permitem nortear a ordem de alocação. A alocação

após:u de míope, busca ser orientada por parâmetros que indicam umtt maior chance de

realiz:u uma boa alocação a cada iteração. Esses ptuâmetros, portanto, são atualizados a

cada nova alocação que a heurística realiza. Os três principais parâmetros de alocação

definidos para tt heurística são:

. Pedidos no mesmo cliente;

. Serventia do veículo;

. Facilidade de alocação do pedido

O primeiro critério de alocação é a quantidade de pedidos a selim alojados que
coincidem a um mesmo cliente. Esse valor indica que pedidos para um mesmo local

tendem a serem alocados em um mesmo caminhão, sendo preferível que sejam alocados

t\ntes. Para isso, então, foi criado um vetar que, parti cHeIa pedido, indica qu:\ntos

pedidos existe para aquele cliente. A seguir um trecho de código indica essa atribuição:

l
2
3
4

5

6

7
8

9

para (Cada pedido j){
soma = 0;

para (Cada ped-ido k){
se(pedidosHojelk] .IdCliente == pedidosHoje]j]. IdCI i-ente)
e (faci[i.dadePedidos]k] !- 0 )
e (faci[idadePedi.dostj] != 0) { soma++; };

pedi-dosMesmoCJ-iente]j] - soma;

}

O código acima indica que, para cada pedido (linha 1), serão verificado quantos pedidos

existem para aque]e cliente (linha 4), excluindo os pedidos já alocados (linhas 5 e 6).

Os conceitos de serventia de um veículo e facilidt\de de alocação de um pedido são

semelhantes e se baseiam na matriz binária de restrições. Essa matriz binária de
'4;''" n, ., r 111 vpíriiln ; e medido /. se é oossível realizar a alocução dej elnrestrições inS



59

i. Ela é atualizada a cada passo do algoritmo, pois é responsável por nortear cada passo

da alocação.

A serventia de um caminhão indica durante o processo de alocação quantos pedidos

ainda podem ser alojados a ele, isto é, a serventia de um veículo l é a contagem de

quantos entre os pedidosj podem ser atendidos por ele.

A facilidade de um pedido ser alojado indica durante o processo de alocação, por sua

vez, quantos veículos podem atende-lo, isto é, a facilidade de um pedido j é a contagem

de quantos entre os veículos l podem atende-lo naquele momento.

Na matriz binária de restrições, um valor ''l'' indica que é possível a alocação do pedido

j no caminhão i, enquanto um valor "0'' indica o contrário. A Tabela 5.1 ilustra o

conceito do cálculo dos parâmetros de serventia e facilidade.

/""-\

.''x

Tabela 5 . 1

Por exemplo, o pedido 7 pode ser alojado em sete diferentes veículos (0, 1, 3, 4, 6, 9 e

10), tendo como facilidade o valor 7. O pedido 8 pode ser alojado em quatro veículos

(2, 5, 7 e 8), definindo sua facilidade como 4. Analogamente, o veículo l pode atender

dez pedidos (0, 1, 2, 3, 4, 5, 6, 7, 9 e 10), tendo serventia 10, enquanto o veículo 2 pode

atender a oito pedidos (1, 2, 3, 4, 5, 6, 8 e 10), tendo como serventia o valor 8.

 0 l 2 ! l : l = l = ! Facilidade
0 l l 0 l l :0 J ,L  l l Í
l l l l L l l l l l l l 1 1
2 l l  L l l l l l l l 1 1
3 l l L l l l l l l .L l 1 1
4   L l l l l l l l l 1 1
5 l l l L l l l l .L l .L 1 1
6  l L l l l l l l l l 1 1
7 l l 0  .L .1 l :o:,l  .1 ..L /
8 0 0 l  .&amp;amp;  ..L .1 .1 4
9 l l Q N    0 i::o:l .&amp;amp; LI 

1 1 0 l l H LI LI LZ LI LI L&amp;amp; .1  
Serventia 10  b k k k k E Bk Ú 



60

Assim, para cada veículo é definida a serventia, ou seja, o número de pedidos que o

mesmo pode alocar. E, para cada pedido, é definida a facilidade, ou seja, o número de

veículos que podem Ihe alocar.

O trecho de código a seguir na Figura 5.6 mostra o cálculo inicial de serventia de

veículos e facilidade de alocação de pedidos:

1 para (Cada camínhão -i){
2 soma = 0;
3 para (Cada pedido j) {
4 soma = soma + matei. zRe stricoes[ i.][ jl;

6 serventiaCami.nhoes]i.] = soma;

9 para (cada pedi do j) {
10 soma = 0;
11 para (Cada cam.inhão -i){
12 soma = soma + matei.zRestricoesti.] [jl;

14 fao.]i.dadePedidos]j] = soma;

5

7

8

13

Nas linhas l a 7 a matriz de restrições é somttda ptua cada caminhão-tanque, gerando os

valores de serventia. Nas linhas 8 a 15 a matriz é somadtt para cada pedido, gerando os

valores de facilidade.

Um valor nulo no vetor facilid:\de indica que aquele pedido já foi alocado. Um valor

nulo no vetor serventia indica que não cabem mais pedidos naquele caminhão.

5.3.1.4. Seteção de Pedido para Alocução

A alocação sempre é i

escolha é o seguinte:

e Caso haja mais de um pedido de um mesmo cliente, procura-se o cliente com

maior número de pedidos a serem entregue;

e Caso não haja clientes com mais de um pedido, procura-se o pedido mais difícil

de alocar (menor facilidade)

No primeiro caso, basta identiHlcar o índice do maior valor do vetor de contagem de
didns n:lia o mesmo cliente. No segundo caso, o índice necessário é o do menor valor

niciada pela escolha de um pe o para ser aSl
((r

pe

lotado. O critério de



61

não-nulo (confonne código a seguir). Uma vez determinado um pedido para alocação,

segue-se para a definição do veículo, conforme ilustrado no código da Figura 5.7.

l
2

3
4
5

6

7

8

9
10
11
12
13
14
15
16

Função ProcuraPedido(matrizValores[ ]) {

menorlndi.ce = 0;

para (Cada pedido i com va-ior nulo) {menorlndi.

se (Todos ped-idos tem va-lares nulos) {Alerta}
senão {

para (Cada pedido -i) {
se (Valor do Pedido í &amp;lt;Valor do menorlndice)
e (Va-lor do Pedido .i não é nu-Zo) {menorlndi.ce = i}

0;l

i } ;ce

retorna menorlndice;
)

Para buscar o menor valor não-nulo, o primeiro passo é encontrar um primeiro valor

não-nulo para iniciar a comparação com os outros valores (linhas 2 a 5). Caso todos

sejam nulos, é necessário a função retornar um valor de controle para alertar o código

principal do erro (linha 7). Se ele encontrar um valor não-nulo, deve percorrer todo o

restante buscando o índice do menor valor (linhas 8 a 14).

5.3.1.5. BLlsca cle Veículo

O caminhão em que se doca o pedido é, entre os caminhões possíveis de atender o

pedido, o de maior serventia. Essa decisão é justiHlcada, pois se pretende maximizar as

opções de combinação de pedidos

A busca é feita inicialmente apenas entre os veículos próprios. Caso não haja nenhum

veículo possível, a busca é realizada entre os veículos terceirizados.

Uma vez definido o veículo, aloc:t-se o pedido nele, marcttndo a matriz alocação com

essa informação e atualizando as restrições dinâmicas e os parâmetros de alocação.

5.3. 1.6. Completar\do o Cantinhão

Evidentemente que a solução final, via de regra, não terá todos os veículos ocupados em

sua máxima capttcidade.



62

Porém, t\ formulação da alocação foi definida par:t buscar o máximo aproveitamento

possível dos caininhões. Como o principal objetivo é otimizar a distribuição, reduzindo

as distâncias percorridas, enquanto houvcrenl pedidos possíveis de serem alocados ao

caininhão, isso será feito.

O critério para escolha do novo pedido, caso haja mais de um pedido possível, é a

proximidade ao último pedido alocado. A cada novo pedido avocado ao caminhão, são

atiializados as restrições e os parâmetros de alocação

O processo segue sucessivttmente até que não sqa mais possível alocar nenhum pedido

ao caminhão. Verifica-se, então, se existem outros pedidos a serem alojados. Em caso

afirmativo, procede-se novamente com a escolha inicial de pedidos conforme descrito

na seção 5.3.1 .4.

Se todos os pedidos já estiverem alocados, encerra-se a alocação e passa-se à avaliação

de seulesultado.

Se ao final da alocução algum pedido ainda não estiver alocado, Dias não existir veículo

possível de atendê-lo, a solução é descartada. No lugar dela é re-inserida a atual melhor

solução

S.3.2. Verifcação da =Função objetivo

A função objetivo considerada para este p

parcelas: custos fixos e custos variáveis.

Custos fixos e variáveis são atribuídos individualmente a cada veículo, pois a frota é

heterogênea.

De forma geral, os custos atribuídos a veículos terceirizados são considerados mais

elevados, pois devem cobrir adicionalmente no mínimo o lucro do operador do veículo.

A parcela de custo fixo é um valor considerado para um determinado veículo caso este

faça parte da solução, ou seja, independente do núincro de pedidos alocados a ele.

O custo variável é um valor de custo por unidade de distância percorrida, ou seja, o

l .i ....It;.l;,...dn nPI« diçtâncin percorrida na rota a dual o veículo estácusto vara

alocaclo

considerado em duasroblema é o custo total a '1lS ((

ave

f«\

p'"'\



63

O custo totí\l por veículo, então, é nulo caso ele não tenha pedidos a ele alocados. Se

houver, é o seu custo Hino somado a seu custo variável multiplicado pela distância

progntmada a percorrer.

Após o cálculo do valor da função objetivo, é verificada se a solução encontrada é a

melhor solução até aquele momento. Enl caso ttHllmativo, ela é copiada para uma matriz

e guardada tanto para fornecer a resposta final, quanto para poder ser re-inserida no

processo, confomle será explicado adiante

/+'\

5.3.3. De$uições de itovas condições itticictis parca busca de nova soou ção

Além da heurística rápida de alocução, o segundo ponto principal do algoritmo

desenvolvido está relacionado aos critérios de geração de novas soluções híbridas a

parir de uintt solução corrente.

De fauna simplificada, o processo adotado pode ser explicado como a desalocação

aleatóritt de alguns pedidos para obter novos resultados com a re-alocução dos mesmos.

Esse procedimento, no entanto, deve ser compreendido mais profundamente para que

sqa possível entender os fatores que podem leva-lo ou não a ser uma boa solução.

A estratégia, inspirada em conceitos do GRASP, torna-se interessante neste caso pois a

eficiência da heurística de alocução pennite que ela seja repetidtt por dezenas de

milhares de vezes em menos de um minuto em um computador pessoal, conforme será

apresentado mais adiante ntt seção 6.5 deste trabalho.

O desafio tluc sc apresentou nesse inontento foi equilibrar a variabilidade clc soluções

com a convergência em busca da solução ótima. As etapas que compõem este processo

sao:

e

e

e

e

(1) Verifica repetição se atende critério para re-inserção da melhor solução;

e Caso sim: (2) Re-insere melhor solução;

(3) norteia uma quantidade pré-determinada de caminhões para desalojar;

(4) Desaloc:\ todos os pedidos dos caminhões sorteados;

(5) Atualiza restrições e parâmetros

O fluxograina dessas etapas está ilustrado na Figura 5.8



64

(1) Verifica
repe

Critério Atendido

Critério não ate

l3) Sorteia
caminhões para

desalocar

(5) Atualiza
restrições e
parâmetros

Novo processo de
Alocação

FjgyrlL 5B

5.3.3. 1. Re-inserção cla itielltor solução

A re-inserção da melhor solução pennite que após alguns ciclos de desalocação e re-

alocação, sela possível retornar a um ponto melhor pelo qual já se passou e, a partir

dele, explorar outras soluções próximas.

Quanto mais freqüentemente a melhor solução conente for repetida, menor será a

variabilidade em relação a solução e maior a chance do problema de prender a soluções

de mínimo local.

Por outro lado, uma dispersão muito alta na busca, pennite busc:tr patamares de solução

menores, Dias com dificuldade de encontram os mínimos locais desses novos patamares

A convergência do processo, obviamente, é mais lenta.

O critério escolhido foi definir unl intervalo de ciclos entre cada re-inserção da melhor

1..-:"- -a n,'a'''...,,- E'.',P *,..I'~« fn; tp.t,..In ., rlp:finirln ramo alma re-insercão a cada
solução no pro

1.000 ciclos



65

5.3.3.2. Desatocação

O objetivo da desalocação é promover os ciclos de desalocação e re-alocução que

permitam obter novas soluções. A desalocação compõe-se de duas etapas: o sorteio dos

caminhões e a desalocação propriamente dita.

Para o sorteio de caininhões, deHlne-se anteriormente uma percentagem dos caminllões

da solução atual a serem desalocados. Essa porcentagem, semelhante ao que foi exposto

na seção anterior, também deve ser avaliada e testada.

O processo de desalocação é muito similar ao processo inverso da heurística de

alocação. Confonne vão sendo sorteados os pedidos a desalocar, processa-se as

restrições estáticas. A reprogramação das restrições dinâmicas de toda a matriz, no

entanto, só pode ser feita após todos os veículos terem sido sorteados e clesalocados

No código de exemplo cla Figura 5.9 são desalocados y dos caminhões alocados.

l
2
3
4

5

6

7

8

9

10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28

para(Cada camínhão k){
se(Cam.inhão X fo-i uti-gizado) camUsados++;

para(Repetir até -Z/4 dos cóm:ínhões usados) {
comi.nhaoDesa].Doando = Cam.ínháo rondo ;

enquanto(camlnhão sorteado não fol usado) {
cama.nhaoDesalocando = Caminhâo band (J ;

volumeOcupadolcaminhaoDesalocando] = 0;
compDe50cupadosEcami.nhaoDesa]ocando] = 0;

para(Cada ped:ido j){
Atua[i.za matei.zRestri.coest] []
Atua[i.za matei.zA]ocacaot] [j;

camUsados 0

}

para(Cada pedido j){
para(Cada cam.inhão l){

se(Volume de j for maior que o espaço restante em l)
ou(Volume de j = 5 e não há comparti.mentes de 5 disponi.veia

matei.zRestri.coes]i]]j] = falso;
em i.)

f

O primeiro passo para a desalocação é a contagem dos caminhões utilizados, realizado

nas linhas l a 4. Depois, devem ser sorteados U dos caininhões utilizados, apenas entre



66

eles (linhas 6 a 12). Para cada caminhão utilizado sorteado, procede-se com a

desalocação (linhas 14 a 21). Após todos os caminhões sorteados terem sido
desalocados, é feita a atualização d:\s restrições conforme as alocuções que

permaneceram na solução. Por fim, ainda é realizado o re-processamento dos

parâmetros de alocação. Após a atualização de restrições e parâmetros, é reiniciado o

processo de alocução.

Como o problema aqui proposto é muito restrito, um número muito pequeno de

desalocações realizadas tende a gerar posterionnente pouca alternativa para as re

alocuções e, consequentemente, não obterá grande variabilidade de soluções. Caso a

quantidt\de de desalocações seja muito elevada, a solução também tende a ter pouca

variabilidade, mas por outnt razão: quanto menos alocações feitas, mais próxima a

alocação tende a ser da mesma alocução inicial (gerada a partir de nenhum pedido

alojado).

Como a lleurística de alocação é míope, para um mesmo conjunto cle pedidos e veículos,

a alocação tende a ser a mesma. A variabilidade é gerada, pois os parâmetros de

alocação e restrições mudam cle acordo com a alocução.

5.3.4. Veri$cação do critério de parada

P:ua vehficação do comportamento da evolução do algoritmo ein relação a solução do

problema, o critério de parada foi expandido um pouco além do que parece ser

necessário, como fonna de garantir que existe um mínimo cle estabilidade na solução

gerada, após muitas iterações sem melhoria cla mesma.

O critério cle ptuada é uin número fixo de repetições que foi estabelecido em 100.000

rirlnç

5.4. Considerações Finais

Após a demonstração que a natureza combinatória e complexidade exponencial do

problema de distribuição de derivados de petróleo impedir a obtenção de solução ótima

através de métodos exatos, foi proposta uma estr:\ténia de solução heurística.



67

A partir d:\ análise dos conceitos cla estratégia GRASP, foríun identificacl:ts as

características importantes que fontm considentdas no desenvolvimento de uma

heurística que permitisse a solução heurística do problema

Foi, então, elaborado um algoritmo de solução heurística que contempla uma heurística

rápida de alocução iniciada múltiplas vezes com diferentes condições iniciais através de

ciclos de desalocações sorteadas aleatoriamente.

No próximo capítulo são apresentados experimentou computacionais que pemutein

avaliar e analisar o método aqui proposto



68

6 EXPERIMENTOU COMPUTACIONAIS

Este capítulo tem por objetivo descrever os experimentos computacionais realizados a

fim de avaliam a estratégia de solução proposta, assim como medir os impactos de

utilização de diferentes parâmetros na eficiência e eficácia da mesma

Não foi possível aplicou a heurística proposta a uma instância real de problema de

distribuição de derivados de petróleo, eni decorrência da dificuldade de obter dados

reais adequados. Assim, não foi possível para comparei unia solução obtida pela

alocação manual praticada nas distribuidoras, cona unia resultante do algoritmo

computacional proposto, umtt medida do potencial de economia proporcionada pela

heurística proposta

A heurística não é também comparada com o problema de dimensões reduzidas

proposto na seção 4.1, uma vez que o mesmo é muito restrito e impede a troca de

pedidos, base cla heurística proposta.

Consequentemente, a fim de testar a heurística proposta, foram gerados, então, ttlgumas

instâncias de probletnas de teste para realização de experimentos de forma estruturada,

permitindo realizar a análise e avaliação do método proposto

Na seção 6. 1 são detalhadas as diferentes classes de problemas gerados para os testes do

método heurístico e os critérios para geração das instâncias com bases nessas classes.

Em seguida, na seção 6.2, será descrita como essas classes ainda são variadas em função

do grau de restrição das instâncias. Para exemplificar a forma de resposta que a

heurística fornece, na seção 6.3 é api'esentado um exemplo de relatório do algoritmo e

uin exemplo gráfico de solução gerada. A variação dos parâmetros da heurística

utilizada para realizar os testes é descrita na seção 6.4.

Os resultados elos testes são apresentados na seção 6.5, e a análise mais detalhada destes

resultados encontra-se na seção 6.6

6.1. Geração de Instâncias de Problemas para Teste

Conforme discutido anteriormente no Capítulo 4, a evidência de complexidade

exponencial do problema trtttado impede a obtenção da solução ótima através de



69

algoritmos exatos, mesmo para problemas de menor porte, o que impede a sua

utilização para a avaliação da heurística proposta.

Por outro lado, não existe, também, uma base de dados cle problemas teste difundida

para o problema específico tratado aqui

Não sendo possível companu o desempenho da heurística formulada com outro método

para o mesmo problema ou com problemas de referência, propõe-se aqui a realização de

outros testes, com diferentes instâncias, a fim de aferir a aplicabilidade do método e que

tornem possíveis futuras comparações com outras estratégias de solução que venham a

ser desenvolvidas para problemas de mesma natureza

As instâncias elaboradas devem ter tamanhos compatíveis com a estimativa que se faz a

respeito da grandeztt cle problemas reais. Conforme dados da ANP (2001), a maior rede

de distribuição no Estado de São Paulo possuía em 2001 1.546 postos de combustíveis.

Esses postos não solicitam pedidos todos os dias, nem são atendidos por uma única

base. Propõe-se então a verificação do desempenho do algoritmo com problemas de

ordem de grandeza entre 50 e 100 pedidos, atendendo entre 35 e 75 clientes em uin

único dia, o que parece razoável pma unl problelntt real. A quantidade de veículos

disponível foi considerada metade em caminhões próprios e outra igual quantidade em

veículos terceirizados.

Assim, serão testadas três classes de problema, cona as seguintes características

e Classe A: 50 pedidos, 50 caininhões e 35 clientes;

e Classe B: 75 pedidos, 75 caininhões e 53 clientes;

e Classe C: 100 pedidos, 100 ctuninhões e 75 clientes.

Conforme sela detalhado adiante na seção 6.2, para cacl:t classe serão geradas três

instâncias de, respectivamente, 20%o, 40% e 60% de restrição, totalizando nove

instâncias paa teste.

6.1.1. Critérios de geração de Instâncias

Os problemas propostos correspondem a uma região com geometria retangular e

distribuição uniforme e hoinogênea dos clientes, com a bttse, cle onde partem os

veículos, posicionada no centro dessa área.



70

P:\ra a geração das instâncias, foi arbitrada uma área de 120 por 80 quilómetros e,

consequentemente, a base de distribuição localiza-se no ponto de coordenadas (60, 40).

Parti cada cliente foi definida a sua localização com base em coordenttdas sorteadas

aleatoriamente.

A dimensão cla área foi escolhida em função de uma hipótese de uma base atendendo

postos de combustível em municípios vizinhos, em uma distância de influência de até

72 km, que é a máxima distância do centro a um canto cla área. Essa distância representa

uma base que atende uma região de municípios próximos.

Os pedidos foram gerados também de forma aleatória. Sorteou-se, para cada cliente, um

número de pedidos vazando entre um e três, de modo que nenhum cliente fique sem

pedido. O volume do pedido foi gerado de acordo uma distribuição amostral :ubitrada

conforme Tabela 6. !

Tabela 6.1

A distribuição proposta foi arbitrad:t de forma a representar um padrão comercial no

clua] pedidos médios de um mesmo combustível são muito conllms, pedidos pequenos

também são frequentes, mas que raramente é feito un] pedido muito grande de um

mesmo combustível. Ressalta-se que, como explicado ttnteriormente, o maior caininhão

é de 30.000 litros e um pedido com produtos diferentes para um mesmo cliente são

representados como pedidos diferentes para esse cliente.

Por Him, os veículos foram gerados considerando 50qo veículos próprios e 50qo

terceirizados. O dimensionamento de frota própria tende a ser abaixo do usual

necessário, de fomla que sempre uma pequena parcela seja feita através de terceiros,

porém g:uantindo que em boa parte do tempo toda frota própria sqa utilizada. A oferta

de frota terceirizada deve atender situações (te pico; ttssim se imagina que esta não seja

muito reduzida. Considera-se, então, adequada a proporção de meio a meio entre

veículos próprios e terceirizados, de forma a não haver risco de desabastecimento por

falta de veículos para entrega.

Volume 5.000 1 lO.o001 15.0001 20.0001 25.0001 30.0001

Quantidade 10% 27% 32% 23% 7% 1%



71

Conforme visto anteriormente, os custos fixo e variável podem ser definidos veículo a

veículo. Porém, para geração das instâncias, os custos fixos de c:\da veículo próprio

fontm admitidos como R$ 100,00 (cem reais) e dos veículos terceirizados como

R$ 200,00 (duzentos reais). Os custos variáveis foram atribuídos como R$ 1,00 (um real

por quilómetro) para veículos próprios e R$ 1,50 (um real e meio por quilómetro) para

veículos terceirizados.

Na prática, às vezes o frete de veículos terceirizados pode ser configurado apenas como

um custo variável, mas, quando isso ocone, usualmente esses operadores exigem unia

rota de distância mínima :t ser percorrida, o que pode ser interpretado como uma forma

de considerar implicitamente um valor de custo fixo a ser coberto pelo valor total do

frete a ser pago. Optou-se aqui por considerar, então, esses componentes separadamente

mesmo para os veículos terceirizados

Os custos fixos estão associados a um custo mínimo cliálio para cobrir despesas

principalmente de mão de obra. O custo variável é principalmente associado ao custo de

rodageil) (combustível, óleos lubrifica\ntes e pneus). Os veículos terceirizados devem

ainda cobrir o lucro do transportador. Esses valores representam ordens de grandezas

próximas a valores reais, mas não advém de nenhuma pesquisa de mercado.

Como detalhado anterionnente, existem três tipos de veículo, conforme sua capacidade

e compíutimentação:

e Tipo 1: Truck com três compartimentos de 5.000 litros;

8 Tipo 2: Carreta com seis compartimentos de 5.000 litros;

8 Tipo 3: Carreta com dois compartimentos de l0.000 litros e dois de 5.000 litros

A distribuição da frota por tipo de veículo foi determinada confomle a seguinte

distribuição arbitrada:

Tabela 6.2

Tioo de Veículo Tip' l (Zl!!É@ I'ipo 2 (Carreta) Tipo 3 (Carreta)

Volume Total 15.0001itros 30.000 litros 30.0001itros
Comoartimentos 5-5-5 5 5 - 5 - 5 - 5 5 10 - 5 - 10 - 5

r)lln ntirl trlP
\q( l &amp;amp; l LIVb&amp;amp;UV 40% 30%

30%



72

6.2. Variação do Nível de Restrição

Um aspecto importante a ser verificado é o impacto das restrições cle atendimento aos

resultados e desempenho clo algoritmo heurístico elabontdo.

Além das restrições do problema descritas anteriormente, que impedem um determinado

veículo atender detemunado cliente por questões de padrão de pintura e tamanho de

veículo, pode-se imaginar quaisquer outras questões, como por exemplo, a segmentação

de frota para grupos de clientes. Isto é, p:ua cada veículo determina-se se existe ou não

restrição de atender determinado cliente. O conjunto cle restrições dessa natureza pode

ser simplinlcada a uma representação de nltttriz de restrições análoga à elaborada na

fonllulação matemática descrita na seção 3.2.2.

O nível de restrição influiu muito no desempenho do método excito. Para verificar isso,

foi instituída uma medida de resta.ição na seção 4.3, que representa o percentual de

atendimentos restritos, ou sqa, a parcela de pedidos que apresentam restrições dos

clientes quz\nto ao tamanho e ao tipo de pintura.

Para cada uma tias instâncias foram elaboradas aleatoriamente matrizes de restrição com

três graus de restrição: 20%, 40qo e 60%. O grau de restrição, como dito anteriormente,

é o percentual de combinações de atendimentos de cada veículo para o conjunto de

clientes blue está impedidos. Ou sqa, nos problemas de teste gerados, cada veículo é

impedido de atender, en] média, respectivamente 20%, 40qo e 60qo dos clientes.

6.3. Exemplo de Resultado

Para ilustrar o comportítmento do algoritmo e facilitar a compreensão de sua heurística,

ilustra-se aqui o relatório do processamento. Um exemplo de saída do relatório do

algoritmo é, então, apresentado na Figura 6. 1 a seguir.

O exemplo apresentado aqui apresentado possui as seguintes características

e 35 Clientes distribuídos aleatorittmente

e 50 Pedidos;

e Frota composta por 50 veículos, sendo 25 próprios e 25 terceirizados;

e Nível de restrição: 60qo



73

Solucao i.ni.ci.al na i.teracao 0: 8230.63.
Nova melhor solucao encontrada na iteracao 15: 8182.74.
Nova melhor solução encontrada na i.teracao 16: 8141.24.
Nova melhor solucao encontrada na i.teracao 21: 7972.89.
Nova melhor solucao encontrada na iteracao 22: 7849.57
Nova me].hor solucao encontrada na iteracao 55: 7809.44.
Nova melhor solucao encontrada na iteracao 87: 7800-.1
Nova melhor solucao encontrada na i.teracao 91: 7749.55.
Nova me].hor solucao encontrada na iteracao 99: 7655.2.
Nova me].hor solucaotjlencontrada na i.teracao 137: 7607.03.
Nova me].hor solucao encontrada na i.teracao 158: 7408.
Nova melhor solucao encontrada na i.teracao 736: 7359.4.
Nova melhor solucao encontrada na iteracao 1273: 7209.45.
Nova me]hor so].ucao encontrada na iteracao 2001: 7207.86.
Nova melhor solucao encontrada na i.teracao 2002: 7089.69.
Falta Pedido. Reínserindo melhor solucao na iteracao 4509.
Falta Pedi.do.l Rei.nseri,ndo me].hor so]ucao na iteracao 9486.
Nova melhor solucao encontrada na i.teracao 13001: 7073.08,
Nova melhor solucao encontrada na iteracao 15002: 7062.56.
Falta Pedidos Reinserindo melhor solucao na i.teracao 15189
Nova melhor solucao encontrada na i.teracao 16914: 6776.66.
Nova melhor solucao encontrada na i.teracao 18001: 6759.49.
E'alta Pedi.do. Rei.nseri.ndo me].hor solucao na iteracao 19820
Falta Pedido. Reinserindo melhor solucao na iteracao 20625
Nova me].hor solucao encontrada na i.teracao 20627: 6678.93.
Fa].ta Pedido. Rei.nserindo melhor solucao na iteracao 21260
Nova melhor solucao encontrada na iteracao 24001: 6650.03.
Falta Pedido. Reinserindo melhor solucao na i.teracao 24343
Nova melhor solucao encontrada na i.teracao 25001: 6649.18.
Nova melhor solucao encontrada na iteracao 28001: 6469.87
Falta Pedido. Reinserindo melhor solucao na i.teracao 36743
Falta Pedido. Reinserindo melhor solucao na iteracao 39821
Falta Pedi.do. Rei.nseri.ndo melhor solucao na i-teracao 40876
Falta Pedido. Reinserindo melhor so].ucao na iteracao 42747
Nova melhor solucao encontrada na i.teracao 51001: 6419.26.
Falta Pedi.do. Rei.nseri.ndo melhor solucao na i.teracao 53341
Falta Pedi.do. Rei.nserindo melhor solucao na i.teracao 61133
Falta Pedido. Reinserindo melhor solucao na iteracao 68596
Falta Pedido. Reinserindo melhor solucao na iteracao 73704
Fa[ta Pedi.do. Rei.nserindo melhor so].ucao na i.teracao 87176
Falta Pedido. Rei.nseri.ndo melhor solucao na i.teracao 88703
Fa].ta Pedi.do. Rei.nseri.ndo melhor solucao na iteracao 93589
Nova me].hor so].ucao encontrada na iteracao 94001: 6404.56.
FIM. Melhor solução encontrada: 6404.56

O critério de parada imposto foi um número máximo de iterações fixado em 100.000

Antes de cada nova iteração foi estipulada a desalocação de U da frota utilizada. A cada

1.000 iterações, a melhor solução obtida até o momento é re-inserida, ou quítndo é

gerada tuna solução incompleta (falta pedido a ser alocado)

Este é apenas um exemplo, sendo que este e outros resultados são apresentados mais

claramente mais adiante na seção 6.5 deste relatório. O exemplo, porém, ilustr:t bem o

comport:tmento típico do algoritmo criado. Percebe-se que no início diversas novas

melhores soluções são encontradas e, quanto melhor a solução vigente, mais difícil se

torna de encontrar uma solução ainda melhor



74

120

100
39

80

60

40

20

K32

''-vás

20 38

0
0 10 20 30 40 50 60 70 80

Figura 6.2 Exemolo de Rotas Geradas

A heurística apresenta ao seu flm uma matriz de alocação de pedidos a caminhões.

Neste exemplo, os 50 pedidos foram alocados em 29 veículos que geraram as rotas

demonstradas na Figura 6.2.



75

No desenho estão sobrepostas as 29 rotas, uma parti cada veículo. Elas estão

difereitciaclas por cor e pelos números indicados nos vértices, que representam o código

do veículo (de 0 a 49).

Não é possível visualizar todas as linhas, unia vez que algtms clientes são atendidos por

mais cle um caminhão e as rotas se sobrepõem, não gentio possível representar todas na

fin Lll:l.

A ilustração, no entanto, pemlite visualizar a consistência das rot:ts traçadas e a

clualidadc cla solução obtida.

6.4. Variação dos Pai'âmetros

O principal aspecto a ser avaliado na heurística proposta é a calibração com relação o

parâmetro cine influencia na variabilidade e na convergência clo método proposto. A

diferenciação das soluções produzidas em cada iteração clependc clo número de veículos

clesaloca(tos em relação à so]ução anterior. O cic]o c]e (]esalocação e re-alocução é

melhor explicado na acção 5.3.3.2.

Como a heurística é fixa, para um detenllinaclo conjunto cle pccliclos e veículos

disponíveis, o resultado é sempre o mesmo. Então o número de veículos desalocado não

pode nem ser muito grande, nem ser muito peclueno. Foralll testados os vttlores de iZ2 e

M de veículos ckt frota utilizada para cada instância considerada.

O critério cle parada não sofreu variação, permanecendo fixado en] 100.000 iterações

(ciclos dc clesalocação c re-alocução). Para cada instância de teste foram feitas cinco

rodadas para cada valor de parâmetro cle taxa de clesaloc:tção (% e U), totalizando dez

rodadas, conforme detalhado na seção a seguir.

6.5. Resultados Obtidos

Como cada uma das três classes foi geritda com três diferentes graus de restrição, temos

na verclacle, nove diferentes instâncias. Para cada u]]] dos níveis cle restrição, no entanto,

foram mantidos os mesmos conjuntos de pedidos, clientes c caminhões. Cada uilla

dessas nove instâncias foi solucionada utilizando dois diferentes valores })aia o

parâmetro dc desalocação cle b e U.



76

Como o resultado de cada rodada é influellciado por favores ale:ttórios, inerentes à

estratégia (le solução proposta, :t heurística elaborada foi rodada cinco vezes para cada

instância.

Os resultados detalhados de todas as rodadas cle processamento encontram-se descritos

no Apêllclicc D

A análise tios resultados será realizada na próxima seção deste relatório e a Tabela 6.3

apresenta o resumo tios resultados alcançados

Para cada instância são apresentados os seguintes resultilclos

e Resultado Inicial - Custo do resultado obtido no primeiro resultado da

hcurística, sem os ciclos de desalocação e re-alocução aleatórios.

. Melhor Solução - Custo da melhor solução em relttção às dez rodadas (cinco

rodadas com cada parâmetro de desalocação), (lue resulta cla melhor solução

encontrada.

e Taxa T:\xtt de desalocação cine indica a fiação dos veículos aleatórios da

solução comente que tem seus pedidos clesalocaclos, conforme descrito
ulteriormente.

e Melhor' Resultados - Custo da melhor solução em relação às cinco rodadas com

a taxa de desalocação inclicadtt. Entre parênteses é indicado o desvio em relação

li melhor solução.

e Resultado Médio - com a taxa de desalocação

indicado o desvio enl relação à melhor solução.

. Desvio Padrão - Desvio padrão (em %) entre os custos obtidos nas cinco

rodadas cla instância com a taxa de desalocação indicada;

e Melhoria Média - Percentual ou valor absoluto médio cle melhoria do resultado

inicial para os resultados no Him dos ciclos de sorteio com a tttxa cle clesalocação

inclicacla.

e Tempo (s) -- Tempo total cle processamento de cada rodada, e]]] segundos, em

um computador Pentium IV, 3GHz. Ressalta-se (lue a variação clo teillpo cle

process:tmento em um mesmo computador é imperceptível nas diferentes

roclaclas de uilla mesma classe e il esmo grau cle restrição. Isso ocorre, pois o

número de iterações é fixo ali 1 00.000, como critério cle parada.

indicada Entre parênteses el l lLI(



77

I'abela 6.3 Resumo dos Resultados tios Testes Realizados

Pode-se perceber de imediato que, eill relação à solução inicial, os ciclos dc desalocação

c re-alocução geraralll melhorias entre 9% e 20%

Os resultados obtidos pela taxa cle desalocação de U, cle forma geral, são melhores que

:tclueles obtidos pela\ taxa de desalocação de b. E possível também perceber que o

desvio padrão tias rodadas com a taxa b foram sempre superiores aos das rodadas de

t :lX:l yq.

As rodadas com a taxa cle dest\locação de U foram mais eficientes em tempos de tempo

de process mento. Isso é fácil de ser entendido, pois o esforço computacional é menor

para sortear e clesalocar, pois são menos veículos desalocaclos que para a taxa iya. Os

tempos cle processamentos são bastante reduzidos, mesmo para instâncias grandes (3 a 5

minutos para instânciíts cle 1 00 pedidos).

Não houve diferença de desempenho significativo para itlteração entre os níveis de

restrições 20%, 40qn e 60qn

Instância
Rcsultll(lo

Inicial
Nlclhor

Solução
-l':ix:ç

Nlclhor
Resultatlo

Rcstilt:i(1o

Nlédio

l)csvio
l)cidrão 9t

Nlclhoria

Nlédia%
I'cittl)o

Is)

\ - 2o( 7.998.23 6.3+3.4o :
6.432.78 (+ 1 .4% )
rl.343.40 (+o.o% }

(].580.06 (+3.7% )

6.385.2S (+0.7q, l 17.7oÇ2o.2ot  
\ - 4(}% S.o35.5o 6.465.o3 :

r).644.85 í+2.8% )
6.4fl5.03 (+0,0%)

(l.7 1 7.00 (+3.9%)
Íi.508.27 (+0.7q  1 6.40%1 9.0oq  

\ - 6o( S.23o.63 6.4o+.56 :
6.428.44 Í+0.4% )
6.404.56 (+0.0%)

(l.706. 1 8 (+4.7q

6.578.70 (+2.7q  i 8.5oq20. 1 oq  
1{ - 21)% 1 o.2S 1 ,3o 9.1+3.79 :

L).3 1 4.87 (+ 1 .9% )

9. 143.79 (+0.0%)

t).407.8q Í+2.9%

LJ.254.5(l f+ 1 .2% l 
8.50r;{

l o.ooq  
1; - +t)9 1 o.43 1 .2o 9.236.31 :

9.305.73 Í+0.8% )
9.23f].3 1 (+0.0% }

).3f]8.2f] {+ l .+c%r l

9.2S6.97 (+o.5% l 11.00(Zr
l0,20%

=
1} - 6oç 1o.433.3o 9.329.89 :

9.329.89 (+0.0%. )

9.3f)6,85 (+0,4%, )

).579.55 (+2.7%

LJ.489.2 1 (+ 1 .7Ç  
$.2o(
9.ooÇ  

(: - 2o% 14.374.4o 12.794.7o :
1 2.838.90 (+0.3%)
1 2.794,70 (+0.0%)

13.030.64 (+1.8
1 2.972. 1 8 (+ 1 .41  9.80%9.30%  

(: - +1)ç 1+.425.1o 12.+56.3{} :
1 2.797.80 f+2.7% )

1 2.456,30 (+0.0%)

1 3.035.80 (+4.7q
1 2.928.30 (+3.8q  

9.6oq

1 o.4oq  
C - ht)CZk [4.435.9o 12.66$.8o :

1 3. 1 25.00 (+3.6%)

1 2.668.80 (+0.0% )

1 3. 1 80.0S (++.0q
1 2.998. 1 8 (+2.f){  

$.7oq
l o.ooq  



78

6.6. Análise Dctalhacla dos Resultados Obtidos

. Resultado Nlédio e Desvio

O resultado inéclio cle custo resultou cle acordo com o cine seria intuitivamente esperado:

na média, níveis de restrição maiores tendem a diminuir a quantidade de combinações

possíveis e penalizar o custo total. Ressalta-se, no entanto, que como as restrições são

geradas cle forma aleatória e um único conjunto de restrições foi sorteado para cada

classe, pode acontecer de um sorteio, mesmo que mais restrito, seja mais favorável que

o outro.

O desvio padrão entre as soluções geradas, para uma mesma taxa de clesalocação,

com:armo apresentado na Tabela 6.3 são en] média da ordem cle l,lqo do valor da

solução (variaram de 2,5% a 0,5qn nos testes). Apesar tios resultados variarem a cada

roclacla, não mudam a ordem de grandeza cla solução alcançada. No entanto essa

variação in([ictt (lue efetuar a]gumas roc]adas e considerar o menor valor é cle fato uma

boa estratégia de solução. Ou sQa, a heurística parece ser variável, mas suficientemente

rápida para club sejtun adotadas várias rodadas ao se tentttr resolver os problemas

pior)oitos. A coluna ''Melhor Solução'' inclic:\ as inelhorcs soluções encontradas na

Tabela 6.3.

e Tcilll)o(ile PI'ocessaillellto

O tempo cle processamento de execução do aplicativo elaborado é expresso em

segundos, em um computador pessoal com processador Pentium IV - 3 GHz

A primeira observação é que, pala uma mesma instância, o tempo cle [)rocessamento não

varia nunca. Pode-se perceber também que o nível dc restrição não afeta de forma

signihcativa o tempo de processamento. Para problemas mais restritos, a heurística

tende a gerttr soluções inviáveis mais vezes, re-inserindo iltais vezes a melhor solução

vigente, por consequência. Mas o esforço computacional dessa ação adicional é

ll'l'lS01'10.

Os dois fatores que geraitl significativa variação no tempo cle processamento são a taxa

de desalocação e o tamanho do problema. A taxa de desalocação interfere no tempo cle

processe\mento, sendo quc a desalocação e re-alocação de U da frota aloc:!cla é illais

rápido que o ciclo que envolva b da mesma frota. Os ciclos cle U são em medi:\ 35qo

mais rápidos que os cle iy2. Isso parece ser uma relação constante.



'''&gt;~

79

O tamanho clo problema, como esperado, é o mais importante influenciados no tempo de

processamento. A instância B possui 1,5 vezes o número de pedidos, veículos e clientes

que a instância A, mas ele demora, em média, 2,7 vezes o tempo de processamento. A

instância C, por sua vez, possui 2,0 vezes o núillero cle pedidos, veículos e clientes,

porém clelnorou em média 5,9 vezes o tempo para processar. Percebe-se que a relação é

crescente não-linear.

e Compai'ação com o Resultado Inicial

O resultado obtido no primeiro resultado da heurística (''Resultado Inicial'', na Tabela

6.3), sem os ciclos de clesalocação e re-alocução aleatórios, foi referenciado para

peiinitir uma avaliação isolada do desempenho tios ciclos de clesalocação c re-alocução.

A solução inicial nada illais é do que uma primeira solução tactível e gerada de forma

míope. Consicleranclo que os custos fixos são Biltre R$ 100,00 e R$ 200,00 e os custos

variáveis entre R$ 1 ,00 e R$ 1,50, a Tabeltt 6.3 indica club a economia proporcionada

pelos ciclos é altamente considerável, inclicanclo economia grande de veículos e

tamanho das rotas. Porén}, como infelizmente não foi possível obter a partir do método

cxato as soluções ótimas, fica difícil avaliar se essas economias aproximam

suticientemeilte a solução da solução ótiina.

e Taxa clc Dcsalocação

A solução inicial é dada pela construção cle uma solução a partir de uma frota

[olalmeilte livre, isto é, co]]] todos os veículos desalocaclos. Pot isso que, sendo a

heurística aplicada para alocação sempre a mesma, os resultados da alocação inicial são

sempre iguais.

Os ciclos de desalocação e re-alocução, então, são os responsáveis por introduzir um

falar ale:\tório e permitir que sejam atingidas soluções melhores. Deve ser

compreendido, no entttnto, que quanto maior a frota desalocacla a cada iteração, mais

próxima cla solução inicial tenclein a ser as soluções geradas

A primeira conclusão é que a taxa de desalocação U obteve resultados melhores que a

taxa b. Os resultados não apenas forais\ melhores, como o tempo de processamento

também é naenoi

Provavelmente, os melhores resultados foram obtidos porque as soluções conseguirtull

se desprender mais da solução inicial com a taxa cle h do (lue com b.



80

Um valor muito baixo é também linlitante, uma vez que se o nomeio de desalocações

forem reduzidos demais, também existirá dificuldade cla solução se afastar cla solução

anterior. Mais teste podem ser feitos, porém o objetivo aqui não é calibr:\r com exatidão

o parâmetro para o problema proposto, mas sim explicar e ressaltar a importância do

mesmo.

e Rotas Geradas

As lotas geradas pela heurística são em geral ótimas, dado o pequeno número dc

atendimento que ein média é feito por um veículo. Mas a geração dessas rotas é pelo

ponto mais próximo, o que de fato não garante que elas sejam sempre ótimas. Para até

três pontos (a base e dois clientes) a rota sempre será ótima, formando um triângulo. No

caso cle mais de três pontos podem oconer rotas sub-ótimas. O limite teórico é o

atendimento de seis clientes, dado que o caminhão mais compartimentado possui seis

compartimentos

A l)reposta blue aqui se faz é no desenvolvimento cle melhorias da estratégia aqui

proposta, seja inserida uma sub-rotina que faça tentativas de trocas entre a ordem dos

pedidos para otimizar rotas com mais de dois clientes e gerar de forma gaiantid:t o

melhor roteiro de atenclinlento para cada veículo automaticamente.

6.7. Consí(gerações ll'mais

Os experimentas computacionais a partir elos testes gentdos permitiram perceber a

adeclu:\ção da solução hcurística prol)opta ao problema de distribuição de derivados de

petróleo, além de realizar algumas análises e conclusões:

e A partir da solução inicial, os ciclos de clesalocação e re-alocução geraram

melhorias entre 9qn e 20qo

e Taxa cle desalocação de iZu geralmente atinge melhores resultados que a tax:t de

desalocação de b;

. Taxa de desalocação de U é itlais eficiente ei)l termos dc tempo de

proccssanlento;

. Os tempos de processamentos são bastante reduzidos, mesmo para instâncias

grandes ( 100 [)adidos);



81

./'N

B Tendência de comportíuncilto não exponencial do tempo de processamento em

relação ao tamanho do problema;

Apesar de, como discutido anteriormente, não ter sido possível encontrar as soluções

ótimas exatas para problemas de tamanho real, os testes realizados peimitiriun avaliar a

solução proposta

.'3

''\

''\



82

''b

''''\

f'x.

-'x

.pq

.'''''\

.''''\

,q.

7 CONCLUSÕESERECON'IENDAÇOES

Neste trabalho tratou-se do problema dc roteirização de entregas de derivados de

petróleo em postos de abastecimento a partir de uma base de distribuição através cle

caminhões tanque. Este problema configura-se como a roteirização de parte uilla frota

disponível heterogênea e veículos compartimentados com olÚetivo de tllinimizar o custo

total para realizar a entrega de um conjunto cle pedidos a diversos clientes. Embora seja

unl problema de roteirização de veículos, suas característictts e restrições, em pttrticular

as restrições de capacidade dos diferentes compartimentos cle c:\cla veículo, bem como

tts restrições de tamanho e tipo cle veículo club poclc atender cada cliente, tornam esse

problema complexo e impedem a adoção clãs heurísticas propostas pira outros

problemas de roteirização. A pesquisa bibliográfica realizada indicou que este é um

problema pouco estudado ntl literatura. Os únicos trabalhos encontrados foram cle

Bechara e Galvão(1984), Browil e Graves(1981), Brown e/ a/.(1987) e Avella, Boccia

e Sforza(2004).

Inicialmente foi proposta uma formulação matemática inédita que representasse

corretamente o problema. O modelo foi testado e validado através cle um problema de

peclueno porte, e resolvido inicialmente eill ambiente cle planilha eletrõnica, utilizando o

Solver do Excel. Tendo em vista as restrições dc tamanho de illáximo de problema que

pode ser resolvido no Solver, bem como a clificulclacle cle está-uturar um problema de

maior porte eill ambiente cle planilha eletrõnica e a ausência cle algoritmos específicos

p:tra problemas de programação inteira no Solver, o modelo matemático foi

implemcntaclo no CPLEX. 9.0 cla ILOG, utilizando a biblioteca (:o/zce/-/ 7ec'/z/zo/ogy

pala linguagem C++. Algumas instâncias para teste maiores for:un geradas, entretanto,

mesmo estando bastante aquém do tamanho usual cle problema encontr:tdo na prática,

não foi possível determinar as respectivas soluções ótimas, evidenciando :t

complexidade exponencial desse problema.

Assim, com a finali(lado de resolver instâncias cle problemas reais de entrega de

deriv:idos, foi então proposta uma estratégia cle solução heurística, inspirada em

conceitos clo GRASP, originalmente proposto por Feo e Resende (1989). Concluiu-se

por uma estratégia de múltiplas inicializações cle uma heurística rápida, com a inclusão

tle um fatos aleatório que permita, cle forma guiada, gerar variabilidade nas soluções

encontlaclas.



'\
83

A estratégia de solução proposta compreende uma heurística com duas partes principais.

A primeira é ullla heurística rápida de alocução cle pedidos aos caminhões, baseado no

menor custo adicional e orientado por parâmetros de capacidade de agrupamento e de

restrições de alocução. A segunda pinte constitui a geração de ciclos de desalocação

baseados em sorteios, que permitisseili gerar víuiabilidade nas soluções encontradas.

Como não existe um:t base dc (tactos clc problemas teste disponível para esse tipo de

problema abordado e os métodos exatos não puderam resolver instâncias nem menores

blue as de tam:anho real, foram criadas classes de problema de tamanhos compatíveis

com os problemas reais dessa natureza. Pt\ra garantir a contiabilidade nesses resultados,

foram geradas e testadas diversas instâncias, com variações no tamanho do problema e

nível cle restrição.

Os testes desenvolvidos para avaliam o nlétoclo heurístico foram elabor:tolos com

características que permitiram a avaliação da variação quilntitativa de suas

características nos resultados. Uma vez club falares ale:ttórios inerentes à heurística

tornam seu resultado variável, foram executadas cinco rodadas cle cada instância.

Os ciclos de desalocação são efetuaclos sobre uma fiação cla frota total alocada. Os teste

demonstranln] blue uma fração de y cla trota obteve resultados significativamente

melhotcs (lue ciclos aplicados sobre iy2, tanto em termos cla qualidade da solução quanto

no tempo tot:tl cle processamento

Ressalva-se que esse e outros parâmetros que compõem o algoritmo não foram testados

à exaustão, porém, recomellcla-se club sejam sempre testactos enl instâncias de diferentes

tamztnhos e características como a avaliação aflui realizacl:t

C)s resultados obtidos são conlpiovadamente factívcis. Se o nível de otimalidade do

resultado não pode ser comprovado, ao menos foi comprovada a aplicabilidade prática

clo método desenvolvido no suporte à alocução feita hoje manualmente em diversos

locais. Vale lembrar que atnbos os Uabalhos de Brown e Graves (1981) e Brown ef a/.

(1987) clescrevelam sistemas de suporte que clitlcilnlente pocleriitm eliminar o opor:odor

humano, responsável pelo julgamento e atuação em casos de exceção. Porém é
- .{';'- ', '. p"'--.n".;« .IP .'p''ii]'çnç (]iie lim nlétoclo comout:\cion:\l (leincontestável o auxílio e

otimização pode fornecer.



84

Para pemlitir o teste das soluções itqui obtidas, permanece o desafio por buscar

referências. A primeira sugestão é realizar testes com dados reais e coinpará'los aos

resultados obtidos m:ulualnlente pelas distribuidoras

Outra sugestão é a formulação do problema como um problema de particionameilto de

conjuntos (.çe/ /2a/////o/zfg), (lue pode ser resolvido através cla enumeração cle todas as

possíveis combinações de alocução para gerar colunas de entrada para um método cle

solução excita de programttção cle viagens. A enumeração de todas as combinações

possíveis pode ser gerada computacionalmente, porém o número cle coltmas também é

exponencial em relação ao tamanho clo problema, o que pode inviabilizar o método.

Altcrnativaincnte pode-se pensar numa solução mais sofisticada baseada no inétoclo cle

gera\ção de colunas

Outra sugestão que pode ser feita é a introdução cle um novo mecanismo de melhoria de

resultados, que efetue ao final cle cada iteração uma busca por trocas do tipo 2-o/o/ ou .i-

o/)r, possivelmente inserido num esquema de controle utilizando busca tabu. Entretanto,

conforme discutido ao longo do trabalho, estima-sc que poucas bocas sejam possíveis

visto que existem muitas restrições além cla variação cle volume dos pedidos.



85

''\
REFERÉNCIASBlliLIoGliÂFICAS

AGENCIA NACIONAL DE PETROLEO - ANP; Anuário Estatístico Brasileiro do

Petróleo e do Gás Natural - 2001, 200 1 .

ASSAD, A. A. Mocleling and implementation issues in vel)ide routing. In: Vehicle

Routing: i\'lethods and Studies, B.L.Golclen, A.A.Assad (eds), Amsterdam: Norte

Hollancl, p. 7-46, 1988.,,''q.

AyELLA, p.; BOCCIA, M.; SFORZA, A. Solving a Fiel Delivery Problem by

Heuristic and Exact Approaches. European Journal of Operatioilal Reseai'ch.

vo1.152, PP.170-179, 2004.

BECHARA, J. J. B.; GALVAO, R. D. O Uso de Sistemas Computacionais Interativos

na Solução de Problemas de Roleamento de Veículos. Anais do XVll Simpósio da

SOBRAPO, Rio cle Janeiro: pp.279-293, 1 984.

BODIN, L.; GOLDEN, B.; ASSAD, A.; BALL, M. Routing anel Scheduling of Vehicles

and Crews - The State of the Art. Computet's anel Open'ations Resetti'ch, v.lO,

PP.63-21], 1983.

,''\

BROWN, G. G. é?f a/. Real-Time, Wide Área Dispatch of Mobil Talk Trucks

Interl'ices, v. 17, pp.107-120, 1987.

BROWN, G. G.; GRAVES, G. Real-time dispatch of petroleun} talk trucks

N'lanagement Science, v. 27, pp.19-32, 198 1.

CUNHA, C. B. Aspectos práticos da :aplicação de modelos de roteirização de veículos :\

problemas reais. Transportes, v.8 , n.2, pp.5 1 -74, 2000.

CUNHA, C. B. Uma contril)unção para o problema de roteirização de veículos com

restrições open'acionais. São Paulo: EPUSP, Departamento de Engenhtuia de

Transportes. 222p. (Tese cle Doutoramento), 1 997.

DANTZIG, G. B.; RAMSER, J. H. The Truck Dispatching Problem. N'lanagement

Science, vo1. 6, pp. 80-91, 1959.



86

)''\

DELORME, X.; GANDIBLEUX, X.: RODRIGUEZ, J. GRASP for set packing

problema. European Joui'nal of Open'ational Research, v. 1 53, pp. 564-580, 2004.

ESCOLA POLITECNICA DA UNIVERSIDADE DE SAO PAULO. Diretrizes para

Apresentação clc l)issertaçõcs e Teses, 2 ed., 200 1 .

FEO, T.A.; RESENDE, M.G. A probabilistic hcuristic for a conlputationally difticult

set covering problem, Operations Rcseai'ch Letteis, v.8, pp. 67-71 , 1989.

FEO, T.A.; RESENDE, M.G.C. Greedy rtuldomized aclaptive search proceclures, J. of

Glol)al Optimization, v.6, pp. 109 133, 1995.

FONSECA, C. H. F. Alocução de atencliinentos de colcta no transporte de ienicssas

expressas em gnindcs centros urbanos. São Paulo: EPUSP, Depaitanlento de

Engenharia de Transportes. 9 1 p.(Dissertação dc Mestrado), 2002

FUNARO, V. M. B.O. (Coorcl.). Dirctrizcs para Apresentações de l)íssert:tçõcs e

Teses da USP. São Paulo: SIBi-USP, 2004.

GALVAO JUNIOR, F. A. Otiinização clo sistema de colete dc resíduos de biomassa

de madeira para fins energéticos. São Paulo: EPUSP, Departamento dc Engenharia

cle Tntnsportes, 1 96 p (Dissertação cle Mestrado), 2004.

GAVISH, B.; GRAVES, S. The Traveling Salesman Problcm and Related

Pioblcms. Graduate School of Management, University of Rochestel', 1978.

z..

GEIPOT EMPRESA BRASILEIRA DE PLANEJAMENTO DOS TRANSPORTES.

Anuário Estatístico dos Transportes 2001. Disponível em:&amp;lt;

http://www.geipot.gov.br &gt;. Acesso em: 6 setembro 2004

CiENDREAU, M., LAPORTE, G., MASARAGANyl, C.; TAILLARD, E.D. A tabu

search heuristic for the heterogeneous fleet vehicle routing problein. Computei's and

Operations Reses\ich, V. 26, p.] 153-1173, 1999.

HALL, R.W.; PARTYKA, J.G. On the roacl to efficiency. OIUNIS Today, jun/97, p.38

47. 1997.



87

p'\

,JI'\

.''b

INSTITUTO NACIONAL DE METROLOGIA, NORMALIZAÇÃO E QUALIDADE

INDUSTRIAL - INMETRO. Norma N" NIE-DINIEL-020: Verificação e Inspeção

cle Veículos-Tanque Rodoviários. Rio de Janeiro: INMETRO, 1998.

INSTITUTO NACIONAL DE METROLOGIA, NORMALIZAÇÃO E QUALIDADE

INDUSTRIAL INMETRO. Portaria n" 059, de 19 cle março de 1993. Rio de

Janeiro: INMETRO, 1 993.

LAPORTE, G.; GENDREAU, M.; POTVIN, J.Y.; SEMET, F. Classical and modem

heuristics for thc vehicle routing problenl. Intcrnational Transactions in

open'tttional Rcsearch, v.7. n4/5, p.285-300, 2000.

PIRLOT, M. General Local Search Methods. European .Journal of Opcrational

Research, v.92, pp. 493-511, 1996.

SEDGEWICK, R. Algorithms in C++. 3''i Edition. Boston: Aclclison-Wesley, 2002. v.2

SILVEIRA, J. P. A Abertura do N'lercado dc Abastecimento de Combustíveis: A

Nova Estrutura Ti'ibutária e a Evolução da l)csregulamentação de I'icços.

Brasília: Agência Nacional de Petróleo, Superintendência de Estudos Estratégicos.

15p., 2002

SOUZA, E. CI. i\'lodelagem c resolução de um problema cle transporte do tipo

''carga única - colcta e entrega'' com janelas de tempo. São Paulo: EPUSP

Departamento cle Engenharia cle Transportes. 89p. (Dissertação cle Mestrado), 1 999.

TEIXEIRA, R. G. Heurísticas para o problema de dimensionamento e roteirização

de uma frota heterogénea utilízanclo o algoritmo Out-of-Killer. São Paulo:

EPUSP, Departamento cle Engenharia de Transportes. 121p. (Dissertação cle

Mestrado), 2001 .

TEIXEIRA, R. G.; CUNHA, C. B. Heurísticas para o Problema de Dimensionamento e

Roteirização de uma Frota Heterogênett Utilizando o Algoritmo Out-of-Kilter.

Revista Ti'ansportes. São Paulo: , v. 10, n.2, pp. 9-30, 2002.

THE C++ RESOURCES NETWORK. Desciiption of C++. Disponível em

&lt;http://www.cplusplus.com/i nfo/description.html&gt;. Acesso em: 4 agosto 2004.



88

ZNAMENSKY, A. Um modelo para a roteirização e programação do transporte de

deficientes. São Paulo: EPUSP, Departamento de Engenharia de Transportes 144p.

(Dissertação de Mestrado), 2000.



89

APÊNDICE A - NIODELAGENI PARA EVITAR SUBTOURS

Este apêndice tem por objetivo apresentar, de maneira mais detalhada, as restrições (9) e

(lO) do modelo matemático proposto para o problema da distribuição dc combustível a

partir de uma base de abastecimento (seção 3.2.6), que impedem a formação de sub-

rotas (n/bfo rrs) nas soluções da modelagem matemática proposta

Essas restrições foram formuladas e adaptadas tendo por base a proposta de Gavish e

Graves (1978) para o Problema do Caixeiro Viajante. Segundo os autores, definem-se

variáveis de fluxo yü relacionadas aos arcos (i,J) que fazem pane do roteiro de cada

veículo, sendo essa restrição modelada com base na hipótese de que (n --l) unidades

são produzidas na origem (o nó 1, que corresponde à base) e cada outro nó da rede

demanda l dessas unidades (lembrando que /z representa o número de nós ou pontos do

problema)

Assim, em torno de cada nó excito a base, somadas as variáveis de fluxo ye que saem

de cada nó e subtraídas as que chegam em cada nó (isto é y# -- yji para o nó i), o

resultado do balanço deve ser igual a -l

Se essa condição for suprida em torno de todos os nós excito a base, não existe

formação de slzbfozírs, como ilustrado no exemplo da Figura A.l, com

base

Figura A.



90

Caso houvesse algum siib/ozlr, o valor dessa diferença seria diferente de -l em algum

outro ponto que não a base, como ilustrado na Figura A.2, mais especificamente no nó

indicado em vermelho.

base

Figura A.2

Essa restrição foi generalizada para o caso do problema de roteirização de veículos

objeto deste trabalho, em que as variáveis de fluxo Z; são definidas para cada um dos

veículos.



91

APENDICEB INIPLEh'TENTAÇÃO EM ILOG CPLEX PARA C++

Confomle indicado na seção 4.2.1, apresenta-se aqui a implementação do modelo

matemático proposto para o problema de distribuição de derivados de petróleo no

pacote /Z,OG C/)Z,ÉIX para C++ na Figura B. l a seguir.

A instância deste exemplo é a mesma apresentada na seção 4. 1, resolvida em aplicativo

So/ver, de uin problema de entrega de 10 pedidos a partir de uma base, para 4 clientes,

com 4 veículos disponíveis

//
// Algori.tmo.CPLEX . cpp
//
#defi.ne ILOG.

#inc].ude&amp;lt;stdio.h&gt;
#i.nclude&amp;lt;wi.ndows.h&gt;
#i.ncludêl&amp;lt;stri.ng&gt;
#i.nclude&amp;lt;iostream&gt;
#inc].ude&amp;lt;iomani.p&gt;
#i.nclude&amp;lt;fstream&gt;
#i.nclude&amp;lt;math.h&gt;
#i,nclude&amp;lt;ti.me.h&gt;

#i.fdef
#include&amp;lt;ilcplex/ilocplex.h&gt;
#i.nc].ude&amp;lt;i.lconcert/ilomodeJ-.;h&gt;
ILOSTLBEGIN//ILOG standard tempo-ate ].ibrary

#endif

using namespace std

#ifdef LOG:;..

typedef lloArray&lt;lloNumArray&gt; lloNumArray2 ;
typedef lloArray&lt;lloFloatArray&gt; lloFloatArray2
typedef lloArray&lt;llolntArray&gt; llolntArray2;

typedQf lloArray&lt;lloNumVarArray&gt; lloNumVarArray2;
typedef lloArray&lt;lloNumVarArray2&gt; 11oNumVarArray3 ;

#endif

void mai.no

// i.ndices
int p, vl ir j, k;

//nomes para variáveis
cear str[30];

// cri.ando ambiente
lloEnv env;

// cri.ando modelo
1].oModel mymodel(env);

// cri.ando parâmetros f(v) (Vei.aulas)



92

iloNumArray cf(env, 4, 10, 10, 10, 10);
lloNumArray cv(envr 4, 1.00, 1.10, 0.75, 1.00)
llolntArray v5(env, 4. 2, 6, 3, 2)
lloNumArray vMax(env, 4, 30, 30, 15, 30);

// criando parâmetros f(i,j) (Cli.entes x Cli.entes)
lloNumArray2 d(envr 5);
d [ 0 ] = 11oNumArray (envr 5,
dtl] = lloNumArray(env, 5,

d [ 2 ] = 1].oNumArray (env, 5,
d[3] = 11oNumArray(env, 5,

d [ 4 ] = 11oNumArray (env, 5,

// cri.ando parâmetros f(i,v)
llolntArray2 r(env,
// r[0] é a base
rll] = llolntArray(env, 4,
r[2] = 11o]ntArray(envr 4,
r[3] = 11olntArray(env, 4,

r [ 4 ] = 11olntArray (env, 4

l
1,
l

/

5) ;
(Cli.entes x Veículos)

l ) ;
l ) ;
1)
l ) ;a- /

// criando parâmetros f(p) (Pedi.dos)
llolntArray cli.ente(env, lO, l, l, l,

respei.tar i.ndice i
lloNumArray vol(envl 10, 10, 25/ 5.
llolntArray r5(env, lO, 0, 1; 1, 1,

2 2 2, 3, 3, '1 / 4 ) ; //precisa

5,
v /

10,
0

10,
l 1,

5, 5,
o ) ;

5, 1 0)
If'Pode set

automati.zado

//cri.ando vara.aves.s de deck.sao f(vrifj) (Veiculo x Cli.ente x Cliente)

lloNumVarArray3 x(env,
for (v=0 ; v&lt;4 ; v++ ) {

xtv] = lloNumVarArray2(env, 5)
for ( i.=0 ; i&lt;5 ; i.-r+) {

xlvlli] = lloNumVarArray(env,
for (int ja0; j&lt;S; j++)

4 ) ; //veículos

5, 0, 1, ILOINT);

spri.ntf(str
xlv] [i] [j]

"xt%d,%d.%d]
setName ( str ) ;

p v, i, j)

//cri.ando vara.aveia de deck.sao f(p/v)
1].oNumVarArray2 y(env, lO);
for (p=0 ; p&lt;10 ; p++) {

ylp] = lloNumVarArray(env, 4/
for (i.nt v=0; v&lt;4; v++)

(Pedi.do x Veiculo)

ILOINT);

spri.ntf(self "y[8d,%d]",
y [p] [v] . setName (str) ;

P.v)

//criando vara.aves.s de deck.sao f(vri., j)

lloNumVarArray3 z(env, 4) ; //vei-autos
for (v=0 ; v&lt;4 ; v++ ) {

zEv] = lloNumVarArray2(env, 5);
for (i.=0; i&lt;5; i.++) {

zlylli] = lloNumVarArray(env,
for (i.nt j=0; j&lt;5; j++)

(Veiculo x Cliente x Cliente)

5 1].olHEi.ni.ty); X

spri.ntf(star "z[8dr8d/%d] "f
z [v] [i.] [ j ] . setName (str) ;

v, j., j ) ;

l
r

0.0, l . o, 1 . 4 , 2 . 0, 2 . 8 ) ;
l . o, o . o, 2 . 0, 3 . 0, 3 . 6 ) ;
1 . 4. 2 . 0, o . o, 3 . 6, 3 . 0) ;
2 : 0, 3 . 0, 3 . 6 , o ;lo, 2 . 0 ) ;
2 . 8, 3 . 6, 3 . 0, 2 . 0, o . o ) j



93

}

//restri.cao de Pedi.do x Veiculo
for (p=0 ; p&lt;10 ; p++) {

lloExpr expr(env);
for (v=0 ; v&lt;4 ; v++) {

expr +: ylpJlvl;

mymodeliadd(expr
expr.endo;

//restricao de Compartimentos5
for (v=0 ; v&lt;4 ; v++ ) {

lloExpr expr(env);
for (p=0 ; p&lt;10 ; p++) {

expr +- r5 [p] + y]p] [v]

mymode[.add(expr&amp;lt;= v5[v])
expr.endo;

vo lvJ ) ;

//restricao de Voluma Maxi.mo

for(v=0; v&lt;4 ;v++)(
lloExpr expr(env)
for (p=0 ; p&lt;10 ; p++ ) {

expr +- vo]]p] t y]p]tV]

mymode[.add(expr&amp;lt;- vMax]v]);
expr.endo;

// restri.cao Comi.chão atende Cliente do Pedi.do
for(p=0; p&lt;10; p++)(

for (v=0 ; v&lt;4 ; v++ ) {
lloExpr expr(env);
for ( i.=0 ; i.&lt;5 ; i,++ ) {

expr +' xtv] [i] [c[i.ente]p]]

mymode[.add(expr &gt;: yEp]]v]);
expr.ando;

}

}

// restricao Veículo respei.ta CI i.ente
for (v=0 ; v&lt;4 ; v++ ) {

for(j=1; j&lt;5; j++){ //exclui a base
lloExpr expr(env);
for(i=0; i&lt;5; i++){

expr +- x [v] [i.] [j ] ;

mymode[.add(expr&amp;lt;- r]j]]v])
expr.endo;

}

// restri.cao CoREi.nui.dade das Rotas
for (v=0 ; v&lt;4 ; v++ ) {

for(k=0; k&lt;5; k++){
lloExpr expr(env);

for ( i=0 ; i.&lt;5 ; i.++ ) {
for ( ]=0; j&lt;5; j++) {

expr +' xtv] [i} [k] x [v] [k] [j] ;

mymodel.add(expr -- 0);



94

}

expr.ando

// restri.cao Veículo faz no máximo uma Rota
for(v=0; v&lt;4; v++){

lloExpr expr(env);
for ( j=0 ; j&lt;5; j++) {

expr +- x]v][0]1j];//a parti.r da base

mymodel.add(expr&amp;lt;= 1);
expr.endo;

}

}

// restricao Evi.tar sub rotas - Seqüênci.a
for (v=0 ; v&lt;4 ; v++) {

for(k=1; k&lt;5; k++){ //exclui. a base
lloExpr expr(env);

lloExpr expr2(env);
for ( i.=0; i.&lt;5; i.++) {

for ( j=0; j&lt;S; j++) {
expr +' z [v] [k] [j]
expr2 += --1 + x]v]

z [v] [j.] [k] ;

[k] [j] ;

mymodel.add(expr -- expr2);
expr.ando;
expr2.endo;

// restricao Evi.tar sub-rotas Respei.to
for (v=0 ; v&lt;4 ; v++ ) {

for ( i=0 ; j.&lt;5 ; j.++ ) {

for ( j=0 ; j&lt;5; j++) {
mymode[ .add (z [v] [i.] [j ] &amp;lt;4 x [v] [j.] [j ] ) //4

1 1 l
}

//cri.ando funcao objeti.vo
lloExpr obj(env);
for (v=0 ; v&lt;4 ; v++ ) {

for (j=0; j&lt;5; j++ ) {
obj += cftv] t xtv]
for(i.=0; i.&lt;5; i++) {

obj += cv]v]

io] [j]

+ d]j.]

//

[ j ]

parcela custo fixo

x [v] [i] [ j ] ; // parcela
custo variável

mymodel .add( lloMI.ni.mi.ze(env. obj

}

) ) ;

// adi.ci.onando funcho objetivo ao modelo
mymodel.add(obj);

// ligando modelo ao algoritmo
lloCplex mycplex (mymodel) ;

mycplex . exportModel( "di.stcomb . mps") ;

// resolvendo o problema
mycpl-ex.solveo;

//extraindo; resultados



95

cout&amp;lt;&lt;
cout&amp;lt;&lt;

Solution Status i.s "&amp;lt;&amp;lt;mycplex.getStatuso&amp;lt;&amp;lt;endl;
The objecto.ve va].ue i.s "&amp;lt;&amp;lt;mycplex.getObjValueo&amp;lt;&amp;lt;endl;

// finalizando
env.endo;

} // mai.no

Figult



96

APENnicEC PLANILHA l)E AUXÍLIO NO 1)ESENVoLVIN''lENTo

Confoi'mc descrito na seção 5.1, para subsidiítr o desenvolvimento da estratégia

heurística propost:t foi inicialmente desenvolvido um exemplo contendo 26 clientes

(postos de combustíveis), 36 pedidos e uma frota disl)oilível de 55 caminhões tanque

O exemplo foi todo modelado em uma planilha eletrânica para testar e verificar, passo a

passo, a consistência dos resultados de cada ett\pa de desenvolvimento do algoritmo.

Inicialmente todos os dttdos foram listados, com as respectivas características, confonne

figuras a seguir. Conforme a Figura C. 1 , pala cada cliente, nomeados ''A'' a ''Z'', foram

indicadas as coordenaclits clo local, se o cliente aceita (1) ou não (0) cada padrão cle

pinturtt de veículo (cor) e se existe limitação do cliente a aceitar apenas can)inhões

menores, do tipo //trc'k.

Cliente
BASE
A
B

C
D

E

F
G

H

J
K

L
M

N

0
P

Q

R

S

T

U
V

W
X

Y
Z

X

40

93,7
13,3
23,4

27

37,5
74,3
30,5

2,9

34,4
5,1

55,7
14,5
62,3
24,6
7,5

4

7,6
57,8
97,7
55,1

31,4
78,1

16

98,9
76,9
50,8

Y

60

70,6
1 6,9

99,8
91

l l ,l

84,5
18,1

94

44,9
8,2

70,4
52,2
13,2

90
28,5
95,7
26,9
57,7
31,7
94,5
88,2

59
94

18,1

80,3
85,6

Coro i Corl Cor2 Cor3 Cor4 i SÓ T?

0
0

0

l
l
l
l
l
l
l
l
l
l
l
l
l
l
l
l

l
l
l
l
l
l
l
l
0
0

0

0

0

0

0

0

0

0

0

0

l

0

0

0: 0
oi o

0
0

0

0

0

0

0

0

0

1 '
0

0

0

0

0

0

0

0

0
0
0

0

0

0

0

0

0

0

0

0

0

0

0

0
0
0
0

0

0

l

0

0

0

0

0

0

Figura C. 1 - Dados cle cliente»



97

Para cada pedido foram indicados o cliente e o volume do pedido. Automaticamente são

verihcados os dados do cliente correspondente, ilustrado na Figura C.2

X
93,7
93,7
93,7
13,3
13,3
13,3
23,4
27

37,5
74,3
74,3
74,3
30,5

Y
70,6

70,6
16,9
16,9
16,9

[99:8
91

l l , l
84,5
84,5

18,1

Cor 0 l Cor 1 1 Cor 2
l l l l l

l l l l l

[ [ 'í]
l l l l
l l l l l

l l l
l l o l o
l l o l o
l l o l o
1 1 Ó l Ó

l

l

l

ll

l

l 1 1 1 0 l
1 1 í]l ]

l 1 1 1 0
l
o l o l o
o l o l Ó
Q ]: ql:t Õ

l l

l
l

Figura C.2 -- Dados de pedidos

Para cada veículo da frota, na Figura C.3 são indicados o tipo do veículo (1, 2 ou 3

conforme compaHimentos), se é próprio (P) ou terceirizado (T) e o padrão de pintura

(Cor, de 0 a 4)

Pedido [/]] Local Volume
0 A 30
7 A 15
2 A 5
3 B 5

4 B 5
5 B 5
6 C 5

7 D 20
8 E 15
9 F 20
/0 F 15

 F 10
/2 G 20
/3 H 15
Í4  20
/5 J 20

 K 10
/7 L 25

 M 30
 N 10

g g 20
23
22

g 10
10

 20
g P

20
10

29
28 U 10

30 V
4

 2530
34
35  

34,4
94  l l o 0  44,9 1 1 i l o 0

5,1 l 8,2 l l l l o l o 0  0
14,5 l 52,2

24,61 90  4
0 0

+  
{  {    :   
â 26,9a3  4   
H H    
y W  o l o l oó l ó l ó   
#  ] Q [L] Qo l o l o   

16 1 94
98,9 l 18,1    
76,9 l 80,3
50,81 85,6  o l o l i l o



98

Caminhão 3 Ê 4 1 5 1 6
3 1 2 1 1 [ 3
P l P l P
l l l l l l l

Próprio/Terceiro
Cor

Pleura C.3 - Dados de frota

A codificação utilizada para identificar o tipo dos caminhões apresenta-se na Tabela C. l

a seguir.

Tabela C. l Codificação dos Tipos de Caminhões

Os pontos das coordenadas dos clientes foram mapeadas para a visualização de sua

distribuição espacial, conforme observa-se na Figura C.4.

120

100

f

80

-e

xw T

eF

xV

+A

60 B BASE

40

20

8

B B

$

elx

100

+G

XE

40
0+--

0 20 60
l

80 120

Figura C.4 - Maoeamcnto dos clientes

25 26 27 28 29 30  32 33 34   37 38  40 4Í 42 43 44 45 46 47 48 49   52 53 54
3  3  3 3 2 2 2 2 3  2 2 l 3 2 3 2 2 2 2 2 2 3 3 2 3 3 3
P P + +

T T
+ + + +

T T T T T T T T T T T
;  ] + + + T T T4 0 0 0 2 2 2 2 2 2 2 3 3 3 3 4 4 4

Tipo Tamanho
Volume Nláximo

(litros)
Compartimentalização

(103 litros)

 Truck 15.000 5 - 5 - 5
2 Caneta 30.000 5 - 5 - 5 - 5 5 - 5
3 Carreta 30.000 [0 - 5 - 10 - 5



99

Todos as restrições foram identiHlcadas e mapeadas para a verificação da viabilidade das

soluções geradas, conforme Figura C.5 a seguir. Os parâmetros de facilidade e

serventia, também foram calculados.

Conforme se verifica na figura, para cada par pedido (i) - caminhão (1), são verificadas

as restrições e indicados se é possível (1) ou não é possível (0) a alocação de cada

pedido em cada caminhão. A serventia e a facilidade são as respectivas somas dos

valores de cada coluna alinha.

Facilidade

42

55

55

55

55

5

19

19

16

2

Serventia 27 27 21 ll ll ol 12 12 12 12 12

Figura C.5 Matriz de restrições

De maneira análoga, foi concebida uma matriz para indicação da alocação em curso e

verificação das outras restrições, exemplificada na Figura C.6. São indicadas com o

valor ''l'' as alocações de um pedido / em um veículo./. As restrições de compartimentos

de 5.000 necessários (.4/1/z. Co. 5) e disponíveis (À/a.r. Co. 5), volume ocupado (Vo/ume)

e volume máximo (À/ax Vo/.) também estão indicados para cada veículo.

  0 l 2 3 4 51 50 51 52 53 54  
0 l l 0 l l ol l l l  l  
l  l l l l 111 l l l l  
2  l l l l l ! l  l l l  
3  l l  l   l l l  
4 l l l l l 1 : i l l l l  
5

30 d
l
+4Ü g l é4 0 0

31 0 0 l 0 0 algo 0 0 0 0  
32 l l 0 0 0 01 1 l l l l  
33 l l 0 0 0 0 l l l l l  
34 0 0 0 0 0 01 1 l l l l  
35 0 0 0 0 0 0 0 0 0 0 0  

  



100

Facilidade

0

0

0

50

50

0

4

4

17

17

16

2

Serventia 0 0

0 1
2 6

30 30
30 30

0 0 3 ol 8 8 8 8 8

Min Co.5

Max Co.5

Volume

Max Vol.

l o o
3 2 6

15 30 20
15 30 30

o o o o
6 2 2 2
o o o o

30 30 30 30

Figura C.6 - Matriz de alocação



101

APENDICED RESULTADOS DOS PltOCESSANIENTOS

Confoinle indicado na seção 6.5, estão indicados aqui tactos os resultados cle todas as

rodas de teste realizadtts.

Para cada teste são apresentados os seguintes resultados

e

8

e

e

e

e

e

8

Custo da Me[hor So[ução Obtida Menor custo obtido cin relação às ] 0 roc]adas

(5 rodadas coill cada parâmetro cle clesalocação), que resulta da melhor solução

encontrada.

Custo Médio Resultítdo da função objetivo médio obtido pelas cinco rod:idas

Desvio Padrão Desvio padrão entre os resultados elas cinco rodadas.

Custo da Solução Inicial - Custo do resultado obtido no pritl)oiro resultado cla

heurística, seno os ciclos de desalocação e re-alocução aletltórios.

Melhoria Média Percentual ou valor absoluto nléclio de illclhoria cla solução

inicial para o fim dos ciclos de sorteio.

Ten[po Médio de Processamento (s) - Tempo médio de processamento, en]

segundos, em um computador Pentiunl IV, 3GHz

Custo cla Solução da Rodada l a 5 - Resultados cla função objetivo (custo total

cla solução) para cinco rodadas independentes cle uma mesma instância.

Diferença na Rodada l a 5 Desvio percentual cm relação ao melhor resultado

obtido(o custo da melhor solução)

A Classe A corresponde :\o problema com 50 pecliclos, 50 veículos e 35 clientes. A

Tabela D.l, Tabela D.2 e Tabela D.3 apresentam os resultados para os níveis de

restrição de 20%, 40qü e 60qo, tanto cona taxa de clesalocação de b quanto de U.

A Classe B corlesponcle ao problema com 75 pecliclos, 75 veículos e 53 clientes. A

Tabela D.4, Tabela D.5 e Tabela D.6 apresentam os resultados pica os níveis de

vesti'ição de 20qo, 40%o e 60%, tanto com taxa cle clesalocação cle b quanto de U.

A Cl:tese C corresponde ao problema coill 100 pedidos, 100 veículos e 70 clientes. A

Tabela D.7, Tabela D.8 e Tabela D.9 apresentam os resultados paul os níveis de

restrição cle 20%, 40% e 60qo, tanto com taxa cle desalocação dc b cluanto de U.



102

Tabela D. l Resultados l)ara Classe A Restrição 20qü

I'abela D.2 Resultados para Classe A Restricão 40%

Instância A - 2o% - b A - 20% - y
Veículos Disponíveis 35 35

N' de Pedidos 50 50
N' de Cttnlinhões 50 50

Nível de Restrição 20% 20%

Taxa de Desalocação b y
Custo da Nlclhor Solução Obtida 6.343,40

Custo Médio 6.580.06 6.385.28
Desvio Padrão 3.468,65 3.365.48

Custo cla Solução Inicial 7.998,23 7.998,23
Melhoria Média 17.7% 20,2%

Terllpo Médio de Processamento (s) 57 36

Custo da Solução na Rodada l 6.676,23 6.343,40
Diferença iia Rodada l 5.2% o,o%

Custo da Solução na Rodada 2 6.536.46 6.398,60
Diferctiça na Roclacla 2

Custo da Solução na Rodada 3

3.0%

6.632,07

0,9%

6.456.51

Diferença na Rodada 3 4.6% 1.8%

Custo cla Solução na Rodada 4 6.432,78 6.364,]2
Difereítça na Rodada 4 1,4% 0,3%

Custo cla Solução na Rodada 5 6.622,77 6.363.75
Diferença na Rodada 5 4,4% 0,3q

Veículos Disponíveis 35 35
N' de Pedidos 50 50

N' de Caminhões 50 50
Nível de Restrição 40% 40%

taxa de Desalocação
Custo da h'lclhor Solução Obtida 6.465,03

Custo Médio 6.717,00 6.508.27
Desvio Padrão 3.540.56 3.430,37

Custo da Solução inicial 8.035.50 8.035,50
Melhoria Média E6,4% 19.0%

rompo Médio de Processamento (s) 56 37

Custo cla Solução na Rodttda l 6.644.85 6.480,29
Diferença na Rodada l 2.8% 0,2%

Custo da Solução ila Rodada 2 6.799.55 6.595.68
Diferença na Rodada 2 5.2% 2.0%

Custo da Solução na Rodada 3 6.672,60 6.472.0]

Diferença na Rodada 3 3,2% o,lq
Custo da Solução na Rodada 4 6.80o.61 6.528,33

Diferença ila Rodada 4 5.2% 1,0%
Custo da Solução na Rodada 5 6.667.38 6.465,03

[)ifercnça na Rodada 5 3.1% o,o%



103

Tabela D.3 Resultados Para Classe A Restrição 60qc

I'abala D.4 Resultados para Classe B Restrição 20%

Instância A - 60% - b A - 6o% - U

Veículos Disponíveis 35 35
N' de Pedidos 50 50

N' de Caminhões 50 50

Nível de Restrição 60% 60%

I'axa cle Desalocação h y
Custo da Melhor Solução Obtida 6.4o4.56 6.404.56

Custo Médio 6.706.18 6.578,70
Desvio Pitchão 3.536.47 3.467,95

Custo da Solução Inicial 8.230,63
Melhoria NTédia

rompo Médio de Processamento (s)
Custo da Solução na Rodada l

57
20,1%

37

6.791,17 6.404,56
Diferença na Rodada l 6.0% o,o%

Custo da Solução na Rodada 2 6.428.44 6.636,76

Diferença na Rodada 2 0,4% 3.6%

Custo da Solução na Rodada 3 6.841.93 6.614.60

Diferença na Rodada 3 6.8% 3.3%

Custo da Solução na Rodada 4

Diferença na Rodada 4
Custo da Solução iia Roclacla 5

6.664.30 6.616,76
4.1( 3,3%

6.805.06 6.620,80

Diferençii na Rodada 5 6.3q 3,4%

Instância B - 20% - b B - 20% - U
Veículos Disponíveis 53 53

N' de Pedidos 75 75
N' de Caminhõcs 75 75

Nível de Restrição 20% 20%

taxa de Desalocação b 1/4
Custo da B'lelllor Solução Obtida 9.143,79

Custo Médio 9.407.89 9.254.56
Desvio Padrão 4.958,55 4.877.97

Custo ckt Solução Inicial
Mlelhoria Média

l0.281.30 l0.281.30
8,5% lo,o%

Tetllpo Médio de Processamento (s) 152 100

Custo clip Solução na Rodada l 9.467.63 9.224.17

Diferença na Rodada l 3.5q 0,9%

Custo da Solução n:\ Rodada 2 9.446,28 9.216,18

Diferença na Rodada 2 3.3% 0,8%
Custo da Solução na Rodada 3 9.404.13 9.143,79

Diferença ila Rodada 3 2.8% o,o%
Custo da Solução na Rodada 4

Difereíiça na Rodada 4
Custo da Solução na Rodada 5

9.406.54 9.336,46
2,9% 2.1cZt

9.314,87 9.352.18

Diferença na Rodada 5 1,9% 2,3%



104

Tabela D.5 Resultados ptua Classe B Restri ão 40qo

Tabela D.6 Resultados T)ara Calasse B Restrição 60%

Instância
Veículos Disponíveis

B - 40% - U B - 40% - U
53 53

N' de Pedidos 75 75
N' de Calninhões 75 75

Nível de Restrição 40% 40%

Taxa de Desalocacão B  
Custo da Nlelhor Solução Obtida 9.236,31

Custo N'tédio 9.368.26 9.286.97
Desvio Padrão 4.937,63 4.894.85

Custo da Solução Inicial l0.431.20 l0.431,20
Melhoria Média! l0.2% ll.o%

['empo Médio de Processamento (s) 153 99

Custo cla Solução na Rodada l 9.429.31 9.273,89
Diferença na Rodada l 2.1cZt 0,4%

Custo da Solução na Rod:tda 2 9.402.95 9.393,9]
Diferença na Rodada 2 1.8% 1,7%

Custo da Solução na Rodada 3 9.372,60 9.261.4o
Diferença na Rodada 3 1,5% 0.3%

Custo da Solução na Rocladl1 4 9.330,71 9.269,36

Diferença na Rodada 4 1.0% 0,4%

Custo da Solução iia Rodada 5 9.305,73 9.236,31
Diferença na Rodada 5 0.8% o,o%

Instância 13 - 60% - b B - 60% - y

Veículos Disponíveis
N' de Pedidos

53 53

75 75

N' de Caminhões

Nível de Restrição

75 75

60% 60%

htxa de Desalocação b  
Custo da l\,melhor Solução Obtida 9.329,89

Custo Médio 9.579.55 9.489.21
Desvio Padrão 5.050,08 5.001.58

Custo da Solução Inicial l0.433.30 l0.433.30
Melhoria Média 8,2% 9,0%

tempo Médio de Processamento (s) 155 l o l

Custo da Solução na Rodada l 9.669.97 9.531,65

Diferença na Rodada l 3,6% 2,2%
Custo da Solução na Rodada 2 9.329,89 9.366,85

Diferença na Rodada 2 o,o% 0,4%

Custo da Solução na Rodada 3 9.676.58
9.560.37

Diferença lia Rodada 3 3,7% 2.5%
Custo cla Solução na Rodada 4

Diferença iia Ro(Jaula 4
9.703.99 9.443,19

4,0q 1,2%
Custo da Solução na Rodada 5 9.517.30

2,0%

9.544.00

Diferença na Rodada 5 2,3%



105

Tabela D.7 Resultados para Classe C Rcstricão 20%

/'"'''\

/''\

Tabela D.8 - Resultados pane Classe C Restrição 40qo

Instância C - 20% - b C - 20% - y
Veículos Disponíveis 7() 70

N' de Pedidos 100 100
N' cle Calltinhões 100 100
Nível cle Restrição 20q 20%

fala de Desalocação h H
Custo da Nlelhor Solução Obtida 12.794,70

Custo Médio 13.030.64 12.972.18
Desvio Padrão 6.868.17 6.837,34

Custo da Solução Inici:tl 14.374.40 [4.374.40
Melhoria Médio 9,3% 9.8%

retiapo Médio de Processamento(s) 340 2]4
Custo cla Solução ila Rodada l 13.065.40 12.988,20

Diferença na Rodada l 2,1% 1,5%

Custo da Solução na Rodada 2 13.106,60 12.794,7o
Difeiettça na Rodada 2 2,4% o,o%

Custo da Solução na Rodada 3 13.069.2o 12.983.00
Diferença na Rodada 3 2,1% 1,5%

Custo da Solução na Rodada 4 [2.838,90 13.068.70
Diferença na Rodada 4

Custo da Solução na Rodada 5

0.3%

13.073,10

2.1aZz

13.026,30

Diferença na Rocktda 5 2,2% 1.8%

Instância C - 4o% - b C - 40% - q
Veículos Disponíveis 70 70

N' de Pedidos 100 10o
N' de Caminhões 100 10o

Nível de Restrição 40% 40%

I'axa dc Dcsalocação b H
Custo da R'lelhor Solução Obtida 12.456,30

Custo Médio [3.035,80 É2.928.3o
Desvio Padrão 6.871.85 6.816.91

Custo da Solução Inicial 14.425.10 [4.425.10
Melhoria Média 9,6% l0,4%

tempo Médio de Processamento (s) 341 214
Custo cla Solução ntt Rodada l 13.195,20 13.050,30

Diferença na Rodada l 5,9% 4.8%

Custo da Solução na Rodada 2 12.797.80 12.456,30
Diferença na Rodada 2 2.7% o,o%

Custo da Solução na Rodada 3
Diferença na Roclacla 3

13.244,90 13.246.80

6.3% 6,3%
Custo da Solução na Rodada 4 13.072,40 12.939.00

Diferença na Rodada 4 4,9% 3.9%

Custo da Solução na Rodada 5 12.868.70 12.949.10

Diferença na Rodada 5 3,3% 4,0%



106

Tabela D.9 Resultados }t\ra Classe C Restrição 60%

Instância C - fi0% - ]/l l C . 6í) %, . izá
Veículos Disponíveis 70 7()

N' de Pedidos 100 lnn
N' de Caminhões 100  
Nível de Resthcão 60%  

Taxa de Desalocação b  
Custo da h'melhor Solução Obtida 12.668.80

Custo Médio t3.]80.08 12 9q8 18
Desvio Padrão 6.946.63  

Custo da Solução Inicial 14.435.90 14 43S 9n
Melhoria Média 8.7%  

I'empa Médio de Processamento (s) 341 9t4
Clusto da Solução na Rodada l 13.283.70 13 0R1 7n

Diferença na Rodada l 4.9% 33%
Custo da Solução na Rodada 2 13.125.00  

Diferença na Rodada 2 3.6%  
Custo da Solução na Rodada 3 13.176.40 12 997 6n

Diferença na Rodada 3 4.0% 2.0q
Custo da Solução na Rodttda 4 13.]47.30 12.66R Rn

Diferença na Rodada 4 3.8% n.n%
Custo dtt Solução na Rodada 5 13.168.00 13 917 nn

Diferença na Rodttda 5 3.9% 43%


</field>
	</doc>
</add>