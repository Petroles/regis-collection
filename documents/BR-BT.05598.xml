<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-BT.05598</field>
		<field name="filename">BTP_2003_46_1_2_09_Programacao_de_distribuicao.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">PROGRAMAÇÃO DE DISTRIBUIÇÃO DUTOVIÁRIA
DE DERIVADOS DE PETRÓLEO
PIPELINE DISTRIBUTION SCHEDULE FOR
OIL DERIVATIVES
PROGRAMACIÓNDE DISTRIBUCIÓNPOR DUCTOS DE DERIVADOS DE PETRÓLEO
Rubens Rejowski Junior Departamento de Engenharia Química e-maik. rubens@lscp.pqi.ep.usp.br Universidade de São Paulo José Maurício Pinto Department of Chemical and Biological Sciences and Engineering e-mail. jpinto@poly.edu Polytechnic University, NY, USA.
RESUMO O caso aqui considerado é o de uma companhia petrolífera que opera com uma refinaria e depósitos em locais geograficamente distintos. Um sistema dutoviário real de transporte de quatro produtos derivados, denominado OSBRA, que abastece cinco bases de distribuição nas regiões Sudeste e Centro-Oeste a partir da refinaria REPLAN de Paulínia (SP). Para isto, é desenvolvido um modelo de programação matemática mista-inteira linear para um sistema dutoviário que deve respeitar condições de balanço de massa, de distribuição e de demanda pelos produtos a serem transportados e armazenados. O modelo é baseado na formulação Convex-hull. Pode-se destacar como principais desafios deste trabalho o tempo de percurso dos produtos enviados da refinaria para cada base, o seqüenciamento restrito de derivados dentro do duto e o custo de bombeamento sazonal. Este último caracteriza-se pela variação deste parâmetro nos períodos de pico de utilização de energia elétrica no País. Como solução destes problemas devem ser conhecidas as quantidades a serem enviadas para os vários depósitos durante o horizonte de tempo de operação, as quantidades dos produtos enviados aos mercados consumidores e os produtos estocados ao longo do duto.
ABSTRACT
The case herein considered is from an oil company which operates with a refinery and stores at geographically distinct locations. A real pipeline system for the transport offour derived products, called OSBRA, which supplies five distribution bases in the Southeast and Central-West regions, from the Paulínia Refinery - REPLAN, in the State of São Paulo. For this, a linear mixed integer mathematic programming model for a pipeline system was developed, which must respect the mass balance, distribution and request conditions by products to be transported and stored. The model is based on the Convex-hull formulae. The time the products take from the refinery to each base, the restricting sequencing of derivatives into the pipeline and the seasonal pumping costs can be highlighted as the main challenges of this work. This latter is characterized by this parameter variation in the peak periods of electric energy utilization in the country. As a solution for these
problems, the amounts to be sent to various stores during the operational time range, the amount of products sent to consumer markets and the products stored along the pipeline must be known.
RESUMEN
El caso que aquí se considera es el de una compahía petrolífera que opera con una refinaria y depósitos en lugares geográficamente distintos. Un sistema de ductos real de transporte de cuatro productos derivados, denominado OSBRA, que abastece cinco bases de distribución en las regiones Sudeste y Centro-Oeste, a partir de la Refinería de Paulínia — REPLAN, en el estado de São Paulo. Para esto, se desarrolla un modelo de programación matemática mixta-entera lineal para un sistema de ductos que debe respetar condiciones de balance de masa, de distribución y de demanda para los productos a ser transportados y almacenados. El modelo está basado en la formulación Convex-hull. Se pueden destacar como principales desafios de este trabajo el tiempo de recorrido de los productos enviados desde la refinería hasta cada base, las secuencias pautadas, secuencia restrictiva de derivados dentro de la tuberia y el costo de bombeo por épocas. Este último se caracteriza por la variación de este parâmetro en los períodos de pico de utilización de energía eléctrica en el País. Como solución de estos problemas deben conocerse las cantidades a ser enviadas hacia los varios depósitos durante el horizonte de tiempo de operación, las cantidades de los productos enviados a los mercados consumidores y los productos almacenados a lo largo del ducto.
1.	INTRODUÇÃO
Atividades referentes ao planejamento de produção e de distribuição ganharam importância a partir de 1980, quando se identificou que o ganho de qualidade, o corte de custos e o melhor atendimento aos clientes eram e ainda são fundamentais para um bom desempenho dentro dos mercados globais atuais. Para a Indústria Petrolífera em especial, uma boa execução destas tarefas pode proporcionar um ganho considerável.
O transporte de produtos para os clientes da Indústria Petrolífera pode ser realizado de diversas maneiras. As opções para esta operação são o transporte rodoviário, o ferroviário, o marítimo, e por fim o transporte através de dutos. O transporte por dutos compõe um mecanismo muito eficiente para a transferência de grandes quantidades de fluidos. Os dutos começaram a ser largamente utilizados por companhias petrolíferas para o transporte de petróleo a partir de terminais, nos quais o petróleo chega por meio de navios-tanque suprindo as refinarias, onde é processado, dando origem a uma série de produtos. O transporte de produtos derivados de petróleo através de dutos difere dos demais sistemas por fornecer um modo contínuo de distribuição, enquanto todos os outros não oferecem este modo de operação (Sasikumar et al., )(1).
O caso aqui considerado é o de uma companhia petrolífera que opera com uma refinaria e depósitos em locais geograficamente distintos. Uma variedade de produtos é gerada nesta planta e deve atender às demandas em diversos centros consumidores através destes depósitos que, por sua vez, são abastecidos pela refinaria. O elemento de distribuição surge tanto da transferência de produtos e/ou intermediários da refinaria quanto da transferência de produtos para armazéns regionais que devem satisfazer as demandas.
A abordagem proposta envolve o desenvolvimento de um plano central de distribuição da refinaria para as distribuidoras (bases) regionais através de um duto. Além deste objetivo, os fatores que tornam a realização deste trabalho relevante podem ser descritos a seguir:
•	alto potencial do País para a instalação de novas linhas dutoviárias;
•	os dutos são de vital importância para a empresa responsável e para o Brasil;
•	produtos como gasolina, óleo diesel e GLP são consumidos em grandes quantidades no País, e;
• abertura do mercado petrolífero, através da criação da Emenda Constitucional N° 9, e pela Lei N° 9478, de 06.08.1997 (Lei do Petróleo);
Aborda-se, aqui, uma fração de um sistema logístico ligado a uma refinaria. Pretende-se, então, investigar formulações de scheduling agregadas e consistentes que levem em conta todas as restrições e atividades relevantes, incluindo aquelas associadas ao armazenamento e transporte de alguns dos produtos acabados de uma refinaria. Como solução destes problemas devem ser conhecidas as quantidades a serem enviadas para os vários depósitos durante o horizonte de tempo de operação. A seqüência exata de operações na refinaria e em cada depósito pode ser obtida a partir de um problema de scheduling gerado pelo problema de planejamento global.
Um exemplo bastante interessante, e ao mesmo tempo complexo, é o sistema composto pela Refinaria de Paulínia (REPLAN) da Petrobras, localizada em Paulínia. A ela é conectado um duto que se estende por várias cidades, dentre elas Ribeirão Preto (SP), Uberaba (MG), Uberlândia (MG), Goiânia (GO) e Brasília (DF). Este duto, que possui aproximadamente 955 quilômetros de extensão, é denominado pela companhia de OSBRA (Oleoduto São Paulo - Brasília). Tal sistema dutoviário é mostrado pela figura 1. Por ele são distribuídos diversos produtos gerados pela REPLAN, sendo transportados gasolina, óleo diesel, querosone de aviação e gás liqüefeito de petróleo (GLP). Este último é transportado em estado líquido, através da pressurização do duto.
Uberlândia
Uberaba
(M-do Consumido^ (Mercado Consumidor)
A...A ... A A	A...A ...A A
1
P-il I p
p-il I p
Mercado Consumidorjifi
Rib. Preto C7
p-ill p
] r
&lt;
REPLAN
V
Fig. 1 - Fluxograma operacional do sistema de distribuição.
Fig- 1 — Distribution system operational flowchart.
2.	DESCRIÇÃO DO PROBLEMA
Seja uma refinaria de petróleo disposta a distribuir P produtos derivados através de um único duto de transporte para D bases distintas, as quais estão ligadas a mercados consumidores. Esta distribuição deve atender aos limites de estoques, na refinaria e nas bases de distribuição de produtos, às limitações de vazões, como por exemplo a vazão de alimentação do duto pela refinaria, ao tempo de percurso de uma dada base referente à origem e aos requisitos dos produtos pelos clientes em questão.
No sistema pertencente à Petrobras, três derivados de petróleo são armazenados e transferidos da refinaria REPLAN para as bases conectadas ao duto OSBRA. Estes são gasolina, óleo diesel e gás liqüefeito de petróleo (GLP). O GLP, por sua vez, é armazenado em esferas pressurizadas e transferido sob pressurização do duto, uma vez que em condições normais de pressão este derivado se encontra em estado gasoso. A empresa ainda estuda a inclusão do produto denominado querosene de aviação (QAv) neste sistema de transporte. Até o presente momento este derivado é transferido para algumas das bases de distribuição através de outros meios de transporte.
Para os casos estudados, será fixada uma taxa de produção conhecida dos respectivos produtos advinda da refinaria. Na situação real, a refinaria recebe de forma descontínua e programada quantidades dos referentes produtos ao longo de uma campanha de envio de derivados para as bases de distribuição, o que é adaptável ao presente caso.
Para melhor entendimento do funcionamento do sistema em questão, na figura 2 ilustra-se o fluxograma de operações de um sistema dutoviário com D bases conectadas ao duto.
Refinaria
Segmento 1
r----------V
Segmento d
r-------------U
Segmento D

Fig- 2 - Sistema dutoviário de distribuição.
Fig. 2 — Pipeline system for distribution.
O sistema real na refinaria REPLAN é composto por vários tanques de cada produto. Os tanques aqui listados são somente dedicados ao oleoduto OSBRA. Segundo Más (2), alguns dos tanques da Petrobras funcionam pelo sistema de teto flutuante. Desta forma, o nível de um produto dentro do tanque flutua dentro do mesmo e, como conseqüência disto, é imposto um volume mínimo para que o dispositivo de flutuação não toque a superfície inferior do tanque para evitar danos à base do mesmo. Este volume mínimo é sempre adotado pela empresa como 10 a 15% da capacidade de cada tanque, o que representa uma altura de aproximadamente dois metros de um derivado em um tanque. Exceção é feita ao GLP, que é armazenado em esferas e, portanto, possui uma capacidade mínima inferior.
As vazões de alimentação do duto podem variar de valores de 650 m3/h até 800 m3/h. Vale salientar que tanto na refinaria quanto nas bases de distribuição de derivados existe mais de um tanque por produto. Uma característica
operacional do sistema, que facilita o uso das capacidades agregadas em todas as localidades, é o fato de que é permitido a somente um tanque de qualquer produto a conexão para a alimentação ao duto. Caso fosse permitido a mais tanques do mesmo produto a alimentação ao duto, esta abordagem não seria adequada. As vazões teriam de assumir valores discretos de acordo com o número de tanques que em uma dada situação estivessem conectados ao duto.
O correto gerenciamento das bases de distribuição requer essencialmente uma decisão. Esta refere-se ao envio de produtos para os respectivos mercados consumidores. As restrições são compostas pelos limites máximo e mínimo de volume de estocagem para os produtos, pelo tempo de percurso de uma determinada quantidade de derivado, pelas temporizações de descarregamentos efetuados. Uma situação em que os depósitos não possuam estoques de produtos pode afetar os consumidores locais. Uma situação oposta, além de paralisar o escoamento no duto, pode também interromper a produção da refinaria.
O duto OSBRA, como descrito anteriormente, tem como único ponto de alimentação de derivados a refinaria REPLAN, e todas as outras bases já citadas anteriormente como pontos de retirada de produtos.
As vazões do duto podem variar de valores da ordem de 800 m3/h até 1200 m3/h, exceto para o último trecho. É interessante ressaltar que para todos os segmentos, exceto o primeiro, os valores de sua vazão podem ser reduzidos caso a base de distribuição do trecho anterior estiver retirando derivados ao mesmo tempo. Como conseqüência disto, o tempo de percurso de uma determinada quantidade de um produto a uma base qualquer conectada ao duto será aumentado.
Devido ao seqüenciamento de descarregamentos de derivados de diferentes espécies provenientes da refinaria para o duto, é inevitável que ocorram contaminações e perdas na região entre um produto e outro, denominada de interface por Pinto et al. (3), devido ao contato entre os derivados dentro do duto. Este aspecto operacional implica em um custo adicional na operação. Sasikumar et al. (1) ainda retratam o fato de existirem seqüências proibidas de descarregamentos de diferentes produtos. Para o presente caso, uma quantidade de GLP só pode ser transportada entre duas outras de gasolina. Desta maneira, as seqüências para o sistema são descritas pela tabela I, onde aquelas seqüências proibidas são denotadas por “X” e as permitidas por “V”. Apesar de a interface Óleo Diesel-Querosene de Aviação ser permitida, deve-se evitar o contato destes produtos, devido ao alto custo de separação desta interface.
TABELA I
SEQÜENCIAMENTO DE PRODUTOS DENTRO DO DUTO
TABLE I
SEQUENCING OF PRODUCTS INSIDE THE PIPELINE
Produto	Gasolina	Oleo Diesel	GLP	QAv
Gasolina	V	V	V	V
Óleo Diesel	V	V	X	V
GLP	V	X	V	X
QAv	V	V	X	V
Os custos envolvidos nesta operação são relativos à estocagem de produtos tanto na refinaria quanto nas bases de distribuição, além dos custos de transferência da refinaria para uma base.
Os custos de estocagem são diretamente proporcionais às quantidades estocadas dos produtos em todos os subsistemas, além do tempo pelo qual estas mesmas permanecem em cada uma das localidades. Assim, cada parcela deste custo é composta pelo produto entre a quantidade estocada de um dado derivado, a duração de um dado descarregamento efetuado pela refinaria para alimentação do duto, e um custo unitário que terá seu valor determinado para cada localidade do sistema.
O custo de bombeamento é diretamente proporcional à quantidade enviada pela refinaria de um determinado derivado e pela distância que esta deve percorrer ao longo do duto. As parcelas componentes deste custo são compostas pelo produto entre a quantidade transferida de um determinado produto a uma base de distribuição e pelo custo unitário de bombeamento. Este parâmetro será tanto maior quanto mais distante a base estiver da refinaria.
A parcela do custo mais difícil de ser contabilizada é sem dúvida a composta pelos custos de transição. Assim como no trabalho realizado por Pinto e Joly (4), será fixado um custo para cada interface presente no duto. Este custo representará perdas de produto dentro do duto, bem como o tratamento da interface formada por diferentes produtos, que é realizado nas bases de distribuição.
3.	DESCRIÇÃO DO MODELO MATEMÁTICO
O modelo aqui proposto tem o objetivo de retratar o comportamento adequado que uma refinaria, um duto e uma ou mais bases de distribuição devem possuir durante a operação de transporte dos referidos produtos. Para o presente caso, o modelo matemático deve representar uma operação intermitente durante o envio dos produtos.
Para a consideração inicial do sistema faz-se necessária a descrição de alguns aspectos importantes relacionados a esta operação.
Para este caso, a refinaria é a responsável pela alimentação do duto, e as bases são designadas para a retirada de derivados do mesmo. Tanto a refinaria quanto as bases de distribuição devem enviar ou receber, respectivamente, no máximo um derivado em um dado instante de tempo. Além disto, os tanques serão tratados como capacidades agregadas. Isto pode ser considerado, uma vez que na operação real o alinhamento ao duto é permitido somente a um tanque. Desta forma, a vazão de alimentação do duto não é alterada.
Para a correta modelagem dos trechos do duto, cada um deles será dividido em lotes de igual volume. Na figura 3 ilustra-se melhor esta idéia.
Transição entre dois produtos distintos
VODP.d,k
Lote 1 Lote 2
H---------*+&lt;--------H
Lote L-1 Lote L
VOTp, d+1, k
H-------------H
&gt;
Fig. 3 - Ilustração de lotes de produtos em um determinado segmento d do duto.
Fig. 3 — Illustration ofproduct batches on a determined d segment of the pipeline.
Um segmento genérico de um duto pode ser definido como o espaço dutoviário compreendido entre a base de distribuição d-1 e a base d. O primeiro segmento do mesmo é definido como o duto entre o seu ponto de alimentação, que para este caso é a refinaria, e a primeira base de distribuição.
Considere L lotes existentes em um determinado trecho genérico d de um duto. Cada lote contém apenas um produto em um dado instante. A entrada de um volume VOTp,d,k do produto p no segmento d no instante k implica em um deslocamento do produto que está contido dentro do primeiro lote para o seguinte. O mesmo ocorre com os demais lotes do mesmo segmento. Conseqüentemente, uma quantidade igual de produto deve ser destinada à base de distribuição (VODp,dk) ou ao segmento d+1 (VOTp,d+1,k).
As decisões a serem tomadas são as seguintes:
•	se a refinaria deve ou não efetuar um descarregamento de um determinado produto p em uma quantidade igual aos lotes pertencentes ao primeiro trecho do duto;
•	no caso de ocorrer um descarregamento, a composição do lote genérico l no intervalo de tempo deve ser igual à composição do lote l+1 no intervalo seguinte. Ainda no caso de haver movimentação, deve-se determinar o destino do lote L (último lote pertencente ao trecho). Este compartimento deve ser enviado à respectiva base de distribuição conectada ou ao segmento subseqüente no mesmo intervalo de tempo da movimentação de fluidos. No caso de envio do conteúdo do último lote para o depósito, todos os trechos seguintes ficarão sem movimentação;
•	no caso de paralisação de um determinado segmento, o produto que está contido em um dado lote em um intervalo de tempo permanece no mesmo lote no intervalo seguinte. Como conseqüência, todos os trechos posteriores a este também ficam paralisados.
O modelo aqui descrito utiliza a abordagem de intervalos de tempo de duração uniforme. Desta forma, a operação pode ser ilustrada em relação ao tempo de acordo com a figura 4. Na representação discreta a duração dos intervalos de tempo, representados por 8, é dada pelo máximo divisor comum dos tempos de processamento de uma operação do problema (Shah et al,)(\
Tempo
-------------------------------►
8 8 8 8 8
◄--------------------► ''' ◄---------------------------------------------------------------------►
I I T...........................T..........I..........T..........1 I I I
k=0	k=1	k=2	...	k=K-2	k=K-1	k=K
Fig. 4 - Representação por discretização uniforme dos intervalos de tempo.
Fig. 4 — Representation by uniform discretization of time intervals.
Para o modelo, as principais hipóteses consideradas para o sistema operacional em questão são:
H1 - Os fluidos envolvidos nesta operação possuem densidades constantes.
H2 - O perfil de produção da refinaria ao longo do horizonte de tempo operacional é fornecido pela mesma.
H3 - Para o sistema, de modo geral, tanto na refinaria quanto nas bases, os tanques são tratados como capacidades agregadas com relação a um determinado produto.
H4 - Tanto nas bases como na refinaria, somente um tanque pode estar conectado ao duto em um dado instante de tempo.
H5 - Inicialmente, todos os segmentos do duto estão totalmente preenchidos, assim como durante e ao término da operação.
H6 - Toda e qualquer interface de produtos, presente no duto, pode ser recebida e posteriormente tratada em qualquer base conectada ao mesmo.
H7 - Os valores para os custos da operação e as demandas de produtos em cada mercado consumidor de uma respectiva base são fornecidos para o horizonte de tempo. As demandas estabelecidas devem ser exatamente atendidas pelas bases de distribuição.
As restrições da refinaria são baseadas em balanços volumétricos dos tanques para cada produto que é dedicado ao duto. Os termos destes balanços são compostos pelas variáveis VRp,k, que indicam o volume do derivado p na refinaria no intervalo de tempo k. A vazão de produção da refinaria do derivado p no intervalo de tempo k é representada pelo termo RPp,k. Na figura 5(a) mostra-se o tanque representativo da refinaria e suas variáveis. O volume enviado ao duto é representado pela variável VORp,k, que segue o parâmetro volumétrico Ud e a variável binária XRp,k.
A formulação do duto é baseada em relações lógicas e na formulação denominada Convex-hull. O uso desta oferece uma representação alternativa para o estudo sistemático de modelos de programação mista-inteira linear. Raman e Grossmann (6), Raman e Grossmann (7), Raman e Grossmann (8) e Vecchietti e Grossmann (9) abordam tópicos interessantes a respeito deste assunto. Esta formulação se baseia em disjunções lineares. O conteúdo dos lotes de cada segmento é dado pela variável XVp,dl,k, que indica se o lote l do segmento d armazena o produto p no intervalo de tempo k. Outra variável lógica importante a ser mencionada é XSd,k. Ela indica se o trecho d está sob operação no intervalo de tempo k. Finalmente, os possíveis destinos do produto contido no último lote do segmento d podem ser a respectiva base (XDp,dk), ou o segmento seguinte (XTp,d+1,k). Na figura 6 mostra-se um exemplo de diferentes condições de operação de um duto de segmento único.
O seqüenciamento de diferentes produtos dentro do duto é contabilizado pela variável lógica TYdp,p-,k e pelo parâmetro CONTACTpp\ Esta variável assume valores iguais a 1 quando é identificada em cada segmento d do duto o contato entre dois produtos diferentes. Para o caso desta ser zero existem duas possibilidades. A primeira se dá quando o derivadop é igual aop'. A segunda possibilidade é caracterizada quando dois derivados distintos p e p' fazem parte do conjunto FSp,p •, que denota o conjunto de seqüências proibidas dentro de cada segmento do duto. A interface é identificada para todos os segmentos do duto e para cada intervalo de tempo da operação. Para que o seqüenciamento restrito de produtos seja respeitado, é necessário apenas a verificação de interface entre os dois primeiros lotes de cada segmento do duto. Pinto e Grossmann (10) apresentam tópicos interessantes sobre este assunto.
As restrições das bases de distribuição conectadas ao duto seguem a mesma lógica em relação às restrições da refinaria. A variável VDp,d,k indica o volume do derivado p na base d no intervalo k. O termo de entrada em cada base d é representado pela variável VODp,d,k, que por sua vez está relacionada com a variável XDp,d,k. O termo de saída dos tanques é dado pela variável VOMp,d,k, que deve satisfazer exatamente os requerimentos estabelecidos por cada mercado consumidor (DEMp,d). Na figura 5(b) mostra-se um tanque representativo de uma base de distribuição e suas variáveis operacionais.
RPp,k
VOMp,d,k
(a) - Tanque representativo da refinaria
(b) - Tanque representativo de uma base d
Fig. 5 - Representação dos tanques da refinaria e das bases.
Fig. 5 — Representation of refinery tanks and bases.
Condição inicial do duto
Intervalo k=0
H-------H*------H*------H
Lote 1, p=1 Lote 2, p=2 Lote 3, p=1
Condição do duto após descarregamento do produto 1
H----------&gt;+0----------------------H
Lote 1, p=1 Lote 2, p=1 Lote 3, p=2
Condição do duto após parada
H-------------------------------H
Lote 1, p=1 Lote 2, p=1 Lote 3, p=2
Intervalo k=1
Intervalo k=2
Fig. 6 - Duto de segmento único sob diferentes condições operacionais.
Fig. 6 — Single segment pipeline under different operational conditions.
O parâmetro XDMINp,d indica o número mínimo de vezes que uma dada base d deve retirar o derivado p do duto, ao longo da operação. Este parâmetro leva em conta a demanda estabelecida pelo mercado consumidor ligado à base d para o produto p, o seu estoque inicial e o volume mínimo de estocagem que deve ser respeitado.
A função objetivo do problema de otimização desta operação é composta por quatro termos. Dois destes são reservados para os custos de estoque na refinaria e nas bases de distribuição. Eles são compostos por um custo unitário de estoque (CERp,k para a refinaria e CEDp,d,k para as bases), pela variável que contabiliza o volume de cada derivado em cada localidade do sistema (VRp,k e VDp,d,k) e pelo tempo que esta quantidade é armazenada (á). O terceiro termo representa o custo de bombeamento dos produtos para as bases. Este é formado pela variável de retirada de cada produto por parte de uma base d (VODp,d,k) e por custo de bombeamento CPp,d,k, sendo este diretamente proporcional à distância da refinaria para a base d. O quarto e último termo contabiliza os custos de interface segundo a variável TYp,p-d,k e o parâmetro CONTACTp,p\
4.	IMPLEMENTAÇÃO DO MODELO AO SISTEMA OSBRA
O sistema da Petrobras é composto por cinco bases de distribuição. Porém, algumas delas não armazenam todos os derivados. Inicialmente, é proposto um conjunto envolvendo os índices p e d, denominado DEPdp. Este conjunto é dado pela tabela II. Note que o símbolo “V” denota se a base d estoca o derivado p, enquanto o “X” mostra quando isto não ocorre.
TABELA II
CONJUNTO DEPd,p
TABLE II
DEPd,p SET
Bases
Derivado	Rib. Preto (1)	Uberaba (2)	Uberlândia (3)	Goiânia (4)	DF (5)
Gasolina (1)	V	V	V	V	V
Óleo Diesel (2)	V	V	V	V	V
GLP (3)	V	X	V	V	V
QAv (4)	X	X	X	V	V
Este conjunto deve ser aplicado a qualquer produto e a qualquer base nas restrições pertinentes à saída de cada segmento e a cada base de distribuição.
Outro assunto que merece atenção especial é o tratamento matemático de segmentos com capacidades distintas. Na tabela III mostram-se as capacidades de cada segmento do duto, bem como as capacidades que foram adotadas nos exemplos mostrados a posteriori. O sistema apresenta diferentes possibilidades para o seu tratamento matemático. Uma possibilidade é discretizar todos os segmentos em lotes de mesma capacidade volumétrica. Esta possibilidade, além de inviabilizar a implementação computacional do modelo, devido ao enorme crescimento do número de variáveis, faz com que a operação não seja flexível, ou seja, somente uma das cinco bases possam retirar produtos do duto quando a refinaria alimenta o mesmo. Outra alternativa é a discretização do sistema em lotes de capacidades volumétricas distintas. Esta opção, além de viabilizar a implementação computacional do modelo proposto, faz com que a operação de distribuição de produtos pelo
duto OSBRA seja flexível. Desta forma, mais duas bases podem retirar derivados do duto, quando a refinaria efetua a sua alimentação. Na figura 7 mostra-se um sistema baseado nesta idéia.
O sistema descrito pela figura 7 apresenta as seguintes possibilidades de operação:
•	o segmento d' não é alimentado pelo seu antecessor. Neste caso, não ocorre o deslocamento de produtos dentro deste segmento, ou seja, os produtos permanecem nos lotes em que estavam inicialmente alocados. Conseqüentemente, o segmento d’+1 também permanece inativo;
•	o segmento d’ é alimentado pelo seu antecessor. Para esta situação, o produto inicialmente alocado ao lote l é deslocado para o lote l+1. Quanto ao produto contido no último lote deste segmento, surgem duas possibilidades:
•	o derivado pode ser enviado integralmente para a respectiva base. Neste caso, o segmento d’+1 fica paralisado. Esta possibilidade faz com que a base d’ retire uma quantidade Ud, do duto, que, por sua vez, é de mesmo valor que o descarregamento efetuado pela refinaria;
•	o derivado pode ser enviado parcialmente para a respectiva base e para o segmento seguinte. Neste caso, o segmento d’+1 é alimentado por d’, e, como conseqüência, ocorre o deslocamento dos produtos nesta fração do duto. Note que, neste caso, a base d’ retira uma quantidade Ud’-Ud’+1. A soma das retiradas de derivados do duto por parte das bases subseqüentes a esta deve ser Ud+1.
Na figura 7 mostra-se que o segmento d’+1 jamais pode ter os lotes maiores do que o seu antecessor. Esta nova configuração operacional possibilita que mais de uma base retire produtos simultaneamente do duto, se a refinaria estiver alimentando o mesmo. A soma de todas as retiradas das bases deve ser igual ao descarregamento efetuado pela refinaria, para que a manutenção dos derivados contidos dentro do duto seja respeitada.
Segmento d’
Segmento d’+1
◄---------
VOTp,d',k
VOD
]
Lote Ld’
Ud'
I
Ud' &gt; Ud+1
Fig- 7 - Sistema dutoviário de segmentos compostos por lotes de diferentes capacidades.
Fig. 7—Pipeline system of segments composed of batches with different capacities.
Para este sistema, a variável VODp,d’,k é desagregada em duas variáveis de decisão, XWp,d-,k e XUp,d’,k- A variável XWpddi indica se o produto contido no lote L, pertencente ao segmento d’, é enviado para a respectiva base e para o segmento subseqüente. A variável XUpdd, indica se o derivado contido em L é enviado integralmente para a respectiva base. na figura 8 mostra-se o funcionamento operacional do segmento d' segundo estas variáveis e as descritas anteriormente.
XDp,d,k
----------M----------►
I
segmento d’| segmento d+1
i
i
I XTP,d,k
1 	► 1 —		► |
	M			►
l
segmento dj segmento d’+1
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
i
XUp,d,k
, _jl ,	,
----------M-----------►
i
segmento d’| segmento d’+1
i
i
XWp,d,k
---------M-----------►
i
Segmento d’ | segmento d’+1
i
i
Fig- 8 - Funcionamento operacional de segmentos intermediários segundo as formulações propostas.
Fig. 8 — Operational running of intermediary segments according to proposed formulae.
5.	EXEMPLIFICAÇÃO DO SISTEMA
Para mostrar a aplicação do modelo ao sistema OSBRA, são propostos dois exemplos. O primeiro, denominado E1, é o caso base, onde a aplicação da estratégia de discretização de lotes de capacidades volumétricas distintas é aplicada. Em seguida, o exemplo E2 mostra uma aplicação onde os custos de bombeamento apresentam uma variação sazonal.
5.1.	Exemplo E1
Para o exemplo E1, assim como para o exemplo E2, as capacidades dos segmentos adotadas no exemplo e a sua respectiva diferença em relação à capacidade real de cada um são mostradas na tabela III. Note que a diferença entre ambas é pequena para todos os segmentos. O segmento Goiânia-Brasília possui uma capacidade de armazenamento reduzida em relação aos demais. Na tabela III também mostra-se o número de lotes por segmento, bem como as suas capacidades que são adotadas para os exemplos E1 e E2.
Na tabela IV mostram-se as capacidades máxima e mínima da refinaria e suas condições iniciais para cada derivado para os exemplos E1 e E2. A capacidade mínima estabelecida para estes exemplos está acima do limite de 10% da capacidade de estocagem dos tanques. Isto pode ser justificado pois uma situação de estoques mínimos em todas as localidades não é desejável, devido à brusca variação da demanda dos derivados Na tabela V mostram-se os mesmos parâmetros paras as bases conectadas ao duto para ambos os exemplos.
TABELA III CAPACIDADES VOLUMÉTRICAS DOS SEGMENTOS DO DUTO E DOS LOTES DE CADA SEGMENTO
TABLE III VOLUMETRIC CAPACITIES OF PIPELINE SEGMENTS AND BATCHES OF EACH SEGMENT
Segmento	Capacidade Real [m3]	Capacidade Adotada [m3]	Diferença Relativa (%)	Ud [x 10-2 m3]	Ld Lotes
REPLAN-Rib. Preto	39759	40000	0,61	50	8
Rib. Preto-Uberaba	25879	25000	3,52	50	5
Uberaba-Uberlândia	25321	25000	1,27	50	5
Uberlândia-Goiânia	59676	60000	0,54	50	12
Goiânia-Brasília	13739	13500	1,74	27	5
TABELA IV
LIMITES DE CAPACIDADES E CONDIÇÕES INICIAIS DE ESTOCAGEM NA REFINARIA
TABLE IV
LIMIT OF CAPACITIES AND INITIAL STORAGE CONDITIONS
AT REFINERY
Derivado	Capacidades Máx./Mín.	Condição Inicial
	VRMAXp,k / VRMINPk [x 10-2 m3]	VRZEROpd [x 10-2 m3]
Gasolina (1)	2,250/400	1,000
Diesel (2)	2,500/400	1,200
GLP (3)	300/50	100
QAv (4)	560/150	315
		
TABELA V
LIMITES DE CAPACIDADES E CONDIÇÕES INICIAIS DE ESTOCAGEM NAS BASES
TABLE V
LIMIT OF CAPACITIES AND INITIAL STORAGE CONDITIONS AT BASES
Base	Derivado	Capacidades Máx./Mín. [x 10-2 m3] VDMAXp,d,k/VDMINp,d,k	Condição Inicial [x 10-2 m3] VDZEROp d
	Gasolina (1)	190/50	100
	Diesel (2)	270/90	180
	GLP (3)	120/20	90
	QAv (4)	0/0	0
	Gasolina (1)	90/30	40
	Diesel (2)	190/50	150
Uberaba			
	GLP (3)	0/0	0
	QAv (4)	0/0	0
	Gasolina (1)	90/20	50
	Diesel (2)	270/90	180
Uberlândia			
	GLP (3)	120/20	60
	QAv (4)	0/0	0
	Gasolina (1)	190/50	110
	Diesel (2)	720/150	350
Goiânia			
	GLP (3)	180/20	60
	QAv (4)	140/30	90
	Gasolina (1)	180/50	100
	Diesel (2)	720/150	330
Brasília			
	GLP (3)	92/20	60
	QAv (4)	136/25	110
Na figura 9 mostra-se o perfil de produção da refinaria ao longo da operação. Note que do primeiro ao décimo intervalo de tempo os tanques recebem apenas gasolina e óleo diesel, enquanto que do décimo primeiro ao décimo quinto GLP e QAv são enviados para os tanques responsáveis pela alimentação do duto.
Na tabela VI mostram-se os parâmetros para o exemplo E1. São mostrados os custos de estocagem para todas as localidades, os custos de bombeamento para todas as bases de distribuição, os custos de interface entre os produtos e as demandas estabelecidas pelos respectivos mercados consumidores. Na tabela VII mostra-se a condição inicial de estocagem de cada segmento do duto para os exemplos E1 e E2.
6
GLP e QAv
5
6 1
Gasolina e Diesel
0	10	20	30	40	50	60	70
Tempo [h]
10 20
30	40	50	60	70
4
3
2
1
0
0
Tempo [h]
Fig- 9 - Perfil de produção da refinaria ao longo da operação.
Fig. 9 — Refinery production profile during operation.
TABELA VI
PARÂMETROS PARA O EXEMPLO E1
TABLE VI
PARAMETERS FOR EXAMPLE E1
Derivado		Custos de Estocagem [$/m3.h]				Custos de bombeamento [$/m3]	
		refinaria CERp	bases CED p,d			CPp,1/CPp,2	CPp,3/ CPp,4/ CPp,5
Gasolina (1)		0,020		0,100		3,5/ 4,5	5,5/ 6,0/ 6,9
Diesel (2)		0,023		0,155		3,6/ 4,6	5,6/ 6,2/ 7,3
GLP (3)		0,070		0,200		4,8/ 5,7	6,8/ 7,9/ 8,9
QAv (4)		0,025		0,170		3,7/ 4,7	5,7/ 6,1/ 7,0
		CONTACTpp’ [x 10-2 $]				DEMp,d	[x 10-2m3]
	P'=1	p'=2	p'=3	p'=4		d=1	d=2	d=3	d=4	d=5
P=1	0	30	37	35		0	80 80	130	70
P=2	30	0	X	X		100	0 10	200	270
P=3	37	X	0	X		20	0 20	50	20
p=4	35	X	X	0		0	0 0	20	50
TABELA VII
CONDIÇÕES INICIAIS DE ESTOCAGEM DE CADA SEGMENTO DO DUTO OSBRA
TABLE VII INITIAL STORAGE CONDITIONS OF EACH OSBRA PIPELINE SEGMENT
Derivado	XVZEROp,i,i [x 102 m3]	XVZEROp.2.i [x 102 m3]	XVZEROpj.i [x 102 m3]
Gasolina (1)	0/0	1 (l=1,2,3,4,5)	1 (l=1,2,3,4,5)
Diesel (2)	1 (l=1,2,3,4,5,6,7,8)	0	0
GLP (3)	0	0	0
QAv (4)	0	0	0
Derivado	XVZEROp,4,i [x 10-2 m3]		XVZEROp,5,i [x 10-2 m3]
Gasolina (1)	1 (l=1,2,3,4,9,10,11,12)		0
Diesel (2)	0		1 (l=1,2,3,4,5)
GLP (3)	1 (l=5,6,7,8)		0
QAv (4)	0		0
Os dois exemplos aqui mostrados discretizam uma operação de aproximadamente três dias (75 horas) em 15 intervalos de 5 horas cada. Na tabela VIII mostra-se o desempenho computacional para o exemplo E1. A solução obtida para este MILP (mixed-integer linear problem ou problema de programação mista-inteira linear) está no máximo 5,8% distante da solução ótima em 10000 segundos de tempo computacional (aproximadamente três horas). Uma característica importante a ser ressaltada é que as variáveis XUp,dk e XWpdí podem ser colocadas como variáveis contínuas, pois estas sempre assumem valores iguais a 1 ou 0. Isto é possível, pois a variável XSdk para d=4 e d=5 sempre assumem valores iguais a 1 ou 0, uma vez que estas estão, respectivamente, relacionadas às variáveis binárias XTp,4,k e XDp,5,k. (ver restrições (2.34) e (2.35) no Apêndice 2). Desta forma, a partir de uma destas restrições, XUp,4,k e XWp,4,k podem ser definidas como variáveis contínuas.
Na figura 10 mostram-se os níveis de estoque para os derivados em todas as localidades do sistema ao longo da operação de distribuição. De acordo com esta figura, nota-se que o duto opera durante os seguintes intervalos: k = {3, 4, 5, 7, 8, 9, 12, 14, 15}. Na figura 11 mostra-se o perfil de produtos em todos os segmentos do duto ao longo da operação. Note que o seqüenciamento de derivados é respeitado pelo modelo proposto.
Para k=5 há um aumento no nível de estoque de gasolina na base localizada em Uberaba e, como conseqüência, os três primeiros segmentos do duto estão sob operação neste intervalo de tempo. A partir de k=7 todos os segmentos do duto estão sob operação quando a refinaria alimenta o mesmo, sendo que a base de Goiânia e a de Brasília retiram derivados do duto simultaneamente. Desta forma, observa-se que para este exemplo a variável XUp,d,k não precisou ser ativada em nenhum momento da operação.
TABELA VIII DESEMPENHO COMPUTACIONAL PARA O EXEMPLO E1
TABLE VIII
COMPUTATIONAL PERFORMANCE FOR EXAMPLE E1
Exemplo E1	
Solução Relaxada [$ x 10-2]	22407,752
Solução [$ x 10-2]	23995,925
Tempo Computacional [s]	10000
Nós Visitados	2286
Variáveis Contínuas	6316
Variáveis Binárias	420
Equações	9393
Tempo [h]	.... Uberaba
— Uberlândia Goiânia Brasília
--------REF
^200 -o 150 -
x
100
GLP
CO
E
OS
X
250
200
QAv
o
3 O’ O
M—&gt;&amp;lt;/)
LU õ
&gt;
0
50 -
o
3
O’
O
M—&gt;&amp;lt;/)
JJ õ
&gt;
150
100
50
Tempo [h]
800
600
400
200
0
Q	rf
Tempo [h]
Fig. 10 - Níveis de estoque dos derivados em todas as localidades para o exemplo E1.
Fig. 10 — Stock levels of derivatives at all locations for the example E1.
k=15
0 Segmento Uberaba-Uberlândia [x 10-2m3] 250
Fig. 11 - Perfil de transporte dos derivados no duto (exemplo E1).
Fig. 11 - Transporting profile of derivatives in the pipeline (example E1).
0 Segmento Goiânia-DF [x 10-2m3]	135
□	GASOLINA
□	DIESEL
GLP
QAv
Bol. téc. Petrobras, Rio de Janeiro, 46 (1/2): 134 - 166, jan./jun., 2003
151
Os resultados deste exemplo mostram que os níveis dos estoques nas bases de distribuição devem permanecer os mais baixos possíveis. Para que isto ocorra, produtos com altas demandas, como por exemplo gasolina e diesel, devem atender os mercados consumidores desde o início do horizonte de tempo. Estes tanques devem receber quantidades complementares do duto ao longo da operação, para que a demanda seja atendida, perto do fim do horizonte de tempo.
Existe uma situação especial em que não há alteração de estoque de produtos de um segmento quando este estiver em regime de operação. Esta ocorre quando o trecho armazena o mesmo derivado em todos os seus lotes, e é alimentado pelo segmento anterior com o mesmo produto. Assim, a diferença no seu perfil de estoque não é notada, porém o segmento está sob operação.
A solução ótima para este exemplo não foi alcançada devido a diversos fatores. Primeiramente, devido à grande magnitude do modelo que possui mais de cinco mil variáveis (ver tabela VIII). A estrutura do modelo também contribui para esta dificuldade em garantir o ponto ótimo global do problema. Como todos os segmentos do duto devem permanecer totalmente preenchidos ao longo da operação, e este possui somente um ponto de alimentação que é a refinaria, no máximo 21 dos 5 pontos de retirada podem ser ativados a fim de que a conservação dos volumes dentro do duto seja respeitada, o que torna o sistema pouco flexível em relação às decisões que devem ser tomadas.
Apesar deste exemplo retratar a distribuição de derivados de petróleo de um sistema de características muito semelhantes ao sistema OSBRA, ele não retrata a variação sazonal do custo unitário de bombeamento. Esta variação faz com que, em muitos casos práticos, o encontro de uma solução viável seja um desafio. Desta forma, o exemplo E2 retrata esta situação para o mesmo sistema mostrado neste exemplo.
5.2.	Exemplo E2
O custo de bombeamento sazonal é um dos fatores mais importantes de operações dutoviárias. A Petrobras tem encontrado muitas dificuldades para elaborar uma programação eficiente nestes termos, muitas vezes devido às grandes quantidades requeridas pelos mercados consumidores ligados aos depósitos. O problema sazonal deste parâmetro resume-se basicamente no grande aumento do custo unitário nos períodos de pico de utilização de energia elétrica no país. Estes compreendem os intervalos das dezessete às vinte horas em todos os dias de operação. Desta maneira, pode-se definir como operação ótima de distribuição aquela que não utiliza o duto dentro destes horários, ou então que o utiliza o mínimo possível e, ao mesmo tempo, satisfaça todas as demandas dos derivados nas bases, mantendo baixos níveis de inventário.
O exemplo E2 utiliza os mesmos parâmetros, com exceção dos custos unitários de bombeamento para o quarto, quinto, nono e décimo intervalos, que são acrescidos em cinco vezes em relação aos demais, como mostra-se na tabela IX.
A solução apresentada para este exemplo é de boa qualidade, porém não é ótima. Na tabela X mostra-se o desempenho computacional do exemplo E2.
1 Quando se trata de pontos dois pontos de retirada de derivados do duto, estes devem ser obrigatoriamente as duas últimas bases conectadas ao duto.
TABELA IX VALORES PARA OS CUSTOS DE BOMBEAMENTO PARA O EXEMPLO E2
TABLE IX
VALUES FOR PUMPING COSTS FOR EXAMPLE E2
Intervalos de tempo (k)		Gasolina (CP1&gt;d,k		[x $/m3])	
	D=1	d=2	d=3	d=4	d=5
1-3, 6-8, 11-15	3,5	4,5	5,5	6,0	6,9
4-5, 9-10	17,5	22,5	27,5	30,0	34,5
Intervalos de tempo (k)		Óleo Diesel (CP2,d,k [x $/m3])			
	D=1	d=2	d=3	d=4	d=5
1-3, 6-8, 11-15	3,6	4,6	5,6	6,2	7,3
4-5, 9-10	18	23,0	28,0	31,0	36,5
Intervalos de tempo (k)		GLP	(CP3,d,k [x $/m3])		
	D=1	d=2	d=3	d=4	d=5
1-3, 6-8, 11-15	4,8	5,7	6,8	7,9	8,9
4-5, 9-10	24,0	28,5	34,0	39,5	44,5
Intervalos de tempo (k)		QAv (CP4,d,k [x $/m3])			
	D=1	d=2	d=3	d=4	d=5
1-3, 6-8, 11-15	3,7	4,7	5,7	6,1	7,0
4-5, 9-10	18,5	23,5	28,5	30,5	35,0
Gasolina
1500
1000
500
0
- Rib. Preto
Tempo [h]	... - Uberaba
------- Uberlândia
Diesel
1500
1000
500
0
£	$	£	£	£	#	4?
Tempo [h]
—	Goiânia
—	Brasília
---------REF
250
200
150
3
100
LU
50
QAv

Tempo [h]
800
600
400
200
0
Fig. 12 - Níveis de estoque dos derivados em todas as localidades para o exemplo E2.
Fig. 12 - Stock levels of derivatives at all locations for the example E2.
TABELA X DESEMPENHO COMPUTACIONAL PARA O EXEMPLO E2
TABLE X COMPUTATIONAL PERFORMANCE FOR EXAMPLE E2
Exemplo E2	
Solução Relaxada [$ x 10-2]	22431,130
Solução [$ x 10-2]	24050,475
Tempo Computacional [s]	10000
Nós Visitados	2287
Variáveis Contínuas	6316
Variáveis Binárias	420
Equações	9393
k=15
k=14
k=13
k=12
k=10
k=9
k=8
k=7
k=6
k=5
k=3
k=2
k=0
I	I	I	I	I	I	I
I	I	I	I	I	I
I	I	I	I	  I	I
I	I	I	I	I	I
I	I	I	I	I	I
I	I	I ~------------------------------------------------ I	I	I
I	I	I	I	I	I
0	Segmento Uberlândia-Goiânia [x 10-2 m3]	600
0 Segmento Goiânia-DF [x 10-2m3] 135
□	GASOLINA
□	DIESEL
GLP
QAv
Fig. 13 - Perfil de transporte dos derivados no duto (exemplo E2).
Fig. 13 - Transport profile of derivatives in the pipeline (example E2).
Bol. téc. Petrobras, Rio de Janeiro, 46 (1/2): 134 - 166, jan./jun., 2003
155
Note que o valor da função objetivo deste exemplo apresenta um valor aproximadamente no máximo 5,1% distante da solução ótima. Neste exemplo, a refinaria alimenta o duto somente com óleo diesel e gasolina. O duto opera nos intervalos £={2,3,6,7,11,12,13,14,15}. Este caso possibilita o funcionamento operacional do duto em períodos diferentes daqueles que penalizam a transferência de produtos. Isto não é possível para o caso de demandas altas estabelecidas pelos mercados consumidores pois, quanto maior o valor destas, maior deve ser a quantidade que as respectivas bases de distribuição necessitam para o seu devido atendimento. Como conseqüência disto, maiores devem ser os volumes de derivados transportados pelo duto, de maneira que as soluções viáveis pertencentes ao problema sejam compostas pelo funcionamento operacional do duto em todos os intervalos de tempo da operação, inclusive nos horários de pico de utilização de energia elétrica.
Na figura 12 mostra-se o nível dos estoques em todas as localidades ao longo do horizonte de tempo. Assim, como no exemplo E1, os estoques nas bases tendem a sofrer uma diminuição no seu nível desde o início da operação, conforme as demandas são atendidas. Nesta figura mostra-se que o nível de alguns produtos permanece perto do nível mínimo estabelecido, mesmo que a demanda não tenha sido totalmente atendida. Para estes casos, quantidades complementares são enviadas para as respectivas bases perto do fim da operação. É o caso do GLP na base de Goiânia e do óleo diesel em Brasília.
Na figura 13 mostra-se o perfil de transporte para cada segmento do duto ao longo da operação. Analogamente ao exemplo E1, a variável XUp4k não precisou ser ativada, ou seja, a partir de k=11, quando a refinaria alimenta o duto, todos os segmentos do duto se encontram em regime de operação.
6.	CONCLUSÕES
O modelo aqui apresentado evita que modelos intratáveis computacionalmente sejam gerados para este caso, graças à abordagem de lotes de diferentes capacidades para segmentos de capacidades volumétricas muito distintas. Um modelo matemático com lotes de capacidades iguais implicaria em um acréscimo de 1400% no número de variáveis contínuas, 400% em relação às variáveis binárias e acresceria as equações em 1500%.
Note que para os exemplos do sistema OSBRA, as variáveis XVpdl,k e XSdk podem ser colocadas variáveis contínuas. Isto fez com que a árvore binária de busca da solução ótima não tomasse proporções enormes. Assim como estas, as variáveis XUpdk e XWpdk são colocadas no problema como variáveis contínuas. Isto foi possível pois as variáveis XSdk dos segmentos de Uberlândia-Goiânia e de Goiânia-Brasília estão relacionadas respectivamente às variáveis binárias XTpdk (variável binária de alimentação do segmento) e XDp,dk (variável binária de alimentação da base terminal). Assim, assegura-se que as variáveis XSdk destes segmentos assumam valores iguais a 1 ou 0, em qualquer circunstância operacional.
Os exemplos de aplicação mostraram a operação completa de um sistema de características semelhantes ao sistema OSBRA. No segundo exemplo, foi ilustrada uma situação onde ocorre a variação sazonal do custo unitário de bombeamento do sistema. O exemplo gerou uma solução que permite a paralisação do duto nos intervalos de tempo que penalizam a operação do sistema.
O modelo aqui proposto mostra os níveis de estoque na refinaria, em todos os segmentos do duto e nas bases de distribuição. A representação dos perfis de produtos ao longo dos segmentos do duto constitui o maior desafio deste trabalho, uma vez que o mesmo opera em modo intermitente.
Finalmente, pode-se concluir que a abordagem sistemática gerada através do modelo MILP fornece excelentes perspectivas para a operação de sistemas dutoviários de relevância prática.
REFERÊNCIAS BIBLIOGRÁFICAS
(1)	Sasikumar, M.; Prakash, P. R.; Patil, S. M.; Ramani, S. PIPES: A Heuristic Search Model for Pipeline Schedule Generation. Knowledge - Based Systems, v.10, p.169-175. 1997.
(2)	Más, R. Técnicas de Otimização para a Distribuição de Petróleo. São Paulo (SP) - 195p. Dissertação (Mestrado) - Escola Politécnica, Universidade de São Paulo. 2001.
(3)	Pinto, J. M., Joly; M., Moro; L.F.L. Planning and Scheduling Models for Refinery Operations. Computers &amp;amp; Chemical Engineering, v.24, p.2259-2276. 2000.
(4)	Pinto, J.M.; Joly, M. MILP Model for Scheduling of Continuous Multiproduct Plant Distribution. 15th International Conference on CAD/CAM Robotics &amp;amp; Factories of the Future, Campinas 1999.
(5)	Shah, N.; Pantelides, C.C.; Sargent, W.H. Optimal Periodic Scheduling of Multipurpose Batch Plants. Annals of Operations Research, v.42, p.193-228. 1993.
(6)	Raman, R.; Grossmann, I.E. Relation Between MILP Modelling and Logical Inference for Chemical Process Synthesis. Computers &amp;amp; Chemical Engineering, v.2, p.73-84. 1991.
(7)	Raman, R.; Grossmann, I.E. Symbolic Integration of Logic in Mixed-Integer Linear Programming Techniques for Process Synthesis. Computers &amp;amp; Chemical Engineering, v.9, p.909-927. 1993.
(8)	Raman, R.; Grossmann, I.E. Modelling and Computational Techniques for Logic Based Integer Programming. Computers &amp;amp; Chemical Engineering, v.7, p.563-578. 1994.
(9)	Vecchietti, A.R. &amp;amp; Grossmann, I.E. (2000). Modeling issues and implementation of language for disjunctive programming. Computers &amp;amp; Chemical Engineering, v.24, p.2143-2155.
(10)	Pinto, J. M.; Grossmann, I. E. Assignment and Sequencing Models for the Scheduling of Process Systems. Annals of Operations Research, v.81, p.4433-4466. 1998.
ANEXO 1
NOMENCLATURA DOS MODELOS
O modelo descrito utiliza a nomenclatura descrita neste anexo. Inicialmente, são mostrados os índices.
d k l p (oup')	2 Bases de distribuição de produtos conectadas ao duto Intervalos de tempo Lotes de um determinado trecho do duto Produtos envolvidos na operação de transporte
O modelo utiliza os conjuntos descritos a seguir.
D DEPd,p FSpp K Ld P TSPp	3 Bases de distribuição de produtos conectadas ao duto Conjunto das bases d que armazenam o derivado p Seqüências proibidas de produtos enviados ao duto Intervalos de tempo Lotes do segmento d Produtos envolvidos na operação de transporte Seqüências possíveis totais dos produtos
Os parâmetros envolvidos neste modelo são descritos a seguir.
ô CEDpd CERp	Duração dos intervalos de tempo Custo de estoque do derivado p na base d Custo de estoque do produto p na refinaria
CONTACTpp' Custo de interface entre o produtop e o produtop'
CPp,d,k DEMp,d RPp.k Ud UMp,d VDMAXp,d,k VDMINd, VDZERO. d VRMAXpk \RMIN- VRZEROp XVZEROpdi	Custo de bombeamento do produto p para a base d no intervalo k Demanda do produto p imposta pelo mercado consumidor conectado à base d Taxa de produção na refinaria do produto p no intervalo k Parâmetro volumétrico referente ao segmento d Parâmetro volumétrico para a variável VOMp, d k Capacidade volumétrica do tanque que contém o produto p na base d Estoque mínimo do tanque que contém p na base d Volume inicial do produto p na base d Capacidade volumétrica do tanque que contém p na refinaria Estoque mínimo do tanque que contém o derivado p na refinaria Volume inicial do produto p na refinaria Parâmetro 0-1 que denota o conteúdo inicial do lote l pertencente ao trecho d
As variáveis contínuas envolvidas são descritas a seguir4.
C TYp , p'd, k Vp, d, l, k VDp , d k VODpdk	Custo da operação envolvida. Variável a ser minimizada Variável que indica se o produto p sucede o produto p' no segmento d no intervalo de tempo k Volume do lote l pertencente ao trecho d, preenchido pelo produto p no intervalo de tempo k Volume do tanque que contém o produto p na base d no intervalo de tempo k Volume de p proveniente do duto para o tanque localizado na base d no intervalo de tempo k
2	O conceito do índice d pode ser também aplicado aos trechos de um determinado duto.
3	O conjunto D também pode ser aplicado a segmentos do duto.
4	Todas as variáveis contínuas listadas são reais e não negativas.
VOMPdk	Volume do produto p proveniente da base d para o seu respectivo mercado consumidor no intervalo de tempo k
VORp,k	Volume do produto p enviado do tanque localizado na refinaria para o duto no intervalo de tempo k
VOTpdk VRp,k XSd,k XVp, d, l, k	Volume do produto p enviado para o segmento d no intervalo de tempo k Volume do tanque que contém o produto p na refinaria no intervalo de tempo k Indica se houve transferência de produtos no segmento d no intervalo de tempo k Indica se o lote l pertencente ao trecho d está preenchido pelo produto p em k
As variáveis binárias são as seguintes:
XDp , d k	Indica se o tanque na base de distribuição d que contém p recebe algum lote do duto no intervalo de tempo k
XRpk XTp, d k XUp , d k XWpdk	Indica se a refinaria efetua o descarregamento do produto p para o duto no intervalo de tempo k Indica se o produto p foi transferido para um trecho d no intervalo de tempo k Indica se o derivado contido em L é enviado integralmente para a respectiva base d. Indica se o derivado contido em L é enviado parcialmente para a respectiva base d e o segmento posterior d+1.
As variáveis Booleanas são listadas a seguir:
Ydk Zd, k	Verdadeira se o segmento d está em operação no intervalo de tempo k. Verdadeira se o produto contido no último lote é dividido entre a respectiva base d e o segmento d+1.
ANEXO 2
DESCRIÇÃO DO MODELO DE OTIMIZAÇÃO
2.1. Restrições Referentes à Refinaria
Os balanços de massa e as capacidades volumétricas para os tanques representativos da refinaria são as seguintes:
VRp,k = VRZEROp+RPp, k xõ-VORp, k
yp, k=i
(2.1a)
VRp, k = VRp, k-1 + RPp, k xõ -VORp, k
yp, k=2,...,K
(2.1b)
VRMINp,k &amp;lt;VRp,k &amp;lt;VRMAXp,k
yp, k
(2.2)
As equações de balanço de massa, tanto na refinaria como também nas bases, podem ser representadas segundo os volumes nos tanques e as vazões volumétricas, como em (2.1a) e (2.1b). As capacidades mínima e máxima volumétricas dos tanques são dadas por (2.2).
A restrição (2.3) representa as limitações para os valores de volume de saída dos tanques representativos. Para este caso, o volume enviado pela refinaria deve ser igual ao volume dos lotes pertencentes ao primeiro segmento, dado pelo parâmetro volumétrico U1.
VORp, k = XRp, k xUi
yp, k
(2.3)
A restrição (2.4) impõe que no máximo um derivado p pode alimentar o duto no intervalo k.
£ XRp,k&amp;lt;1
p=i
yk
(2.4)
2.2. Restrições Referentes aos Segmentos do Duto
Para a modelagem do duto foi utilizada uma formulação do tipo Convex-hull (Raman e Grossmann (8)). As restrições do primeiro segmento do duto são baseadas nas disjunções dadas em (2.5).
Y i,k
-Y i,k
Vp,i,i,k=VORp,k	yp
Vp,i,i, k = VZEROp,i,i-i	yp,l=2,...,L
VODp,i,k+VOTp,2,k = VZEROp,i,L yp
Vp,i,i,k = VZEROp,i,i yp
Vp,i,l,k = VZEROp,i,l yp,l=2,...,L
VODp,i,k+VOTp,2,k=0	yp
k=i
(2.5a)
V
"	Yik				_	-Y i,k	
Vp,i,i,k = VORp,k	yp		\ /	Vp,i,i,k=Vp,i,l ,k -i	yp	
Vp,i,l,k = Vp,i,l-1,k-i	yp,l=2,.	..,L	V	Vp,i,l,k=Vp,i,l,k-i yp,l=2,.	.,L
VODpii, k + VOTp,2,k =	Vp,i,L,k-i	yp		VODp,i,k+VOTp,2,k=0	yp_
k=2,...,K
(2.5b)
A disjunção (2.5) funciona de acordo com o valor atribuído à variável Booleana P1&gt;k, que é verdadeira para o caso de transferência de fluidos no segmento e falsa em caso contrário.. Para o primeiro lote do primeiro
segmento pode-se dizer que se Y1,k for verdadeira, então Vp,1,1,k assume valores iguais a VORp,k, ou no caso de Y1,k ser falsa, Vp&gt;1&gt;1&gt;1 toma valores iguais a VZEROpX1. Para um lote l tal que (1&lt;l&lt;L) no primeiro intervalo, a variável Vp&gt;1&gt;l&gt;1 assume o valor VZEROp,1,l-1 quando Y1:k for verdadeira ou o valor VZEROp^ em caso desta ser falsa. Para os intervalos seguintes, Vp&gt;1&gt;ik toma valores de Vp&gt;1&gt;l-1&gt;k-1 quando Y1k for verdadeira, e quando esta for falsa Vp.\,i.k assume valores de Vp1l,k-1. Analogamente, as variáveis VODp11 ou VOTp&gt;2&gt;1 assumem o valor VZEROpXL se houver transferência de fluidos no primeiro intervalo, e para os demais VODp,d k ou VOTp,d+1,k tomam valores iguais a Vp1L,k-1. Se a movimentação de produtos não ocorrer, VODp,d k e VODp,d+1,k tomam o valor nulo.
As disjunções em (2.5) devem ser transformadas em restrições matemáticas para o referido sistema operacional. Desta maneira, deve-se substituir a variável Booleana Y1,k por uma variável de decisão. Esta é denotada por XS^k , que assume valores iguais a 1 no caso de transferência de produtos para um determinado segmento d em um intervalo k, e zero quando o conteúdo do mesmo trecho d permanecer parado. Desta forma, as restrições referentes ao primeiro segmento são enumeradas de (2.6) a (2.16).
£ XRp, k = XSd, k
P=1
XSd, k&amp;lt;1
Vp,d ,l ,k = XVp,d ,l ,k xüd
£ XVp,d, I,k=1
p=1
XVp,d ,l ,k &gt; XRp,k
XVp, d, i, k &gt; XVZEROp, d, i -1 - [1 - XSd, k ]
XVp, d, l, k &gt; XVp, d, l -1, k -1 — [1 — XSd, k ]
XVp, d, i, k &gt; XVZEROp, d, i - XSd, k
XVp, d, l, k &gt; XVp, d, l, k -1 - XSd, k
P
£ [ XDp, d, k + XTp, d + 1,k ] = XSd, k
p=1
XDp, d, k+XTp, d+1, k &gt; XVZEROp, d, l - [1 - XSd, k ]
XDp, d, k + XTp, d+1,k &gt; XVp, d, l, k -1- [1- XSd, k ]
VOTp,d, k = XTp, d ,k xüd
VOTp, d, k = 0
VODp,d ,k = XDp,d ,k xüd
V k, d=1	(2.6a)
V d, k	(2.6b)
V p, d, l, k	(2.7)
V d, l, k	(2.8)
V p, k, d=1, l=1	(2.9)
Vp,d,l=2,.,L,k=1	(2.10a)
Vp,d,l=2,.,L,k&gt;1	(2.10b)
V p, d, l, k=1	(2.11a)
V p, d, l, k=2,..,K	(2.11b)
V k, d&lt;D	(2.12)
V	p. DEPd,p, d&lt;D , l= L, k=1 (2.13a)
V	p.DEPdp d&lt;D,l= L, k&gt;1 (2.13b)
V p. DEPd,p ,d, k	(2.14)
V p, d=1, k	(2.15)
V p. DEPd,p ,d, k	(2.16)
A restrição (2.7) ilustra a composição de cada lote l pertencente ao segmento do duto. A restrição (2.8) impõe que qualquer lote l deve sempre estar preenchido por exatamente um produto em um dado instante de tempo.
As restrições (2.9) e (2.11) atuam em conjunto para a composição do primeiro lote, assim como (2.10) e (2.11) valem para os demais. A condição lógica para a composição do primeiro lote é dada quando XVP1,1,k assume valores iguais a XRp,k no caso de que algum descarregamento tenha sido efetuado segundo (2.9) e, em caso
contrário, ela toma o mesmo valor do conteúdo do primeiro lote no instante anterior, imposto por (2.11). Para os demais lotes, no caso de transferência de produtos, as restrições (2.10) são ativadas, e para o caso de paralisação do segmento, novamente (2.9) determinam os valores do conteúdo dos lotes. Note que a restrição (2.8) também é fundamental para o funcionamento destas restrições, pois ela limita o conteúdo de um lote l a apenas um produto p. O derivado presente no último lote deste segmento pode ser enviado para a respectiva base (Xl)pdk), ou para o segmento seguinte (XTpd+1,k), segundo as restrições (2.12) e (2.13).
Um aspecto interessante a ser notado nesta formulação é o fato de as variáveis XVpd ik serem definidas como contínuas, pois estas restrições atribuem a elas valores um ou zero para qualquer circunstância. Note que a desagregação das variáveis, segundo a formulação Convex-hull, seria redundante para este caso, pois quando um segmento do duto não é alimentado, a respectiva base e o segmento subseqüente também permanecem inoperantes.
As disjunções lineares referentes à operação de um segmento intermediário d (1&lt;d&lt;D) são dadas por (2.17).
’	Yd,k	'		’	-Yd,k	'
Vp,d,1,k = VOTp,d,k	Vp		Vp,d ,1,k = VZEROp,d,1 Vp
Vp,d,i ,k = VZEROp,d,i-i	Vp,l=2,...,L	V	Vp,d,l,k = VZEROp,d,l Vp,l=2,...,L
VODp,d,k+VOTp,d+1,k = VZEROp,d,l Vp		VODp,d, k+VOTp,d+1,k = 0	Vp
k=1,d=2,...D-1	(2.17a)
’	Yd,k	'		_	-Yd ,k	'
Vp,d,1,k = VOTp,d,k	Vp	\ /	Vp,d ,1,k = Vp,d,l, k-1	Vp
Vp,d,l,k = Vp,d,l-1,k-1	Vp,l = 2,...,L	V	Vp,d,l,k = Vp,d,l,k-1 Vp,l = 2,...,L
VODp,d ,k + VOTp,d + 1,k = Vp,d,L,k-1 Vp		VODp,d ,k = 0	Vp
k=2,...,K ,d=2,...D-1	(2.17b)
As restrições referentes a um segmento intermediário d do duto são análogas às descritas anteriormente, com exceção das restrições (2.6a) e (2.9), que são substituídas respectivamente por (2.18) e (2.19). Estas restrições são alteradas pois estes segmentos não são alimentados pela refinaria (XRp k), mas pelo seu segmento antecessor (XTpdk).
P
£ XTp, d, k=XSd,k	V k, d&gt;1	(2.18)
p=i
XVp, d,l, k &gt;XTp, d, k	V p, k, d&gt;1, l—1	(2.19)
As disjunções lineares referentes segmento terminal do duto (d=D) são dadas por (2.20).
YD,k			-YD,k
Vp,D,1,k = VOTp,D,k	Vp			Vp,D,1,k = VZEROp,D,1 Vp
Vp,D, l, k = VZEROp,D,l-1	Vp,l=2,...	,L	V	Vp,D,l,k = VZEROp,D,l Vp,l =
VODp,D,k = VZEROp,d,l Vp			VODp,D,k=0	Vp
YD,k			-YD,k
Vp,D,1,k = VOTp,D,k	Vp	\ /	Vp,D,1,k = Vp,D,l ,k-1	Vp	
Vp,D,l,k = Vp,D,l-1,k-1	Vp,l = 2,...,L	V	Vp,D,l,k = Vp,D,l,k-1 Vp,l = 2,...,L	
VODp,D,k = Vp,D,L,k-1 Vp		VODp,D,k = 0	Vp	
k=1,
k=2,...,K
(2.20a)
(2.20b)
\,...,L
As restrições referentes a um segmento terminal D do duto são análogas às descritas para os segmentos intermediários, com exceção das restrições (2.12) e (2.13), que são substituídas respectivamente por (2.21) e (2.22). Estas restrições são referentes somente à alimentação da última base conectada ao duto.
£ XDp, d, k = XSd, k
p=1
XDp, d, k &gt; XVZEROp, d, i - [1 - XSd, k ]
XDp, d, k &gt; XVp, d, l, k -1 — [1 — XSd, k ]
V k, d=D
(2.21)
V pe DEPdp, d=D, l= L, k=1	(2.22a)
Vpe DEPdp, d=D,l= L, k&gt;1	(2.22b)
Estas restrições referem-se a um sistema dutoviário com segmentos dividos em lotes de capacidades volumétricas iguais. Este sistema permite que apenas uma das D bases conectadas ao duto retirem algum derivado do duto quando a refinaria alimenta o mesmo.
O seqüenciamento de produtos para este modelo segue o conjunto de restrições (2.23).
TYp,p',d,k &gt; XVp,d,l,k + XVp',d,l',k—1
TYp, p',d,k = 0
TYp, p',d,k = 0
{Vp,p’\ eTSp,p’}, Vd,k, l=1, l’=2	(2.23a)
{Vp,p’\ eFSp,P’},Vd, k	(2.23b)
Vp=p’, d, k	(2.23c)
A restrição (2.23a) ilustra a transição dos produtos que pertencem ao conjunto de seqüências totais e possíveis TSpP'. Como a transição é somente caracterizada pelo contato de diferentes produtos no duto, a seqüência de dois produtos iguais não pertence ao conjunto TSpp, segundo (2.23c). Note que esta restrição não é aplicada à restrição (2.23a). Ela somente caracteriza a inexistência da transição quando o derivadop é igual aop’.
2.3.	Restrições Referentes às Bases de Distribuição
O conjunto de restrições (2.24) representa os balanços de massa nas bases, que podem ser escritos em termos volumétricos, enquanto as capacidades volumétricas seguem a restrição (2.25).
VDp, d, k = VDZEROp, d+VODp, d, k—VOMp,d, k
VDp,d ,k = VDp,d ,k-1 + VODp,d,k-VOMp,d, k
VDMINp,d, k &amp;lt;VDp,d ,k &amp;lt;VDMAXp,d ,k
Vpe DEPdp, d, k=1	(2.24a)
Vpe DEPdp, d, k=2,..,K	(2.24b)
Vpe DEPdp, d, k	(2.25)
A restrição (2.26) ilustra que os requerimentos de cada derivado p de cada base d devem ser exatamente atendidos.
£VOMp,d ,k = DEMp,d
k=1
Vpe DEPdp, d
(2.26)
Para este trabalho, os requerimentos impostos pelos mercados consumidores devem ser exatamente atendidos. Em uma situação onde os valores das demandas dos produtos são adotados como requisitos mínimos, o volume
enviado de cada produto de cada base de distribuição ao longo do horizonte deve ser maior ou igual ao parâmetro DEMpd. Os limites dos volumes de produtos enviados aos mercados consumidores são descritos pela restrição a seguir:
VOMp,d,k &amp;lt;UMp,d ,k
'p DEPd,p, d, k
(2.27)
Ficam assim descritas as restrições de uma base de distribuição de derivados de petróleo conectada ao duto.
2.4.	Restrição Auxiliar
A restrição proposta neste item refere-se à quantidade mínima de vezes que uma base deve retirar um dado produto do duto ao longo da operação. Para o caso de seu estoque inicial não ser suficiente para atender os requisitos do mercado consumidor, a base é obrigada a retirar este produto do duto no decorrer da operação, até que as demandas estabelecidas sejam satisfeitas. Em caso contrário, ela só deve retirar o respectivo produto para garantir a viabilidade do problema, quando, por exemplo, os estoques na refinaria atingirem o limite máximo de sua capacidade, ou então, para garantir o seqüenciamento viável de produtos no segmento subseqüente.
Esta idéia pode ser representada matematicamente pela definição do seguinte parâmetro:
XDMIN,
P.d
= max&amp;lt;0 ,
DEMpd - (VDZEROpd - VDMINp„)
Ud
&gt;	-p DEPdpd
(2.28)
onde | X | retorna o menor valor inteiro maior ou igual a x. Note que o índice k foi retirado do parâmetro VDMINPdk, pois é admitido que o volume mínimo não se altera ao longo do tempo.
A restrição auxiliar deve representar o número mínimo de vezes ao longo do horizonte de tempo que uma base d deve retirar o produto p do duto, segundo (2.29).
£ XDp,d ,k &gt; XDMINp,d
k=1
^pe DEPdp, d	(2.29)
2.5.	Função Objetivo
A função objetivo do problema pode ser escrita na forma de (2.30).
Custo =
^^CERpxVRp, k+YY^CEDp,d xVDp.d, k
xõ
p=1k=1
p=1d=1k=1
p=1d=1k=1
p=1p'=1d=1k=1
(2.30)
Esta função matemática linear representa o custo global da operação. As duas primeiras parcelas representam os custos de estoque na refinaria e nas bases, enquanto que a terceira representa os custos de bombeamento e a última os custos de transição. Estes custos são contabilizados a cada intervalo de tempo. Note que os custos de
estoque são formados pelo custo unitário de estocagem, pelo volume de um determinado produto e pelo tempo em que esta quantidade é estocada. No caso, como o problema está sendo representado em intervalos de tempo discretos, estes termos permanecem lineares. Se o problema fosse representado utilizando-se a modelagem em tempo contínuo, cujos intervalos de tempo são variáveis, esta mesma função objetivo se tornaria não-linear.
2.6.	Formulação para Sistemas Dutoviários com Lotes de Capacidades Diferentes
As disjunções (2.31) mostram o funcionamento dos segmentos ilustrados pela figura 7.
Yd\k
Vp,d',1,1=VOTp,d',1	Yp
Vp,d',i,1 = VZEROp,d',i-1	Yp, l=2,...,L
Zd', k
Vp,d'+1,1,1 = VZEROp,d',L - VODp, d',1
—Zd', k
VODp, d', k = VZEROp,d,L
Yp
— Yd,k
Vp, d',1,1 = VZEROp,d',1
Vp, d , l,1 =VZEROp, d , l
VODp, d ,1 =0
Yp
Yp,l=2,...,L
Yp
k=1
(2.31a)
Yd,k
Vp,d',1,k = VOTp,d', k	Yp
Vp,d',l,k = Vp,d', l-1,k-1	Yp, l = 2,
Zd , k
Vp,d'+1,1, k = Vp,d‘,L,k-1-VODp,d', k
—Zd', k
Vp,d',L,k-1 =VODp,d', k
,L
Yp
— Yd,k Vp,d',1,k = Vp,d',1,k -1 Vp,d', l,k = Vp,d', l, k-1 VODp, d',1 = 0
Yp
Yp,l = 2,...,L
Yp
k=2,...K
(2.31b)
Note que dentro das disjunções principais, relacionadas a Yd,k, existe uma outra interna, referente a Zd-,k. Desta forma, estas são classificadas como disjunções embutidas (Vecchietti e Grossmann (9)). Para o presente caso, o funcionamento lógico de (2.31) é atribuído às variáveis Booleanas Yd,k e Zd-,k. A primeira citada possui o mesmo significado quando foi colocada na disjunção (2.5). A variável Zd,k indica se o produto que está alocado ao último lote do segmento d’ é enviado para a respectiva base e o segmento subseqüente. Para o caso de transferência de produtos no segmento d' (Yd,k verdadeira), a alimentação do duto, representada por VOTp,d,k assume a composição do primeiro lote (Vxu)- O derivado que está inicialmente alocado ao lote l-1 (Vp,dk1,k-1) é transferido para o lote l (VpMk). Para o caso de Zd,k ser verdadeira, o produto que está contido no último lote (Vp,dL,k-1) pode ser destinado à respectiva base d' (VODp d,k) e o seu segmento subseqüente (Vp,d+1d,k). Se Zd,k for falsa, o derivado contido inicialmente no último lote (Vp,dLk-1) de d' é enviado integralmente para a respectiva base (VODp,d,k). Se o segmento d’ não estiver sob transferência de derivados (Yd,k falsa), o mesmo não é alimentado pelo seu antecessor (VOTp,d,k=0) e o deslocamento dos derivados que estão dentro de d' não ocorre (Vp, d', /, k-1=Vp, d, l k). A saída deste segmento assume valores nulos (VODp, d, k=0).
A transformação destas disjunções em restrições mistas-inteiras lineares é semelhante ao procedimento adotado para as disjunções (2.5), (2.17) e (2.30). A variável Booleana Yd,k é substituída pela variável de decisão XSd,k. A variável Booleana Zd-,k é desagregada em duas variáveis de decisão denominadas de XWp,d,k e XUp,d,k.
As restrições deste segmento são análogas aos casos mostrados anteriormente, com exceção da sua saída. Estas são dadas a seguir, segundo a formulação Convex-hull.
VODp,d' ,k = XWp,d' ,k x[üd'-Ud'+1] + Xüp,d' ,k xüd'	Y pp DEPd,p, k	(2.32)
(2.33)
V pe DEPd,p, k
£[ XWpd,k+XUp,d, k ] = XSd,k
p=1
As restrições acima descrevem a saída do duto no segmento d', sendo que (2.32) mostra a variável VODP,d,k desagregada em duas variáveis de decisão, XWP:d,k e XUP,d,k. A variável XWP,d,k indica se o produto contido no lote L, pertencente ao segmento d', é enviado para a respectiva base e para o segmento subseqüente. A variável XUP,d,k indica se o derivado contido em L é enviado integralmente para a respectiva base. Na figura 8 mostra-se o funcionamento operacional do segmento d' segundo estas variáveis e as descritas anteriormente.
As restrições quanto ao destino do derivado contido no último lote do segmento d’ são dadas pelas restrições (2.34).
XWp, d ,1+XUp, d ,1 &gt; XVZEROp, d, l -[1 - XSd,k ]
V p. DEPd,p
(2.34a)
XWp,d, k+XUp,d,k &gt; XVp,d, l, k-1-[1-XSd,k ]
Vp. DEPd,p, k=2,...,K	(2.34b)
XVp,d'+1,1,k &gt; XWp,d',k
V p. DEPdp, k
(2.34c)
Estas possibilitam a transferência do derivado que estiver alocado ao lote L do segmento d’ para o subseqüente e/ou para a respectiva base de distribuição. Estas restrições também podem ser escritas segundo (2.35).
XWp, d' ,1 + XUp, d' ,1 &amp;lt;XVZEROp, d,L
XWp, d‘ ,k + XUp, d‘, k &amp;lt;XVp, d‘ ,L, k-1
XVpd+1,1,1 &gt; XVZEROp, d,L -[1 - XWp, d,1]
XVp, d'+1,1, k &gt; XVp, d' ,L, k -1 -[1 - XWp, d, k ]
V p. DEPd,p	(2.35a)
V pe DEPd,p, k=2,...,K	(2.35b)
V p. DEPd,p	(2.35c)
V p. DEPd,p, k	(2.35d)
Para os exemplos mostrados neste trabalho, as restrições (2.35) são utilizadas para o envio do derivado contido no último lote do quarto segmento, pois testes computacionais mostraram um desempenho superior destas no algoritmo B&amp;amp;B em relação às restrições (2.34).
Note que o segmento subseqüente deve estar sob transferência se a variável XWP,d,k, referente a qualquer produto, for ativada. A restrição a seguir ilustra esta idéia.
P
£ XWP,d,k = XSd+1,k
p=1
V k
(2.36)
As restrições de movimentação, parada e saída dos segmentos subseqüentes ao descrito neste item não são alteradas desde que não ocorram mais variações de capacidades dos lotes.
</field>
	</doc>
</add>