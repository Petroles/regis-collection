<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.17465</field>
		<field name="filename">24259_Vin%c3%adcius%20C%c3%a9sar.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">
 

 

Pós-Graduação em Ciência da Computação 

 
 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

“Rastreamento de Reconstrução de 

Dutos em Ambientes Submarinos” 

 

Por 

 

Vinícius Miranda César 

 

Dissertação de Mestrado 

 

 

 

 

 

 
Universidade Federal de Pernambuco 

posgraduacao@cin.ufpe.br 

www.cin.ufpe.br/~posgraduacao 

 
 

RECIFE 
2015 



 Universidade Federal de Pernambuco 

CENTRO DE INFORMÁTICA 

PÓS-GRADUAÇÃO EM CIÊNCIA DA COMPUTAÇÃO 

 
 
 
 
 
 
 
 
 
 

 

Vinícius Miranda César 
 

 

 

 

“RASTREAMENTOS E RECOSNTRUÇÃO DE 

DUTOS EM AMBIENTES SUBMARINOS” 

 
 

 

 

 

 
 

 

 

                                          

 

 

 

                                         

 

 

ORIENTADOR(A): Profª Dr. Judith Kelner 
 
 
 
 
 

RECIFE 
2015 

Este trabalho foi apresentado à Pós-Graduação em Ciência da 

Computação do Centro de Informática da Universidade Federal de 

Pernambuco como requisito parcial para obtenção do grau de Mestre em 

Ciência da Computação. 
 

 



 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                  

 
                               Catalogação na fonte 

Bibliotecária Jane Souto Maior, CRB4-571                  
  

  
 

C421r César, Vinícius Miranda                               
Rastreamento e reconstrução de dutos em ambiente submarino  

/ Vinícius Miranda César. – Recife: O Autor, 2015. 
 104 f.: il. fig., tab. 
 
  Orientador: Judith Kelner. 
  Dissertação (Mestrado) – Universidade Federal de 

Pernambuco. CIn, Ciência da computação, 2015. 
                   Inclui referências. 
 

       1. Ciência da computação.  2. Visão computacional. 3. 
Reconstrução 3D. 4. Processamento de imagem. I. Kelner, Judith 
(orientadora).  II. Título. 
 
      004               CDD (23. ed.)          UFPE- MEI 2015-152 
       

 

 

 



Dissertação de apresentada por Vinícius Miranda César à Pós-Graduação em Ciência da 

Computação do Centro de Informática da Universidade Federal de Pernambuco, sob o 

título “Rastreamento e Reconstrução de Dutos em Ambiente Submarino” orientada 

pela Profa. Judith Kelner e aprovada pela Banca Examinadora formada pelos professores: 

 

 

    ______________________________________________ 

                                        Prof. George Darmiton da Cunha Cavalcanti 

                                        Centro de Informática/UFPE 

 

 

 

                                       ______________________________________________ 

                                       Prof. Alberto Barbosa Raposo 

                                       Departamento de Ciência da Computação / PUC/RJ 

 

                    

                           

                                       _______________________________________________ 

                                       Profa. Judith Kelner 

                                       Centro de Informática / UFPE 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

Visto e permitida a impressão. 

Recife, 7 de agosto de 2015. 

 

 

___________________________________________________ 

Profa. Edna Natividade da Silva Barros 
Coordenadora da Pós-Graduação em Ciência da Computação do  

Centro de Informática da Universidade Federal de Pernambuco. 



AGRADECIMENTOS

A conclusão desta dissertação de mestrado foi possível graças ao apoio de diversas
pessoas e entidades. A primeira entidade é o de grupo de pesquisa GRVM, liderado
pela Professora Dra. Judith Kelner. Aproveito para agradecer a todos os membros que
colaboraram de forma direta ou indireta para o desenvolvimento desta pesquisa. A CAPES
e a FINEP/Petrobras que contribuíram financeiramente através de bolsas e projetos de
pesquisa o meu mais sincero agradecimento. Por fim, agradeço aos membros do laboratório
TES no Cenpes, do laboratório LabOceano da COPPE/UFRJ e da Sapura que permitiram
a realização de diversos experimentos. Esses experimentos colaboraram imensamente para
os resultados finais apresentados neste trabalho. Finalmente agradeço ao prof. Silvio Melo
pela sua coorientação e ao Dr. Ismael Santos pelas suas intervenções, ambos contribuíram
para a finalização da pesquisa.



If everything seems under control,
you’re just not going fast enough

(Mario Andretti)



RESUMO
A instalação de dutos flexíveis em ambiente submarino de alta profundidade é realizada
recorrentemente pelas indústrias de óleo e gás. Estes dutos transportam fluidos como água,
gases e óleo. Durante o minucioso processo de instalação dos dutos flexíveis, é necessário
o monitoramento constante de sua geometria a fim de evitar a propagação de esforços e
consequentemente danos aos equipamentos envolvidos. Para que este monitoramento seja
eficiente, podem ser utilizadas técnicas de reconstrução 3D que usam como entrada as
imagens capturadas por um par de câmeras estéreo instaladas nos robôs que acompanham
a operação. Esta dissertação de mestrado propõe o desenvolvimento dos algoritmos de
rastreamento e reconstrução para dutos flexíveis com o intuito de permitir o monitoramento
em tempo real da operação.

O algoritmo de rastreamento proposto tem a função de determinar um conjunto de pontos
que representam a projeção do eixo medial do duto em cada imagem do par estéreo. Para
alcançar esse objetivo, o algoritmo utiliza características da iluminação em ambientes
submarinos e de marcações realizadas no duto. A etapa de reconstrução utiliza os pontos
rastreados para estimar uma curva B-spline racional não-uniforme (NURBS) sobre um
plano tridimensional. Essa aproximação simplifica o processo de reconstrução e permite
obter resultados mais precisos.

Experimentos realizados em ambiente aquático e aéreo, utilizando uma escala reduzida,
permitiram uma análise da acurácia e robustez dos algoritmos propostos. O erro médio
alcançado foi menor que meio centímetro em todos os casos analisados. Além disso,
concluiu-se que a disposição dos pontos da curva e a posição do plano influenciam na
estimativa da reconstrução. Testes com imagens reais da operação foram também realizados
e permitiram validar as técnicas propostas neste ambiente. Os resultados obtidos foram
robustos em casos de baixa iluminação, ruidosos e com elevada obliquidade. Os métodos
propostos são eficientes computacionalmente e permitem a obtenção do resultado a uma
taxa superior a 30 quadros por segundo.

Palavras-chave: B-spline; curvas; dutos; estéreo; NURBS; rastreamento; reconstrução.



ABSTRACT
Installing flexible pipes in deep underwater environments is a recurrent task in oil produc-
tion industry. Such flexible pipes are responsible for transporting fluids such as water, gases
and oil. The installation pipe connections is a meticulous process that requires continuous
monitoring of the pipe’s geometry in order to prevent excessive tension along the line that
may cause costly damages to the end equipment.

This master thesis develops a 3D reconstruction method to ensure the success of this
critical operation. The model makes use of images captured by a stereo rig mounted on
the robots supporting the operation. At the heart of the model is a novel algorithm for
tracking and reconstructing flexible pipes in order to allow real time pipe monitoring
during the installation operation.

Our approach tracks a set of points that represents the pipe’s projected medial axis in
each image provided by the stereo rig. This is achieved using the scene’s specifications
including the as deep-water environment illumination and marks pre-painted over the used
pipes. The reconstruction stage uses the tracked points to estimate a plane non-uniform
rational B-spline (NURBS) in 3D space. This approximation simplifies the reconstruction
and i8s shown to improve accuracy.

Underwater and aerial experiments were performed in a reduced scale scenario to evaluate
the proposed method’s accuracy and robustness. In all test cases, the mean of reconstruction
error was less than 1 centimeter. Furthermore, we conclude that the points’ distribution
along the pipeline and the curve plane position impact the reconstruction’s accuracy. In
addition, tests carried out using real operation videos were performed. They allowed us to
validate our technical proposal in this harsh environment. The results obtained were robust
in almost all the analyzed cases. The proposed methods are computationally efficient and
allow obtaining results at a rate of 30 frames per second or higher.

Keywords: B-spline; curves; NURBS; pipe; reconstruction; stereo; tracking.



LISTA DE ILUSTRAÇÕES

Figura 1 – Padrão de pintura em regiões brancas e pretas usada para marcar o duto. 21
Figura 2 – Câmera submarina de baixa iluminação . . . . . . . . . . . . . . . . . 23
Figura 3 – Imagem de um duto real . . . . . . . . . . . . . . . . . . . . . . . . . . 24
Figura 4 – Exemplos de imagens utilizadas por trabalhos de rastreamento e detec-

ção de dutos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
Figura 5 – Projeção de um ponto amostral na curva. . . . . . . . . . . . . . . . . 41
Figura 6 – Corte longitudinal e transversal na imagem do duto . . . . . . . . . . . 43
Figura 7 – Ilustração da entrada e saída do algoritmo de rastreamento . . . . . . . 44
Figura 8 – Região de projeção do duto na imagem . . . . . . . . . . . . . . . . . . 45
Figura 9 – Curva superior e inferior no espaço tridimensional . . . . . . . . . . . . 46
Figura 10 – Ilustração da transformação da imagem . . . . . . . . . . . . . . . . . . 47
Figura 11 – Ilustração do rastreamento longitudinal . . . . . . . . . . . . . . . . . . 48
Figura 12 – Esquemático do rastreamento transversal . . . . . . . . . . . . . . . . . 51
Figura 13 – Região de incerteza na triangulação de um ponto . . . . . . . . . . . . 57
Figura 14 – Gráfico do erro na triangulação de um ponto . . . . . . . . . . . . . . . 58
Figura 15 – Incerteza na reconstrução da curva pelo método de Xiao e Li . . . . . . 59
Figura 16 – Ilustração da projeção de uma curva planar em um par de câmeras estéreo 59
Figura 17 – Ilustração de imagens com trechos diferentes de duto sendo rastreados. 61
Figura 18 – Obliquidade . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
Figura 19 – Região de incerteza da reconstrução de um segmento de reta . . . . . . 65
Figura 20 – Gráficos do erro da reconstrução de um segmento de reta . . . . . . . . 66
Figura 21 – Ilustração das componentes principais dos pontos da curva . . . . . . . 66
Figura 22 – Suporte utilizado para movimentação das câmeras. . . . . . . . . . . . 70
Figura 23 – Cenário criado para experimentos em laboratório . . . . . . . . . . . . 70
Figura 24 – Resultado do rastreamento em amostra de quadros do Vídeo 1 capturado

em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
Figura 25 – Gráfico de erro da reconstrução obtido no Vídeo 1 nos experimentos

submersos. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
Figura 26 – Resultado do rastreamento em amostra de quadros do Vídeo 2 capturado

em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
Figura 27 – Gráfico de erro da reconstrução obtido no Vídeo 2 nos experimentos

em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
Figura 28 – Gráfico da obliquidade estimado no Vídeo 2 do experimento em ambiente

aquático. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75



Figura 29 – Resultado do rastreamento em amostra de quadros do Vídeo 3 capturada
em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . . . . . . 75

Figura 30 – Gráfico de erro da reconstrução da curva obtido no Vídeo 3 nos experi-
mentos em ambiente aquático . . . . . . . . . . . . . . . . . . . . . . . 76

Figura 31 – Gráfico da obliquidade estimado no Vídeo 3 obtido na captura do
experimento realizado em ambiente aquático. . . . . . . . . . . . . . . 77

Figura 32 – Resultado do rastreamento em amostras de quadros do Vídeo 4 captu-
rado em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . . . 78

Figura 33 – Gráfico de erro da reconstrução obtido no Vídeo 4 capturado nos expe-
rimentos em ambiente aquático . . . . . . . . . . . . . . . . . . . . . . 78

Figura 34 – Gráfico da obliquidade no Vídeo 4 estimado no experimento realizado
em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . . . . . . 79

Figura 35 – Ilustração do erro entre a curva reconstruída e a curva do gabarito
quando o erro máximo se localiza nas extremidades. . . . . . . . . . . . 80

Figura 36 – Quadros capturados nos experimentos no laboratório e em ambiente
aéreo. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82

Figura 37 – Ilustração da estimativa dos graus de liberdade do movimento da câmera
nos experimentos em laboratório e no ar . . . . . . . . . . . . . . . . . 83

Figura 38 – Resultado do rastreamento em amostras de quadros do Vídeo 1 captu-
rado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 86

Figura 39 – Resultado do rastreamento em amostra de quadro do Vídeo 1, capturado
em ambiente real, sem o uso da função de pesos. . . . . . . . . . . . . . 86

Figura 40 – Resultado do rastreamento em amostras de quadros do Vídeo 2, captu-
rado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 87

Figura 41 – Imagens transformadas pelo algoritmo de rastreamento . . . . . . . . . 88
Figura 42 – Resultado do rastreamento em amostras de quadros do Vídeo 3, captu-

rado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 88
Figura 43 – Resultado do rastreamento em amostras de quadros do Vídeo 4, captu-

rado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
Figura 44 – Resultado do rastreamento em amostras de quadros do Vídeo 5, captu-

rado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
Figura 45 – Resultados do rastreamento nos casos de estresse do algoritmo . . . . . 91



LISTA DE TABELAS

Tabela 1 – Medidas de erro de reconstrução da curva no experimento em laboratório
realizado em ambiente aquático. . . . . . . . . . . . . . . . . . . . . . . 80

Tabela 2 – Parâmetros utilizados em cada vídeo nos experimentos realizados em
ambiente aéreo. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81

Tabela 3 – Tabela de estimativas da amplitude do movimento do duto em cada
grau de liberdade nos experimentos realizados em ambiente aéreo . . . 84

Tabela 4 – Tabela do erro da estimativa das amplitudes dos movimentos nos
experimentos em laboratório e em ambiente aéreo. . . . . . . . . . . . 84

Tabela 5 – Tabela de erros de reconstrução da curva nos experimentos em labora-
tório e em ambiente aéreo . . . . . . . . . . . . . . . . . . . . . . . . . 85



SUMÁRIO

1 INTRODUÇÃO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
1.1 Motivação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.2 Objetivo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.3 Visão geral dos algoritmos propostos . . . . . . . . . . . . . . . . . . 16
1.3.1 Rastreamento . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
1.3.2 Reconstrução . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
1.4 Principais desafios . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.5 Contribuições . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.6 Estrutura do documento . . . . . . . . . . . . . . . . . . . . . . . . . . 18

2 CENÁRIO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
2.1 Posicionamento . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
2.2 Duto . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
2.3 Sistema de câmeras . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
2.4 Câmeras . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
2.5 Iluminação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
2.6 Imagens . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
2.7 Considerações finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24

3 TRABALHOS RELACIONADOS . . . . . . . . . . . . . . . . . . . . 25
3.1 Mapeamento interno de dutos . . . . . . . . . . . . . . . . . . . . . . 25
3.2 Rastreamento e detecção de dutos e cabos . . . . . . . . . . . . . . 26
3.3 Reconstrução de curvas . . . . . . . . . . . . . . . . . . . . . . . . . . 28
3.4 Considerações finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30

4 FUNDAMENTOS . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
4.1 Notação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
4.2 Visão computacional . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
4.2.1 Geometria Projetiva . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
4.2.1.1 Coordenadas homogêneas . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
4.2.1.2 Transformações projetivas . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
4.2.2 Modelo de câmera pinhole . . . . . . . . . . . . . . . . . . . . . . . . . . 34
4.2.3 Geometria epipolar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
4.2.4 Retificação estéreo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
4.2.5 Relação entre projeções de pontos coplanares . . . . . . . . . . . . . . . . 35
4.3 NURBS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37



4.3.1 Definição . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
4.3.2 Invariância a transformações projetivas . . . . . . . . . . . . . . . . . . . . 38
4.4 Mínimos quadrados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
4.5 Ajuste de curva . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
4.6 Considerações finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41

5 TÉCNICA PROPOSTA DE RASTREAMENTO DE DUTOS . . . . 43
5.1 Formulação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
5.2 Região de projeção do duto . . . . . . . . . . . . . . . . . . . . . . . . 45
5.3 Transformação da imagem . . . . . . . . . . . . . . . . . . . . . . . . 46
5.4 Rastreamento longitudinal . . . . . . . . . . . . . . . . . . . . . . . . 47
5.5 Rastreamento transversal . . . . . . . . . . . . . . . . . . . . . . . . . 49
5.5.1 Função de pesos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
5.5.2 Solução utilizando mínimos quadrados . . . . . . . . . . . . . . . . . . . . 50
5.6 Aproximações . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
5.7 Implementação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
5.8 Considerações finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53

6 TÉCNICA PROPOSTA PARA RECONSTRUÇÃO DE CURVAS PLA-
NARES . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54

6.1 Reconstrução estéreo de NURBS . . . . . . . . . . . . . . . . . . . . 55
6.2 Restrição de planaridade da curva . . . . . . . . . . . . . . . . . . . . 57
6.3 Impondo a restrição de planaridade . . . . . . . . . . . . . . . . . . . 58
6.4 Parametrização da curva . . . . . . . . . . . . . . . . . . . . . . . . . 60
6.5 Número de pontos de controle . . . . . . . . . . . . . . . . . . . . . . 62
6.6 Algoritmo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
6.7 Fatores que influenciam a acurácia da curva reconstruída . . . . . . 64
6.8 Considerações finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67

7 RESULTADOS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
7.1 Implementação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
7.2 Metodologia dos experimentos . . . . . . . . . . . . . . . . . . . . . . 68
7.3 Experimentos em laboratório . . . . . . . . . . . . . . . . . . . . . . . 69
7.3.1 Ambiente aquático . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
7.3.1.1 Vídeo 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
7.3.1.2 Vídeo 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
7.3.1.3 Vídeo 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
7.3.1.4 Vídeo 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
7.3.1.5 Principais conclusões do experimento . . . . . . . . . . . . . . . . . . . . . . . 77
7.3.2 Ambiente aéreo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80



7.3.2.1 Descrição do experimento . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
7.3.2.2 Análise dos resultados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
7.4 Experimentos em ambiente real . . . . . . . . . . . . . . . . . . . . . 85
7.4.1 Vídeo 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
7.4.2 Vídeo 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
7.4.3 Vídeo 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
7.4.4 Vídeo 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
7.4.5 Vídeo 5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
7.4.6 Casos de estresse . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
7.5 Análise geral . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
7.5.1 Erro de reprojeção . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
7.5.2 Iterações . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
7.5.3 Tempo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
7.6 Considerações finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94

8 CONCLUSÃO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
8.1 Principais conclusões . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
8.2 Principais contribuições . . . . . . . . . . . . . . . . . . . . . . . . . . 96
8.3 Trabalhos futuros . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97

REFERÊNCIAS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98



14

1 INTRODUÇÃO

Mesmo sendo um ambiente de difícil acesso para o homem, o fundo do mar,
principalmente em águas profundas, vem sendo cada vez mais explorado devido às riquezas
que este espaço oferece. Dentre as principais tarefas desenvolvidas nesse meio, podemos
citar a indústria de óleo e gás; atividades militares; instalação de cabos de energia e
telecomunicação; e pesquisa da flora e fauna marinha.

Algumas dessas tarefas requerem que sejam realizadas operações de manutenção,
instalação e inspeção de equipamentos no leito marinho. Por se tratar de um ambiente
hostil ao ser humano devido às suas características físicas, estas tarefas, normalmente, são
realizadas por robôs, denominados UUV (Uninhabited Undersea Vehicle). Os UUV podem
ser classificados em duas classes: os AUV (Autonomous Underwater Vehicle) e os ROV
(Remotely Operated Vehicles).

Os AUV são robôs autônomos, ou seja, possuem sua própria fonte de energia e
tomam decisões para realizar seus movimentos e definir sua trajetória sem utilização de
cabos. Eles são úteis em buscas de destroços e levantamento de dados do terreno, tendo
em vista que conseguem varrer uma grande área com autonomia. São robôs leves, velozes
e com menor liberdade de movimento. Um dos desafios dos AUV é otimizar a trajetória
percorrida para maximizar a eficiência energética, uma vez que sua energia é armazenada
em baterias (WHITCOMB, 2000).

De outro modo, os ROV são veículos operados remotamente a partir de um navio.
A sua alimentação e os dados são transportados através de um cabo, denominado umbilical.
Estes robôs têm grande liberdade de movimentos e muitos possuem braços e garras hidráu-
licas que auxiliam as operações. Os ROV são grandes e pesados, facilmente personalizáveis
e permitem a instalação de outros dispositivos (braços hidráulicos e ferramentas, por
exemplo) e sensores (tais como: sonares, acelerômetros, termômetros e câmeras de vídeo)
em seu chassi.

Os UUV são sempre equipados com vários sensores para auxiliar sua navegação,
como acelerômetros, giroscópios, bússolas, altímetros, etc. Dentre os sensores que obtêm
informações do ambiente marinho, podemos citar magnetômetros, sonares e câmeras.
Magnetômetros são sensores sensíveis a campos eletromagnéticos e muito utilizados para
localizar e seguir cabos no leito marinho. São sensores grandes, de alto custo e muito
sensíveis a ruído (ORTIZ; SIMÓ; OLIVER, 2002).

Os sonares são mais úteis para varrer grandes áreas, porém não são eficientes para
mapear áreas pequenas, principalmente devido à sua baixa taxa sinal/ruído. Além disso,
também são sensores grandes, pesados e de custo elevado.



Capítulo 1. Introdução 15

Os sensores ópticos, também são utilizados, sendo de baixo custo e facilmente
instalados em um ROV ou AUV. Devido ao decaimento da luz na água, estes sensores são
ineficientes em grandes distâncias, porém apresentam boa precisão quando consideradas
regiões a poucos metros do robô. A grande maioria dos ROV é equipado com pelo menos
uma câmera de vídeo que fornece imagens a um operador remoto (BONIN; BURGUERA;
OLIVER, 2014).

Observando as vantagens dos sensores ópticos (câmera de vídeo), aplicações de
visão computacional vêm sendo cada mais exploradas (HORGAN; TOAL, 2009). Por
exemplo, estabilizar o ROV a partir de imagens do solo marinho (GARCIA et al., 2001);
seguir cabos e dutos (ZHANG et al., 2012); mensurar distâncias (SUN; YU; XU, 2013);
realizar mapeamento 3D do fundo do mar (DRAP et al., 2015); auxiliar o processo de
manutenção de equipamentos (CHEN et al., 2014); estimar o posicionamento e localização
do ROV para facilitar a navegabilidade (BURDINSKY; MYAGOTIN, 2015), entre outros.

O processamento das imagens capturadas por sensores ópticos não é trivial, pois
é preciso decodificar a informação de interesse dentre um conjunto complexo de dados,
geralmente contendo grande quantidade de ruído. Nesse contexto, a área do conhecimento
responsável por processar, analisar e compreender imagens é a de visão computacional.
Diversos conhecimentos de outras áreas como matemática, estatística, física, inteligência
artificial e processamento de imagens, são englobados nessa área (DAVID; JEAN, 2002).

1.1 MOTIVAÇÃO
A instalação de dutos é uma das recorrentes operações que são realizadas no fundo

do mar pelas indústrias de óleo e gás. Esses dutos interligam dois pontos no fundo do
mar (um poço a um ponto de distribuição, por exemplo) ou um ponto no fundo do mar a
outro localizado na superfície (um poço a uma plataforma, por exemplo) e servem para
transportar fluidos como água, gases e óleo. Detalhes da operação são dados em (NAGLE
et al., 1993).

Esses dutos são flexíveis, possuem de 20 a 50 centímetros de diâmetro e podem
alcançar quilômetros de comprimento. A instalação é realizada através de navios especiali-
zados denominados PLSV, que transportam e instalam os dutos interligando equipamentos
submarinos. Esse tipo de instalação usa o auxílio de um ROV para realizar diversas tarefas,
dentre estas a de prover imagens do ambiente aos engenheiros e operadores.

O procedimento de instalação se torna muito delicado devido às dimensões e peso
do duto. Uma tensão excessiva pode ser propagada ao longo do duto e atingir os conectores,
podendo danificar os equipamentos. Para minimizar estes riscos, simulações físicas são
realizadas previamente à operação para estimar configurações seguras de acoplamento
(XAVIER, 2006).



Capítulo 1. Introdução 16

Entretanto, verificar se o duto segue corretamente as configurações definidas pela
simulação física ainda é um processo realizado através de comparação visual com as
imagens capturadas do ROV. Essa comparação consome muito tempo e é suscetível a erros,
pois é uma tarefa manual intensa e que não considera as distorções radial e de perspectiva
produzidas pela câmera.

1.2 OBJETIVO
O objetivo principal é prover uma comparação automática e em tempo real que

avalia se o duto está geometricamente de acordo com as configurações preestabelecidas,
esta dissertação de mestrado propõe um método para rastrear e reconstruir o Eixo Medial
do Duto (EMD) no espaço 3D utilizando câmeras estéreo.

Por se tratar de um corpo deformável ao longo do tempo é necessário usar pelo
menos duas câmeras para se obter duas ou mais imagens em um mesmo instante de tempo.
Para que a solução proposta seja útil, foi estipulado que o resultado da reconstrução deve
apresentar acurácia igual ou menor a 1 centésimo do comprimento do duto, dados obtidos
da experiência dos engenheiros envolvidos na operação. Além disso, o resultado deve
atender aos requisitos de tempo real, ou seja, os algoritmos devem fornecer o resultado a
uma taxa igual ou superior à da captura das câmeras.

Como o cenário de uso dos algoritmos (descrito no Capítulo 2) é bem definido, as
técnicas foram concebidas explorando peculiaridades do problema, em busca de maximizar
a acurácia e performance do resultado final.

O algoritmo de rastreamento proposto visa determinar um conjunto de pixels
ordenados que consistem na imagem do EMD. Para atingir esse objetivo específico, é
estabelecido um modelo de projeção do duto na imagem. Com base nas condições de
iluminação do ambiente e da marcação do duto, é realizado um ajuste dessa região sobre a
imagem do duto.

O processo como o duto é instalado permite que o EMD possa ser estimado como
uma aproximação de uma curva planar. Sendo assim, o algoritmo de reconstrução proposto
adaptou o método de Xiao e Li (XIAO; LI, 2005), que reconstrói NURBS a partir de
imagens estéreo. A adaptação consistiu em modificar a parametrização dos pontos de
controle para que a curva reconstruída seja planar.

1.3 VISÃO GERAL DOS ALGORITMOS PROPOSTOS
Além das imagens, os algoritmos recebem como dados de entrada: o raio do duto

e as calibrações das câmeras (parâmetros intrínsecos e pose relativa entre as câmeras).
Para o correto funcionamento do algoritmo de rastreamento, é necessária uma etapa de



Capítulo 1. Introdução 17

inicialização, essa etapa fornece um palpite para a posição do duto na imagem. O palpite
inicial pode ser obtido através da marcação de pontos na imagem pelo usuário ou utilizando
técnicas automáticas para detecção de dutos, como em (PESSOA et al., 2015).

A partir da etapa de inicialização é possível triangular um conjunto esparso de
pontos que representam o EMD no espaço e assim obter uma estimativa inicial para a
posição do duto. Embora o conjunto de pontos esparso obtido pela inicialização identifique
corretamente a posição do duto na imagem, esses pontos não atendem aos requisitos de
acurácia estabelecidos para o problema.

O algoritmo de rastreamento tem a função de: dada uma posição inicial do duto
localizar com precisão a projeção do EMD na imagem. O duto é rastreado em cada
imagem do par estéreo e o resultado será usado como entrada do algoritmo de reconstrução.
Para reconstruir o duto utilizam-se as calibrações da câmera e os pontos rastreados em
cada imagem do par estéreo. Como resultado obtém-se uma curva analítica NURBS que
representa o EMD no espaço e o plano desta curva. Esse resultado será também usado
para inicializar o algoritmo de rastreamento no quadro seguinte.

1.3.1 Rastreamento

O algoritmo de rastreamento tem por função, dado um palpite inicial, localizar com
precisão menor que 1 pixel, um conjunto de pontos 2D que representa a posição da EMD
na imagem. Uma região bidimensional que representa a projeção do duto parametrizada
nas direções longitudinais e transversais é delimitada, utilizando o raio do duto e sua
posição em relação à câmera.

O rastreamento é dividido em duas fases. Na primeira fase, a região é contraída ou
expandida na direção longitudinal, utilizando o padrão de pintura existente sobre o duto
descrito na Seção 2.2. Em seguida, com base nas características de iluminação da cena, o
rastreamento ajusta a região na direção transversal. Como as transformações aplicadas à
região são complexas e expressas de forma analítica, a curva que descreve a projeção do
EMD é dada como um conjunto de pontos 2D.

1.3.2 Reconstrução

A reconstrução da curva é realizada utilizando os pontos resultantes do rastreamento
em cada imagem do par estéreo e os parâmetros de calibração das câmeras.

Xiao e Li (XIAO; LI, 2005) apresentaram um algoritmo de reconstrução de curvas
NURBS no espaço a partir de câmeras estéreo que se aplica diretamente ao problema
deste trabalho.

Entretanto, o peso e a forma pela qual o duto é suspenso permite que o EMD
seja descrito aproximadamente como uma curva planar. Para incorporar esta restrição



Capítulo 1. Introdução 18

ao algoritmo de Xiao e Li foi realizada uma adaptação na parametrização dos pontos de
controle na função que computa o erro de reprojeção.

1.4 PRINCIPAIS DESAFIOS
Como discutido na Seção 2.6, o background das imagens possuem pixels com menor

intensidade do que os pixels pertencentes ao duto. Essa propriedade da imagem sugere que
o problema possa ser resolvido através de técnicas de limiarização. Porém essas técnicas
não apresentam resultados satisfatórios devido às características das imagens capturadas
em ambiente aquático: neve marinha, iluminação não uniforme e perda de contraste (mais
detalhes sobre estes efeitos são dados na Seção 2.6).

Diante destas dificuldades, o algoritmo de rastreamento foi proposto para ser
robusto ao tipo de ruído mencionados acima. Baseando-se na projeção do duto na imagem
estimada a partir do quadro anterior, o EMD é determinado de forma mais acurada. Além
disso, o método proposto utiliza toda a informação presente na imagem, dado que não
possui uma etapa de limiarização que elimina os valores de intensidade dos pixels da
imagem.

1.5 CONTRIBUIÇÕES
A primeira contribuição é a técnica de rastreamento voltada para dutos, que

considera a forma da projeção de um duto na imagem. Embora ela possa ser utilizada
apenas em imagens de background mais escuro que a região do que contem o duto, o
método pode ser adaptado para imagens genéricas a partir da ideia de estratificação do
rastreamento em eixos longitudinais e transversais. Além disso, a adaptação empregada
no algoritmo de reconstrução de Xiao e Li pode ser utilizada em outros cenários de
reconstrução de curvas de planares.

Por fim, esta dissertação de mestrado originou a publicação de um artigo completo
intitulado "Stereo Tracking and 3D Reconstruction of Underwater Pipes", a aparecer nos
anais da conferência British Machine Vision Conference (BMVC), setembro de 2015.

1.6 ESTRUTURA DO DOCUMENTO
As demais partes deste documento estão organizadas da seguinte forma: o Capítulo

2 apresenta o cenário em que o problema está inserido abordando detalhes como câmeras,
iluminação, etc. O Capítulo 3 descreve uma revisão geral da literatura apresentando algumas
propostas similares a esse trabalho. No Capítulo 4 são apresentados os principais conceitos
matemáticos para contextualizar esta pesquisa. O algoritmo responsável pelo rastreamento



Capítulo 1. Introdução 19

do duto é detalhado no Capítulo 5, e no Capítulo 6 o algoritmo de reconstrução do eixo
medial do duto é descrito. No Capítulo 7 são apresentados os experimentos e resultados
obtidos durante esta dissertação de mestrado. Finalmente, no Capítulo 8 são apresentadas
as conclusões e trabalhos futuros relativos à pesquisa realizada.



20

2 CENÁRIO

Este capítulo descreve os aspectos do cenário real do problema, características como
posicionamento, iluminação e câmeras serão levados em consideração para conceber os
algoritmos que serão descritos nesta dissertação e especificar o cenário dos experimentos.

2.1 POSICIONAMENTO
Durante o procedimento de análise da geometria do duto, o posicionamento do

ROV e do duto em relação ao solo marinho é menor que 30 metros, e a profundidade está
compreendida entre 1 e 4 mil metros. O ROV está equipado com duas câmeras muito bem
fixadas à sua estrutura e é controlado a partir do navio de operação, onde as imagens são
recebidas e processadas pela ferramenta em tempo real.

Para uma completa visualização da área de interesse do duto, o ROV se posiciona
a uma distância entre 5 e 15 metros do duto e realiza movimentos para observar o
equipamento de diversos pontos de vista. Esses movimentos são sempre muito lentos e
suaves devido à resistência mecânica da água.

2.2 DUTO
Os dutos são constituídos de material flexível, e portanto assumem diversas formas.

Seu diâmetro é aproximadamente constante ao longo de sua extensão podem variar de 20
a 50 cm de diâmetro. O comprimento pode atingir alguns quilômetros, porém apenas os
trechos entre 10 e 30 metros na extremidade do duto serão analisados, considerando que
esta é a região que gera maior esforço, e portanto, denominada de região de interesse.

Na região de interesse do duto, existe uma pintura regular e intercalada de regiões
brancas e pretas ao longo de sua extensão, como ilustrado na Figura 1. As regiões brancas
têm comprimento aproximadamente igual ao diâmetro d do duto, enquanto as regiões pretas
possuem comprimento aproximadamente igual a d/2. Esse padrão de pintura provê uma
textura de desambiguação longitudinal, facilitando a visualização do duto pelo operador e
servindo também para detectar o duto na imagem pela ferramenta de monitoramento. Este
padrão de pintura será utilizado pelo algoritmo de rastreamento proposto nesta dissertação
para determinar a porção longitudinal do duto que deve ser seguida.

Embora o duto seja um corpo tridimensional (com altura, comprimento e largura),
o escopo deste trabalho foca na reconstrução do eixo medial do mesmo (EMD), que
consiste em uma curva unidimensional. O EMD pode ser representado através de uma



Capítulo 2. Cenário 21

Figura 1 – Padrão de pintura em regiões brancas e pretas usada para marcar o duto.

. . .d

~d/2 ~d

Fonte: O autor

curva matemática no espaço tridimensional e a partir das equações da curva são obtidas
propriedades do duto, como a posição e curvatura.

Durante a operação grande parte da massa do duto é suspensa por suas extremida-
des, e com a ação da gravidade, o EMD se torna uma curva praticamente planar. Embora
o duto esteja sujeito a movimentos, estes por sua vez não alteram significativamente esta
característica. Sendo assim, o EMD é considerado para fins práticos uma curva plana
inserida em um espaço 3D.

Embora seja flexível, o duto apresenta uma certa rigidez que o impede de se
comportar como uma curva catenária (LOCKWOOD, 1971) (curva que, por exemplo,
descreve cordas ideais suspensas por suas extremidades). Uma abordagem para determinar a
curva do EMD é utilizar simulações físicas e sistemas de elementos finitos (FRITZKOWSKI;
KAMINSKI, 2010), informando as propriedades do material que compõe o duto. Porém,
esta abordagem requer uma grande quantidade de parâmetros do duto e do ambiente.
Para evitar essa complexidade, o duto será modelado através de curvas matemáticas como
splines, permitindo assim representá-lo de diversas formas.

2.3 SISTEMA DE CÂMERAS
Do ponto de vista teórico, apenas uma câmera seria necessária para reconstruir o

duto. Considerado que o raio do duto é conhecido, a distância de cada ponto do EMD
para a câmera poderia ser determinada pela espessura da projeção do duto na imagem.
Entretanto, do ponto de vista prático, esse método seria muito impreciso uma vez que o raio
do duto é muito menor que a distância entre a câmera e o objeto. Essa característica impede
que sejam estabelecidas restrições suficientes para extrair informação tridimensional. Um
exemplo disto é o fato de que grandes movimentos de aproximação do duto para a câmera
resulta em alterações muito pequenas na imagem. Dessa maneira, para obter um resultado
válido devem ser utilizadas duas ou mais câmeras calibradas para triangular a posição do
EMD no espaço.

O sistema de câmeras utilizado no escopo desta pesquisa composto por duas câmeras
submarinas de baixa iluminação de mesma marca e modelo, descritas na Seção 2.4. Estas



Capítulo 2. Cenário 22

câmeras estão bem fixadas à estrutura do ROV para impedir movimento relativo entre as
mesmas. Ambas as câmeras estão posicionadas com eixos óticos paralelos e com distância
(baseline) horizontal igual a 80 cm. Esta medida foi adotada para que seja possível obter
uma triangular pontos distantes mais de 5 metros da câmera com acurácia (detalhes sobre
a influência da distância na precisão da reconstrução são dados na Seção 6.7).

O par estéreo é previamente calibrado antes de cada operação para obter os
parâmetros intrínsecos de cada câmera, assim como o posicionamento relativo entre as
duas câmeras (pose). O procedimento de calibração considera a variação do índice de
refração do meio aquático e aéreo.

2.4 CÂMERAS
Como o ambiente onde é realizado a operação está a mais de mil metros de

profundidade, é preciso utilizar câmeras submarinas de baixa iluminação, que são específicas
para este fim. Esse tipo de câmera possui duas características principais para lidar com
esse tipo de ambiente. A primeira é sua estrutura reforçada que deve suportar pressões de
grandes profundidades.

A segunda característica é sua sensibilidade à luz. Como a luz natural não chega
a essas profundidades, a única fonte de luz existente no ambiente são os iluminadores
do ROV. Porém, como a atenuação da luz na água é elevada, o ambiente ainda assim
é escasso em iluminação. Sendo assim, para que seja possível visualizar em distâncias
compreendidas entre 5 e 20 metros, é preciso utilizar câmeras de baixa iluminação que
têm sensibilidade de 10?2 a 10?5 LUX.

Devido à dificuldade em avistar em grandes distâncias, câmeras submarinas de
baixa iluminação costumam ser grande angulares, com FOV (field of view) maior que 80?.
Isto permite a visualização da maior parte da cena, mesmo que a câmera esteja localizada
perto dos objetos. Lentes grandes angulares geralmente possuem distorção radial mais
acentuada, deformando principalmente as bordas da imagem (SZELISKI, 2010). Para
transmitir a imagem até o barco, utiliza-se o formato analógico – NTSC ou PAL. Outra
característica deste tipo de câmera é que a imagem produzida é monocromática.

As informações referentes a essa categoria de câmeras foram obtidas através de
uma pesquisa entre os modelos das marcas: Kongsberg, Bowtech e Imenco. O modelo de
câmera utilizadas nos experimentos desse trabalho é a Kongsberg OE15-101c, ilustrada na
Figura 2, e possui 84? de FOV diagonal quando submersa e sensibilidade de 1.3 × 10?3

LUX.



Capítulo 2. Cenário 23

Figura 2 – Câmera submarina de baixa iluminação utilizada em operações reais e nos
experimentos desta dissertação.

Fonte: Kongsberg Maritme

2.5 ILUMINAÇÃO
Imagens obtidas em meio aquático possuem aspectos diferentes daquelas capturadas

em meio aéreo. A luz sofre forte atenuação na água, impedindo assim a visualização
de objetos mais distantes. Além disso, o espalhamento que a luz sofre na água cria
imagens embaçadas e com pouco contraste (ANCUTI et al., 2012). Além da intensidade
e contraste, as cores também sofrem alterações, pois as ondas com menores frequências
(como o vermelho) sofrem maior atenuação tornando assim as imagens mais azuladas ou
esverdeadas (IQBAL et al., 2007). Outro aspecto dessas imagens é o ruído que surge a partir
de partículas em suspensão na água (efeito conhecido como neve marinha) (HORGAN;
TOAL, 2006).

Em profundidades superiores a 30 metros não há luz natural e é necessário a
utilização de iluminadores como fontes de luz, geralmente fixados no UUV, próximos às
câmeras. Esse tipo de iluminação provoca um aumento da visibilidade em relação a um
cenário iluminado com luz natural abundante, pois os raios de luz refletidos pelo objeto
visualizado não se somam à luz do ambiente. Em contrapartida, os iluminadores tendem a
causar uma iluminação não uniforme. Além disso, o posicionamento entre iluminadores e
câmeras favorecem a reflexão da luz na neve marinha, criando vários pontos de máximo
na imagem.

2.6 IMAGENS
Um exemplo de imagem obtida pelas câmeras está ilustrado na Figura 3. São quadros

monocromáticos que, após serem digitalizados, possuem resolução igual a 640 × 480 pixels
e aspecto 4 : 3. Pode-se verificar na imagem borrada com pontos de máximo oriundos da
reflexão da luz na neve marinha.



Capítulo 2. Cenário 24

Figura 3 – Imagem de um duto obtida no cenário real a 1300 metros de profundidade.

Fonte: Petrobras

Devido às condições de iluminação, a imagem possui um background mais escuro que
os objetos da cena que difundem maior quantidade de luz. Desta forma pixels pertencentes
ao duto possuem intensidade maior do que a sua vizinhança. Essa característica da imagem
será utilizada na função de custo do algoritmo de rastreamento.

2.7 CONSIDERAÇÕES FINAIS
O cenário da instalação de dutos possui diversas características específicas que

devem ser levadas em consideração no momento de especificar os algoritmos mais adequados
para que os objetivos sejam cumpridos. E se bem exploradas, estas características podem
aprimorar o resultado da reconstrução. Além disso, a definição exata do cenário permite
avaliar a relevância de trabalhos relacionados, apresentados no próximo capítulo.



25

3 TRABALHOS RELACIONADOS

Este capítulo apresenta o levantamento de trabalhos correlatos no contexto desta
dissertação de mestrado. Dentre os trabalhos relacionados com a proposta de rastreamento,
destacam-se: o mapeamento 3D da superfície interna de dutos, apresentado na Seção 3.1;
e o rastreamento e detecção de dutos, na Seção 3.2. O primeiro reconstrói a superfície
interna do duto através de pequenos robôs e o segundo utiliza a imagem duto para localizar
e orientar os UUV. Mas nenhum deles possui o foco no rastreamento do eixo medial do
duto.

Um dos temas abordados nesta dissertação, que se refere a reconstrução da curva,
é amplamente estudado na literatura de visão computacional, como descrito na Seção 3.3.
Nesta seção buscou-se detalhar desde trabalhos focados no estabelecimento de correspon-
dências de curvas utilizando primitivas como cônicas até reconstrução utilizando curvas
do tipo splines.

3.1 MAPEAMENTO INTERNO DE DUTOS
No procedimento de inspeção da superfície interna de dutos são utilizados pequenos

robôs equipados com sensores e que se locomovem pelo interior do duto (ROH et al.,
2001). Para reconstruir a geometria interna do duto são utilizadas abordagens monoculares
(HANSEN et al., 2013) e estéreo (HANSEN et al., 2011). Nestas abordagens, após extrair
correspondência de pontos característicos entre as imagens, empregam-se técnicas SfM
(Structure from Motion) para obter uma nuvem de pontos 3D. Um refinamento não linear
minimiza o erro de reprojeção global (bundle adjustment) a fim de obter um resultado
mais acurado.

O trabalho de insperação geralmente consiste em averiguar a integridade da su-
perfície interna do duto. Arranhões, rachaduras, oxidação e encrustação são exemplos de
fenômenos que devem ser detectados por estes algoritmos. Por isso métodos para esse fim
requisitam precisão menor que 1 milímetro, como alcançado em (HANSEN et al., 2011).
Além disso, a nuvem de pontos reconstruída deve ser densa para que se possa extrair toda
a geometria da superfície interna do duto.

Como o interior do duto compõe uma cena rígida, é possível realizar uma mini-
mização global do erro de reprojeção. Cada ponto é amostrado em diversas imagens e
uma otimização dos pontos e os parâmetros de câmera permite determinar com precisão o
caminho realizado pelo robô (odometria) e pontos 3D. Porém esta abordagem impede que
o resultado seja fornecido em tempo real porque apenas ao final da análise de todo vídeo



Capítulo 3. Trabalhos relacionados 26

o resultado será obtido.

3.2 RASTREAMENTO E DETECÇÃO DE DUTOS E CABOS
A grande maioria dos trabalhos presentes na literatura sobre rastreamento e

detecção de dutos e cabos em ambientes submarinos lida com imagens semelhantes àquelas
apresentadas na Figura 4. Estas imagens mostram os dutos com formato praticamente reto
sobre o chão marinho, e geralmente cruzam a imagem da parte inferior até a parte superior.
Sendo assim, estes trabalhos utilizam metodologias semelhantes para localizar e rastrear o
duto. Nesse procedimento, primeiramente, realiza-se um processamento da imagem com a
finalidade de localizar as arestas e detectar pares de retas quase paralelas que representam
as bordas do duto na imagem. A partir da equação das retas pode-se estimar a posição da
câmera em relação ao duto. A seguir uma breve descrição dos principais trabalhos neste
escopo.

Figura 4 – Exemplos de imagens utilizadas por trabalhos de rastreamento e detecção de
dutos em ambiente submarino. Nestas imagens os dutos repousam sobre o
chão marinho e podem ser localizados através da detecção das suas bordas que
descrevem linhas retas na imagem.

(a)

Fonte: (FORESTI; GENTILI, 2000)

(b)

Fonte: (ORTIZ; OLIVER; FRAU,
1997)

(c)

Fonte: (KIA; ARSHAD, 2006)

Em alguns trabalhos são detectadas as arestas da imagem utilizando o gradi-
ente(NGUYEN; KAOMEA; JR, 1988; ASIF; ARSHAD, 2006), operador LoG (Laplacian
of Gaussian)(MATSUMOTO; ITO, 1995; BALASURIYA et al., 1997; BALASURIYA;



Capítulo 3. Trabalhos relacionados 27

URA, 1999) e filtro de Sobel (NARIMANI; NAZEM; LOUEIPOUR, 2009; ZHANG et al.,
2012). No passo seguinte, aplica-se a transformada de Hough para detectar as bordas do
duto. Em (ZINGARETTI et al., 1996; ZINGARETTI; ZANOLI, 1998) são detectadas
arestas na direção vertical e uma abordagem de subdivisão da imagem é adotada para
localizar apenas as bordas do duto. Enquanto em (GRAU; CLIMENT; ARANDA, 1998)
utilizaram-se descritores de textura para detecção das bordas.

Na abordagem proposta por Ortiz (ORTIZ; OLIVER; FRAU, 1997; ORTIZ; SIMÓ;
OLIVER, 2002; ANTICH; ORTIZ, 2003) realiza-se uma transformada na imagem para
o espaço de {escala de cinza × módulo do gradiente}. A imagem transformada é então
segmentada utilizando clusterização e a partir da fronteira das regiões segmentadas são
determinados os contornos da imagem. Em uma outra etapa deste processo, realiza-se
uma seleção de contornos na forma de linhas retas para determinar as bordas do duto na
imagem e estimar sua posição em relação à câmera.

Em (KIA; ARSHAD, 2006) utiliza-se uma limiarização a partir de dois thresholds
que busca maximizar a área de componentes conexos. A imagem limiarizada será usada
como entrada para o sistema de lógica fuzzy que determina um conjunto de pontos
característicos do duto. A partir da análise desses pontos obtém-se a direção do duto na
imagem.

Em (FORESTI; GENTILI, 2000) é proposto um sistema que utiliza redes neurais
para guiar AUV através das arestas do duto e inferir que porção do cabo está sendo
observada a partir de objetos característicos (ânodos). Utilizando dois perceptrons multi-
camada (MLP) (RIPLEY, 1996), um para detecção de arestas e outro para detecção de
ânodos, os pixels da imagem são classificados como background ou não. Através de uma
contagem de pixels executa-se o reconhecimento de linhas e ânodos na imagem. A posição
do cabo em relação à câmera pode ser inferida através de um par de retas convergentes
que representam as arestas do cabo.

Para rastrear o duto após realizada a detecção do mesmo, muitos trabalhos utilizam
ROI (region of interest), tais como: (ORTIZ; SIMÓ; OLIVER, 2002; ORTIZ; OLIVER;
FRAU, 1997; BALASURIYA; URA, 1999), para minimizar o espaço de busca do duto no
quadro seguinte do vídeo. Outra abordagem é a utilização do filtro de Kalman (ORTIZ;
SIMÓ; OLIVER, 2002; ANTICH; ORTIZ, 2003; ASIF; ARSHAD, 2006; ZINGARETTI;
ZANOLI, 1998; ZHANG et al., 2012) para prever a ROI no próximo quadro ou realizar
uma inicialização do algoritmo de rastreamento.

Uma abordagem para detecção de dutos em fábricas é descrita em (THIRION et
al., 2000), e é realizada a partir de um conjunto de imagens de treinamento. Através das
características aprendidas e algumas filtragens, é construído um mapeamento que relaciona
cada pixel com a sua probabilidade de pertencer ao duto. Um algoritmo de graph cut é
utilizado para segmentar apenas os pixels pertencentes ao duto.



Capítulo 3. Trabalhos relacionados 28

Embora bem-sucedidos, os trabalhos apresentados não se aplicam ao cenário alvo
dessa dissertação. Primeiramente, porque os dutos e cabos detectados por esses algoritmos
são encontrados apenas através da segmentação de linhas retas, pois possuem um raio de
curvatura muito grande. Em contrapartida, como ilustrado na Figura 3, as arestas dos
dutos tratados nesta dissertação não podem ser aproximadas para retas. Além disso, os
algoritmos apresentados se preocupam em localizar a câmera em relação ao duto para
auxiliar a navegação de UUV. Para isso o eixo medial do duto é aproximado para uma reta.
Esta dissertação, por sua vez, tem um propósito diferente, pois encarrega-se de recuperar
a geometria do eixo medial desconsiderando a posição da câmera.

3.3 RECONSTRUÇÃO DE CURVAS
A grande maioria dos algoritmos de reconstrução utiliza correspondências de pontos

característicos entre imagens para obter uma estrutura 3D, porém outras primitivas podem
ser utilizadas como retas e curvas. A dificuldade na utilização destas outras primitivas
é que o estabelecimento de correspondência não é direto como em pontos devido ao
problema de abertura (aperture problem). A ideia é que um ponto em uma curva não
apresenta características suficientes para poder determinar-se um ponto correspondente
em outra curva. Um exemplo deste problema é a impossibilidade de distinguir pontos de
uma circunferência entre si, se não forem observados outros fatores como sua vizinhança.

O estabelecimento de correspondência e reconstrução de cônicas como primitivas
foi investigado em (MA, 1993; KAMINSKI; SHASHUA, 2000; QUAN, 1996). Porém o
potencial de representatividade dos distintos tipos de curvas da natureza através das
cônicas é relativamente pequeno. Outra primitiva utilizada são curvas algébricas (LI; MA,
1996; AN; LEE, 1996; KAMINSKI; SHASHUA, 2000). Para reconstruir curvas algébricas
não planares, (KAMINSKI et al., 2001) utilizou as equações de Kruppa. Estas abordagens,
embora sejam reconstruções analíticas, mostram-se muito complexas à medida que o grau
da curva aumenta. Além disso, não é obtida uma reconstrução ótima segundo o erro de
reprojeção.

Muitos trabalhos usam a seguinte abordagem: através da utilização de detectores
de arestas e contornos, são obtidas amostras de pontos da curva na imagem, na qual
cada ponto é a projeção de pontos da curva no espaço. Porém em outra imagem da
curva dificilmente serão amostrados os mesmos pontos 2D correspondentes com os da
primeira imagem. Sendo assim não é possível estabelecer correspondências diretas entre
os pontos detectados nas imagens. Neste caso, deve ser realizada uma interpolação de
pontos, tentando mitigar o problema da abertura para assim determinar um conjunto de
correspondências de pontos. Através da triangulação das correspondências estabelecidas é
gerada uma nuvem de pontos que forma a curva no espaço.



Capítulo 3. Trabalhos relacionados 29

Para câmeras calibradas, utiliza-se a intersecção de linhas epipolares com a curva
para interpolar correspondências. Porém não é uma tarefa fácil considerando que uma
linha epipolar pode intersectar várias curvas. Sendo assim, outros aspectos das curvas e
da imagem precisam ser observados para estabelecer as correspondências, como feito em
(DERICHE; FAUGERAS, 1990; NASRABADI; LIU; CHIANG, 1988; BRINT; BRADY,
1989; NASRABADI; LIU; CHIANG, 1988; PAJARES; CRUZ; LÓPEZ-OROZCO, 2000;
LI; ZUCKER, 2006; PORRILL; POLLARD, 1991; KEDEM; YARMOVSKI, 1996). Dentre
os aspectos observados, pode-se citar curvatura e informação de contexto na vizinhança
da curva.

Uma dificuldade ao se utilizar a geometria epipolar para este fim é o caso em que a
linha epipolar é tangente à curva. Nessa situação é obtida uma singularidade, desde que há
várias correspondências de pontos possíveis. Com a finalidade de estabelecer uma medida
de similaridade entre pontos da curva e eliminar a singularidade, (DERICHE; FAUGERAS,
1990; LI; ZUCKER, 2006) utilizou valores de curvatura e (KEDEM; YARMOVSKI, 1996)
usou a distância de Hausdorff.

No caso de câmeras não calibradas, o problema é mais desafiador pois as restrições
epipolares precisam ser calculadas. Para isso, (WU; YU, 2005; SHAN; ZHANG, 2002;
JIAN-DONG et al., 2009) utilizaram pontos presentes na imagem ou marcadores para
calibrar as câmeras. Em (SCHMID; ZISSERMAN, 2000; ROBERT; FAUGERAS, 1991;
MAI; HUNG, 2010; KAMINSKI et al., 2001; XIAO; DING; PENG, 2001) é utilizada uma
abordagem mais aperfeiçoada, pois estabelece correspondências entre as curvas, realiza
a reconstrução e estima a posição das câmeras. Em (FAUGERAS; PAPADOPOULO,
1993; PAPADOPOULO; FAUGERAS, 1996) Faugeras et al descreve o comportamento
do campo de movimento da projeção de uma curva 3D na imagem, para determinar
as correspondências e reconstruir curvas no espaço. Alguns trabalhos, como em (SATO;
CIPOLLA, 1998; HONG; MA; YU, 2004), utilizam a premissa de simetria do objeto para
estabelecer restrições e realizar a reconstrução.

Métodos que triangulam independentemente correspondências de pontos da curva
tendem a ser menos robustos a outliers e podem gerar resultados não suaves devido ao ruído
intrínseco no processo de detecção. Por este fato (BERTHILSSON; ASTROM; HEYDEN,
1999; BERTHILSSON; ÅSTRÖM; HEYDEN, 2001; XIAO; LI, 2005; XIAO; DING; PENG,
2001) utilizam curvas paramétricas (B-splines e NURBS) como primitivas. Cada ponto na
imagem é a projeção de um ponto 3D parametrizado da curva. Desta maneira, otimiza-se
a parametrização dos pontos 3D e o erro de reprojeção através de um algoritmo de bundle
adjustment para obter uma reconstrução. Esta abordagem apresenta resultados precisos e
estáveis, pois otimiza o erro de reprojeção. Além disso, apresenta uma formulação mais
simples das demais abordagens, como curvas algébricas por exemplo. Porém devido ao
número de variáveis envolvidas, trata-se de uma solução de custo computacional bastante



Capítulo 3. Trabalhos relacionados 30

elevado. Devido às vantagens apresentadas nesta abordagem, a proposta do algoritmo de
reconstrução dessa dissertação se baseia na técnica de Xiao e Li (XIAO; LI, 2005) que
utiliza NURBS para realizar a reconstrução do eixo medial do duto.

3.4 CONSIDERAÇÕES FINAIS
Este capítulo abordou os principais trabalhos relacionados com esta dissertação

de mestrado. Verificou-se que, embora exista na literatura enfoque na reconstrução e no
rastreamento de dutos, a estimativa do eixo medial de dutos através de técnicas baseadas
em visão computacional não é explorada. Porém o problema de reconstrução de curvas a
partir de imagens estéreo é um problema amplamente investigado. Dentre esses trabalhos,
destacam-se aqueles que focam na reconstrução estéreo utilizando splines.

Para fornecer os conceitos essenciais para o entendimento da proposta desta dis-
sertação, o próximo capítulo apresenta os fundamentos básicos em visão computacional,
métodos dos mínimos quadrados e ajuste de curvas.



31

4 FUNDAMENTOS

Neste capítulo serão apresentados os principais fundamentos para contextualizar
essa dissertação de mestrado com o objetivo de criar um documento autocontido. Inicial-
mente, a Seção 4.1 descreve a notação matemática utilizada ao longo do trabalho. Em
seguida, a Seção 4.2 explora a geometria projetiva e epipolar em visão computacional,
discutindo-se os principais conceitos para se estudar a geometria em duas vistas.

O modelo de curva utilizado para modelar o eixo medial do duto é discorrido na
Seção 4.3, onde apresenta-se NURBS, generalização de curvas como B-splines e Bézier. A
Seção 4.4 aborda o método dos mínimos quadrados, forma na qual muitos problemas são
modelados, inclusive as técnicas de rastreamento e reconstrução propostas nessa dissertação.
Por fim, a Seção 4.5 combina NURBS e mínimos quadrados para tratar sobre o problema
de ajuste de curvas, problema central no algoritmo de reconstrução de curvas proposto
por esta pesquisa.

Para uma leitura mais aprofundada acerca dos assuntos deste capítulo, o autor
recomenda algumas referências: (HARTLEY; ZISSERMAN, 2004) e (SZELISKI, 2010)
ambas contém um rico material sobre geometria em múltiplas vistas e visão computacional.
Quanto a NURBS e ajuste de curvas, recomenda-se os livros (PIEGL; TILLER, 2012)
e (FARIN, 2014), além dos artigos (WANG; POTTMANN; LIU, 2006) e (HARON et
al., 2012). O livro (FLETCHER, 2013) é uma referência tradicional em problemas de
otimização.

4.1 NOTAÇÃO
A notação utilizada ao longo dessa dissertação é similar àquela empregada em

(HARTLEY; ZISSERMAN, 2004). Valores escalares são representados através de letras
do alfabeto inglês ou grego, maiúsculas ou minúsculas como w, W, ? e ?. Vetores são
representados por matrizes colunas e são denotados em negrito, como w, W, ? e ?. Para
enumerar elementos de um vetor, utiliza-se colchetes: x = [x1,x2,x3]&gt;. Matrizes que não
possuem apenas uma coluna serão representadas utilizando letras do alfabeto inglês como
Q, q e R.

Notação de funções serão sempre acompanhadas de parênteses e seu parâmetro e
retorno seguem a mesma notação acima. Por exemplo N(t) é uma função que recebe um
escalar e retorna uma matriz. A função ?(s,t; q) recebe como entrada dois escalares e um
vetor e retorna um vetor como resultado.

Embora o texto seja escrito em português, será utilizado um ponto para separar



Capítulo 4. Fundamentos 32

a parte inteira da parte decimal de um número. Por exemplo, o número 12.34 lê-se doze
inteiros e trinta e quatro centésimos.

4.2 VISÃO COMPUTACIONAL
Nesta seção serão abordados os fundamentos de visão computacional com enfoque

em geometria epipolar, essencial para formulação de problemas de reconstrução estéreo.
Porém, antes é preciso formalizar alguns conceitos básicos da geometria projetiva e
geometria para uma única vista.

4.2.1 Geometria Projetiva

A forma mais comum de representar pontos em um plano ou no espaço é através
da geometria euclidiana. Porém esta geometria apresenta alguns desafios para modelar as
transformações que uma câmera realiza ao projetar pontos do espaço em uma imagem.
Dentre estes desafios, podemos citar a difícil representação da intersecção de retas paralelas.
Outro problema é que o espaço euclidiano não é invariante para transformações projetivas.
Por estes motivos, a geometria projetiva se torna mais atrativa. A representação em
coordenadas homogêneas e a dualidade entre pontos e retas permitem a simplificação de
muitos cálculos em relação à geometria euclidiana.

4.2.1.1 Coordenadas homogêneas

Em coordenadas homogêneas pontos e retas são representados através de vetores.
Um ponto [x,y]&gt; no espaço euclidiano é definido em coordenadas homogêneas como o
vetor

x =

?
????
kx

ky

k

?
???? , (4.1)

em coordenadas homogêneas, onde k é um número real diferente de 0. Observe que há uma
variedade de vetores que representam um mesmo ponto, e para cada representação atribui-
se um valor de escala k diferente. De forma similar, um ponto [x,y,w]&gt; em coordenadas
homogêneas é mapeado para o espaço euclidiano através da divisão [x/w,y/w]&gt;.

Uma reta que contém o ponto x = [x,y,w]&gt; definida pela equação ax+by +cw = 0
pode ser representada pelo vetor

l =

?
????
a

b

c

?
???? , (4.2)

obtendo assim a relação
l&gt;x = 0. (4.3)



Capítulo 4. Fundamentos 33

A partir da Eq. 4.3, é determinada a intersecção entre duas retas l e l? como l × l?.
De forma similar, a reta que passa pelos pontos x e x? é calculada como x × x?.

A intersecção de retas paralelas no espaço euclidiano possui uma representação
na geometria projetiva e é dada pelos pontos com coordenada w = 0. Os pontos em que
w = 0 são chamados de pontos no infinito e formam a reta do infinito [0, 0,c]&gt;. Note que o
produto [0, 0,c][x,y, 0]&gt; = 0, ou seja, pontos no infinito pertencem à reta do infinito. Uma
interpretação para o espaço projetivo é que ele é a composição do espaço euclidiano com a
reta do infinito.

Até então foi descrita a geometria projetiva planar, denotada por P2. De forma
análoga podemos definir P3 de modo que um ponto é representado por quatro coordenadas
[x,y,z,w]&gt; e o vetor [a,b,c,d]&gt; corresponde a um plano.

4.2.1.2 Transformações projetivas

As transformações projetivas ou homografias representam as perspectividades, ou
seja, o efeito produzido ao se observar uma cena de um único ponto. Para transformar um
ponto x em x? através da homografia H, utiliza-se a relação

x? =

?
????
h11 h12 h13

h21 h22 h23

h31 h32 h33

?
???? x = Hx, (4.4)

onde x em x? são expressos em coordenadas homogêneas e pertencem ao P2. Como x e x?

estão descritos em coordenadas homogêneas, a igualdade da Eq. 4.4 é verdadeira a menos
de uma escala.

A homografia consiste em uma transformação linear no espaço projetivo, porém
ao mapear o ponto para coordenadas não homogêneas, realiza-se uma operação de racio-
nalização (divisão por w). Logo, homografias são transformações não lineares no espaço
euclidiano. Por fim, homografias preservam apenas a razão de razões (cross ratio) de
comprimentos em uma linha.

Um subconjunto das homografias são as afinidades, que apresentam comportamento
linear no espaço euclidiano. Um mapeamento afim HA que mapeia o ponto x em x? é
escrito como

x? =

?
????
h11 h12 h13

h21 h22 h23

0 0 1

?
???? x = HAx. (4.5)

As afinidades englobam translações, reflexões, escalas, rotações e cisalhamentos. Estas
transformações não preservam ângulos e distância entre dois pontos, porém preservam o
paralelismo entre retas e a razão de comprimentos e áreas.



Capítulo 4. Fundamentos 34

Embora as transformações apresentadas correspondam ao P2, elas são facilmente
generalizadas para o Pn, mantendo todas as propriedades citadas anteriormente.

4.2.2 Modelo de câmera pinhole

Matematicamente, uma imagem é formada através da projeção de pontos 3D,
pertencentes a um objeto, por exemplo, em pontos 2D da imagem. O modelo de projeção
que se aplica à grande maioria das câmeras existente é o modelo pinhole. Neste modelo
os pontos são projetados sobre o plano de projeção segundo a igualdade a menos de uma
escala

x = KR[I|? C]X = PX, (4.6)

onde x é o ponto da imagem e X é o ponto no espaço 3D, ambos em coordenadas
homogêneas. A matriz P é chamada de matriz de projeção por encapsular toda informação
necessária para projetar um ponto na imagem e pode ser decomposta nas matrizes K, R e
no vetor C.

A matriz R e o vetor C são chamados de parâmetros extrínsecos da câmera e
determinam a posição e orientação da câmera no espaço. R é uma matriz de rotação 3×3 e
o vetor C corresponde ao centro de câmera. O conjunto dessas duas informações também é
chamado de pose. O vetor de translação t = ?RC representa o centro de câmera expresso
no sistema de coordenadas de câmera.

A matriz K encapsula os parâmetros intrínsecos da câmera na forma

K =

?
????
fx 0 xc
0 fy yc
0 0 1

?
???? . (4.7)

O foco é a distância entre o plano de projeção e o centro da câmera. Como muitas câmeras
não possuem os pixels quadrados, utiliza-se um valor de foco fx no eixo x diferente do
foco fy no eixo y. A interseção entre o eixo ótico (dado pela última linha de R) e o plano
de projeção determina o ponto [xc,yc]&gt;, chamado de ponto principal.

As câmeras convencionais possuem um conjunto de lentes pelas quais os raios de
luz refratam. A variação da direção dos raios de luz provocam efeitos de distorção radial e
tangencial na imagem, que apresentam comportamento não linear (SZELISKI, 2010). A
abordagem convencional para tratar estas distorções é removê-la a partir da calibração
dos parâmetros de distorção e assim obter uma imagem que segue o modelo pinhole.

4.2.3 Geometria epipolar

A geometria epipolar descreve as propriedades geométricas existentes entre duas
imagens da mesma cena. Ela é independente dos pontos que formam a cena, mas dependente
dos parâmetros intrínsecos e extrínsecos das câmeras.



Capítulo 4. Fundamentos 35

As propriedades epipolares entre duas imagens é encapsulada em uma matriz F
3 × 3 de posto 2 chamada de matriz fundamental. Dado um ponto 3D X projetado na
primeira imagem em x e na segunda imagem em x?, ambos em coordenadas homogêneas,
é sempre respeitada a seguinte relação

x?&gt;Fx = 0. (4.8)

A matriz fundamental também mapeia pontos da primeira imagem em linhas na
segunda imagem e vice-versa. Estas linhas são denominadas linhas epipolares. Dado a linha
epipolar l? = Fx na segunda imagem, o ponto x? pertence a l? já que x?&gt;l? = x?&gt;Fx = 0.
De forma análoga, podemos definir l = F&gt;x? como a linha epipolar na primeira imagem.

4.2.4 Retificação estéreo

Retificação de imagens estéreo é muito utilizada em problemas de estabelecimento
de correspondência estéreo. O procedimento de retificação garante que os pontos corres-
pondentes x = [x,y, 1]&gt; e x? = [x?,y?, 1]&gt; em cada imagem sejam sujeitos a

y = y?. (4.9)

Em uma imagem digital é análogo dizer que os pontos x e x? estarão na linha da matriz
de pixels de mesmo índice. A retificação simplifica o estabelecimento de correspondências
estéreo, pois facilita o processo de busca em uma dimensão.

Retificação estéreo consiste na transformação da primeira e segunda imagens pelas
homografias retificantes H e H?, respectivamente. Duas imagens são ditas retificadas se a
matriz fundamental entre as imagens for igual a

F? =

?
????

0 0 0
0 0 1
0 ?1 0

?
???? . (4.10)

Observe que x?&gt;F?x = y? ?y = 0, corroborando assim a igualdade da Eq. 4.9.

Os algoritmos para calcular as homografias retificantes se dividem em duas classes:
calibrados e não calibrados. Aqueles que possuem o conhecimento da calibração das câmeras
a priori são denominados calibrados, como (FUSIELLO; TRUCCO; VERRI, 2000). Os
algoritmos não calibrados utilizam correspondências estéreo para estimar as homografias,
como (FUSIELLO; IRSARA, 2008; HARTLEY, 1998; LOOP; ZHANG, 1999). Como no
escopo deste trabalho, o par estéreo utilizado é previamente calibrado, aplica-se a primeira
classe de algoritmos.

4.2.5 Relação entre projeções de pontos coplanares

Se um conjunto de pontos 3D pertencem a um plano ?, suas projeções na primeira
e segunda imagem são relacionadas por uma homografia H. Ou seja, dado o ponto x na



Capítulo 4. Fundamentos 36

primeira imagem e x? na segunda, obtemos a relação

x? = Hx. (4.11)

Essa propriedade é explorada amplamente em rastreamento de planos, onde o movimento
da câmera é estimado a partir da homografia entre planos correspondentes em duas imagens
(DAME; MARCHAND, 2010; BENHIMANE; MALIS, 2004).

A homografia H pode ser determinada através do plano e das matrizes de projeção
das câmeras segundo a equação

H = K?
(

R ? tn&gt;/d
)

K?1, (4.12)

onde ? = [n&gt;,d]&gt; corresponde ao plano e as matrizes de projeções da câmera esquerda e
direita são dadas respectivamente por K[I|0] e K?[R|t].

Um caso particular da matriz H é obtido quando as imagens estão retificadas. Dada
a restrição epipolar na Eq. 4.8, temos que

x?&gt;Fx =

(Hx)&gt;Fx =

x&gt;H&gt;Fx = 0.

(4.13)

Se os pontos x e x? tiverem sido retificados, a matriz fundamental é dada por F? na Eq.
4.10. Sendo a matriz H formada por elementos h1, . . . ,h9 (como na Eq. 4.4), é estabelecido
a partir da Eq. 4.13 que

?h7xy ?h8y2 ?h9y + h4x + h5y + h6 = 0, (4.14)

onde x = [x,y, 1]&gt;.

Para satisfazer a Eq. 4.14, para todo x e y pertencentes a R é necessário que
h4 = h6 = h7 = h8 = 0, h9 = h5 e os valores de h1, h2 e h3 sejam livres. Dessa forma, a
homografia que relaciona as projeções de pontos de um plano quando as imagens estão
retificadas tem a forma

H =

?
????
a b c

0 1 0
0 0 1

?
???? , (4.15)

onde h1, h2 e h3 foram substituídos por a, b e c, respectivamente. Logo, neste caso, H é
uma transformação afim que modifica apenas a coordenada x de um ponto.

Essa particularidade é explorada no Capítulo 6 para relacionar os pontos da projeção
do EMD, que é uma curva planar, nas duas imagens. Esta curva por sua vez é modelada
como uma NURBS.



Capítulo 4. Fundamentos 37

4.3 NURBS
NURBS (Non Uniform Rational B-Spline) é a generalização das curvas de Bézier

e B-splines; e são amplamente usadas em CAD (Computer Aided Design), computação
gráfica e ajuste de curvas (curve fitting). Um dos pontos positivos deste tipo de função é
sua suavidade e de representação fácil e intuitiva através de pontos de controle.

4.3.1 Definição

NURBS são funções divididas por partes, onde cada parte é um polinômio racional
de grau p. As junções são determinadas através do particionamento do domínio em nós,
onde a cada p + 1 nós tem-se uma polinomial racional. No encontro dos nós é obtida uma
continuidade Cp?1.

Dado um conjunto crescente de m nós ti, i = 0, . . . ,m? 1 e ? pontos de controle
qi = [qix,qiy,qiw]&gt;, i = 0, . . . ,? ? 1, uma curva NURBS de grau p no plano é dada pela
função racional

?(t;{qi}) =

?
???
???1

i=0 N
i
p(t)qiw qix???1

i=0 N
i
p(t)qiw???1

i=0 N
i
p(t)qiw qiy???1

i=0 N
i
p(t)qiw

?
??? , (4.16)

onde Nip(t) é a função de base definida como

Ni0(t) =

???
??

1, se ti ? t &amp;lt;ti+1
0, caso contrário

Nij(t) =
t? ti
ti+j ? ti

Nij?1(t) +
ti+j+1 ? t
ti+j+1 ? ti+1

Ni+1j?1(t).

(4.17)

Nesta dissertação, o conjunto de nós será determinado como ti = i. Esta parametri-
zação é simples e mais eficiente computacionalmente. Entretanto, é possível representar as
mesmas curvas que uma parametrização arbitrária (respeitando ti+1 ? ti), exceto curvas
com descontinuidades, ou seja, quando ti = ti+1.

Essa é a representação padrão para NURBS, porém nesta dissertação, será empre-
gada uma formulação um pouco diferente. A Eq. 4.16 é redefinida como

??(t;{q?i}) =

?
???
???1

i=0 N
i
p(t)q?ix???1

i=0 N
i
p(t)qiw???1

i=0 N
i
p(t)q?iy???1

i=0 N
i
p(t)qiw

?
??? , (4.18)

onde

q?i =

?
????
q?ix

q?iy

q?iw

?
???? =

?
????
qiwq

i
x

qiwq
i
y

qiw

?
???? . (4.19)



Capítulo 4. Fundamentos 38

A partir desta representação, os pontos de controle da NURBS são representados
em coordenadas homogêneas e não há um parâmetro que se refere especificamente a
um peso. Logo, um ponto da curva em coordenadas homogêneas é dado em função da
combinação linear dos pontos de controle q?i. Ambas as formas de representação são
facilmente intercambiáveis através da Eq. 4.19.

Nesta notação, uma NURBS no Rn, por exemplo, pode ser tratada como uma
B-spline no Pn. Transformações como homografias e projeções em perspectivas podem ser
realizadas linearmente no espaço projetivo utilizando os pontos de controle. Ao mapear a
curva do espaço projetivo para o espaço euclidiano, é então realizada uma operação de
racionalização como na Eq. 4.18.

Uma forma apropriada de reescrever a Eq. 4.18 é através do produto matricial

??(t; q) = qN(t), (4.20)

tal que os pontos de controle são as colunas da matriz q, ou seja,

q =
[
q0 q1 . . . q??1

]
, (4.21)

e

N(t) =

?
???????
N0p (t)
Nip(t)

...
N??1p (t)

?
??????? . (4.22)

Note que o ponto avaliado pela função ??(t; q) é dado em coordenadas homogêneas,
e ao mapear-se este ponto para o espaço euclidiano realiza-se a operação de racionalização.
Essa representação alternativa facilita a utilização de NURBS em coordenadas homogê-
neas. Isso permite demonstrar intuitivamente o que acontece quando uma NURBS sofre
transformações projetivas, como detalhado na próxima subseção. No decorrer do texto,
menções a NURBS serão feitas utilizando a representação alternativa adotada por esta
dissertação.

Até o momento foi definido NURBS como curvas planares, porém facilmente
estende-se os conceitos para representar curvas no espaço a partir de pontos de controle
do P3.

4.3.2 Invariância a transformações projetivas

A invariância a transformações projetivas e projeções em perspectiva é uma pro-
priedade de NURBS e será aplicada no Capítulo 6, quando a proposta do algoritmo de
reconstrução de curvas será descrita.



Capítulo 4. Fundamentos 39

Se for aplicada uma homografia H a um ponto qualquer x de um NURBS ?(t; q)
quando t = ? obtêm-se que um ponto x? na curva transformada é dado por

x? = Hx

= H?(?; q)

= HqN(?)

= q?N(?)

= ?(?; q?),

(4.23)

onde q são os pontos de controle organizados em uma matriz.

Na Eq. 4.23 é mostrado que aplicar uma homografia H ao pontos de uma NURBS
com pontos de controle q resulta em uma NURBS com pontos de controle q? = Hq. De
maneira análoga, mostra-se que a projeção de pontos de uma NURBS no espaço em uma
imagem também resulta em uma NURBS. Sendo Q a matriz de pontos de controle da
curva no espaço e P a matriz de projeção da câmera, a NURBS na imagem é governada
pelos pontos de controle q = PQ.

4.4 MÍNIMOS QUADRADOS
Os métodos de rastreamento e reconstrução propostos nessa dissertação são mo-

delados através de mínimos quadrados. O problema de mínimos quadrados consiste em
determinar um vetor de parâmetros x que minimiza a soma quadrada de funções residuais
ri(x), i = 0, . . . ,n? 1 e pode ser escrito através da equação

arg min
?
i

r2i (x). (4.24)

Organizando ri(x) em uma função vetorial, obtém-se a função de custo representada por
r(x) = [r0(x), . . . ,rn?1(x)]&gt;. Logo, a Eq. 4.24 pode ser expressa como minimização da
norma quadrada de r(x), ou seja,

arg min ||r(x)||2. (4.25)

Quando a função r(x) é linear em relação à x, é possível obter uma solução direta
para o problema de mínimos quadrados. Escrevendo o problema na forma Ax = y, define-se
a função de custo como r(x) = Ax ? y e a solução ótima é dada por

x = arg min ||Ax ? y||2 = (A&gt;A)?1A&gt;y. (4.26)

Se a função r(x) não é linear, como é o caso de projeções em perspectiva, deve-se
utilizar métodos numéricos para determinar x. Esses métodos são iterativos e partem
de um palpite inicial x0. O método de Gauss-Newton aproxima r(x) linearmente na



Capítulo 4. Fundamentos 40

vizinhança de xi para calcular o passo iterativo ?i. Tomando a primeira expansão de
Taylor r(xi + ?) ? r(xi) + J?i, onde J é o jacobiano de r(x) e utilizando a Eq. 4.26 tem-se
que

?i = arg min
?
||r(xi + ?)||2

= arg min
?
||r(xi) + J?||2

= ?(J&gt;J)?1J&gt;r(xi).

(4.27)

Dessa forma, o algoritmo pode ser resumido através do passo iterativo

xi+1 = xi ? (J&gt;J)?1J&gt;r(xi). (4.28)

Este método funciona muito bem em problemas simples e quando o palpite inicial
está próximo do mínimo global, porém a convergência não pode ser garantida. Com o
objetivo de garantir estabilidade, o algoritmo de Levenberg-Marquardt (LEVENBERG,
1944; MARQUARDT, 1963) utiliza a abordagem de região de confiança. Este por sua vez
adiciona um parâmetro ? no passo iterativo da Eq. 4.28 criando a equação

xi+1 = xi ?
(

J&gt;J + ? diag(J&gt;J)
)?1

J&gt;r(x). (4.29)

O valor ? controla o tamanho do passo, de forma que um passo menor necessita de mais
iterações para convergir. Além disso, este algoritmo pode descartar um passo e tentar
novamente com um valor diferente de ?. Isto torna a convergência do algoritmo mais lenta,
porém evita que o mesmo divirja.

4.5 AJUSTE DE CURVA
Ajuste de curva (curve fitting) é o processo de reconstruir uma curva ou função

analítica a partir de um conjunto de pontos amostrais fornecidos como entrada. Estes
pontos geralmente possuem ruídos, sendo necessário encontrar uma resposta aproximada.
Curvas muito utilizadas para este fim são B-splines devido à sua suavidade. B-splines são
um caso particular de NURBS em que os pontos de controle são dados em coordenadas
não homogêneas (ou última coordenada igual a 1). Nesta Seção será descrito o ajuste em
B-spline, conceito utilizado no Capítulo 6 para descrever o algoritmo de reconstrução da
curva.

Dado um conjunto de n pontos amostrais xi, i = 0, . . . ,n? 1 o ajuste pode ser
modelado pela minimização da função de custo?

i

d(?(t, q), xi)2, (4.30)

sendo d(·, ·) a distância euclidiana entre um ponto e uma curva. A curva é dada por ?(t, q),
uma B-spline parametrizada por t e governada pelos pontos de controle encapsulados na
matriz q.



Capítulo 4. Fundamentos 41

Figura 5 – A projeção do ponto amostral x na curva é o ponto da curva x? mais próximo
de x. A distância entre os dois pontos é dada por e. O vetor que liga os pontos
x e x? é normal ao vetor tangente t da curva no ponto x?.

?

 ?
?

?

?

Fonte: O autor.

A distância entre um ponto x e uma curva ?(t, q) é dada pela distância entre x
e sua projeção na curva x?, como ilustrado na Figura 5. Porém computar esta distância
é inviável devido à sua complexidade. Por esse motivo, estipula-se uma parametrização
ti para cada ponto amostral para se obter uma aproximação da projeção dos pontos ao
longo da curva, de forma que x?i = ?(ti, q). Então a Eq. 4.30 é reescrita como

?
i

dP (?(ti; q), xi)2, (4.31)

onde dP (·, ·) se torna a distância euclidiana entre dois pontos.

Uma maneira de obter uma solução linear para Eq. 4.31 é parametrizar aproxima-
damente os pontos amostrais em ti e utilizar regressão linear para determinar q. Existem
diversos métodos para este fim. Dentre os mais tradicionais, destacam-se a parametriza-
ção uniforme (BOOR, 1978), das cordas (LÜ, 2009) e centrípeta (HOSCHEK; LASSER;
SCHUMAKER, 1993). Também existem métodos mais complexos como parametrização
exponencial (LEE, 1989), universal (LIM, 1999) e híbrida (AHMED et al., 2004). Uma
comparação dentre esses métodos é fornecida em (HARON et al., 2012).

Para obter a solução ótima para a Eq. 4.31, utiliza-se o método alternante, que
consiste em iterativamente estimar os pontos de controle e em seguida ajustar os valores
dos parâmetros ti (FARIN, 2014). Porém esta abordagem apresenta convergência linear
(WANG; POTTMANN; LIU, 2006) requerendo que sejam realizadas muitas iterações.

4.6 CONSIDERAÇÕES FINAIS
Este capítulo apresentou os principais fundamentos para o entendimento e con-

textualização da proposta desta dissertação de mestrado, apresentada nos dois próximos
capítulos. O Capítulo 5 emprega os conceitos sobre geometria projetiva e o modelo pinhole



Capítulo 4. Fundamentos 42

para definir o modelo de projeção do duto. O Capítulo 6 realiza a reconstrução da curva
utilizando os conceitos de geometria epipolar e ajuste de curva. Otimização não linear é
utilizada por ambos os capítulos para solucionar problemas de mínimos quadrados.



43

5 TÉCNICA PROPOSTA DE RASTREA-
MENTO DE DUTOS

Este capítulo apresenta uma proposta de técnica de rastreamento de dutos. O
objetivo principal desta técnica é determinar a posição do eixo medial do duto na imagem
a partir de um palpite inicial, que pode ser obtido do quadro anterior ou através de uma
etapa de inicialização. Uma formulação geral do problema é dada na Seção 5.1. Com base
no modelo de projeção apresentado na Seção 5.2, propõe-se uma transformação na imagem
na Seção 5.3 com o objetivo de tornar o algoritmo mais simples e eficiente. O rastreamento é
efetuado identificando na imagem a região em que o duto foi projetado com base no cenário
do problema. Utilizando principalmente as características de pintura e de iluminação
da cena, o algoritmo proposto é dividido em duas etapas: rastreamento longitudinal,
apresentado na Seção 5.4, e rastreamento transversal, apresentado na Seção 5.5. Com
o intuito de obter um resultado acurado e eficiente, foram realizadas as aproximações
enumeradas na Seção 5.6. Por fim, a Seção 5.7 descreve os passos do algoritmo proposto.

5.1 FORMULAÇÃO
A abordagem proposta utiliza características do problema para encontrar uma

região R que corresponde ao duto na imagem I. Essa região tem a forma aproximada de
uma fita de espessura conhecida cujo eixo é governado pela projeção x(t) do Eixo Medial
do Duto (EMD) na imagem. A espessura é calculada a partir do raio do duto (dado como
entrada) e sua posição no espaço. Já a região R pode ser calculada no quadro atual do
vídeo com base na etapa de inicialização da ferramenta ou no resultado da reconstrução
do quadro anterior.

Figura 6 – Características do corte longitudinal e transversal utilizadas para realizar o
rastreamento em duas etapas.

(a) Imagem com cortes.

Fonte: Petrobras.

Comprimento (pixels)
0 20 40 60 80 100

In
te

n
si

d
a

d
e

0.4

0.6

0.8

1

(b) Corte longitudinal.

Fonte: O autor.

Comprimento (pixels)
0 20 40 60

In
te

n
si

d
a

d
e

0.4

0.6

0.8

1

(c) Corte transversal.

Fonte: O autor.



Capítulo 5. Técnica proposta de rastreamento de dutos 44

Figura 7 – Ilustração da entrada e saída do algoritmo de rastreamento. Na Figura 7a
a curva x(t), inicializada a partir do quadro anterior ou da inicialização da
ferramenta, é ajustada longitudinalmente e transversalmente para representar
corretamente o EMD. O resultado é a curva x?(t) na Figura 7b.

?

?

?(?)

(a) Entrada do rastreamento.

?

?

??(?)

(b) Saída do rastreamento.

Fonte: O autor.

Outra característica que o algoritmo utiliza são as condições de iluminação descritas
na Seção 2.6. Os pixels pertencentes ao duto tendem a aparecer na imagem com maior
intensidade do que os demais. Logo é plausível definir que a probabilidade de um pixel na
posição x = [x,y]&gt; pertencer ao duto pode ser associada à sua intensidade na imagem.

Levando em consideração essas duas características, o objetivo do rastreamento
pode ser resumido em maximizar a probabilidade de R representar o duto, ou seja,
maximizar a intensidade dos pixels (ou a energia) contidos em R. Sendo assim, busca-se
determinar uma nova curva x?(t) que descreva a projeção do EMD, tal que

x? = arg max
x?

?
I(R(x?)). (5.1)

Como a iluminação não é uniforme, não necessariamente os pixels de maior inten-
sidade da imagem pertencerão ao duto, porém é plausível admitir que localmente essa
premissa é válida. A solução da Eq. 5.1, embora intuitiva, falha na prática, pois a curva
x(t) tenderia a apresentar um comportamento instável. O máximo global do problema
consiste na região R reduzida a um tamanho muito pequeno localizada sobre os pixels de
maior intensidade da imagem. Para contornar esse problema, o algoritmo foi estratificado
em duas partes: rastreamento longitudinal e rastreamento transversal.

No rastreamento longitudinal o objetivo é seguir o segmento de duto com base na
sua textura longitudinal formada por regiões claras e escuras, como ilustrado no corte da
Figura 6b. O padrão de pintura no eixo longitudinal permite determinar duas extremidades
para a curva x(t). Após as extremidades serem encontradas, a curva x(t) é ajustada pelo
rastreamento transversal ao longo da direção transversal utilizando a ideia de maximizar



Capítulo 5. Técnica proposta de rastreamento de dutos 45

Figura 8 – A região R dada pela interpolação da curva superior x+(t) e inferior x?(t) e
parametrizada por s ao longo da direção transversal e t ao longo da direção
longitudinal.

? ?
?(?)

?(????)

?? ? = ?(0,?)

?+ ? = ?(1,?)
?(????)

Fonte: O autor.

a energia em R, de acordo com a Eq. 5.1. A Figura 6c ilustra que o duto localiza-se na
região do gráfico onde estão os pixels de maior intensidade.

Para apresentar os algoritmos de rastreamento propostos, é preciso formular o
comportamento matemático da região R, como descrito na Seção 5.2. Esta formulação
permite modelar uma transformação da imagem na Seção 5.3 que modifica o domínio da
imagem para os parâmetros s e t. Assim, o rastreamento longitudinal pode ser realizado na
direção horizontal da imagem transformada enquanto o transversal é realizado na direção
vertical.

O resultado do algoritmo de rastreamento está ilustrado na Figura 7. A entrada
consiste em um quadro do vídeo e a projeção do EMD x(t) calculada no quadro anterior
ou na etapa de inicialização (Figura 7a). Devido ao movimento do duto realizado entre os
quadros, a curva está deslocada tanto da direção longitudinal quanto na direção transversal.
A Figura 7b ilustra o resultado do algoritmo, que consiste na curva x?(t) corretamente
ajustada ao duto. Esta figura será usada ao longo do texto para ilustrar os passos do
algoritmo.

5.2 REGIÃO DE PROJEÇÃO DO DUTO
O duto pode ser considerado um cilindro generalizado (ABBENA; SALAMON;

GRAY, 2006) cujo eixo medial, o EMD, é uma curva X(t), definida no intervalo tmin ?
t ? tmax. Sua superfície é formada por circunferências normais e centradas em cada ponto
do EMD. Desta forma, cada circunferência constitui uma seção transversal do duto. A
projeção de todas as circunferências na imagem gera a região de projeção do duto R.

A região R pode ser interpretada como uma região delimitada por duas curvas:
uma superior x+(t) e uma inferior x?(t), como ilustrado na Figura 8. Sendo assim, a
equação R que descreve a região R é determinada a partir de uma interpolação linear



Capítulo 5. Técnica proposta de rastreamento de dutos 46

Figura 9 – As curvas X+ e X? estão sobre a superfície do duto e são formadas pelos pontos
de tangência no duto a partir dos raios que passam pelo centro de projeção C.

?? ?

?+ ?

?? ?

Fonte: O autor.

entre as duas curvas:

R(s,t) = (1 ?s) x?(t) + s x+(t)

= x?(t) + s v(t),
(5.2)

onde
v(t) = x+(t) ? x?(t) (5.3)

A região está definida entre os intervalos tmin ? t ? tmax e 0 ? s ? 1 e parametrizada
longitudinalmente por t e transversalmente por s. A projeção do EMD na imagem, denotada
por x(t), localiza-se entre a curva superior e inferior.

As curvas x+(t) e x?(t) podem ser calculadas a partir de X(t) utilizando informações
da câmera e do raio do duto. Para isso, define-se como X+(t) e X?(t) duas curvas sobre
a superfície do duto formadas pelos pontos tangentes aos raios de luz que convergem no
centro da câmera C, como ilustrado na Figura 9. As curvas superiores e inferiores são
respectivamente as projeções de X+(t) e X?(t) na imagem.

5.3 TRANSFORMAÇÃO DA IMAGEM
A transformação da imagem é similar à retificação de imagens estéreo, pois tem

o objetivo de simplificar cálculos e acelerar os algoritmos. Na retificação estéreo, as
linhas epipolares da imagem se tornam paralelas ao eixo das abscissas facilitando o
estabelecimento de correspondências estéreo. Na transformação proposta, os vetores v(t)
se tornam paralelos ao eixo das ordenadas enquanto as curvas x+(t) e x?(t) se tornam
paralelas ao eixo das abscissas. A transformação origina uma imagem T , sendo

T(u,s) =
?
I(R(s,t)) onde u = L(t) (5.4)

e
L(t) =

? t
tmin

?????
?????dx(?)d?

?????
?????d?. (5.5)

A transformação modifica o domínio espacial da imagem para a parametrização da
região nas direções transversal e longitudinal. Dessa maneira, o rastreamento longitudinal



Capítulo 5. Técnica proposta de rastreamento de dutos 47

Figura 10 – Ilustração da transformação da imagem na Figura 7a. Os eixos das abscissas
e ordenadas passam a ser os parâmetros s e t. Note que se não houvesse a
extrapolação, o trecho de duto acima da reta s = 1 não estaria contido na
imagem. A transformação passa a ideia de uma imagem na qual o duto foi
esticado.

1 + ??

?

?
????

???? ? ?? ???? + ??????

? = 1

? = 0

-??

1

0

Fonte: O autor.

deve ser realizado ao longo da direção horizontal e o transversal ao longo da direção
vertical. A parametrização de u, definida no intervalo umin ? u ? umax, em função do
comprimento da curva garante que seja mantido seu comprimento após a transformação.

A transformação cria distorções significativas em partes da imagem distantes da
curva, então recomenda-se aplicá-la apenas na vizinhança da curva. Entretanto é preciso
encontrar o duto no quadro atual e este, provavelmente, se moveu um pouco em relação
ao quadro anterior. Para manter o duto dentro dos limites da imagem transformada, os
intervalos dos parâmetros s e u devem ser extrapolados por ?s e ?u, tal que a imagem
transformada seja definida no intervalo umin ? ?u ? u ? umax + ?u e ??s ? s ? 1 + ?s. A
extrapolação é geralmente pequena, já que tanto a câmera quanto os dutos estão sujeitos
a movimentos lentos.

Dentre as vantagens da transformação, estão: redução considerável das dimensões
da imagem tornando a aplicação de filtros mais eficiente; pré-computação da operação de
raiz quadrada em 5.4; e não ser mais preciso avaliar R(s,t). Aplicando-se a transformação
na imagem da Figura 7a obtém-se a correspondente na Figura 10. Note que o domínio x
e y foi mapeado para s e t e, devido ao movimento do duto, foi necessário extrapolar os
intervalos para que a imagem ainda contivesse o duto.

5.4 RASTREAMENTO LONGITUDINAL
O rastreamento longitudinal consiste em determinar um novo intervalo [u?min,u?max]

que define as extremidades do duto na direção longitudinal da região R. O algoritmo
utiliza o padrão marcado sobre o duto para garantir que um mesmo segmento esteja sendo
rastreado ao longo do tempo. Como o padrão é composto por regiões claras seguidas de
regiões escuras, estabeleceu-se que as extremidades do duto devem permanecer sobre as



Capítulo 5. Técnica proposta de rastreamento de dutos 48

Figura 11 – Ilustração da aplicação do rastreamento longitudinal da Figura 10. Note que
atualizou-se umin para u?min e umax para u?max de forma que as extremidades
do duto fiquem aproximadamente no centro das regiões brancas do padrão.

?

?
????????

?

????
? ????

? = 1

? = 0

1

0

Fonte: O autor.

regiões claras. Observe na Figura 6b que a forma das regiões brancas ao longo do eixo
longitudinal é bem definida.

Portanto, o rastreamento é realizado maximizando a energia contida numa janela
localizada na vizinhança das extremidades da curva na imagem T , ou seja,

u? = arg max
u?

? u?+?
u???

? 1
0
T(s,u)2dsdu, (5.6)

onde ? define a metade da largura da janela na direção longitudinal. A Eq. 5.6 aplica-se a
ambas extremidades do duto e pode ser resolvida pelo método de mínimos quadrados. Note
que como há uma operação de raiz quadrada na Eq. 5.4, a Eq. 5.6 otimiza o somatório
das intensidades da imagem I na vizinhança das extremidades.

Se a janela for discretizada em si=0,1,... no intervalo [0, 1] e ?uj=0,1,... no intervalo
[??,?] e aplicando o método de Gauss-Newton (Seção 4.4) para resolver Eq. 5.6, obtém-se

u?k+1 = u
?
k +

?
i

?
j T(si,u?k + ?uj)Tu(si,u?k + ?uj)?

i

?
j T(si,u?k + ?uj)2

, (5.7)

onde Tu(s,u) corresponde à derivada de T(s,u) na direção de u. Para determinar a
extremidade esquerda do duto, deve-se inicializar u?0 = umin. De forma análoga, deve-se
tomar u?0 = umax para encontrar a outra extremidade.

Aplicando-se o rastreamento longitudinal na imagem da Figura 10 obtém-se o
resultado ilustrado na Figura 11, onde as extremidades do quadro anterior, dadas por umin
e umax foram rastreadas para u?min e u?max, respectivamente. Observe que o rastreamento
longitudinal deve ser executado antes do transversal para definir a região do duto que
deve ser ajustada na direção transversal. O próximo passo é acertar as curvas pontilhadas
na borda do duto.



Capítulo 5. Técnica proposta de rastreamento de dutos 49

5.5 RASTREAMENTO TRANSVERSAL
Como a projeção do duto é formada por pixels mais claros que o background, o

rastreamento transversal busca maximizar a energia de dentro da região R, na imagem
transformada T ao longo da dimensão s. Isto é feito ajustando a curva superior e in-
ferior através de uma função ?(u; q), definida no intervalo [u?min,u?max]. Para obter um
ajuste suave, utilizou-se B-spline, Seção 4.3, onde q consiste em ? pontos de controle
unidimensionais.

Portanto, o problema do rastreamento transversal é encontrar q?, tal que

q? = arg max
q?

? 1
0

? u?max
u?
min

w(s)T(s + ?(u; q?),u)2duds, (5.8)

onde w(s) é uma função de pesos definida na Seção 5.5.1. De forma similar ao rastreamento
longitudinal, o rastreamento transversal maximiza a soma das intensidades dos pixels da
imagem I contidos na região R. Como a transformada da imagem possui uma operação
de raiz quadrada na Eq. 5.4, o problema pode ser transformado em mínimos quadrados
cuja solução é apresentada na Seção 5.5.2.

5.5.1 Função de pesos

O algoritmo de rastreamento proposto se baseia na premissa de que o duto tem
raio constante ao longo do comprimento e uma marcação que segue o padrão intercalado
de segmentos brancos e pretos. Porém é inerente ao procedimento de instalação haver
equipamentos fixados no duto, como boias e amarras. Além disso, danos à superfície do
duto podem remover a pintura. Estes fatores tendem a afetar principalmente as bordas da
região R, tornando a espessura do duto na imagem maior ou menor que a espessura da
região. Nesse caso o rastreamento transversal não alinhará corretamente a região R com o
duto e pode apresentar comportamento instável.

Para minimizar esse problema, o rastreamento adota um ponderamento na direção
transversal de forma que os pixels da borda possuam menor peso na função de custo 5.8,
tornando-o mais robusto. Os pesos são definidos em função de s como

w(s) =

??????
?????

1 ? ((s??)/?)2, se s &amp;lt;?;

(1 ?s)/?, se s &gt; 1 ??;

1, caso contrário.

0 ? ? ? 1. (5.9)

A função de peso tem comportamento crescente quando 0 ? s ? ?, constante em
0 ? s ? 1 ? ? e decrescente em 1 ? ? ? s ? 1. Dessa forma, os maiores pesos estão
no centro da projeção da seção transversal enquanto os menores estarão localizados nas
bordas.



Capítulo 5. Técnica proposta de rastreamento de dutos 50

5.5.2 Solução utilizando mínimos quadrados

Dada a discretização dos pixels do duto na imagem T em si, i = 0, . . . ,n? 1 e uj,
j = 0, . . . ,m? 1, onde 0 ? si ? 1 e u?min ? uj ? u?max, a Eq 5.8 pode ser reescrita como

m?1?
j=0

n?1?
i=0

(
w(si) T (i,j)

)2
(5.10)

e resolvida através do método de mínimos quadrados. Para simplificar a notação, T(si +
?(uj; q)) será denotado como T (i,j). O passo iterativo é calculado como ?q = (J&gt;J)?1J&gt;r,
onde J é a matriz jacobiana da Eq. 5.10 e r é o vetor de residuais. Sendo J(i,j) a (m×i + j)-
ésima linha de J, definimos

J(i,j) =
?w(si) T (i,j)

?q

= w(si)
?T (i,j)

?s

??(uj; q)
?q

= w(si)
?T (i,j)

?s

?qN(ui)
?q

= w(si)T (i,j)s N(ui),

(5.11)

onde T (i,j)s é a derivada de T (i,j) na dimensão de s e N(u) é a função de base segundo Eq.
4.17.

Logo, maximiza-se a Eq. 5.10 através da iteração

q?k+1 = q
?
k + ?q (5.12)

e inicializando q?0 = 0, tendo em vista que o ponto de partida é dado pelo resultado obtido
no quadro anterior.

A matriz J pode atingir dezenas de milhares de linhas devido à quantidade de
pixels contidos em R e tornar o cálculo de ?q muito custoso computacionalmente em um
algoritmo iterativo. Porém ao realizar a simplificação

J&gt;J =
?
j

?
i

N(uj)N(uj)&gt;w(si)(T (i,j)s )
2 =

?
j

N(uj)N(uj)&gt;
?
i

w(si)(T (i,j)s )
2 (5.13)

reduz-se o custo do produto matricial de m×n×?2 para m× (n + ?2). Ao se colocar o
termo

?
i w(si)(T (i,j)s )2 em evidência evita-se a repetição desnecessária de muitos cálculos.

Além disso as funções de base N(ui) são constantes ao longo das iterações, podendo assim
ser computadas previamente. Por fim, a matriz J&gt;J possui muitos elementos nulos se ? for
muito maior que o grau do polinômio. De forma análoga, as mesmas simplificações podem
ser adotadas em

J&gt;r =
?
j

?
j

N(uj)w(si)T (i,j)s T
(i,j) =

?
j

N(uj)
?
i

w(si)T (i,j)s T
(i,j). (5.14)



Capítulo 5. Técnica proposta de rastreamento de dutos 51

Figura 12 – Esquemático da aplicação do rastreamento longitudinal na Figura 10. Observe
que atualiza-se umin e umax para u?min e u?max de forma que as extremidades
do duto fiquem sobre as regiões brancas do padrão.

?

?
????
?

????
?

? = 1 + ?(?;??)

? = ?(?; ??)

1

0

Fonte: O autor.

Após computar o ajuste da curva superior e inferior, é preciso ajustar a projeção do
EMD. Para isso considera-se que o eixo medial sofreu o mesmo deslocamento na imagem
que a curva superior e inferior. Esta aproximação é admissível, pois o movimento do duto
e da câmera entre dois quadros do vídeo são muito pequenos. Logo

x?(t) = x(t) + ?(L(t); q?)v(t). (5.15)

determina a equação da curva rastreada.

A Figura 12 ilustra o resultado do rastreamento transversal se este fosse realizado
na Figura 11. As linhas pontilhadas representam a curva superior e inferior que foram
ajustadas para maximizar a energia da região contida entre elas. A partir da Eq. 5.15 o
ajuste encontrado pode ser mapeado para o eixo medial e o resultado x? pode ser obtido
na imagem da Figura 7b.

5.6 APROXIMAÇÕES
O algoritmo de rastreamento faz uso de algumas aproximações para obter uma

formulação simples e eficiente. São elas:

• A espessura de R é constante entre dois quadros consecutivos. Entretanto, se o duto
se afastar ou se aproximar, esta espessura sofre variação;

• A cada iteração do rastreamento transversal Eq. 5.12 a forma da curva é modificada,
porém os vetores v(t) são considerados constantes;

• Admite-se que o deslocamento da curva superior e inferior é o mesmo do EMD na
imagem na Eq. 5.15.



Capítulo 5. Técnica proposta de rastreamento de dutos 52

• A região R é encontrada por uma interpolação linear entre a curva superior e inferior,
porém essa parametrização deveria seguir a projeção das circunferências das seções
transversais na imagem.

Essas aproximações podem ser consideradas aceitáveis porque o movimento relativo
entre o duto e a câmera é muito pequeno entre dois quadros consecutivos. Por exemplo, a
variação na espessura de R seria desprezível. À medida que o rastreamento é realizado,
a reconstrução também atualiza todas as informações consideradas constantes para o
rastreamento (como posição do duto no espaço 3D) permitindo que no quadro seguinte o
rastreamento não sofra acúmulo de erro. Uma alternativa para amenizar essas aproximações
é utilizar pirâmides (ANANDAN, 1989) e computar os dados em cada nível.

5.7 IMPLEMENTAÇÃO
Essa seção tem por objetivo abordar aspectos práticos da implementação do

algoritmo de rastreamento descrito neste capítulo. Um conjunto de passos descrevendo
cada etapa do algoritmo será apresentado. Vale ressaltar que o método descrito pode ser
implementado de diversas formas, e apenas uma dessas está sendo apresentada no contexto
desta dissertação.

1. Calcular a região R.

a) O rastreamento recebe como entrada as calibrações das câmeras, um conjunto
de pontos 2D xi e o plano ?. Os pontos e o plano são referentes ao resultado
da curva no quadro anterior ou da inicialização;

b) Os pontos xi são retroprojetados em ? utilizando a calibração da câmera,
obtendo o conjunto de pontos 3D Xi;

c) Utilizando B-splines, aproximar Xi para uma equação analítica X(t) que repre-
senta o EMD.

d) Definir um conjunto de parâmetro ti para determinar os pontos X?i do EMD e
suas derivadas de forma que se tenha aproximadamente um ponto 3D por pixel
do EMD na imagem. Observe que os conjuntos Xi e X?i podem ter tamanhos
diferentes;

e) Estimar os pontos da curva superior x+i , inferior x
?
i na imagem e a projeção do

EMD x?i.

2. Discretizar sj = ??s + j/l, onde l é a espessura máxima do duto na imagem, e
ui = L(ti) e computar a imagem T utilizando a Eq. 5.4. Empiricamente foi definido
?s = 1 e ?u como sendo um décimo do comprimento da curva na imagem, dado que



Capítulo 5. Técnica proposta de rastreamento de dutos 53

estes valores permitem que a imagem transformada contenha a projeção do duto
mesmo quando ocorrem movimentos rápidos da câmera.

3. Realizar o rastreamento longitudinal e obter u?min e u?max. Recomenda-se utilizar um
valor de ? próximo da metade da espessura do duto na imagem.

4. Realizar o rastreamento transversal para estimar q? considerando a região delimitada
por u?min e u?max.

5. Computar e retornar os pontos x?i = xi? + ?(ti; q?)v(ti).

Foram utilizados dois níveis de pirâmide e em cada nível são executados os passos
descritos acima.

A B-spline utilizada no rastreamento transversal foi definida segundo a Seção
6.5. O grau utilizado foi 3 e o número de pontos de controle foi definido em função do
comprimento l e do diâmetro D, ambos em pixels, do duto na imagem como sendo (?l)/D.
A constante ? foi definida empiricamente como sendo 1.

5.8 CONSIDERAÇÕES FINAIS
Com as simplificações e aproximações aplicadas, o algoritmo apresenta baixo custo

computacional e convergência em poucas iterações. Além disso, é um método facilmente
paralelizável, pois cada pixel pode ser computado independentemente. Uma análise do
número de iterações e tempo de execução será realizada no Capítulo 7, onde são descritos
os experimentos.

Este algoritmo é executado independentemente em cada imagem do par estéreo e
gera para cada imagem um conjunto de pontos 2D que representam a projeção do EMD.
A partir destes pontos, o algoritmo de reconstrução descrito no próximo capítulo estima
uma curva analítica que descreve o EMD no espaço.



54

6 TÉCNICA PROPOSTA PARA RECONS-
TRUÇÃO DE CURVAS PLANARES

Este capítulo descreve a técnica para reconstrução de curvas planares adaptada
para o contexto dessa dissertação. Essa técnica é executada após o rastreamento das
imagens esquerda e direita, que por sua vez, geram um conjunto de pontos 2D amostrais
da projeção do EMD. O objetivo deste capítulo é propor uma técnica que reconstrua uma
curva planar ótima segundo o erro de reprojeção a partir dos pontos de controle.

Para atingir esse objetivo, foi realizada uma adaptação no algoritmo proposto
por Xiao e Li (XIAO; LI, 2005), detalhado na Seção 6.1, utilizando a abordagem de
bundle adjustment (TRIGGS et al., 2000) para reconstrução de NURBS. Baseando-se nas
restrições epipolares de imagens retificadas e na invariância projetiva de NURBS, Xiao e
Li mostraram como otimizar o erro de reprojeção utilizando o algoritmo de Levenberg-
Marquardt. Esta adaptação visa tornar a reconstrução do EMD mais acurada, pois utiliza
a restrição de planaridade da curva.

Como descrito na Seção 2.2, a forma pela qual o duto é suspenso faz com que seu
eixo medial esteja contido em um plano. Sendo assim, o algoritmo de reconstrução explora
essa restrição para obter resultados mais acurados, como explicado na Seção 6.2. A Seção
6.3 apresenta como essa modificação foi adicionada à abordagem de Xiao e Li.

Como os pontos amostrais providos pelo rastreamento são ordenados e igualmente
espaçados, o procedimento de parametrização é simplificado. Porém é preciso levar em
consideração que não necessariamente os mesmos segmentos de curvas são rastreados em
ambas as imagens. Estas questões são tratadas na Seção 6.4 que detalha como deve ser
realizada a parametrização.

A fim de se obter acurácia na geometria da curva reconstruída, a Seção 6.5 detalha
como calcular o número de pontos de controle utilizados na curva. Detalhes do algoritmo
de reconstrução são apresentados na Seção 6.6.

Diversos fatores inerentes ao cenário (distância entre as câmeras e o duto, parâmetros
intrínsecos das câmeras, etc.) influenciam a acurácia da curva reconstruída. A Seção 6.7
realiza uma análise de alguns desses fatores e aborda conclusões fundamentais sobre o
correto posicionamento das câmeras em relação ao duto. Por fim, a Seção 6.8 apresenta as
considerações finais do capítulo.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 55

6.1 RECONSTRUÇÃO ESTÉREO DE NURBS
Como a técnica proposta se baseia no algoritmo de Xiao e Li (XIAO; LI, 2005),

esta seção introduz o algoritmo e a próxima seção apresenta as adaptações realizadas. O
algoritmo de Xiao e Li efetua a reconstrução analítica de uma curva NURBS X(t) = ?(t; Q)
no espaço 3D. O algoritmo recebe como entrada pontos amostrais em um par estéreo
de câmeras calibradas. A matriz Q corresponde aos pontos de controle e os pontos xi,
i = 0, . . . ,n? 1 e x?j, j = 0, . . . ,m? 1 correspondem às amostras da projeção da curva
na imagem esquerda e direita, respectivamente. Os pontos xi e x?j são expressos em
coordenadas homogêneas assim como o contradomínio das funções vetoriais ?(·; ·) e X(·).

A formulação do problema consiste em otimizar a função de custo
?
i

d(x(ti), xi)2 +
?
j

d(x?(tj), x?j)
2, (6.1)

onde x(t) e x?(t) são as projeções da curva X(t) na imagem esquerda e direita, respectiva-
mente. A parametrização de cada ponto amostral é dada por ti e tj ao longo da curva e
d(·, ·) computa a distância euclidiana entre dois pontos em coordenadas homogêneas. Essa
abordagem trata-se de um bundle adjustment, pois minimiza a distância da projeção das
curvas em relação aos pontos amostrais.

De acordo com a Seção 4.3.2, as curvas projetadas x(t) e x?(t) também são NURBS
dado que essa classe de curvas é invariante a projeção em perspectiva. Logo, é estabelecido
que x(t) = ?(t; q) e x?(t) = ?(t; q?), onde q e q? são os pontos de controle das curvas
projetadas. Ainda segundo a Seção 4.3.2, tem-se que q = PQ e q? = P?Q, onde P e P?

correspondem às matrizes de projeção da câmera esquerda e direita, respectivamente.

Como exposto anteriormente, a solução pode ser alcançada otimizando-se a Eq. 6.1
e variando os elementos de Q e os parâmetros ti e tj. Para tornar a função de custo 6.1
mais simples, Xiao e Li propuseram retificar os pontos x e x?, obtendo-se os pontos x? e x??,
respectivamente, para facilitar o uso das restrições epipolares.

Ao considerar que o par de câmeras está calibrado, a retificação das imagens pelo
algoritmo proposto em (FUSIELLO; TRUCCO; VERRI, 2000) é equivalente a posicionar
as câmeras paralelamente e igualar as suas matrizes intrínsecas Dessa forma, definem-se
as matrizes de projeção como

P? =

?
????
fx 0 cx 0
0 fy cy 0
0 0 1 0

?
???? e P?? =

?
????
fx 0 cx ?fx?
0 fy cy 0
0 0 1 0

?
???? , (6.2)

onde fx e fy são os focos da câmera nas direções x e y respectivamente, [cx,cy]&gt; é o ponto
central e ? é a distância entre as duas câmeras.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 56

Projetando cada ponto de controle Qk = [Qkx,Qky,Qkz,Qkw]T , k = 0, . . . ,? ? 1
(correspondente à k-ésima coluna Q) nas imagens através das matrizes de projeções da Eq.
6.2, obtém-se os pontos de controle qk e q?k (que formam as matrizes q e q?) segundo

qk =

?
????
qkx

qky

qkw

?
???? = P?Qk =

?
????
fxQ

k
x + cxQkz

fyQ
k
y + cyQkz
Qkz

?
???? (6.3)

e

q?k =

?
????
q?kx

q?ky

q?kw

?
???? = P??Qk =

?
????
fx(Qkx ??Qkw) + cxQkz

fyQ
k
y + cyQkz
Qkz

?
???? . (6.4)

Observe que devido à restrição epipolar, qky = q?ky e qkw = q?kw . Nesse contexto, a Eq
6.1 é modificada para

?
i

d(?(ti; q), x?i)2 +
?
j

d(?(tj; q?), x??j)
2 (6.5)

e pode ser otimizada utilizando o algoritmo de Levenberg-Marquardt. Como Xiao e Li
sugerem que os pesos qkw devem ser dados pelo usuário, a Eq. 6.5 deve ser minimizada
variando-se os parâmetros qkx, q?kx , qky, ti e tj. As coordenadas q?ky não precisam ser otimizadas
pois são iguais a qky. No total são otimizadas 3? + m + n variáveis e como os parâmetros
ti e tj aparecem apenas em duas equações, o jacobiano da Eq. 6.5 consiste em uma
matriz esparsa. Utilizando técnicas de solução de sistemas esparsos, pode-se computar o
passo iterativo rapidamente. Entretanto são necessárias muitas iterações para atingir a
convergência, pois o problema se torna uma variação de gradiente descendente e apresenta
convergência linear (WANG; POTTMANN; LIU, 2006).

Após calcular os pontos de controle das curvas projetadas q e q?, deve-se localizar
os pontos de controle Q da NURBS no espaço 3D. Para isso, deve-se resolver o sistema
formado pela Eq. 6.3 e pela Eq. 6.4 para obter

Q =

?
???????
Qkx

Qky

Qkz

Qkw

?
??????? =

?
???????

qkx?cxqkw
fx

qky?cyqkw
fy

qkw
fx?

q?kx ?qkx

?
??????? . (6.6)

Como apenas a propriedade epipolar é empregada, não há restrições quanto às
coordenadas x dos pontos de controle em imagens retificadas. Isto permite a reconstrução
de curvas genéricas no espaço 3D. A próxima seção detalha outras restrições que podem
ser adicionadas ao problema para que a curva reconstruída esteja contida em um plano.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 57

Figura 13 – Região de incerteza na triangulação de um ponto [X,Z]&gt; em um espaço
bidimensional a partir de duas câmeras paralelas afastadas por uma distância
d. Devido ao erro na observação e, o ponto pode ser reconstruído em uma
região de incerteza (região preenchida com azul). O erro do ponto reconstruído
no eixo das abscissas é eX e e+Z e e

?
Z no eixo das ordenadas (o erro eX é igual

para ambos os lados).

??

???

??+

??

?

?

?

??

Fonte: O autor.

6.2 RESTRIÇÃO DE PLANARIDADE DA CURVA
A aplicação do método de Xiao e Li permite a reconstrução de uma curva NURBS

que representa o EMD, entretanto a reconstrução tende a apresentar um resultado impreciso
devido à distância do duto ao par de câmeras. Para mitigar esta dificuldade, a proposta
desta dissertação é utilizar a restrição de planaridade da curva para diminuir o número de
graus de liberdade do problema e alcançar um resultado mais acurado.

Para simplificar essa explanação, será considerada uma analogia com a reconstrução
de um segmento de reta L em um espaço bidimensional onde o eixo Y foi suprimido. Sendo
assim, dado um ponto X = [X,Z]&gt; pertencente ao segmento de reta L, sua imagem será
denotada por x na câmera esquerda e x? na câmera direita. Considerando-se que os pontos
observados x? e x?? possuem um erro e em relação à sua verdadeira posição (será admitido
que correspondências de pontos nas duas imagens estão sujeitas ao mesmo erro), então
x? = x + e e x?? = x? + e. Desprezando outras fontes de erros no sistema (calibração da
câmera, distorção radial, etc.), podemos estabelecer que o erro inerente à observação de
um ponto gera uma região de incerteza do ponto reconstruído, como ilustrado na Figura
13. Através da fronteira dessa região, é definido que o erro máximo no eixo X é eX e no
eixo Z é e+Z e e

?
Z.

Utilizando os dados do cenário apresentado na Seção 2 e estipulando e = ±0.5 pixel,



Capítulo 6. Técnica proposta para reconstrução de curvas planares 58

Figura 14 – Gráfico do erro na triangulação de um ponto. Considerando as características
do cenário real, ou seja, d = 0.8 metros e f = 530 pixels, é estimado o
comportamento dos erros eX e e+Z e e

?
Z em função da distância dos pontos às

câmeras. O erro no eixo X pode ser considerado desprezível em relação ao
eixo Z à medida que o ponto se afasta da câmera.

Z (metros)
2 4 6 8 10 12 14 16 18 20

E
rr
o
(m

et
ro
s)

0

0.2

0.4

0.6

0.8

1

e
+
Z

e
?

Z

eX

Fonte: O autor.

pode-se determinar os valores eX, e+Z e e
?
Z em função da distância do ponto às câmeras,

como ilustrado na Figura 14. Com base nesse gráfico, conclui-se que eX é muito menor
que e+Z e e

?
Z e por esse motivo será considerado desprezível nas próximas análises.

Por conseguinte, a região de incerteza da reconstrução do segmento L é dada pela
união das regiões de incerteza de seus pontos, como ilustrado na Figura 15 através do
trapézio de cor azul. A curva ? reconstruída pelo algoritmo de Xiao e Li tende a apresentar
um erro de reconstrução muito maior na direção do eixo Z, como ilustrado através da linha
vermelha na Figura 15. Ao se utilizar a restrição de planaridade do EMD no problema, a
curva reconstruída é sempre planar impedindo este comportamento.

Outra alternativa para resolver esse problema seria projetar a curva reconstruída
pelo método de Xiao e Li no plano dominante da curva e assim obter uma curva plana para
representar o EMD. Porém, este método fornece um resultado não ótimo em relação ao
erro de reprojeção. A adaptação proposta, descrita na próxima seção, permite determinar
uma NURBS que seja plana e ao mesmo tempo seja ótima.

6.3 IMPONDO A RESTRIÇÃO DE PLANARIDADE
De acordo com o cenário do problema (Seção 2.2), admite-se que a curva X(t)

que descreve o EMD está contida em um plano, como ilustrado na Figura 16. Logo, as
projeções de X(t) nas imagens esquerda e direita estão relacionadas por uma homografia
H. Em outras palavras,

x?(t) = Hx(t). (6.7)

De acordo com a Seção 4.2.4, como os pontos x? e x?? estão retificados, a homografia



Capítulo 6. Técnica proposta para reconstrução de curvas planares 59

Figura 15 – Incerteza na reconstrução da curva pelo método de Xiao e Li. Dada a incerteza
presente no eixo Z na reconstrução de um ponto, a curva reconstruída ?
tende a apresentar um erro considerável em relação ao segmento L. O trapézio
em azul representa a região de incerteza em que o segmento reta L pode ser
reconstruído.

?

?

?
?

Fonte: O autor.

Figura 16 – Ilustração da projeção de uma curva planar em um par de câmeras estéreo. De
forma ilustrativa, mostra-se que os pontos da curva (ponto na forma de círculo)
sofrem a mesma operação de projeção que os pontos de controle (ponto na
forma de ×). Eles estão sujeitos também as mesmas restrições epipolares,
como ilustrado através da linhas epipolares em azul.

?(??)

?(??) ??(??)

?

?(??)

??

??+?

??+?

??

??+?

??+?

???+?

???+?

???

Fonte: O autor.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 60

H consiste em uma afinidade da forma

H =

?
????
a b c

0 1 0
0 0 1

?
???? . (6.8)

Como mostrado na Seção 4.3.2, os pontos de controle sofrem a mesma transformação no
espaço projetivo que os pontos da curva. Portanto é definida a relação

q? = Hq. (6.9)

Combinando a Eq.6.8 e a Eq. 6.9 são obtidas as expressões:

q?kx = a q
k
x + b q

k
y + c q

k
w

q?ky = q
k
y

q?kw = q
k
w

. (6.10)

Observe que a restrição epipolar foi mantida, pois qky = q?ky e qkw = q?kw , e foi
incorporada uma restrição entre qkx e q?kx que não existia anteriormente. Em outras palavras,
os pontos de controle da curva na imagem direita podem ser parametrizados em função dos
pontos de controle da curva na imagem esquerda através de a, b e c. Logo, a Eq. 6.5 pode
ser otimizada variando-se qkx, qky, ti, tj, a, b e c, totalizando 2? + m + n + 3 variáveis. Com
esta modificação, a curva X(t), obtida pela Eq. 6.6, será planar, atendendo a restrição de
planaridade do EMD.

A Figura 16 ilustra a modificação realizada na ideia de Xiao e Li para que a NURBS
reconstruída esteja contida em um plano. No exemplo da imagem, o ponto x(ti) não possui
correspondente na imagem direita e nem x?(tj) possui correspondente na imagem esquerda.
Embora não seja possível estabelecer correspondências entre os pontos x?i e x??j, os pontos de
controle (qk e q?k) obedecem às restrições epipolares que podem ser exploradas. Otimizando
a projeção de cada ponto amostral ao longo da curva através do parâmetro t, pode-se
determinar uma solução ótima. Para o caso em que a curva X(t) for planar, basta utilizar
a restrição da Eq. 6.10 para otimizar o erro de reprojeção.

6.4 PARAMETRIZAÇÃO DA CURVA
Antes de otimizar a Eq. 6.5 dada as restrições da Eq. 6.10, é preciso estabelecer uma

parametrização ao longo da curva para os pontos amostrais xi e x?i. Ou seja, determinar
um conjunto de parâmetros ti e tj no intervalo [tmin, tmax] para cada ponto amostral. Os
pontos fornecidos pelo algoritmo de rastreamento estão ordenados e têm aproximadamente
a distância fixa (igual a 1 pixel) e regular a cada dois pontos. Logo, utilizar parametrização
uniforme daria resultados semelhantes aos obtidos pela parametrização das cordas e pela
centrípeta.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 61

Figura 17 – Ilustração de imagens com trechos diferentes de duto sendo rastreados. As
linhas azuis delimitam a porção comum entre os pontos amostrais. Utilizando
a restrição de planaridade da curva é possível reconstruir todos os pontos
rastreados, considerando-se que todos os pontos devem estar contidos em um
mesmo plano.

Imagem Esquerda Imagem Direita

Fonte: O autor.

Embora as curvas (uma por imagem) possam ser parametrizadas independente-
mente, uma parametrização comum a ambas foi empregada visto que elas estão associadas
a uma mesma curva no espaço 3D. Como trechos diferentes do duto podem ser rastreados
nas imagens esquerda e direita, é preciso através dos parâmetros informar que trecho da
curva reconstruída pertence a cada ponto amostral. Essa situação é ilustrada na Figura
17, onde trechos diferentes foram rastreados nas imagens da direita e da esquerda. Note
que se for dado o parâmetro tmin para o primeiro ponto amostral na imagem esquerda, o
primeiro ponto na imagem direita deve ter um parâmetro associado bem maior que tmin.
Entretanto espera-se que as intersecções das curvas com as linhas azuis possuam a mesma
parametrização.

Para se obter os parâmetros pode-se partir de uma parametrização ui na imagem
esquerda e uj para a imagem direita entre [0, 1]. Com o intuito de tornar as parametrizações
compatíveis, os valores em ui e uj podem ser escalados e transladados. Para isso, pode-se
definir a, b, c e d de forma que

ti = aui + b

tj = cuj + d.
(6.11)

Para determinar a, b, c e d pode-se definir um conjunto de restrições simples que
podem ser resolvidas através de um sistema linear. No exemplo da Figura 17, o primeiro
ponto da curva na imagem esquerda deve ser parametrizado como tmin e o último da
imagem direita como tmax. Além disso, os pontos amostrais sobre as linhas pontilhadas
devem ter a mesma parametrização.

Para definir os pontos sobre as linhas pontilhadas pode-se utilizar o fato de que



Capítulo 6. Técnica proposta para reconstrução de curvas planares 62

ambas as curvas são relacionadas por uma homografia. Aplicando-se a homografia nos
pontos da imagem esquerda, as curvas ficarão aproximadamente sobrepostas. Portanto,
busca-se o ponto mais próximo na curva esquerda para cada extremidade da curva da
direita, e vice-versa, para determinar as intersecções da curva com as linhas azuis. Como
este passo é realizado antes da otimização, a homografia do quadro anterior pode ser usada
como aproximação. O procedimento descrito serve como aproximação para inicializar o
algoritmo de otimização e após a convergência é obtida uma parametrização ótima para
cada curva.

Note que trechos do duto que não estão sendo rastreados em ambas as imagens
estão sendo parametrizados e serão reconstruídos. Isso é possível pois admite-se que a
curva está contida em um plano. Os trechos do duto rastreados nas duas imagens são
suficientes para determinar o plano e os segmentos são naturalmente retroprojetados neste
plano durante a otimização. Porém, quanto menor for o trecho comum nas duas imagens,
menor deve ser a acurácia da reconstrução, pois haverá menos informação para estimar
corretamente o plano.

6.5 NÚMERO DE PONTOS DE CONTROLE
A curva que representa o EMD é suave e geralmente apresenta uma ou duas

mudanças de concavidade. Logo é esperado que poucos pontos de controle sejam necessários
para representar corretamente a curva. Contudo, foram geradas conclusões diferentes após
ser realizada uma análise em exemplos de curvas que descrevem EMD calculadas a partir
de simulações físicas .

Ao utilizar uma B-spline cúbica com 4 a 6 pontos de controle, foi obtido um
SSE (sum squared error) baixo, indicando um bom ajuste de curva. Porém, métricas
mais sensíveis, como a curvatura apresentaram uma grande discrepância, mostrando
que essa abordagem não é suficientemente acurada para aplicação de interesse. Como o
resultado da reconstrução é utilizado por aplicações que requerem precisão, é necessária
uma aproximação melhor para o EMD.

Valores mais acurados de curvatura (erro menor que 0.1% em relação ao valor
de curvatura máxima) foram alcançados quando muitos pontos de controle ou um grau
elevado (6 ou mais) foi usado. Entretanto, constatou-se que graus elevados acarretavam
em instabilidade e perda de performance. Dessa forma, optou-se por utilizar o grau igual a
3. Ao observar-se que a suavidade da curva é dependente do diâmetro D do duto (quanto
maior o diâmetro maior a resistência a flexão), o número de pontos de controle n foi
definido como

n =
?L

D
, (6.12)

onde L é o comprimento do duto rastreado e ? é uma constante. Testes empíricos mostraram



Capítulo 6. Técnica proposta para reconstrução de curvas planares 63

que um bom valor para ? é 2.

6.6 ALGORITMO
O passo-a-passo do algoritmo utilizado para determinar a curva reconstruída está

descrito a seguir. A entrada são os pontos rastreados nas imagens da esquerda e da direita
xi e x?j, respectivamente, e o plano ? do duto obtido a partir do último quadro. Os pontos
são previamente retificados.

1. Utilizando a calibração das câmeras e o plano estimado durante a reconstrução do
quadro anterior, estimar H segundo a Eq. 4.12. Note que, como os pontos estão
retificados, a matriz H tem a forma da Eq. 6.8;

2. Determinar os parâmetros ti e tj segundo a Seção 6.4 utilizando H;

3. Mapear os pontos da imagem direita para a imagem esquerda utilizando H. Ou seja,
definir x?j = H?1xj;

4. Ajustar simultaneamente os pontos xi e x?j para uma B-spline (ou seja, qw(i) =
q?w(i) = 1) de forma linear, para obter n pontos de controle que formam as colunas
da matriz q. O valor de n é dado pela Eq. 6.12;

5. Otimizar os valores de q, a, b e c, ti e tj na Eq. 6.1 com o algoritmo de Levenberg-
Marquardt respeitando as restrições dadas em 6.10. Os valores de a, b e c devem ser
inicializados a partir de H;

6. Calcular os pontos de controle Q da curva 3D segundo a Eq. 6.6;

7. Determinar o plano da curva dados os novos valores de a, b e c, após resolver a Eq.
4.12.

O retorno do algoritmo consiste na NURBS governada pelos pontos de controle Q
e o plano em que a curva está contida. Este plano será utilizado no quadro seguinte para
determinar a região de projeção do duto pelo algoritmo de rastreamento.

O algoritmo de reconstrução da curva é de simples implementação e similar ao
de Xiao e Li. Embora o algoritmo apresente convergência lenta, como argumentado em
(WANG; POTTMANN; LIU, 2006), a forma suave da curva permite que em poucas
iterações seja obtido um residual próximo ao mínimo global. As iterações subsequentes
melhoram muito pouco o erro e a variação é muito pequena na posição dos pontos de
controle. Mais detalhes sobre a convergência do algoritmo são dados na Seção 7.5.2.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 64

Figura 18 – Obliquidade é definida como o ângulo ? entre o eixo óptico da câmera centrada
em C e o vetor normal N do plano.

?
?

?

Fonte: O autor.

6.7 FATORES QUE INFLUENCIAM A ACURÁCIA DA CURVA
RECONSTRUÍDA
Existem diversas variáveis atreladas ao cenário que podem influenciar o resultado

da reconstrução, como: os parâmetros intrínsecos das câmeras, a distância entre as câmeras,
a distância entre o duto e a câmera, a posição de observação do duto, a forma do EMD,
etc. Todas essas variáveis podem impactar na precisão da reconstrução, logo é importante
estudá-las para avaliar formas de tornar as imagens capturadas menos propensas a erros.
Certas variáveis não podem ser alteradas durante a operação de instalação (como parâmetro
das câmeras), já outras sim, como a posição que câmera visualiza o duto (pois depende do
operador do ROV).

Em um experimento realizado observou-se que dois fatores influenciam fortemente
a reconstrução do duto. O primeiro é o ângulo ? que a normal do plano da curva faz com
o eixo óptico da câmera. Esse ângulo é denominado obliquidade e está ilustrado na Figura
18. Observe que, se os eixos ópticos das câmeras forem paralelos, a obliquidade medida
será a mesma independentemente da câmera escolhida. O segundo é a magnitude das
componentes principais que formam o duto.

Para justificar a influência desses fatores será utilizada a analogia da Seção 6.2, onde
busca-se reconstruir um segmento de reta L em uma versão bidimensional do problema.
Salienta-se que um segmento de reta possui apenas uma componente principal tornando
mais simples a explicação inicial, porém, mais adiante o problema será generalizado para
o caso tridimensional.

Em virtude da incerteza de reconstrução de um ponto ser muito maior ao longo
do eixo Z, a região de incerteza da reconstrução do segmento L é dada pela união das
regiões de incerteza de seus pontos, como ilustrado na Figura 19. Através da Figura 19b e
da Figura 19c é intuitivo perceber que à medida que a obliquidade aumenta, a região de
incerteza se torna mais ou menos alongada, tornando assim maior a probabilidade de se
reconstruir segmentos de maior ou menor comprimento. Sendo l o comprimento de L, l+ e
l? podem ser definidos como o maior e o menor comprimento do segmento reconstruído,
respectivamente. A variação do comprimento do segmento será adotada como métrica do



Capítulo 6. Técnica proposta para reconstrução de curvas planares 65

Figura 19 – Região de incerteza da reconstrução de um segmento de reta. À medida que a
obliquidade aumenta, segmentos de reta maiores (L+) e menores (L?) passam
a pertencer à região de incerteza.

?

?
?+ = ??

?

(a) Obliquidade igual a 0.

?

?
?

?+

?

(b) Maior segmento.

?

??

?

?

?

(c) Menor segmento.

Fonte: O autor.

erro da reconstrução. Logo e+l = |l? l+|/l e e
?
l = |l? l?|/l.

Mesmo sendo possível calcular analiticamente e+l e e
?
l em função de ? e l, esse

processo é muito complexo. Por esse motivo, foram realizadas simulações em um cenário
sintético similar ao da operação. Dados como distância do objeto para a câmera (Z), o
foco da câmera e baseline (d) são considerados fixos, pois são intrínsecos ao problema. O
erro inerente à observação foi considerado como e = 0.5 pixel.

A partir dos resultados das simulações, ilustrados nos gráficos da Figura 20, é
possível observar que a acurácia da reconstrução é sensível a dois fatores: o comprimento
do segmento e a obliquidade. Quanto menor for o comprimento do segmento e maior a
obliquidade, menor será a acurácia da reconstrução. Através da Figura 20c observa-se que
a influência de e é praticamente linear sobre o erro do comprimento.

Generalizando a ideia para o caso tridimensional, o segmento L se torna uma
curva planar. Então, ao invés do comprimento do duto, será considerada a magnitude das
componentes principais dos pontos que formam a curva. Estas componentes são obtidas
pelo algoritmo PCA – Principal Component Analysis (JOLLIFFE, 2002) aplicado aos
pontos da curva. A primeira componente principal corresponde ao eixo de maior variância
e a segunda componente é ortogonal à primeira. Os referidos eixos são ilustrados na Figura
21 e quanto maiores forem suas magnitudes, maior será o comprimento do duto na direção
do eixo.

De acordo com analogia entre o espaço 2D e o 3D, o plano da curva será mais
esticado na direção da segunda componente do que na primeira componente principal.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 66

Figura 20 – Gráficos do erro da reconstrução de um segmento de reta variando o compri-
mento do segmento, a obliquidade e o erro associado à medição de pontos do
segmento.

l (metros)
1 2 3 4 5 6 7 8 9 10

E
rr
o
(%

)

0

5

10

15

20

25

30

35

40

e
+
L
com ? = 5?

e
?

L
com ? = 5?

e
+
L
com ? = 45?

e
?

L
com ? = 45?

(a) Obliquidade fixa e variando o compri-
mento.

? (?)
0 10 20 30 40 50 60 70 80 90

E
rr
o
(%

)

0

2

4

6

8

10

12

14

16

18

e
+
L
com l = 3 m

e
?

L
com l = 3 m

e
+
L
com l = 8 m

e
?

L
com l = 8 m

(b) Comprimento fixo e variando a obliqui-
dade.

e (pixels)
0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1

E
rr
o
(%

)

0

5

10

15

20

25

30
l = 3 m, ? = 45?

e
+
L

e
?

L

(c) Variando apenas o erro.

Fonte: O autor.

Figura 21 – Ilustração da primeira componente principal (em azul) e da segunda compo-
nente principal (em vermelho) em dois exemplos de configurações de curva. As
componentes foram obtidas através de uma análise de componentes principais
(PCA - Principal Component Analysis).

Fonte: O autor.



Capítulo 6. Técnica proposta para reconstrução de curvas planares 67

Desta maneira conclui-se que será obtida uma menor precisão se o duto for observado
de pontos de vista oblíquos e ao longo da segunda componente principal. Sendo assim,
esses pontos de vista devem ser evitados. Como ilustrado na Figura 3, o trecho de duto
analisado tem maior comprimento na horizontal do que na vertical. Logo deve ser evitada
a visualização do duto de baixo para cima e de cima para baixo durante o processo de
reconstrução. Entretanto, visualizações laterais não devem impactar muito a acurácia
segundo o gráfico da Figura 20a.

Além do erro inerente ao rastreamento dos pontos, deve-se também considerar
outras fontes de erro. Um exemplo é a imprecisão da calibração das câmeras. Quanto
maior for a obliquidade, maior será o erro da reconstrução devido ao esticamento do plano.

6.8 CONSIDERAÇÕES FINAIS
Neste capítulo foi apresentado o algoritmo utilizado para reconstruir a curva

analítica que representa o EMD. Os pontos de controle obtidos representam analiticamente
a curva reconstruída que consiste no produto final dos algoritmos propostos. A partir dessa
curva serão realizadas as comparações com os modelos físicos para verificar a segurança
da operação de instalação de dutos. No próximo capítulo serão relatados os experimentos
que visam avaliar a acurácia da curva reconstruída e o comportamento dos algoritmos
propostos para verificar se eles atendem aos requisitos do cenário do problema.



68

7 RESULTADOS

Este capítulo relata os experimentos realizados com objetivo de validar os algoritmos
de rastreamento e reconstrução do Eixo Medial do Duto (EMD). A Seção 7.1 descreve
aspectos gerais dos experimentos, como o hardware e a implementação. Na Seção 7.2 é
detalhada a metodologia empregada para avaliação dos algoritmos.

Na Seção 7.3 são relatados os experimentos realizados em laboratório. Estes experi-
mentos permitiram a avaliação da geometria da curva reconstruída em ambiente controlado.
A Seção 7.4 detalha os testes realizados em um cenário real da operação. Embora a geo-
metria da curva não seja conhecida, foi possível avaliar a robustez do rastreamento. Uma
análise do erro de reprojeção, iterações e o tempo de execução dos algoritmo é realizada
na Seção 7.5. Finalmente, a Seção 7.6 apresenta as considerações finais do capítulo.

7.1 IMPLEMENTAÇÃO
A implementação dos algoritmos propostos foi realizada em C++ e compilada pelo

Microsft Visual C++. Foram utilizadas as bibliotecas OpenCV (BRADSKI, 2000) para
operações básicas de processamento de imagem e Eigen (GUENNEBAUD; JACOB et al.,
2010) para matrizes e rotinas de álgebra linear. Embora paralelizáveis, os algoritmos foram
implementados sequencialmente e o código precisa de otimizações. O hardware utilizado
para os testes foi um notebook com processador Intel i7-4810MQ 2.80 GHz e 16 GB de
memória RAM.

7.2 METODOLOGIA DOS EXPERIMENTOS
Embora as técnicas propostas sejam capazes de fornecer uma boa aproximação

para curvas genéricas, utilizou-se curvas que descrevem uma catenária nos testes. Medir
com exatidão pontos de uma curva descrita por um duto arbitrário não é uma tarefa
simples e muitas vezes é imprecisa. Por este motivo, buscou-se modelar os dutos utilizados
nos experimentos em laboratório como catenárias (LOCKWOOD, 1971), pois essas curvas
são facilmente produzidas em laboratório e possuem comportamento similar ao EMD real.

A equação de uma catenária no plano z = 0, parametrizada pelo comprimento s e
que passa pela origem é dada por

?(s) =

?
????
aasenh(s/a)
?
a2 + s2

0

?
???? , (7.1)



Capítulo 7. Resultados 69

onde a é uma medida chamada de amplitude e representa o raio de curvatura mínimo da
curva. O valor da amplitude é facilmente obtido a partir de algumas medidas realizadas
no duto (comprimento, distância entre extremidades, etc).

Sendo assim, para avaliar os resultados, serão utilizadas duas abordagens: a primeira
consiste no erro de reconstrução da curva, que avalia o quão próximo a curva reconstruída
está de uma catenária de amplitude conhecida; a segunda abordagem consiste em medir
o erro do plano reconstruído e será útil para avaliar a influência da obliquidade na
reconstrução.

Para verificar o erro de reconstrução da curva (ou simplesmente erro de reconstrução)
são amostrados n pontos Xi, i = 0, . . . ,n? 1 na curva. O erro da reconstrução da curva é
definido para cada ponto como

?i = ||?(si) ? RXi + t||. (7.2)

A matriz de rotação R e o vetor de translação t localizam a posição da curva em relação às
câmeras e servem para computar a equação do plano da curva. O parâmetro si representa
o comprimento da curva no ponto Xi. Esses parâmetros são calculados otimizando-se

arg min
R,t,si

?
i

?2i . (7.3)

A Eq. 7.3 corresponde a um problema de ajuste de curva não linear e pode ser
resolvida através do algoritmo de Levenberg-Marquardt que otimiza os parâmetros si,
a rotação R e uma translação t dos pontos reconstruídos. Esse processo busca ajustar
os pontos de forma não linear a uma catenária no plano z = 0. O erro médio da curva
reconstruída é dado por

?
i |?i|/n enquanto o erro máximo é dado por max(|?i|). O erro

de reconstrução do plano é dado pelo ângulo entre o plano do gabarito utilizado e o plano
estimado na reconstrução.

Para avaliar o erro em um dado quadro, optou-se por utilizar as métricas de média
aritmética e valor máximo. Para uma sequência de vídeo, utilizou-se a média, o desvio
padrão, o valor máximo e uma média aritmética do valor máximo em todos os quadros.
Tais métricas foram utilizadas porque através da média é possível estimar o comportamento
do erro. Os valores máximos permitem analisar o comportamento do erro nos piores casos.

7.3 EXPERIMENTOS EM LABORATÓRIO
Essa seção descreve dois conjuntos de experimentos realizados em laboratório. Como

simular o ambiente real não é trivial devido às dimensões dos equipamentos envolvidos,
optou-se pela criação de um cenário com escala reduzida em 8.88 vezes. Os experimentos
foram conduzidos em duas etapas: a primeira dentro d’água e a segunda no ar. Embora



Capítulo 7. Resultados 70

Figura 22 – Suporte utilizado para movimentação das câmeras.

Fonte: O autor.

Figura 23 – Cenário criado para os experimentos em laboratório. A figura ilustra o par de
câmeras estéreo fixados no suporte, o corpo de prova suspenso formando uma
catenária e o anteparo escuro para simular um fundo escuro.

Fonte: O autor.

realizadas em ambientes distintos, as duas etapas utilizaram o mesmo cenário como descrito
a seguir.

Duas câmeras Kongsberg OE-15-101c foram usadas nos experimentos, sendo essas
do mesmo modelo e fabricante das que são utilizadas em operações reais. As câmeras
foram fixadas em um suporte, ilustrado na Figura 22, e ficaram afastadas 9 centímetros
(no cenário real as câmeras são afastadas 80 centímetros). A calibração intrínseca e do par
estéreo foram realizadas antes dos testes.

Seguindo a metodologia do experimento, o corpo de prova que representa o duto
deve ter seu eixo medial descrito por uma curva catenária. Portanto, a elaboração do
corpo de prova não foi uma tarefa simples. Dutos comuns apresentam certa rigidez à
flexão, impedindo assim que eles respeitem a forma de uma catenária. Para contornar esse
problema, o duto foi confeccionado utilizando uma corrente metálica e espuma. A corrente
de dois metros conferiu peso ao duto impondo a forma de uma catenária. A espuma branca



Capítulo 7. Resultados 71

de densidade muito baixa e permeável proporcionou a forma cilíndrica de um duto de
5.4 centímetros de diâmetro. Secções cobertas com fita isolante permitiram a marcação
do padrão de pintura com regiões intercaladas de cores brancas e pretas ao longo de 1.6
metros de duto.

Para simular as condições de iluminação submarinas, cujo background é escuro,
utilizou-se um anteparo de cor preto fosco atrás do duto. Embora tenha-se utilizado a
iluminação ambiente, foram obtidas imagens com características similares às reais, pois a
região em que estava o duto possuiu maior intensidade do que o background. O cenário
do experimento está ilustrado na Figura 23, onde pode-se observar as câmeras fixadas no
suporte, o duto e o anteparo de cor preta.

7.3.1 Ambiente aquático

Os resultados foram obtidos através de experimentos realizados no tanque do
laboratório TES do Cenpes1. Todo o cenário (câmeras, duto e anteparo) foi mergulhado
nesse tanque para realizar a captura de vídeos. A movimentação das câmeras foi realizada
através de cabos e o posicionamento entre duto e câmera não foi monitorado. Logo, apenas
a geometria da curva foi avaliada através das aferições da amplitude da catenária.

Foram analisados quatro vídeos e os resultados são descritos nos próximos tópicos
e resumidos na Tabela 1.

7.3.1.1 Vídeo 1

No primeiro vídeo foi capturado um duto em forma de catenária com amplitude
igual a 44.75 centímetros. Um movimento vertical de subida e descida do duto foi realizado
três vezes, enquanto a câmera, posicionada a uma distância de 2.25 metros, permaneceu
imóvel. Nesse vídeo foram capturados 1500 quadros e o resultado do rastreamento está
ilustrado na Figura 24. O movimento realizado pelo duto é pertinente para avaliação
dada sua recorrência em operações de instalação. Devido às ondas do mar, o barco sofre
deslocamentos verticais (heave) constantes que são propagados para o duto.

O erro de reconstrução, apresentado no gráfico da Figura 25, apresentou o resultado
mais estável dentre os casos avaliados na água. O erro máximo foi inferior a 2 centímetros
e o erro médio de toda a filmagem foi igual a 2.1 milímetros. O movimento suave do duto,
a água transparente e a baixa obliquidade (inferior a 5 graus) favoreceram a obtenção de
um resultado acurado.
1 O Cenpes (Centro de Pesquisa Leopoldo Américo de Mello) é unidade da Petrobras responsável pelas

atividades de pesquisa e desenvolvimento.



Capítulo 7. Resultados 72

Figura 24 – Resultado do rastreamento em amostra de quadros do Vídeo 1 capturado em
ambiente aquático. O movimento suave do duto e a água limpa favoreceram
para o correto rastreamento do EMD.

Quadro 450 (Esquerda)

Quadro 450 (Direita)

Quadro 1 (Esquerda)

Quadro 1 (Direita)

Quadro 200 (Esquerda)

Quadro 200 (Direita)

Fonte: O autor.

Figura 25 – Gráfico de erro da reconstrução obtido no Vídeo 1 nos experimentos submersos.
O erro médio ficou quase sempre abaixo de 4 milímetros, porém o erro máximo
excedeu 1 centímetro em algumas ocasiões.

Quadros
0 500 1000 1500

E
rr

o
 (

ce
n

tí
m

e
tr

o
s)

0

0.5

1

1.5

2

Médio
Máximo

Fonte: O autor.



Capítulo 7. Resultados 73

Figura 26 – Resultado do rastreamento em amostra de quadros do Vídeo 2 capturado em
ambiente aquático. A água turva impede uma boa visualização do duto, porém
ele ainda é a região mais clara da imagem, permitindo o correto rastreamento
ao longo do vídeo.

Quadro 5 (Esquerda) Quadro 1000 (Esquerda)Quadro 500 (Esquerda)

Quadro 500 (Direita) Quadro 1000 (Direita)Quadro 5 (Direita)

Fonte: O autor.

7.3.1.2 Vídeo 2

No segundo vídeo foi capturada uma sequência de 1000 quadros em um cenário de
água turva (causada através da agitação da água), como ilustrado na Figura 26. O duto
apresenta a forma de uma catenária de 31.22 centímetros de amplitude e esteve a uma
distância média de 95 centímetros das câmeras. Note que o contraste na imagem é muito
baixo e há pouca visibilidade. Porém, a região da imagem onde está o duto ainda possui
maior intensidade, permitindo assim que o algoritmo de rastreamento determine a posição
do EMD.

Devido ao ruído presente na imagem, o rastreamento apresentou o efeito de jitter2,
principalmente nas extremidades da curva. Entretanto, a porção do duto foi corretamente
rastreada em toda a sequência. Como o duto não está completamente visível em ambas as
câmeras, há partes que foram rastreadas em uma câmera e não foram rastreadas na outra.
Porém, dada a restrição de planaridade foi possível reconstruir todos os pontos rastreados.

O gráfico de erro da curva é ilustrado na Figura 27, onde é exibido o erro máximo e
médio por quadro. O erro máximo foi menor do que 5 centímetros, porém o erro médio ao
longo de toda a filmagem permaneceu em torno de 2.5 milímetros. Além disso, observou-se
que os pontos da extremidade possuíram os maiores valores de erro em relação à curva do
2 Movimento irregular de um ponto rastreado causado geralmente por ruído. Seu efeito é similar a

tremor.



Capítulo 7. Resultados 74

Figura 27 – Gráfico de erro da reconstrução obtido no Vídeo 2 nos experimentos em
ambiente aquático. Devido ao ruído presente na imagem, a reconstrução se
mostrou menos acurada, atingindo 4.99 centímetros de erro. Porém em 80%
dos quadros o erro máximo foi inferior a 0.27 centímetros (um quarto do
diâmetro do duto).

Quadros
0 100 200 300 400 500 600 700 800 900 1000

E
rr

o
 (

ce
n

tí
m

e
tr

o
s)

0

1

2

3

4

5

Médio
Máximo

Fonte: O autor.

gabarito.

Observando o gráfico da Figura 28, nota-se um comportamento similar entre a
obliquidade e o erro da curva. Durante o processo de captura do vídeo, a câmera se moveu
muito pouco, porém a obliquidade apresentou variações superiores a 15 graus em quadros
consecutivos. Portanto, podemos concluir que o ruído no vídeo influenciou na estimava do
plano e consequentemente na geometria da curva, como explicado na Seção 6.7.

7.3.1.3 Vídeo 3

No terceiro vídeo a água se encontrava menos turva. Foi capturada uma sequência
com 500 quadros em que a câmera realizou um movimento de aproximação (surge) e
em seguida uma rotação em torno do eixo vertical (yaw) com desenquadramento na
extremidade esquerda da curva. No movimento de aproximação, a distância entre o duto e
a câmera variou de 1.75 metros até 1.35 metros e a amplitude da catenária foi mensurada
em 25.04 centímetros. Os resultados do rastreamento em alguns quadros da sequência são
ilustrados na Figura 29.

Durante a aproximação, a curva rastreada teve um aumento do seu comprimento
na imagem, portanto, os passos de expansão da curva do rastreamento funcionaram
corretamente.

No gráfico de erro da curva reconstruída, ilustrado na Figura 30, o erro máximo



Capítulo 7. Resultados 75

Figura 28 – Gráfico da obliquidade estimado no Vídeo 2 do experimento em ambiente
aquático. Este gráfico apresenta um comportamento similar ao do gráfico de
erro da reconstrução, indicando que existe uma influência da obliquidade na
reconstrução. Note que há grande variação na obliquidade, mesmo quando a
câmera e o duto estão praticamente parados.

Quadros
0 100 200 300 400 500 600 700 800 900 1000

O
b
liq

u
id

a
d
e
 (

g
ra

u
s)

0

5

10

15

20

25

Fonte: O autor.

Figura 29 – Resultado do rastreamento em amostra de quadros do Vídeo 3 capturada em
ambiente aquático. A água estava um pouco turva e a câmera realizou um
movimento de surge e yaw.

Quadro 5 (Esquerda) Quadro 470 (Esquerda)Quadro 250 (Esquerda)

Quadro 250 (Direita) Quadro 470 (Direita)Quadro 5 (Direita)

Fonte: O autor.



Capítulo 7. Resultados 76

Figura 30 – Gráfico do erro de reconstrução da curva obtido no Vídeo 3, nos experimentos
realizados em ambiente aquático. O erro máximo se manteve menor que 1
centímetro em quase toda a sequência e em dois quadros o erro máximo
ultrapassou o valor de 4 centímetros. O gráfico de erro apresenta um com-
portamento similar ao apresentado na variação da obliquidade, ilustrada na
Figura 31

Quadros
0 50 100 150 200 250 300 350 400 450 500

E
rr

o
 (

ce
n

tí
m

e
tr

o
s)

0

1

2

3

4

5

6

Médio
Máximo

Fonte: O autor.

atingiu alguns picos superiores a 2 centímetros. Entretanto, a média do erro máximo em
toda sequência foi de 0.93 centímetros e o erro médio em toda sequência foi igual a 0.3
centímetros, equivalente a aproximadamente um décimo do raio do duto.

Assim como no caso anterior (Vídeo 2), pode-se observar uma relação entre o gráfico
de erro e de obliquidade, ilustrado pela Figura 31. Os maiores erros ocorreram quando a
obliquidade atingiu os maiores valores. No quadro 425, por exemplo, onde ocorreu o maior
erro, a câmera realizou um movimento brusco de yaw.

7.3.1.4 Vídeo 4

No quarto e último caso buscou-se explorar um ponto de vista oblíquo, como
ilustrado na Figura 32, atingindo-se uma obliquidade de 40?. A obliquidade foi incrementada
no início do vídeo e em seguida a câmera ficou de frente para o duto. Nos últimos quadros,
o duto não foi completamente rastreado devido a um desenquadramento da extremidade
direita do duto em ambas as câmeras. A amplitude da catenária foi mensurada em 61.57
centímetros e a distância do duto para câmera variou de 1.4 até 1.5 metros da câmera.

Na Figura 33 é observado que desde o início da sequência até o quadro 420, o erro
se manteve baixo e o erro máximo não superou 1 centímetro. Porém, após o quadro 420
o erro cresceu bastante. Uma justificativa para esse comportamento provavelmente está
ilustrada no gráfico da Figura 34. Embora a obliquidade fosse alta no início do vídeo, o



Capítulo 7. Resultados 77

Figura 31 – Gráfico da obliquidade estimado no Vídeo 3 obtido na captura do experimento
realizado em ambiente aquático. Embora não seja conhecida a obliquidade real,
o gráfico apresentou comportamento coerente com o movimento observado
no vídeo. A câmera realizou movimentos de yaw ocasionando elevações nos
quadros 200 e 435.

Quadros
0 50 100 150 200 250 300 350 400 450 500

O
b
liq

u
id

a
d
e
 (

g
ra

u
s)

0

5

10

15

20

25

Fonte: O autor.

comprimento horizontal do duto e a vista lateral do duto permitiu a obtenção de uma
reconstrução acurada. O comprimento vertical do duto é bem menor, e diminuiu ainda
mais com o desenquadramento da extremidade direita. Isso causou uma estimativa pouco
acurada do plano, como observado no gráfico da obliquidade no trecho final da filmagem.
Nesses quadros o plano reconstruído apresentou até 50? de rotação em torno do eixo x,
quando o valor esperado seria próximo de 0.

7.3.1.5 Principais conclusões do experimento

A Tabela 1 detalha o erro de reconstrução dos vídeos capturados em laboratório
relativos aos experimentos realizados em ambiente aquático. Como abordado na Seção
6.7, um baseline muito menor do que a distância das câmeras ao objeto tende a deixar
a reconstrução imprecisa, principalmente na estimativa da profundidade. Nesses experi-
mentos, a distância entre as câmeras e o duto (1.5 metros) foi bem maior que o baseline
(9 centímetros). Mesmo assim, foi obtido um erro médio milimétrico, muito inferior ao
diâmetro do duto. Isto se deve ao fato de que os pontos da curva não são reconstruídos
independentemente. Quando a restrição de planaridade é imposta à curva, o erro tende a
se distribuir por todos os pontos para torná-los complanares, gerando assim um resultado
final mais acurado.

Embora certos quadros tenham alcançado valores elevados para o erro (5 centí-
metros), estes foram casos isolados. O erro médio máximo ao longo de toda a sequência
obteve valores menores, variando de 0.53 a 1.2 centímetros. Portanto, o objetivo de obter
uma precisão de 1 centésimo do comprimento do duto (1.6 metro) foi alcançado, pois o



Capítulo 7. Resultados 78

Figura 32 – Resultado do rastreamento em amostras de quadros do Vídeo 4 capturado
nos experimentos realizados no ambiente aquático. Nos primeiros quadros foi
realizado um movimento em que a obliquidade aumentou, porém ao final da
sequência as câmeras estavam de frente para o duto. Um desenquadramento
na extremidade direita impediu que o duto fosse completamente rastreado até
o final da sequência.

Quadro 500 (Esquerda)

Quadro 500 (Direita)

Quadro 1 (Esquerda)

Quadro 1 (Direita)

Quadro 200 (Esquerda)

Quadro 200 (Direita)

Fonte: O autor.

Figura 33 – Gráfico de erro da reconstrução obtido no Vídeo 4 capturado nos experimentos
em ambiente aquático. Com exceção do final da sequência, o erro se manteve
estável, mesmo com o aumento da obliquidade. Porém, devido ao desenqua-
dramento da extremidade direita, a reconstrução foi menos acurada no final
do vídeo.

Quadros
0 50 100 150 200 250 300 350 400 450 500

E
rr

o
 (

ce
n

tí
m

e
tr

o
s)

0

2

4

6

8

10

Médio
Máximo

Fonte: O autor.



Capítulo 7. Resultados 79

Figura 34 – Gráfico da obliquidade no Vídeo 4, estimado no experimento realizado em
ambiente aquático.] O comportamento do gráfico é coerente visualmente com
o vídeo até o quadro 420. Devido ao desenquadramento, o plano foi estimado
incorretamente apresentando altos valores de obliquidade, mesmo quando a
câmera estava de frente para o duto.

Quadros
0 50 100 150 200 250 300 350 400 450 500

O
b

liq
u

id
a

d
e

 (
g

ra
u

s)

0

10

20

30

40

50

60

Fonte: O autor.

erro máximo foi inferior a 1.6 centímetros na grande maioria dos casos.

Outro ponto a ser considerado é que o erro máximo ocorreu, na maioria das vezes,
nas extremidades da curva. O melhor casamento entre a curva reconstruída e a curva
dada como gabarito (encontrada otimizando-se a Eq. 7.3) tende a aumentar o erro nas
extremidades e diminuir na porção central da curva, como ilustrado na Figura 35. Note
que a curva reconstruída possui forma similar a uma catenária de amplitude diferente.
Sendo assim, pode-se considerar que o erro pode ser oriundo da estimativa do plano da
curva, pois isto provoca um esticamento da curva na direção da segunda componente
principal dos pontos ou na direção de maior obliquidade.

Entretanto, é importante considerar outros fatores que podem influenciar os resulta-
dos obtidos no experimento. O primeiro é que as medições realizadas no duto para estimar
a amplitude da curva do gabarito estão sujeitas a uma imprecisão de até um centímetro.
Outro fator a ser considerado é que a distância entre o objeto e as câmeras no experimento
está muito maior do que no cenário real, se for considerada a escala do experimento. Além
disso, a essa distância, um pequeno erro na calibração das câmeras (1 grau na rotação,
por exemplo) pode afetar significativamente a acurácia do plano reconstruído.

Nos gráficos de obliquidade nota-se que ocorre uma grande variação mesmo em
quadros consecutivos. Como é sabido que o movimento entre a câmera e o objeto é lento,
uma abordagem que tornaria o resultado mais estável seria a utilização de técnicas de
predição, como o filtro de Kalman (KALMAN, 1960), para ajustar a estimativa do plano
da curva. A utilização desse filtro, provavelmente, evitaria diversos picos de máximo no
gráfico de erro da reconstrução da curva.



Capítulo 7. Resultados 80

Tabela 1 – Medida do erro de reconstrução da curva em ambiente aquático. A tabela
relaciona os vídeos e a amplitude da catenária medida com os valores de erro
para toda a sequência do vídeo. As médias e o desvios dos valores máximos
de erro obtidos para cada quadro do vídeo são apresentados nas duas últimas
colunas. Todos os valores são expressos em centímetros.

Vídeo Amplitude Média Desvio Máx Med Máx Desvio Máx
1 44.75 0.21 0.11 1.93 0.53 0.28
2 31.22 0.25 0.19 4.99 0.86 0.63
3 25.04 0.30 0.22 5.03 0.93 0.52
4 61.57 0.47 0.68 9.11 1.20 1.59

Figura 35 – Ilustração do erro entre a curva reconstruída e a curva do gabarito quando o
erro máximo se localiza nas extremidades. A curva azul representa a curva do
gabarito, os pontos vermelhos representam os pontos Xi amostrados da curva
reconstruída. A distância mínima entre as curvas tende a maximizar o erro
nas extremidades e minimizar o erro na parte central da curva.

?0

?1 ?3

?2

?4

Fonte: O autor.

7.3.2 Ambiente aéreo

Para avaliar a pose do duto reconstruído (dada pela matriz R e o vetor t na Eq. 7.2)
foi utilizado o sistema de movimentos da Rexroth no laboratório LabOceano3. Consiste
em uma plataforma suspensa por braços hidráulicos cujos movimentos são previamente
programados por computador. Para cada um dos seis graus de liberdade (3 de rotação e
3 de translação) pode ser aplicado um movimento harmônico informando-se amplitude,
frequência e defasagem. Como o equipamento utilizado não funciona embaixo d’água, os
testes foram realizados em ambiente aéreo. Nas próximas seções será apresentada uma
descrição detalhada do experimento e dos resultados obtidos.

7.3.2.1 Descrição do experimento

O experimento consistiu em realizar filmagens com o suporte das câmeras fixado
sobre a plataforma enquanto o duto permaneceu parado. A vantagem de fixar a câmera
3 O Laboratório de Tecnologia Oceânica faz parte do Programa de Engenharia Naval e Oceânica da

COPPE/UFRJ.



Capítulo 7. Resultados 81

sobre esta plataforma é que o movimento é conhecido e logo pode ser comparado com
o resultado da reconstrução. Admitindo que o par de câmeras esteja parado, pode-se
considerar que o duto esteve em movimento e assim é possível medir a pose do duto.
Conhecendo-se a pose do duto, o plano da curva também se torna conhecido e pode ser
avaliado. Como visto na Seção 6.7, a estimativa desse plano influencia diretamente a
geometria da curva reconstruída.

Tabela 2 – Parâmetros utilizados em cada vídeo dos experimentos em ambiente aéreo.
Em cada vídeo foi explorado um dos 6 graus de liberdade, 3 de rotação e
3 de translação. Para cada grau de liberdade foi utilizada duas medidas de
amplitude de catenária.

Vídeo Movimento
Amplitude
(Catenária)

Amplitude
(Movimento) Frequência (Hz)

1 Surge 30.0 cm 0.5 m 0.05
2 Surge 55.4 cm 0.5 m 0.05
3 Sway 30.0 cm 0.5 m 0.1
4 Sway 55.4 cm 0.4 m 0.1
5 Heave 30.0 cm 0.2 m 0.05
6 Heave 55.4 cm 0.2 m 0.05
7 Roll 30.0 cm 25? 0.05
8 Roll 55.4 cm 25? 0.05
9 Pitch 30.0 cm 10? 0.05
10 Pitch 55.4 cm 10? 0.05
11 Yaw 30.0 cm 10? 0.05
12 Yaw 55.4 cm 8? 0.05

Ao total foram gravados 12 vídeos e em cada vídeo variou-se um dos seis graus de
liberdade. Para cada grau de liberdade foram adotadas duas configurações de catenária.
Os parâmetros utilizados em cada vídeo estão listados na Tabela 2. As câmeras foram
posicionadas na plataforma a 38 centímetros à frente e a 23 centímetros de altura do
centro de rotação do equipamento. O duto foi posicionado a 1.5 metros de distância das
câmeras. Cada vídeo possui aproximadamente 6500 quadros, tempo necessário para que
sejam capturados 10 ciclos em cada movimento (exceto os movimentos de heave nos quais
foram capturados 20 ciclos). Alguns quadros dos vídeos estão ilustrados na Figura 36.

Cada grau de liberdade da plataforma de movimento é programado segundo a
função y(t) periódica e parametrizada pelo tempo t, onde

y(t) = ? cos(ft + ?) + ?. (7.4)

Os parâmetros de amplitude ?, frequência f, defasagem ? e deslocamento ? são dados
pelo usuário. Os valores de amplitude e frequência utilizados no experimento estão na
Tabela 2 e adotou-se ? = 0 e ? = 0. Os valores foram escolhidos com o intuito de tornar
os movimentos da plataforma similares ao de um ROV durante a operação real.



Capítulo 7. Resultados 82

Figura 36 – Quadros capturados nos experimentos no laboratório e em ambiente aéreo.
Em 36a foi utilizada um amplitude menor que em 36b, onde a curva se tornou
maior na direção horizontal.

(a) Catenária com amplitude igual a 30 centí-
metros

(b) Catenária com amplitude igual a 55.4 centí-
metros

Fonte: O autor.

Cada grau de liberdade da pose do duto (formada por R e t) ao longo do vídeo foi
ajustado para a função dada na Eq. 7.4 de duas formas: na primeira otimizou-se ?, f, ? e
?. Dessa maneira foi possível extrair a amplitude do movimento a partir da reconstrução.
A Figura 37a ilustra a forma senoidal de um dos parâmetros de translação enquanto os
demais possuem amplitude próxima a zero. No gráfico da Figura 37b verifica-se que os
demais parâmetros sofreram influência do movimento principal e também apresentaram
comportamento periódico. As estimativas das amplitudes estão presentes na Tabela 3.

Na segunda forma, os valores de ? e f foram considerados constantes segundo a
Tabela 2 e foi avaliado o erro do ajuste do dado reconstruído na função y(t). Em outras
palavras, essa forma avalia o quão próximo a pose da curva reconstruída está do movimento
considerado gabarito. O erro absoluto médio é dado na Tabela 4.

Além da pose da câmera, também foi avaliado o erro de reconstrução da curva,
cujos resultados estão apresentados na Tabela 5.

7.3.2.2 Análise dos resultados

Por se tratar de um cenário sem desenquadramentos e movimentos suaves, o
algoritmo de rastreamento obteve resultados visualmente satisfatórios e sem falhas em
todo o vídeo.

Como a câmera não estava situada na origem, movimentos puros de rotação
apresentaram valores de translação em outros eixos, como mostrado na Tabela 3. Nesses
casos, com base nas medidas da posição da câmera em relação ao centro de rotação foi



Capítulo 7. Resultados 83

Figura 37 – Ilustração da estimativa dos graus de liberdade do movimento da câmera nos
experimentos em laboratório e no ar. Note que os um dos parâmetros apresenta
um comportamento similar a uma senoide enquanto os demais permanecem
aproximadamente constantes.

Quadros
0 1000 2000 3000 4000 5000 6000 7000

In
te

n
si

d
a

d
e

 (
m

e
tr

o
s)

-0.5

0

0.5

1

1.5

2

Surge
Sway
Heave

(a) Parâmetros de translação do Vídeo 1
Quadros

0 1000 2000 3000 4000 5000 6000 7000

In
te

n
si

d
a

d
e

(g
ra

u
s)

-25

-20

-15

-10

-5

0

5

10

15

20

25

Roll
Pitch
Yaw

(b) Parâmetros de rotação do Vídeo 7

Fonte: O autor.

possível estimar o movimento nos demais graus de liberdade.

Na Tabela 3 pode-se observar que a amplitude dos parâmetros de translação foi
recuperada com acurácia em praticamente todo os casos avaliados. É importante ressaltar
que um erro de 2 centímetros para um objeto que está a 1.5 metros de duas câmeras
(afastadas entre si em 9 centímetros) pode ser considerado preciso.

As estimativas do pitch e yaw obtiveram um erro maior, mesmo sendo utilizados
valores pequenos de obliquidade (10?). O erro também foi maior nos casos em que a
amplitude da catenária foi igual a 55.4 centímetros, pois neste caso a curva apresenta
menor comprimento na direção vertical. Porém a estimativa do roll apresentou um erro
menor, possivelmente porque neste movimento não ocorre variação da obliquidade.

Corroborando o resultado anterior, a Tabela 4 mostra que o erro foi sempre maior
quando a catenária apresentou amplitude igual a 55.4 centímetros, devido ao comprimento
da curva na direção vertical (direção da segunda componente principal).

Entretanto, o erro de reconstrução da curva, apresentado na Tabela 5, apresentou
um resultado inverso, pois foram obtidos melhores resultados com a catenária apresentando
amplitude igual a 54.4 centímetros. Entretanto, é preciso ressaltar que os valores de erro
calculados são muito inferiores à precisão de medição do gabarito: o erro médio ficou
aproximadamente em 1 milímetro com desvio de no máximo 1.6 milímetro. Logo, conclui-se
que a obliquidade não apresentou diferenças significativas na geometria da curva.

Como mostrado no gráfico da Figura 19c, é esperado que uma obliquidade de 10?

não apresente diferenças significativas na geometria da curva. Porém, a má estimativa
dos ângulos de pitch e yaw indicam que o erro da reconstrução seria muito maior caso a
obliquidade fosse maior.



Capítulo 7. Resultados 84

Tabela 3 – Tabela de estimativas da amplitude do movimento do duto em cada grau de
liberdade nos experimentos realizados em ambiente aéreo. Para cada grau de
liberdade é informado o valor estimado a esquerda e o valor real a direita.
Como o posicionamento do duto em relação às câmeras não foi mensurado,
o movimento de roll não teve um valor de gabarito para todos os graus de
liberdade. Os valores são dados em centímetros.

Vídeo Surge Sway Heave Roll Pitch Yaw
1 47.25 50 1.75 0 -1.47 0 0.63 0 0.57 0 -3.92 0
2 47.08 50 0.14 0 2.92 0 -0.44 0 -1.51 0 1.17 0
3 2.52 0 49.51 50.00 -1.35 0 -0.20 0 0.27 0 0.27 0
4 0.43 0 38.13 40.00 -0.18 0 -0.38 0 -1.23 0 1.25 0
5 0.95 0 0.88 0 19.93 20.00 0.16 0 2.95 0 -0.66 0
6 -0.32 0 -1.15 0 19.86 20.00 -0.25 0 -1.35 0 0.23 0
7 1.46 0 -2.25 – 1.86 – 24.88 25.00 2.77 0 -0.76 0
8 -0.57 0 -3.74 – -0.66 – 24.92 25.00 -3.65 0 0.81 0
9 -4.13 0 -0.18 0 33.67 32.65 -0.15 0 5.51 10.00 -0.49 0
10 0.40 0 -0.52 0 33.86 32.65 -0.23 0 4.38 10.00 0.52 0
11 1.03 0 33.46 32.65 -0.63 0 -0.33 0 0.03 0 8.55 10.00
12 -0.02 0 26.67 26.16 -0.07 0 -0.04 0 -0.02 0 6.79 8.00

Tabela 4 – Tabela do erro da estimativa das amplitudes dos movimentos nos experimentos
em laboratório e em ambiente aéreo. O erro é medido utilizando os dados
especificados na Tabela 2. Observe que o erro obtido com amplitude igual 55.4
centímetros foi sempre superior devido ao fato da segunda componente principal
ser muito menor em relação a segunda componente quando a amplitude é de
30 centímetros. Os valores estão dados em centímetros

Video Surge Sway Heave Roll Pitch Yaw
1 1.8102 1.1144 0.9646 0.4156 0.6909 2.5717
2 1.9571 0.4208 6.5197 1.0887 1.5199 2.8120
3 1.9894 0.4848 1.1508 0.3097 0.9459 0.8652
4 1.1799 1.2569 0.6532 0.9717 1.6373 0.8906
5 0.7810 0.5740 0.1692 0.1717 2.0409 0.8656
6 0.8342 0.7970 0.2191 0.3831 2.8967 0.9221
7 1.1373 – – 0.2766 2.2083 0.6230
8 1.3932 – – 0.3851 7.6156 1.6790
9 2.8120 0.1479 0.6986 0.1464 2.9835 0.6765
10 1.1233 1.0210 0.7978 0.3352 3.7358 0.7490
11 1.0437 0.5613 0.6204 0.2546 1.1215 0.9954
12 0.9776 0.4077 0.4631 0.5049 1.3537 0.8481



Capítulo 7. Resultados 85

Tabela 5 – Tabela de erros de reconstrução da curva nos experimentos em laboratório e
em ambiente aéreo. O erro médio esteve em cerca de 0.1 milímetro e o erro
máximo médio permaneceu em todos os casos menor que 1 centímetro. Os
valores são dados em centímetros.

Caso Médio Desvio Máximo Méd Max Desv Max
1 0.1217 0.0462 0.8156 0.3563 0.1173
2 0.0536 0.0268 0.6978 0.1867 0.0838
3 0.3490 0.1673 1.8599 0.7979 0.3616
4 0.1013 0.0651 1.0471 0.2892 0.1529
5 0.1684 0.1248 1.0980 0.4087 0.2573
6 0.0706 0.0519 1.2279 0.2598 0.1341
7 0.1741 0.1113 1.3268 0.4110 0.2263
8 0.1773 0.1036 1.9368 0.5844 0.2577
9 0.1806 0.0843 0.9850 0.4342 0.1905
10 0.1157 0.0587 0.9610 0.3642 0.1616
11 0.1719 0.0979 1.5305 0.4247 0.1853
12 0.1609 0.0764 1.1133 0.3818 0.1615

7.4 EXPERIMENTOS EM AMBIENTE REAL
Serão apresentados nesta seção os resultados obtidos nos experimentos realizados

em uma operação real de instalação de dutos. A operação em questão realizou a conexão
de um duto flexível no equipamento submarino (conhecido como árvore de natal) a uma
profundidade de 2130 metros. Mais detalhes do cenário da operação encontram-se no
Capítulo 2.

Devido ao difícil acesso ao ambiente, não foi possível realizar medições precisas do
duto para obter um gabarito para o EMD. Porém, através do resultado do rastreamento,
é possível avaliar a estabilidade e a robustez da técnica aplicada no ambiente real. Estes
resultados estão descritos a seguir.

7.4.1 Vídeo 1

No primeiro vídeo foi analisada uma sequência com 670 quadros, ilustrados na Figura
38. Ao longo do duto foram posicionados flutuadores (boias) cujas amarras interferiram
no padrão de pintura criando protuberâncias. Além disso, na extremidade direita há uma
variação brusca na intensidade e no diâmetro do duto.

Visualmente essas dificuldades foram parcialmente superadas pelo rastreamento,
considerando que pequenos desvios são visíveis na curva. Porém o resultado final se mostrou
suave com o eixo medial corretamente localizado no centro do duto. Devido ao movimento
realizado pelo ROV, a extremidade direita do duto foi desenquadrada e não foi rastreada
até o final do vídeo.

Uma das razões da suavidade do resultado foi a utilização da função de pesos que



Capítulo 7. Resultados 86

Figura 38 – Resultado do rastreamento em amostras de quadros do Vídeo 1 capturado em
ambiente real. As amarras das boias desviaram um pouco a curva, porém o
resultado se manteve suave.

Quadro 690 (Esquerda)

Quadro 690 (Direita)

Quadro 2 (Esquerda)

Quadro 1 (Direita)

Quadro 200 (Esquerda)

Quadro 200 (Direita)

Fonte: Petrobras adaptada pelo autor.

Figura 39 – Resultado do rastreamento em amostra de quadro do Vídeo 1, capturado em
ambiente real, sem o uso da função de pesos. Note que a curva se tornou
menos suave, sofreu vários desvios e a parte do duto de menor diâmetro não
foi corretamente rastreada.

Fonte: Petrobras adaptada pelo autor.

reduz a importância das regiões de borda do duto. A Figura 39 ilustra um quadro do vídeo
sem o uso da função de pesos: os desvios da curva se tornaram mais acentuados na região
em que o duto diminui de diâmetro e nas regiões em que há amarras. Além disso, é clara
a presença de jitter ao longo dos quadros do vídeo.



Capítulo 7. Resultados 87

Figura 40 – Resultado do rastreamento em amostras de quadros do Vídeo 2, capturado em
ambiente real. Nesse caso o duto está sendo observado de um ponto de vista
oblíquo, o duto também possui protuberâncias provenientes das amarras.

Quadro 397 (Esquerda)

Quadro 397 (Direita)

Quadro 2 (Esquerda)

Quadro 2 (Direita)

Quadro 200 (Esquerda)

Quadro 200 (Direita)

Fonte: Petrobras adaptada pelo autor.

7.4.2 Vídeo 2

No segundo vídeo, o duto foi capturado de um ponto de vista oblíquo em relação à
câmera, como ilustrado em alguns quadros na Figura 40. Note que as amarras e lingadas
na borda do duto desviaram menos o EMD.

A importância de um resultado preciso da reconstrução para o algoritmo de
rastreamento fica clara nesse vídeo. Devido à obliquidade, a espessura do duto é variável
ao longo da imagem. Porém ao ser considerada a posição do duto no quadro anterior é
possível modelar corretamente a região de projeção do duto.

A Figura 41 ilustra o resultado após a transformação da imagem pelo algoritmo de
rastreamento. Note que à medida que o duto se distancia, a imagem tende a ficar mais
borrada. A transformada da imagem torna o diâmetro do duto uniforme ocasionando uma
upsampling nessa região.

7.4.3 Vídeo 3

O Vídeo 3 foi capturado em um cenário cuja iluminação foi sendo incrementada
gradativamente. Nos primeiros quadros, a quantidade reduzida de luz ocasionou ruído na
imagem proveniente da amplificação do sinal da câmera. Alguns quadros estão ilustrados
na Figura 42. Esse cenário pode ser considerado como um caso extremo e que dificilmente
ocorrerá em situações reais, porém serve para ilustrar a robustez da técnica proposta.

Nos primeiros quadros, o rastreamento apresentou um efeito de jitter relevante.



Capítulo 7. Resultados 88

Figura 41 – Imagens transformadas pelo algoritmo de rastreamento no quadro 2 do Vídeo
2. As linhas brancas delimitam a região considerada como pertencente ao
duto.

(a) Imagem esquerda. (b) Imagem direita.

Fonte: Petrobras adaptada pelo autor.

Figura 42 – Resultado do rastreamento em amostras de quadros do Vídeo 3, capturado
em ambiente real. Devida à baixa iluminação, as imagens apresentaram muito
ruído criando o efeito de jitter nos quadros iniciais. Contudo, à medida que a
iluminação foi sendo ajustada, o rastreamento passou a fornecer resultados
estáveis.

Quadro 1000 (Esquerda)

Quadro 1000 (Direita)

Quadro 2 (Esquerda)

Quadro 2 (Direita)

Quadro 150 (Esquerda)

Quadro 150 (Direita)

Fonte: Petrobras adaptada pelo autor.



Capítulo 7. Resultados 89

Figura 43 – Resultado do rastreamento em amostras de quadros do Vídeo 4, capturado
em ambiente real. As câmeras realizaram um movimento de aproximação em
relação ao duto. A variação do tamanho do duto na imagem mostra que o
rastreamento longitudinal expandiu corretamente o duto.

Quadro 1300 (Esquerda)

Quadro 1300 (Direita)

Quadro 2 (Esquerda)

Quadro 2 (Direita)

Quadro 650 (Esquerda)

Quadro 650 (Direita)

Fonte: Petrobras adaptada pelo autor.

Parte da extremidade esquerda da curva não foi corretamente rastreada, indicando uma
contração indevida da curva pelo rastreamento longitudinal. Porém, à medida que a
iluminação se normalizou, o rastreamento passou a apresentar um resultado estável, porém
sem rastrear a extremidade esquerda da curva. Como o algoritmo de rastreamento não
identifica novas partes do duto que podem ser rastreadas, os últimos quadros apresentam
trechos de duto visíveis, mas não reconstruídos.

7.4.4 Vídeo 4

No Vídeo 4 o duto realizou um movimento de aproximação em direção às câmeras,
como ilustrado na Figura 43. Nos primeiros quadros o duto estava longe e ocupava uma
pequena região da imagem. O rastreamento longitudinal conseguiu seguir e expandir
corretamente as extremidades do duto, porém verifica-se que uma marcação branca na
extremidade esquerda não foi rastreada até o final do vídeo.

Além disso, é possível observar na Figura 43 que os últimos quadros da extremidade
direita da curva sofreram um desvio maior devido à protuberância causada pelas amarras
da boia. Esse comportamento deve-se ao fato de que a não continuidade da curva nas
extremidades permite que ela seja mais suscetível a erros e apresente o efeito de jitter.



Capítulo 7. Resultados 90

Figura 44 – Resultado do rastreamento em amostras de quadros do Vídeo 5, capturado em
ambiente real. Esse cenário pode ser considerado um dos casos mais simples
para o algoritmo de rastreamento, pois a obliquidade é pequena, a imagem
está nítida e não há variação de diâmetro do duto.

Quadro 350(Esquerda)

Quadro 350 (Direita)

Quadro 2 (Esquerda)

Quadro 2 (Direita)

Quadro 175 (Esquerda)

Quadro 175 (Direita)

Fonte: Petrobras adaptada pelo autor.

7.4.5 Vídeo 5

O último vídeo analisado (Vídeo 5) pode ser considerado um caso simples para o
problema dessa proposta, conforme ilustrado na Figura 44. O duto aparece marcado de
forma correta e regular, está bem visível e a câmera realizou poucos movimentos.

Dentro do esperado, o rastreamento apresentou um resultado suave e estável. Devido
à poeira presente na extremidade esquerda do duto, a curva apresentou um pouco de
instabilidade nessa região em alguns quadros.

7.4.6 Casos de estresse

Nesta seção serão apresentados um conjunto de testes realizados, nos quais o
rastreamento é inicializado com uma curva especificada manualmente para os piores casos.
Esses testes objetivaram explorar os limites dos algoritmos, possibilitando analisar o
comportamento da técnica em casos de estresse e avaliar sua robustez.

O resultado está ilustrado na Figura 45. Observe que, mesmo quando a curva não
está sobre o duto, o rastreamento consegue encontrar a parte central do duto. Como a
região de projeção calculada no rastreamento contém parte do duto, o algoritmo localiza o
restante do duto ao maximizar a energia nas proximidades da região. Outro aspecto é que
as amarras, mesmo sendo regiões de alta intensidade, não perturbam o algoritmo. Como a
curva é modelada através de splines, o resultado tende a ser suave, impedindo que a curva



Capítulo 7. Resultados 91

Figura 45 – Resultados do rastreamento nos casos de estresse do algoritmo. As imagens à
esquerda representam a curva de entrada para o algoritmo no primeiro quadro
do vídeo. As imagens do meio e da direita são, respectivamente, o primeiro
e o segundo quadro do vídeo após a execução do algoritmo de rastreamento.
São exibidas apenas as imagens da câmera esquerda devido à sua similaridade
com o resultado nas imagens da câmera direita.

Fonte: Petrobras adaptada pelo autor.



Capítulo 7. Resultados 92

apresente desvios bruscos.

Em alguns casos, a curva no primeiro quadro não apresenta um bom resultado por
demandar mais iterações. Porém após um ou dois quadros, o resultado converge para uma
posição adequada.

7.5 ANÁLISE GERAL
Esta seção apresenta uma análise dos algoritmos de rastreamento e reconstrução,

abordando características como erro de reprojeção, desempenho e tempo de execução.
As conclusões apresentadas estão baseadas no comportamento dos algoritmos nos vídeos
capturados e analisados.

7.5.1 Erro de reprojeção

O algoritmo de reconstrução da curva obteve um RMS (Root Mean Square - raiz
da média quadrada) do erro de reprojeção (HARTLEY; ZISSERMAN, 2004) entre 0.05
e 0.25 pixel nos vídeos realizados em laboratório. Nos vídeos capturados em ambientes
reais o RMS obtido estava entre 0.3 e 0.4 pixel. O desvio padrão do RMS foi menor que
0.1 pixel em todos os casos analisados, portanto o erro se manteve estável ao longo do
vídeo. Esse valor de desvio padrão é considerado bom, pois significa que o algoritmo de
rastreamento alcançou uma precisão de subpixel.

Uma possível explicação para a variação do erro no laboratório e no ambiente
real pode ser dada pelos parâmetros das câmeras (parâmetros intrínsecos e pose), que
podem estar refletindo o erro da calibração realizada no fundo do mar. A calibração nesse
ambiente é mais suscetível a falhas (devido à variação do índice de refração, temperatura,
ambiente não controlado, etc.) quando comparada com a realizada em laboratório. Outra
possibilidade, é o fato do duto nas imagens reais aparecer em uma região mais espessa
do que nos vídeos realizados no laboratório. Esse fato pode ter aumentado a região de
incerteza da posição do EMD na imagem.

Observou-se também que a região das extremidades do duto obteve o maior erro de
reprojeção na maioria dos casos analisados. Devido à ausência de continuidade da curva,
as extremidades são mais suscetíveis a efeitos de jitter do que a porção central do duto.

7.5.2 Iterações

Os critérios de parada utilizados para o Gauss-Newton no algoritmo de rastreamento
foram: o número máximo de 15 iterações ou o deslocamento máximo de cada ponto do
EMD menor que 0.05 pixel. A convergência obteve a média de 5 iterações no segundo
nível da pirâmide e 4 no primeiro nível (imagem em tamanho original), tanto nas imagens



Capítulo 7. Resultados 93

da câmera esquerda, como nas da direita. O desvio padrão do número de iterações foi
aproximadamente 1 para o segundo nível da pirâmide e 3 para o primeiro. Dentre os vídeos
analisados, aquele que obteve o maior número de iterações foi o Vídeo 2 dos experimentos
em ambiente submerso (Seção 7.3.1.2). A água turva introduziu ruídos na imagem e a
deixou com pouco contraste, fazendo com que o algoritmo necessitasse de mais iterações
para convergir.

No algoritmo de reconstrução foi utilizado como critério de parada um valor máximo
de iterações igual a 50 ou quando a variação do RMS fosse igual ou menor do que 10?4 pixel.
Segundo (WANG; POTTMANN; LIU, 2006), a otimização simultânea da parametrização
dos pontos amostrais e dos pontos de controle apresenta convergência linear, e logo precisa
de muitas iterações para convergir. Entretanto, devido à suavidade da curva, a aproximação
linear da Hessiana ficou mais precisa, tornando os passos iterativos do algoritmo mais
eficientes.

O número de iterações médio por vídeo ficou no intervalo entre 3 e 29. No caso
em que foram necessárias 29 iterações, o desvio padrão atingiu um valor igual a 17. Os
Vídeos 2 e 3 do experimento em ambiente aquático (Seção 7.3.1.2 e Seção 7.3.1.3) foram
os que apresentaram maior número de iterações, devido ao ruído presente na imagem.
Nesses casos, a projeção do EMD rastreado apresentou um comportamento menos suave,
tornando a convergência mais lenta.

O critério de convergência com base no RMS igual a 10?4 pixel pode ser considerado
um critério de parada prematuro, pois é comum algoritmos apresentarem limiares iguais a
10?8. Porém, observou-se que, devido à convergência linear do método, para atingir esses
valores o algoritmo iria demandar muitas iterações. Utilizando um limiar igual a 10?4, os
pontos de controle no momento da convergência apresentam uma evolução entre 0.01 e
0.03 pixel. Trata-se de uma evolução pequena e que não deve influenciar na acurácia do
resultado final, de acordo com alguns experimentos realizados, porém não relatados neste
documento.

7.5.3 Tempo

O tempo de execução do algoritmo de rastreamento é dependente, principalmente,
de dois fatores: o número de iterações e a área visível do duto na imagem. O rastreamento
de cada imagem leva em média 10 milissegundos e apresenta um desvio padrão de 3
milissegundos. O tempo de execução da técnica de reconstrução da curva é dependente do
número de iterações e do comprimento do EMD na imagem.

Os Vídeos 2 e 3 do experimento em ambiente aquático (Seção 7.3.1.2 e Seção
7.3.1.3) demandaram de 10 a 12 milissegundos por quadro para reconstruir a curva. Esses
foram os maiores tempos encontrados entre todos os vídeo avaliados. Os demais vídeos



Capítulo 7. Resultados 94

apresentaram tempo inferior a 6 milissegundos por quadro para reconstruir a curva.

A execução em série do rastreamento de duas imagens e a reconstrução da curva
consomem um tempo menor que 34 milissegundos. Logo, os algoritmos apresentam uma
frequência maior do que a transmissão do vídeo, que é no máximo de 30 hertz.

7.6 CONSIDERAÇÕES FINAIS
Este capítulo apresentou os resultados obtidos a partir de experimentos realizados

tanto em laboratório como em ambiente real, cujo objetivo foi avaliar os algoritmos
propostos. A partir dos resultados da reconstrução da curva em laboratório, pode-se
observar que uma precisão milimétrica foi alcançada na maioria dos casos. Estes testes
também mostraram que a obliquidade e a distribuição dos pontos da curva influenciam
diretamente a estimativa do plano. Os testes em imagens capturadas de uma operação
real ilustraram a acurácia visual dos resultados obtidos pelo rastreamento.

Como a precisão obtida em laboratório foi superior àquela requisitada na operação,
é esperado que os algoritmos propostos apresentem resultados aceitáveis no cenário real.



95

8 CONCLUSÃO

Atualmente, a comparação entre as imagens do duto e dos modelos físicos simulados
é feita de forma manual e baseada na experiência do engenheiro. A utilização de métodos de
visão computacional pode permitir que esse procedimento seja feito de forma automática e
simultaneamente a captura das imagens. Além disso, é possível obter uma análise de mais
confiável do que o procedimento atual, uma vez que não é baseada na opinião subjetiva do
engenheiro.

No escopo de oferecer uma solução automática para a instalação de dutos é
necessário atender, resumidamente, a dois requisitos:

1. O resultado da geometria da curva deve ser estimado em tempo real, ou seja, a uma
frequência igual ou maior do que a frequência de captura das câmeras;

2. Apresentar uma acurácia na estimativa da curva de pelo menos um centésimo do
comprimento da curva rastreada.

Diante dos requisitos apresentados acima, esta dissertação de mestrado propôs e
validou dois algoritmos (um para rastreamento e outro para reconstrução) para auxiliar a
tomada de decisão dos engenheiros durante as operações de instalações de dutos.

8.1 PRINCIPAIS CONCLUSÕES
A seguir estão enumeradas as principais conclusões derivadas das análises dos

resultados obtidos:

1. Os algoritmos atenderam aos requisitos de performance, obtendo uma taxa superior
a 31 quadros por segundo. Provavelmente, a paralelização da implementação pode
permitir obter taxas mais altas;

2. Os experimentos em laboratório demonstraram que a precisão requisitada foi al-
cançada. Nos casos analisados o erro máximo médio ficou muito abaixo de 1.6
centímetros, que corresponde a 1 centésimo do comprimento rastreável do duto. Com
exceção do Vídeo 4 em ambiente aquático, que obteve erro de 1.2 centímetro, os
demais vídeos apresentaram erro inferior a 1 centímetro;

3. Testes utilizando imagens reais indicam que o algoritmo de rastreamento apresen-
tou um resultado satisfatório na estimativa da projeção do EMD. Foram obtidos
resultados robustos em vídeos com baixo contraste e capturado de pontos de vista



Capítulo 8. Conclusão 96

oblíquos. A função de pesos (Seção 5.5.1) conseguiu minimizar na maioria dos casos
imperfeições na borda do duto;

4. O ponto de vista das câmeras em relação ao duto, assim como a disposição dos
pontos da curva no espaço influenciam a precisão do resultado. Portanto, deve ser
evitada a captura de imagens em pontos de vistas oblíquos em relação à segunda
componente principal dos pontos.

8.2 PRINCIPAIS CONTRIBUIÇÕES
Como contribuições desta dissertação de mestrado, podemos citar a investigação

do cenário de instalação de dutos sob a óptica de visão computacional, explorando fatores
como iluminação, câmeras, características da imagem, etc. Este estudo pode ser expandido
ou reaproveitado em outras soluções de visão computacional neste mesmo cenário.

O algoritmo para rastreamento estéreo de dutos contribuiu com o estado da arte de
rastreamento e detecção de dutos em ambiente submarino. Embora trate-se de uma técnica
específica para o cenário do problema, a abordagem estratificada nas direções longitudinal
e transversal pode ser adaptada para resolver outros problemas de rastreamento.

A adaptação do algoritmo de Xiao e Li (XIAO; LI, 2005) também é considerada
uma contribuição. A restrição de planaridade da curva pode existir em outros problemas
de reconstrução 3D de curvas, podendo assim ser aplicada a técnica proposta.

Este trabalho também originou um contribuição científica através da publicação
do artigo intitulado "Stereo Tracking and 3D Reconstruction of Underwater Pipes" na
conferência internacional BMVC 2015.

Por fim, podemos citar as seguintes publicações como contribuições científicas
indiretas:

1. Saulo Pessoa, Vinicius Cesar, Bernardo Reis, Judith Kelner and Ismael Santos.
A Segmentation Technique for Flexible Pipes in Deep Underwater Environments.
Proceedings of the British Machine Vision Conference (BMVC), September 2015;

2. Vinícius Cesar, Thiago Farias, Saulo Pessoa, Samuel Macedo, Judith Kelner, Ismael
Santos."Uncalibrated Image Rectification for Coplanar Stereo Cameras". International
Joint Conference on Computer Vision, Imaging and Computer Graphics Theory
(VISAPP), January 2014;

3. Samuel Macedo, Luis Vasconcelos, Vinicius Cesar, Saulo Pessoa, Judith Kelner.
"SKen: A Statistical Test for Removing Outliers in Optical Flow - A 3D Recons-
truction Case". International Joint Conference on Computer Vision, Imaging and
Computer Graphics Theory (VISAPP), January 2014.



Capítulo 8. Conclusão 97

8.3 TRABALHOS FUTUROS
Embora o objetivo desta dissertação tenha sido alcançado, ainda há contribuições

que podem ser realizadas para estender e aperfeiçoar a pesquisa.

Dentre uma das modificações que podem tornar os resultados mais precisos seria
incorporar técnicas de filtragem na estimativa do plano. Observou-se nos resultados que o
plano da curva é estimado com um jitter relevante e que muitas vezes este efeito provocou
picos de erro máximo. Eliminando o jitter com base na premissa de que o movimento
entre o duto e câmera é lento irá permitir que uma curva reconstruída mais precisa seja
estimada.

Outra melhoria é fornecer ao algoritmo de rastreamento a capacidade de adicionar
trechos de dutos que surjam na imagem. Na proposta atual, é rastreado apenas o trecho
de duto dado na inicialização. Porém, se o algoritmo for combinado com alguma técnica
de detecção do duto, novos trechos podem ser incorporados ao mesmo tempo em que o
duto é rastreado.

Por fim, este trabalho pode ser estendido para generalizar a técnica de rastrea-
mento proposta para dutos em cenários arbitrários. A partir da abordagem estratificada
(rastreamento longitudinal e transversal) pode-se definir outros critérios que definem a
probabilidade de um pixel da imagem pertencer ao duto para permitir o uso em imagens
genéricas.



98

REFERÊNCIAS

ABBENA, E.; SALAMON, S.; GRAY, A. Modern differential geometry of curves and
surfaces with Mathematica. [S.l.]: CRC press, 2006. 45

AHMED, M. et al. A hybrid parameterization method for nurbs. In: IEEE. Computer
Graphics, Imaging and Visualization, 2004. CGIV 2004. Proceedings. International
Conference on. [S.l.], 2004. p. 15–20. 41

AN, M.; LEE, C. Stereo vision based on algebraic curves. In: IEEE. Pattern Recognition,
1996., Proceedings of the 13th International Conference on. [S.l.], 1996. v. 1, p. 476–482.
28

ANANDAN, P. A computational framework and an algorithm for the measurement of
visual motion. International Journal of Computer Vision, Springer, v. 2, n. 3, p. 283–310,
1989. 52

ANCUTI, C. et al. Enhancing underwater images and videos by fusion. In: IEEE.
Computer Vision and Pattern Recognition (CVPR), 2012 IEEE Conference on. [S.l.],
2012. p. 81–88. 23

ANTICH, J.; ORTIZ, A. Underwater cable tracking by visual feedback. In: Pattern
Recognition and Image Analysis. [S.l.]: Springer, 2003. p. 53–61. 27

ASIF, M.; ARSHAD, M. R. An active contour and kalman filter for underwater target
tracking and navigation. [S.l.]: INTECH Open Access Publisher, 2006. 26, 27

BALASURIYA, A.; URA, T. Multi-sensor fusion for autonomous underwater cable
tracking. In: IEEE. OCEANS’99 MTS/IEEE. Riding the Crest into the 21st Century.
[S.l.], 1999. v. 1, p. 209–215. 26, 27

BALASURIYA, B. et al. Vision based autonomous underwater vehicle navigation:
underwater cable tracking. In: IEEE. OCEANS’97. MTS/IEEE Conference Proceedings.
[S.l.], 1997. v. 2, p. 1418–1424. 26, 27

BENHIMANE, S.; MALIS, E. Real-time image-based tracking of planes using efficient
second-order minimization. In: IEEE. Intelligent Robots and Systems, 2004.(IROS 2004).
Proceedings. 2004 IEEE/RSJ International Conference on. [S.l.], 2004. v. 1, p. 943–948. 36

BERTHILSSON, R.; ASTROM, K.; HEYDEN, A. Reconstruction of curves in r 3, using
factorization and bundle adjustment. In: IEEE. Computer Vision, 1999. The Proceedings
of the Seventh IEEE International Conference on. [S.l.], 1999. v. 1, p. 674–679. 29

BERTHILSSON, R.; ÅSTRÖM, K.; HEYDEN, A. Reconstruction of general curves, using
factorization and bundle adjustment. International Journal of Computer Vision, Springer,
v. 41, n. 3, p. 171–182, 2001. 29

BONIN, F.; BURGUERA, A.; OLIVER, G. Imaging systems for advanced underwater
vehicles. Journal of Maritime Research, v. 8, n. 1, p. 65–86, 2014. 15

BOOR, C. D. A practical guide to splines. Mathematics of Computation, 1978. 41



Referências 99

BRADSKI, G. Opencv. Dr. Dobb’s Journal of Software Tools, 2000. 68

BRINT, A.; BRADY, M. Stereo matching of curves by least deformation. In: Intelligent
Robots and Systems ’89. The Autonomous Mobile Robots and Its Applications. IROS ’89.
Proceedings., IEEE/RSJ International Workshop on. [S.l.: s.n.], 1989. p. 163–170. 29

BURDINSKY, I.; MYAGOTIN, A. Navigation of autonomous underwater vehicles using
acoustic and visual data processing. In: Computer Vision in Control Systems-2. [S.l.]:
Springer, 2015. p. 231–250. 15

CHEN, H. et al. Exploring robotic applications in offshore oil&amp;amp;gas industry. In: IEEE.
Cyber Technology in Automation, Control, and Intelligent Systems (CYBER), 2014 IEEE
4th Annual International Conference on. [S.l.], 2014. p. 563–568. 15

DAME, A.; MARCHAND, E. Accurate real-time tracking using mutual information. In:
IEEE. Mixed and Augmented Reality (ISMAR), 2010 9th IEEE International Symposium
on. [S.l.], 2010. p. 47–56. 36

DAVID, A.; JEAN, P. Computer vision: a modern approach. [S.l.]: Prentice-Hall
Englewood Cliffs, 2002. 15

DERICHE, R.; FAUGERAS, O. 2-d curve matching using high curvature points:
application to stereo vision. In: Pattern Recognition, 1990. Proceedings., 10th International
Conference on. [S.l.: s.n.], 1990. i, p. 240–242 vol.1. 29

DRAP, P. et al. The rov 3d project: Deep-sea underwater survey using photogrammetry:
Applications for underwater archaeology. Journal on Computing and Cultural Heritage
(JOCCH), ACM, v. 8, n. 4, p. 21, 2015. 15

FARIN, G. Curves and surfaces for computer-aided geometric design: a practical guide.
[S.l.]: Elsevier, 2014. 31, 41

FAUGERAS, O.; PAPADOPOULO, T. A theory of the motion fields of curves.
International Journal of Computer Vision, Springer, v. 10, n. 2, p. 125–156, 1993. 29

FLETCHER, R. Practical methods of optimization. [S.l.]: John Wiley &amp;amp; Sons, 2013. 31

FORESTI, G. L.; GENTILI, S. A vision based system for object detection in underwater
images. International Journal of Pattern Recognition and Artificial Intelligence, v. 14,
n. 02, p. 167–188, 2000. 26, 27

FRITZKOWSKI, P.; KAMINSKI, H. Dynamics of a rope modeled as a multi-body system
with elastic joints. Computational Mechanics, Springer-Verlag, v. 46, n. 6, p. 901–909,
2010. ISSN 0178-7675. 21

FUSIELLO, A.; IRSARA, L. Quasi-euclidean uncalibrated epipolar rectification. In:
Pattern Recognition, 2008. ICPR 2008. 19th International Conference on. [S.l.: s.n.], 2008.
p. 1–4. ISSN 1051-4651. 35

FUSIELLO, A.; TRUCCO, E.; VERRI, A. A compact algorithm for rectification of stereo
pairs. Mach. Vision Appl., Springer-Verlag New York, Inc., Secaucus, NJ, USA, v. 12,
n. 1, p. 16–22, jul. 2000. ISSN 0932-8092. 35, 55



Referências 100

GARCIA, R. et al. Positioning an underwater vehicle through image mosaicking. In:
IEEE. Robotics and Automation, 2001. Proceedings 2001 ICRA. IEEE International
Conference on. [S.l.], 2001. v. 3, p. 2779–2784. 15

GRAU, A.; CLIMENT, J.; ARANDA, J. Real-time architecture for cable tracking using
texture descriptors. In: IEEE. OCEANS’98 Conference Proceedings. [S.l.], 1998. v. 3, p.
1496–1500. 27

GUENNEBAUD, G.; JACOB, B. et al. Eigen v3. 2010. Http://eigen.tuxfamily.org. 68

HANSEN, P. et al. Stereo visual odometry for pipe mapping. In: Intelligent Robots
and Systems (IROS), 2011 IEEE/RSJ International Conference on. [S.l.: s.n.], 2011. p.
4020–4025. ISSN 2153-0858. 25

HANSEN, P. et al. Pipe mapping with monocular fisheye imagery. In: Intelligent Robots
and Systems (IROS), 2013 IEEE/RSJ International Conference on. [S.l.: s.n.], 2013. p.
5180–5185. ISSN 2153-0858. 25

HARON, H. et al. Parameterization method on b-spline curve. Mathematical Problems in
Engineering, Hindawi Publishing Corporation, v. 2012, 2012. 31, 41

HARTLEY, R. I. Theory and Practice of Projective Rectification. 1998. 35

HARTLEY, R. I.; ZISSERMAN, A. Multiple View Geometry in Computer Vision. Second.
[S.l.]: Cambridge University Press, ISBN: 0521540518, 2004. 31, 92

HONG, W.; MA, Y.; YU, Y. Reconstruction of 3-d symmetric curves from perspective
images without discrete features. In: Computer Vision-ECCV 2004. [S.l.]: Springer, 2004.
p. 533–545. 29

HORGAN, J.; TOAL, D. Review of machine vision applications in unmanned underwater
vehicles. In: Control, Automation, Robotics and Vision, 9th International Conference on.
[S.l.: s.n.], 2006. p. 1–6. 23

HORGAN, J.; TOAL, D. Computer Vision Applications in the Navigation of Unmanned
Underwater Vehicles. [S.l.]: INTECH Open Access Publisher, 2009. 15

HOSCHEK, J.; LASSER, D.; SCHUMAKER, L. L. Fundamentals of computer aided
geometric design. [S.l.]: AK Peters, Ltd., 1993. 41

IQBAL, K. et al. Underwater image enhancement using an integrated colour model.
IAENG International Journal of Computer Science, International Association of
Engineers., v. 32, n. 2, p. 239–244, 2007. 23

JIAN-DONG, Z. et al. 3d curve structure reconstruction from a sparse set of unordered
images. Computers in industry, Elsevier, v. 60, n. 2, p. 126–134, 2009. 29

JOLLIFFE, I. Principal component analysis. [S.l.]: Wiley Online Library, 2002. 65

KALMAN, R. E. A new approach to linear filtering and prediction problems. Journal of
Fluids Engineering, American Society of Mechanical Engineers, v. 82, n. 1, p. 35–45, 1960.
79



Referências 101

KAMINSKI, J. Y. et al. Multiple view geometry of non-planar algebraic curves. In: IEEE.
Computer Vision, 2001. ICCV 2001. Proceedings. Eighth IEEE International Conference
on. [S.l.], 2001. v. 2, p. 181–186. 28, 29

KAMINSKI, J. Y.; SHASHUA, A. On calibration and reconstruction from planar curves.
In: Computer Vision-ECCV 2000. [S.l.]: Springer, 2000. p. 678–694. 28

KEDEM, K.; YARMOVSKI, Y. Curve based stereo matching using the minimum hausdorff
distance. In: ACM. Proceedings of the twelfth annual symposium on Computational
geometry. [S.l.], 1996. p. 415–418. 29

KIA, C.; ARSHAD, M. R. Robotics vision-based heuristic reasoning for underwater target
tracking and navigation. arXiv preprint cs/0601064, 2006. 26, 27

LEE, E. T. Choosing nodes in parametric curve interpolation. Computer-Aided Design,
Elsevier, v. 21, n. 6, p. 363–370, 1989. 41

LEVENBERG, K. A method for the solution of certain non–linear problems in least
squares. Quarterly of Applied Mathematics, 1944. 40

LI, G.; ZUCKER, S. W. Contextual inference in contour-based stereo correspondence.
International Journal of Computer Vision, Springer, v. 69, n. 1, p. 59–75, 2006. 29

LI, L.; MA, S. D. 3d pose estimation from an n-degree planar curved feature in
two perspective views. In: IEEE. Pattern Recognition, 1996., Proceedings of the 13th
International Conference on. [S.l.], 1996. v. 1, p. 374–377. 28

LIM, C.-G. A universal parametrization in b-spline curve and surface interpolation.
Computer Aided Geometric Design, Elsevier, v. 16, n. 5, p. 407–422, 1999. 41

LOCKWOOD, E. H. A book of curves. [S.l.]: Cambridge University Press, 1971. 21, 68

LOOP, C.; ZHANG, Z. Computing rectifying homographies for stereo vision. In: IEEE.
Computer Vision and Pattern Recognition, 1999. IEEE Computer Society Conference on.
[S.l.], 1999. v. 1. 35

LÜ, W. Curves with chord length parameterization. Computer Aided Geometric Design,
Elsevier, v. 26, n. 3, p. 342–350, 2009. 41

MA, S. D. Conics-based stereo, motion estimation, and pose determination. International
journal of computer vision, Springer, v. 10, n. 1, p. 7–25, 1993. 28

MAI, F.; HUNG, Y. 3d curves reconstruction from multiple images. In: IEEE. Digital
Image Computing: Techniques and Applications (DICTA), 2010 International Conference
on. [S.l.], 2010. p. 462–467. 29

MARQUARDT, D. W. An algorithm for least-squares estimation of nonlinear parameters.
Journal of the Society for Industrial &amp;amp; Applied Mathematics, SIAM, v. 11, n. 2, p. 431–441,
1963. 40

MATSUMOTO, S.; ITO, Y. Real-time vision-based tracking of submarine-cables for
auv/rov. In: IEEE. OCEANS’95. MTS/IEEE. Challenges of Our Changing Global
Environment. Conference Proceedings. [S.l.], 1995. v. 3, p. 1997–2002. 26, 27



Referências 102

NAGLE, F. et al. Vertical connection system for flexible pipes: Offshore tests and pioneer
installation. In: Offshore Technology Conference. [S.l.: s.n.], 1993. 15

NARIMANI, M.; NAZEM, S.; LOUEIPOUR, M. Robotics vision-based system for an
underwater pipeline and cable tracker. In: OCEANS 2009 - EUROPE. [S.l.: s.n.], 2009.
p. 1–6. 27

NASRABADI, N.; LIU, Y.; CHIANG, J. Stereo vision correspondence using a multichannel
graph matching technique. In: Robotics and Automation, 1988. Proceedings., 1988 IEEE
International Conference on. [S.l.: s.n.], 1988. p. 1804–1809 vol.3. 29

NGUYEN, H. G.; KAOMEA, P. K.; JR, P. J. H. Machine visual guidance for an
autonomous undersea submersible. In: INTERNATIONAL SOCIETY FOR OPTICS
AND PHOTONICS. 32nd Annual Technical Symposium. [S.l.], 1988. p. 82–89. 26

ORTIZ, A.; OLIVER, G.; FRAU, J. A vision system for underwater real-time control
tasks. In: IEEE. OCEANS’97. MTS/IEEE Conference Proceedings. [S.l.], 1997. v. 2, p.
1425–1430. 26, 27

ORTIZ, A.; SIMÓ, M.; OLIVER, G. A vision system for an underwater cable tracker.
Machine vision and applications, Springer, v. 13, n. 3, p. 129–140, 2002. 14, 27

PAJARES, G.; CRUZ, J. M. de la; LÓPEZ-OROZCO, J. A. Relaxation labeling in stereo
image matching. Pattern Recognition, Elsevier, v. 33, n. 1, p. 53–68, 2000. 29

PAPADOPOULO, T.; FAUGERAS, O. Computing structure and motion of general 3d
curves from monocular sequences of perspective images. In: Computer Vision—ECCV’96.
[S.l.]: Springer, 1996. p. 696–708. 29

PESSOA, S. et al. A segmentation technique for flexible pipes in deep underwater
environments. In: JONES, X. X. M. W.; TAM, G. K. L. (Ed.). Proceedings of the British
Machine Vision Conference (BMVC). [S.l.]: BMVA Press, 2015. p. 135.1–135.12. ISBN
1-901725-53-7. 17

PIEGL, L.; TILLER, W. The NURBS book. [S.l.]: Springer Science &amp;amp; Business Media,
2012. 31

PORRILL, J.; POLLARD, S. Curve matching and stereo calibration. Image and Vision
Computing, Elsevier, v. 9, n. 1, p. 45–50, 1991. 29

QUAN, L. Conic reconstruction and correspondence from two views. Pattern Analysis
and Machine Intelligence, IEEE Transactions on, IEEE, v. 18, n. 2, p. 151–160, 1996. 28

RIPLEY, B. D. Pattern recognition and neural networks. [S.l.]: Cambridge university
press, 1996. 27

ROBERT, L.; FAUGERAS, O. D. Curve-based stereo: Figural continuity and curvature.
In: IEEE. Computer Vision and Pattern Recognition, 1991. Proceedings CVPR’91., IEEE
Computer Society Conference on. [S.l.], 1991. p. 57–62. 29

ROH, S. et al. Actively steerable in-pipe inspection robots for underground urban gas
pipelines. In: Robotics and Automation, 2001. Proceedings 2001 ICRA. IEEE International
Conference on. [S.l.: s.n.], 2001. v. 1, p. 761–766 vol.1. ISSN 1050-4729. 25



Referências 103

SATO, J.; CIPOLLA, R. Quasi-invariant parameterisations and matching of curves in
images. International Journal of Computer Vision, Springer, v. 28, n. 2, p. 117–136, 1998.
29

SCHMID, C.; ZISSERMAN, A. The geometry and matching of lines and curves over
multiple views. International Journal of Computer Vision, Springer, v. 40, n. 3, p.
199–233, 2000. 29

SHAN, Y.; ZHANG, Z. New measurements and corner-guidance for curve matching with
probabilistic relaxation. International Journal of Computer Vision, Springer, v. 46, n. 2, p.
157–171, 2002. 29

SUN, F.; YU, J.; XU, D. Visual measurement and control for underwater robots: A survey.
In: IEEE. Control and Decision Conference (CCDC), 2013 25th Chinese. [S.l.], 2013. p.
333–338. 15

SZELISKI, R. Computer vision: algorithms and applications. [S.l.]: Springer Science &amp;amp;
Business Media, 2010. 22, 31, 34

THIRION, B. et al. Fusion of color, shading and boundary information for factory pipe
segmentation. In: Computer Vision and Pattern Recognition, 2000. Proceedings. IEEE
Conference on. [S.l.: s.n.], 2000. v. 2, p. 349–356 vol.2. ISSN 1063-6919. 27

TRIGGS, B. et al. Bundle adjustment—a modern synthesis. In: Vision algorithms: theory
and practice. [S.l.]: Springer, 2000. p. 298–372. 54

WANG, W.; POTTMANN, H.; LIU, Y. Fitting b-spline curves to point clouds by
curvature-based squared distance minimization. ACM Transactions on Graphics (ToG),
ACM, v. 25, n. 2, p. 214–238, 2006. 31, 41, 56, 63, 93

WHITCOMB, L. L. Underwater robotics: Out of the research laboratory and into the field.
In: IEEE. Robotics and Automation, 2000. Proceedings. ICRA’00. IEEE International
Conference on. [S.l.], 2000. v. 1, p. 709–716. 14

WU, H.; YU, Y. Photogrammetric reconstruction of free-form objects with curvilinear
structures. The Visual Computer, Springer, v. 21, n. 4, p. 203–216, 2005. 29

XAVIER, M. Instalação de dutos flexíveis em águas ultraprofundas. Dissertação (Mestrado)
— COPPE/UFRJ, Rio de Janeiro, 2006. 15

XIAO, Y.; DING, M.; PENG, J. B-spline based stereo for 3d reconstruction of line-like
objects using affine camera model. International journal of pattern recognition and
artificial intelligence, World Scientific, v. 15, n. 02, p. 347–358, 2001. 29

XIAO, Y. J.; LI, Y. Optimized stereo reconstruction of free-form space curves based on a
nonuniform rational b-spline model. JOSA A, Optical Society of America, v. 22, n. 9, p.
1746–1762, 2005. 16, 17, 29, 30, 54, 55, 96

ZHANG, T.-d. et al. Vision-based system of auv for an underwater pipeline tracker. China
Ocean Engineering, Springer, v. 26, p. 547–554, 2012. 15, 27

ZINGARETTI, P. et al. Imaging approach to real-time tracking of submarine pipeline. In:
INTERNATIONAL SOCIETY FOR OPTICS AND PHOTONICS. Electronic Imaging:
Science &amp;amp; Technology. [S.l.], 1996. p. 129–137. 27



Referências 104

ZINGARETTI, P.; ZANOLI, S. M. Robust real-time detection of an underwater pipeline.
Engineering Applications of Artificial Intelligence, Elsevier, v. 11, n. 2, p. 257–268, 1998.
27


	Agradecimentos
	Epígrafe
	Resumo
	Abstract
	Lista de ilustrações
	Lista de tabelas
	Sumário
	Introdução
	Motivação
	Objetivo
	Visão geral dos algoritmos propostos
	Rastreamento
	Reconstrução

	Principais desafios
	Contribuições
	Estrutura do documento

	Cenário
	Posicionamento
	Duto
	Sistema de câmeras
	Câmeras
	Iluminação
	Imagens
	Considerações finais

	Trabalhos relacionados
	Mapeamento interno de dutos
	Rastreamento e detecção de dutos e cabos
	Reconstrução de curvas
	Considerações finais

	Fundamentos
	Notação
	Visão computacional
	Geometria Projetiva
	Coordenadas homogêneas
	Transformações projetivas

	Modelo de câmera pinhole
	Geometria epipolar
	Retificação estéreo
	Relação entre projeções de pontos coplanares

	NURBS
	Definição
	Invariância a transformações projetivas

	Mínimos quadrados
	Ajuste de curva
	Considerações finais

	Técnica proposta de rastreamento de dutos
	Formulação
	Região de projeção do duto
	Transformação da imagem
	Rastreamento longitudinal
	Rastreamento transversal
	Função de pesos
	Solução utilizando mínimos quadrados

	Aproximações
	Implementação
	Considerações finais

	Técnica proposta para reconstrução de curvas planares
	Reconstrução estéreo de NURBS
	Restrição de planaridade da curva
	Impondo a restrição de planaridade
	Parametrização da curva
	Número de pontos de controle
	Algoritmo
	Fatores que influenciam a acurácia da curva reconstruída
	Considerações finais

	Resultados
	Implementação
	Metodologia dos experimentos
	Experimentos em laboratório
	Ambiente aquático
	Vídeo 1
	Vídeo 2
	Vídeo 3
	Vídeo 4
	Principais conclusões do experimento

	Ambiente aéreo
	Descrição do experimento
	Análise dos resultados


	Experimentos em ambiente real
	Vídeo 1
	Vídeo 2
	Vídeo 3
	Vídeo 4
	Vídeo 5
	Casos de estresse

	Análise geral
	Erro de reprojeção
	Iterações
	Tempo

	Considerações finais

	Conclusão
	Principais conclusões
	Principais contribuições
	Trabalhos futuros

	Referências

</field>
	</doc>
</add>