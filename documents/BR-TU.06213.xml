<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.06213</field>
		<field name="filename">10731_235277.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">UNIVERSIDADE FEDERAL DE SANTA CATARINA
Programa de Pós-Graduação em Metrologia Científica e Industrial
SISTEMA ENDOSCÓPICO ESTEREOSCÓPICO PARA MEDIÇÃO GEOMÉTRICA DE UNIÕES SOLDADAS DE DUTOS
Dissertação submetida à Universidade Federal de Santa Catarina para obtenção do grau de Mestre em Metrologia
Allan Charles Henri Hofmann
Florianópolis, 3 de outubro de 2006
SISTEMA ENDOSCÓPICO ESTEREOSCÓPICO PARA MEDIÇÃO GEOMÉTRICA DE UNIÕES SOLDADAS DE DUTOS
Allan Charles Henri Hofmann
Esta dissertação foi julgada adequada para a obtenção do título de “MESTRE EM METROLOGIA” e aprovada na sua forma final pelo
Programa de Pós-Graduação em Metrologia Científica e Industrial
Prof. Armando Albertazzi Gonçalves Junior, Dr. Eng. ORIENTADOR
Prof. Armando Albertazzi Gonçalves Junior, Dr. Eng. COORDENADOR DO PROGRAMA DE PÓS-GRADUAÇÃO
BANCA EXAMINADORA:
Prof. Celso Luiz Nickel Veiga, Dr. Eng.
Prof. Frank Hrebabetzky, Dr. Rer. Nat.
Prof. Marcelo Ricardo Stemmer, Dr. Ing.
Eng. João Márcio de Castilho Santos
Dedicatória:
Dedico este trabalho a toda minha família, especialmente à minha avó Helga Hofmann por sua história de vida ter me sido um grande exemplo.
Agradecimentos a:
Prof. Armando Albertazzi pela grande orientação e pelos brainstorms Co-orientadora Analucia Pezzotta pela ajuda na parte matemática Wagner e Sunada, LMP da UFSC pelos ajustes de emergência nas peças do protótipo Dionísio e Fernando, ferramenteiros da Certi pelos serviços de fabricação e conselhos práticos Eduardo Valim, Ricardo Gondo e Thiago Freitas;estagiários do Projeto. pelo empenho e prontidão Cibele Baraúna por me dar serenidade CENPES pelo apoio ao projeto e financiamento
ANP através do PRH34 pelo apoio financeiro
RESUMO
Rísers rígidos (Steel Catenary Risers - SCR) têm sido considerados fortes candidatos para explotação de petróleo em águas profundas. Sendo assim, existe um grande esforço em garantir a integridade estrutural durante sua vida útil. Atividades de inspeção tornam-se extremamente importantes durante o processo de fabricação. A soldagem entre seções de riser é um processo considerado crítico, tornando-se foco de inspeção. Estudos e análises demonstram que a performance em fadiga da solda é uma questão crítica, principalmente no ponto de contato com o leito oceânico. Neste contexto, controlar os desalinhamentos entre as seções soldadas e a qualidade geométrica da solda pode melhorar a vida em fadiga.
O presente trabalho desenvolve um sistema óptico endoscópico capaz de medir tridimensionalmente a superfície interna dos SCR na região da solda, durante a fabricação. O sistema é composto por duas câmeras em conjunto com lentes cônicas que produzem um par de imagens estereoscópicas endoscópicas do perímetro do anel de medição. Usando técnicas de triangulação, o sistema gera uma nuvem de pontos que representa a superfície medida.
O protótipo é capaz de quantificar os desalinhamentos entre as seções adjacentes de riser, assim como detectar defeitos geométricos do cordão de solda comuns, como falta de penetração ou excesso de penetração. O software é capaz de representar a superfície medida com diferentes ângulos de visão, e utilizando uma escala de falsas cores que ajuda a identificação dos defeitos geométricos.
ABSTRACT
Steel catenary risers (SCR) have been considered a strong candidate for petroleum exploitation in deep waters. So there is an enormous effort to guarantee the structural integrity along its lifetime. Inspection activities become significantly important in the manufacturing process. The welding is considered a critical process becoming the inspection focus. Studies and analysis have demonstrated that fatigue performance of one sided girth weld is considered a critical issue, mainly in the touch down point (TDP) area. In this context, control the girth weld misalignment during manufacturing would improve fatigue performance.
The present work develops an optical endoscopic stereoscopic system capable of measuring the 3D internal surface of a SCR at the root region of the weld during manufacturing. The system is composed of two cameras coupled with conical optics to produce a pair of endoscopic stereoscopic images of a measurement ring. Using a triangulation technique, it generates a cloud of points representing the measured surface.
The prototype is able of quantifying the misalignment between the pipes and to detect common welding defects like lack of fusion and excess of penetration. The software is capable to represent the measured surface from different angles and through a false color scale that helps the identification of geometric defects.
LISTA DE ILUSTRAÇÕES
Figura 2 - Litografia Belvedere de M. C. Escher. Note o homem sentado, segurando perplexo um cubo impossível...................................19
Figura 3 - Modelo de câmera pinhole.....................................22
Figura 4 - Semelhança de triângulos na formação da imagem...............23
Figura 5 - Linha Epipolar...............................................29
Figura 6 - Plano epipolar e suas linhas epipolares......................29
Figura 7 - Linhas epipolares............................................30
Figura 8 - Imagem digital e seu mapa de intensidades sub-amostrado......31
Figura 9 - Fotos de uma cena, obtidas a partir de ângulos diferentes....32
Figura 10 - Perfil luminoso projetado; graficos de luminosidade e da fase relativa ao longo de uma linha horizontal da imagem.....................35
Figura 11 - Criação do mapa de fases absolutas, a partir do mapa de fases relativas...............................................................36
Figura 12 - Subtração entre mapas de fase com freqüências levemente diferentes..............................................................37
Figura 13 - Determinação do múltiplo de 2n a ser somado à fase relativa.38
Figura 14 - Triangulação de dois pontos homólogos.......................40
Figura 15 - Exemplo de união soldada com três regiões distintas. Uma região com quantidade de solda ideal (A), uma com excesso de penetração
(B), e outra com falta de penetração(C).................................41
Figura 16 - Desalinhamento transversal possível de acontecer durante a soldagem................................................................42
Figura 17 - Desalinhamento axial possível de acontecer durante a soldagem................................................................42
Figura 18 - Área de medição em vermelho sobre a união soldada (corte parcial)................................................................43
Figura 19 - Desenho conceitual das configurações propostas..............44
Figura 20 - Câmera Pointgrey - Scorpion, padrão IEEE-1394...................46
Figura 21 - Lente objetiva Megapixel Fixed Focal Length de 8mm de comprimento focal...........................................................47
Figura 22 - Lente cônica projetada para o protótipo.........................47
Figura 23 - Comparação entre imagens obtidas sem e com a lente cônica, respectivamente.............................................................48
Figura 24 - Filtro óptico passa-banda utilizado, e seu gráfico de ganho x comprimento de onda.........................................................48
Figura 25 - Desenho em corte do campo de visão do subsistema de aquisição de imagens........................................................49
Figura 26 - Vista explodida do subsistema de aquisição de imagens. 01)Câmera + Objetiva; 02)Filtro+Adaptador; 03)Adaptador da câmera; 04)Flange suporte; 05)Suporte da Lente Cônica; 06)LenteCônica; 07)Tampa do suporte da Lente Cônica..................................................50
Figura 27 - Foto do subsistema de aquisição de imagens......................50
Figura 28 - Subsistema de iluminação com o filme transparente em corte......52
Figura 29 - Seqüência de projeções realizadas pelo sistema de iluminação....53
Figura 30 - Vista isométrica do projeto do protótipo........................53
Figura 31 - Foto do protótipo montado.......................................54
Figura 32 - Sistema de coordenadas cilíndrico, adotado para o modelo........55
Figura 33 - Raio de luz (em vermelho) sendo propagado conforme descrito pelo modelo: contido no plano epipolar O = 45°..............................56
Figura 34 - Raios traçados por um software dedicado, utilizando o modelo computacional criado........................................................57
Figura 35 - Raios traçados utilizando-se o modelo do sistema estereoscópico. As intersecções dos pares de PHs aparecem destacadas em preto....................................................................59
Figura 36 - Fluxograma das etapas executadas pelo software do protótipo.....60
Figura 37 - Imagens obtidas com um dos subsistemas de aquisição do protótipo...................................................................62
Figura 38 - Exemplo de mapa de octantes para um dos subsistemas.............63
Figura 39 - Mapa de fases obtido, sem remoção do espiral..................65
Figura 40 - Mapa de fases obtido após a remoção da espiral................65
Figura 41 - Mapa de fases absoluto........................................66
Figura 42 - Estruturação da nuvem de pontos a ser gerada..................67
Figura 43 - Perfis de fase para um par de linhas epipolares...............68
Figura 44 - Tabelas de Correspondência R-r para um dado plano Z...........69
Figura 45 - Visualização da nuvem de pontos, gerada pelo protótipo na medição de um cone........................................................71
Figura 46 - Diagrama de Ishikawa para o processo de medição...............74
Figura 47 - Passos relevantes da medição realizada pelo protótipo.........75
Figura 48 - Diagrama de Ishikawa para o Sistema de Medição.................75
Figura 49 - Tendência e repetitividade para a medição de desalinhamentos transversais..............................................................78
Figura 50 - Tendência e repetitividade para a medição de desalinhamentos angulares.................................................................78
Figura 51 - Influência do comprimento axial das regiões de ajuste dos cilindros na medição de desalinhamentos transversais......................79
Figura 52 - Influência do comprimento axial das regiões de ajuste dos cilindros na medição de desalinhamentos angulares.........................79
Figura 53 - Qualidade óptica da superfície interna das amostras a serem medidas...................................................................80
Figura 54 - Cilindro escalonado utilizado no experimento..................81
Figura 55 - Bancada de desalinhamentos transversais........................82
Figura 56 - Gráfico dos valores medidos em função dos valores de referência, para os desalinhamentos transversais..........................83
Figura 57 - Bancada de desalinhamentos angulares..........................84
Figura 58 - Gráfico dos valores medidos em função dos valores de referência, para os desalinhamentos angulares.............................84
Figura 59 - Nuvem de pontos gerada durante o ensaio.......................86
Figura 60 - Zonas com excesso de penetração (esquerda) e falta de penetração (direita)........................................................86
Figura 61 - Implicação do erro de medição do ângulo do eixo dos cilindros...87
LISTA DE TABELAS
Tabela 2 - Resultados da calibração de CA, CB, VA, VB....................73
Tabela 3 - Incerteza de medição da coordenada R de cada ponto............77
Tabela 4 - Simulação de incerteza de medição de desalinhamentos..........77
Tabela 5 - Resultados das medições do cilindro escalonado para 5 repetições...............................................................81
Tabela 6 - Resultados da medição de desalinhamentos......................83
Tabela 7 - Resultados da medição de desalinhamentos angulares............85
LISTA DE ABREVIATURAS
SCR	Risers Rígidos (Steel Catenary Riser)
PH	Pontos Homólogos
LC	Lente Cônica
TA	Tubo de Acrílico
VVC	Valor Verdadeiro Convencional
NDP	Nuvem de Pontos
SM	Sistema de Medição
Td	Tendência
Re	Repetitividade
SUMÁRIO
1	INTRODUÇÃO.................................................15
1.1	MOTIVAÇÃO..............................................15
1.2	OBJETIVOS..............................................16
1.3	TÉCNICA DE MEDIÇÃO.....................................17
1.4	ESTRUTURA DO TRABALHO..................................17
2	MEDIÇÃO 3D POR ESTEREOSCOPIA...............................19
2.1	PRINCÍPIOS.............................................19
2.2	MODELO DE CÂMERA.......................................21
2.3	CALIBRAÇÃO DAS CÂMERAS.................................26
2.3.1	Sistema de equações................................26
2.3.2	Recuperação dos parâmetros do modelo...................28
2.4	GEOMETRIA EPIPOLAR.....................................28
2.5	IDENTIFICAÇÃO DOS PONTOS HOMÓLOGOS.....................30
2.5.1	Identificando um ponto do objeto...................31
2.5.2	Projeção de padrões luminosos......................33
2.5.3	Projeção de padrões senoidais com deslocamento de fase.34
2.6	DETERMINAÇÃO DE COORDENADAS 3D (TRIANGULAÇÃO)..........39
3	CONFIGURAÇÃO PROPOSTA......................................41
3.1	REQUISITOS TÉCNICOS....................................41
3.2	CONFIGURAÇÕES PROPOSTAS................................44
3.3	PROTÓTIPO DESENVOLVIDO.................................45
3.3.1	Câmeras digitais...................................46
3.3.2	Lentes objetivas...................................46
3.3.3	Lentes cônicas.....................................47
3.3.4	Subsistema de aquisição de imagem..................49
3.3.5	Subsistema de iluminação...........................51
3.3.6	Montagem...........................................53
3.4	MODELO COMPUTACIONAL...................................54
3.4.1	Modelo do sistema de aquisição de imagens..........54
3.4.2	Modelo do sistema estereoscópico...................57
4	SOFTWARE DE MEDIÇÃO........................................60
4.1	REQUISITOS TÉCNICOS E FUNCIONAIS...............................60
4.2	ESTRUTURAÇÃO...................................................60
4.3	IMPLEMENTAÇÃO..............................................61
4.3.1	Posicionamento.............................................61
4.3.2	Aquisição..................................................61
4.3.3	Processamento..............................................62
4.3.4	Triangulação...............................................67
4.3.5	Cálculo dos resultados de medição..........................69
4.3.6	Visualização...............................................71
5	CALIBRAÇÃO E AVALIAÇÃO.............................................72
5.1	CALIBRAÇÃO.................................................72
5.2	AVALIAÇÃO DAS INCERTEZAS.......................................74
5.2.1	Fontes inerentes do sistema de medição.....................75
5.2.2	Estimativa da incerteza das coordenadas	3D.................76
5.2.3	Estimativa da incerteza na determinação	de	desalinhamentos.77
5.3	ENSAIOS CONTROLADOS - BANCADAS.................................80
5.3.1	Medição do diâmetro de cilindros e alinhamentos.........80
5.3.2	Medição de desalinhamentos transversais....................82
5.3.3	Medição de desalinhamentos angulares.......................83
5.3.4	Caracterização do cordão de solda..........................85
5.3.5	Observações Experimentais..................................86
6	CONCLUSÕES.........................................................89
REFERÊNCIAS..........................................................92
ANEXO I: COORDENADAS HOMOGÊNEAS......................................94
1 INTRODUÇÃO
1.1	MOTIVAÇÃO
O Brasil, através da Petrobrás, tem se destacado internacionalmente pelas tecnologias de exploração de petróleo em águas profundas, sendo atualmente líder mundial nesta área. A cada ano a Petrobrás explora os poços de petróleo em lâminas d'água mais profundas. Sendo assim, as tecnologias de perfuração, completação e produção dos poços de petróleo devem estar em constante desenvolvimento.
Os risers são dutos encarregados de conectar a produção dos poços subaquáticos às plataformas de petróleo, conforme ilustra a Figura 1. Com o aumento da exploração de poços em águas ultra-profundas1, o uso de risers rígidos, conhecidos como Steel Catenary Risers (SCR), tem sido mais indicado, devido às grandes pressões presentes neste nível de profundidade. Os risers flexíveis por sua vez, não oferecem características mecânicas propícias para as condições severas deste ambiente.
Figura 1 - SCR conectando a plataforma de produção às cabeças de poço.
1 A partir de 2000 m de profundidade com pressões de mais de 200 atm
Os SCR sofrem altas tensões mecânicas durante sua vida útil, começando com o seu processo de instalação, no leito do oceano; e durante toda a sua vida útil, devido às correntes marítimas, movimento das marés e oscilações de algumas das plataformas produtoras.
Durante a fabricação dos SCR, seções de cerca de 12 m são unidas e soldadas. As seções recém soldadas são bobinadas num carretel, e uma nova seção é soldada à extremidade aberta do riser. Segundo o CENPES (Centro de Pesquisas da Petrobrás) a soldagem é um processo crítico que terá influência na resistência à fadiga dos risers. Torna-se necessário desenvolver métodos de avaliação da qualidade da solda, de modo a garantir suas propriedades estruturais. Uma falha mecânica em um destes componentes, além de trazer grandes perdas de produção, traz prejuízos incalculáveis ao meio ambiente.
1.2	OBJETIVOS
O objetivo deste trabalho é a criação do protótipo de um sistema de medição capaz de caracterizar a qualidade geométrica das soldas entre as diversas seções de risers durante sua fabricação. Esta inspeção tem por objetivo detectar defeitos geométricos que podem comprometer o desempenho em fadiga dos SCR.
Os defeitos geométricos considerados são:
o Desalinhamentos transversais entre as seções de ríser,
o Desalinhamentos angulares,
o Excesso de penetração do cordão de solda, e
o Falta de penetração do cordão de solda.
Tais defeitos podem caracterizar um concentrador de tensões na geometria do duto, reduzindo vida em fadiga destes componentes.
Durante a fabricação dos risers, logo após o processo de soldagem, o sistema deve medir uma nuvem de pontos sobre a superfície interna da região da solda. Através desta nuvem, os defeitos geométricos citados devem ser quantificados. Esta inspeção de conformidade deve servir para que os operadores tenham parâmetros para decidirem se a solda deve ser refeita, ou se sua geometria pode ser considerada adequada para trabalho.
1.3	TÉCNICA DE MEDIÇÃO
Para a caracterização da geometria da solda é necessário realizar a medição de uma grande quantidade de pontos sobre a superfície interna do duto. Métodos baseados em apalpação mecânica de pontos, como os LVDT2 por exemplo, podem gerar nuvens de pontos com uma incerteza muito baixa, porém com uma densidade reduzida, insuficiente para a caracterização dos defeitos do cordão de solda.
Optou-se por utilizar a estereoscopia como técnica de medição devido à possibilidade de medição de uma enorme quantidade de pontos, necessários para a caracterização do cordão de solda, com uma incerteza compatível com os objetivos deste trabalho.
1.4	ESTRUTURA DO TRABALHO
Este trabalho está subdividido em 6 capítulos.
No capítulo 2 a técnica de medição utilizada será abordada, verificando-se o estado da arte, o modelamento matemático utilizado e as técnicas envolvidas até a triangulação dos pontos medidos.
No capítulo 3 será apresentada a concepção mecânica do protótipo endoscópico desenvolvido e construído neste projeto. As adaptações e inovações realizadas sobre os conceitos apresentados no capitulo anterior serão devidamente abordadas neste capítulo.
A estruturação e a implementação do software, indispensável para o funcionamento do protótipo, serão abordadas no capítulo 4
A calibração do protótipo e os testes relativos ao desempenho do mesmo serão tratados no capítulo 5 .
Finalmente, o capítulo 6 trata das conclusões deste trabalho e das sugestões para futuros trabalhos.
2	MEDIÇÃO 3D POR ESTEREOSCOPIA
2.1	PRINCÍPIOS
O processo de medição de coordenadas tridimensionais por estereoscopia envolve a obtenção de informações relativas à geometria de objetos em análise, utilizando-se informações extraídas de múltiplas imagens do mesmo, obtidas de diferentes ângulos de observação.
Uma imagem de um objeto, projetada em um anteparo através de uma lente, é uma representação bidimensional de algo que está no mundo tridimensional. Esta imagem está relacionada ao objeto 3D através das leis da física da formação de imagens e da geometria do próprio objeto[1 pág.2]. Neste processo de formação de imagens 2D ocorre a perda de informações relativas à geometria 3D do objeto. A reconstrução da forma 3D a partir de uma única imagem 2D é impossível pois faltam informações.
Entretanto, utilizando duas ou mais imagens, obtidas de ângulos de visão diferentes, é possível recuperar informações da geometria 3D do objeto em questão. Neste princípio baseia-se a medição por estereoscopia.
Não é por acaso que os seres vivos complexos, que se baseiam na visão para o conhecimento do seu ambiente, possuem dois olhos em vez de apenas um. Observa-se que aqueles que dependem mais da noção de profundidade, como é o caso dos predadores, possuem ambos os olhos voltados para frente, tendo uma grande área de superposição dos campos de visão. Isto possibilita a noção de profundidade em uma maior porção do campo visual. É necessário ainda lembrar que existem mecanismos monoculares que possibilitam a percepção de profundidade, no entanto estes dependem de fatores como luminosidade, movimento, conhecimento prévio do tamanho dos objetos, entre outros[5].
Como será visto na seção 2.2, mediante a análise de apenas uma imagem, e com o conhecimento prévio da disposição geométrica da câmera e de seus parâmetros internos, não é possível determinar qual a posição espacial de determinado ponto desta imagem. Porém, é possível saber que este ponto está restrito a uma família de pontos, descrita por uma reta no espaço.
A medição por estereoscopia envolve a utilização de duas ou mais imagens obtidas sob ângulos diferentes, e com câmeras de posição e parâmetros ópticos conhecidos. Conhecendo-se as posições nas imagens que correspondem ao mesmo ponto no objeto é possível, para cada imagem, determinar a reta no espaço que contém este ponto. Através da interseção destas retas é possível determinar a posição do ponto no espaço. Este processo é chamado de triangulação e será abordado na seção 2.6.
Antes que se possa realizar a triangulação é necessário, apenas através da análise das imagens, identificar a correspondência entre seus pontos, ou seja, identificar aqueles pontos nas imagens que correspondem a um mesmo ponto do objeto. Este processo será abordado na seção 2.5.
o Calibração das câmeras: Nesta etapa a posição e orientação da câmera, e seus parâmetros ópticos internos serão determinados. Esta etapa será abordada na seção 2.3.
o Aquisição das imagens: Cada câmera deverá adquirir uma imagem de diferentes pontos de vista
o Identificação da correspondência dos pontos: seção 2.5
o Triangulação: seção 2.6
Após a execução da triangulação, estará disponível um conjunto de vários milhares, ou milhões, de pontos 3D denominado de nuvem de pontos. Esta nuvem de pontos pode ser utilizada para diversas aplicações tais como:
o Percepção do ambiente visando orientar a locomoção de robôs autônomos;
o Caracterização da geometria de peças;
o Controle de qualidade geométrica de superfícies livres;
o Mapeamento de cenas de crimes ou acidentes;
o Mapeamento de escavações;
o Topografia de terrenos.
o Registro tridimensional de objetos de arte (esculturas).
2.2	MODELO DE CÂMERA
Os elementos essenciais de uma câmera de TV são o seu sensor de imagem, e uma lente para projeção de imagem sobre este. Ao capturar uma imagem, a câmera está realizando o mapeamento de algo que está no espaço 3D para um espaço bidimensional e gerando um sinal elétrico ou digital relacionado com a intensidade ou às características das cores da cena.
O modelo de câmera que será apresentado e utilizado neste trabalho é o modelo de câmera pinhole. Este modelo considera que a projeção de uma imagem
Figura 3 - Modelo de câmera pinhole.
Na Figura 3 o ponto po é a projeção normal de C sobre o plano imagem. Este ponto é chamado de ponto principal. O eixo que passa por p0 e C chama-se eixo principal e é normal ao planos.
Considerando agora um sistema de coordenadas euclidiano, cuja origem encontra-se sobre o ponto C, o sistema de coordenadas da câmera, e sendo o plano imagem Z = - f, pode-se observar pela Figura 4 que um ponto qualquer de coordenadas	(X Y Z) será projetado nas coordenadas
(-f X/Z -fY/Z -f), sobre o plano imagem. Ignorando-se a última coordenada, obtém-se um ponto no sistema de coordenadas de imagem (cuja origem está em Po )•
Figura 4 - Semelhança de triângulos na formação da imagem.
Portanto, a projeção do ponto X no plano imagem pode ser expressa da seguinte maneira:
X Y z)r	-íx/z)r
(1)
Utilizando-se a geometria projetiva[3] 4 e coordenadas homogêneas3 pode-se
escrever a equação (1) como uma transformação linear, da seguinte maneira, conforme exposto por Hartley[2]:
-	
	Y
	Z
-	&amp;lt;1 ,
(2)
Como pode ser visto no Anexo I, o ponto cujas coordenadas homogêneas são {-f.X - fY Z)T possui	as coordenadas cartesianas:	{-f-X/Z -fY/Z)
reafirmando a correspondência entre as equações (1) e (2).
Em uma câmera de formação de imagem, a origem do sistema de coordenadas da imagem quase nunca se situa exatamente sobre o ponto
3	Ver breve introdução ao uso de coordenadas homogêneas no Anexo I.
4	Os elementos omitidos nas matrizes possuem o valor 0.
( Y Z)T	fX/ + Px -f */Z + p,f	(3)
Sendo que a expressão (2) pode ser reescrita da seguinte maneira:
f X1
Y
Z
f-f. X + Z. p 1
-f Y+Z-py

Z
7

-f	Px
-f Py
1
0
0
0
_ f X1
-	
	Y
	Z
-	
(4)
Utilizando-se a notação Xsc para a representação homogênea de um ponto no sistema de coordenadas sc, e x para a representação homogênea deste ponto na imagem, pode-se reescrever (4) como:
x = K.[ I„
camera
(5)
Onde I3x3 é a matriz identidade 3x3, o símbolo | representa concatenação e:
f-f
K =
(6)
A matriz K pode ainda ser generalizada da seguinte maneira:
f-f
K =
5	Px
-f Py
(7)
Onde s é o fator de inclinação, que a maioria dos casos tem valor nulo. Este fator pode assumir valores diferentes de zero para o caso incomum em que os pixeis do sensor de imagens encontram-se deformados, causando a não perpendicularidade entre os eixos x e y do sistema de coordenadas da imagem.
A matriz K é conhecida como matriz de calibração da câmera, pois concentra os dados internos da câmera, que são:
•	f, comprimento focal da lente;
•	s, fator de inclinação do sensor de imagens - em geral nulo;
•	px, coordenada horizontal de imagem do ponto principal;
•	py, coordenada vertical de imagem do ponto principal.
Considerando que os pontos no espaço são expressos em função de um sistema de coordenadas global, que em geral não coincide com o sistema de coordenadas da câmera utilizado até aqui. É necessário executar uma transformação de coordenadas para que se possa utilizar as coordenadas globais dos pontos no modelo. Seja R a matriz 3x3 de rotação que resulta da associação de três matrizes de rotação como segue:
cos O
senO
-senO
cos O
cosa
-sena
sena		cos y -senY
		senY	cos y
cosa		1
(8)
Onde 9, a e y são rotações em torno dos eixos x, y e z respectivamente. R expressa a orientação do sistema de coordenadas da câmera. Então, sendo C3x1 as coordenadas globais não homogêneas do centro de projeção da câmera, a transformação de coordenadas pode ser expressa por:
X
cam
1x 3
R
3x3
.X
global
(9)
0
Substituindo (9) em (5), tem-se:
x = K.R.[ I|-C ].X
Sendo P = K.R. [i | -C ] a equação (10) pode ser reescrita para:
(10)
x = P.X global	(11)
Onde P é a matriz de projeção, uma matriz 3x4 que possui 12 elementos e 11 graus de liberdade. Ela descreve o processo de formação de imagens de forma simples e eficaz, englobando parâmetros intrínsecos da câmera, como foco e ponto principal, assim como parâmetros extrínsecos, como a orientação da câmera no sistema de coordenadas global utilizado. Com a equação (11) é possível calcular as coordenadas de imagem de um ponto 3D conhecido.
A partir de P também é possível determinar o conjunto de pontos no espaço que são projetados em um ponto imagem conhecido. Este conjunto será uma reta; mais precisamente, a reta que une o ponto da imagem x ao centro de projeção C. A
X(2) = P+ .x +ÀC	(12)
Onde P+ é a pseudo-inversa5 de P. Sendo assim, um ponto no espaço com coordenadas X = P+.x pertence ao raio que se projeta sobre x, pois P.X = P.P+.x = I.x = x. Como C é centro de projeção, (12) expressa um ponto qualquer sobre o raio por ser a combinação linear das coordenadas homogêneas de dois pontos sobre ele, uma vez que 2 é um escalar qualquer.
2.3	CALIBRAÇÃO DAS CÂMERAS
Sabe-se que a formação de imagem pode ser descrita por uma matriz de projeção 3x4. Esta matriz homogênea é chamada de P, e possui 12 elementos.
P =
P1 P2 P3 P4
P5 P6 P7 P8
P9 P10 P11 P12
(13)
Utilizando-se um conjunto de pontos cujas coordenadas globais e as coordenadas de imagem de suas projeções são conhecidas, é possível montar um sistema de equações lineares que possibilita o cálculo dos elementos desta matriz.
2.3.1	Sistema de equações
Tendo-se um par de pontos objeto-imagem X, e x,, sabe-se que x, =PX,.
Desta forma x, xPX, =0.
Denotando-se a_/-ésima linha deP comoP}T,
P-X
(14)
5	A pseudo-inversa deve ser usada, pois P é uma matriz 3x4, e não uma matriz quadrada.
seguinte maneira.
X x PX,
'y P3 X, - wt P2T X, w, P1 X, - x, P3 X,
i x, P2T X, - y, P X, y
(15)
Como p}T.X, = X,T.p} a equação (15) pode ser reescrita para:
0T	- w, .X,T	y, .X,T
w, .X,T	0T	- x, .X,T
- y, .X,T	xt .X,T 0T
P1
P2 lP)
(16)
Cada P1 é um vetor de quatro elementos. Como as equações do sistema (16) são linearmente dependentes, pode-se escolher apenas duas delas para a resolução do sistema. Desta maneira, cada correspondência de pontos produz duas equações de um sistema linear de 12 incógnitas, conforme mostrado a seguir.
'i
P2
P3
P4
P5
0T	- w, .X,T	- y, .X,T
w t .X,T	0T	- xt .X,T
P6
P7
(17)
&amp;lt;&gt;
= 0
= 0
= 0
P9
P10
Pii
Utilizando-se um conjunto de correspondências de pontos, é possível concatenar suas equações e produzir um sistema determinado.
Como P é uma matriz homogênea, o fator de escala de seus elementos pouco importa. Devido a isso, apesar de ter 12 elementos, esta possui apenas 11 graus de liberdade. Cada correspondência de pontos gera duas equações, portanto são necessárias 5% correspondências, para a solução mínima.
2.3.2	Recuperação dos parâmetros do modelo
Uma vez conhecidos os elementos da matriz de projeção, é possível decompô-la de modo a recuperar os parâmetros intrínsecos e extrínsecos da câmera.
Considerando (10), e sendo M=K.R, a matriz P pode ser expressa da seguinte maneira:
P = K.R. [	I|^ ]=	’ M | -MC ]	(18)
Onde, conforme (13):	P1 P2	P3 "	
M =	1 ^3	^3 tZi ^3	^3 5	01	P7 P11 _	(19)
Aplicando-se na matriz M uma decomposição RQ [2 (p579)], obtêm-se um matriz triangular superior, e uma matriz ortogonal. A matriz triangular superior equivale à matriz K, e a matriz ortogonal equivale à R. A ambigüidade da decomposição pode ser removida forçando K a ter elementos da diagonal principal com sinais conforme a equação (7). Ou seja, os dois primeiros elementos negativos, e o terceiro, positivo.
2.4	GEOMETRIA EPIPOLAR.
Através do conhecimento dos parâmetros intrínsecos e extrínsecos das câmeras de uma montagem estereoscópica, é possível conhecer algumas relações entre as imagens obtidas, sem que se tenha conhecimento da geometria da cena fotografada.
Como pode ser visto na Figura 5, o conjunto de pontos que se projeta sobre um ponto xa na imagem A, será projetado sobre uma linha na imagem B. Esta linha
Na Figura 6 pode-se ver um plano formado pelos centros de projeção Ca e Cb e pelo ponto X. Este plano é chamado de plano epipolar. Suas intersecções com os planos imagem são as linhas epipolares. Todos os pontos da cena que estiverem sobre este plano, terão as mesmas linhas epipolares.
Figura 6 - Plano epipolar e suas linhas epipolares.
Nota-se que para uma família de planos epipolares, existirá uma família de linhas epipolares em cada imagem. Como esta família de planos obrigatoriamente contém a reta que une os centros de projeção Ca e Cb, tem-se um ponto comum a todas as linhas epipolares, em cada uma das imagens. Estes pontos se chamam
Figura 7 - Linhas epipolares.
Hartley[9] expõe um método para realizar a retificação das imagens, a fim de corrigir as diferenças geométricas entre elas, decorrentes da diferença de posicionamento das câmeras. Tang[8] propõe um método para a estimação da geometria epipolar sem o conhecimento prévio dos parâmetros intrínsecos e extrínsecos das câmeras de uma montagem estereoscópica.
2.5	IDENTIFICAÇÃO DOS PONTOS HOMÓLOGOS
Para que seja possível, através de uma montagem estereoscópica, realizar-se a medição de pontos 3D é necessário solucionar o problema da correspondência. O Problema da Correspondência consiste em “estabelecer que ponto de uma imagem, corresponde a que ponto da outra, no sentido de serem a imagem de um mesmo ponto na cena fotografada”6]. Feito isto, é possível utilizar os modelos matemáticos para realizar uma triangulação, definindo assim as coordenadas 3D do ponto em análise.
A definição das correspondências entre os pontos será aqui chamada de identificação de pontos homólogos (PH), que deve ser realizada somente através da análise das imagens do objeto a ser medido.
Apesar de ser um procedimento relativamente simples para o ser humano, identificar a correspondência entre pontos de duas ou mais imagens de um mesmo objeto não é tarefa simples para um computador. Para fazer isso, o homem baseia-se em um grande número de informações acumuladas sobre o ambiente ao seu redor. Um computador, por sua vez, somente possui um par de imagens para analisar. Cada imagem consiste apenas em uma matriz de intensidades referentes à quantidade de luz que chega a cada elemento do sensor de imagem. Na Figura 8 pode-se ver uma imagem digital e a respectiva matriz de intensidades.
Figura 8 - Imagem digital e seu mapa de intensidades sub-amostrado.
Esta matriz quantifica o nível de luminosidade de cada pixel da imagem digitalmente. Em geral são utilizados 8 bits, ou seja 256 níveis de luminosidade são discretizados. Para imagens coloridas, podem ser utilizadas três matrizes, uma para cada componente básica da luz (vermelho, verde e azul).
2.5.1	Identificando um ponto do objeto
A Figura 9 ilustra duas imagens de uma mesma cena, tomadas de ângulos diferentes. A princípio, poderia se dizer que os pontos homólogos nas imagens são aqueles pixeis que possuem o mesmo valor de luminosidade, já que as duas matrizes devem registrar o mesmo valor para imagens de um mesmo ponto objeto. No entanto, existem alguns fatores que impossibilitam o uso deste caminho.
Figura 9 - Fotos de uma cena, obtidas a partir de ângulos diferentes.
Como o valor de luminosidade associado aos pixels está escalonado em apenas 256 níveis, certamente em uma imagem haverá vários pixels com o mesmo valor de luminosidade. Além disso, poucas superfícies são Lambertianas, ou seja, poucas tem emissividade uniforme em todas as direções. Desta maneira, é incorreto esperar que um ponto do objeto possua a mesma luminosidade em ambas as imagens. Outro fator muito importante a ser levado em conta é a incerteza intrínseca do processo de medição de intensidade luminosa, realizado pelas câmeras. Levando estes fatores em conta conclui-se que é improvável que pontos homólogos possuam o mesmo nível de luminosidade.
Uma forma de identificar a correspondência entre os pontos é considerar uma janela ao redor do pixel em análise, e não apenas um pixel, e.g. região destacada em amarelo, na Figura 9. Sabendo-se que o perfil de intensidades nesta área deve ser ao menos semelhante, em ambas as imagens, cria-se uma assinatura para cada ponto baseada nas características desta vizinhança. É possível então utilizar métodos que quantifiquem a semelhança entre estas regiões, e assim formar pares de PH.
Mesmo utilizando esta técnica, existem alguns problemas que prejudicam e podem até impossibilitar a identificação dos pontos homólogos. São eles:
Problema da Parede Branca: Ocorre quando as vizinhanças de um ponto em análise são excessivamente monótonas, de modo que não exista uma assinatura
Superfícies Reflexivas: Como se observa na esfera espelhada da Figura 9, a reflexão especular faz com que um ponto geométrico sobre uma superfície reflexiva, tenha luminosidade completamente diferente, dependendo do ângulo de observação.
Transformações Geométricas: Com as imagens são obtidas de ângulos diferentes, é necessário realizar transformações geométricas para que as regiões possam ser devidamente comparadas. É possível perceber este fenômeno analisando-se a geometria da região destacada em vermelho na Figura 9. Parte da diferença geométrica observada se deve à disposição das câmeras, outra parte se deve à geometria da cena. A primeira componente citada pode ser corrigida devido ao conhecimento da geometria epipolar da montagem estereoscópica (seção 2.4 )[7]. A correção da segunda componente citada exigiria o conhecimento prévio da geometria da cena.
Oclusões: Observa-se também na Figura 9 que alguns pontos da cena, visíveis em uma das imagens, estão escondidos na outra imagem, impossibilitando a triangulação.
Ruído Excessivo: Em condições de baixa iluminação o ganho das câmeras pode ser elevado, aumentando com isso a influência do ruído eletrônico nas imagens. Em casos extremos a assinatura de um ponto pode ser excessivamente alterada.
Apresenta-se a seguir uma técnica capaz de superar muitos destes fatores.
2.5.2	Projeção de padrões luminosos
Um procedimento que pode auxiliar a tarefa dos algoritmos de identificação de pontos homólogos é a projeção de padrões luminosos sobre a cena a ser medida. Estes padrões devem ser projetados de modo a favorecer a criação de uma assinatura própria para cada ponto da cena. Dentre os padrões que podem ser projetados, pode-se citar:
Padrões aleatórios: Um padrão luminoso aleatório, um ruído branco por exemplo, pode ser projetado sobre a cena, solucionando o problema da parede branca, citado anteriormente. Algoritmos de correlação cruzada podem ser utilizados para promover a identificação das correspondências entre pontos[10]. No entanto esta técnica é muito sensível às transformações geométricas que ocorrem devido à geometria da cena.
Padrões estruturados: A projeção de padrões estruturados pode promover a identificação das correspondências entre pontos com uma densidade bastante grande. É um método muito robusto com relação a todos os problemas citados anteriormente, com exceção do problema de superfícies reflexivas. Com este método, no entanto, é geralmente necessário realizar a aquisição de mais de uma imagem, já que vários padrões podem ser projetados, elevando o tempo de aquisição e forçando o sistema estereoscópico a ficar estático durante as aquisições[11].
2.5.3	Projeção de padrões senoidais com deslocamento de fase
Um dos padrões estruturados que podem ser projetados é o padrão luminoso senoidal. O método, que é bastante eficaz na criação de uma assinatura para identificação de pontos homólogos, consiste na projeção de franjas senoidais com subseqüente deslocamento de fase, sobre a cena a ser medida. Este método, descrito em mais detalhes por Fantin[11], possibilita a geração de um código único para cada ponto da imagem.
Um padrão de franjas senoidais, projetado sobre a cena a ser medida, poderia proporcionar uma identificação única de cada ponto em uma linha convenientemente orientada sobre imagem. Esta identificação seria a fase de cada ponto da imagem, considerando-se a direção de evolução da senóide. A Figura 10
Figura 10 - Perfil luminoso projetado; graficos de luminosidade e da fase relativa ao longo de uma linha horizontal da imagem.
De fato existem ainda não idealidades na formação da imagem que impossibilitam a obtenção de tal mapa de fase a partir de uma simples imagem da cena a ser medida. O nível de luminosidade de fundo, o ganho aplicado na obtenção da imagem, a não linearidade do elemento sensor da câmera, e as diferenças de reflexividade ao longo da cena, são exemplos de tais problemas. Devido a isso, torna-se necessário o uso de um método conhecido como projeção de franjas com deslocamento de fase. Neste método, projetam-se vários padrões senoidais defasados entre si de um certo &amp;amp;/&gt;. Para cada projeção, a luminosidade de um ponto genérico da imagem, de coordenadas x, y, pode ser descrita pela seguinte formulação.
Ix.y = ¡f + ¡«sen (¿( x, y) + 5&lt;f)	(20)
Onde:
Ixy é o nível de luminosidade captado pelo sensor na posição x, y;
If é o nível de luminosidade de fundo neste ponto;
Ia é a amplitude de luminosidade fornecida pelo sistema de iluminação;
^(x, y) é a fase no ponto sobre a senóide projetada (sem defasagem);
é a defasagem correspondente.
0(x, y) = arctan
(21)
Onde ô é o valor de luminosidade captada em um pixel pelo sensor, durante a projeção do padrão senoidal cuja defasagem é de ô(/&gt; rad.
Com a equação (21) só é possível calcular um ângulo côngruo da fase dentro do intervalo -n a +n, isto é, o valor relativo dentro de cada período das franjas projetadas. Para obter uma assinatura única para cada ponto, é necessário determinar a fase absoluta, que é obtida somando-se à fase relativa um múltiplo inteiro de 2n, referente a cada ordem de franja. O mapa de fase absoluta pode ser determinado por um algoritmo de remoção do salto de fase (Phase Unwrapping), que será descrito na seqüência. Forma-se então o mapa de fases absolutas. O mapa de fases com os valores relativos dentro de cada período será aqui simplesmente referido como mapa de fases relativas.
Os métodos de remoção do salto de fase realizam a concatenação das diversas ordens de franja presentes no mapa de fase relativa, somando-se o devido múltiplo inteiro de 2n para cada ordem de franja. A Figura 11 ilustra este procedimento para uma linha de pixeis do mapa de fase, onde a cada ordem de franja soma-se o valor de n - 2n, sendo n é a ordem da franja.
Figura 11 - Criação do mapa de fases absolutas, a partir do mapa de fases relativas.
Para que se faça a correta concatenação das ordens de franjas é necessário identificar qual ordem de franja corresponde a cada pixel do mapa de fases relativas. Dentre os métodos disponíveis na literatura destaca-se aquele apresentado por Zumbrunn[13], aqui selecionado por não depender da continuidade da superfície medida e nem da fase absoluta dos pontos vizinhos. Este método será aqui denominado de método do batimento. Nele Zumbrunn propõe a utilização de dois padrões de franjas com freqüências levemente diferentes, conforme mostrado na Figura 12.
Figura 12 - Subtração entre mapas de fase com freqüências levemente diferentes.
Considerando-se uma projeção com N franjas, e outra com N-1 franjas, o valor dentro da primeira volta da diferença entre os mapas de fase relativas é calculado por:
,y = C	(22)
A diferença de fase resultante do “batimento” entre as freqüências pode ser utilizada para que se possa determinar o múltiplo inteiro de 2n que deve ser somado à fase relativa de cada ponto, conforme ilustra a Figura 13.
Figura 13 - Determinação do múltiplo de 2n a ser somado à fase relativa.
As seguintes equações aplicam este conceito para o cálculo da ordem de franja absoluta, utilizando-se tanto para o mapa com N franjas, quanto para com N-1.
O Ny = C + 2nint
O Nj1 = W + 2nint
' N A:&gt;	-JN '
v	2n	,
\ N - 1).	-^N;1 '
v	2n	,
2n
2n
(23)
(24)
Onde:
O nx ,y é o valor absoluto de fase em determinado pixel para o mapa com n franjas;
fâ,y é o valor de fase relativa para o mapa com n franjas;
int (x) é uma função que retorna o numero inteiro mais próximo de x;
É possível calcular um mapa de fases absolutas a partir da média dos mapas gerados através das equações (23) e (24). A seguinte formulação aproveita as duas medições de fase feitas reduzindo a incerteza na determinação da fase absoluta:
O
x, y
2
(25)
O mapa de fases absolutas obtido pela projeção dos padrões de franjas é uniforme em uma das direções da imagem. Por exemplo, projetando-se franjas verticais, o mapa de fases obtido será uniforme na direção vertical resultando em uma mesmo valor de fase não apenas para um pixel da imagem, mas para toda uma coluna de pixels.
Outra solução envolve a utilização do conceito de linhas epipolares. Conhecendo-se a geometria epipolar de uma montagem estereoscópica é possível restringir a procura do ponto homólogo a um ponto dado, aos pontos que se encontram em uma linha epipolar na outra imagem. A partir de um ponto em uma das imagens, determina-se a linha epipolar na qual seu homólogo se encontra na outra imagem. Deste modo só é necessária a utilização de uma direção de franjas, para que se possa identificar os pontos homólogos através de seus valores de fase. Idealmente as franjas devem ser perpendiculares às linhas epipolares.
2.6	DETERMINAÇÃO DE COORDENADAS 3D (TRIANGULAÇÃO)
Conhecendo-se os pares de Pontos Homólogos e os parâmetros intrínsecos e extrínsecos de cada câmera de uma montagem estereoscópica, é possível calcular a posição 3D de cada um destes pontos, na cena. Como citado na seção 2.2 , a partir de um ponto em uma imagem pode-se calcular a reta que contém todos os pontos do espaço que podem gerar esta projeção.
Idealmente, tendo-se duas imagens de um mesmo ponto, é possível determinar sua posição no espaço através da interseção das retas geradas a partir de cada imagem, conforme a Figura 14. Da equação (12), o ponto 3D se encontra onde Pa+- xa + ACa = Pb +- xb + yCb.
Figura 14 - Triangulação de dois pontos homólogos.
Como existe incerteza na determinação da posição dos PHs, é possível que os raios reprojetados de cada ponto nunca se cruzem, sendo que a igualdade da equação das duas retas não existe. Hartley [2 (cap. 12)] propõe alguns métodos para estimar a posição do ponto 3D, considerando a incerteza na determinação dos PHs.
Conhecendo-se vários pontos homólogos ao longo das imagens obtidas, é possível realizar o procedimento de triangulação para cada um dos pares de PH e assim criar uma nuvem de pontos 3D referentes a geometria da cena fotografada.
Longet-Higgins[14] mostra que também é possível reconstruir a geometria de uma cena sem o conhecimento prévio dos parâmetros da montagem estereoscópica, no entanto é necessário que hajam objetos de referência na cena medida. Luong et. al.[15] explora com grande detalhamento este assunto.
3	CONFIGURAÇÃO PROPOSTA
3.1	REQUISITOS TÉCNICOS
O protótipo desenvolvido neste trabalho destina-se à medição da região da solda entre seções de risers utilizados na indústria de petróleo e gás. Deseja-se caracterizar a geometria do cordão de solda, de modo a detectar se existe excesso ou falta de deposição de solda na parte interna do duto, conforme pode ser visto na Figura 15. Também se deseja conhecer os desalinhamentos transversais e angulares entre as seções soldadas conforme a Figura 16 e a Figura 17, respectivamente.
Figura 15 - Exemplo de união soldada com três regiões distintas. Uma região com quantidade de solda ideal (A), uma com excesso de penetração (B), e outra com falta de penetração(C).
Figura 16 - Desalinhamento transversal possível de acontecer durante a soldagem.
Figura 17 - Desalinhamento axial possível de acontecer durante a soldagem.
Para o desenvolvimento deste protótipo foram definidos como alvos os risers rígidos de 6” de diâmetro (152,4 mm) e %” de espessura (6,35 mm). Como o sistema deverá operar dentro do riser, o protótipo deve ser adequado para operar nestas dimensões, que são as dimensões mínimas de interesse prático, e que apresentam as mais severas restrições de espaço. A adaptação do protótipo para risers de maiores diâmetros poderá vir a ser realizada no futuro, o que será sempre uma operação mais fácil.
O protótipo deve ser capaz de caracterizar satisfatoriamente a geometria do cordão de solda, assim como suas vizinhanças. Com base nos dados das vizinhanças da solda, é possível ajustar matematicamente um cilindro aos pontos medidos em cada lado do cordão, e assim calcular o ângulo e o desalinhamento
Figura 18 - Área de medição em vermelho sobre a união soldada (corte parcial).
A tolerância para o desalinhamento transversal entre as seções do riser é de 0,5 mm, portanto, segundo a regra de ouro da metrologia, a incerteza na medição deste tipo de desalinhamento deve ser de 0,05mm. Para a caracterização da geometria da solda, os requisitos de incerteza não são tão severos, uma vez que somente será feita uma análise qualitativa.
As medições com o sistema deverão ser realizadas logo após o processo de soldagem e na linha de montagem. O processo de medição não pode atrasar em demasia a produção, portanto o tempo de medição deve ser pequeno.
Sumarizando-se os requisitos tem-se:
o Volume de medição cilíndrico de aproximadamente 140 mm de diâmetro, 10 mm de profundidade (direção radial) e 50 mm de altura (direção axial);
o 0,05 mm de incerteza na medição de desalinhamentos.
o Tempo de medição reduzido em relação ao tempo de fabricação;
o Capacidade de ser inserido dentro do riser.
3.2	CONFIGURAÇÕES PROPOSTAS
Como o volume de medição do sistema deve ser cilíndrico, é necessário que se utilize uma montagem estereoscópica capaz de formar a imagem de toda a superfície interna do duto, na região da solda. Optou-se por evitar o uso de partes móveis para movimentação das câmeras, pois isto aumentaria a possibilidade de falhas durante a medição, complicaria a montagem do sistema e elevaria o tempo de medição.
Inicialmente quatro montagens diferentes foram propostas, as quais envolviam o uso de:
A.	Duas câmeras;
B.	Duas câmeras em oposição com espelhos cônicos;
C.	Duas câmeras com espelhos cônicos;
D.	Duas câmeras com lentes cônicas;
Conforme pode ser visto na Figura 19.
Figura 19 - Desenho conceitual das configurações propostas.
Duas câmeras: O uso de duas câmeras posicionadas de forma que ambas formem a imagem da região de interesse possui a vantagem da simplicidade construtiva. No entanto, a área da imagem que será efetivamente utilizada no
Duas câmeras em oposição com espelhos cônicos: Com a utilização de espelhos cônicos é possível aumentar o aproveitamento do sensor de imagem. O fato de que os espelhos estão nas extremidades opostas do sistema possibilita uma grande diferença de ângulo de visão entre as câmeras, porém aumenta a possibilidade de problemas com oclusões nas imagens.
Duas câmeras com espelhos cônicos: Esta configuração proporciona um bom aproveitamento da imagem e uma diferença de ângulo de visão adequado para a geometria do cordão de solda a ser medido, de forma a não ocorrerem oclusões.
Duas câmeras com lentes cônicas: Possui qualidades análogas à configuração com espelhos cônicos, porém oferece algumas vantagens construtivas.
Como as duas últimas configurações propostas se mostraram semelhantes em suas vantagens e desvantagens, foi realizada uma comparação baseada em alguns parâmetros considerados pertinentes para o projeto, formando uma matriz de decisão.
Optou-se então por desenvolver o protótipo utilizando a concepção de lentes cônicas devido a facilidades construtivas. A possibilidade de usar um sistema de iluminação com capacidade de projeção de um padrão luminoso foi considerada.
3.3	PROTÓTIPO DESENVOLVIDO
Considerando requisitos do projeto, sumarizados na seção 3.1 e baseando-se na configuração selecionada na seção 3.2 , o projeto detalhado do protótipo foi iniciado. Alguns componentes necessitaram ser selecionados e comprados de fornecedores, e outros foram fabricados. São estes:
o Câmeras digitais;
o Lentes Objetivas;
o Lentes Cônicas;
o Sistemas de posicionamento dos componentes.
Um modelo básico da formação da imagem através de um sistema composto por uma câmera, uma lente objetiva e uma lente cônica foi criado no software Solid Works. Este modelo auxiliou na escolha dos componentes, tendo como base o volume de medição desejado.
3.3.1	Câmeras digitais
As câmeras digitais foram selecionadas tendo em vista dois dos requisitos básicos do projeto: a incerteza de medição, e a necessidade de ser introduzido dentro do riser. Isto indicou a seleção de uma câmera compacta e de alta resolução. Adicionalmente, a possibilidade de adquirir uma câmera de padrão IEEE-1394 (firewire), que possui apenas um cabo comportando transferência de dados e alimentação, reduz a quantidade de cabos que terão necessariamente que passar pelo campo de visão das câmeras.
Figura 20 - Câmera Pointgrey - Scorpion, padrão IEEE-1394.
Optou-se por utilizar uma câmera Pointgrey - Scorpion IEEE-1394; com resolução máxima de 1600x1200 pixeis, retratada na Figura 20.
3.3.2	Lentes objetivas
Utilizando-se o modelo básico, optou-se por utilizar uma lente de comprimento focal igual a 8mm. Como o formato do sensor da câmera escolhida é de 2/3”(16,9
Figura 21 - Lente objetiva Megapixel Fixed Focal Length de 8mm de comprimento focal.
3.3.3	Lentes cônicas
As lentes cônicas foram projetadas de modo a formar a imagem da região de interesse para medição, quando associadas ao conjunto câmera-objetiva selecionado. Elas foram dimensionadas tendo como base o modelo confeccionado anteriormente. Atendendo às restrições de espaço, projetou-se a lente para que ficasse o mais próxima possível da objetiva, e assim também pudesse ter o menor diâmetro possível. A lente foi fabricada no Japão pela Natsume Optical Coorporation.
A Figura 22 ilustra o projeto da lente. A Figura 23 mostra a comparação entre duas imagens. Uma feita sem a lente cônica, e outra com.
Figura 22 - Lente cônica projetada para o protótipo.
Figura 23 - Comparação entre imagens obtidas sem e com a lente cônica, respectivamente.
Como a lente cônica é muito espessa, esta produzirá distorções cromáticas na imagem devido a decomposição das freqüências da luz. Existe a necessidade de usar um filtro óptico passa-banda de forma a possibilitar a formação de uma imagem nítida. Optou-se por utilizar um filtro dicróico passa-banda na faixa de 650 nm de comprimento de onda (vermelho). A Figura 24 ilustra o filtro já inserido no adaptador para montagem na lente objetiva.
Figura 24 - Filtro óptico passa-banda utilizado, e seu gráfico de ganho x comprimento de onda.
3.3.4	Subsistema de aquisição de imagem
Associando-se os quatro componentes citados anteriormente com o auxílio dos componentes de posicionamento, tem-se o subsistema de aquisição de imagens. Este subsistema foi concebido para formar a imagem das paredes internas do riser de forma a aproveitar ao máximo a área do sensor da câmera, conforme o desenho esquemático da Figura 25.
Figura 25 - Desenho em corte do campo de visão do subsistema de aquisição de imagens.
O protótipo é composto por dois subsistemas como este, posicionados de modo a abrangerem a imagem da mesma região da superfície interna do riser. Desta maneira é possível obter duas imagens da zona de interesse, capturadas de ângulos diferentes, possibilitando a medição por estereoscopia. A Figura 26 ilustra uma vista explodida do subsistema de aquisição de imagens, e a Figura 27, uma foto do mesmo montado.
O corpo do protótipo é composto por um tubo de acrílico que serve como suporte de posicionamento dos subsistemas de aquisição de imagens, garantindo seu posicionamento relativo. O subsistema de iluminação também possui este tubo como base de posicionamento.
Figura 26 - Vista explodida do subsistema de aquisição de imagens.
01)Câmera + Objetiva; 02)Filtro+Adaptador; 03)Adaptador da câmera;
04)Flange suporte; 05)Suporte da Lente Cônica; 06)LenteCônica;
07)Tampa do suporte da Lente Cônica.
Figura 27 - Foto do subsistema de aquisição de imagens.
3.3.5	Subsistema de iluminação
O subsistema de iluminação do protótipo projeta dois padrões de franjas senoidais sobre a superfície interna do duto. Um padrão com N franjas, e outro com N-1 franjas, para realização da remoção do salto de fase.
Na montagem estereoscópica do protótipo, as linhas epipolares estão distribuídas de forma radial nas imagens. Considerando-se que os dois subsistemas de aquisição de imagem estão perfeitamente alinhados, é possível assumir que os epipolos de cada imagem coincidem com os pontos principais das mesmasp0. A projeção de apenas um padrão de franjas, perpendicular às linhas epipolares, possibilita a identificação dos pontos homólogos, utilizando-se o conhecimento da geometria epipolar.
Para gerar esta projeção utiliza-se uma lâmpada halógena de pequeno filamento, um filme transparente cilíndrico e um motor de passos, além de componentes de fixação. Neste filme transparente são impressas franjas senoidais. Ao ser posicionado ao redor da lâmpada, conforme a Figura 28, as sombras dos padrões impressos no filme são projetadas no interior do duto.
O padrão impresso na transparência poderia ser senoidal e ter o formato de uma hélice. Desta maneira, ao girar a transparência ao redor de seu eixo, o efeito produzido nas franjas projetadas seria o de um avanço de fase, semelhante aos filetes de rosca de um parafuso ao ser aparafusado. Esta rotação pode ser produzida por um motor de passos controlado pelo software do protótipo.
Figura 28 - Subsistema de iluminação com o filme transparente em corte.
Realizando-se rotações de f rad com o motor, é possível produzir as projeções necessárias para o cálculo dos mapas de fase.
De fato, para realizar a determinação do mapa de fases absolutas pelo método do batimento, é necessário projetar-se dois padrões de franjas diferentes como citado na seção 2.5.3. Para isso, uma evolução do conceito descrito acima é utilizada.
O filme cilíndrico possui cinco franjas em hélice numa das metades (180°), e quatro franjas em hélice em outra metade. No entanto, o passo destas hélices é de duas vezes o período espacial de cada franja senoidal. Desta maneira, para se realizar o avanço de -rad na fase das franjas projetadas, o motor de passos rotaciona o filme transparente de - rad. Realizando oito projeções com rotações consecutivas de - rad, é possível obter as imagens necessárias para o cálculo dos dois mapas de fase, um para cada padrão de franjas. A Figura 29 ilustra como estas projeções podem ser vistas pelas câmeras do sistema.
Figura 29 - Sequência de projeções realizadas pelo sistema de iluminação.
3.3.6	Montagem
O projeto da montagem final do protótipo pode ser visto na Figura 30, e uma foto do protótipo montado, na Figura 31. Como este é o primeiro protótipo, e destinase a avaliar a capacidade de medição da concepção escolhida, não foram desenvolvidos sistemas de posicionamento no interior do riser. Estes sistemas foram apenas idealizados, de forma que possam ser adaptados a este protótipo futuramente.
Figura 30 - Vista isométrica do projeto do protótipo.
Figura 31 - Foto do protótipo montado.
3.4	MODELO COMPUTACIONAL
O protótipo construído é capaz de adquirir duas imagens de uma mesma região anelar do riser, obtidas de ângulos diferentes. Como foi visto no Capítulo 2 , estas duas imagens são suficientes para que se possa calcular as coordenadas 3D de pontos do objeto. No entanto, a configuração escolhida para o protótipo possui uma lente cônica em frente à câmera, desta forma o modelo citado na seção 2.2 não pode ser utilizado plenamente. Fiala[17] propõe um modelo para reconstrução 3D a partir de sistemas semelhantes, porém utilizando espelhos. Foi necessário criar um modelo computacional próprio, que descreve a formação da imagem através do tubo de acrílico, da lente cônica e de uma câmera pinhole. Este modelo pode então ser utilizado para, a partir dos pontos homólogos, definir a coordenada 3D do ponto no objeto.
3.4.1	Modelo do sistema de aquisição de imagens
O modelo computacional criado para este protótipo considera que, para que a luz refletida num ponto do objeto seja projetada sobre o sensor de imagem, esta deve seguir a seguinte trajetória, na qual sofre algumas mudanças de direção:
o Propagar-se pelo ar até o tubo de acrílico;
o Sofrer refração no tubo de acrílico;
o Propagar-se pelo ar até a lente cônica;
o Sofrer refração na lente cônica;
o Projetar-se sobre o CCD passando pelo centro de projeção;
Como o protótipo possui simetria radial, optou-se por utilizar um sistema de coordenadas cilíndrico para o modelo, conforme a Figura 32.
Figura 32 - Sistema de coordenadas cilíndrico, adotado para o modelo.
O modelo idealizado considera que os raios luminosos se propagam através dos componentes ópticos sem que mudem de plano de propagação, ou seja, permanecendo no plano 6 ao qual pertence o seu respectivo ponto objeto, conforme ilustrado na Figura 33. Esta hipótese simplificativa admite que a mudança de plano de propagação, causada por um eventual desalinhamento dos componentes, é desprezível. Isto faz com que os planos epipolares sejam a família de planos que contém o eixo de geração do protótipo, ou eixo principal.
Figura 33 - Raio de luz (em vermelho) sendo propagado conforme descrito pelo modelo: contido
no plano epipolar © = 45°.
Tendo-se um sistema de coordenadas polares na imagem e dado um ponto p =	rp), o modelo concebido é capaz de calcular a reta que se projeta sobre
este ponto na imagem, considerando que esta esteja contida no plano 0 = Qp. Este é um modelo bidimensional, já que somente considera as mudanças de direção no plano z r. Os parâmetros que caracterizam o modelo são os seguintes:
o Parâmetros referentes ao conjunto Câmera-Objetiva
■	C: Coordenadas Z e R do centro de projeção da lente;
■	0C: Ângulo do eixo principal da câmera;
■	F: Distância normal do sensor de imagem ao centro de projeção;
■	Tamanho Pixel: Tamanho do pixel do sensor de imagem;
o Parâmetros da Lente Cônica
■	V: Coordenadas Z e R do vértice da lente cônica (LC);
■	0LC: Ângulo do eixo de geração da lente cônica;
■	aLC: Ângulo do cone da lente cônica;
o Parâmetros do tubo de acrílico
■	OTA: Posição do centro de massa do tubo de acrílico (TA);
■	0TA:Ângulo do eixo de geração do tubo de acrílico;
■	Dta: Diâmetro externo do tubo de acrílico;
■	Eta: Espessura do tubo de acrílico;
o Parâmetros dos meios;
■	Nar: Índice de refração do ar;
■	Nlc: Índice de refração da lente cônica;
■	Nta: Índice de refração do acrílico
Com o desalinhamento de alguns componentes ópticos, é possível que estes parâmetros não sejam constantes para todos os planos 0 do sistema de coordenadas. Desta maneira, o alinhamento do sistema óptico torna-se crítico para o desempenho do sistema.
A Figura 34 ilustra os raios calculados pelo modelo para uma série de pontos da imagem, todos estes no mesmo plano 0.
Figura 34 - Raios traçados por um software dedicado, utilizando o modelo computacional criado.
3.4.2	Modelo do sistema estereoscópico
O protótipo é constituído de dois subsistemas de aquisição de imagem, conforme a seção 3.3.4. Cada um destes subsistemas pode ser descrito pelo modelo computacional exposto na seção 3.4.1. Criou-se então um modelo computacional do
O modelo do sistema estereoscópico considera algumas hipóteses simplificativas, que são:
o Os eixos principais das câmeras dos subsistemas de aquisição de imagens estão perfeitamente paralelos ao eixo de geração do tubo de acrílico;
o O centro de projeção das duas câmeras encontra-se sobre o eixo de geração;
o O vértice da lente cônica encontra-se sobre o eixo de geração;
o O sistema montado possui simetria radial prefeita.
Os parâmetros deste modelo são os seguintes:
o Parâmetro do tubo de acrílico
■	OTA: Posição do centro de massa do tubo de acrílico;
■	Dta: Diâmetro externo do tubo de acrílico;
■	Eta: Espessura do tubo de acrílico;
o Parâmetros referentes ao conjunto Câmera-Objetiva
■	CA, CB: Posição dos centros de projeção, sobre o eixo do TA6;
■	FA, FB: Distância normal do sensor de imagem ao centro de projeção de cada câmera;
■	Tamanho Pixel: Tamanho do pixel dos sensores de imagem;
o Parâmetros da Lente Cônica
■	VA, VB: Distância entre os vértices das LCs e CA, CB, sobre o eixo do TA;
■	©lca, ©lcb: Ângulo do eixo de geração das lentes cônicas;
■	aLCA, aLCB: Ângulo do cone das lentes cônicas;
o Parâmetros dos meios;
■	Nar: Índice de refração do ar;
■	Nlc: Índice de refração da lente cônica;
■	Nta: Índice de refração do acrílico
A Figura 35 ilustra os raios traçados pelo modelo do sistema estereoscópico, assim como alguns pontos triangulados. No modelo foi introduzido um desalinhamento dos componentes para retratar a flexibilidade deste.
Figura 35 - Raios traçados utilizando-se o modelo do sistema estereoscópico. As intersecções dos pares de PHs aparecem destacadas em preto.
4	SOFTWARE DE MEDIÇÃO
4.1	REQUISITOS TÉCNICOS E FUNCIONAIS
O software de medição do protótipo realiza as tarefas de controle da aquisição de imagens, o processamento, a triangulação e geração das nuvens de pontos e a determinação dos resultados de medição.
O software auxilia no correto posicionamento do protótipo no interior do duto, fazendo com que a região da solda esteja devidamente localizada no volume de medição do protótipo.
Tendo sido acionada a medição, o software deverá gerar a visualização da nuvem de pontos medida, e ainda exibir o resultado da medição dos desalinhamentos transversais e angulares entre as seções adjacentes do duto.
4.2	ESTRUTURAÇÃO
Para a realização de tal tarefa, o software realiza as operações que serão abordadas nas seções de 4.3.1 a 4.3.6. A Figura 36 ilustra o diagrama das operações realizadas pelo software de medição.
Figura 36 - Fluxograma das etapas executadas pelo software do protótipo.
4.3	IMPLEMENTAÇÃO
4.3.1	Posicionamento
Para o correto posicionamento do protótipo, utiliza-se a imagem de uma das câmeras que mostra o interior do duto. Nesta imagem são desenhados dois círculos concêntricos, que delimitam a região de interesse, que tem forma de anel. Somente a parte da imagem que está no interior deste anel será utilizada para a medição.
Dentro da região de interesse existe ainda uma sub-região também anelar. Ao posicionar o protótipo, a união soldada deve ser localizada no interior desta sub-região. Esta sub-região auxiliará o software a calcular corretamente os desalinhamentos entre as seções, conforme será visto na seção 4.3.5. Esta sub-região será aqui chamada de sub-região do cordão de solda.
4.3.2	Aquisição
As imagens que serão utilizadas para a geração dos mapas de fase e posterior triangulação são adquiridas através da correta sincronia entre a aquisição realizada pelas câmeras do sistema, e o avanço de fase das franjas senoidais, promovido pela rotação do motor de passos.
O software adquire, e armazena na memória, uma imagem por subsistema de aquisição. Em seguida o motor de passos é acionado, rotacionando - rad. Este procedimento é repetido até que uma volta completa tenha sido executada pelo motor, gerando oito imagens por subsistema de aquisição. É comum o aparecimento de alguns pontos excessivamente claros nas imagens, que pode ocorrer para os pontos mais reflexivos da superfície a ser medida. Quando atingem a saturação, estes pontos são prejudiciais ao processo de medição.
Um segundo conjunto de imagens é obtido de forma semelhante, porém reduzindo-se o tempo de shutter 7 das câmeras, o que produz imagens mais escuras. Deste modo, evita-se a formação de pontos saturados na imagem, porém formam-se regiões excessivamente escuras. Produz-se assim um total de 32
Estas imagens são depois combinadas e processadas a fim de produzir os mapas de fases absolutas. A Figura 37 ilustra duas imagens subseqüentes obtidas com uma das câmeras. Pode se notar a mudança da fase das senoides projetadas em cada direção radial. Nota-se ainda uma região cega em forma de “V” na parte superior de cada imagem causada pela passagem dos cabos do subsistema de iluminação e do subsistema de aquisição oposto.
I
I
Figura 37 - Imagens obtidas com um dos subsistemas de aquisição do protótipo.
4.3.3	Processamento
As imagens adquiridas se subdividem da seguinte maneira.
o oito imagens claras obtidas com o subsistema de aquisição A;
o oito imagens escuras obtidas com o subsistema de aquisição A, com alteração de shutter;
o oito imagens claras obtidas com o subsistema de aquisição B;
o oito imagens escuras obtidas com o subsistema de aquisição B, com alteração de shutter.
Cada conjunto de oito imagens é então processado de modo a gerar dois mapas de fase, um para cada freqüência espacial de franjas.
Determinação dos mapas de fase
Devido à utilização de duas freqüências espaciais em um mesmo filme, a criação dos mapas de fase se torna um pouco mais complexa e não pode ser resolvida pela simples aplicação da equação (21) relembrada abaixo:
^(x, y) = arctan
10	-1n
x, y	x ,y y
Dependendo do octante a qual um pixel pertence, o valor de luminosidade referente a cada fase do padrão luminoso projetado, deve ser extraído de uma, ou outra imagem. Considerando-se o mapa de octantes da Figura 38 e a seqüência de projeções; a Tabela 1 lista os índices das imagens que devem ser utilizadas para a aplicação da equação (21).
Figura 38 - Exemplo de mapa de octantes para um dos subsistemas.
Por exemplo, para um pixel pertencente ao octante C, a imagem que contém o valor de luminosidade I* é a imagem 6. Para I* deve-se buscar o valor de luminosidade daquele pixel na imagem 7, para I^y utiliza-se a imagem 0, e assim por diante, conforme a tabela.
Tabela 1 - Correspondência de fases e imagens para cada octante.
	Índice da Imagem							
Mapa	Mapa N-1				Mapa N			
Fase a ser considerada	0	n	n	3 n 2	0	n	n	3 n 2
Octante A	0	1	2	3	4	5	6	7
Octante B	7	0	1	2	3	4	5	6
Octante C	6	7	0	1	2	3	4	5
Octante D	5	6	7	0	1	2	3	4
Octante E	4	5	6	7	0	1	2	3
Ortante F	3	4	5	6	7	0	1	2
Octante G	2	3	4	5	6	7	0	1
Octante H	1	2	3	4	5	6	7	0
o dois mapas de fase (N e N-1), e
o dois mapas de fase com shutter reduzido.
Filtro de Modulação
Durante o cálculo da fase de cada pixel, para a criação do mapa de fases, é possível calcular também o valor de modulação luminosa ocorrido em cada pixel. Isto é, a variação de luminosidade sofrida pelo pixel observada nas oito imagens utilizadas, que corresponde ao valor de Ia na equação (20). Um valor baixo de modulação indica que a confiabilidade do valor de fase calculado para aquele ponto pode ser duvidosa. Sendo assim, aplica-se um filtro de modulação nos mapas de fase, que elimina os pontos com baixo valor de modulação transformando-os em pixeis inválidos.
Filtro de saturação
A saturação de um mesmo pixel, em mais de uma das imagens utilizadas para o cálculo do mapa de fases pode prejudicar sua confiabilidade. Quando o valor de luminosidade registrado satura a escala utilizada, registrando-se o valor de 255 para o caso de uma câmera de oito bits, o cálculo da fase do pixel que se encontre nesta situação pode ser duvidoso. Utiliza-se então um filtro de saturação que transforma em inválidos os valores de fase calculados em pixeis que tenham saturado em mais de uma imagem.
Filtro Passa Baixas
A aplicação de um filtro passa baixas é desejável para eliminação do ruído presente nos mapas de fase. No entanto, os mapas de fase relativa possuem descontinuidades que são os saltos de fase. Estas descontinuidades representam altas freqüências no espectrograma da imagem, que não devem ser eliminadas.
Devido a isso, realiza-se o cálculo de um mapa de senos e co-senos do mapa de fases. Estes, idealmente, não possuem descontinuidades e por isso podem sofrer a aplicação de um filtro passa baixas sem distorcer significativamente o sinal de medição. Após a aplicação deste filtro, recalcula-se o mapa de fases a partir do
Remoção da Espiral
Devido à geometria helicoidal das franjas, e ao passo da hélice utilizada, o mapa de fases calculado possui a aparência de uma espiral de duas entradas, conforme pode ser visto na Figura 39.
Figura 39 - Mapa de fases obtido, sem remoção do espiral.
Este mapa apresenta ambigüidades, de forma que é impossível determinar a ordem de franja absoluta da imagem nesta disposição. Para viabilizar o cálculo do mapa de fases absolutas, é necessário remover este efeito de espiral. Realiza-se uma operação matemática na fase, subtraindo do mapa de fases relativas um valor de fase proporcional ao valor do ângulo que cada pixel forma na circunferência, de forma a criar descontinuidades de fase. O resultado deste procedimento pode ser visto na Figura 40.
Figura 40 - Mapa de fases obtido após a remoção da espiral.
Remoção do Salto de Fases
Para o cálculo do mapa de fases absolutas combinam-se os dois mapas (N e N-1) após a remoção da espiral conforme a equação (25), para cada situação de shutter. A Figura 41 ilustra o resultado deste procedimento.
Figura 41 - Mapa de fases absoluto.
Filtro de Pseudo-modulação Espacial
Para eliminação de pontos espúrios do mapa de fases absoluta, utiliza-se um filtro de pseudo-modulação espacial118'. Este filtro considera que, para um determinado pixel, os seus vizinhos devem ter fase semelhante a ele. Utiliza-se um índice de semelhança dos pixeis adjacentes ao pixel em análise, e um limiar de descarte.
A aplicação deste filtro implica na restrição de que a superfície a ser medida deve ser minimamente contínua. Pontos onde há descontinuidade geométrica causarão descontinuidades de fase nos mapas e consequentemente poderão ser eliminados.
Mescla dos Mapas
Os mapas de fases absolutas, produzidos a partir de cada situação de shutter (com imagens claras e escuras) são mesclados de modo a aproveitar os melhores pontos válidos de cada mapa. Em geral os pontos que sofrem saturação nos mapas produzidos com o shutter mais lento, não o sofrem na situação de shutter rápido. Inversamente, os pontos de baixa modulação dos mapas gerados como o shutter rápido, têm boa modulação com o shutter lento. Um algoritmo escolhe o melhor destes com base no maior valor de modulação.
Interpolação
Finalmente aplica-se um procedimento de interpolação nos mapas de fase absoluta, no qual os pontos invalidados pelas operações de filtragem são substituídos pelo valor da mediana dos seus vizinhos válidos. Utiliza-se para este filtro um kernel de 5x5, ou seja, consideram-se os 24 pixels vizinhos ao pixel em análise. Se todos estes vizinhos foram excluídos pelas operações de filtragem, o pixel continua a ser um inválido. Este procedimento elimina pequenas falhas locais no mapa de fases.
4.3.4	Triangulação
A identificação de pontos homólogos é realizada levando-se em conta a geometria epipolar da montagem estereoscópica do protótipo.
Primeiramente define-se a grade de pontos que será gerada ao longo do volume de medição. Escolhem-se o número de pontos por circunferência e o número de pontos por perfil a serem gerados ao longo do volume de medição. A nuvem da Figura 42, por exemplo, possui dezesseis pontos por circunferência e quatro pontos por perfil. Uma vez definida a malha de medição, inicia-se a triangulação.
Figura 42 - Estruturação da nuvem de pontos a ser gerada.
Como as linhas epipolares são distribuídas de forma radial na imagem, e os pontos projetados sobre estas linhas pertencem ao correspondente plano epipolar, os pontos 3D conservam a coordenada 0 de suas linhas epipolares (com referência ao sistema de coordenadas já ilustrado na Figura 32).
Cada par de linhas epipolares representa uma geratriz do cilindro a ser medido. Extrai-se então o perfil de fase ao longo destas linhas epipolares. A Figura 43 ilustra um par de mapas de fase - um para cada câmera - e os respectivos perfis de fase das linhas epipolares selecionadas. O degrau que pode ser visto nos mapas de fase corresponde ao cordão de solda.
Figura 43 - Perfis de fase para um par de linhas epipolares.
Conhecendo-se o número de pontos por perfil a ser gerado, definem-se os planos Z sobre os quais os pontos da superfície do duto serão medidos. Para cada plano Z cria-se uma tabela que correlaciona a posição radial de um ponto 3D, sobre este plano, com a posição de sua projeção sobre as linhas epipolares de cada imagem, utilizando-se o modelo computacional apresentado na seção 3.4.2. Estas tabelas serão aqui chamadas de Tabelas de Correspondência R-r
Um exemplo dos pontos desta tabela é mostrado no gráfico da Figura 44. Como os pontos são discretos é realizada uma interpolação linear para obter uma curva contínua. Um par de tabelas, igual ao da figura é gerado para cada plano Z.
Figura 44 - Tabelas de Correspondência R-r para um dado plano Z.
Utiliza-se então um algoritmo iterativo para determinar a coordenada R do ponto da superfície sendo medida, dadas as coordenadas 0 e Z. A coordenada 0 definirá os perfis de fase que serão utilizados; e a coordenada Z, as tabelas de correspondência entre raio real e raio da projeção.
O algoritmo arbitra o valor do raio do ponto a ser medido e obtém o valor da diferença de fase entre as projeções daquele ponto (0 Z R)T suposto. Para isto, definem-se as projeções ra e rb do ponto, dado um R, conforme ilustra a Figura 44. Com os pontos ra e rb calcula-se o valor da diferença de fase conforme ilustrado na Figura 43. O algoritmo realiza sucessivas aproximações objetivando minimizar a diferença de fase. Desta maneira cumpre-se o requisito de que diferentes projeções de um ponto da cena possuem a mesma fase em ambas as imagens (a sua assinatura). O algoritmo de minimização utilizado é o conhecido Newton-Raphson[19].
4.3.5	Cálculo dos resultados de medição
A nuvem de pontos medida na região interna do cordão de solda é utilizada para o cálculo dos desalinhamentos presentes entre as seções de duto soldadas. Para isto, realiza-se o ajuste matemático de um cilindro em cada porção da nuvem de pontos medida. Um cilindro é ajustado aos pontos da nuvem que se encontram de um lado do cordão de solda, e outro cilindro é ajustado aos pontos que se encontram do outro lado.
D: diâmetro do cilindro ajustado;
x.: posição em x do eixo de geração do cilindro no plano Z=0;
yc: posição em y do eixo de geração do cilindro no plano Z=0;
a ângulo que o eixo de geração do cilindro faz com o eixo x;
ay: ângulo que o eixo de geração do cilindro faz com o eixo y.
Dados os dois cilindros, representando cada seção de riser, seus parâmetros são utilizados para calcular os desalinhamentos transversais, pelas seguintes fórmulas:
= xcB
- XcA
(26)
dy = ycB - ycA
(27)
Onde os supra-índices A ou B indicam a qual cilindro o parâmetro pertence. O cilindro A é aquele ajustado à seção que está do lado do subsistema de aquisição A do protótipo, e o cilindro B, da seção oposta. O desalinhamento transversal total d é calculado por:
d = y/dx 2 + dy 2
(28)
Analogamente, os desalinhamentos angulares são calculados da seguinte maneira:
ax =axB -axA
(29)
ay =ayB -ayA
(30)
E consequentemente, o desalinhamento angular total a é calculado por:
a = slaxa +ay'
(31)
Na janela de exibição dos resultados de medição, do software, estes dois valores são informados ao usuário.
dx
4.3.6	Visualização
A visualização da nuvem de pontos é realizada utilizando-se a biblioteca de geração de imagens 3D denominada OpenGL. O software do protótipo permite a manipulação da nuvem de pontos para visualização como os softwares de CAD 3D atuais. Para auxiliar a identificação dos defeitos de solda, uma escala de cores é utilizada de forma que os pontos mais altos da superfície interna do duto (menores raios) aparecem em vermelho, enquanto os pontos mais profundos aparecem em azul. A Figura 45 ilustra uma das nuvens de pontos medidas pelo protótipo, visualizada na tela de resultados de medição do sistema. Nota-se que a escala de cores auxilia a revelar os defeitos de solda presentes no duto medido. A zona de sombra presente na figura é causada pelos cabos dos subsistemas de iluminação e aquisição. Pequenas falhas na nuvem, provocadas por regiões de saturação também podem ser vistas nessa imagem.
Figura 45 - Visualização da nuvem de pontos, gerada pelo protótipo na medição de um cone.
5	CALIBRAÇÃO E AVALIAÇÃO
5.1	CALIBRAÇÃO
Para que seja possível realizar medições com o sistema é necessário conhecer os parâmetros do modelo computacional que são utilizados na triangulação dos pontos (seção 3.4.2). Alguns destes parâmetros podem ser medidos, outros podem ser retirados de tabelas, outros advêm da calibração individual das câmeras, e outros necessitam ser calculados a partir de um procedimento de calibração integrado.
Dentre os parâmetros que são medidos, encontram-se:
o Dta = 60,0 mm (diâmetro do tubo de acrílico);
o Eta = 3,0 mm (espessura do tubo de acrílico);
A calibração das câmeras fornece:
o Fa = 9,36 mm (comprimento focal da objetiva A);
o Fb = 9,01 mm (comprimento focal da objetiva B);
Os parâmetros retirados de tabelas e dados de fabricantes são:
o Tamanho do Pixel = 0,0044 mm;
o aLCA = 90,0o (ângulo da lente cônica A);
o aLCB = 90,0o (ângulo da lente cônica B);
o Nar = 1,00 (índice de refração do ar);
o Nlc = 1,52 (índice de refração da lente cônica);
o Nta = 1,49 (índice de refração do acrílico).
Para a calibração destes parâmetros, realiza-se a medição de um padrão cilíndrico. Ao iniciar a calibração, o modelo computacional utilizado para triangulação possui como dados iniciais todos os parâmetros citados anteriormente, e uma estimativa inicial dos parâmetros a serem calibrados, que são: CA, CB, VA, VB (centros ópticos das câmeras, e vértices das LC).
O protótipo é posicionado no interior do padrão cilíndrico e o procedimento de medição é executado até a geração dos mapas de fase.
A partir da estimativa inicial dos parâmetros, realiza-se a triangulação dos pontos homólogos achados nos mapas de fase. Ajusta-se um cilindro à nuvem gerada. O diâmetro do cilindro ajustado matematicamente é então comparado com o valor verdadeiro convencional (VVC) do diâmetro do padrão cilíndrico. Um algoritmo iterativo de minimização multivariável (Simplex[19]) é então utilizado para, através da variação dos parâmetros a serem calibrados, minimizar a diferença entre o diâmetro do cilindro medido e seu VVC.
Desta maneira são definidos todos os parâmetros que o modelo computacional precisa para realizar a correta triangulação dos pontos medidos.
Foram realizadas cinco calibrações, utilizando-se um cilindro padrão calibrado numa máquina de medir por coordenadas modelo Zeiss MC 550, cuja incerteza é de 2 2L
1,3	+—— um. Para o diâmetro do cilindro, a incerteza calculada é de 1,6 um. O 1000
resultado destas calibrações pode ser visto na Tabela 2.
Tabela 2 - Resultados da calibração de CA, CB, VA, VB.
	Média [mm]	Desvio Padrão [mm]
Ca	-145,000	0,000
Cb	145,785	0,048
Va	55,890	0,125
Vb	-52,076	0,084
É necessário ressaltar que o valor de um dos parâmetros, o CA, foi arbitrado de modo a evitar a indeterminação do sistema, uma vez que apenas três dos parâmetros são independentes.
5.2	AVALIAÇÃO DAS INCERTEZAS
Figura 46 - Diagrama de Ishikawa para o processo de medição.
Devido ao processo de medição ser bastante automatizado, as fontes de incerteza relativas ao procedimento e ao operador ficam reduzidas ao correto posicionamento axial do protótipo no interior da região que contém o cordão de solda. Caso isto não seja bem feito, a geometria da solda medida pode acabar influenciando no cálculo dos desalinhamentos transversais e angulares, uma vez que pontos do cordão de solda podem prejudicar o correto ajuste dos cilindros matemáticos utilizados no cálculo dos desalinhamentos.
A variação de temperatura provoca alterações na geometria da peça a ser medida, porém em uma ordem de grandeza muito pequena para esta aplicação. O ruído eletrônico e a sujeira ambiente podem prejudicar o correto cálculo dos mapas de fase. Vibrações podem provocar deslocamentos do protótipo durante a aquisição da imagem, distorcendo ou degradando os mapas de fase resultantes.
A rugosidade da superfície, aliada a uma baixa homogeneidade óptica, pode provocar zonas com níveis de luminosidade muito diferentes na imagem. Tudo isto prejudica o correto cálculo dos mapas de fase, e pode provocar zonas onde a triangulação é impossível.
5.2.1	Fontes inerentes do sistema de medição
Para a avaliação das fontes de incerteza do sistema de medição, torna-se necessário sintetizar as etapas do procedimento de medição realizadas pelo protótipo. Isto é feito na Figura 47.
Figura 47 - Passos relevantes da medição realizada pelo protótipo.
A incerteza da coordenada Medida para cada ponto pode ser estimada a partir dos dados de entrada do procedimento de triangulação. Conhecendo-se a incerteza de cada ponto, é possível calcular qual será seu impacto no cálculo dos desalinhamentos, através de simulações numéricas. Devido a isso, primeiramente será estimada a incerteza das coordenadas 3D de cada ponto.
O diagrama de Ishikawa da Figura 48 expõe os principais elementos que influenciam na incerteza das coordenadas 3D dos pontos.
Figura 48 - Diagrama de Ishikawa para o Sistema de Medição.
Ruído: O ruído pode causar incerteza nos mapas de fase, cruciais na determinação dos PH.
Epipolo: Uma imprecisão na determinação do centro da imagem, ou um desalinhamento dos subsistemas de aquisição, podem causar erros na determinação das linhas epipolares. Conseqüentemente a obtenção dos perfis de fase, utilizados pelo processo de triangulação, podem ser afetadas por erros sistemáticos que podem causar distorções na superfície medida.
Correspondência Epipolar: Se existe erro na correspondência epipolar das imagens, dois perfis de fase serão comparados erroneamente durante o processo de triangulação, causando erros sistemáticos na medição.
Parâmetros do Modelo: Erros na determinação dos parâmetros do modelo computacional podem causar erro na determinação das Tabelas de Correspondência R-r, trazendo erros sistemáticos para a triangulação. Assimetrias radiais do protótipo também se refletem em erros sistemáticos nestas tabelas.
Como se pode observar, as fontes de incerteza citadas acima somente influenciam na geração das Tabelas de Correspondência R-r e na obtenção dos Perfis de Fase. Desta maneira, o processo de triangulação descrito na seção 4.3.4, somente produzirá erros predominantemente sistemáticos na determinação da coordenada R dos pontos triangulados. Da forma como o algoritmo foi montado, as coordenadas Oe Z são tratadas como variáveis independentes em relação às quais o raio é calculado na triangulação.
5.2.2	Estimativa da incerteza das coordenadas 3D
Com o intuito de estimar os erros na determinação da coordenada R de cada ponto, realizou-se a medição de um cilindro calibrado. O cilindro foi medido cinco vezes pelo sistema. Para cada posição Z,O do volume de medição calculou-se a média e o desvio padrão dos resultados da medição do raio, ao longo das cinco
Tabela 3 - Incerteza de medição da coordenada R de cada ponto.
Raio Nominal do Cilindro	Média	Desvio Padrão	Td	Re [U950/J
76,537 mm	76,518mm	0,073mm	-0,019mm	0,187 mm
O erro de cilindricidade do cilindro medido é de 0,014mm sendo cerca de um décimo do valor de repetitividade calculado.
5.2.3	Estimativa da incerteza na determinação de desalinhamentos
A partir do valor da incerteza na determinação da coordenada R de cada ponto, é possível estimar a incerteza do algoritmo de medição dos desalinhamentos angulares e transversais associada a este efeito. Isto é possível através de uma simulação de Monte Carlo, onde uma nuvem de pontos sintética é criada. Esta nuvem possui valores de desalinhamento conhecidos e a incerteza padrão do raio de cada ponto simulada através de uma variável aleatória com desvio padrão similar ao obtido no experimento citado anteriormente. Os resultados de tal simulação, para o valor de incerteza padrão de 0,073mm podem ser vistos na Tabela 4.
Tabela 4 - Simulação de incerteza de medição de desalinhamentos.
Simulação	Tipo de Desalinhamento	VVC	Média das Medições	Desv. padrão	Td	Re[95%]
#01	Transversal	0,500 mm	0,500 mm	0,008 mm	0,000 mm	0,006 mm
	Angular	0,000 °	0,029 °	0,015 °	0,029 mm	0,020 °
#02	Transversal	0,000 mm	0,010 mm	0,005 mm	0,010 mm	0,007 mm
	Angular	3,000 °	3,002 °	0,024 °	0,002 °	0,016 °
#03	Transversal	0,538 mm	0,538 mm	0,008 mm	0,000 mm	0,006 mm
	Angular	3,000 °	3,002 °	0,024 °	0,002 °	0,016 °
Desalinhamento Transversal
♦Td
■ Re[95%]
Figura 49 - Tendência e repetitividade para a medição de desalinhamentos transversais.
Desalinhamento Angular
♦Td
■ Re[95%]
Figura 50 - Tendência e repetitividade para a medição de desalinhamentos angulares.
Estes resultados validam os algoritmos de medição de desalinhamentos uma vez que as nuvens de pontos sintéticas criadas servem como valores de referência dos desalinhamentos. Tais resultados estimam a incerteza inerente do processo de medição de desalinhamentos, considerando-se apenas a incerteza padrão da determinação dos raios de cada ponto, como não idealidades. É necessário lembrar que existem ainda outras não idealidades do processo de medição relacionadas às condições superficiais do cilindro medido que afetam negativamente a incerteza de medição.
Outro fator que influencia a incerteza na determinação dos desalinhamentos é o comprimento axial das porções da nuvem de pontos às quais os cilindros matemáticos são ajustados (seção 4.3.5). A Figura 51 ilustra a influência do comprimento destas regiões na repetitividade da medição de desalinhamentos transversais e a Figura 52, para a medição de desalinhamentos angulares.
Nas medições realizadas com o protótipo nos ensaios descritos na seqüência, utilizou-se o comprimento da região de ajuste dos cilindros de cerca de 15 mm.
Desalinhamentos Transversais
Figura 51 - Influência do comprimento axial das regiões de ajuste dos cilindros na medição de desalinhamentos transversais.
Desalinhamentos Angulares
Figura 52 - Influência do comprimento axial das regiões de ajuste dos cilindros na medição de desalinhamentos angulares.
5.3	ENSAIOS CONTROLADOS - BANCADAS
Quatro ensaios foram realizados com o intuito de avaliar o desempenho do sistema desenvolvido. Estes encontram-se descritos nas seções de 5.3.1 a 5.3.4.
As condições da superfície interna das seções de SCR utilizadas nos ensaios de medição do cordão de solda e medição de desalinhamentos são bastante severas para a medição óptica. Estas possuem regiões de oxidação e regiões de alta reflexividade, provocada por operações de esmerilhamento. Isto contribui para a reprodução das condições esperadas em campo. A Figura 53 ilustra tais condições, e foi fotografada de uma das amostras.
Figura 53 - Qualidade óptica da superfície interna das amostras a serem medidas.
5.3.1	Medição do diâmetro de cilindros e alinhamentos
Com o intuito de avaliar a medição de cilindros de diferentes diâmetros, um cilindro escalonado foi medido pelo sistema. A peça possui três seções cilíndricas de 50 mm de comprimento com diâmetros internos diferentes, conforme a Figura 54.
Figura 54 - Cilindro escalonado utilizado no experimento.
Duas medições de trechos que continham simultaneamente cilindros com diâmetros diferentes foram realizadas sobre esta peça. Foi, então, possível medir o diâmetro de cada porção da nuvem de pontos e os desalinhamentos entre os cilindros. Estes valores foram comparados com o VVC obtido pela calibração da peça na máquina de medir por coordenadas. Os resultados deste experimento encontram-se detalhados na Tabela 5.
Tabela 5 - Resultados das medições do cilindro escalonado para 5 repetições.
Medição	Grandeza	VVC	Média	Desv. padrão	Td	Re[95%]
#01	Dia. A	159,038 mm	159,034 mm	0,007 mm	-0,004 mm	0,019 mm
	Dia. B	153,074 mm	153,159 mm	0,007 mm	0,085 mm	0,019 mm
	a	0,014 °	0,710 °	0,084 °	0,696 °	0,233 °
	d	0,017 mm	0,028 mm	0,011 mm	0,011 mm	0,030 mm
#02	Dia. B	153,074 mm	152,984 mm	0,007 mm	-0,090 mm	0,019 mm
	Dia. C	147,004 mm	146,941 mm	0,010 mm	0,063 mm	0,027 mm
	a	0,003 mm	0,280 °	0,042 °	0,277 °	0,117 °
	d	0,003 °	0,111 mm	0,009 mm	0,108 mm	0,025 mm
Observa-se que a os resultados de medição de desalinhamentos transversais possuem pequena tendência e repetitividade se comparada com a incerteza-alvo de 0,5 mm. Por outro lado, a medição de desalinhamentos angulares produz resultados com incertezas da ordem de grandeza de 1°. Quanto maior o comprimento do volume de medição, menor será a incerteza do ângulo do cilindro matematicamente ajustado à nuvem de pontos.
5.3.2	Medição de desalinhamentos transversais
Para o ensaio de medição de desalinhamentos transversais, criou-se uma bancada capaz de reproduzir desalinhamentos conhecidos entre seções de SCR adjacentes. Para isso utilizaram-se as duas seções de SCR de aproximadamente 100 mm de comprimento com extremidades faceadas. Estas seções foram posicionadas na bancada encostando uma na outra e com seus eixos principais alinhados.
Uma mesa de deslocamento micrométrico foi utilizada para produzir deslocamentos controlados em uma das seções, na direção transversal a seu eixo principal. A Figura 55 ilustra esta montagem.
Figura 55 - Bancada de desalinhamentos transversais.
Com esta bancada foram aplicados diversos desalinhamentos conhecidos, e os mesmos foram medidos com o protótipo. Como não foi possível garantir o alinhamento perfeito das seções na montagem, adotou-se a medida realizada com deslocamento nulo como referência para as outras medições, que foram tratadas como relativas. A Figura 56 ilustra o gráfico traçado com os valores de referência no eixo das abscissas, e os respectivos valores relativos medidos, nas ordenadas. Para cada valor de desalinhamento foi feita apenas uma medição.
Desalinhamentos Transversais
Figura 56 - Gráfico dos valores medidos em função dos valores de referência, para os desalinhamentos transversais.
A reta ajustada à média destes pontos tem a seguinte equação:
y = 0,991x + 0,003	(32)
Pela equação da reta ajustada, pode-se concluir que o erro de ganho é de apenas 0,9% e a tendência, cerca de 3p.m. O coeficiente de correlação para o ajuste é de 0,9998; acusando uma forte tendência linear do sistema, e um erro aleatório muito baixo. Os valores de erro em cada ponto (em mm) podem ser vistos na Tabela 6.
Tabela 6 - Resultados da medição de desalinhamentos.
Valor de referência	-2,000	-1,500	-1,000	-0,500	0,000	0,500	1,000	1,500	2,000
Valor medido	-1,999	-1,480	-0,990	-0,469	0,000	0,508	1,020	1,470	1,970
Erro	0,001	0,020	0,010	0,031	0,000	0,008	0,020	-0,030	-0,030
5.3.3	Medição de desalinhamentos angulares
A bancada de ensaios de desalinhamentos angulares possui uma configuração semelhante à de desalinhamentos transversais. No entanto uma mesa de deslocamento angular é utilizada para esta bancada. Esta possui uma resolução de 1', ou seja: 0,016°. Devido à necessidade de rotação de uma das seções do riser,
Figura 57 - Bancada de desalinhamentos angulares.
Analogamente ao experimento descrito na seção anterior, realizaram-se vários deslocamentos angulares conhecidos, e estes foram medidos com o sistema. Um gráfico dos valores medidos em função dos valores de referência pode ser visto na Figura 58. Foi realizada apenas uma medição para cada desalinhamento angular.
Desalinhamento Angular
Figura 58 - Gráfico dos valores medidos em função dos valores de referência, para os desalinhamentos angulares.
y = 1,074x - 0,089	(33)
Desta maneira, o erro de ganho é de cerca de 7,4% e a tendência, de cerca de 5' (0,089°). O coeficiente de correlação para este ajuste foi de 0,9984. Os valores de erro para em cada ponto podem ser vistos na Tabela 7 (valores em graus).
Tabela 7 - Resultados da medição de desalinhamentos angulares.
Valor de referência	-1,50°	-1,00°	-0,50°	□,00o	0,50°	1,00°	1,50°
Valor medido	-1,72°	-1,14°	-0,68°	0,00°	0,43°	0,99°	1,50°
Erro	-0,22°	-0,14°	-0,18°	□,00o	-0,07°	-0,01°	0,00°
5.3.4	Caracterização do cordão de solda
Para o ensaio do sistema na caracterização da qualidade geométrica dos cordões de solda, utilizou-se a amostra de duto com duas seções soldadas. Tal amostra, já ilustrada na Figura 15, foi confeccionada de modo a conter as três situações de interesse distintas que podem ocorrer no cordão de solda durante a soldagem das seções de risers.
A primeira região possui o cordão de solda devidamente depositado, de forma a não apresentar nenhum defeito geométrico.
Numa das situações existe o que se caracteriza por excesso de penetração de solda. Isto consiste em um relevo excessivamente alto do cordão de solda, que pode vir a constituir um concentrador de tensões no riser, reduzindo sua vida em fadiga.
Outra situação que pode prejudicar a vida em fadiga do riser, e que está contida na amostra, é a falta de penetração do cordão de solda, que provoca pequenas reentrâncias na superfície do duto, caracterizando a geometria de um concentrador de tensões.
Neste ensaio testou-se a visualização 3D da nuvem de pontos medida, e a escala de cores que visa auxiliar na identificação das características geométricas da solda. Como não estão disponíveis dados para este tipo de duto que estabeleçam os limiares aceitáveis para a altura do cordão de solda a partir dos quais se
Figura 59 - Nuvem de pontos gerada durante o ensaio.
Na Figura 60 é possível visualizar em detalhe as regiões com excesso de penetração, e falta de penetração.
Figura 60 - Zonas com excesso de penetração (esquerda) e falta de penetração (direita).
5.3.5	Observações Experimentais
Durante a execução dos experimentos descritos neste capitulo, notou-se que a tendência das medições, especialmente as de desalinhamentos angulares, é
considerável. As medições realizadas nos experimentos descritos nas seções 5.3.2 e 5.3.3 são relativas a uma medição de referência e por isso, a componente de tendência não pode ser observada nos resultados descritos. De fato, a incerteza da medição de desalinhamentos angulares influencia também a medição de desalinhamentos transversais, uma vez que esta é feita através da projeção do eixo de geração dos cilindros no plano Zo. A Figura 61 ilustra este efeito. Nela, esta parcela de erro é vista em vermelho e depende da posição do plano Zo utilizado como referência.
Figura 61 - Implicação do erro de medição do ângulo do eixo dos cilindros.
A grande incerteza na determinação do ângulo dos cilindros está relacionada a imperfeições na simetria radial do protótipo fabricado. Após a montagem do protótipo pôde-se notar que o vértice das lentes cônicas não se encontrava exatamente sobre o ponto principal p0 da imagem das câmeras. Isto contraria duas hipóteses simplificativas do modelo computacional proposto que são: os vértices das lentes cônicas estão sobre o eixo principal do sistema, e o modelo possui simetria radial (apresentados na seção 3.4.2). O alinhamento perfeito entre os componentes não foi possível, já que o protótipo não possui recursos de ajuste fino da posição dos componentes. Para a realização dos experimentos descritos nesse capítulo, utilizaram-se espaçadores na fixação das câmeras, de modo a proporcionar uma melhoria no alinhamento do circuito óptico.
O cálculo do ângulo do eixo dos cilindros pode ser melhorado aumentando-se o volume de medição no sentido de Z.
Durante a execução de todos os experimentos notou-se um erro aleatório muito pequeno, sendo que todas as medições repetidas apresentaram pequeno
88 desvio padrão. Isto indica que, uma vez reduzidas as componentes sistemáticas do erro de medição, o sistema é capaz de atingir ótimos resultados.
6	CONCLUSÕES
Após uma análise detalhada do sistema óptico proposto, constatou-se que o modelo pinhole não poderia descrevê-lo devidamente. O sistema de formação de imagens contendo a lente cônica não possui apenas um centro de projeção (nonsingle viewpoint). Mesmo utilizando-se um modelo pinhole bidimensional para cada plano de simetria radial, ainda assim os raios de luz não se cruzam num único ponto, a pupila ou centro de projeção. Devido a isto foi necessário criar um modelo matemático próprio. A lente cônica ainda provoca um comportamento astigmático no sistema, ou seja, a imagem entra em foco para comprimentos focais diferentes dependendo da direção. Desta maneira deve-se escolher entre focalizar a imagem na direção radial, ou circunferencial.
O sistema proposto possui simetria radial, isso possibilita a coincidência entre os planos epipolares, e as direções radiais das imagens, além dos planos 0 do sistema de coordenadas cilíndrico escolhido.
Optou-se por utilizar um sistema de projeção de padrões senoidais capaz de projetar duas freqüências espaciais distintas. Devido à forma como este sistema foi implementado, tornou-se necessário identificar os diferentes octantes nas imagens, a fim de possibilitar o phase-unwrapping. Como os padrões projetados eram helicoidais, foi preciso introduzir uma descontinuidade de fase artificial, para o cálculo do mapa de fases absoluto.
A não homogeneidade óptica da superfície a ser medida exigiu a utilização de uma estratégia de aquisição de imagens onde adquiriam-se duas imagens com diferentes velocidades de shutter. Desta maneira é possível combinar estas imagens
O protótipo desenvolvido comprovou a validade da nova concepção estereoscópica endoscópica e atingiu plenamente o desempenho metrológico esperado nos ensaios. A incerteza expandida8, para uma abrangência de 95% na medição individual do raio dos pontos triangulados foi estimada em cerca de 0,21 mm. Para a medição de desalinhamentos transversais a incerteza expandida, no pior caso, é de cerca de 0,13 mm, sendo que em medições relativas os erros não superam 30 p.m. A medição de desalinhamentos angulares, no pior caso, produziu uma incerteza expandida de 0,91°, sendo que em medições relativas os erros não superam 0,22°. A componente sistemática do erro de medição é excessiva e por isso há a necessidade do uso de correção.
A não correspondência entre as incertezas previstas em simulações, e as obtidas em resultados experimentais, são conseqüência das imperfeições construtivas do protótipo.
A visualização da nuvem de pontos produzida possibilita a identificação dos defeitos de solda de forma simples e clara. Os valores medidos podem ser comparados com as tolerâncias aceitáveis e o sistema pode sinalizar automaticamente as regiões com solda regular, com excesso de penetração ou com falta de penetração.
Através de apenas uma medição é possível avaliar o alinhamento entre as seções adjacentes soldadas e a qualidade geométrica do cordão de solda. O procedimento de medição é rápido e automatizado, sendo que após o correto posicionamento do sistema, a medição toda ocorre em cerca de 90 segundos.
Tendo sido verificada a viabilidade metrológica da concepção apresentada, propõe-se que futuramente o projeto mecânico do protótipo possa ser revisto de modo a permitir um melhor alinhamento entre os componentes ópticos. Isto possibilitará aproveitar toda a potencialidade da concepção, eliminando a participação das não idealidades construtivas no somatório de incertezas.
Os campos de visão dos subsistemas de aquisição podem ser melhor aproveitados de modo a aumentar o comprimento do volume de medição. Com um maior volume de medição a qualidade das medições de desalinhamentos seria melhorada. Isto pode ser feito alterando a distância entre os subsistemas de aquisição ou o ângulo das lentes cônicas.
Propõe-se também a revisão do modelo matemático de modo a reconsiderar algumas hipóteses simplificativas. Sugere-se a criação de um modelo tridimensional que possa considerar o efeito de desalinhamentos fora dos planos epipolares e assimetrias radiais.
REFERÊNCIAS
[1]	FAUGERAS, O. Three Dimensional Computer Vision. The MIT Press, 1993.
[2]	HARTLEY, R.; ZISSERMAN, A. Multiple View Geometry. Cambrige University Press, 2003.
[3]	BIRCHELD, S. An Introduction to Projective Geometry for computer vision. Disponível em:&amp;lt;http://isa.umh.es/doct/v3d/projective.pdf&gt;, Acesso em 01 set. 2006.
[4]	HARTLEY, R. In defense of the eight-point algorithm. IEEE Transactions on Pattern Analysis and Machine Intelligence, 1997, vol. 19, pp. 580-593.
[5]	HARLEY, E. A. Bicas. Fisiologia da Visão Binocular. 3° Congresso de Reciclagem, USP.
[6]	MA, Y. et. al. An Invitation to 3-D Vision. Springer, 2000.
[7]	DE FRANÇA, J. A. Calibração de um Sistema de Visão Estéreo: de Correspondência de Pontos à Reconstrução Euclidiana. Universidade Federal de Santa Catarina, tese, 2005.
[8]	TANG, C.-K. et. al. Epipolar Geometry Estimation by Tensor Voting in 8D Epi Seventh International Conference on Computer Vision, 1999, vol. 1, p. 502.
[9]	HARTLEY, R. Computing Matched-epipolar Projections. Computer Vision and Pattern Recognition, 1993, pp. 549-555.
[10]	D'APUZZO, N. Human Face Modeling from Multi Images. 3rd International Image Sensing Seminar on New Development in Digital Photogrammetry, 2001, pp. 28-29
[11]	FANTIN, A. V. Medição de Formas Livres por Topogrametria. Universidade Federal de Santa Catarina, dissertação, 1995.
[12]	GÂSVIK, K. Optical Metrology. John Willey &amp;amp; Sons, 2002.
[13]	ZUMBRUNN, R. Automated Fast Shape Determination of Diffuse Reflecting Objects at Close Range by Means of Structured Light and Digital Phase Measurement. ISPRS Intermission Conference on Fast Processing of Photogrammetric Data, 1987, pp. 363-379.
[14]	LONGET-HIGGINS, H. C. A Computer Algorithm for Reconstructing a Scene from Two Projections. Nature, 1981, vol. 293, pp. 133-135.
[15]	LUONG, Q.-T.; FAUGERAS, O. D. The fundamental matrix: Theory, algorithms, and stability analysis. International Journal of Computer Vision, 1996, vol. 17, pp.43-75.
[16]	KANNALA, J. BRANDT, S. A generic camera calibration method for fisheye lenses. Pattern Recognition, 2004, vol 1, pp. 10-13.
[17]	FIALA, M.; BASU, A. Panoramic stereo reconstruction using non-SVP optics. Computer Vision and Image Understanding, 2005, vol. 98, pp. 363-397.
[18]	NOLL, V. Desenvolvimento de um Sistema de Controle Digital para Estabilização Ativa de Imagens em Holografia Eletrônica. Universidade Federal de Santa Catarina, tese, 2006.
[19]	PRESS, W. et. al. Numerical Recipees in C. Cambrige University Press, 1992
[20]	Guia para a Expressão de Incerteza de Medição. 3a edição brasileira, INMETRO, 2003
ANEXO I: COORDENADAS HOMOGÊNEAS
O uso de coordenadas homogêneas possibilita a utilização do modelo de câmera utilizado neste trabalho. Este breve anexo serve para familiarizar o leitor com a representação de pontos em coordenadas homogêneas.
Assim como as coordenadas cartesianas são utilizadas para a realização de cálculos no espaço euclidiano, as coordenadas homogêneas são mais convenientes para a realização de cálculos no espaço projetivo. Um ponto no espaço projetivo de n coordenadas em coordenadas homogêneas é descrito por um vetor de n +1 coordenadas. Desta maneira, um ponto de coordenadas cartesianas ( y z), no espaço 3D, possui coordenadas homogêneas (x y z w) . Um ponto de coordenadas proporcionais, como por exemplo (x cy cz cw) possui a mesma representação no espaço projetivo. É possível calcular-se as coordenadas cartesianas de pontos do espaço projetivo dividindo-se as demais coordenadas pela última, conforme a seguinte expressão:
(x y z w)	(/w y/w z/wT
Daí a correspondência entre (x y z w) e (cx cy cz cw)T.
É também possível representar no espaço projetivo um ponto de coordenadas cartesianas conhecidas, conservando-se as coordenadas x, y, z e usando w = 1 conforme a expressão:
(x y z)	(x y z 1)
A diferença entre o espaço euclidiano e o projetivo é que o espaço projetivo abrange os pontos do plano no infinito. O plano no infinito é composto pelos pontos cuja coordenada w é igual a 0. Pode-se notar que é impossível calcular as coordenadas cartesianas de tal ponto.
O uso de coordenadas homogêneas possui muitos outros aspectos e introduz uma série de conveniências para o cálculo de transformações projetivas, muito comuns no processamento de imagens. Abranger este assunto em mais detalhes foge ao escopo deste trabalho, porém cabe aqui estimular o leitor a familiarizar-se melhor com tal ferramenta matemática.</field>
	</doc>
</add>