<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.08141</field>
		<field name="filename">12930_189337.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">Universidade Federal de Santa Catarina Centro Tecnológico Programa de Pós-Graduação em Engenharia Química
SIMULAÇÃO DE ESCOAMENTO EM DUTOS POR CARACTERIZAÇÃO DE EVENTOS
Dissertação apresentada ao Programa de Pós-Graduação em Engenharia Química da Universidade Federal de Santa Catarina como requisito parcial para obtenção do título de mestre em Engenharia Química Orientador Prof. Dr. Nestor Roqueiro
HENRY GALANENA BRANDOLT
Florianópolis-SC
2002
AGRADECIMENTOS:
Meus agradecimentos a todos que ajudaram e incentivaram na realização deste trabalho:
Aos meus pais, Eure e Iara e ao meu irmão Iury, pela paciência, apoio e incentivo, sempre.
A Franci pela paciência ,apoio e compreensão, mas principalmente pelo seu amor e carinho.
Aos meus familiares pelo apoio.
Ao meu amigo e orientador Prof. Dr. Nestor Roqueiro, pela ajuda, dedicação,paciência e amizade.
Ao engenheiro Renan Martins Baptista, pelos seus esclarecimentos e contribuições para o trabalho.
Aos membros da banca pela contribuição no trabalho.
A todos os amigos do LCP, Ricardo, Audrei, Mazzucco, Caio, Carlson, Neves, Cíntia, Juan, Luis Alberto, Jaime, Alex, Cínthia e Adriano pela amizade e contribuição.
Ao Edivilson pelo apoio, atenção e auxilio.
A todos que de alguma forma contribuíram para a realização deste trabalho.
A CAPES pelo apoio financeiro.
INDICE:
INDICE:
1.	INTRODUÇÃO.............................................................9
2.	REVISÃO BIBLIOGRÁFICA.................................................11
3.	MODELAGEM E IDENTIFICAÇÃO DE SISTEMAS:................................14
3.1	Identificação de sistemas :.......................................14
3.1.1	Modelagem matemática de sistemas dinâmicos...................16
3.1.1.1	Modelo ARX..................................................17
3.1.1.2	Modelo ARMAX................................................19
3.1.2	Mínimos quadrados............................................21
3.1.2.1	A teoria dos mínimos quadrados..............................21
3.1.3	Variáveis de Estado..........................................23
3.1.3.1	Representação de sistemas	dinâmicos por variáveis de estado.24
3.1.3.2	Caráter não único das variáveis de estado...................25
3.1.3.3	Modelos por Função de Transferência.........................26
4.	SIMULADOR DE ESCOAMENTO EM DUTOS...............................28
4.1	O Simuldor Pipeline Studio.................................28
4.1.1	Configuração.................................................29
4.1.1.1	Caracterização do duto......................................29
4.1.2	Método de resolução..........................................35
4.1.3	Equações Utilizadas..........................................35
5.	O MODELO LINEAR DO DUTO...............................................44
5.1	Descrição do modelo........................................44
5.1.1	O modelo de 1° ordem.........................................45
5.1.1.1	Perturbações................................................46
5.1.1.2	Bombas Centrifugas..........................................47
5.1.1.3	Válvulas....................................................49
5.1.1.4	Constante de tempo e ganho estático.........................50
5.1.1.5	Amostragem..................................................52
6.	RESULTADOS E DISCUSSÕES...............................................54
6.	1	Resultados para o óleo combustível leve...........................56
6.2	Resultados para o Diesel..........................................67
6.3	5.3 Resultados para a gasolina....................................69
6.4	Resultados para o GLP.............................................71
6.5	Influência das propriedades físicas do fluido na constante de tempo
74
6.6	Alteração no diâmetro e no comprimento do duto.............79
7.	CONCLUSÕES.....................................................83
8.	REFERÊNCIAS BILIOGRÁFICAS......................................84
ÍNDICE DE FIGURAS
Figura 3.1- Diagrama esquemático para a identificação de sistemas..15
Figura 3.2 Representação de um sistema dinâmico....................17
Figura 3.3 Descrição de um modelo ARX..............................18
Figura 3.4-Sistema linear com n parâmetros.........................22
Figura 4.1- Figura da tela do Pipeline Studio......................29
Figura 4.2-Janela para a configuração do segmento de duto..........30
Figura 4.3- Caracterização das userlines...........................31
Figura 4.4- Janela para configuração de uma bomba genérica.........32
Figura 4.5- Janela para configuração de uma bomba centrifuga.......33
Figura 4.6Caracterização da curva de performance para a bomba centrifuga
............................................................. 34
Figura 4.7- Janela para configuração de uma bomba de deslocamento positivo .................................................................. 34 Figura 4.8 Segmento de duto dividido em knots......................35
Figura 5.1-Diagrama de blocos......................................44
Figura 5.2 -Princípio da superposição..............................45
Figura 5.3- Perturbação degrau unitário............................46
Figura 5.4- Perturbação pulso retangular...........................47
Figura 5.5- Perturbação rampa......................................47
Figura 5.6-Bomba Centrifuga........................................48
Figura 5.7-Obtenção gráfica da constante de tempo..................50
Figura 5.8 Cálculo da constante de tempo...........................51
Figura 6.1-Dados de campo..........................................55
Figura 6.2-Divisão em partes da 2° seqüência de eventos............55
Figura 6.3- Comparação do modelo linear com dados de campo.........57
Figura 6.4 Dados de campo..........................................57
Figura 6.5-Simulador...............................................58
Figura 6.6-Modelo Linear...........................................58
Figura 6.7 Dados de campo..........................................58
Figura 6.8-Simulador...............................................59
Figura 6.9-Modelo linear...........................................59
Figura 6.10-Dados de campo.........................................59
Figura 6.11-Simulador..............................................60
Figura 6.12-Modelo Linear..........................................60
Figura 6.13-Dados de campo.........................................60
Figura 6.14-Simulador..............................................61
Figura 6.15-Modelo Linear..........................................61
Figura 6.16- Comparação dos dados de campo com os dados do modelo linear
...................................................................61 Figura 6.17-Dados de campo.........................................62
Figura 6.18-Simulador..............................................62
Figura 6.19-Modelo linear..........................................62
Figura 6.20-Dados de campo.........................................63
Figura 6.21 Simulador..............................................63
Figura 6.22 Modelo Linear.........................................63
Figura 6.23-Dados de campo........................................64
Figura 6.24-Simulador.............................................64
Figura 6.25-Modelo linear.........................................64
Figura 6.26-Dados de campo........................................65
Figura 6.27-Simulador.............................................65
Figura 6.28-Modelo Linear.........................................65
Figura 6.29-Eventos adicionados...................................66
Figura 6.30- Comparação a montante do duto entre o simulador e o modelo linear........................................................67
Figura 6.31-- Diferença - simulador e modelo Linear...............68
Figura 6.32- Diferença- Simulador e Modelo Linear filtrado........68
Figura 6.33- Comparação a jusante do duto entre o simulador e o modelo linear........................................................68
Figura 6.34- Diferença -simulador e modelo Linear.................69
Figura 6.35- Diferença- Simulador e Modelo Linear filtrado........69
Figura 6.36- Comparação entre o simulador e o modelo linear.......69
Figura 6.37- Diferença entre o simulador e o modelo linear........70
Figura 6.38-- Diferença entre o simulador e o modelo linear filtrado.70
Figura 6.39-Comparação do modelo linear com o simulador...........70
Figura 6.40 Diferença entre o simulador e o modelo linear.........71
Figura 6.41 Diferença entre o simulador e o modelo................71
Figura 6.42 Comparação do modelo linear com o simulador...........72
Figura 6.43- Diferença entre o simulador e o modelo linear........73
Figura 6.44 Diferença entre o simulador e o modelo................73
Figura 6.45- Comparação do modelo linear com o simulador..........73
Figura 6.46 Diferença entre o simulador e o modelo linear.........74
Figura 6.47 Diferença entre o simulador e o modelo................74
Figura 6.48-Relação entre viscosidade e a constante de tempo......75
Figura 6.49-Relação entre a densidade e a constante de tempo......76
Figura 6.50-Relação entre a constante de tempo e a viscosidade cinemática 76
Figura 6.51 Comparação entre o simulador e o modelo linear........77
Figura 6.52-Diferença entre o modelo e o simulador................78
Figura 6.53-Diferença entre o modelo e o simulador filtrado.......78
Figura 6.54- Comparação entre o modelo linear e o simulador.......78
Figura 6.55 Diferença entre o modelo e o simulador................79
Figura 6.56- Diferença filtrada entre o modelo e o simulador......79
Figura 6.57-Comparação entre os dados simulados e os dados do modelo para
100 km de duto................................................80
Figura 6.58- Comparação entre os dados simulados e os dados do modelo para
150 km de duto................................................81
Figura 6.59-Variação da constante de tempo com o comprimento do duto 81
Figura 6.60-Comparação entre o simulador e o modelo linear para um duto de
200km.........................................................82
RESUMO
No presente trabalho foi desenvolvido e implementado computacionalmente um modelo linear capaz de representar com qualidade os transientes a que um duto esta sujeito, como a abertura e o fechamento de válvulas, a partida e a parada de bombas. Estas operações são consideradas os eventos do duto.
Foi utilizado um modelo para cada tipo de fluido, sendo estes, o óleo combustível leve (OCL), o diesel, a gasolina e o gás liquefeito do petróleo(GLP). Foram realizados diversos eventos a fim de representar diferentes capacidades de entregas a diferentes consumidores. No modelo o único parâmetro a ser ajustado é a constante de tempo do duto.
As constantes de tempo do diesel, GLP, e gasolina foram obtidas através do ajuste de curvas, enquanto a do pentano foi estimada.
Outro estudo com o mesmo objetivo, foi o de simular o mesmo duto para diferentes comprimentos a fim de estimar a constante de tempo para diferentes comprimentos.
- vii -ABSTRACT
In the present work a capable linear model has been developed to represent with quality the transients of the system, like a opening and closing a valve, the startup and the shutdown of a pump. Those operations are considered events in the pipe.
Model has been used to represent different fluids flowing in the pipeline. This fluids are light crude oil(LCO), diesel, gasoline and liquefied petroleum gas(LPG). Different events have been simulated to represent different capacities of deliveries to different costumers. The time constant is the only parameter to have to adjust.
The time constant for diesel, LPG and the gasoline, have been obtained through a curve adjust, while the time constant of pentane was estimated.
Another study performed with the same objective, was the simulation of the same pipeline for different lengths in order to estimate the time constant for an intermediate length.
Objetivo:
O presente trabalho tem por objetivo apresentar um modelo linear simplificado capaz de representar o comportamento dinâmico da pressão em um duto. O modelo representa os transientes a que um duto está exposto como a parada e partida e bomba e aberturas e fechamentos de válvulas.
1.	INTRODUÇÃO
Redes de dutos são sistemas importantes na sociedade humana moderna, utilizados no transporte e distribuição de água potável para irrigação, combustíveis, gás natural e produtos químicos e petroquímicos. A rede de dutos no mundo e no Brasil continua em expansão, principalmente com o gasoduto Bolívia-Brasil.
Também devido ao constante aumento no número de produtos a serem transportados, a modelagem e a simulação dos dutos é uma importante ferramenta na manutenção de dutos, seu dimensionamento e estudo das variáveis em questão.
Uma rede de dutos distribui fluidos para os mais diferentes compradores, assim sendo é importante uma modelagem adequada para estimar prazos e condições de entrega e operações decorrentes das diferentes demandas para os vários produtos.
A literatura apresenta os mais diferentes modelos para a representação de dutos. Há modelos baseados na fenomenologia do escoamento no duto, que são modelos precisos que descrevem o escoamento no duto. Contudo são modelos complexos, com variáveis difíceis de serem medidas e que demandam uma capacidade computacional elevada.
Outros modelos são obtidos através de dados obtidos de um duto existente, com o objetivo de otimizar a utilização do duto. Contudo alguns modelos são complexos, com um elevado número de parâmetros a serem considerados e em alguns casos não levam em conta as operações realizadas nos dutos, como partida e parada de bombas e aberturas e fechamento de válvulas.
O presente trabalho tenta contribuir com um modelo simplificado, baseado na pressão em que um duto opera em estado estacionário, considerando as dinâmicas impostas pelas operações a que o duto esta submetido.
O capitulo 2 apresenta um breve comentário sobre alguns modelos descritos na literatura.
O capitulo 3 apresenta uma introdução teórica à identificação de sistemas e modelagem de sistemas dinâmicos
O capitulo 4 descreve o simulador utilizado para a obtenção dos dados para o desenvolvimento do modelo, bem como a sua estrutura e as equações por ele utilizada.
O capitulo 5 apresenta a descrição do modelo proposto e seu funcionamento.
O capitulo 6 apresenta os resultados obtidos com o modelo e as discussões relevantes.
O capitulo 7 apresenta um resumo dos resultados obtidos.
2.	REVISÃO BIBLIOGRÁFICA
Nesta seção serão apresentados alguns modelos e simulações para dutos presentes na literatura.
MATKO1 et al.(2000) descrevem alguns modelos que foram simulados pelo autor, sendo :
1-Modelo não-linear de um duto com parâmetros distribuídos:
A solução analítica para escoamentos em regime não-estacionário é obtida partindo das equações do momento, massa e energia. A aplicação destas equações leva a um conjunto de equações diferencias parciais não lineares de difícil solução analítica.
As seguintes considerações foram aplicadas para o desenvolvimento do modelo: fluido compressível, escoamento com fator de atrito, escoamento adiabático, fluido homogêneo, escoamento unidirecional em x(ao longo do comprimento do duto), duto de comprimento Lp e diâmetro constante.
A partir das considerações acima foi obtido o modelo final resultando em:
A dp dq a2 dt	dx
1 dq — .
---- + pgsma + A dt
M(q) q 2 ZDAp
dp dx
(2.1)
onde:, a =velocidade do som, q=vazão,p=pressão,D=diâmetro do duto, A= área, p= densidade, v=velocidade,M=fator de atrito,t=tempo.
Este problema não apresenta uma solução geral, para a resolução foi utilizado o método das características, onde foram obtidas quatro equações diferenciais ordinárias separadas aos pares:
1 dq A dt
dq / - . ---Al pgsma + dt I
’ I
2DA p J
dx
— = + a dt
1 dq A dt
dq J - .
+—- + Al pgsma + dt I
-lq&gt; q 21
2DA2- J
=0
dx
— = -a dt
(2.2)
(2.3)
(2.4)
(2.5)
= 0
Estas equações foram resolvidas por integração numérica utilizando-se um software específico.
2-Modelo linear de um duto de parâmetros distribuídos:
As equações em 2.1 foram linearizadas utilizando a análise elétrica de linhas de transmissão, sendo obtidas o seguinte conjunto equações parciais lineares:
L ^q + Rq = -^	(2.6)
8^	dx
C dp = -dq_ dt	dx
(2.7)
onde L=1/A, R = (Xq)q)/A2pD,( q é o fluxo no ponto de trabalho) e C=A/a2, indutância,
resistência e capacitância por unidade de comprimento, respectivamente.
3-Modelo linear de um duto de parâmetros concentrados
O duto é modelado por uma função de transferência de 2° ordem com tempo morto
G( S) = b2S 2 + b1S + b0 e-STd ( )	a2 S2 + a1S +1
(2.8)
sendo Td o tempo morto.
MATKO2 et al.(2000) descreve os modelos acima como sendo utilizados para representar um duto real. Segundo o autor os resultados foram satisfatórios o modelo não linear tem uma alta demanda computacional, porém apresenta os melhores resultados. O modelo linear de parâmetros distribuídos apresenta resultados próximos ao obtido com o modelo não-linear com uma demanda computacional menor. O modelo linear de parâmetros concentrados é que apresenta menor demanda
computacional obtido com algumas suposições. Estas suposições violam os resultados obtidos com a simulação, mas são aceitáveis para algumas aplicações.
Costa1 et al.(2001), utilizou a identificação de sistemas para propor um modelo que represente o comportamento dinâmico de uma rede de dutos
A construção de um modelo preditor para fins de simulação é suportada por uma serie temporal do conjunto das variáveis relevantes ao processo sem o conhecimento fenomenológico do sistema.
O preditor é baseado em um modelo ARX(autoregressivo com entradas exógenas) com uma estrutura MIMO ( multiple input e multiple output).
A performance do preditor depende do conjunto de medidas ou do monitoramento das variáveis de saída, da ordem e do tamanho das variáveis que caracterizam o preditor, como ordem do filtro auto-regressivo(n), a ordem do filtro para a entrada das variáveis exógenas(m) o tamanho das matrizes A(ny x ny) e B(ny x nu) das constantes a serem identificadas,a intensidade do ruído que age nas entradas e nas saídas durante o treinamento, a intensidade do ruído nas medidas. Utilizou-se n=3, m=3, ny=8, nu=8 o que implica em 48 parâmetros a serem calculados (n*ny+m*nu=48), sendo 24 para a parte auto-regressiva e 24 a para as entradas exógenas.
Costa2 et al.(2001), descrevem um modelo ARX-SISO (single-input, singleoutput) com 3 parâmetros para a parte autoregressiva e 3 parâmetros para a entrada exogena. A única entrada do processo é a altura manométrica da bomba e a única saída é a vazão no duto. O processo dinâmico do duto é modelado pela resposta instantânea da entrada em um modo pseudo-estacionário. O modelo é capaz de emular um duto real mesmo sobre a presença de ruído no sinal de entrada. Os ruídos são filtrados no processo, mas acaba resultando em uma saída com ruído também.
Nenhum dos modelos descritos pela literatura aqui presentes, baseia-se somente em sinais de pressão, sendo necessária a informação da vazão, para que com as duas informações simultâneas seja possível estimar o comportamento dinâmico do duto.
3.	MODELAGEM E IDENTIFICAÇÃO DE SISTEMAS:
Este capítulo tem por objetivo apresentar uma rápida introdução à identificação de sistemas dinâmicos, bem como os passos que a compõem, a modelagem matemática, a parametrização e a obtenção de parâmetros por mínimos quadrados.
3.1	Identificação de sistemas:
Segundo HSIA(1977), um dos principais atributos da identificação de sistemas é a construção e a seleção de modelos de sistemas dinâmicos que servem a propósitos bem definidos.
Um modelo que representa um sistema é determinado pela descrição de todas suas propriedades ou somente alguma delas, destinado a uma aplicação especifica. O modelo não necessita ser uma descrição precisa do sistema, basta que o mesmo cumpra com os propósitos definidos.
A classificação dos métodos de identificação de sistemas pode ser feita de duas formas:
1-	Identificação completa: não se tem nenhuma informação do sistema;
2-	Identificação parcial: tem-se informações básicas do problema, como por exemplo, linearidade.
Ainda, segundo HSIA(1977), muitos dos problemas de engenharia podem ser caracterizados como identificação de parâmetros, pois já se conhece o modelo dinâmico do processo.
Passos do procedimento de identificação de sistemas:
1-	Especificar e parametrizar modelos matemáticos que representem o sistema a ser identificado;
2-	Identificar os parâmetros do modelo escolhido que melhor se relacionam ao sistema;
3-	Validar o modelo para verificar se o modelo escolhido corresponde as expectativas finais.
A Figura 3.1 representa um diagrama com os passos para a identificação de sistemas
A metodologia para a identificação dos parâmetros, pode ser a seguinte:
Off-line: entrada e saída do processo são gravadas e obtêm-se os parâmetros do modelo para o processo.
On-line: os parâmetros são calculados de forma recursiva à medida que um novo conjunto de dados está disponível, assim, a cada novo conjunto de dados os parâmetros são corrigidos. Este processo pode ser feito rapidamente à medida que o sistema muda. Esta metodologia é chamada de identificação em tempo real.
A obtenção dos parâmetros pode ser calculada pelo método de mínimos de quadrados para sistemas lineares nos parâmetros. Para ajuste de modelos não lineares podem ser utilizados métodos baseados no gradiente ou algoritmos genéticos.
3.1.1	Modelagem matemática de sistemas dinâmicos
OGATA(1990), definiu o modelo matemático de sistemas dinâmicos como sendo o conjunto de equações que representam a dinâmica de um sistema precisamente bem. O modelo matemático é o primeiro passo para a representação de modelos dinâmicos, sendo considerada a parte mais importante para a identificação.
Pode-se representar um modelo com dezenas de equações, mas, para casos onde a precisão não é necessária, convém a utilização de modelos simplificados. Segundo OGATA(1990) é preferível, inicialmente, a utilização de um modelo simplificado para descrever um comportamento básico do processo e posteriormente, se necessário, aumentar gradativamente a complexidade do modelo.
Segundo LJUNG(1987), modelos matemáticos podem ser caracterizados por alguns adjetivos como, modelo contínuo ou discreto em relação ao tempo, determinístico ou estocástico, linear ou não-linear, entre outros. Estes adjetivos determinam o tipo de equações em diferenças ou equações diferenciais a serem utilizadas.
Um modelo é dito linear quando é válido o princípio da superposição, já para modelos não-lineares este princípio não é válido.
Existem diversos modelos que podem representar um sistema de maneiras diferentes, dependendo da perspectiva a ser considerada. Alguns dos modelos utilizados, para modelar sistemas lineares são os modelos autoregressivos, como o modelo autoregressivo com entradas exógenas(ARX) e o modelo autoregressivo com média móvel e entradas exógenas(ARMAX), modelos de variáveis de estado e funções transferência.
3.1.1.1	Modelo ARX
Dado o sistema com uma perturbação descrito na Figura 3.2, como sendo u(t) a entrada, e(t) a perturbação e y(t) a saída tem-se,
	E(t)
u(t) 	►	Modelo	—►(+)	► y(t)
Figura 3.2 Representação de um sistema dinâmico
A equação que representa o sistema é dada por
y(t) = G(q)u(t) + H (q)e(t)	(3.1)
sendo ,
G(q) = zg(k)q- e H(q) = 1 + £h(k)q~k
k=1	k=1
Este é o modelo de um sistema invariante no tempo, onde G e H são as funções transferências do sistema , e(t) a perturbação e q-k é um operador de atraso.As funções de transferência possuem parâmetros que devem ser identificados. o vetor de parâmetros é definido por 0 e desta forma pode-se escrever a equação 3.1 como sendo y(t) = G(q,0)u(t) + H (q,0)e(t)	(3.2)
Definindo-se o preditor um passo a frente para y a equação 3.2 fica( vide LJUNG(1987)):
y(t0) = H (q,0)G(q,0)u(t) + [1 - H(q,0)]y(t)	(3.3)
onde y(t0) representa o valor predito da variável y no instante t. A predição utiliza o vetor de parâmetros 0.
O modo mais imediato de parametrizar as matrizes G e H, é representa-las como sendo uma razão, e os parâmetros seriam os coeficientes do numerador e do denominador. Estes modelos são chamados de modelos caixa preta.
Provavelmente o modo mais simples de representar a relação entre a entrada e saída para um sistema é dada pela equação linear em diferenças:
y(t) + aiy(t-1) + ••• + a^y(t -na) = bu(t -1) + ••• + bnu(t -nb) + e(t)	(3.4)
O modelo representado pela equação 3.4 é chamado de equação para o modelo com erro. Os parâmetros para este caso são
3 = [ai a2 ...a„a bi ...k f	(3.5)
Definindo
A(q) = 1 + a1q- +---+ an q-na	(3.6)
e
B(q) = bq-1 + l + bnbq--n	(3.7)
tem-se equação 3.4 corresponde a equação 3.2, com
G(q,3) =	H (q,3) = -A—	(3.8)
A(q)	A(q)
O modelo representado pela equação 3.4 é chamado de modelo ARX (autoregressive with exogeneous inputs), onde A(q)y(t) é a parte regressiva e B(q)u(t) é a “entrada exógena”. A Figura 3.3 descreve uma estrutura de um modelo ARX
Figura 3.3 Descrição de um modelo ARX
Para o cálculo do preditor para a equação 3.4, tem-se:
Substituindo os termos da equação 3.8 na equação 3.3 tem-se: y(t|3) = B(q)u(t) +[1 - A(q)]y(t)
(3.9)
Definindo o vetor
(p(t) = [- y(t - D, • • • -yO - na)u(t -1), K, u(t - nb)]	(3.10)
A equação 3.9 pode ser reescrita como sendo
y(t\9) (t)) Tr (t)9
(3.11)
Esta é uma propriedade importante da equação 3.4, pois o preditor é o produto escalar entre o vetor de dados conhecidos o(t) e o vetor de parâmetros 0. O modelo é chamado de regressão linear, o vetor o(t)é chamado de vetor regressão.
3.1.1.2	Modelo ARMAX
O modelo ARX pode ser melhorado com a utilização de uma média móvel aplicada a perturbação.
Desta forma tem-se:
J(t) + ayy(t - 1) + L + anay(t - na ) = b1u(t - 1) + ■■■ + bnbu(t - nb ) + e(t)	12)
+ C1e(t - 1) + L + Cn e(t - nc)	.
com
C (q) =1 + c q- + L + cq utilizando-se a relação acima tem-se
A(q) y(t) = B(q)u(t) + C (q)e(t) define-se as seguintes funções transferência:
(3.13)
G(q,9) =
B(q)
A(q)
H (q,9) =
c (q) A(q)
(3.14)
onde ,
9 = la. ...a, b K.bn c ...cn ]T
L 1	na 1	nb 1	nc J
(3.15)
Em virtude da média móvel (moving average,MA) corresponder a parte C(q)e(t) o modelo descrito pela equação 3.13 é chamado ARMAX. O modelo ARMAX pode ser alterado com incorporação de um termo integrativo para o sistema descrito, neste caso o modelo é chamado de ARIMA(X)(I de integração com ou sem o X para a variável u) e é utilizado para descrever sistemas com perturbações lentas. O modelo é obtido substituindo y(t) na expressão 3.13 por,
Ay(t)=y(t)-y(t-1).
Para o caso dos modelos ARMAX, o preditor para a equação 3.14 é obtido utilizando-se a equação 3.14 e inserindo-a na equação 3.3 tem-se:
y(t|0) = Cqu(t) + 1 -
C (q)	L
A(q)
C (q)
y(t)
ou
C (q) y(t\°) = B(q)u(t) + [C (q) - A(q)]y(t)
(3.16)
Isto quer dizer que a predição é obtida filtrando u e y através de um filtro com denominador dinâmico determinado por C(q). Para iniciar o método, é necessário o conhecimento das variáveis em t=0 para isso tem-se:
y(00) ••• y(- nc +1|0) y(0)—y(-n +i),	n* = max(nc, na)
u (0)...u (-nb +1)
onde n* é valor máximo de nc e na
Caso os valores iniciais não estejam disponíveis, podem ser tomados iguais a zero, neste caso a predição difere do caso para os valores em t=0. Também é possível iniciar-se o processo recursivo no tempo max(n*,nb) e incluir a condição inicial desconhecida y(k 0), k=1,2,...nc no vetor 0.
O preditor 3.16 pode ser reescrito de forma análoga a expressão 3.12, adicionando [1 - C (#)]y(0) a ambos os lados a equação 3.16 tem-se:
y(t|0) = B(q)u (t) +[1 - A(q)]y(t) + [C (q) - 1][y (t) - y (°))]	(3.17)
Definindo a expressão para predição do erro
.	= y(t) - y(t\0')
e o vetor
&lt;P(t, 0) = [-y(t -1)... - y(t - na )u(t - 1)...u(t - nb )s(t -1,0)....s(t - nc, 0)f (3.18)
Sendo assim a equação 3.17 pode ser reescrita como:
y(tf) = pT (t,0)0	(3.19)
Nota-se a semelhança da equação 3.19 com a equação 3.12 que descreve a regressão linear. Contudo a equação 3.19 acima é não linear , devido a não linearidade de 0 no vetor ^(t,0). Esta semelhança existente com a regressão linear faz com ele seja chamado de regressão pseudolinear
3.1.2	Mínimos quadrados
A teoria dos mínimos quadrados foi inicialmente proposta por Karl Gauss para conduzir o seu trabalho de predição das órbitas dos planetas. Segundo HSIA(1977), a teoria de mínimos quadrados foi desde de então, tornando-se a principal ferramenta para a obtenção de parâmetros a partir de dados experimentais. Há inúmeros outros métodos de obtenção de parâmetros como a máxima verossimilhança, método de Baye's e outros, porém o método dos mínimos quadrados continua sendo o mais conhecido e mais utilizado entre engenheiros e cientistas.
Muitos dos algoritmos utilizados para a obtenção dos parâmetros na identificação de sistemas podem ser interpretados como sendo procedimentos de mínimos quadrados. Assim é possível unificar diversas técnicas de identificação de sistemas dentro da área da teoria dos mínimos quadrados.
3.1.2.1	A teoria dos mínimos quadrados
O método dos mínimos quadrados determina o melhor ajuste do modelo aos dados experimentais a partir da minimização do erro.
Dada a variável y, que esta relacionada linearmente com um conjunto de n variáveis x, sendo x=(x1,x2,....,xn), tem-se:
y = 01 x ■(). x2 + ••• + 0„xn	(3.20)
no qual 0 = (01,02,..., 0n) é um conjunto de parâmetros constantes. Assume-se que 0i é desconhecida e deseja-se estimar seus valores através das variáveis y e x. A Figura 3.4 é um diagrama que representa este problema:
	7	/	
X1 —► X2 	►	Parâmetros		—” y
■ ■ ■	—►		r	
xn			
Figura 3.4-Sistema linear com n parâmetros
Assume-se um conjunto de m pontos observados de x e y, nos instantes de tempo dados por t1,t2,...tn e denota-se um conjunto de medidas dados por y(i) e xi(i),x2(i),...,xn(i), i= 1,2,...,m. Assim, tem-se um conjunto com dado por m equações lineares:
y(i) = 01*i(0 + ^2x2(i) + ••• + 0„x„(i), i=1 ,2,...,n	(3.21)
A equação acima é chamada de função regressão e 0i chamado de coeficiente
regressão.
O sistema de equações 3.21 pode ser escrito pela matriz:
y = 0X
(3.22)
onde,
	' y(i) ’		xi (1)
y =	y(2)	X =	xi(2)
	_ y(m)_		x1 (m)
Xn (1)_ Xn (1)	0 =	'01 ’ 02
Xn (1)_		0n _
Para estimar os n parâmetros 0i , é necessário que m &gt; n. Se m = n então 0 pode ser calculado por:
0 = X- y	(3.23)
com X-1 sendo a inversa da matriz quadrada de X e 0 sendo a estimativa de 0. Contudo, quando m&gt;n não é possível determinar um conjunto de 0i que satisfaça as m equações.
Este problema pode ser colocado como um problema de otimização, minimizando o erro entre o modelo e os dados experimentais a partir do ajuste de 0.
Definindo um vetor para o erro como sendo s=(s1, s2,..., sm)T :
s = y - X0
(3.24)
(3.25)
Determinando a função objetivo
m
J = Trf =eTe
i=1
a ser minimizada. Considerando que:
J = (y - X0)T( y - X0)
= yTy-eTxTy - yT xe+eT xT xe
Derivando J em relação 0 e igualando a zero, é possível o vetor 0 que minimiza
(3.26)
J, tendo:			
	dJ	= -2 XTy + 2 XTX0 = 0	(3.27)
	d0	0=0	
sendo assim,			
		XTX§ = XTy	(3.28)
na qual 0 pode ser resolvida por
0 = (xtX )- XTy	(3.29)
Este resultado é chamado de estimador por mínimos quadrados (LSE, leastsquares estimator) de 0. A equação 3.22 é referida como a equação normal e s é chamado de resíduo.
3.1.3	Variáveis de Estado
Segundo OGATA (1990), para um sistema dinâmico, o seu estado é definido como sendo menor conjunto de variáveis (variáveis de estado) que representam o sistema no instante de t=t0 conjuntamente com as entradas do sistema para t &gt; t0. Sendo assim o estado de um sistema dinâmico fica completamente caracterizado para qualquer instante t pelo estado no tempo t0 e pelas entradas do sistema para t &gt; t0, independente do estado das entradas antes de t0.
As variáveis de estado de um sistema dinâmico são o conjunto mínimo de variáveis que definem seu estado. Deve-se ressaltar que as variáveis de estado não precisam necessariamente serem grandezas físicas mensuráveis ou observáveis.
Em conjunto de n variáveis de estado x1(t),x2(t),...,xn(t) que representam completamente o estado do sistema, estas variáveis podem ser definidas como parte de
um vetor x(t) e este vetor é definido com sendo o vetor de estado. Logo um vetor de estado determina o estado em x(t) de um sistema em qualquer instante t &gt; t0 uma vez que t = to é dado e a entrada para t &gt; t0 está especificada.
Um espaço N-dimensional com eixos coordenados eixo x1, eixo x2,..., eixo xn ;é chamado de espaço de estado, qualquer ponto pode ser representado em um espaço de estado,e a evolução do comportamento de um sistema dinâmico é representado por uma trajetória no espaço de estado . Durante a análise de espaço de estados são relevantes três tipos de variáveis, as variáveis de entrada, variáveis de saída e as variáveis de estado, na modelagem dinâmica do sistema.
3.1.3.1	Representação de sistemas dinâmicos por variáveis de estado.
Um sistema dinâmico é representado por um conjunto de equações diferenciais ordinárias em que o tempo é a variável independente. Utilizando da notação vetorial-matricial, uma equação diferencial de ordem n pode ser representada por uma equação vetorial-matricial diferencial de 1a ordem. Se os n elementos que compõe o vetor forem variáveis de estado, então a equação pode ser chamada de equação de estado.
Segundo OGATA(1990), considerando o sistema de ordem n cuja função perturbação(função excitadora) não envolve termo derivativos, tem-se:
(n)	(n-1)
y + a y + ••• + a y + any = u	(3.30)
(n)
onde, y,..., y são as derivadas de y no tempo.
sendo conhecida as condições iniciais, y(0),y (0), ...,yn-1(0), e a entrada u(t) para t &gt; 0 tem-se o sistema completamente definido, podendo-se considerar y(t), y(t), ...,yn-1(t) como sendo um conjunto possível de n variáveis de estado.
Definindo o conjunto possível de variáveis de estado como:
x = y
X2 = y
Xn = yn-1
Logo a equação 3.30 pode ser escrita como
x
i
= x
2
x
2
= x
3
x n—1 = xn
xn =~anxi-------ai xn + U
ou na forma matricial
x = Ax + Bu
onde
(3.31)
x=	" x1 - x2	, A =	"0 0	1 0	0	••• 1	•••	0 - 0	, B =	1 ... o o 	1
			0	0	0 •••	1		0
	_ xn _							
			_-an	-a n-	1 — an-2 '	— a1		1
Sendo a reposta do sistema(saída) definida por
X1
y = [10 lo]
x2
(3.32)
xn
ou na forma vetorial
y=Cx,
com C=[1 0 . . .0].
A equação diferencial de 1° ordem, equação 3.31, é a equação de estado e a equação algébrica, equação 3.30, é a representação da saída.
3.1.3.2	Caráter não único das variáveis de estado
O conjunto de variáveis de estado de um sistema não é único. Dado um conjunto de variáveis x1,x2,...,xn é possível definir um novo conjunto de variáveis de estado z1,z2,...,zn através de um conjunto de variáveis x1,x2,...xn
Z1 = X1(xp X2,..., xn )
Z 2 = X 2( X1X2,..., xn )
Zn = Xn (x1, X2,..., xn )
(3.33)
sempre que, um conjunto, x1,x2,...,xn corresponda a um único conjunto z1,z2,...,zn . Ou seja, define-se uma transformação linear enter dois vetores de estado.
z = Px	(3.34)
Para cumprir as condições acima citadas a matriz P não pode ser uma matriz singular.
3.1.1.3	Modelos por Função de Transferência
Resolver um modelo significa encontrar as variáveis de saída de uma função do tempo em reposta a alguma alteração ocasionada no sistema. A solução para o conjunto de equações que representam o processo pode ser obtida ou por solução analítica ou por integração.
Uma forma útil de obter a solução para este conjunto de equações é a utização da transformada de Laplace. Com essa ferramenta é possível transformar as equações diferenciais lineares no domínio do tempo em equações algébricas no domínio de Laplace. A solução de uma equação algébrica é muito mais simples do que a solução de uma equação diferencial.
Uma EDO( equação diferencial ordinária) de 1°ordem pode ser representa no domínio de Laplace como sendo:
«0 y(S)S + a y(S) = bou(S)	(3.35)
extraindo-se o fator comum y(S) e u(S) obtém-se:
(«0S + ax)y(S) = (b0)u(S)	(3.36)
A função transferência para um sistema pode ser definida como sendo a relação entre a entrada e a saída do sistema no domínio de Laplace. Logo escrevendo em termos da função de transferência tem-se:
b	(3.37)
u(S) a0 S + a1
Para a análise de um sistema dinâmico a função transferência pode ser interpretada como sendo um ganho entra a saída e a entrada do sistema.
Sendo a função de transferência de um sistema linear de 1a ordem sendo aplicada uma perturbação degrau de amplitude M dada por
y (S) =
K M tS +1' S
(3.38)
onde K é o ganho estático e t é a constante de tempo.
A solução para a função transferência acima, equação 3.39, é dada por:
y(t) = MK f1 - e	(3.39)
O ganho estático é o valor do ganho para quando e a constante de tempo é definida como t.
4.	SIMULADOR DE ESCOAMENTO EM DUTOS
Nesta seção apresentam-se algumas observações descritas no sistema de ajuda do simulador; como a sua estrutura, funcionamento e equações. Devido a este ser um produto comercial, não estão disponíveis muitos detalhes a relativos aos métodos e algoritmos utilizados.
4.1	O Pipeline Studio
O Pipeline Studio é um simulador comercial utilizado na simulação de dutos. Este software é pertencente a ENERGY SOLUTION INTERNATIONAL INC., do qual o CENPES/PETROBRÁS possui licença.
O Pipeline Studio é dividido em dois sistemas, um para escoamento de gases, o TGNET, e outro para escoamento de líquidos, o TLNET. O TLNET foi o sistema utilizado para as simulações e será discutido neste capitulo.
o pipeline studio simula escoamentos tanto em regime permanente quanto em regime transiente para uma rede de dutos. A simulação envolve cálculos e respostas para variáveis relevantes como temperatura, pressão, vazão e densidade
O simulador utilizado é a versão para plataforma windows, possui interface gráfica e permite a exportação de dados através de relatórios gerados pelo simulador reconhecidos por outros aplicativos.
Figura 4.1- Figura da tela do Pipeline Studio
A Figura 4.1 representa a tela para modelagem do sistema com dutos, bombas e válvulas, ou seja a configuração do duto.
4.1.1	Configuração
Para a realização da simulação são necessárias algumas informações, como características do duto, propriedades dos fluidos, caracterização dos eventos e suas propriedades pertinentes como porcentagem de abertura de válvula e eficiência de bomba.
4.1.1.1	Caracterização do duto
Para a caracterização do duto são necessárias informações como seu comprimento, rugosidade, diâmetro, espessura da parede e as propriedades térmicas do duto e do meio ambiente. O número de nós também deve ser especificado para resolução das equações.
A Figura 4.2, apresenta a tela de configuração para um segmento de duto.
Figura 4.2-Janela para a configuração do segmento de duto
Outra propriedade importante para a simulação é o perfil altimétrico, onde são detalhadas as elevações correspondentes aos diferentes segmentos do duto. O perfil altimétrico pode ser gerado utilizando o “userline wizard”. Dentro do “userline wizard” tem-se uma caixa (Elevation/Fill...) que abre um caixa de diálogo para uma determinada userline, onde podem ser definidos o comprimento dos segmentos de duto e suas elevações
A Figura 4.3 demonstra a determinação do comprimento e a elevação do segmento de duto da userline selecionada.
Figura 4.3- Caracterização das userlines
Para os fluidos as configurações necessárias são a definição do fluido, e a configuração de suas propriedades, como a viscosidade, módulo de Bulk , etc.
Um fluido pode ser definindo como sendo
1-	User supplied
2-	Auto-Generated
3-	Correlation
1-User Supplied:
O usuário deve entrar com as curvas de viscosidade, módulo de Bulk e de capacidade calorífica.
2-	Auto-Generated:
As propriedades,como densidade, temperatura e pressão devem ser fornecidas pelo usuário para que, através de correlações o simulador calcule as curvas de viscosidade, módulo de Bulk, expansão térmica e capacidade calorífica.
3-	Correlation:
O simulador utilizada correlações padrão para o cálculo das curvas.
As bombas são separadas em três tipos, sendo:
1-	bomba genérica
2-	bomba centrifuga
3-	bomba de deslocamento positivo
1-Bomba Genérica:
Uma bomba genérica é definida pela utilização da eficiência adiabática e pelos valores do trabalho mecânico. Uma bomba genérica funciona como se fosse uma caixa preta fornecendo a diferença de pressão entre a saída e entrada da bomba, dentro dos limites especificados. Uma bomba genérica é utilizada quando não se tem disponíveis os dados para uma caracterização precisa da bomba. Para este tipo de bomba não é necessária a configuração da curva de eficiência da bomba,nem das restrições quanto a velocidade mínima e máxima da bomba. A Figura 4.4 apresenta a janela para configuração de uma bomba genérica.
Figura 4.4- Janela para configuração de uma bomba genérica
2-Bomba Centrifuga
Uma bomba centrifuga utiliza a velocidade do rotor para movimentar o fluido. O comportamento de uma bomba centrifuga está relacionado com o fluxo através da bomba e na diferença na altura manométrica ocasionada pela bomba. Para a utilização de uma bomba centrifuga é necessário à caracterização da curva de performance da bomba que pode ser feita utilizando dados de altura manométrica e curva de eficiência. A Figura 4.5 apresenta a janela para configuração de uma bomba centrifuga.
Figura 4.5- Janela para configuração de uma bomba centrifuga
A Figura 4.6 representa a janela para caracterização da curva de performance para a bomba centrifuga.
Figura 4.6 Caracterização da curva de performance para a bomba centrifuga
3-Bomba de deslocamento positivo:
Uma bomba de deslocamento positivo utiliza o deslocamento cíclico de um mecanismo, tipicamente um pistão, para empurrar o fluido. Este tipo de bomba é caracterizada por velocidades baixas de operação e elevadas diferenças de pressão. É necessária a criação de uma curva de performance para a bomba de deslocamento positivo, a curva pode ser obtida a partir da seleção do tipo de cilindro ou do valor do deslocamento do cilindro.
Figura 4.7- Janela para configuração de uma bomba de deslocamento positivo
4.1.2	Método de resolução
O Pipeline Studio assim como a maioria dos simuladores basea-se no método de diferenças finitas para a resolução das equações diferenciais. Este método consiste na discretização da equação em função da variável desejada, seja ela, pressão, temperatura, vazão, etc. Os pontos de discretização são chamados de knots, estes knots estão relacionados às divisões a que está submetido um segmento de duto. Como mostra a
Figura 4.8.
Segmento de duto
knots
Figura 4.8 Segmento de duto dividido em knots
O simulador utiliza dois métodos para solução em diferenças finitas explicitas e outro em diferenças finitas implícitas.
4.1.3	Equações Utilizadas
Nesta seção apresentam-se algumas das equações utilizadas pelo Pipeline Studio para simulação do duto em regime transiente.
Balanço de massa
d(Ap) _ d(pvA) dt	dx
onde, x= posição ao longo do duto,ft
2
A=área da seção reta do duto,ft t=tempo,s p= densidade do fluido;slug/cm3 v=velocidade do fluido,ft/s
Balanço de energia
ídT dTd (dP'i dv	f , ,3 4U
pcv\ —+ —\ = -T—\ — \ + — + p^- v —— (T - TG )
^dt dx) dpydT J dx 2D^ Dt G
onde,r
x= t=
A=
P=
P=
v=
h=
g= f=
Di=
T=
Uw= Tg= Cv=
posição ao longo do duto, ft
tipo, s seção reta do duto, ft2 densidade, slug/ft3 pressão, .lbf/ft2 velocidade, ft/s elevação do duto, ft aceleração da gravidade, ft/s2 fator de fricção de Moody, adimensional diâmetro interno do duto, ft temperatura, °R coeficiente global de transferência de calor, ft.lbf/slug.°R temperatura do solo, °R capacidade calorífica , ft.lbf/slug.oR
Balanço de momento
dv	dv	1	dP	dh	f	. .
— + v— +-------+ g— + ^~ vv = 0
dt	dx	p	dx	dx	2D.
onde,
f=fator de fricção de Moody, adimensional Di=Diâmetro interno do duto, ft g=aceleração da gravidade, ft/sec2 h=elevação do duto, ft t=temPo, s
x=Posição ao longo do duto, ft
(4.1)
(4.2)
(4.3)
Cálculo do fator de atrito
If Re &amp;lt;2100
í=—
Re
If f &gt; 1, f = 1
If Re &gt; 2100
í
= -2log
e
+
(4.4)
(4.5)
Equação (4.5) corresponde a equação de Colebrook onde:
Re=número de Reynolds, adimensional e=rugosidade, ft
Di =diâmetro interno, ft
f=fator de atrito de Moody, adimensional
Para os equipamentos tem-se:
Válvula de bloqueio
O simulador modela uma válvula de bloqueio como uma válvula
equação para o fluxo na válvula é dada por:
W = Cd (2p(P„ - Pd "
gaveta. E
(4.6)
onde,
W=vazão mássica, lbm/sec p=densidade do fluido, lbm/ft3
Cd= coeficiente de descarga da válvula = (CV * 0.00000183 * % OPEN)
2
Pu=Pressão a montante, lbf/ft
Pd=pressão a jusante, lbf/ft2
Bombas
A temperatura de descarga para uma bomba genérica e centrifuga é dada por:
(4.7)
onde:
TD=temperatura na descarga da bomba, °R Tu= temperatura na alimentação da bomba,°R Vavg= média do volume especifico, lb/ft3 EEF= eficiência mecânica, fração PD=pressão na descarga, lbf
Pu=pressão na entrada, lbf
Cp=capacidade calorífica,ft.lbf/lbm.°R
A curva performance para a bomba centrifuga é calculada por:
--2 - AH + BH
w
+ CH
+ DH
n — AE + BE
+ CE
+ de
(4.8)
onde, Ah,Bh,Ch,Dh = coeficientes de altura manométrica determinados por um ajuste polinomial.
Ae,Be,Ce,De = coeficientes de eficiência determinados por um ajuste polinomial Q = fluxo volumétrica na entrada, ft3/s
w = velocidade, RPS
n = eficiência adiabática
H = altura manométrica adiabática,ft*lbf/lbm
A altura manométrica adiabática é dada por:
P P
H — — _ P
PD Ps
(4.9)
onde, H = altura manométrica adiabática,ft*lbf/lbm PS,PD = Pressão na sucção e na descarga, lbf/ft2 ps, pD = densidade na sucção e na descarga, lbm/ft3
A temperatura da descarga para uma bomba de deslocamento posistivo é dada por:
_	0,707* PWR *(1 - EFM)
T D _ TU +
(4.10)
W * CP
onde,TD=temperatura na descarga da bomba, °R Tu= temperatura na alimentação da bomba,°R PWR=potência, ft.lbf/s
W=fluxo mássico, slug/s
Cp=capacidade calorífica,ft.lbf/lbm.°R
Para as propriedades físicas dos fluidos tem-se:
Cálculo da Densidade:
(•P 1	fT
p = Po exp( IP BMdP - £ adT)	(4.11)
jPo BM	~
onde,
p=densidade do líquido, slug/ft3
po=densidade do líquido a condição de referência a pressão e temperatura, Po e To, slug/ft3
BM=modulo de Bulk, psi
a= coeficiente de expansão térmica, R-1
Assumindo que as variáveis BM e “a” não dependem da variação da pressão e da temperatura respectivamente, a equação (4.9) pode ser simplificada como mostrado abaixo:
P = Po exp(TT7(P -Po) - a(T- T&gt;))
(4.12)
Módulo de Bulk
O modulo de Bulk é definido como sendo a mudança necessária na pressão para que ocorra uma mudança unitária no volume. E pode ser expressa por:
1)	API- Correlação Padrão
BM=Exp (1.99470 - 0.00013427 * T - 0.79392/SG2 - 0.0023260 * T/SG2) *100000 (4.13)
onde,
BM=modulo de Bulk, psi
T= temperatura, °F
SG=peso especifico a 60 °F
A equação (4.13) é válida para os hidrocarbonetos que se encontram dentro das seguintes faixas:
densidade:0° a 90° API
temperatura:20° a 200 °F
Pressão: 0 a 1500 psia
2)	Para fluidos mais compressíveis como o NGL(gás natural) e GLP, o módulo de Bulk deve ser calculado como uma função da temperatura e pressão. O programa utiliza a seguinte equação de estado
BM = a0 + Aj P +
+ a-T'lt +
+a5Tr / SG
(4.14)
onde,
TR=temperatura absoluta,°R
P=pressão, psia
SG=peso especifico a 60 °F
ai, a2, a3, a4, a5 = coeficientes
BM=módulo de Bulk, psi
Coeficiente de dilatação térmica
O coeficiente de dilatação térmica é definido como sendo;
	a =1 (- \ V dT )	(4.15)
1)	API Correlação padrão	
	a = a0 + 1,6a2(T - To)	(4.16)
	a	Ko + K Po	(4.17)
	a0 = 2 Po	
onde,
a=coeficiente de expansão térmica, 1/ °F
T=temperatura, °F
po=densidade de referência, kg/m3
To= temperatura de referência, °F
Ko,K1 = constante de correlação
Tabela 4.1
Tipo de Liquido	Faixa API	Ko	K1
Óleos crus	o a 1oo		
Diesel e óleo combustível	o a 37	1o3,872o	o,27o1
Combustível de aviação e querosene	37 a 48	33o,3o1o	o,o
Combustível de aviação e gasolina*	48 a 52	1489,o67o	-o,oo18684
Gasolina e nafteno	52 a 85	192,4571	o,2438
ao =—- + K1	(4.18) para zona de transição
Po
A equação é válida para produtos crus e para produtos dentro das seguintes faixas
Densidade:0° a 100o API
Temperatura: 0°a 250° F
2) Para produtos mais compressíveis como o NGL e o GLP, o coeficiente de expansão de calculado como função da temperatura e pressão, pela equação de estado:
a = a0 + a1 P +
+ a4TR +
(4.19)
onde,
a=coeficiente de expansão térmica, 1/°F
P=pressão, psia
TF=temperatura, oF
TR=temperatura absoluta, °R
a1, a2, a3, a4, a5 = coeficientes
Capacidade Calorífica
A correlação interna usada pelo TLNET para o calculo da capacidade calorífica é a regressão:
CP = 0,33 + 0,0022 * API + 0,00055T
(4.20)
onde,
Cp= capacidade calorífica, BTU/lb°F
API=peso específico a 60°F, °API
T=temperatura, °F
A capacidade calorífica pode ser calculada, também, como uma função da temperatura e da pressão:
CP = a + a1 * API + a
(4.21)
onde,
API=peso específico a 60°F, °API
TR=temperatura absoluta, °R
P=pressão, psia
a1, a2, a3, a4, a5 = coeficientes
Viscosidade Cinemática
O programa ajusta a viscosidade cinemática de acordo ao tipo de fluido, utilizando as duas equações a seguir
Para crus e derivados
ln(ln(v + 0,7)) = a0 + a1 ln(7R )
Para o GLP e NGL:
ln(v) = a0 + a1 ln(7R )
4.22)
(4.23)
onde,
v=viscosidade cinemática, cS
TR=temperatura absoluta, °R
a1, a2, a3, a4, a5 = coeficientes
5.	O MODELO LINEAR DO DUTO
Neste capitulo será descrito o modelo linear proposto, capaz de representar os transientes a que um duto esta exposto durante o seu funcionamento, como parada e partida de bomba e abertura e fechamento de válvula.
Estes eventos são comuns durante a operação de um duto ocasionando um acréscimo ou decréscimo na pressão e na vazão de trabalho do duto
5.1	Descrição do modelo
Foi proposto um modelo linear obtido empiricamente para representação dos transientes em um duto sujeito a eventos normais de operação, bem como a sua resposta a diferentes pressões de entrega ocasionados no mesmo.
O diagrama de blocos, Figura 5.1, representa o sistema adotado, onde a função de transferência representa o modelo linear dinâmico do processo, e as perturbações representam os eventos. Contudo o modelo é resolvido por integração numérica no domínio do tempo
As perturbações foram determinadas a partir dos sinais de pressão gerados pelos eventos, utilizando dados reais, para o caso do OCL e dados simulados para o diesel, a gasolina e o GLP. Estas variações de pressão foram calculadas com base na pressão do duto em regime permanente.
5.1	O modelo de 1° ordem
A dinâmica do processo foi inicialmente representada por um modelo linear de
1° ordem, o modelo foi descrito como sendo uma função de transferência de 1° ordem
dada por:
k
y =
----u
tS +1
(5.1)
Embora a representação utilizada para definir a constante de tempo e o ganho
estático seja a função de transferência, é resolvida numericamente a EDO correspondente no domínio do tempo (equação 5.2), utilizando o método de Runge-
Kutta de 4°-5° ordem com passo variável.
dy , t—+ y = kx
dt
(5.2)
onde, t é a constante de tempo, k é o ganho estático
Sendo esta proposta a mais simples de ser analisada, foi necessário valida-la com a identificação do modelo transiente. Uma forma de analisar a característica linear de 1a ordem é a forma da resposta ao degrau. Para confirmar a característica linear deve-se verificar o principio da superposição.
Pelo principio da superposição, um modelo é dito linear, se a resposta do sistema a perturbações degraus aplicadas isoladamente é correspondente a aplicação de uma única perturbação degrau igual a soma das perturbações aplicadas isoladamente. A Figura 5.2 representa esquematicamente o principio da superposição.
Por exemplo, se um duto opera a uma pressão de 25 kgf/cm2 ,em regime estacionário, e uma bomba é colocada em funcionamento, sabendo e que esta bomba causa uma variação de pressão no sistema de 10kgf/cm2, o duto passaria a operar a 35
kgf/cm2. Se a seguir ocorre a abertura de uma válvula a jusante, sabendo que esta válvula causa um decréscimo de pressão de 5kgf/cm2.Se estas operações fossem realizadas simultaneamente o duto estaria operando 30 kgf/cm2 após o evento. Cabe ressaltar que uma parada de bomba, não representa necessariamente a mesma variação de pressão de uma partida de bomba.
5.1.1.1	Perturbações
As perturbações podem ser definidas como sendo a força externa a que está sujeito um determinado sistema. Segundo LUYBEN(1997), as perturbações podem ser classificadas como:
1-Degrau: Uma perturbação degrau é aquela que muda instantaneamente o sistema de um nível para o outro e depois atinge um valor constante. Em particular, quando o degrau é igual a unidade, a perturbação é chamada de perturbação degrau unitário ((u(t)), e é definido como sendo:
u(t) = 1	para t &gt; 0
(5.3)
u(t) = 0	para t &gt; 0
Graficamente é representa pela Figura 5.3:
Figura 5.3- Perturbação degrau unitário
2-Pulso: Uma perturbação pulso é função com forma arbitrária, usualmente retangular ou triangular, que começa e acaba no mesmo nível. Uma perturbação pulso retangular nada mais é do que duas perturbações degraus sendo uma positiva e outra negativa de mesma amplitude separadas por um espaço de tempo.
'0	5	10	15	20	25	30	35	40
Figura 5.4- Perturbação pulso retangular
3-Perturbação Rampa: A perturbação rampa é aquela que muda linearmente com o tempo com constante K.
Rampa = Kt	(5.4)
Figura 5.5- Perturbação rampa
Para o modelo do duto os eventos foram caracterizados como sendo perturbações a que este está sujeito. São considerados eventos a partida e parada de bomba, bem como a abertura e fechamento de válvula.
5.1.1.2	Bombas Centrifugas
Segundo WYLIE e STREETER(1977), durante o funcionamento de uma bomba centrifuga a influência da mudança na velocidade pode ser facilmente incluída nas relações com a vizinhança utilizando condições homólogas. As condições homologas para uma bomba centrifuga de tamanho do rotor fixo são:
H
—- = const
a1
— = const
a
(5.5)
onde H é o aumento na altura manométrica através da bomba e a é a razão da velocidade, normalizada pelo uso da taxa de velocidade e Q a vazão.
Para a partida de uma bomba a é freqüentemente utilizado como sendo valores
entre 0 e 1. que variam linearmente com a velocidade. Na forma homologa(discretizada em diferenças finitas) a curva para a bomba da Figura 5.6 é
HP - HP =a2HS + aaQP	+ a2Qp
P2,1	P1,NS	S	1	'S-'P1, NS	2~ P1,NS
(5.6)
onde, a1 e a2 - são constantes;
Hs- altura manométrica quando desligada
HP - altura manométrica na saida
Qp - vazão na saída
Considerando-se a velocidade da bomba constante, a=1, a equação pode ser
reduzida a :
H P1	H S + QP1 (ai + a2QP1 )
(5.7)
Considerando:
C+: HPi= Cp - BQpi
C-: Hpi= Hpi= Cm + BQpí
(5.8)
(5.9)
sendo CM e CP constantes e dadas por:
Cp = H,- BQ,- RQ,_,|Q,-
Cu = H, „ - BQ, „ - RQ, „ Q, „
(5.10)
(5.11)
Combinando as equações 5.8 e 5.9 com a equação 5.6 a descarga é dada por:
Q
P1,NS
B1 + B2 - aa	1-	1	4a2	Hs + Cp1	Cm 2 )	y'
2a2		( + B2 - a1a)2	
Hp = CM + BQp
(5.12)
(5.13)
Contudo, o modelo apresentado acima para a partida e parada de bomba, foi reduzido a uma perturbação degrau, onde o valor do degrau é máxima pressão gerada por uma bomba de velocidade fixa no duto para cada fluido. A simplificação para o modelo da bomba foi feito devido a rápida dinâmica da bomba se comparada a freqüência de amostragem feita com os dados de campo.
5.1.1.3	Válvulas
As válvulas do tipo porcentagem foram utilizadas por serem mais comumente utilizadas durante o escoamento de fluido em duto. A princípio, o duto encontra-se em estado estacionário, assim o modelo da válvula, segundo WYLIE e STREETER(1977),é dado por:
Qo = (CpAg )J2gH0	(5.14)
com, Qo- vazão no estado estacionário
Ho- perda de carga ao longo da válvula
Cd-coeficiente de descarga
Ag-área da válvula
Para o estado trasiente tem-se
Qp = (CpAg ^/2 gAH	(5.15)
onde AH é perda de carga instantânea ao longo da válvula.
Dividindo a equação (5.8) pela (5.7) tem-se
(5.16)
sendo ,
o
' =
ÇdAg (CdAg )o
(5.17)
Para o estado estacionário y = 1, e para a válvula fechada y = 0. O valor de y
pode ser maior que 1, se a válvula for aberta a partir do estado estacionário.
Assim como para a bomba, a dinâmica para abertura e fechamento de válvulas é muito rápida para a amostragem utilizada, desta forma as válvulas também foram consideradas sem dinâmica e a sua abertura e o seu fechamento correspondem a uma perturbação degrau.
5.1.1.4	Constante de tempo e ganho estático
Segundo SEBORG et al.(1989), dado o sistema de 1° ordem, representado pela equação (5.2) inicialmente em repouso (x =0 e y=0). Se o sistema sofre um perturbação do tipo degrau causando um abrupto aumento na variável x, mudando-a de zero para M, no instante t=0, tem-se
y(t) = KM (1 - e )	(5.18)
a resposta do sistema é dada pela Figura 5.7, onde em 63,2% do valor final de y(t) tem-se a constante de tempo do processo.
Matematicamente o valor de 63,2 % é obtido para t=T utilizando-se a expressão
5.11	tem-se: y(t) = KM (1 - e ) = KM(0,632) logo y/KM=0,632.
Figura 5.7-Obtenção gráfica da constante de tempo
O ganho estático é relação entre a entrada e saída do processo em estado estacionário. Qualitativamente, o ganho estático corresponde a “quanto” e a constante de tempo “como”, varia o sistema.
Inicialmente foi utilizado o método gráfico para obter uma primeira aproximação da constante de tempo calculando o valor do tempo correspondente a 63,2% do valor
Figura 5.8 Cálculo da constante de tempo
A Figura 5.8 representa o cálculo da constante de tempo para o GLP, utilizando o método gráfico para obtenção da uma estimativa da constante de tempo que representasse a dinâmica do duto. Através deste método foi obtido inicialmente o valor de 293s para a constante de tempo do GLP. Por tentativa e erro o valor foi refinado de forma a se ter o menor erro entre a curva dos dados simulados e os reais, com os dados obtidos pelo modelo, sendo então obtido o valor de 300s como constante de tempo para o GLP.
5.1.1.5	Amostragem
Para a seleção do período de amostragem, há duas considerações a serem feitas:
1-	quantas medidas podem ser feitas pelo computador
2-	qual a melhor taxa de amostragem para representar o sistema.
De acordo com o teorema de Shannon, o sinal de uma senóide deve ser amostrado pelo menos duas vezes no período para recuperar o sinal original, ou seja, a freqüência de amostragem deve ser pelo menos duas vezes a freqüência da onda senóide.
Se para um sistema podem ser feitas medidas com a amostragem desejada, ou seja, medidas o mais rápidas possíveis de acordo com a performance do computador. Contudo medidas rápidas levam a um número elevado de medidas sobrecarregando o computador e reduzindo a performance para outras tarefas.um problema prático que ocorre em amostragem é a aliasing.
O fenômeno Aliasing também ocorre quando existem variáveis de processos amostradas que não variam de forma sinusoidal.
Segundo SEBORG et al.(1989) supondo-se um sinal sinusoidal amostrado com uma de taxa de 4/3 por ciclo( taxa 4/3 por período). Com esta freqüência de amostragem é possível reconstruir o sinal como um sinusóide com um período maior do que o sinal original. Este fenômeno é chamado de aliasing.
Se um processo é amostrado com uma taxa de amostragem os, componentes de alta freqüência de uma variável do processo com freqüência maior que os/2 aparecem como sendo sinais de baixa freqüência (o&lt;os/2) nos sinais amostrados. Sinais de baixa freqüência podem causar problemas de controle se a freqüência do sinal é da mesma faixa dos que os sinais normais do processo.Os problema de aliasing podem ser elimandos pela utilização de um filtro anti-aliasing,vide SEBORG et al.(1989).
Segundo SEBORG et al.(1989) uma amostragem muito lenta pode reduzir a efetividade de um controlador feedback, pois pode fazer com que a influência das perturbações do sistema sejam imperceptíveis ao controlador
Sendo assim deve ter uma amostragem rápida o suficiente para representar a influência das perturbações, mas que não sobrecarregue o sistema de aquisição de dados.
A amostragem utilizada para o modelo foi a mesma que é utiliza nos dados fornecidos pelo CENPES/PETROBRAS, que é de 10s. Objetivou-se com isso reproduzir os resultados naturalmente obtidos no duto.
Segundo SEBORG et al. (1989), alguns valores mínimos de amostragem são sugeridos. Para a obtenção da vazão o período de amostragem é de 1s, para a pressão é de 5s para temperatura de 20s e para sistema em open loop é de 10% da constante de tempo dominante. Observa-se que o valor sugerido para a pressão é de 5s, logo os 10 s utilizados são satisfatórios, representando bem as reações do sistema em questão às perturbações, sem sobrecarregar o sistema.
6.	RESULTADOS E DISCUSSÕES
No presente capítulo serão apresentados os resultados obtidos com modelo linear proposto, assim como uma comparação com os dados provenientes de um duto real, e também com os dados gerados pelo simulador comercial configurado.
Utilizaram-se quatro tipos de fluidos: o óleo combustível leve(OCL), o diesel ,a gasolina e o GLP. Os dados de campo para o óleo combustível leve foram fornecidos pelo CENPES/PETROBRÁS.
Os testes foram realizados em um duto genérico que representa um duto real.
Os dados de campo ou dados reais foram obtidos de diversos testes, durante o funcionamento do duto. Este teste consistia em uma sangria com diferentes vazões, operações de parada e partida de bomba, abertura e fechamento de válvulas a montante e jusante do duto.
Estas mesmas operações foram simuladas para o óleo combustível leve, e para o diesel, a gasolina e o GLP, com o objetivo analisar a dinâmica de um duto para diferentes fluidos.
Na Figura 6.1, abaixo, podem ser observados os dados de campo para o óleo combustível leve, obtidos durante o teste realizado pelo CENPES/PETROBRÁS. A mesma foi divida em duas seções, que passarão a ser chamadas de 1° seqüência(A), e 2° seqüência(B)
Figura 6.1-Dados de campo
A 2° seqüencia de eventos foi dividida em 3 partes, como mostrado na figura 6.2 .
Figura 6.2-Divisao em partes da 2° seqüencia de eventos
Na seção A, observa-se a ocorrência de sangrias em seqüência, com diferentes valores na vazão de entrega. A seção B possui a maior variedade de eventos, como a parada e partida de bomba e abertura de válvula a jusante, além das sangrias. Na seção C, assim como na seção A, observa-se a ocorrência de sangrias.
6.1	Resultados para o óleo combustível leve
A seguir serão apresentados os gráficos para os dados de campo, bem como os obtidos pelo simulador e pelo modelo linear para o óleo combustível leve.
A comparação entre os gráficos foi realizada utilizando o cálculo do erro médio quadrático entre as curvas obtidas. As curvas para o simulador e para o modelo linear tiveram os seus erros comparados aos dados de campo. Para o óleo combustível leve utilizou-se a constante de tempo igual a 40s.
Os resultados obtidos para o óleo combustível leve a montante do duto serão apresentados abaixo
Figura 6.3- Comparação do modelo linear com dados de campo
A Figura 6.3 representa a comparação entre os dados de campo o modelo linear.
Nesta figura a 1° e a 2° seqüência foram representadas juntas para uma melhor visualização do processo.
Figura 6.4 Dados de campo
Figura 6.5-Simulador
Erro Médio Quadrático=0,0062
Figura 6.6-Modelo Linear
Erro Médio Quadrático=0,0042
A Figura 6.5 e a Figura 6.6, representam as curvas obtidas para o simulador e para o modelo linear com respectivo erro associado, em relação aos dados de campo.
A Figura 6.7 corresponde aos dados de campo para a seção A da 2° seqüência de eventos.
Figura 6.8-Simulador
Erro Médio Quadrático=0,0023
Figura 6.9-Modelo linear
Erro Médio Quadrático=0,0015
A Figura 6.8 e Figura 6.9 correspondem a seção A da 2° seqüência de eventos, para o simulador e para o modelo linear, respectivamente.
Figura 6.10-Dados de campo
Na Figura 6.1o tem-se a representação da seção B para os dados de campo.
Figura 6.11-Simulador
Figura 6.12-Modelo Linear
Erro Médio Quadrático=0,0103
Erro Médio Quadrático=0,0015
Para a seção C, têm-se as figuras abaixo:
Figura 6.13-Dados de campo
Na Figura 6.13 observa-se o gráfico referente a seção C, para os dados de
campo.
Figura 6.14-Simulador
Erro Médio Quadrático=0,0023
Figura 6.15-Modelo Linear
Erro Médio Quadrático=0,0015
Na Figura 6.14 apresenta-se a seção C da 2° seqüência de eventos para o simulador,com erro calculado pela comparação com dados reais. E na Figura 6.15 ilustra-se a mesma seção para o modelo linear.
Analisando a jusante do duto obtiveram-se os seguintes resultados
Figura 6.16- Comparação dos dados de campo com os dados do modelo linear
A Figura 6.16 representa uma sobreposição dos dados de campo com os do modelo linear, a jusante do duto. Assim como na Figura 6.3, as duas seqüências de eventos foram reunidas em uma mesmo gráfico para uma melhor visualização
Figura 6.17-Dados de campo
Os dados de campo para a 1° seqüência a jusante de duto pode ser observada na Figura 6.17.
Figura 6.18-Simulador
Erro Médio Quadrático=0,0129
Figura 6.19-Modelo linear
Erro Médio Quadrático=0,0175
A Figura 6.18 e Figura 6.19 representam os dados para a 1° seqüência de eventos, do simulador e do modelo linear, respectivamente.
Figura 6.20-Dados de campo
Representação dos dados de campo para a seção A da 2° seqüência de eventos é representada pela Figura 6.20.
Figura 6.21 Simulador
Erro Médio Quadrático=0,0229
Figura 6.22 Modelo Linear
Erro Médio Quadrático=0,0038
Na Figura 6.21 e Figura 6.22, acima tem-se a representação da seção A.Observa-se um aumento do erro a jusante, quando comparado com o erro a montante. O aumento no erro deve-se possivelmente, a uma alteração no método de amostragem
Figura 6.23-Dados de campo
A Figura 6.23 representa a seção B para os dado de campo,a jusante do duto.
Figura 6.24-Simulador
Erro Médio Quadrático=0,01
Figura 6.25-Modelo linear
Erro Médio Quadrático=0,0038
A Figura 6.24 representa os dados do simulador , a rápida oscilação de pressão apresentada(II) , pode ser decorrente de erros numéricos ocorridos na simulação.A Figura 6.25 corresponde a mesma seção B para o modelo linear.
Figura 6.26-Dados de campo
Na Figura 6.26 observa-se o gráfico para os dados de campo da última seção, a seção C, para a jusante do duto
Figura 6.27-Simulador	Figura 6.28-Modelo Linear
Erro Médio Quadrático=0,0229
Erro Médio Quadrático=0,0038
A Figura 6.27 e a Figura 6.28 representam a seção C para o simulador e o modelo linear respectivamente. Observa-se um erro calculado maior para o simulador do que para o modelo linear, devido à condição de contorno imposta para a simulação, vazão constante a jusante, impedindo uma melhor representação da curva. O mesmo tipo de problema, ocasionou o erro para a Figura 6.24.
A indisponibilidade de dados de campo para representar o diesel, a gasolina e o GLP, resultou em uma comparação dos dados do modelo, com os dados simulados no PIPELINE STUDIO para estes fluidos. Para estes fluidos foi necessário alterar a configuração do duto. As alterações realizadas devem-se à necessidade de corrigir
determinadas propriedades físicas do duto, como a rugosidade, uma vez que a incrustação em um duto por onde escoa OCL é diferente da inscrustação por onde passa diesel. O diesel, a gasolina e o GLP podem utilizar a mesma rugosidade do duto.
Os gráficos apresentados a seguir foram obtidos utilizando esta nova configuração.Nesta configuração foram inseridos mais eventos, em relação aos da 2° seqüência para óleos combustível leve, como mostra a Figura 6.29
Figura 6.29-Eventos adicionados
Onde,
a- abertura de válvula a montante;
b- fechamento de válvula a montante;
c- abertura de válvula a jusante;
d- fechamento de válvula a jusante;
e- abertura de válvula a montante e a jusante; f- fechamento de válvula a montante e a jusante;
O objetivo da inclusão de mais eventos foi verificar o princípio da superposição, válido para sistemas lineares, pois em (e) tem-se os efeitos de (a) e (c) realizados simultaneamente e em (f) os eventos (b) e (d)
Na Figura 6.29 é apresentada a simulação utilizando a abertura de válvulas a jusante e a montante. Para validação do principio da superposição foi realizada uma abertura de válvula a montante outra a jusante e duas operações juntas.Em "a” tem-se abertura da válvula a jusante do duto.Esta abertura de válvula ocasiona uma queda de 3,76Kgf/cm2. Em “c” tem-se uma abertura de válvula a montante com uma queda de 2,78 kgf/cm2. Em “e” tem-se as duas operações anteriores feitas simultaneamente, resultando em uma queda de pressão de 6,22 kgf/cm2. Pelo principio da superposição o resultado da soma das operações realizadas individualmente teria que ser igual ao resultado das duas operações realizadas simultaneamente. A soma delas resulta em uma queda de 6,54 kgf/cm2 e enquanto que a aplicação de cada operação individualmente resulta em 6,22 kgf/cm2 resultando em um erro de 4% para o GLP, um erro de 1,62% para a gasolina e 1,97%.para o diesel. Pelos erros pequenos apresentados pode se dizer que um modelo linear é uma boa aproximação do sistema em questão.
6.2	Resultados para o Diesel
Aqui serão apresentados os resultados obtidos para o diesel utilizando-se a outra configuração.
Figura 6.30- Comparação a montante do duto entre o simulador e o modelo linear
Erro Médio Quadrático=8,Q412x1Q’5
A comparação entre os dados do simulador e os dados do modelo linear para o
diesel, pode ser observada na Figura 6.30.
Figura 6.31-- Diferença - simulador e modelo Linear
Figura 6.32- Diferença- Simulador e Modelo
Linear filtrado
A Figura 6.31 representa a diferença entre curva obtida com o simulador e a obtida pelo modelo linear. Observam-se erros significativos nesta figura, estes erros contudo, são representados por sinais de alta freqüência que podem facilmente serem reduzidos com a utilização de um filtro digital, como mostra a Figura 6.32.
Os erros de alta freqüência são resultado, possivelmente, de um erro produzido na simulação. Após a aplicação do filtro, a oscilação de alta freqüência é amenizada, salientando os erros de modelagem.
Para a jusante foram realizadas análises análogas as feitas a montante, como pode ser observado na Figura 6.33.
Figura 6.33- Comparação a jusante do duto entre o simulador e o modelo linear
Figura 6.34- Diferença -simulador e modelo Linear
0.8 0.6 0.4 "e £ 0.2 D&gt; 0 2 tx -0.2 -0.4 -0.6 -0.8			
	0.5		1	1.5	2	2.5 Tempo(s)	x 104
Figura 6.35- Diferença- Simulador e Modelo Linear filtrado			
Assim como a montante do duto, a diferença entre o simulador e o modelo linear, representada pela Figura 6.34, os erros foram reduzidos com a utilização do filtro digital como observa-se na Figura 6.35. O filtro digital utilizado é um filtro passo baixo de banda passante o,o2Hz.
6.3	Resultados para a gasolina
Para a montante obteviveram-se os seguintes resultados para a gasolina, como pode ser observado na Figura 6.36
Figura 6.36- Comparação entre o simulador e o modelo linear
A Figura 6.37 e Figura 6.38 representam a diferença, para a montante, entre os dados do simulador e os dados do modelo linear, antes e após a aplicação do filtro digital,respectivamente.
-Para a jusante do duto tem-se:
Figura 6.39-Comparação do modelo linear com o simulador
Erro Médio Quadrático=0,0032
Assim como para a montante, a Figura 6.39, representa uma comparação entre o simulador e o modelo linear, nota-se também o efeito da sobreposição dos eventos. O valor de erro é bastante aceitável para considerar-se uma boa representação do sistema.
Figura 6.40 Diferença entre o simulador e o	Figura 6.41 Diferença entre o simulador e o
modelo linear	modelo
As figuras acima,Figura 6.40 e Figura 6.41, representam a diferença entre o simulador e o modelo linear, observam-se também os erros ocasionados por possíveis flutuações numéricas do simulador representado por sinais de alta freqüência, também para este caso o filtro reduziu o erro.
6.4	Resultados para o GLP
Nesta seção ,serão descritos os resultados obtidos para o GLP, seguindo-se os padrões de comparações utilizados anteriormente
-Para a montante do duto tem-se
Figura 6.42 Comparação do modelo linear com o simulador
Erro Médio Quadrático=5.3871x10-5
Na Figura 6.42 , observa-se a qualidade do modelo em representar um produto com uma densidade bem inferior aos descritos acima, em torno de 535 kg/m3, quanto para a gasolina,o diesel e óleo combustível leve na faixa de 700 a 950 kg/m3.
A Figura 6.43 e a Figura 6.44, representam a diferença entre os dados da Figura 6.42, bem como a diferença com aplicação do filtro.Devido a baixa densidade do GLP, resposta do sistema a perturbação é muita lenta, resultando em pequenos , porém consecutivos erros de modelagem.
A resposta lenta a perturbação para o GLP ocasionou um aumento no tempo de simulação,em relação ao diesel e a gasolina. Para o diesel e a gasolina o tempo de simulação era de 24000s para o GLP foi de 84000s. A simulação realizada com o tempo de 24000s não permitia a visualização correta dos transientes do duto.
Figura 6.43- Diferença entre o simulador e o modelo linear
Figura 6.44 Diferença entre o simulador e o modelo
-Para a jusante do duto tem-se
A figura abaixo, Figura 6.45 representa uma comparação para os dados a jusante do duto .
Tempo(s)
x 104
Figura 6.45- Comparação do modelo linear com o simulador
Erro Médio Quadrático=7.4835x10-5
Figura 6.46 Diferença entre o simulador e o modelo linear
Figura 6.47 Diferença entre o simulador e o modelo
Na Figura 6.46 e Figura 6.47 acima, devido a resposta lenta do sistemas as perturbações, é possível verificar os sucessivos erros de modelagem, que passam a se sobressair aos erro numéricos de simulador.
6.5	Influência das propriedades físicas do fluido na constante de tempo
Nesta seção serão relatadas análises referentes a influência das propriedades dos fluidos, como densidade, viscosidade e viscosidade cinemática sobre a constante de tempo ao modelo linear.
O objetivo desta análise foi de verificar com qual desta três propriedades físicas a constante de tempo apresenta uma maior dependência.
Na Tabela 6.1, tem-se a relação das propriedades físicas relevantes bem como a constante de tempo calculado pelo método da tentativa e erro após a obtenção de uma estimativa do valor da constante de tempo pelo método gráfico, como descrito na seção
4.
Tabela 6.1-Propriedades físicas dos fluidos,com a constante de tempo
	Diesel	Gasolina	GLP
Cte. Tempo(s)	40	70	300
Viscosidade a 20°C	7,910	0,650	0,168
(1e-2 g/cm.s)			
Densidade(kg/m3)	832	720	535
Viscosidade cinemática (1e-2 cm2/s)	9,507	0,902	0,314
Cte. tempo x viscosidade
viscosidade( 1e-2 g/cm.s)
Figura 6.48-Relação entre viscosidade e a constante de tempo
A Figura 6.48 representa a relação entre a viscosidade e a densidade, o curva ajustada corresponde a uma função do tipo y=AxB. A equação do ajuste é y=92,143X-0,4857 e apresenta uma correlação de 0,8327.
Cte. tempo x densidade
Figura 6.49-Relação entre a densidade e a constante de tempo
A Figura 6.49 relaciona a densidade e a constante de tempo , neste caso também se ajustou a uma potência, com uma correlação de 0,997. A curva apresenta a seguinte:1e15X'4'6133.
Cte. tempo x Viscosidade cinemática
Figura 6.50-Relação entre a constante de tempo e a viscosidade cinemática
A Figura 6.50 corresponde ao ajuste dos pontos da relação entre a constante de tempo e a viscosidade cinemática. Tendo como equação,y=112,46X-0,5317 e correlação de 0,7966
Para as três relações apresentadas o tipo de curva ajustada foi a mesma, com uma melhor aproximação para a densidade, ou seja, poderia-se a partir da curva obter
uma boa estimativa para a constante de tempo a ser utilizada para um fluido que se encontre na faixa de densidade entre 500 e 850 kg/m3.
Para verificar a análise, simulou-se o escoamento com n-pentano, que possui uma densidade de 630kg/m3 com a constante de tempo estimada em 122 s a partir da curva ajustada para a densidade. A partir deste valor estimado passou-se a aproximar o valor da constante de tempo por tentativa e erro obtendo-se o valor de 95s.
Figura 6.51 Comparação entre o simulador e o modelo linear
A Figura 6.51 representa a comparação entre o modelo linear e o simulador, utilizando o estimativa da constante de tempo obtida pela curva ajustada para a densidade.
Figura 6.52-Diferença entre o modelo e simulador
o Figura 6.53-Diferença simulador filtrado
entre o modelo e o
Como pode se observar na Figura 6.52 a constante de tempo estimada pela relação com densidade apresentou bons resultados. Nota-se a presença de erros ocasionadas pelos sinais de alta freqüência, sendo os mesmos reduzidos pela utilização como mostra a Figura 6.53. Obteve-se um erro médio quadrático de 2,7069x10-5. A mesma comparação foi feita para a jusante do duto, apresentando os seguintes resultados.
Figura 6.54- Comparação entre o modelo linear e o simulador
Pela Figura 6.54 observa-se a boa estimativa da constante de tempo, também para jusante.
Tabela 6.2
Figura 6.55 Diferença entre o modelo e o simulador
Figura 6.56- Diferença filtrada entre o modelo e o simulador
Na Figura 6.55 representa a diferença entre o modelo linear e o simulador para a jusante do duto, observa-se pequenos erros de modelagem, erros de alta freqüência , resultado de erros do simulador. Estes erros de alta freqüência foram reduzidos com a utilização do filtro digital, como mostra a Figura 6.56. Apresentando um erro médio quadrático de 0,0038
6.6	Alteração no diâmetro e no comprimento do duto
Para verificar a dependência da constante de tempo com o diâmetro do duto e o comprimento foram alterados seus valores na simulação para o diesel.
O diâmetro foi alterado de 13,5 pol para 15 pol mantendo-se o comprimento em 50 km. Para esta situação a constante de tempo manteve-se inalterada, logo a constante de tempo não é dependente do diâmetro de duto.
Para o estudo da variação da constante de tempo com a variação do comprimento, foram realizadas duas simulações para o diesel. A primeira com o diâmetro do duto em
13,5	pol e o duto com 100km extensão, o dobro do comprimento inicial. A segunda simulação foi feita para mesmo diâmetro e o duto com um comprimento de 150km, o triplo do inicial.
A primeira simulação foi realizada com um de duto 100km de comprimento, o dobro do comprimento inicial, obtendo-se uma constante de tempo de 105s. Esta constante de tempo corresponde ao triplo do valor inicial que era de 40s para o diesel.
Figura 6.57-Comparação entre os dados simulados e os dados do modelo para 100 km de duto
A Figura 6.57 apresenta a comparação dos dados reais com os dados simulados para o diesel com um duto de 100km de extensão. O erro médio quadrático entre o simulador e modelo linear foi de 1,2503x10-5.
A segunda simulação foi realizada com um duto de 150km, ou seja, o triplo do comprimento inicial. Para esta configuração de duto escoando diesel a constante de tempo obtida foi de 145s.
Figura 6.58- Comparação entre os dados simulados e os dados do modelo para 150 km de duto
A Figura 6.58 apresenta comparação entre os dados simulados com os dados gerados a partir do modelo linear considerando-se o duto com 150km. Para este caso o erro médio quadrático foi de 1,825x10-5.
Para verificar a dependência da constante de tempo com a variação do comprimento ajustou-se os dados dos diferentes comprimentos de duto para as diferentes constantes de tempo obtidas.
Figura 6.59-Variação da constante de tempo com o comprimento do duto
A Figura 6.59 acima, representa o ajuste realizado ao conjunto de pontos para a constante de tempo e o comprimento do duto. Ajustou-se uma curva logarítmica com equação y= 97,12ln(x)-338,94 e correlação igual 0,9795.
Com o objetivo de testar a predição pelo ajuste da curva obtida pelos dados de comprimento do duto e constante de tempo, simulou-se um duto com 200km de comprimento, onde pela curva obteve-se uma constante de tempo de 179s para um duto com 200km.
Figura 6.60-Comparação entre o simulador e o modelo linear para um duto de 200km
Na Figura 6.60 apresenta um comparação entre o simulador e o modelo linear utilizando a constante de tempo igual 179s, como estimado pelo ajuste da curva. Obteve um erro médio quadrático 2,6922x10-5.
7.	CONCLUSÕES
O modelo proposto para o duto em questão é de um modelo linear de 1° ordem, onde o único parâmetro a ser determinado é a constante de tempo do duto.
O modelo foi submetido a diferentes testes sendo aplicado para o OCL, onde apresentou bons resultados na representação dos dados de campo. Para o diesel, gasolina e GLP, com pequenas alterações nas configurações do duto, foi possível representar com bons resultados o duto, em comparação com os dados do simulador, para os demais produtos, ajustando-se apenas a constante de tempo no modelo.
Foram realizados testes adicionais para verificar a dependência da constante de tempo com o diâmetro e o comprimento do duto. Verificou-se que a variação no diâmetro não interfere na constante de tempo do duto. Através da curva ajustada para a relação da constante de tempo com o comprimento do duto, foi possível estimar a constante de tempo para diversos comprimentos de duto, acima de 50 km.
Outra análise realizada foi a de verificar com qual propriedade física a constante de tempo melhor se relaciona. Dentre as propriedades físicas, foram utilizadas a viscosidade, a viscosidade cinemática e a densidade, sendo que a melhor relação foi obtida para a densidade.
A partir da densidade do diesel, da gasolina e do GLP e de suas respectivas constantes de tempo, ajustou-se uma curva. Com esta curva, utilizando-se a densidade do pentano, obteve-se uma estimativa para a sua constante de tempo, sendo o resultado obtido na comparação com os dados simulados satisfatórios.
Como sugestão para trabalhos futuros, poder-se-ia verificar a dependência da constante de tempo com o comprimento do duto considerando um parâmetro relacionado ao perfil altimétrico.
Outra possibilidade seria o desenvolvimento de um modelo híbrido usando redes neurais para melhorar a predição do comportamento dinâmico.
8.	REFERÊNCIAS BILIOGRÁFICAS
BARANANO, AUDREI G., Análise do Comportamento de Transientes de Pressão em Polidutos com Vazamento: Um Estudo Utilizando Dados de Simulação, MSc. Dissertação de Mestrado, UFSC, Florianópolis, SC, 2001.
BENNETT, C. O.; MYERS, J. E.-Fenômenos de Transportes, quantidade de movimento, calor e massa, Editora McGraw-Hill,1978.
CARIATI, SERGIO A., Detecção de Vazamentos por Computador ’’on-line” em Tubulações Transportando Líquido e Misturas Gás-Líquido, MSc. Dissertação de Mestrado,Unicamp, SP, 1999
COSTA1, ANDRÉ L. H., MEDEIROS, J.L., ARAÚJO, OFÉLIA Q. F., A Time Series Approach for Pipe Network Simulation, IBP,Novembro 2001.
COSTA2, ANDRÉ L. H., MEDEIROS, J.L., ARAÚJO, OFÉLIA Q. F., Leak Detection in a Pipeline, IBP,Novembro 2001.
CRANE Technical Paper #410, Flow of Fluids through Valves, Fittings and Pipe, Crane Corporation, 4100, S.Kedzie Avenue, Chicago, IL60632, 1978.
HSIA, Tien C., System Identification, D. C. Heath and Company, Estados Unidos, 1977.
LJUNG, LENNARD, System Identification -Theory of the user, Prentice Hall Ptr, Upper Saddle River, New Jersey, 1987.
MATKO1, DRAGO; GEIGER, GERHARD; GREGORITZA, WITHOLD, Pipeline Simulation Techniques, Mathematics and Computers in Simulation,v. 52,2000, p 211-230.
MATKO2, DRAGO; GEIGER, GERHARD, GREGORITZA; WITHOLD, Verification of Various Pipeline Models, Mathematics and Computers in Simulation,v. 53, 2000, p 303-308.
OGATA, KATSUHIKO, Engenharia de Controle Moderno, Prentice Hall do Brasil, 2° ed., Rio de Janeiro, RJ, 1993.
PERRY, ROBERT H.; GREEN, DON W., Perry’s Chemical Engineers’ Handbook, 7th ed., McGraw Hill, 1999.
SEBORG, D. E.; EDGAR, T.F.; MELLICHAMP, D. A., Process Dynamics and Control, John Wiley &amp;amp; Sons, Estados Unidos, 1989.
WYLIE, E. B.;STREETER, V. L., Fluids Transients, Editora McGraw-Hill, 1978.</field>
	</doc>
</add>