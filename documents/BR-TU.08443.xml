<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.08443</field>
		<field name="filename">13278_272847.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">SISTEMA ESPECIALISTA PARA O GERENCIAMENTO OPERACIONAL DE REDES DE DISTRIBUIÇÃO DE GÁS NATURAL
Dissertação submetida à
UNIVERSIDADE FEDERAL DE SANTA CATARINA
para a obtenção do grau de
MESTRE EM ENGENHARIA MECÂNICA
MÁRCIO RICARDO CASTELANI
Florianópolis, 28 de novembro de 2003
UNIVERSIDADE FEDERAL DE SANTA CATARINA PROGRAMA DE PÓS-GRADUAÇÃO EM ENGENHARIA MECÂNICA
SISTEMA ESPECIALISTA PARA O GERENCIAMENTO OPERACIONAL DE REDES DE DISTRIBUIÇÃO DE GÁS NATURAL
MÁRCIO RICARDO CASTELANI
Esta dissertação foi julgada adequada para a obtenção do título de MESTRE EM ENGENHARIA MECÂNICA
ESPECIALIDADE ENGENHARIA MECÂNICA sendo aprovada em sua forma final
Jonny Carlos da Silva, Dr.Eng. (Orientador)
José Antônio Bellini da Cunha Neto, Dr. (Coordenador do Curso)
BANCA EXAMINADORA
Edison da Rosa, Dr.Eng. (Presidente)
Victor Juliano de Negri, Dr.Eng.
Arno Bollmann, Dr.Ing.
Sumário
CAPÍTULO 1 - INTRODUÇÃO.......................................................1
1.1	Origem do trabalho....................................................1
1.2	Gerenciamento operacional de redes de gás.............................3
1.3	Monitoramento de redes de gás assistido por sistemas	especialistas....4
1.4	Justificativa para o trabalho.........................................6
1.5	Objetivos gerais......................................................7
1.6	Estrutura do trabalho.................................................8
CAPÍTULO 2 - SISTEMAS ESPECIALISTAS...........................................9
2.1	Surgimento de sistemas especialistas..................................9
2.2	Conceito de sistemas Especialistas...................................10
2.3	Características de Sistemas Especialistas............................11
2.4	Estrutura de um Sistema Especialista.................................13
2.5	Engenharia de conhecimento...........................................18
2.6	Aquisição de Conhecimento............................................18
2.6.1	Entrevistas com os especialistas..................................19
2.7	Técnicas de representação de conhecimento............................20
2.7.1	Regras............................................................21
2.7.2	Redes Semânticas..................................................22
2.7.3	Orientação por objetos............................................23
2.8	Formas de Inferência.................................................24
2.8.1	Encadeamento direto...............................................25
2.8.2	Encadeamento reverso..............................................25
2.9	Ferramentas de implementação.........................................27
2.10	Teste (V &amp;amp; V)........................................................28
2.10.1	Verificação.......................................................28
2.10.2	Validação.........................................................29
2.11	Metodologia para o desenvolvimento ..................................31
2.12	Vantagens e Desvantagens de Sistemas Especialistas...................34
2.13	Aplicação de sistemas Especialistas..................................36
2.13.1	Sistema para projeto de circuitos hidráulicos (KEOPHS)..............37
2.13.2	Sistema para o Diagnóstico de falhas em um sistema hidráulico naval.37
2.13.3	Sistema para recomendação de manutenção em sistemas hidráulicos.....38
CAPÍTULO 3 - REDES DE DISTRIBUIÇÃO DE GÁS NATURAL..............................39
3.1	O gás natural.........................................................39
3.2	Cadeia produtiva do gás natural.......................................40
3.2.1	Fase de exploração..................................................41
3.2.2	Fase de produção....................................................41
3.2.3	Fase de processamento...............................................41
3.2.4	Fase de transporte..................................................43
3.2.5	Di stribui ção......................................................44
3.3	Componentes de uma rede de distribuição de gás natural................45
3.4	Estações de redução de pressão e medição..............................47
3.4.1	Filtro..............................................................48
3.4.2	Válvula de bloqueio automático......................................49
3.4.3	Válvula reguladora de pressão.......................................49
3.4.4	Válvula de alívio de pressão........................................52
3.4.5	Válvula de retenção.................................................52
3.4.6	Medidor de vazão....................................................52
3.5	Falhas em redes de distribuição.......................................52
3.6	Falhas em estações....................................................54
3.6.1	Técnicas de análise de falhas.......................................55
3.7	Monitoramento.........................................................58
3.8	Simulação do escoamento na rede de gás................................59
3.8.1	Escoamento em regime permanente.....................................60
3.9	Sistemas Comerciais para Redes de Distribuição de gás natural.........60
CAPÍTULO 4 - FASES DE DESENVOLVIMENTO DO SISTEMA...............................65
4.1	Estudo de viabilidade (Análise do problema) ..........................65
4.1.1	Identificação do problema...........................................67
4.1.2	Adequação da abordagem através	de um SE..........................69
4.1.3	Verificação da disponibilidade de	Recursos..........................73
4.1.3.1	Dados e Informações.................................................74
4.1.3.2	Disponibilidade de Especialistas....................................74
4.1.3.3	Suporte financeiro..................................................75
4.2	Especificações do Sistema................................................76
4.2.1	Objetivos do sistema...................................................76
4.2.2	Entradas e saídas do sistema...........................................77
4.2.3	Definição do público alvo..............................................80
4.2.4	Restrições gerais......................................................81
4.3	Projeto Preliminar.......................................................81
4.3.1	Paradigma de representação do conhecimento.............................82
4.3.2	Escolha do método de inferência........................................84
4.3.3	Ferramenta de implementação............................................85
4.3.4	Interface com o usuário................................................86
4.4	Criação de protótipos....................................................87
4.4.1	Protótipo Inicial - SEGRED-SCGAS 1.0...................................88
4.4.2	Protótipo intermediário - SEGRED-SCGAS 1.1.............................92
4.5	Ajustes no Projeto do Sistema............................................96
4.5.1	Mudança de método de inferência........................................96
4.5.2	Ajustes na interface...................................................97
4.5.3	Adaptação à disponibilidade de informações.............................98
4.5.4	Inclusão de informações................................................99
4.6	Validação do sistema.....................................................100
CAPÍTULO 5 - DESCRIÇÃO DO SISTEMA................................................102
5.1	Definição do Sistema....................................................102
5.2	Domínio de aplicação....................................................103
5.3	Funções do Sistema......................................................104
5.3.1	Visualização da rede de distribuição..................................105
5.3.2	Acesso a informações de componentes e equipamentos....................106
5.3.3	Simulação do escoamento...............................................107
5.3.4	Verificação de situação operacional da rede...........................109
5.3.5	Verificação de situação operacional de estações.......................110
5.3.6	Diagnóstico em estações...............................................111
5.3.7	Alteração de parâmetros nas estações..................................113
5.4	Estrutura do Sistema..........................................114
5.4.1	Estrutura de Classes.......................................115
5.4.2	Fatos.......................................................120
5.4.3	Base de conhecimento.......................................122
5.4.4	Controle do processo.......................................126
CAPÍTULO 6 - CONCLUSÕES E RECOMENDAÇÕES...............................130
6.1	Análise de falhas em uma RDGN................................130
6.2	Projeto do sistema SEGRED-SCGAS..............................131
6.3	Monitoramento assistido por sistemas especialistas...........132
6.4	Recomendações futuras........................................133
REFERÊNCIAS BIBLIOGRÁFICAS............................................135
Apêndice A - Diagrama de classes do protótipo 1.1....................138
Apêndice B - Diagrama de classes do protótipo 1.3....................139
Apêndice C - Resultados da validação do sistema SEGRED-SCGAS.........140
Anexo 1 - Fluxograma da rede de distribuição de gás de Joinville-SC..154
Anexo 2 - Rotina para o cálculo da perda de carga em tubos...........155
Índice de figuras
Figura 1.1 - Rede de distribuição de gás natural em Santa Catarina.................1
Figura 1.2 - Atuação dos sistemas SOI e SEGRED na operação da RDGN.................5
Figura 2.1 - Relação entre domínio do conhecimento e domínio do problema em um SE.12
Figura 2.2 - Estrutura básica de um Sistema Especialista (GIARRATANO, 1993, p.2)..14
Figura 2.3 - Estrutura de um sistema especialista.................................17
Figura 2.4 - Exemplo de rede semântica com relações “é-um” e “é-parte-de”.........23
Figura 2.5 - Modelo waterfall para desenvolvimento de software....................31
Figura 2.6 - Modelo de desenvolvimento para sistemas especialistas................33
Figura 3.1 - Molécula do gás metano...............................................39
Figura 3.2 - Gás natural associado................................................40
Figura 3.3 - Gás natural não-associado............................................40
Figura 3.4 Esquema de uma unidade de processamento de gás natural - UPGN..........42
Figura 3.5 - Navio criogênico para o transporte de gás natural....................43
Figura 3.6 - Gasoduto Bolívia-Brasil (TBG)........................................44
Figura 3.7 - Sistema de transporte e distribuição de gás canalizado - NBR 12712...45
Figura 3.8 - Estação de redução de pressão e medição - ERPM.......................48
Figura 3.9 - Croqui de uma válvula de bloqueio automático - Catálogo GASCAT.......49
Figura 3.10 - Esquema da válvula reguladora de pressão - posição fechada..........50
Figura 3.11 - Esquema da válvula reguladora de pressão. Posição de funcionamento..51
Figura 3.12 - válvula de alívio - GASCAT: disponível em: http://www.gascat.com.br.52
Figura 3.13 - Análise de falhas em ERPM em níveis sucessivos......................56
Figura 3.14 - Árvore de falhas para ERPM - pressão alta a jusante.................58
Figura 3.15 - Sistema de monitoramento da rede - SCGÁS............................59
Figura 4.1 - Modelo hipotético de rede de distribuição	de	gás natural.............67
Figura 4.2 - SEGRED-SCGAS 1.0 - tela principal....................................89
Figura 4.3 - SEGRED-SCGAS 1.0 - tela de ERPM......................................90
Figura 4.4 - SEGRED-SCGAS 1.0 - verificação de situação operacional da rede.......91
Figura 4.5 - SEGRED-SCGAS 1.0 - diagnóstico de falha em estação ERPM..............91
Figura 4.6 - SEGRED-SCGAS 1.3 - estrutura de classes..............................93
Figura 4.7 - SEGRED-SCGAS 1.1 - tela principal....................................94
Figura 4.8 - SEGRED-SCGAS 1.1 - tela de ERPM......................................95
Figura 4.9 - SEGRED-SCGAS 1.1 - diagnóstico de falhas em ERPM....................95
Figura 5.1 - Suporte para operação da rede - SEGRED x	SOI.......................102
Figura 5.2 - SEGRED-SCGAS	1.3	- Tela principal do sistema......................106
Figura 5.3 - SEGRED-SCGAS	1.3	- válvulas de bloqueio de linha..................107
Figura 5.4 - SEGRED-SCGAS	1.3	- perfil de vazão em um trecho da rede...........108
Figura 5.5 - SEGRED-SCGAS	1.3	- alerta acerca de problema detectado na rede....109
Figura 5.6 - SEGRED-SCGAS	1.3	- estações ERPM..................................110
Figura 5.7 - Tela para válvula de redução de pressão............................112
Figura 5.8 - Tela para medidor de vazão.........................................113
Figura 5.9 - Arquitetura funcional do sistema.............................114
Figura 5.10 - Diagrama de classes do sistema..............................116
Figura 5.11 - Classe GERENTE....................................................120
Figura 5.12 - Classe ALARME.....................................................120
Figura 5.13 - Etapas do processamento de informações no sistema.................127
Figura 5.14 - Regra de controle "atualizar-sistema".......................128
Figura 5.15 - Regra de controle "atualizar-estacao".......................129
ÍNDICE DE TABELAS
Tabela 2.1 - Características dos métodos de inferência (GIARRATANO, 1994, p.160).26
Tabela 3.1 - Composição típica do Gás Natural (fonte: SCGÁS).....................42
Tabela 3.2 - Propriedades típicas do Gás Natural (fonte: SCGÁS)..................43
Tabela 3.3 - Estudo de modos de falha para uma válvula reguladora de pressão.....57
Tabela 3.4 - Estudo de modos de falha para uma ERPM - pressão jusante alta.......57
Tabela 5.1	- Entradas para o sistema especialista...............................105
Tabela 5.2	- Regras: gerar alarmes para a situação operacional da rede..........123
Tabela 5.3	- Regras: verificação da situação operacional das estações...........124
Tabela 5.4	- Regras: diagnóstico de falhas em equipamentos das estações.........126
Resumo
A crescente demanda de gás natural e o conseqüente aumento da complexidade das redes de distribuição são fatores que dificultam o trabalho de operação e manutenção destas devido ao grande número de parâmetros a serem verificados e controlados simultaneamente. O presente trabalho descreve o processo de desenvolvimento de uma ferramenta computacional baseada em conhecimento heurístico e voltada para o apoio à operação de redes de distribuição de gás natural. Esta ferramenta consiste em um sistema especialista integrado a um sistema de aquisição de dados e uma rotina para simulação do escoamento do gás natural em regime permanente. O sistema especialista analisa dados monitorados na rede em conjunto com os resultados numéricos da simulação para realizar inferências sobre o estado operacional da rede, indicando problemas de demanda de gás ou falhas em componentes de estações de redução de pressão. Este trabalho é parte de um projeto de pesquisa desenvolvido por intermédio de uma parceria entre a Companhia de Gás de Santa Catarina (SCGÁS), a Transportadora Brasileira Gasoduto Bolívia-Brasil (TBG), a Petróleo Brasileiro SA (PETROBRAS) e o Departamento de Engenharia Mecânica da Universidade Federal de Santa Catarina (UFSC/EMC), contando com o apoio financeiro do FINEP. O investimento neste projeto visa aumentar a eficiência na operação de redes de distribuição de gás natural. O projeto aplica uma combinação de regras, orientação a objetos e modelagem por redes semânticas, como técnica para representação de conhecimento. O trabalho apresenta as funções e características do protótipo implementado, descreve as principais etapas do seu desenvolvimento e traz algumas considerações a respeito de sistemas especialistas, redes de distribuição de gás natural e engenharia de conhecimento.
Abstract
The natural gas increasing demand and the consequent distribution network complexity growth make operation and maintenance of gas distribution networks more complicated due to the number of parameters to be simultaneously checked and controlled. This work describes the development process of a software, based on heuristic knowledge, for supporting operation of natural gas distribution networks. This software consists of an expert system integrated to a data acquisition system and a routine for steady-state natural gas flow simulation. The expert system analyses parameters monitored from the distribution network and the simulation numerical results to make inferences about the operational situation of the network, indicating problems related to gas demand or failures in components of pressure reducing stations. This work is part of a project being developed in a partnership between a local gas distribution company in Santa Catarina (SCGÁS), a gas transportation company (TBG - Transportadora Brasileira Gasoduto Bolívia-Brasil), the oil company PETROBRAS and the Mechanical Engineering Department of the Federal University of Santa Catarina (UFSC/EMC), with financial support from FINEP. The investment in this project aims to increase the efficiency of natural gas distribution networks operation. The project applies a combination of rules, object-oriented principles and semantic nets modeling, as technique for knowledge representation. This work presents the functions and characteristics of the prototype implemented, describes the main phases of the development process and makes some considerations related to expert systems, natural gas distribution networks and knowledge engineering.
Capítulo 1 - Introdução
1.1	Origem do trabalho
O uso do gás natural como fonte de energia tem se popularizado muito no Brasil, principalmente a nível industrial. A crescente demanda deste tipo de energia impulsionou o aparecimento de empresas de transporte e distribuição de gás natural em todo o país. O rápido crescimento neste ramo de atividade traduziu-se no aumento na disponibilidade de recursos para pesquisa, o que tem contribuído para a afirmação da delicada relação existente, nos dias atuais, entre a indústria e o setor acadêmico do país.
No Estado de Santa Catarina, a distribuição de gás natural é feita pela SCGÁS -Companhia de Gás de Santa Catarina. A SCGÁS iniciou sua operação em abril de 2000 na região nordeste do Estado, com parte da sua rede de distribuição, referente à cidade de Joinville-SC. A Figura 1.1 apresenta a rede de distribuição de gás natural da SCGÁS, em sua configuração atual. Esta figura inclui, também, uma representação esquemática da rede de distribuição da cidade de Joinville, mencionada anteriormente.
Figura 1.1 - Rede de distribuição de gás natural em Santa Catarina.
Em sua operação, a SCGÁS busca atender a diversos segmentos econômicos, dentre os quais, destacam-se o industrial, o comercial, o residencial, o automotivo, o petroquímico e o de fertilizantes. Encontra-se em um constante processo de ampliação e modernização da rede, buscando atender ao maior número de clientes de maneira segura e eficiente.
O presente trabalho trata da utilização de uma abordagem de sistemas especialistas no gerenciamento operacional de uma rede de distribuição de gás natural, enfocando a implementação de um sistema para dar suporte à operação da rede de distribuição da cidade de Joinville, denominado SEGRED-SCGAS. O tema deste trabalho surgiu de uma parceria entre a SCGÁS e o LASHIP (Laboratório de Sistemas Hidráulicos e Pneumáticos / UFSC), por meio da qual realizou-se, no início de 2000, um projeto, intitulado “Estudo de Viabilidade de Desenvolvimento de Software para Gerenciamento da Rede de Distribuição de Gás Natural em SC”, conforme descrito por DE NEGRI et al. (2000). Este estudo teve como objetivo a coleta e sistematização de informações, relacionadas à rede de distribuição de gás natural da SCGÁS, bem como a identificação de requisitos para a simulação de redes e a estruturação do conhecimento visando o emprego de inteligência artificial. A referida parceria converteu-se em um projeto com dois anos de duração, denominado SEGRED, envolvendo, ainda, as organizações PETROBRÁS GÁS, TBG (Transportadora Brasileira Gasoduto Bolívia-Brasil) e FINEP (Financiadora de Estudos e Projetos do Ministério da Ciência e Tecnologia).
O desenvolvimento do sistema especialista teve enfoque nas informações qualitativas, advindas de heurísticas de especialistas das empresas, buscando aproveitar os recursos computacionais já existentes em um sistema inteligente que oferecesse um maior suporte ao gerenciamento operacional da rede. O principal objetivo do sistema é automatizar algumas tarefas realizadas por especialistas humanos na operação da rede, visando aumentar a confiabilidade no fornecimento de gás e reduzir os custos operacionais para a organização. O desenvolvimento de um sistema desta natureza contribui ainda para a preservação da memória técnica de empresas como a SCGÁS.
O desenvolvimento desta pesquisa contribui para aliar dois setores estratégicos, a saber: a operação e manutenção de sistemas de distribuição e transporte de gás natural, e o desenvolvimento de sistemas especialistas para apoio à tomada de decisão ligados a domínios técnicos.
1.2	Gerenciamento operacional de redes de gás
De acordo com a visão de especialistas na área, o gerenciamento operacional, para uma rede de distribuição de gás natural, divide-se, basicamente, em dois tipos de atividades: o controle das características do gás e a manutenção dos equipamentos da rede.
O controle das características do gás envolve o monitoramento e análise periódica de centenas de dados de processo inter-relacionados, que refletem o estado da rede. Tais dados consistem em variáveis de estado contínuas, tais como: pressão, vazão e temperatura do gás. São monitoradas em vários pontos da rede, geralmente por intermédio de um sistema automático de aquisição de dados. O acompanhamento destas variáveis faz parte do dia a dia dos funcionários da empresa, contudo, sua interpretação e controle ficam limitados à disponibilidade de pessoal e tempo.
Os operadores das redes de distribuição são responsáveis por assegurar que o gás seja entregue nas condições estabelecidas em contrato com o cliente, de forma segura e com um mínimo de custo para a empresa distribuidora. Normalmente os operadores trabalham com base em conhecimento heurístico para análise das variáveis de processo. São responsáveis por definir os parâmetros operacionais da rede, os quais consistem, basicamente, em ajustes aplicados aos equipamentos instalados nas estações.
O acompanhamento das variáveis de processo permite detectar anomalias no comportamento da rede, as quais podem indicar defeitos em equipamentos da rede ou problemas com os clientes consumidores e, dessa forma, indicar a necessidade de manutenção ou ação corretiva.
A manutenção da rede de distribuição está relacionada principalmente aos equipamentos de estações e envolve realização de ajustes, limpeza e substituição de componentes, visando garantir sua operação de acordo com os requisitos especificados em projeto.
Embora as atividades de controle das características do gás e manutenção da rede de distribuição sejam atividades conceitualmente diferentes, é preciso salientar que suas interpretações confundem-se, sob certos aspectos, no contexto deste trabalho. A manutenção pode ser de natureza preventiva ou corretiva. A manutenção corretiva da rede está relacionada ao seu controle, pois é feita quando ocorre falha em equipamento, a qual é constatada por meio de inspeção local ou análise das variáveis de processo. Como o sistema busca atuar justamente na identificação de anomalias no funcionamento da rede, a distinção das atividades de manutenção e controle não é muito clara para fins de implementação, visto que praticamente todas estão ligadas à análise dos dados operacionais disponíveis. Como exemplo
pode-se citar o caso de construção de uma regra que alerte o operador da rede para um valor de pressão de gás acima da faixa operacional. Caso este problema esteja ligado à falha de algum equipamento, esta informação será adicionada à regra, indicando ao operador a possibilidade da falha.
O termo gerenciamento operacional refere-se não somente ao monitoramento e supervisão de variáveis de processo da rede. Envolve também a interpretação de cenários operacionais complexos e a tomada de decisões para a solução de alguns problemas na operação da rede. Em alguns pontos do trabalho, o termo “operação” da rede é empregado para designar este processo.
1.3	Monitoramento de redes de gás assistido por sistemas especialistas
O sistema especialista proposto neste trabalho utiliza recursos de monitoramento e simulação de variáveis de processo da rede de distribuição. Combinando estas informações com sua base de conhecimento, o sistema permite fazer uma avaliação mais detalhada da situação operacional da rede.
A divisão hierárquica de atividades envolvidas na operação de uma RDGN, segundo o grau de conhecimento associado em sua execução, pode ser entendida como a seguir: Leitura de dados: é realizada por sensores instalados em campo.
Monitoramento: consiste na obtenção dos dados lidos em campo.
Supervisão: consiste em verificar as variáveis monitoradas, buscando detectar situações anormais ou inconsistências.
Gerência: envolve a interpretação de situações complexas no estado operacional da rede e a tomada de decisão para a solução de problemas.
Atualmente, a maioria das companhias do ramo de distribuição de gás conta com sistemas de monitoramento do tipo SCADA, para aquisição automática de dados das redes de distribuição. Além de possuírem a capacidade de armazenar as variáveis de processo da rede e disponibilizá-las aos operadores, muitos destes sistemas contam com recursos para supervisionar estes dados. Este recurso permite fazer uma análise individual das variáveis de processo, em relação a seus limites operacionais, e alertar o usuário para irregularidades.
A SCGÁS conta com um sistema de monitoramento para sua rede de distribuição de gás, denominado SOI. Este sistema oferece os recursos de verificação de dados acima descritos. Esta característica do sistema permite que ele seja classificado como um sistema de monitoramento e supervisão, no contexto de operação da rede.
O sistema especialista SEGRED, por outro lado, não enfoca o monitoramento de dados, embora os utilize. Sua função é a de atuar como uma ferramenta para interpretar cenários operacionais complexos, com base na análise simultânea de variáveis relacionadas, realizar diagnósticos e fazer sugestões operacionais para o usuário. Estas atividades envolvem uma maior quantidade de conhecimento sobre o funcionamento da rede, o que caracteriza o SEGRED como uma ferramenta de apoio à supervisão e ao gerenciamento da rede de distribuição de gás.
A Figura 1.2 representa a alocação dos sistemas SOI e SEGRED na operação da RDGN da SCGÁS. A figura mostra a área de atuação destes sistemas em relação à operação da rede.
Figura 1.2 - Atuação dos sistemas SOI e SEGRED na operação da RDGN
Pela figura, pode-se notar que a aplicação de um sistema especialista complementa as tarefas executadas pelo sistema de monitoramento. No processo de supervisionar as variáveis de processo, que corresponde à verificação da situação operacional da rede, sua atuação sobrepõe algumas tarefas executadas pelo sistema SOI. No entanto, a avaliação feita pelo sistema SEGRED apresenta maior riqueza de informações e compreende um maior número de aspectos operacionais, o que é possível pela combinação das variáveis com o conhecimento dos especialistas.
1.4	Justificativa para o trabalho
No Brasil, as organizações do setor de gás enfrentam o problema de possuírem pouca experiência adquirida na operação e manutenção de redes, dado o início relativamente recente de suas operações. Além disso, existe o problema de escassez de profissionais especializados nesta área. Estas lacunas de especialidade representam um grande potencial para a aplicação de sistemas baseados em conhecimento.
O investimento neste trabalho visa a modernização e maior automatização das redes de distribuição de gás natural, e se justifica pela necessidade de aumentar a confiabilidade e reduzir o custo do produto para o consumidor. O desenvolvimento de sistemas computacionais, que auxiliem na supervisão de redes de distribuição de gás natural, traz como contribuição direta o aprimoramento dos serviços prestados pelas empresas, manifestando-se através da garantia de abastecimento dentro de padrões contratuais, operação segura quanto a pessoas e meio ambiente, planejamento de intervenções de manutenção e melhoramento das avaliações quanto à necessidade de incrementar a capacidade de suprimento das redes.
Planejadas inicialmente para os grandes consumidores do setor industrial, as redes de gás foram projetadas para atender a poucos clientes, operando em regimes previsíveis e com suficiente reserva de pressão. Hoje as empresas visam também atender pequenos clientes, incluindo o mercado doméstico. Em função disto, estão expandindo suas redes através de ramificações para cobrir um maior número de regiões e centros urbanos. Além do aumento da demanda de gás, o que reduz as folgas operacionais, esta expansão implica em um aumento da complexidade das redes. Isto dificulta o trabalho da equipe de operação pois o numero de parâmetros a serem controlados é muito grande. Daí a necessidade de um suporte computacional para o processo de gerenciamento operacional da rede.
Existem diversos softwares comerciais especializados em redes de Gás. A partir de uma pesquisa realizada no estudo de viabilidade, constatou-se que os sistemas atualmente disponíveis no mercado estão voltados para a etapa de simulação dinâmica do escoamento, sem uma integração com ferramentas de apoio à decisão com base em Inteligência Artificial. Estes sistemas têm a capacidade de modelar a rede e simular sua operação, tanto em regime permanente quanto transiente, com alta precisão. A maioria deles possui interface gráfica que permite a edição e visualização da rede em forma de mapa. Tais sistemas são hoje muito empregados na área de projeto de redes. Limitam-se, no entanto, a serem utilizados como ferramentas de simulação matemática, onde o usuário testa alterações na rede, inserindo-as e observando os resultados. Alguns deles podem operar em conjunto com um sistema de
aquisição de dados da rede em tempo real, porém a tomada de decisões operacionais e a realização de diagnósticos em situações críticas são ainda tarefas exclusivas do especialista humano.
O gerenciamento técnico de uma rede de distribuição de gás natural não é uma atividade totalmente formalizada por meio de normas e manuais de procedimento e depende fortemente de especialistas humanos, como engenheiros e técnicos experientes, em cada empresa. No entanto, estes especialistas exercem muitas de suas funções mais comuns de maneira bastante sistemática e eficiente, o que caracteriza uma definição clara do conhecimento necessário para a realização destas funções. Isto é mais um ponto a favor da utilização de uma abordagem através de sistemas especialistas para o problema.
1.5	Objetivos gerais
O sistema SEGRED-SCGAS, aqui apresentado, foi concluído com a implementação da versão 1.3, em dezembro de 2002. Seu desenvolvimento está incluído no escopo do projeto SEGRED. Este trabalho trata mais especificamente de aspectos relativos ao desenvolvimento do módulo de sistema especialista, implementado durante o projeto, com enfoque para a construção da base de conhecimento. Em relação ao sistema, são abordados, principalmente, os temas referentes à aquisição e representação do conhecimento, à implementação e às etapas de desenvolvimento.
Busca-se fazer a documentação das informações sobre o processo operação de redes de distribuição de gás natural, que ainda é pouco documentado em publicações técnicas. A maior parte do conhecimento utilizado foi obtido através da interação com técnicos e engenheiros da SCGÁS.
O trabalho busca fundamentar a sistematização das informações utilizadas, com base nas técnicas de representação de conhecimento e manipulação simbólica, oferecidas pelo conceito de sistemas especialistas.
O processo de desenvolvimento do sistema SEGRED-SCGAS, desde o estudo de viabilidade até a validação da versão final, é descrito em detalhes, mostrando as principais decisões feitas e as maiores dificuldades encontradas no projeto.
A simulação do escoamento é utilizada principalmente para a determinação de perdas de carga na tubulação da rede. Descreve-se de maneira sucinta o uso da simulação do escoamento pelo sistema, apresentando os fundamentos básicos adotados e a rotina de cálculo implementada.
O trabalho inclui considerações sobre o projeto da interface gráfica. A definição da forma de apresentação das saídas do sistema especialista faz parte do processo de desenvolvimento. Apesar disso, não são apresentados detalhes em relação à implementação da interface gráfica.
Importante observar que, devido ao padrão de unidades adotado pela SCGÁS, algumas unidades usadas neste trabalho não seguem o Sistema Internacional.
1.6	Estrutura do trabalho
Este trabalho está estruturado em 6 capítulos. Definidos os objetivos do projeto, o capítulo 2 apresenta os conceitos relativos a sistemas especialistas e engenharia de conhecimento, utilizados para fundamentar o presente desenvolvimento.
O capítulo 3 busca apresentar os conceitos relativos à redes de distribuição de gás natural. Inicia com uma introdução à cadeia produtiva do gás. Em seguida faz a descrição de redes de distribuição e seus principais componentes. Busca apresentar as informações obtidas sobre os problemas que podem ocorrer em redes e a forma empregada para sistematizar estas informações. Ao final do capítulo são apresentados, também, alguns sistemas comerciais aplicados a redes de gás.
O capítulo 4 descreve as principais etapas do processo de desenvolvimento do protótipo, desde a realização do estudo de viabilidade até a validação das várias versões implementadas para o sistema. Apresenta as principais considerações que devem ser feitas, em projetos desta natureza, para evitar erros nas decisões de projeto, sempre mostrando exemplos referentes ao projeto em questão. Este capítulo visa fornecer uma orientação para o desenvolvimento de projetos semelhantes.
Capítulo 2 - Sistemas Especialistas
2.1	Surgimento de sistemas especialistas
Os primeiros trabalhos desenvolvidos na área de Inteligência Artificial (IA) focalizavam tarefas como jogos e demonstração de teoremas. Inicialmente, parecia que os computadores teriam sucesso na realização dessas tarefas simplesmente por serem rápidos para explorar um grande número de soluções, e depois selecionar a melhor delas. Achava-se que este processo exigia muito pouco conhecimento e, portanto, podia ser facilmente programado. Esta suposição provou-se falsa, já que nenhum computador é rápido o suficiente para superar a explosão combinatória gerada pela maioria dos problemas (RICH e KNIGHT, 1994).
Ao final da década de 50 e na década de 60, uma outra incursão pioneira pela IA enfocou a solução de problemas envolvendo raciocínio de senso comum. Para investigar este tipo de raciocínio, diversos programas foram desenvolvidos, visando a solução geral de problemas. O mais famoso destes programas era o General Problem Solver - GPS, criado por NEWELL e SIMON (1972). O GPS era aplicado a várias tarefas de senso comum, e também ao problema de efetuar manipulação simbólica de expressões lógicas. Novamente, não buscou-se enfocar no conhecimento sobre um domínio em particular.
Embora os métodos de raciocínio empregados por sistemas como o GPS fossem bastante poderosos, os sistemas eram eternos amadores. Quando apresentados a um novo domínio, todos os princípios básicos envolvidos tinham que ser definidos. a performance destes sistemas era inferior à de especialistas humanos, que apoiavam-se em um domínio de conhecimento para serem mais eficientes.
Segundo GIARRATANO e RILEY (1994), o mais importante resultado demonstrado por Newell e Simon foi a constatação de que muito da solução de problemas por humanos, ou cognição, pode ser expressa por regra do tipo SE ENTÃO.
Esta descoberta levou ao desenvolvimento de sistemas especialistas, ou sistemas baseados em conhecimento. A partir daí, esta tecnologia evoluiu até se tornar, no início da década de 90, um tópico dominante na literatura técnica da IA.
2.2	Conceito de sistemas Especialistas
Segundo CARRICO et al. (1989), sistemas especialistas - SE usam símbolos para representar conceitos, que são manipulados usando diferentes técnicas. Esta abordagem enfatiza a interpretação de dados e está inserida na linha de pesquisa simbólica dentro do contexto da IA.
Classicamente, existem duas linhas principais de pesquisa para a construção de sistemas inteligentes: conexionista e simbólica.
A linha conexionista visa a modelagem da inteligência humana através da simulação dos componentes do cérebro, isto é, de seus neurônios e suas interligações (BITTENCOURT, 1998). Esta linha de pesquisa deu origem à área de redes neurais artificiais.
A linha simbólica segue a tradição lógica e teve em McCarthy e Newell seus principais defensores. Segundo BITTENCOURT (1998), suas principais áreas de pesquisa atualmente são: sistemas especialistas, aprendizagem, representação de conhecimento, aquisição de conhecimento, tratamento de informação imperfeita, inteligência artificial distribuída, modelagem cognitiva, linguagem natural, interfaces inteligentes, entre outras.
Em função do sucesso dos sistemas especialistas, a partir da década de setenta, a manipulação de fatos sobre um domínio restrito ficou estabelecida como o paradigma para a construção de sistemas inteligentes do tipo simbólico.
O ramo de sistemas especialistas é uma solução aproximada muito bem sucedida para o clássico problema de programar inteligência. O Professor Edward Feigenbaum da Universidade de Stanford, citado por GIARRATANO e RILEY (1994), um pioneiro na tecnologia de sistemas especialistas, definiu um sistema especialista como:
“...um programa computacional inteligente que utiliza conhecimento e procedimentos de inferência para resolver problemas com grau de dificuldade suficiente para requerer significativa especialidade humana em sua solução. ”
das pessoas. Um especialista pode resolver problemas que a maioria das pessoas não pode resolver, ou ele os resolve de maneira mais eficiente (GIARRATANO e RILEY, 1994).
A principal diferença entre sistemas especialistas e outras ciências computacionais está na forma de processar os dados. Programas computacionais tradicionais focam a manipulação de dados numéricos, através de procedimentos que podem ser reproduzidos por métodos algorítmicos. Sistemas especialistas centram-se na interpretação dos dados e suas relações simbólicas, buscando emular o raciocínio humano. Sua principal característica está no uso extensivo do conhecimento especializado, que nem sempre é preciso, e é de difícil representação. Este conhecimento especializado é considerado de natureza heurística.
RICH e KNIGHT (1994) definem heurística como uma técnica que melhora a eficiência de um processo de busca, possivelmente sacrificando pretensões de completeza. Ela é válida no sentido de que aponta para direções geralmente interessantes, mas é imprópria no sentido de que pode deixar de fora pontos de interesse para determinados indivíduos.
A heurística consiste em regras práticas, ou conhecimento empírico, ganhos com a experiência, e oferece atalhos na resolução de problemas. Em alguns casos, mesmo que se conheça uma solução exata, pode ser inviável aplicá-la por limitações de custo e tempo. Em muitas áreas, como medicina e engenharia, a heurística é essencial para a solução de certos tipos de problemas.
2.3	Características de Sistemas Especialistas
Sistemas especialistas funcionam muito bem para campos de atuação restritos. Esta eficiência é comprovada pelas diversas aplicações destes sistemas na solução de problemas específicos nas áreas de economia, medicina, ciência e engenharia, assim como pelas publicações existentes a respeito do assunto (GIARRATANO e RILEY, 1994).
Esses sistemas derivam sua potencialidade de uma grande quantidade de conhecimento específico do domínio, e não de uma única técnica poderosa (RICH e KNIGHT, 1994).
Dentre os tipos de aplicação de sistemas especialistas pode-se destacar problemas de configuração, diagnóstico, instrução, interpretação, monitoramento, planejamento, prognóstico e controle.
•	Domínio de conhecimento do especialista - é o conhecimento do especialista humano sobre a solução de um problema específico;
•	Domínio de conhecimento do sistema especialista - é o conhecimento armazenado no sistema especialista sobre a solução do problema;
A Figura 2.1 apresenta uma proposta de como os domínios de conhecimento do sistema e do especialista relacionam-se entre si, e com o domínio do problema, no contexto da aplicação de um sistema especialista.
Figura 2.1 - Relação entre domínio do conhecimento e domínio do problema em um SE
Conforme mostrado na figura, o domínio do conhecimento, tanto do especialista como do sistema, encontra-se inteiramente incluído no domínio do problema. O domínio do problema representa todo o conhecimento, explícito ou implícito, relacionado a um problema. O sistema geralmente não irá possuir conhecimento fora deste domínio. A parcela do domínio do problema que não está contida no domínio do conhecimento simboliza uma área na qual ainda não existe conhecimento sobre o problema.
especialista e o domínio de conhecimento do sistema representa a parcela do conhecimento que é equivalente para ambos.
Existe uma parte do conhecimento do especialista que, devido a dificuldades no processo de aquisição de conhecimento, não pode ser representada em um sistema especialista. Isto acontece porque nem sempre o especialista é capaz de explicar todo o seu conhecimento. Este conhecimento, em geral, é de natureza indutiva, o qual o especialista aplica na solução de problemas sem ter consciência disso. Se for necessário representar este tipo de conhecimento, recomenda-se o uso de uma técnica de aquisição automática, melhor descrita no item sobre aquisição de conhecimento.
Da mesma forma, existe uma parcela do conhecimento do sistema especialista que não corresponde ao conhecimento do especialista. Este conhecimento é proveniente de outros especialistas ou do próprio engenheiro de conhecimento, e, embora não seja necessariamente de natureza heurística, completa o conhecimento do especialista para alcançar a solução desejada.
Segundo GIARRATANO e RILEY (1994), são características desejáveis para um sistema especialista:
•	Alta qualidade nas respostas - ser capaz de responder com nível de competência igual ou melhor que um especialista na área.
•	Boa confiabilidade - ser confiável e não suscetível a panes, caso contrário não será usado.
•	Tempo de resposta adequado - fornecer respostas em um tempo aceitável. As limitações de tempo para a performance de um sistema especialista devem ser especialmente severas no caso de aplicações em tempo-real.
•	Compreensível - ser capaz de explicar seu raciocínio durante a execução para que seja compreensível, da mesma forma que um especialista humano pode explicar suas respostas.
•	Flexibilidade - Por causa da grande quantidade de conhecimento que um sistema especialista pode conter, é importante ter um mecanismo eficiente de adição, modificação, e retirada de conhecimento. Uma razão para a popularidade de sistemas baseados em conhecimento é a modularidade das regras.
2.4	Estrutura de um Sistema Especialista
DURKIN (1994) descreve o processo pelo qual um especialista humano consegue inferir soluções para um problema. Ao deparar-se com o problema, o especialista primeiramente obtém fatos sobre a situação e os armazena na sua memória de curto prazo. Depois, raciocina, combinando fatos da memória de curto prazo com conhecimento da memória de longo prazo.
Na memória de longo prazo do especialista fica armazenado o conhecimento que pode ser descrito na forma de regras contendo a estrutura SE ENTÃO. A memória de curto prazo é usada para o armazenamento temporário de conhecimento durante a solução de um problema. Segundo GIARRATANO e RILEY (1994), embora a memória de longo prazo possa conter centenas de regras ou mais, a capacidade da memória de trabalho de um especialista é surpreendentemente pequena - 4 a 7 regras.
Sistemas especialistas possuem conhecimento estruturado sobre uma determinada especialidade. Eles são capazes de resolver problemas dentro de seu domínio através do uso de conhecimento derivado de especialistas na área (CARRICO et al., 1989).
Em seu domínio de conhecimento um sistema especialista realiza inferências para a solução de um problema da mesma maneira que um especialista humano o faria. Para isso, um sistema especialista tem uma estrutura semelhante à que permite ao especialista humano raciocinar com o conhecimento e chegar a uma determinada conclusão.
A aplicação de Sistemas Especialistas é muito vasta, de forma que estes possuem fundamentalmente finalidades bastante variadas. Para a construção destes sistemas existem diversas ferramentas e técnicas, tanto computacionais quanto conceituais. No entanto, Sistemas Especialistas possuem uma estrutura básica cujos elementos integrantes são comuns a todos.
GIARRATANO e RILEY (1994) apresentam a Figura 2.2 para ilustrar o conceito básico de sistemas especialistas. O usuário fornece fatos, ou outras informações, ao sistema especialista e recebe conselhos ou respostas especializadas.
Figura 2.2 - Estrutura básica de um Sistema Especialista (GIARRATANO, 1993, p.2)
Internamente, o sistema especialista consiste de dois componentes principais: base de conhecimento e máquina de inferência. A base de conhecimento contém o conhecimento com o qual a máquina de inferência deriva conclusões. Estas conclusões são a resposta do sistema especialista às solicitações do usuário.
DURKIN (1994) também afirma que um sistema especialista é formado por dois módulos principais: conhecimento e processo de inferência. Segundo ele, o conhecimento é dividido em memória de trabalho e base de conhecimento. O processo de inferência caracteriza a máquina de inferência nestes sistemas.
A partir destas considerações, define-se a estrutura geral de um sistema especialista composta por três elementos fundamentais, descritos a seguir:
Base de conhecimento: corresponde à memória de longo prazo do sistema. Ela contém todo o conhecimento relevante para resolver o problema, proveniente de diversas fontes e codificado no sistema de maneira inteligível. Este conhecimento é predominantemente de natureza heurística, e, normalmente, é codificado na forma de um conjunto de regras. Cada regra consiste em um lado esquerdo (premissas), que determina a aplicabilidade da regra, e um lado direito (ações), que descreve a operação a ser efetuada se a regra for aplicada. O conhecimento pode ainda ser representado na forma de conceitos e relacionamentos.
Memória operacional: funciona como a memória de curto prazo do sistema. Contem dados acumulados sobre o problema considerado. Refere-se a uma parte da memória corrente do sistema conhecida como fatos. Os fatos funcionam como uma memória auxiliar na inferência dos resultados. Eles têm a função de representar o problema e as conclusões intermediárias inferidas pelo sistema. Os fatos são constantemente confrontados com a base de conhecimento em busca de informações adicionais ou soluções para o problema.
Embora mais comumente representadas na forma de fatos, a informações da memória operacional podem ser estruturadas em qualquer modo que seja apropriado.
regra tem maior prioridade. A regra com maior prioridade é executada. Através deste processo são derivados conclusões e dados adicionais sobre o problema.
A máquina de inferência possui um elemento chamado Agenda, que representa uma lista priorizada de regras ativadas pela máquina de inferência. A agenda funciona como uma memória de curto prazo auxiliar, para solucionar os conflitos que surgirem quando várias regras puderem ser aplicadas ao mesmo tempo. As regras na agenda são executadas de acordo com a prioridade especificada pela estratégia de controle, implementada na máquina de inferência.
Um outro componente muito importante de sistemas especialistas é a interface com o usuário. Segundo GONZALEZ e DANKEL (1993), a interface com o usuário serve para fornecer um meio amigável de comunicação com o programa inteligente. Ela faz isto através do uso de menus, linguagem natural e visualização gráfica. Esta interface pode ser utilizada para os seguintes fins:
•	possibilitar ao sistema fazer perguntas ao usuário sobre o problema sendo considerado;
•	fornecer explicações sobre o porque de o sistema estar fazendo determinadas perguntas;
•	visualizar os resultados obtidos;
•	fornecer saída gráfica para os resultados obtidos;
•	permitir ao usuário gravar ou imprimir resultados.
Em vista dos conceitos apresentados, a Figura 2.3 apresenta uma proposta para representar a estrutura mais detalhada de um sistema especialista. Este diagrama é resultado da comparação de gráficos e informações sobre o assunto obtidos de diversos autores, tais como GIARRATANO (1994), GONZALEZ (1993), DURKIN (1994), ALVEZ (2001) e VINADÉ (2003).
Figura 2.3 - Estrutura de um sistema especialista.
Adicionalmente, um sistema especialista pode apresentar outras habilidades que o tornam mais eficiente nas aplicações do dia a dia, as quais são: habilidade de explicação e habilidade de aquisição de conhecimento.
A habilidade de explicação é uma parte integral de sistemas especialistas sofisticados. A elaboração de facilidade de explicação permite ao usuário explorar múltiplas linhas de raciocínio do tipo “what if...”, denominado raciocínio hipotético.
A habilidade de aquisição de conhecimento permite ao sistema aprender regras através de exemplos, mas é aplicável em casos bastante particulares. Algumas ferramentas de sistemas especialistas podem aprender por indução de regras através de exemplos e gerar regras automaticamente (GIARRATANO e RILEY, 1994). Os exemplos são do tipo em forma de tabela ou lista, mais adequados para árvores de decisão. Regras genéricas construídas por um engenheiro de conhecimento podem ser muito mais complexas do que regras simples geradas por indução.
2.5	Engenharia de conhecimento
Diferentemente de programas computacionais comuns, sistemas especialistas utilizam extensivamente conhecimento especializado para resolver problemas ao nível de especialistas humanos, os quais não possuem solução algorítmica.
Um sistema especialista clássico contém conhecimento não documentado que deve ser extraído de um especialista através de extensivas entrevistas com um Engenheiro de Conhecimento - EC, por um período prolongado (GIARRATANO e RILEY, 1994).
Em geral, um sistema especialista é construído com a ajuda de um ou mais especialistas, que precisam estar dispostos a despender muitos esforços para transferir seu conhecimento ao sistema (RICH e KNIGHT, 1994).
O processo de construção de um sistema especialista é denominado Engenharia de Conhecimento. Refere-se ao processo de adquirir conhecimento de um especialista humano, ou outra fonte, e codificá-lo na base de conhecimento, na forma computacional mais adequada. A engenharia de conhecimento pode ser subdividida nas seguintes fases:
•	Aquisição de conhecimento;
•	Representação do conhecimento;
•	Implementação;
•	Verificação e validação.
Este processo é iterativo e se repete até que a performance do sistema seja considerada satisfatória pelo especialista. A repetição do processo caracteriza um modelo de desenvolvimento em ciclos, denominado “desenvolvimento incremental”. Tal abordagem, amplamente reconhecida como a mais adequada para elaborar sistemas especialistas de grande porte, evita que a equipe de desenvolvimento falhe em satisfazer as reais necessidades do cliente (SILVA, 1998).
A engenharia de conhecimento envolve a representação de um conhecimento impreciso e, geralmente, restrito a poucos especialistas, que, via de regra, não conseguem explicitá-lo de maneira clara. O maior benefício da engenharia de conhecimento está justamente na ação de tornar o conhecimento explícito, proporcionando uma separação clara entre o conhecimento e os procedimentos internos do programa.
2.6	Aquisição de Conhecimento
O grau de eficiência de um sistema especialista depende da quantidade de conhecimento codificada em sua base de conhecimento. Este conhecimento pode ser proveniente de
especialistas humanos ou de fontes bibliográficas, como livros, catálogos e outras publicações técnicas.
Existem muito sistemas especialistas de pequeno porte, cujo conhecimento é obtido exclusivamente de material bibliográfico. Eles operam ao nível de um especialista humano, mas são desenvolvidos para tirar proveito desta tecnologia no desempenho de tarefas bastante específicas e intensivas.
A operação e a manutenção de redes de distribuição de gás natural caracterizam-se por serem atividades recentes e de caráter prático. As informações sobre este tema podem ser encontradas em publicações internacionais, material técnico referente aos equipamentos que compõem a rede, e também nas empresas do ramo de gás natural, através de relatórios internos e pessoal especializado.
No presente trabalho, as informações necessárias foram fornecidas pelos especialistas da SCGÁS. Para isto, foi fundamental a interação do engenheiro do projeto junto à empresa. Neste sentido, a disponibilidade e experiência da equipe de especialistas da empresa foi um elemento vital para a adequada elaboração do sistema.
Sistemas especialistas clássicos incorporam conhecimento não documentado, que precisa ser transferido da mente dos especialistas para uma representação computacional. Este processo, denominado aquisição de conhecimento, representa uma etapa bastante detalhada e demorada do desenvolvimento, pois o especialista nunca fornece de pronto o conhecimento correto ou completo.
Na etapa de aquisição, tipicamente, um engenheiro de conhecimento entrevista um especialista no domínio da aplicação para elucidar seu conhecimento, que é então traduzido para regras. Depois que o sistema inicial estiver pronto, ele precisa ser iterativamente refinado, até aproximar-se do nível de desempenho de um especialista (RICH e KNIGHT, 1994).
2.6.1	Entrevistas com os especialistas
maneira eficiente. Um cuidado que deve ser tomado durante as entrevistas é manter o especialista focado no problema em questão.
As entrevistas, para aquisição do conhecimento, geralmente são conduzidas na forma “um a um”. Isto significa que o engenheiro de conhecimento e um especialista encontram-se e interagem de uma forma improvisada. Todos os outros métodos de entrevista são variações desta técnica. Idealmente, este processo consiste em uma série de sessões de entrevista, cada uma com um objetivo específico. GONZALEZ e DANKEL (1993) sugerem separar as seções de entrevista em duas categorias principais: aquisição de conhecimento geral e aquisição de conhecimento específico.
Durante a etapa de entrevistas para aquisição de conhecimento geral a respeito do problema, o engenheiro de conhecimento busca aprender princípios gerais sobre o domínio do especialista. O conhecimento adquirido, embora importante e instrutivo, provavelmente não irá ser explicitamente codificado na base de conhecimento, visto que é usado somente para se obter uma compreensão básica do domínio. Este conhecimento é necessário para entender e organizar o conhecimento específico, a ser obtido nas sessões seguintes.
A segunda categoria de sessões de entrevista consiste em adquirir conhecimento específico para a solução do problema. Nesta fase, o engenheiro de conhecimento busca compreender os detalhes do processo de solução adotado pelo especialista, identificando as informações necessárias e o conhecimento utilizado para se chegar a uma conclusão. É este conhecimento que precisa ser representado na base de conhecimento.
No caso da SCGÁS, a aquisição de conhecimento foi feita por meio de entrevistas, realizadas com o pessoal técnico da empresa, e também através da elaboração de questionários, direcionados para as questões relevantes ao problema.
As informações obtidas dos especialistas da SCGÁS, na fase de aquisição de conhecimento, estão descritas no capítulo 3. Estas informações referem-se ao domínio de redes de distribuição de gás natural, aspectos de sua operação e manutenção de equipamentos em estações.
2.7	Técnicas de representação de conhecimento
Segundo WATERMAN (1986), existe um determinado número de técnicas de representação de conhecimento, cada qual podendo ser utilizada separadamente ou em conjunto com as outras na construção do sistema especialista. Cada técnica proporciona ao programa alguns benefícios, como torná-lo mais eficiente, de fácil compreensão ou de fácil modificação. Dentre as diversas técnicas existentes, considera-se mais usuais as seguintes:
•	regras;
•	redes semânticas;
•	objetos.
As técnicas para a representação da rede de distribuição de gás e do conhecimento de especialistas, adoradas no sistema SEGRED-SCGAS, são apresentadas no capítulo 4.
2.7.1	Regras
A maneira convencional de representar o conhecimento do domínio da aplicação nos sistemas especialistas é como um conjunto de regras. A representação de conhecimento através de regras centra-se no uso do formato “SE condição ENTÃO ação”.
Regras são um importante paradigma de representação de conhecimento. Proporcionam uma maneira natural de descrever processos. Um conjunto de regras pode especificar como o programa deve reagir à mudança de dados, sem requerer detalhado conhecimento de avanço sobre o fluxo de controle.
Como exemplo, consideremos o problema de decidir pela substituição de um elemento filtrante em uma estação da rede de distribuição de gás. As regras são construídas no formato a seguir:
Regra 1:
SE (queda de pressão no filtro é alta)
ENTÃO (substituir elemento filtrante)
Regra 2:
SE (queda de pressão no filtro é normal)
ENTÃO (manter o elemento filtrante)
Cada regra é identificada por um nome. Seguindo o nome está o elemento SE. A seção entre o SE e o ENTÃO da regra é chamada “premissa da regra”. A condição individual “queda
de pressão no filtro é alta” é chamada de elemento condicional da regra. A seção após o ENTÃO é denomimada “ações da regra”.
O sistema vai executar as ações à direita da regra, se as condições à esquerda forem satisfeitas. Se um fato “queda de pressão no filtro é alta” existe, a regra é satisfeita e desempenha a ação “substituir elemento filtrante”.
O uso de regras traz algumas vantagens, quais sejam: modularidade do sistema, uniformidade do conhecimento e naturalidade da linguagem. Existem também desvantagens relacionadas ao uso de regras, dentre as quais pode-se citar: encadeamento infinito, adicionamento de conhecimento contraditório, ineficiência e opacidade.
Regras podem estar acopladas a um sistema de classes, que define os objetos que ocorrem nas regras (RICH e KNIGHT, 1994).
2.7.2	Redes Semânticas
Rede semântica é um termo utilizado para descrever uma representação de conhecimento baseado em uma estrutura de rede. Foram desenvolvidas inicialmente como um modelo psicológico da memória humana, mas são agora mais aplicadas na IA.
Segundo STILLINGS et al. (1987, citado por GIARRATANO e RILEY, (1994)), redes semânticas são uma técnica de representação para informações proposicionais. Uma proposição é uma afirmação que pode ser verdadeira ou falsa, como “todos os filtros são equipamentos” e “uma estação contem equipamentos”. Proposições são uma forma de conhecimento declarativo porque elas estabelecem fatos.
A estrutura de uma rede semântica é mostrada graficamente em termos de nós conectados através de arcos. Os nós servem para representar objetos, conceitos ou eventos. Os arcos conectam os nós representando relações ou associações existentes entre os conceitos.
As relações são de fundamental importância nas redes semânticas porque elas fornecem a estrutura básica para a organização do conhecimento. Os arcos normalmente são rotulados por termos como “é-um” ou “é-parte-de” para descrever respectivamente uma relação generalização-especificação ou todo-parte. Sem estas relações o conhecimento é simplesmente uma lista de fatos não relacionados.
A Figura 2.4 mostra um exemplo de rede semântica, aplicada ao problema de redes de gás, contendo objetos da rede e relações do tipo “é-um” e “é-parte-de”.
Figura 2.4 - Exemplo de rede semântica com relações “é-um” e “é-parte-de”
Como qualquer técnica de representação de conhecimento, redes semânticas possuem vantagens e desvantagens. Como vantagens pode-se citar informações explícitas e sucintas e reduzido tempo de procura. Como desvantagens de seu uso pode-se citar ausência de padrões de interpretação, inferências inválidas e explosão combinatória. Para representar conhecimento definitivo através de redes semânticas, os nomes de nós e conexões devem ser rigorosamente definidos.
2.7.3	Orientação por objetos
O conceito de orientação por objetos nasceu das idéias apresentadas por MINSKY (1974), no artigo A framework to represent knowledge. Neste artigo são propostas estruturas denominadas quadros frames), que, através de um conjunto de atributos e valores, visam representar o estado de uma entidade no instante considerado.
Propostos como um método para entender a visão, linguagem natural e outras áreas da AI, frames fornecem uma estrutura conveniente para representar objetos que são típicos para uma dada situação. Enquanto as redes semânticas são basicamente uma representação bidimensional do conhecimento, frames adicionam uma terceira dimensão, permitindo que nós tenham estruturas. Estas estruturas podem ser simples valores ou outros frames.
A representação orientada por objetos tem algumas características comuns em relação a redes semânticas e frames. Destacam-se, entre essas características, as propriedades de herança e encapsulamento. Há, na verdade, uma grande proximidade entre as representações por frames e orientada por objetos.
Há situações que requerem a descrição do estado de uma entidade por meio de fatos. Estes fatos são declarações de um valor para um atributo particular de um objeto. DURKIN (1994) afirma que este tipo de declaração divide-se em três partes distintas: objeto, atributo e valor.
Da mesma forma que frames, um objeto define-se como um conjunto de informações representando uma entidade do mundo real, incluindo uma descrição de como estas
informações são manipuladas. Por exemplo, considerando o problema de rede de gás, focou-se nas entidades que compõem a rede, como tubos, estações e equipamentos de estações. Num sistema orientado por objetos, cada um desses itens seria representado por uma classe de objetos. Os tubos, estações e equipamentos específicos seriam definidos por instâncias de cada uma das classes. Os métodos, referenciados por mensagens, manipulariam estas instâncias para fornecer ou derivar dados específicos.
Ainda no contexto de operação de redes de gás, a orientação por objetos permite representar eventos, como falhas ou problemas na rede, através de instâncias de classes específicas. É o caso, no presente trabalho, da classe ALARME, criada para organizar os eventos ocorridos na rede. O Apêndice B apresenta o diagrama de classes do sistema SEGRED-SCGAS 1.3, desenvolvido no presente trabalho. Neste diagrama pode-se observar os elementos e eventos modelados na rede de distribuição de gás.
A orientação por objetos flexibiliza a fronteira entre o código e os dados, ao invés de separá-los em duas estruturas complexas. Embora esta aproximação pareça não natural, atualmente ela melhor corresponde à nossa visão de entidades dentro do mundo real e proporciona uma base melhor para o desenvolvimento de softwares.
Segundo GONZALEZ e DANKEL (1993), vários princípios da orientação por objetos a tornam eficiente para representar conhecimento: abstração, encapsulamento, herança e polimorfismo.
2.8	Formas de Inferência
O termo inferência é geralmente usado para sistemas computacionais, tais como sistemas especialistas. Raciocínio é empregado para designar o pensamento humano.
Inferência, analogamente ao raciocínio, pode ser definida como o processo de obtenção de uma conclusão a partir de uma premissa. Em sistemas especialistas, este processo consiste em partir de um conjunto de informações e, através de um encadeamento de regras, chegar à uma conclusão.
Encadeamento reverso: selecionar uma possível conclusão (hipótese) e tentar provar sua validade, procurando por evidências (fatos) que a confirmem.
2.8.1	Encadeamento direto
Neste tipo de inferência, as conclusões são geradas a partir de um conjunto de fatos, conhecidos antes da solução do problema. O sistema obtém novos fatos usando regras cujas premissas combinem com os fatos conhecidos. O processo continua até que o objetivo seja atingido, ou até que não existam mais regras cujas premissas combinem com os novos fatos que se apresentam (DURKIN, 1994).
Segundo GONZALEZ e DANKEL (1993), esta abordagem faz sentido sempre que pouca informação sobre o problema é requerida, e existem muitas conclusões possíveis a partir destas informações. As aplicações mais usuais para esta técnica são as atividades que envolvam síntese, tais como projeto e planejamento, e também para monitoramento e controle.
Como exemplo do raciocínio usado no encadeamento direto, cita-se uma situação representada no presente sistema especialista: se a pressão do gás, na tubulação a montante de uma estação de redução de pressão, estiver abaixo da faixa operacional das válvulas reguladoras desta estação, estas válvulas não irão operar corretamente, bloqueando a passagem de gás.
2.8.2	Encadeamento reverso
Embora ambas as formas de encadeamento envolvam as tarefas de examinar e aplicar regras, o encadeamento reverso consiste num método de inferência oposto ao encadeamento direto. Este método envolve raciocinar a partir de uma hipótese, ou uma conclusão potencial, em direção aos fatos que suportem esta hipótese. Tipicamente, o processo inicia com uma conclusão desejada, e busca por fatos que confirmem, ou quantifiquem esta conclusão.
Uma hipótese pode também ser entendida como um fato, cuja veracidade precisa ser estabelecida. Neste caso considera-se a hipótese como uma meta a ser provada. Partindo-se deste princípio, uma outra maneira de descrever o encadeamento reverso é em termos de uma meta que pode ser concluída através da verificação de submetas (GIARRATANO e RILEY, 1994).
O encadeamento reverso é mais adequado para aplicações em que existe uma grande quantidade de possíveis dados de entrada, mas somente uma parte deles é relevante, e, ao mesmo, tempo há um número pequeno de possíveis conclusões. O sistema especialista solicita
informações somente quando necessário. Ao encontrar uma resposta, o sistema cessa a execução da inferência, ou parte para a satisfação de novas metas.
GONZALEZ e DANKEL (1993) citam o diagnóstico médico, como um o exemplo de aplicação do encadeamento reverso. O paciente informa somente os seus sintomas anormais, ao invés de fornecer todo tipo de informação que implica no seu estado de saúde. Um bom médico determina um possível diagnóstico com base nos limitados dados iniciais, fornecidos pelo paciente, e tenta provar sua hipótese fazendo novas perguntas.
Um exemplo clássico deste sistema especialista para diagnóstico médico é o MYCIN (BUCHANAN e SHORTLIFFE, 1984). O MYCIN usa suas regras para raciocinar de frente para trás, ou seja, ele parte da suposição de uma enfermidade, apresentada pelo paciente, em direção às evidências clínicas que a comprovem. Sempre que uma premissa, em uma regra, refere-se a uma evidência clínica, o MYCIN procura confirmar esta evidência. Caso a informação não esteja disponível, ele a solicita ao usuário.
A Tabela 2.1, apresentada por GIARRATANO e RILEY (1994), mostra as principais características destes dois métodos de inferência.
Tabela 2.1 - Características dos métodos de inferência (GIARRATANO, 1994, p.160).
	ENCADEAMENTO DIRETO	ENCADEAMENTO REVERSO
Aplicação	Planejamento, projeto, monitoramento, controle, etc.	Diagnóstico
Linha temporal	Presente para o futuro	Presente para o passado
Sentido de avaliação das regras	LHS1 para RHS2	RHS2 para LHS1
Tipo de orientação	Por dados	Por metas
Sentido de encadeamento	Caminha para frente para achar as soluções que originam-se dos fatos.	Caminha para trás para achar fatos que confirmem a hipótese.
Método de varredura usual	Breadth-first	Depth-first
Determinação de busca	Premissas determinam a busca	Conseqüências determinam a busca
Explicação dos resultados	Dificuldade de explicação	F acilidade de explicação
1.	Left Hand Side: premissa da regra;
2.	Right Hand Side: ações da regra;
2.9	Ferramentas de implementação
A implementação do sistema especialista consiste na elaboração do seu código fonte. Esta tarefa é realizada em ciclos, de maneira iterativa com as fases de aquisição e validação do conhecimento, de acordo com o modelo de desenvolvimento incremental. É durante a implementação que o engenheiro traduz, na forma computacional, toda a base de conhecimento adquirida por meio de entrevistas com os especialistas humanos.
Um ponto fundamental para a implementação do sistema é a escolha da ferramenta a ser utilizada. A escolha da ferramenta irá determinar a facilidade de implementação das funções desejadas, assim como o tempo necessário para isto.
Programas convencionais são usados para resolver muitos tipos de problemas. Geralmente, esses problemas têm soluções algorítmicas que são tratadas de maneira muito eficiente por linguagens de programação como FORTRAN, Pascal, Ada, e assim por diante. Em contraste, sistemas especialistas são basicamente desenvolvidos para o raciocínio simbólico.
Existem linguagens específicas para implementação de sistemas especialistas, denominados shells. Estas ferramentas incluem uma máquina de inferência, e são desenvolvidas para certos tipos de aplicação, pois precisam conter recursos específicos para a técnica de representação de conhecimento adotada. A idéia básica no desenvolvimento de um shell é fornecer um ambiente onde o usuário (engenheiro de conhecimento) precisa apenas fornecer a base de conhecimento.
Ambientes para implementação de sistemas especialistas surgiram a partir do desenvolvimento do sistema MYCIN (BUCHANAN e SHORTLIFFE, 1984). Este sistema separou explicitamente a base de conhecimento da máquina de inferência, comprovando que o núcleo de um sistema especialista poderia ser reusado. Isto é, um novo sistema especialista poderia ser construído muito mais rapidamente por meio da substituição do conhecimento sobre o domínio. A partir da remoção do conhecimento médico de MYCIN, criou-se o shell denominado EMYCIN (Essential or Empty MYCIN).
especialistas. Isto não significa que não seja possível construir sistemas especialistas em LISP e PROLOG. Na verdade, muitos sistemas especialistas foram desenvolvidos com essas linguagens. No entanto, o uso de shells para construir sistemas especialistas evita o trabalho de desenvolver a máquina de inferência a cada nova aplicação.
A escolha da ferramenta de implementação, feita neste trabalho, é descrita no capítulo 4. Aspectos relativos à implementação do sistema são descritos no capítulo 5.
2.10	Teste (V &amp;amp; V)
Sistemas especialistas são entendidos como sistemas “inteligentes”. Conclusões erradas, fornecidas pelo sistema, resultam na perda de credibilidade do sistema com o usuário, o que pode levar ao seu insucesso. Por este motivo, durante o processo de desenvolvimento do sistema, deve-se despender suficiente atenção na avaliação de suas respostas.
Uma certa quantidade de teste é feita naturalmente, como parte do processo de desenvolvimento incremental. Esta é uma característica comum a qualquer projeto de desenvolvimento de software. Apesar disso, uma avaliação formal do sistema especialista deve ser feita, para a qual, a verificação e validação fornecem o mecanismo necessário.
O principal objetivo da Verificação e Validação é garantir que o sistema especialista forneça a resposta correta na forma correta quando solicitado para resolver um problema.
2.10.1	Verificação
Um objetivo da verificação é garantir a existência de uma relação adequada entre as especificações do sistema e o que ele realmente faz. A verificação também garante que o sistema está livre de erros introduzidos pelos programadores, durante a implementação. Segundo GONZALEZ e DANKEL (1993), a verificação de sistemas especialistas é, em geral, similar à verificação de programas convencionais.
GONZALEZ e DANKEL (1993) sugerem alguns pontos para avaliar a conformidade em relação às especificações do sistema:
•	o paradigma de representação de conhecimento é adequado;
•	o método de inferência empregado é adequado;
•	o sistema é modular;
•	o sistema interage satisfatoriamente com programas externos;
•	a interface com o usuário satisfaz as especificações;
•	a explicação das conclusões é apropriada;
•	o sistema é suficientemente rápido;
O segundo objetivo da verificação é procurar por erros de semântica ou sintaxe que podem ter sido introduzidos pelo engenheiro de conhecimento no desenvolvimento da base de conhecimento. Estes erros podem afetar a completeza e consistência da base de conhecimento com respeito ao domínio. A verificação de erros de sintaxe em um sistema baseado em regras deve considerar os seguintes pontos (GONZALEZ e DANKEL, 1993):
•	Regras redundantes;
•	Regras conflitantes;
•	Regras cíclicas;
•	Premissas desnecessárias;
•	Falta de regras;
•	Regras cujas premissas nunca são satisfeitas.
A verificação de um sistema especialista deve abranger aspectos referentes tanto à máquina de inferência, quanto à base de conhecimento. No caso de utilizar um shell comercial, pressupõe-se que sua máquina de inferência já tenha sido verificada.
Um sistema especialista verificado, até onde o engenheiro de conhecimento considera o problema, representa corretamente o conhecimento extraído dos especialistas (GONZALEZ e DANKEL, 1993)
2.10.2	Validação
A validação do sistema é mais complicada do que a verificação. Ela está relacionada com a construção de um sistema fiel ao conhecimento do especialista. A validação tem o objetivo de garantir que as respostas do sistema estão corretas e que o sistema desenvolvido é o que o usuário necessita (NGUYEN et al., 1987)
Segundo GONZALEZ e DANKEL (1993), assumindo-se que a base de conhecimento tenha sido verificada, a validação garante que o conhecimento nela contido representa corretamente o domínio do problema.
GIARRATANO e RILEY (1994) sugerem algumas métricas a serem adotadas durante a validação de um sistema:
•	Saídas corretas, dadas entradas corretas;
•	Saídas completas, dadas entradas corretas;
•	Saídas consistentes para entradas repetidas;
•	Ausência de panes;
•	Interface amigável com o usuário;
•	Precisão.
Segundo O'Keefe (1987, citado por GONZALEZ e DANKEL, (1993)), muitos métodos podem ser empregados na validação de sistemas especialistas. Estes métodos não são exclusivos. Na verdade, recomenda-se aplicar vários métodos simultaneamente, para que a tarefa de validação seja detalhada e abrangente. A seguir, são descritos alguns métodos de validação:
Validação informal - consiste em reuniões, feitas com especialistas no domínio e usuários, para discutir a validade das conclusões feitas pelo sistema. Esta técnica fornece uma avaliação qualitativa da base de conhecimento, mas não pode ser considerada como a única maneira de validar um sistema especialista.
Validação por testes - casos de teste são processados pelo sistema especialista, e as respostas são comparadas com as de um especialista tentando resolver o mesmo problema. Este método representa uma alternativa mais formal e quantitativa para o método anterior.
Um problema da validação por testes é que conforme o número de regras, objetos, ou outros elementos de conhecimento aumente, o número de casos de teste necessário aumenta exponencialmente, ficando fora de controle. Nestes casos, é necessário adotar algum critério para preparar um conjunto de testes compreensível e não exaustivo.
Testes de campo - em geral, testes de campo são interessantes porque permitem observar a performance do sistema no seu ambiente de operação real. Estes testes sempre revelam erros ocultos e efeitos colaterais indesejáveis no sistema.
Entretanto, aplicar teste de campo a um protótipo inacabado representa um perigo: o sistema pode perder credibilidade antes que os usuários tenham a oportunidade de ver o sistema completo. Por este motivo, recomenda-se realizar testes de campo em uma fase adiantada do processo de validação e devem representar apenas uma parte do processo, ao invés de todo o esforço de validação (GONZALEZ e DANKEL, 1993)
2.11	Metodologia para o desenvolvimento
Sistemas especialistas, como outros tipos de software, têm o objetivo de criar soluções computacionais para problemas. Seu desenvolvimento está intimamente relacionado com a engenharia de software tradicional, embora tenham algumas características peculiares.
A engenharia de software oferece metodologias que provaram ser relativamente bem sucedidas. Segundo GONZALEZ e DANKEL (1993), um dos modelos de desenvolvimento de software mais populares é o waterfall, que é de natureza seqüencial e consiste nas etapas mostradas na Figura 2.5.
Figura 2.5 - Modelo waterfall para desenvolvimento de software
Resumidamente, pode-se descrever as etapas do modelo waterfall como a seguir:
Análise do problema - faz-se uma investigação do problema para verificar se é possível resolvê-lo computacionalmente. Os custos e benefícios do sistema proposto são determinados para saber se o seu desenvolvimento é justificável.
Especificação dos requisitos do sistema - com base na análise feita previamente, deve-se definir as características principais do sistema, tais como, objetivos, funções, futuros usuários e restrições gerais, que podem afetar o sucesso da versão final.
Teste - os testes visam garantir que o sistema implementado satisfaz os requisitos e fornece as saídas apropriadas para o problema.
Manutenção - compreende as modificações posteriores ao desenvolvimento do sistema. Inclui a correção de erros não identificados nas fases de implementação e teste, e a adição ou modificação de funções, devido a mudanças na natureza do problema.
Existem, porém, algumas diferenças entre o desenvolvimento de sistemas especialistas e engenharia de software. A maior diferença é o tipo de conhecimento a ser representado, que, no caso de sistemas especialistas, é de natureza heurística e, geralmente, indefinido. Uma segunda diferença envolve a extensão do conhecimento. Enquanto a extensão do conhecimento requerido para algoritmos tradicionais pode ser estimada, isto não se verifica para sistemas especialistas. Em geral, natureza e quantidade de conhecimento requerida para um sistema especialista não podem ser definidas nem mesmo pelo especialista. Além de dificultar a previsão dos recursos necessários para o desenvolvimento do sistema, isto dificulta uma definição razoável do projeto nas fases iniciais.
As dificuldades apresentadas podem levar o engenheiro de conhecimento a descobrir, no meio do processo de desenvolvimento, que a estrutura de representação de conhecimento utilizada é inadequada.
Para superar estes obstáculos, utiliza-se técnicas de desenvolvimento chamadas criação rápida de protótipos e desenvolvimento incremental. Embora essas técnicas não se restrinjam ao desenvolvimento de sistemas especialistas, elas se tornaram bastante populares nesta aplicação, pois auxiliam no processo de elucidar o conhecimento do especialista quando o sistema protótipo comete erros.
GONZALEZ e DANKEL (1993) definem desenvolvimento incremental como o processo interativo de aquisição, representação e confirmação de conhecimento, em uma parte limitada do domínio do problema, com o objetivo de construir gradualmente a base de conhecimento do sistema especialista.
Este modelo busca unir a sistemática do desenvolvimento de programas convencionais ao conceito de engenharia de conhecimento. Apresenta duas diferenças fundamentais em relação ao modelo waterfall: 1) propõe a criação de um protótipo inicial; 2) estabelece um ciclo de desenvolvimento para o sistema.
A criação do protótipo inicial tem por objetivo testar as definições feitas para o projeto, verificando sua validade no contexto do problema. Utilizando-se o resultado da avaliação deste protótipo, assim como o conhecimento adquirido em seu desenvolvimento, é possível identificar a necessidade de ajustes no projeto, como a ferramenta ou o paradigma de representação de conhecimento adotados. A fase de projeto fica, então, dividida em “projeto preliminar” e “projeto detalhado”. Eventuais “correções de rumo”, advindas de um entendimento inadequado do problema, podem ser feitas na fase inicial do desenvolvimento, minimizando o desperdício de esforços.
Uma vez desenvolvido o protótipo inicial da base de conhecimento, esta pode ser aperfeiçoada através de um ciclo contínuo, conhecido como desenvolvimento incremental. A aplicação do desenvolvimento incremental consiste na repetição iterativa das etapas de aquisição do conhecimento do especialista, implementação do conhecimento no sistema,
validação dos resultados com os especialistas e refinamento da implementação para corrigir problemas ocultos.
No presente trabalho, aplicou-se a metodologia de desenvolvimento proposta por GONZALEZ e DANKEL. As fases de desenvolvimento do sistema especialista buscaram cumprir, da melhor maneira possível, as etapas mostradas na Figura 2.6. A descrição destas etapas é feita no capítulo 4, onde se apresenta detalhadamente as várias fases de desenvolvimento do sistema SEGRED-SCGAS.
Informações referentes à aquisição de conhecimento são apresentadas no capítulo 3. Aspectos relativos à manutenção do sistema implementado não serão abordados neste trabalho.
2.12	Vantagens e Desvantagens de Sistemas Especialistas
A aplicação de técnicas de sistemas especialistas é muito útil na automatização de tarefas não procedurais. Dentre as muitas áreas em que estes sistemas podem colaborar na tomada de decisão, pode-se destacar treinamento, monitoramento on-line, planejamento, engenharia de software, diagnóstico, melhor aproveitamento de recursos humanos etc. Sistemas baseados em conhecimento podem melhorar a produtividade e a qualidade nas tarefas assistidas por computador, evitando a sobrecarga de especialistas humanos (CARRICO et al., 1989).
Abaixo estão listadas algumas das vantagens do uso da técnica de sistemas especialistas, citadas por diversos autores desta área:
•	Melhor acesso ao conhecimento - a reprodução do conhecimento de especialistas permite uma maior disponibilidade de sua especialidade. O conhecimento especializado torna-se disponível em qualquer computador, a qualquer hora do dia ou da noite.
•	Preservação do conhecimento - ao contrário de especialistas humanos, que podem se ausentar ou se demitir, sistemas especialistas duram indefinidamente. Este aspecto é especialmente válido em situações onde a perda de um especialista pode gerar prejuízo a uma instituição.
•	Múltipla especialidade - O conhecimento de vários especialistas pode ser disponibilizado para trabalhar simultaneamente.
•	Aumento de confiabilidade - Sistemas especialistas aumentam a confiança de que uma decisão feita é acertada, pois fornecem uma segunda opinião a um especialista, ou tiram a dúvida em caso de discordância entre vários especialistas.
•	Solução de problemas envolvendo dados incompletos - devido à sua natureza heurística, sistemas especialistas são capazes de resolver problemas onde não existem dados completos ou exatos.
•	Fácil modificação - o conceito de separação do conhecimento da máquina de inferência facilita o processo de modificar o conhecimento. Isto permite maior flexibilidade no uso do sistema especialista, quando comparado com um programa convencional.
•	Explicação da solução - sistemas especialistas podem rastrear o conhecimento utilizado para gerar a solução. Assim usuários duvidosos podem requisitar do sistema explicações a respeito de como a conclusão foi tomada.
•	Respostas rápidas - Respostas rápidas são necessárias para algumas aplicações em tempo real. Um sistema especialista pode ser mais rápido e acessível do que um especialista humano, o que pode ser interessante em situações de emergência;
Além das vantagens citadas acima, existe um benefício indireto no processo de desenvolver um sistema especialista. O conhecimento de especialistas humanos precisa ser colocado de uma forma explícita para ser codificado no computador. Este processo permite examinar o conhecimento para saber se está correto, consistente e completo. O conhecimento pode, então, ser ajustado (GIARRATANO e RILEY, 1994).
A maior desvantagem relacionada a sistemas especialistas é que eles não possuem senso comum. Em geral estes sistemas possuem uma performance aceitável quando são limitados a um domínio estreito de conhecimento sobre uma questão específica.
Outra limitação prática da maioria dos sistemas especialistas hoje é a falta de conhecimento causal. Ou seja, sistemas especialistas não têm realmente um entendimento das causas e efeitos implícitos no funcionamento de um sistema físico. Em geral, representam conhecimento superficial, baseado em empirismo e heurística (GIARRATANO e RILEY, 1994)
RICH e KNIGHT (1994, p. 643) destacam alguns problemas relacionados à técnica de sistemas especialistas:
•	Dificuldade na aquisição de conhecimento - apesar do desenvolvimento de diversas ferramentas, a aquisição ainda continua sendo um dos maiores obstáculos à aplicação da tecnologia dos sistemas especialistas a novos domínios.
•	As respostas podem ser incorretas - assim como especialistas humanos, sistemas especialistas podem cometer erros.
•	Conhecimento limitado - por estarem limitados ao domínio do problema, sistemas especialistas podem fornecer respostas inconsistentes quando solicitado fora deste domínio, sendo que esta inconsistência nem sempre é facilmente reconhecível.
•	Dificuldade de representação de senso comum - algumas medidas de senso comum podem ser representadas, mas isto deve ser feito de maneira explícita.
Em resumo, sistemas especialistas fornecem uma aproximação muito boa para a solução de uma larga classe de problemas, mas cada aplicação deve ser escolhida cuidadosamente para que o uso desta tecnologia seja viável.
2.13	Aplicação de sistemas Especialistas
Apesar de suas limitações, sistemas especialistas têm sido muito bem sucedidos na solução de problemas que metodologias convencionais de programação não são capazes de resolver. A atuação destes sistemas é muito vasta, mas é na engenharia que sua aplicação demonstra grande potencialidade.
Na presente seção, procura-se apresentar algumas aplicações de sistemas especialistas. Inicialmente, porém, faz-se uma breve descrição de alguns sistemas considerados clássicos, os quais fazem parte da história da evolução do conceito de sistemas especialistas.
Com a aceitação do paradigma de solução baseada em conhecimento na década de 70, uma variedade de sistemas especialistas bem sucedidos foram criados. As aplicações foram as mais variadas, envolvendo interpretar espectrogramas de massa para identificar componentes químicos (DENDRAL), diagnosticar doenças (MYCIN), fazer prospecção de petróleo (DIPMETER) e minerais (PROSPECTOR) através de análise geológica, e configurar sistemas de computador (XCON/R1).
Sistemas de grande porte contendo milhares de regras, como o sistema XCON/R1 da Digital Equipment Corporation, continha mais conhecimento do que qualquer indivíduo especialista na área de configurar sistemas computacionais (GIARRATANO e RILEY, 1994).
2.13.1	Sistema para projeto de circuitos hidráulicos (KEOPHS)
O sistema especialista denominado Schemebuilder Expert Fluid Power Module (SILVA, 1998), foi desenvolvido como um trabalho de Doutorado. Este sistema realiza o projeto de um sistema hidráulico com base em atributos qualitativos e parâmetros operacionais definidos pelo usuário.
Inicialmente o programa solicita informações qualitativas sobre as seguintes características do sistema de atuação: tipo de movimento do atuador, modo de controle do atuador e características da carga. Em seguida são solicitadas informações quantitativas para os parâmetros operacionais, como pressão de suprimento, forças no atuador, velocidade de movimento, etc.
Com base nestas informações, o sistema apresenta várias concepções de sistema hidráulico que satisfaçam os requisitos definidos para a aplicação. Permite ainda fazer uma classificação das respostas, para identificar a alternativa mais apropriada. Estes resultados podem ser visualizados por meio de um navegador de internet.
O projeto fornece uma abordagem de engenharia simultânea ao projeto de sistemas hidráulicos.
2.13.2	Sistema para o Diagnóstico de falhas em um sistema hidráulico naval
O sistema especialista protótipo denominado SEMAN (ALVES, 2001) foi desenvolvido no Departamento de Engenharia Mecânica da UFSC, como resultado de um trabalho de Mestrado. Este sistema enfoca o diagnóstico de falhas no circuito hidráulico de sistemas de navegação de grandes embarcações.
O SEMAN inicia o processo com a identificação, por parte do usuário, de sintomas no sistema hidráulico considerado, como ruídos, alta temperatura ou ausência de movimento nos atuadores. O sistema gera, então, hipóteses de falha, para justificar os sintomas observados. A partir deste ponto, o sistema inicia a consulta ao usuário para buscar informações que confirmem suas hipóteses de falha. Como resposta, o sistema indica os componentes do circuito que podem estar com defeito, sugerindo o procedimento de manutenção adequado.
2.13.3	Sistema para recomendação de manutenção em sistemas hidráulicos.
O sistema especialista protótipo denominado RCMEX (VINADÉ, 2003), foi desenvolvido no Departamento de Engenharia Mecânica da UFSC, como resultado de um trabalho de Doutorado. Este sistema tem o propósito de recomendar manutenções preditivas, preventivas e corretivas para os componente de um sistema hidráulico regulador de velocidade para turbinas Francis de pequeno e grande porte.
A estratégia básica para alocação de tarefas de manutenção segue a filosofia de manutenção centrada na confiabilidade (MCC ou RCM)
Como entradas, o usuário seleciona o circuito de pequeno ou grande porte, escolhe o circuito de bombeamento, escolhe o circuito de atuação e define o modo de operação dos componentes.
As visualização dos resultados do sistema especialista é feita por meio de um navegador de internet.
Capítulo 3 - Redes de distribuição de gás natural
3.1	O gás natural
O Gás Natural constitui-se em uma mistura de hidrocarbonetos leves que, quando submetidos à temperatura ambiente e pressão atmosférica, permanece no estado gasoso. Alguns desses hidrocarbonetos são combustíveis e, quando queimados, liberam energia. São os chamados gases combustíveis. O gás metano (CH4), Figura 3.1, constitui-se no principal componente do gás natural.
Figura 3.1 - Molécula do gás metano
Na natureza, o gás natural é encontrado acumulado em rochas porosas no subsolo. Encontra-se freqüentemente acompanhado por petróleo, constituindo um reservatório.
Segundo OLIVEIRA (1997), O gás natural é dividido em duas categorias: gás natural associado e gás natural não-associado. Gás associado, Figura 3.2, encontra-se dissolvido no óleo ou sob forma de capa de gás no reservatório. Neste caso, a produção de gás é determinada basicamente pela produção de óleo. Gás não-associado, Figura 3.3, encontra-se,livre ou em presença de quantidades muito pequenas de óleo no reservatório. Neste caso só se justifica comercialmente produzir o gás.
No Brasil, a maioria dos poços existentes é de gás associado, existindo poucos poços com predominância de gás não-associado, como nos Estados de Alagoas e Bahia, por exemplo (OLIVEIRA, 1997).
Figura 3.2 - Gás natural associado
Figura 3.3 - Gás natural não-associado
A composição do gás natural pode variar de campo para campo, devido ao fato de ele estar associado ou não ao óleo, e também de ter sido ou não processado em unidades industriais. Ele é composto predominantemente de metano, etano, propano e, em menores proporções, de outros hidrocarbonetos de maior peso molecular. Normalmente apresenta baixos teores de elementos não combustíveis, como nitrogênio, dióxido de carbono e, ainda, água na forma de vapor.
3.2	Cadeia produtiva do gás natural
3.2.1	Fase de exploração
A exploração, primeiro elo da indústria de petróleo e gás natural, está dividida basicamente em pesquisa e perfuração. A pesquisa faz o reconhecimento e o estudo das estruturas propícias ao acúmulo de hidrocarbonetos. Uma vez identificados todos estes fatores, é feita a perfuração do poço, para comprovar a existência desses produtos em nível comercial.
O Gás Natural consumido atualmente no País provém de jazidas nacionais e também da Bolívia e Argentina.
3.2.2	Fase de produção
Ao ser produzido, o gás deve passar inicialmente por vasos separadores, que são equipamentos projetados para retirar a água, os hidrocarbonetos, que estiverem em estado líquido, e as partículas sólidas (pó, produtos de corrosão, etc.). Se estiver contaminado por compostos de enxofre, o gás é enviado para unidades de dessulfurização, onde esses contaminantes são retirados. Após essa etapa, uma parte do gás é utilizada no próprio sistema de produção, em processos conhecidos como reinjeção e gás lift, com a finalidade de aumentar a recuperação de petróleo do reservatório. O restante do gás é enviado para processamento, que é a separação de seus componentes em produtos especificados e prontos para utilização (fonte: ANP).
3.2.3	Fase de processamento
Nesta etapa, o gás segue para unidades industriais, conhecidas como UPGN (Unidades de Processamento de Gás Natural), Figura 3.4. Nestas UPGN's, ocorre a separação das frações mais leves do gás natural e obtêm-se o gás natural seco (metano - C1 e etano - C2), o Gás Liqüefeito de Petróleo - GLP (propano - C3 e butano - C4) e a gasolina natural (pentano e superiores - C5 +).
Figura 3.4 Esquema de uma unidade de processamento de gás natural - UPGN
Ao ser retirado de uma UPGN, o gás natural deve apresentar determinadas propriedades, que permitam sua utilização adequada. Estas propriedades são definidas pelo Conselho Nacional do Petróleo (CONPET, 1996). As propriedades específicas do gás fornecido pela SCGÁS estão descritas na Tabela 3.2. A Tabela 3.1 apresentam a composição média do gás natural, no caso da SCGÁS.
Tabela 3.1 - Composição típica do Gás Natural (fonte: SCGÁS)
ELEMENTOS	%
METANO	91,8
ETANO	5,58
PROPANO	0,97
I-BUTANO	0,03
N-BUTANO	0,02
PENTANO	0,1
NITROGÊNIO (N2)	1,42
DIÓXIDO DE CARBONO (CO2)	0,08
TOTAL	100
Tabela 3.2 - Propriedades típicas do Gás Natural (fonte: SCGÁS)
PROPRIEDADES	VALOR
PODER CALORÍFICO SUPERIOR (kcal/m3) DENSIDADE RELATIVA AO AR SUBSTÂNCIAS INERTES (CO2 e N2) PONTO DE ORVALHO MÁXIMO - ÁGUA (1atm) TEOR DE H2S (GÁS SULFÍDRICO), MÁXIMO TEOR DE ENXOFRE, MÁXIMO TEOR DE OXIGÊNIO, MÁXIMO TEOR DE CO2, MÁXIMO	8.000 a 12.500 0,54 a 0,82 TEOR MÁXIMO DE 4% EM VOLUME (-45°C) INFERIOR A 20mg/m3 DE GÁS INFERIOR A 80mg/m3 DE GÁS INFERIOR A 0,5% TEOR MÁXIMO DE 2% EM VOLUME
3.2.4	Fase de transporte
No estado líquido, como gás natural liquefeito - GNL, o transporte pode ser efetuado por meio de navios, barcaças ou caminhões criogênicos, à baixas temperaturas (-160°C) e pressão próxima da atmosférica, conforme Figura 3.5. Nessas condições, seu volume é reduzido cerca
de 600 vezes. Neste caso, para ser utilizado, o gás deve ser revaporizado em equipamentos
apropriados.
Figura 3.5 - Navio criogênico para o transporte de gás natural.
No estado gasoso, o transporte do gás natural é feito por meio de gasodutos ou, em casos muito específicos, em cilindros de alta pressão (como gás natural comprimido - GNC). Em ambos os casos o transporte é realizado na temperatura ambiente e a altas pressões, as quais podem chegar a 230 bar em cilindros e 120 bar em gasodutos.
Gasodutos são compostos por sistemas de compressão, redução de pressão, medição, supervisão e controle. Visam colocar o gás natural à disposição das Companhias Distribuidoras em pontos de entrega ao longo da linha de transporte, denominados "CityGates".
A Figura 3.6, obtida do site da TBG, mostra a extensão do gasoduto Bolívia-Brasil, que transporta o gás proveniente da Bolívia para o Sudeste e Sul do Brasil.
Porto Soares
SÃO PAULO
CURUTIBA
SANTA CATARINA
FLORIANÓPOLIS
RIO GRANDE DO SUL
BELO HORIZONTE
CORUMBÁ
&amp;lt;MATO GROSSO
pj. AN GRADINA
' J. ,i ARAÇATUBA
ARARAQUARA
GOIÁS
MINAS GERAIS
PARAGUAI
ASSUNÇÃO
PARANÁ
ARGENTINA
URUGUAI
llllí
GOIÂNIA
Río Grande El cero ita"
SANTA CRUZ SOLIVIA
DE LA SIERRA
Figura 3.6 - Gasoduto Bolívia-Brasil (TBG).
3.2.5	Distribuição
O gás natural pode ser comprado pelas concessionárias de distribuição estaduais e, então, vendido para os consumidores finais através dos ramais de distribuição. O gás natural pode ser utilizado de diversas formas. Desde a produção de calor e frio para o consumo industrial e residencial até a geração de eletricidade e a utilização como matéria-prima pela indústria de transformação. A chegada ao consumidor, ou distribuição, é a etapa final do processo. Nesta etapa o gás natural deverá estar atendendo às especificações exigidas para o consumo.
Para o atendimento ao consumidor são implantados, pela companhia distribuidora, uma ampla rede de gasodutos, instalada ao longo de rodovias, ruas e avenidas levando o gás natural até os locais de consumo. Além da rede de distribuição o gás pode ser distribuído na forma comprimida (como GNC - Gás Natural Comprimido) em cilindros, ou ainda, liquefeito (como GNL - Gás Natural Liquefeito) utilizando-se, neste caso, cilindros criogênicos que operam a -160°C e são transportados via caminhão, vagões e/ou barcaças.
No Brasil, o uso residencial e comercial do gás natural é quase que exclusivo para cocção de alimentos e aquecimento de água, enquanto que na área industrial ele é utilizado como combustível para fornecimento de calor, geração de eletricidade (cogeração), matéria-prima para os setores químico, petroquímico e de fertilizantes, e como redutor siderúrgico na fabricação do aço. Uma outra pequena parcela de utilização é a área de transportes, onde o gás natural vem substituindo, aos poucos, o combustível de automóveis e caminhões (BEN, 1997).
3.3	Componentes de uma rede de distribuição de gás natural
Redes de distribuição de gás natural são compostas basicamente por uma “malha” de tubos, válvulas de bloqueio e estações de controle e monitoramento do gás. Estações de controle e monitoramento dividem-se em: ERP - estações intermediárias de limitação de pressão; ERPM - estações de limitação de pressão e medição de consumo, para clientes; e EM - estações de medição de consumo, para clientes que não necessitam de limitação de pressão. Adicionalmente, apresentam um sistema para a odorização do gás e lançadores de raspadores, para a limpeza interna dos tubos.
A Figura 3.7, retirada parcialmente da norma NBR 12712 (1993), tem por objetivo apresentar os principais componentes de uma rede de distribuição de gás. Neste diagrama ilustrativo, a rede de distribuição de gás fica compreendida entre o city-gate e a estação de redução de pressão e medição (ERPM), ou medidor do consumidor.
Figura 3.7 - Sistema de transporte e distribuição de gás canalizado - NBR 12712.
As companhias de distribuição de gás são responsáveis pelos componentes da rede que vêm após o city-gate, ficando este a encargo da companhia transportadora. Um exemplo de rede de distribuição da SCGÁS é mostrado na figura contida no Anexo 1. Esta figura consiste em uma representação esquemática da rede da cidade de Joinville-SC.
Para o Estado de Santa Catarina, a pressão do gás natural no gasoduto fica na faixa de 70 bar, sendo rebaixada para 35 bar nos city-gates da rede. A rede de distribuição transporta o gás para os diversos consumidores que geralmente o recebem numa pressão de 2 bar. A diferença de pressão do city-gate para os clientes ocorre em função da perda de carga na tubulação da rede e das sucessivas reduções em estações ERP e ERPM.
A tubulação é o principal elemento de uma rede de distribuição de gás. Seu dimensionamento deve respeitar as métricas de segurança na operação e as características do escoamento, para que o gás seja entregue nas condições ideais para o cliente.
A tubulação de gás é enterrada a uma profundidade mínima de um metro a partir da sua geratriz superior, sendo totalmente revestida contra corrosão. Além do revestimento especial de polietileno nos tubos de aço, um projeto adequado de proteção catódica é implantado, de forma a garantir uma vida útil de aproximadamente cinqüenta anos para o sistema.
Válvulas de bloqueio de linha servem para interromper o fluxo de gás na tubulação, funcionando completamente abertas ou fechadas. Elas são instaladas em pontos estratégicos da rede, ou junto a estações, e podem ser manuais ou automáticas. Geralmente essas válvulas de bloqueio são do mesmo diâmetro nominal da tubulação.
Dentre as válvulas de bloqueio manual, a válvula de esfera é largamente empregada em redes de distribuição. As vantagens dessas válvulas são menor peso e tamanho, melhor vedação, maior facilidade de operação e menor perda de carga.
As estações ERP têm a função de limitar a pressão interna da tubulação, a partir do ponto onde são instaladas. Seu emprego permite subdividir a rede em trechos com diferentes faixas de pressão de trabalho. O uso de pressões mais elevadas (até 35 kgf/cm2) é interessante para trechos da rede com vazões de gás elevadas, diminuindo a perda de carga no escoamento. Em outros trechos, porém, é necessário operar com pressões menores na tubulação, devido a questões de segurança no transporte do gás. O uso de ERP's permite, também, fazer reduções progressivas na pressão do gás ao longo da rede, evitando resfriamento excessivo devido a reduções drásticas de pressão.
ERPM são estações semelhantes a ERP's, utilizadas nos pontos de entrega de gás ao cliente, onde existe a necessidade de registrar o consumo de gás. Uma ERPM consiste, basicamente, em uma ERP com um medidor de vazão, geralmente do tipo turbina. O medidor
de vazão é instalado após os tramos de redução de pressão, caracterizando uma ligação em série, e mede o somatório das vazões dos tramos. Uma ERPM deve, além de registrar o consumo de gás do cliente, garantir a pressão de fornecimento de gás dentro da faixa estabelecida em contrato.
Dada a semelhança construtiva entre estações ERP e ERPM, o estudo apresentado nas seções seguintes, a respeito das falhas e características funcionais destas, será, a título de simplificação, enfocado em uma ERPM. Estas informações estendem-se, por analogia, para as estações do tipo ERP.
As estações do tipo EM consistem apenas de um filtro e um medidor de vazão. São utilizadas para a entrega de gás a clientes especiais, como postos de gás natural veicular -GNV, os quais não necessitam reduzir a pressão da rede. No início do desenvolvimento deste trabalho, a rede de distribuição considerada não possuía estações EM instaladas. Portanto, embora consideradas no sistema, estas estações não foram estudadas em detalhes.
3.4	Estações de redução de pressão e medição
As estações de redução de pressão e medição têm a função de proteger e garantir a estabilidade do sistema. São compostas por um sub-sistema de redução de pressão e um subsistema de medição. O sub-sistema de medição contêm, basicamente um medidor de vazão. Sub-sistemas de redução de pressão contêm, convencionalmente, 2 tramos de redução de pressão paralelos, podendo, em situações especiais, conter até 4 tramos de redução. Um tramo de redução é consiste em um conjunto de tubos e equipamentos montados em série. Os equipamentos mencionados são: válvula de bloqueio manual, filtro, válvula de bloqueio automático, válvulas reguladoras de pressão e válvula de segurança. A Figura 3.8 mostra o esquema de uma típica ERPM.
Medidor de vazão
Reguladoras de pressão
Válvula de alívio
Válvula de segurança
Figura 3.8 - Estação de redução de pressão e medição - ERPM.
Os componentes que definem o princípio de funcionamento de uma estação são as válvulas. Segundo PAULETTI (2000), válvulas são dispositivos destinados a estabelecer, controlar ou interromper o fluxo do gás na estação. Compõem-se basicamente por uma carcaça e elementos móveis, os quais dependem da função desempenhada pela válvula e seu princípio de funcionamento. A carcaça é o invólucro externo da válvula e compõe-se das seguintes partes:
•	Corpo: é a parte principal da válvula, nele estão as sedes, onde se assenta a peça de fechamento, bem como as extremidades;
•	Castelo: é a parte superior da carcaça, que se desmonta para acesso ao interior da válvula.
A seguir, é feita uma descrição resumida dos principais equipamentos que compõem uma estação ERPM, com base nas informações fornecidas por PAULETTI. Estes equipamentos são identificados na Figura 3.8. A figura representa, ainda, equipamentos como manómetros e bujões de purga, os quais não serão descritos.
3.4.1	Filtro
São elementos responsáveis pela filtragem de corpos estranhos e poeira presentes na corrente de gás, e que podem ser prejudiciais ao bom funcionamento de queimadores, válvulas reguladoras de pressão, válvulas de bloqueio automático, etc. Por esta razão, os
filtros devem ser instalados a montante de todos estes elementos. Os filtros são formados por uma cápsula metálica que contém um elemento filtrante, que pode ser de tela metálica, de feltro, nylon, papel, porcelana, etc.
3.4.2	Válvula de bloqueio automático
A válvula de bloqueio automático, ou válvula de bloqueio por sobre-pressão, tem a função de bloquear o fluxo do gás, quando a pressão do sistema ultrapassar um valor pré-definido, protegendo as válvulas montadas a sua jusante. A Figura 3.9, retirada do manual da válvula de bloqueio série GIPS, do fabricante GASCAT, corresponde a um croqui de uma válvula de bloqueio automático.

Figura 3.9 - Croqui de uma válvula de bloqueio automático - Catálogo GASCAT
Segundo o catálogo do fabricante (GASCAT INDUSTRIA E COMERCIO LTDA.), esta válvula é instalada a montante do regulador de pressão, com tomada de pressão a jusante deste. Esta válvula possui um diafragma que, em uma de suas superfícies, sofre a ação da pressão proveniente de um sistema piloto, e, do lado oposto, é pressionado por uma mola, onde é feito o ajuste da pressão de acionamento. O desarme da válvula é feito somente de forma manual.
3.4.3	Válvula reguladora de pressão
porém tanto a válvula piloto quanto o regulador principal apresentam os seguintes elementos básicos:
Elemento de carga: usualmente toma a forma de uma mola reguladora.
Elemento de medição: é o diafragma da válvula. Este elemento é submetido a um balanço de forças resultante do elemento de carga e das pressões a montante e jusante do regulador, e responde mudando a posição da válvula (elemento resistivo).
Elemento resistivo: é a válvula propriamente dita, composto de sede e obturador. É controlado pelo elemento de medição (diafragma).
Segundo o catálogo do fabricante (GASCAT INDUSTRIA E COMERCIO LTDA.), o regulador piloto-operado opera pelo princípio de queda de pressão de carregamento na câmara superior do diafragma do regulador principal. O diafragma do regulador principal é fixado ao obturador e é submetido a um conjunto de forças de ambos os lados. A posição de equilíbrio é uma função da pressão de carregamento, situada na câmara superior do diafragma, ajustada pelo piloto. Através do diferencial entre a pressão de carregamento e a pressão de entrada (Pe), aumenta ou diminui a abertura da válvula.
A Figura 3.10 mostra um esquema deste regulador de pressão quando este está fechado, ou seja, não há vazão de fluido através dele.
lEntradã]
Carregamento
Regulador fechado
Restritor
Filtro polietileno
. Descarregamento
Figura 3.10 - Esquema da válvula reguladora de pressão - posição fechada.
	
	

Na ausência de vazão, a conseqüente elevação da pressão de saída transmitida através do tubo sensor (Ts) ao diafragma do piloto, provocando o fechamento do mesmo, faz com que a pressão de entrada passe à câmara superior do diafragma que, com o auxílio da mola de carregamento, moverá o diafragma contra a sede da válvula, produzindo um fechamento positivo bloqueando a passagem do gás.

Regulador em operação
Descarregamento
(Entrada]
Carregahbnto
W’ L
Restrítor t
Filtro polietileno
Figura 3.11 - Esquema da válvula reguladora de pressão. Posição de funcionamento.
Com o início do consumo, efeito inverso ao da ausência de vazão provocará a abertura da passagem do piloto, “sangrando” a pressão de carregamento sobre a câmara superior do diafragma, fazendo com que este aumente a abertura da passagem através da válvula principal.
Conforme demonstrado por KINCELER (2002), o restritor graduado montado na entrada de alimentação do piloto proporciona uma variação do diâmetro do orifício de passagem do gás, possibilitando aumentar ou diminuir a velocidade de resposta de abertura do regulador principal nestas válvulas.
controlada, deve-se colocar um manómetro do lado jusante, que indicará o nível de pressão alcançado.
3.4.4	Válvula de alívio de pressão
As válvulas de alívio, Figura 3.12, são projetadas para permitir o fluxo de gás, sempre que a pressão ao seu montante superar um valor pré-ajustado. Elas são válvulas normalmente fechadas. São usadas para reduzir temporariamente a pressão entre a válvula reguladora de pressão e as válvulas de bloqueio, evitando a sobre pressão nas válvulas de bloqueio.
Figura 3.12 - válvula de alívio - GASCAT: disponível em: http://www.gascat.com.br
3.4.5	Válvula de retenção
Estas válvulas são empregadas quando se quer impedir em determinada linha qualquer possibilidade de retorno do fluido por inversão do sentido do escoamento. Consiste, basicamente, em um orifício com uma tampa flutuante, que se abre livremente em um sentido, mas bloqueia a passagem no sentido contrário.
3.4.6	Medidor de vazão
Geralmente do tipo turbina, o medidor realiza a medição do volume do gás consumido pelo cliente. Esta medição envolve a correção simultânea dos parâmetros pressão e temperatura, além da própria composição do gás considerado. Para isso, o medidor conta com transdutores de pressão e temperatura, adaptados no seu interior, além do dispositivo de medição de volume, propriamente dito.
3.5	Falhas em redes de distribuição
Várias falhas podem ocorrer numa Rede de Distribuição de Gás Natural, necessitando de ações por parte da equipe de manutenção. Tais falhas são causadas por três fatores principais:
ajuste incorreto em válvulas, defeitos em equipamentos e problemas com os clientes. Dentre estas falhas, destacam-se as seguintes:
•	Vazamentos na tubulação da rede;
•	Entrega do gás fora dos limites de tolerância pré-definidos;
•	Interrupção no fornecimento de gás aos clientes
As maiores preocupações da equipe de operação e manutenção da rede estão relacionadas às questões de vazamentos e interrupção no fornecimento de gás aos clientes.
A questão de vazamentos de gás está ligada a rompimento de tubos ou defeitos em válvulas. Embora hajam dispositivos de proteção para a tubulação, como o sistema de proteção catódica e procedimentos de vistoria para toda a rede, existe a possibilidade de ocorrer acidentes com vazamento devido a obras, vandalismo ou falha de algum componente. A conseqüência lógica da presença de vazamentos na RDGN será o decréscimo da pressão na linha onde há o vazamento. Naturalmente esta perda de carga será função da dimensão do vazamento. Pequenos vazamentos não devem proporcionar queda relevante da pressão da linha. Para vazamentos maiores, ou rupturas da tubulação, as conseqüências serão o risco de incêndio e acidentes devido ao combustível que é jogado para a atmosfera, e também a incapacidade de atendimento aos consumidores à jusante do vazamento até que a linha seja reparada.
Atualmente, a detecção de vazamentos na rede só pode ser feita localmente através de indícios como odor característico do gás ou presença de ruído. A seguir são descritas duas alternativas possíveis para a constatação de vazamentos:
•	balanços de massa - comparar a quantidade de gás que entra na rede com a que sai. A constatação de que entra mais gás na rede do que sai, é um indício da presença de vazamentos.
•	queda de pressão excessiva - comparar os valores de pressão lida e calculada a montante de uma estação. Caso a pressão lida seja menor que a calculada, existe a possibilidade de vazamentos no ramal.
Consumo excessivo por parte de um cliente pode levar à incapacidade do ramal de suprir a vazão necessária. A RDGN foi dimensionada para suportar uma vazão bastante superior àquela verificada inicialmente, o que reduz o risco de ocorrência deste problema nos primeiros anos de operação. De qualquer forma, este problema pode ser detectado por meio da simples conferência do valor da pressão a montante de uma estação, lida em campo ou calculada através da simulação do escoamento. O recurso de simulação possibilita a detecção rápida do problema, dando mais agilidade à equipe de operação da rede para tomar as medidas necessárias para resolvê-lo, como aumentar a pressão de trabalho no ramal ou negociar as condições de consumo com o cliente.
O problema de entregar o gás fora dos limites operacionais estabelecidos é, geralmente, causado por falhas nas estações ERPM.
3.6	Falhas em estações
O sub-sistema de redução de pressão de estações apresenta um sistema de redundância de tramos e válvulas, que reduz o risco de problemas no fornecimento. O sistema normalmente opera com o gás passando por apenas um dos tramos e a pressão sendo operada por apenas uma das válvulas. Caso haja problemas com a válvula, o sistema passará automaticamente a operar com a outra válvula deste tramo de escoamento. Havendo problema também nesta segunda válvula, automaticamente o gás passa a fluir pelo segundo tramo, onde há novamente duas válvulas de redução de pressão. Caso as quatro válvulas de redução de pressão falhem, a conseqüência imediata será o bloqueio da estação, impedindo que as linhas à jusante recebam o gás. Nesta condição, o abastecimento aos clientes à jusante da estação ficará comprometido, visto que a pressão da linha decrescerá gradualmente, até não ser mais suficiente para o fornecimento.
A ERPM pode também ter problemas com o medidor de vazão. Caso o medidor de vazão restrinja o escoamento de gás, o abastecimento ao cliente também será interrompido.
O levantamento detalhado das falhas que podem ocorrer em estações e seus equipamentos foi feito através da aplicação de técnicas de análise de falhas, como FMEA e FTA. Este processo é descrito a seguir.
3.6.1	Técnicas de análise de falhas
A atividade de diagnóstico de falhas está intimamente ligada ao estudo das falhas que podem ocorrer em componentes de um sistema e às relações entre estes componentes. É interessante, portanto, associar este estudo com técnicas de análise que facilitem a identificação das falhas, suas causas e conseqüências.
ALVES (2001) propõe a utilização de algumas técnicas de análise de falhas para auxiliar na construção da base de conhecimento de um sistema especialista voltado para o diagnóstico de falhas em um sistema hidráulico. As técnicas por ele empregadas foram: FMEA e FTA (Failure Tree Analysis).
FMEA é uma técnica de investigação de falhas, que visa fazer o levantamento de todas as formas como estas podem ocorrer em um sistema físico, e relacionar suas respectivas causas e efeitos.
A Associação brasileira de normas técnicas (ABNT), traduz FMEA (Failure Mode and Effects Analysis) como sendo Análise dos Modos de Falha e seus Efeitos.
Segundo SAKURADA (2001), FMEA é um sumário de conhecimento do engenheiro (especialista), que inclui uma análise de itens que poderiam falhar baseada na sua experiência.
Um dos requisitos para entender a aplicação desta ferramenta é compreender o significado dos termos “modo de falha” e “efeito”. SAKURADA (2001) sugere as seguintes definições:
•	modo de falha: maneira com que um componente falha ou deixa de apresentar o resultado desejado ou esperado.
•	efeitos: são os resultados produzidos por um modo de falha quando este vem a ocorrer, ou seja, são as conseqüências do modo de falha.
subsistemas, os quais poderiam ir sendo divididos até chegar na menor unidade substituível. O FMEA pode ser iniciado com os modos de falha conhecidos em um nível, descrevendo seus efeitos no nível seguinte.
A técnica de FMEA foi aplicada para o estudo dos modos de falha em estações de redução de pressão. Para o problema de falhas em estações ERPM, subdividiu-se o sistema em três níveis: componente (item), equipamento e estações. Esta definição é mostrada na Figura 3.13.
Pela abordagem mostrada na figura acima, a análise de falhas em estações foi realizada em duas etapas. A primeira etapa enfoca os modos de falha dos itens que compõem um equipamento (mola, eixo, diafragma, etc.), e seus efeitos sobre este. A segunda etapa enfoca os modos de falha de equipamentos (filtro, válvulas e medidor), e seus efeitos sobre a estação.
Exemplos de análise de modos de falha para uma ERPM são mostrados a seguir. A Tabela 3.3 corresponde à análise dos modos de falha em uma válvula reguladora de pressão ativa, tipicamente empregada em estações ERPM da SCGÁS. Nesta análise, o sistema considerado é a própria válvula. A Tabela 3.4 apresenta uma análise de modos de falha feita para uma ERPM. Este exemplo refere-se a uma condição específica, com a pressão a jusante da ERPM acima do ajuste definido para a válvula reguladora. Este tipo de estação apresenta diversas combinações possíveis de modos de falha.
Tabela 3.3 - Estudo de modos de falha para uma válvula reguladora de pressão.
SISTEMA: Válvula reguladora de pressão (ativa) - ARGOS/GASCAT				
Componente	Função	Modo de falha	Possíveis causas	Efeitos
Piloto	Regular a pressão de carga no diafragma da válvula	Desregulado p/ +	- Ajuste incorreto	- pressão alta na saída
Diafragma	Aumentar ou diminuir a abertura do obturador através do balanço de pressões	Rompimento (válvula em falha)	-	Material ruim -	Tempo de uso	- pressão alta na saída
Obturador	Bloquear ou oferecer uma restrição à passagem do gás	Acúmulo de partículas (permite a passagem de gás)	-	Elemento filtrante rompido -	Longo tempo sem manutenção	- pressão alta na saída (somente para vazão baixa)
Mola	Compensação de forças no diafragma	Quebra ou deformação plástica	- Fadiga	- não aceita ajuste
Eixo do obturador	Direcionar o movimento de abertura e fechamento do obturador.	Resistência ao deslizamento (travado)	-	Falta de lubrificação -	Empenamento	- não aceita ajuste
Tabela 3.4 - Estudo de modos de falha para uma ERPM - pressão jusante alta.
SISTEMA: ERPM (análise para pressão jusante acima do set da válvula reguladora)				
Componente	Função	Modo de falha	Possíveis causas	Efeitos
Válvula reg. de pressão (ativa)	Regular a pressão de saída da ERPM	pressão alta na saída	-	ajuste no piloto -	diafr. rompido (válvula em falha) -	obturador sujo	Pressão a jusante acima de 2 (kgf/cm2)
		não aceita ajuste	-	defeito na mola -	eixo travado	Pressão a jusante acima ou abaixo de 2 (kgf/cm2)
Deve-se verificar que os resultados apresentados nas tabelas acima podem ser combinados. Os efeitos dos modos de falha para a válvula reguladora correspondem aos modos de falha identificados para a estação.
Um processo posterior ao estudo de modos de falha nas estações da rede é a criação de árvores de falha (FTA) para formalizar o conhecimento. Esta técnica facilita a representação do relacionamento causa-efeito dos eventos em um sistema físico. A forma de representação de informações proporcionada pela técnica FTA permite a criação direta de regras para formar a base de conhecimento do sistema especialista.
Segundo CONTINI (1995, citado por SAKURADA (2001)), o FTA é uma técnica dedutiva que permite a investigação das possíveis causas da ocorrência de estados de um sistema. Este estado, referido como evento de topo, está associado com o comportamento anormal do sistema, causado por uma falha, por erros humanos ou por perturbações externas.
A Figura 3.14 apresenta a árvore de falhas derivada do exemplo de FMEA anterior. Representa as possíveis causas para o evento de topo, que neste caso refere-se ao problema de pressão alta a jusante de uma estação ERPM.
Figura 3.14 - Árvore de falhas para ERPM - pressão alta a jusante
A partir de árvores de falhas, como a do exemplo acima, o engenheiro de conhecimento tem uma visão mais detalhada da relação entre os eventos de falha no sistema físico considerado. O uso desta ferramenta facilita a criação de regras para a base de conhecimento do sistema de diagnóstico de falhas.
3.7	Monitoramento
Atualmente, redes de distribuição de gás natural são equipadas com sistemas de monitoramento de variáveis de processo on-line. Este é um recurso indispensável para o aumento da segurança, garantia de fornecimento e aumento da precisão nos cálculos de consumo efetuados para os clientes.
Figura 3.15 - Sistema de monitoramento da rede - SCGÁS
O sistema SOI possui um banco de dados, contendo o histórico operacional da rede de distribuição. Estes dados são disponibilizados para o pessoal técnico da empresa, que os utilizam para emitir faturas de consumo de gás e acompanhar o estado operacional da rede. O sistema SOI pode, ainda, fazer uma verificação individual dos dados monitorados em relação a determinados limites operacionais e gerar alertas para situações anormais.
3.8	Simulação do escoamento na rede de gás
A simulação do escoamento do gás permite prever o comportamento da rede de distribuição para diferentes condições operacionais. Esta análise ajuda a garantir que as condições de pressão e vazão permaneçam em níveis satisfatórios para os consumidores.
A análise de pressões, vazões e velocidade de escoamento em redes de distribuição de gás, faz-se necessária sempre que mudanças significativas na magnitude do suprimento ou demanda de gás ocorrem. A desconsideração destas análises incorre no risco do não atendimento aos consumidores.
Segundo KRITPIPHAT et al. (1998), sistemas que realizam simulação iterativa do escoamento de gás podem ser empregados como ferramenta adicional para a tomada de decisão. Embora estes sistemas possam operar como sistemas de mensagens de advertência em tempo real e como mecanismo de detecção de anomalias em dados de entrada, o usuário deve ter conhecimento prático sobre o comportamento do escoamento para poder analisar os resultados da simulação. Um sistema especialista pode ajudar a traduzir automaticamente os resultados numéricos e fazer recomendações ao usuário.
Um sistema híbrido, que consista em um simulador de escoamento em redes e um sistema especialista, pode fornecer suporte ao operador na detecção de problemas de demanda
de gás, definição de ajustes de pressão para válvulas reguladoras e determinação de consumos máximos para os clientes, de maneira interativa, antes de aplicar a situação na rede real.
3.8.1	Escoamento em regime permanente
O modelo de escoamento em regime permanente é um modelo típico utilizado em diversos problemas de mecânica dos fluidos. Segundo Walski (1994, citado por KRITPIPHAT et al. (1998)), assume-se um retrato do sistema em um determinado ponto no tempo, durante o qual as condições do escoamento na rede são estáveis. Muitos métodos de solução numérica foram desenvolvidos para resolver o modelo de regime permanente, por exemplo, teoria linear Hardy-Cross, e o método Newton-Raphson (KRITPIPHAT, 1998).
O sistema SEGRED-SCGAS 1.3 comporta a integração com uma ferramenta para a simulação dinâmica do escoamento, incluindo efeitos de compressibilidade do gás, conforme descrito em SILVA e SILVA (2002). No entanto, dentro do escopo do presente trabalho, considera-se apenas os efeitos resistivos do escoamento para o cálculo das perdas de carga na tubulação da rede. Para isso, adotou-se as seguintes premissas simplificativas no problema:
a)	a massa específica do gás é igual em todos os pontos em uma canalização em qualquer instante, ou seja, não há variação da massa específica ao longo do comprimento em uma canalização.
b)	a temperatura de escoamento do gás é constante.
c)	a equação do gás perfeito é válida para este sistema.
d)	a área de escoamento é constante para cada segmento de canalização.
e)	todas as canalizações estão em um mesmo nível altimétrico.
O equacionamento necessário para o cálculo de perda de carga, considerando as simplificações mencionadas, é descrito em KINCELER e DE NEGRI (2001).
3.9	Sistemas Comerciais para Redes de Distribuição de gás natural
descrição dos softwares a seguir é baseada em informações de material de apresentação dos mesmos obtido da internet.
Gasworks
Empresa: Bradley B. Bean, PE (fonte: www.b3pe.com; 2000)
É um software para projeto e analise de redes de distribuição e transporte de gás que possui uma interface gráfica em forma de mapa, para edição e representação da rede. Seu domínio de aplicação inclui reguladores, compressores, válvulas, reservatórios e elementos de ajuste. Permite a analise para gás natural ou fluidos compressíveis, no entanto modela somente regime permanente, não permitindo a analise de resposta no tempo.
Como informações fornecidas pelo sistema pode-se incluir propriedades do gás em um ponto especifico, perfis de temperatura e pressão ao longo da tubulação, vazões, velocidades e volumes. Além disso, pode indicar coeficientes de vazão para reguladores e calcular potência estimada e requisitos de combustível para compressores. Possui uma função especifica para dimensionamento de tubulações, através da qual pode fornecer os seguintes dados: dimensões, pressões na entrada, saída e media, e as demais informações citadas anteriormente.
Oferece a possibilidade de importação e exportação de dados para interação com diferentes aplicativos, inclusive Gás Tool e Stoner.
Tacite
Empresa: Simsci
(fonte: http://quorum.simsci.com/comm/commprod.nsf/TACITE7openview; 2000)
É um software mais voltado para projeto e analise de tubulações para transporte de vapor d'água. Possui interface gráfica para visualização do sistema modelado, mas não modela redes complexas de distribuição de gás. Simula vazão de fluidos compressíveis em regime transiente, incluindo fluidos multi-fase, e prevê fenômenos complexos em tubulações. Incorpora balanços energéticos e cálculos de transferência de calor para o sistema. Modela ainda equilíbrio transiente de fases durante o startup ou shutdown de uma tubulação de vapor.
Como informações fornecidas pelo sistema pode-se incluir perfis de pressão e temperatura para a tubulação, regime do escoamento, pontos de acumulo de liquido (para
vapor d'água), perdas energéticas e definição de sistemas de controle para tubulações, incluindo sistemas lógicos de emergência e alarmes.
Inplant
Empresa: Simsci (fonte: http://quorum.simsci.com/comm/commprod.nsf/INPLANT?openview; 2000)
É um simulador em regime permanente que permite o projeto, dimensionamento e analise de redes para transporte de óleos viscosos, vapor d'água e gases. Possui interface gráfica para Windows para edição e representação da rede e modela redes de alta complexidade. Sua analise aplica-se a fluidos multi-fase, modelando o equilíbrio de fases em regime permanente para uma rede de distribuição de vapor. Resolve problemas de vazão em alta velocidade ou vazão critica e incorpora balanços energéticos e cálculos de transferência de calor na rede. Permite a inserção na rede de componentes como aquecedores, resfriadores, compressores e reguladores, possuindo uma biblioteca de propriedades físicas e dados termodinâmicos para mais 1.450 componentes.
Entre as informações fornecidas pelo sistema pode-se citar pressão e vazão de entrega para uma dada pressão de entrada, ou pressão de entrada necessária para determinados requisitos de vazão e pressão de entrega, capacidade da linha, vazões Loops, requisitos para bombas e compressores, efeitos da transferência de calor e velocidades de líquidos e de vapor.
Pipephase
Empresa: Simsci
(fonte: http://quorum.simsci.com/comm/commprod.nsf/PIPEPHASE?openview; 2000)
Pipeline Studio
Empresa: Licenergy.
É um software para projeto e análise de redes de distribuição e transporte de gás e líquido que possui uma poderosa interface gráfica para Windows para edição e visualização da rede. Possui capacidade para modelar redes com alto grau de complexidade, incluindo componentes como bombas, compressores (inclusive curva de rendimento), válvulas de bloqueio e válvulas de teste. Simula o comportamento da rede em regime transiente, considera em seu modelamento a compressibilidade do fluido e permite a inserção de elementos resistivos, para geração de perdas de carga, e elementos capacitivos, como reservatórios, para análise da rede.
Dentre suas principais funções destaca-se análise do comportamento da rede frente ao fechamento de válvulas, start up e shut down de bombas e compressores, cálculo de perdas de calor e balanço energético, configuração de alarmes para limites de pressão e temperatura, detecção de vazamentos com cálculo das perdas entre ruptura e detecção e resposta transiente para as ações corretivas.
Como informações fornecidas pelo sistema pode-se citar dimensionamento ótimo de tubulações, requisitos de bombas e compressores, localização de equipamentos para qualquer configuração da rede fornecida, tempo de auto-suficiência da rede frente ao fechamento de válvulas, pressões de entrada para desejadas pressões e vazões de entrega, pressões, vazões e temperaturas ao longo da rede.
Stoner
Empresa: Severn Trent Systems Group (fonte: www.stoner.com; 2000)
- Stoner Pipeline Simulator
Dentre suas funções inclui-se simulação de start up e shut down de compressores, simulação de alterações de regulagens de pressão, cálculo de transferência de calor.
Como informações fornecidas pelo sistema pode-se citar pressões, vazões e temperaturas ao longo da rede e propriedades do gás em qualquer ponto.
- SynerGEE 3.1
Pertencendo à mesma empresa que o Stoner Pipeline Simulator, consiste em uma família de módulos para modelamento de redes e aplicações de gerenciamento. É considerado o sucessor do Stoner Workstation Service e é baseado em dois módulos principais, interface e banco de dados. O módulo de interface gráfica permite uma representação da rede em forma de mapa.
O módulo de banco de dados que possui ferramentas de tratamento, organização, aquisição, importação e exportação de dados, permitindo interação com outros softwares.
Capítulo 4 - Fases de Desenvolvimento do Sistema
Nos capítulos anteriores foram abordados os principais conceitos relacionados a sistemas especialistas e redes de distribuição de gás natural. O capítulo 3 apresenta ainda informações referentes à operação e manutenção de uma RDGN. Procurou-se mostrar alguns aspectos da aplicação de uma ferramenta computacional de diagnóstico em uma organização do ramo de distribuição de gás.
Em princípio, os aspectos relacionados ao problema e à aplicação da ferramenta, descritos até aqui, justificam o investimento na pesquisa. Porém, do ponto de vista comercial, para se fazer um investimento de tempo e recursos no desenvolvimento de uma ferramenta desta natureza, é necessário ter-se uma medida da compensação dos resultados. Isto só pode ser feito através da estimativa das vantagens de sua aplicação e dos custos e dificuldades em desenvolvê-la.
A partir da fundamentação teórica exposta até aqui, são apresentadas com mais detalhes as etapas de desenvolvimento do projeto, desde o estudo de viabilidade até a implementação dos resultados. O principal objetivo deste capítulo é documentação do processo de desenvolvimento e destacar a importância de cada fase deste processo.
As fases de desenvolvimento descritas neste capítulo foram realizadas de acordo com a metodologia adotada no projeto, a qual é descrita resumidamente no Cap. 2.
4.1	Estudo de viabilidade (Análise do problema)
Como em qualquer projeto de software, antes de comprometer pessoas e recursos no desenvolvimento de um sistema especialista, devem ser feitas algumas considerações sobre o problema proposto. Segundo GIARRATANO e RILEY (1994), estas questões são típicas da área de gerenciamento de projeto em programas convencionais, mas precisam ser adaptadas para os requisitos específicos de sistemas especialistas.
Durante a fase de avaliação, a equipe de desenvolvimento do sistema especialista deve confirmar a viabilidade deste, bem como a hipótese de ser o paradigma adequado. Estes são os requisitos básicos para determinar se o projeto deve prosseguir usando a abordagem proposta. Existem, porém, outros fatores envolvidos nesta análise, tais como: seleção do domínio apropriado e verificação de disponibilidade de recursos (especialistas, informações, recursos financeiros e outros).
Neste sentido, foi realizado um estudo, em parceria com a SCGÁS, durante 3 meses, onde se buscou avaliar a viabilidade do desenvolvimento de um sistema especialista para auxiliar na tomada de decisões no processo de gerenciamento da rede de distribuição de gás natural. Os objetivos deste estudo foram, dentre outros, definir claramente o problema, explorar a potencialidade de um sistema desta natureza, testar a capacidade da equipe no modelamento da rede e deixar o engenheiro de conhecimento a par das dificuldades encontradas na abordagem de sistemas especialistas ao problema.
Buscando alcançar-se as metas definidas, o estudo baseou-se no desenvolvimento de um protótipo de sistema especialista. Este protótipo incluía algumas funções básicas, que visavam ilustrar a potencialidade da técnica de sistemas especialistas, aplicada ao gerenciamento operacional da rede. Através do desenvolvimento do protótipo a equipe pode mapear o conhecimento dos especialistas e definir o domínio do problema.
Para a elaboração do protótipo tomou-se como base um modelo hipotético de rede de distribuição de gás natural, Figura 4.1, o qual foi sugerido por um engenheiro da SCGÁS em resposta a um dos questionários aplicados. Embora simplificado, este modelo apresenta algumas variações possíveis na configuração de uma rede real.
Os símbolos A, B e C na figura representam clientes instalados na rede. As estações ERP fazem a adequação da pressão na tubulação para o tipo de linha de cada trecho. Segundo a classificação da SCGÁS, os tipos de linha existentes na rede são LP, LS e LL7, descritos na legenda, e sua utilização depende das condições urbanas e de consumo de cada região. A diferença entre os tipos de linha está na faixa de pressão adotada para cada uma. A figura mostra ainda os diâmetros adotados nas tubulações e os ajustes de pressão nas estações ERP.
LP 6
1	ERP		B
|/\| P = 31,5 kgf/cm2	Pjus = 17 kgf/cm2		
LS .
City-Gate
6"l
T
PB
4" .
LP: Pmax = 36,75 kgf/cm2 Pmín = 20 kgf/cm2
LS: Pmax = 17 kgf/cm2 Pmín = 9 kgf/cm2
Pmont
LL7 8"
ERP
Pjus = 7 kgf/cm2
PC
I
1
C
LL7: Pmax = 7 kgf/cm2
Pmín = 5 kgf/cm2
PA
A
Figura 4.1 - Modelo hipotético de rede de distribuição de gás natural
As informações obtidas deste estudo de viabilidade serviram como base para justificar o investimento no projeto do sistema. Estas informações são descritas nos itens a seguir.
4.1.1	Identificação do problema
Todo projeto de desenvolvimento de um sistema especialista inicia pela seleção de um problema apropriado. Uma das formas de se identificar um problema é observar as atividades onde se concentra a maior parte dos esforços do pessoal tecnicamente qualificado em uma organização. Em geral, atividades que exigem a presença constante de um ou mais especialistas, principalmente aquelas que envolvem a execução de tarefas repetidas, indicam a existência de um problema.
Ao deparar-se com um problema aparente, o engenheiro de conhecimento deve, primeiramente, determinar se ele realmente existe. Segundo GONZALEZ e DANKEL (1993), o perigo em resolver um problema inexistente está no fato de que a solução não terá um impacto real na operação da organização. Assim, o interesse em utilizar a abordagem de sistemas especialistas poderá acabar antes que uma aplicação real seja encontrada. Isto pode ser interpretado erroneamente pelas pessoas como uma indicação de falha na tecnologia. Adicionalmente, quando se tenta forçar um problema para a solução, a tendência é ignorar todos os outros passos que justificam o desenvolvimento de um sistema especialista.
Uma pergunta que deve ser feita sempre que uma aplicação de sistema especialista é proposta, é se a solução do problema representa um ganho considerável para a organização.
Quanto maior o ganho, maior será o apoio que a organização dará ao projeto de desenvolvimento (GONZALEZ e DANKEL, 1993).
No estudo de viabilidade, buscou-se a interação com o pessoal técnico da SCGÁS para identificar suas necessidades e expectativas e, assim, fazer uma definição preliminar do problema. Com base nas informações obtidas nas primeiras entrevistas com os especialistas da SCGÁS, a equipe de desenvolvimento identificou dois objetivos principais no gerenciamento da rede de distribuição de gás natural:
Ampliação da rede de distribuição - tomada de decisão quanto à inclusão de novos ramais e consumidores, bem como ao fechamento de anéis interligando diferentes linhas.
Operação da rede de distribuição - detectar e qualificar a ocorrência de falhas, tais como: vazamentos, mau-funcionamento de ERP's e ERPM's, consumo excessivo por parte dos clientes e baixa no nível de odorante.
O enfoque inicial do projeto estava voltado à questão da ampliação da rede de distribuição, citado em primeiro lugar. Este problema, porém, logo se mostrou impróprio para a abordagem proposta, pois o domínio de conhecimento era muito amplo e impreciso. Além de não possuir critérios bem definidos, a decisão de incluir um novo ramal na rede envolve questões comerciais, técnicas e geográficas. O conhecimento necessário neste processo não pôde ser explicitado de forma satisfatória pelos especialistas consultados.
O segundo objetivo do gerenciamento da rede de distribuição, voltado à operação, foi identificado durante as entrevistas e nas respostas apresentadas aos questionários que foram entregues à organização. Na época em que este estudo foi realizado, a rede de distribuição ainda estava em fase de implantação no Estado de Santa Catarina e a SCGÁS havia iniciado a operação da rede na cidade de Joinville. Os técnicos estavam envolvidos quase exclusivamente com questões operacionais e havia bastante conhecimento disponível sobre este tema.
Abaixo, apresenta-se os principais aspectos, listados pelos especialistas, a serem observados no gerenciamento de uma rede de gás:
• Colocação da rede em operação:
-	dimensionar tubulação, ERP's e ERPM's;
-	definir regulagens das ERP's;
-	inserir novos clientes na rede.
•	Rede em operação:
-	garantir abastecimento;
-	evitar acidentes;
-	reduzir custos.
•	Detecção de vazamentos:
-	conferir dados de vazão;
-	detectar odor característico;
-	realizar inspeções periódicas;
-	determinar anomalias nos valores de pressão.
•	Comunicação:
-	informações dos clientes;
-	medições na rede;
-	informações das bases operacionais.
Ao buscar o detalhamento das atividades mencionadas, percebeu-se que as atividades críticas no dia a dia dos especialistas estavam fortemente ligadas aos pontos relativos à operação da rede e à detecção de problemas em seu funcionamento. A partir da avaliação das informações fornecidas pelos especialistas, houve uma redefinição do projeto em função do reconhecimento das reais necessidades da empresa, ficando decidido que o desenvolvimento do sistema seria focado na área de detecção de falhas e problemas operacionais da rede.
4.1.2	Adequação da abordagem através de um SE
Confirmada a existência de um problema, as atenções devem ser destinadas a sua solução. Antes de começar a construir um sistema especialista, é essencial decidir se este é o paradigma apropriado para a solução do problema.
Segundo GIARRATANO e RILEY (1994), a maneira usual de verificar a necessidade de um sistema especialista é decidir se se deseja programar a especialidade de um especialista humano. Se este especialista existe e pretende cooperar, então uma abordagem por sistemas especialistas pode funcionar.
esta determinação. Sendo que, em algumas organizações certos fatores têm maior importância que outros, GONZALEZ e RILEY (1993) afirmam que isto torna a decisão por uma abordagem baseada em conhecimento um processo heurístico e impreciso por si só.
A seguir, estão algumas dessas perguntas:
O domínio do problema está bem definido?
Após a identificação do problema, deve-se dedicar atenção especial à definição dos limites do conhecimento e capacidade do SE.
Escolhida a área de detecção de falhas e problemas operacionais da rede de distribuição de gás como domínio do problema, restringiu-se automaticamente o foco do sistema especialista na compreensão do funcionamento da rede, dos seus componentes e subsistemas, bem como na observação dos seus limites operacionais.
Está sendo usado conhecimento de especialistas na solução do problema?
Em caso afirmativo, um sistema especialista pode ser uma solução apropriada. Se a resposta for “não”, não significa, necessariamente, a inviabilidade da técnica, mas, definitivamente, este é um ponto negativo para sua aplicação.
No presente caso, não houve dificuldades em relação a esta questão. A verificação da situação operacional da rede, a detecção de falhas e a correção de problemas são atividades desempenhadas pelo pessoal técnico da empresa.
O problema pode ser resolvido de maneira eficiente por outros meios?
Sistemas especialistas são mais adequados para situações em que não há solução algorítmica eficiente. Embora os sistemas especialistas ofereçam excelentes recursos para resolver alguns tipos de problemas, estes recursos podem ser desnecessários em outros casos. Para muitos problemas, soluções de software convencional podem ser mais apropriadas. Além disso, existem problemas em que uma solução não computacional pode ser a melhor abordagem.
dos especialistas. Como este conhecimento é de natureza heurística e pode ser representado em forma de regras, a solução por meio de um sistema especialista é aplicável.
Naturalmente, a questão relativa ao diagnóstico pode ser resolvida pelos próprios técnicos das bases operacionais da SCGÁS, que são os especialistas no assunto. Assim ocorre na prática. Porém, é aí que o sistema especialista revela seu principal benefício, realizando tarefas, outrora desempenhadas pelos especialistas, de maneira intensiva e automatizada.
O conhecimento para a solução do problema é de natureza heurística ou é predominantemente algorítmico ?
Nenhuma tarefa é puramente de um tipo ou de outro. A chave está em saber qual forma de conhecimento é predominante. A heurística implica no uso de sistemas especialistas, enquanto algoritmos implicam no uso de softwares convencionais.
A operação de uma rede de gás envolve tarefas de diferentes naturezas e muitas delas podem ser representadas por procedimentos puramente algorítmicos. Como exemplo, pode-se citar a verificação dos valores de pressão na saída das estações de entrega de gás e detecção de uma pressão irregular, como pressão alta ou baixa de determinada situação. Este processo consiste em fazer uma comparação dos valores de pressão com seus respectivos limites operacionais, e pode ser perfeitamente implementado em um programa convencional. Por outro lado, fazer a identificação das possíveis causas do problema não é um processo trivial, e envolve o conhecimento de especialistas em operação de redes e manutenção de estações de entrega de gás e seus componentes.
O conhecimento citado no exemplo anterior é baseado em experiência, e chamado conhecimento experimental. Inicialmente o especialista pode ter que tentar várias abordagens até identificar a causa do problema de pressão. Porém, com a experiência, o especialista forma sua própria da base de conhecimento, e pode resolver o problema mais rapidamente do que alguém que não seja um especialista. Entende-se que esta é uma boa aplicação para sistemas especialistas.
de sistemas especialistas, que é manipular entradas inesperadas que não seguem um padrão determinado, segundo PARRELLO (1988, citado por GONZALEZ e DANKEL (1993)).
Se o problema envolve conhecimento especializado, este conhecimento é bem compreendido e aceito?
É difícil desenvolver um sistema especialista em um domínio pouco conhecido, pois ele deve resolver problemas que humanos, geralmente, podem solucionar.
Nem sempre é possível fazer um mapeamento completo do conhecimento relativo ao domínio durante a fase de estudo de viabilidade. Felizmente, no caso específico de manutenção de redes de distribuição de gás natural, há um bom domínio da tecnologia envolvida e também existe uma unificação apropriada das informações disponíveis nas organizações do setor.
Uma complicação enfrentada no levantamento destas informações, foi o fato de que a SCGÁS iniciou suas operações na época de realização do estudo. Na ocasião, a empresa não possuía ainda um histórico operacional satisfatório, e todo o conhecimento disponível baseava-se na experiência de alguns profissionais vindos de outras empresas.
Durante as interações com os especialistas, percebeu-se que havia uma compreensão do domínio por parte deles, e os debates promovidos ao longo do estudo de viabilidade ajudaram a elucidar uma considerável quantidade de conhecimento. Apesar das incertezas relacionadas a esta questão, a equipe de desenvolvimento decidiu correr os riscos, tendo por base informações obtidas nas entrevistas e questionários respondidos pelos especialistas.
Ocasionalmente, um problema pode ser tão complexo a ponto de desafiar, até mesmo, uma solução prática por meio de um sistema especialista. De um ponto de vista técnico, se existem outros critérios que tornem legítima esta abordagem, dificuldades encontradas não devem parar o desenvolvimento. No entanto, é possível que um projeto venha a requerer tanto esforço resultando por torná-lo economicamente inviável. Como em qualquer outro projeto, soluções através de sistemas especialistas devem ser avaliadas quanto ao custo/benefício (GONZALEZ e DANKEL, 1993).
humanos. Também, se os especialistas ou usuários não tem interesse pelo sistema, ele não será aceito mesmo que haja a necessidade para o mesmo.
Nem sempre as expectativas em relação ao sistema traduzem-se em interesse real por parte dos usuários na hora de aplicá-lo. O grau de sucesso alcançado pelo sistema final depende de uma combinação de fatores, desde a análise de viabilidade até os processos finais de validação. Para o caso da SCGÁS, a justificativa ao desenvolvimento do sistema amparou-se em dois aspectos principais: 1) a dificuldade dos especialistas em inspecionar todas as variáveis envolvidas na operação da rede; 2) documentar e organizar o conhecimento dos especialistas, garantindo maior acessibilidade.
Um outro teste interessante que ajuda a justificar a abordagem baseada em conhecimento chama-se “teste do telefone”, descrito por GONZALEZ e DANKEL (1993). O teste verifica se um especialista, falando com alguém por telefone, pode obter informação suficiente que lhe permita resolver o problema. Serve, basicamente, para classificar o tipo de conhecimento envolvido na solução, garantindo que este não seja de natureza visual, auditiva ou tátil.
Este critério, porém, não deve ser interpretado literalmente, pois desta forma qualquer aplicação de sistema especialista para diagnóstico ou monitoramento em tempo real que envolva aquisição automática de dados não passaria no teste. É exatamente o caso da operação de uma rede de gás natural. Os dados referentes às variáveis operacionais do gás são obtidos na central de operação por aquisição automática. Curiosamente, o problema das redes de gás adapta-se bem ao teste do telefone. Em muitos casos, os operadores, percebendo uma irregularidade no valor da pressão em alguma estação de entrega de gás, conversam com técnicos das bases operacionais por telefone e chegam a um diagnóstico do problema.
4.1.3	Verificação da disponibilidade de Recursos
Embora um problema particular satisfaça os critérios previamente citados provando ser adequado para uma abordagem através de sistema especialista, isto não significa que se terá sucesso na implementação do sistema. Muitos fatores podem frustrar um projeto deste tipo. Primeiramente, o indivíduo escolhido como engenheiro de conhecimento deve ser capacitado.
4.1.3.1	Dados e Informações
Para solucionar um problema, são necessárias informações específicas. Primeiramente a organização precisa garantir o acesso a informações internas, tais como, prioridades na solução dos problemas, dados de clientes, dados de componentes, parâmetros operacionais, etc. Muitas dessas informações são consideradas de natureza sigilosa, devido ao grau de exposição ao qual submetem os clientes ou a própria organização. O acesso a essas informações deve ser previsto e negociado antes de iniciar o desenvolvimento do sistema.
Outras informações fundamentais para a operação do sistema são aquelas que servirão como entradas. Logo de início, definiu-se que o sistema especialista usaria como entradas as variáveis operacionais da rede, como pressões e vazões do gás, lidas por equipamentos instalados em campo e capturadas pela central de operações por meio de um sistema de aquisição de dados (SOI). Embora este sistema de aquisição não estivesse totalmente operacional na data do início do projeto, os protótipos foram desenvolvidos sempre visando a sua integração com o sistema de aquisição de dados.
4.1.3.2	Disponibilidade de Especialistas
O desenvolvimento de um sistema especialista é baseado na interação com especialistas do domínio de conhecimento. Portanto, é clara a necessidade de que os especialistas tenham disponibilidade para cooperar no processo.
Uma situação muito comum é a do especialista altamente qualificado, porém, indisponível. Isto ocorre quando o conhecimento sobre o problema é de domínio de poucos, ou quando o tipo de atividade desempenhada pelo especialista exige a sua constante presença. Esta situação requer muito cuidado, pois não é facilmente identificada. Especialistas tendem a se entusiasmar no início do projeto, seduzidos pelos potenciais benefícios de um sistema especialista em suas atividades, mas se afastam, gradativamente, durante a fase de aquisição de conhecimento, que, freqüentemente, se revela tediosa. Idealmente, deve haver um comprometimento formal de tempo de especialistas dedicado ao desenvolvimento do sistema.
A seguir, apresentam-se duas questões que ajudam a caracterizar a disponibilidade dos especialistas:
Existe ao menos um especialista que deseja cooperar com o projeto?
Deve existir, ao menos, um especialista que deseja cooperar, e preferencialmente esteja entusiasmado, com o projeto. Nem todos os especialistas estão dispostos a ter seu conhecimento avaliado com relação a falhas e depois codificado em um computador.
Desde o início do estudo de viabilidade houve interesse no projeto por parte dos engenheiros da SCGÁS. Os primeiros contatos foram estabelecidos com engenheiros de diferentes departamentos, para que a equipe de desenvolvimento tivesse uma noção bastante abrangente acerca as atividades da empresa. Ao final do estudo de viabilidade ficou caracterizada a participação destes engenheiros, indicando uma disposição em colaborar com o projeto, principalmente nos setores técnico da empresa.
O especialista pode explicar o conhecimento de maneira compreensível para o engenheiro de conhecimento?
Mesmo que o especialista tenha intenção de cooperar, pode haver dificuldades em expressar o conhecimento de maneira explícita. Adicionalmente, existe a dificuldade de comunicação entre o especialista e o engenheiro de conhecimento, devido ao uso intensivo de termos técnicos sobre o domínio do problema.
Não foi difícil superar as dificuldades iniciais de comunicação com os especialistas. Logo nas primeiras entrevistas ficou estabelecido o vocabulário técnico empregado na área de gás natural. Vale destacar neste ponto a importância de o engenheiro de conhecimento possuir formação técnica voltada ao domínio do problema, no caso, Engenharia Mecânica.
4.1.3.3	Suporte financeiro
Neste tópico, entra a questão do custo do desenvolvimento do sistema especialista, o qual depende do número de pessoas envolvidas, dos recursos, do tempo destinado ao processo e da infra-estrutura necessária. Além disso, existem os custos de softwares e equipamentos necessários para executar um sistema especialista. Caso não se utilize um shell de domínio público, isto representa um custo adicional ao projeto.
O estudo de viabilidade converteu-se em um projeto para o desenvolvimento do sistema no LASHIP (Laboratório de sistemas hidráulicos e pneumáticos), denominado “Sistema especialista para o gerenciamento operacional de redes de distribuição de gás natural” (SEGRED). Este projeto compreendeu o período entre janeiro de 2001 e dezembro de 2002 e contou com a parceria de três empresas do ramo de gás natural, a saber, SCGÁS (Companhia de gás de Santa Catarina), TBG (Transportadora brasileira gasoduto Bolívia-Brasil S.A.) e PETROBRAS GÁS S.A. e, ainda, contou com o apoio financeiro do FINEP.
Desta forma, o desenvolvimento do sistema pôde contar com recursos financeiros provenientes do FINEP e das empresas parceiras, com a infra-estrutura de pesquisa fornecida
pela Universidade Federal de Santa Catarina e com o suporte técnico prestado pelos especialistas da SCGÁS.
4.2	Especificações do Sistema
Esta etapa serve para organizar os resultados do estudo de viabilidade. Deve-se definir, da melhor forma possível, os objetivos do sistema especialista e determinar os meios necessários para alcançá-los. Estas definições servirão como orientação durante todo o processo de desenvolvimento do sistema até a entrega do produto final.
A experiência na área de desenvolver sistemas especialistas mostra que nenhum sistema significativo deve ser construído sem uma especificação adequada (GONZALEZ e DANKEL, 1993). A especificação dos requisitos do sistema deve abordar vários dos seus aspectos, tais como objetivos, funções, entradas e saídas, o público alvo, sua interface com o usuário, restrições, limitações, etc.
4.2.1	Objetivos do sistema
Os objetivos servem para orientar o processo de desenvolvimento do sistema especialista, e devem ser definidos de forma clara e precisa. É através destes que são definidas as funções e demais especificações do sistema. Elas permitem, também, que a equipe de desenvolvimento possa determinar quando o sistema está pronto.
Alcançados os objetivos do estudo de viabilidade, definiu-se as seguintes metas para o desenvolvimento do sistema:
•	Aumentar a eficiência no gerenciamento operacional da rede;
•	Aumentar a velocidade de detecção de problemas ou falhas;
•	Fazer um diagnóstico prévio das falhas nas estações;
•	Fornecer apoio à tomada de decisão na solução dos problemas.
•	Permitir a avaliação de cenários hipotéticos na operação da rede.
4.2.2	Entradas e saídas do sistema
Esta especificação deve conter uma descrição da natureza das entradas e saídas do sistema especialista. Entradas são os dados e informações que o sistema utiliza para realizar as inferências, e saídas são as respostas fornecidas por ele após processar as informações. Não é necessário fazer uma descrição detalhada e completa destas entradas e saídas em um primeiro momento, pois o detalhamento destas informações é feito nas fases seguintes do projeto.
Uma técnica recomendada para a definição das entradas e saídas do sistema especialista consiste em, primeiramente, estabelecer as saídas, ou seja, as respostas desejadas, para, em seguida, identificar as entradas necessárias para se alcançá-las. Muitas vezes, porém, é preciso condicionar as saídas em função das entradas disponíveis. O limitado acesso a informações essenciais para resolver um problema impõe restrições às entradas do sistema, o que pode, por vezes, inviabilizar uma solução desejada.
Como exemplo do problema referido no parágrafo anterior, cita-se a inexistência de leitura de pressão à montante das estações e em pontos intermediários da rede de distribuição de gás em questão. As pressões a montante das estações não eram monitoradas pelo sistema de aquisição de dados (SOI), não estando, portanto, disponíveis como entradas para o sistema especialista. Estas informações poderiam aumentar a capacidade de diagnóstico do sistema e permitiriam realizar novas inferências sobre o estado operacional da rede. Embora os técnicos pretendessem acrescentar a leitura das pressões a montante das estações ao SOI, não havia previsão para a implantação deste recurso.
As saídas do sistema especialista estão diretamente relacionadas com as metas previamente estabelecidas. Caso as saídas de um sistema não satisfaçam plenamente os objetivos, o sucesso em sua aplicação é improvável.
Para descrever a natureza destas saídas, o engenheiro de conhecimento, ou a equipe de desenvolvimento, já devem possuir um bom nível de conhecimento sobre o domínio do problema. Devem ser observadas as reais necessidades do usuário final do sistema, bem como as suas expectativas em relação ao produto final. É importante identificar se o usuário quer somente a solução mais provável ou adequada, ou se ele deseja obter uma lista de todas as soluções possíveis. É importante também identificar o nível de detalhe esperado para a solução e a necessidade de dispositivos gráficos para os resultados (GONZALEZ, 1993, p.326).
Em seguida, apresenta-se um trecho retirado da resposta de um engenheiro da SCGÁS, quando questionado, pelo engenheiro de conhecimento (EC), a respeito das saídas esperadas para o sistema:
EC: Que saídas, ou respostas, você espera que o sistema apresente ao usuário?
Especialista:
•	Dados de variáveis características do sistema, como Vazão, Temperatura e Pressão em determinados pontos da rede. Estes dados devem poder ser calculados ante ao fornecimento de demais variáveis do sistema;
•	Alertas e Ações corretivas, como por exemplo, a informação e o alerta de que a pressão no trecho n da rede está abaixo do limite mínimo, e que para corrigir é necessário abrir as válvulas X e Y, por exemplo;
•	Para operação futura o software deverá ser capaz, ante ao recebimento de dados de vazão, temperatura e pressão com frequência determinada, de indicar on-line os níveis de pressão e vazão a que está sendo submetida a Rede de Distribuição.
Diante destas respostas e demais análises, as saídas do sistema especialista ficaram definidas da seguinte forma:
Situação operacional da rede: o sistema deve alertar acerca de problemas operacionais, como pressões irregulares, vazões excessivas e diâmetro de tubulação insuficiente.
Situação operacional em estações (ERP; ERPM): o sistema deve alertar sobre problemas nas estações, como pressão insuficiente ou excessiva a montante, pressão irregular a jusante, vazão muito alta ou muito baixa, etc. Deve alertar, também, quando algum equipamento estiver operando fora dos limites de pressão, vazão e temperatura especificados pelo fabricante.
Diagnóstico de equipamentos de estações: ao alertar a respeito da constatação de um valor irregular de vazão ou de pressão a jusante de uma estação ERP ou ERPM, o sistema deve indicar os equipamentos que podem estar apresentando defeito e diagnosticar o problema. O diagnóstico de equipamentos deve identificar o componente em falha.
Sugestão de medidas corretivas: para o caso de pressões insuficientes ou vazões excessivas, o sistema deve sugerir o redimensionamento de algum trecho da tubulação ou a alteração de ajustes de pressão em válvulas de ERP's para compensar o problema. Já na hipótese de defeitos em componentes de equipamentos, deve sugerir o ajuste ou substituição destes.
Uma outra saída esperada pelos usuários é o valor da pressão a montante das estações calculada através de simulação de escoamento do gás natural. Embora os referidos valores de pressão sejam apresentados aos usuários pela da interface gráfica, não constituem propriamente uma saída do sistema especialista, pois seu cálculo não envolve conhecimento heurístico, e não se baseia em inferências. Em relação ao sistema especialista, os valores de pressão calculados a montante das estações são considerados dados de entrada, porquanto servem para inferir as saídas listadas anteriormente.
Ao discutir a natureza dos dados de entrada esperados durante a solução do problema, alguns aspectos merecem atenção especial. Em primeiro lugar deve ser determinado se estes dados são predominantemente numéricos ou simbólicos. Se forem numéricos, será preciso definir os cálculos ou tratamentos necessários para colocá-los em uma forma aplicável. É importante saber se estes dados são, geralmente, completos e consistentes, e se carregam algum tipo de incerteza. Caso os dados possuam algum grau de incerteza, isto deve ser considerado e transmitido ao usuário ao gerar as saídas. É preciso também determinar se os dados são fornecidos automaticamente por algum outro sistema ou instrumento.
Na concepção do protótipo inicial, este solicitava informações ao usuário durante a realização das inferências. Estas informações eram referentes a observações feitas em campo, junto aos equipamentos, e serviam para o sistema orientar o diagnostico nos componentes. Conforme descrito no item 4.5.3, estas informações foram desconsideradas como entradas do sistema, devido a uma mudança na estratégia de solução do problema.
Para o problema em questão, os dados de entrada são obtidos de diferentes formas. Alguns dados de pressão, vazão e temperatura são obtidos do sistema de aquisição de dados SOI, enquanto outros são provenientes de cálculos executados por uma função algorítmica implementada no próprio ambiente de programação do CLIPS, cujo código fonte é mostrado no Anexo 2. Estes cálculos são feitos com base nos dados obtidos do sistema de aquisição de dados. Existem ainda alguns parâmetros operacionais a serem definidos pelo usuário durante a operação do sistema, que são os ajustes de pressão das válvulas nas estações. As entradas definidas para o sistema são apresentadas a seguir.
1)	Entradas recebidas do sistema de aquisição de dados.
Consumo instantâneo dos clientes: estes dados são usados pelo sistema especialista para fazer inferências em relação à situação operacional das estações ERPM. São também necessários para o cálculo das vazões na tubulação da rede.
Pressão a jusante das estações ERPM: estes dados são usados pelo sistema especialista para fazer inferências em relação à situação operacional das estações. Permitem verificar se o gás está sendo entregue aos clientes dentro das condições estabelecidas em contrato.
Temperatura a jusante das estações ERPM: usada somente para verificar se o gás está sendo entregue numa condição segura e ideal para a medição da vazão.
Pressão na estação de recebimento: este valor de pressão serve para o sistema verificar as condições de recebimento do gás. É também usado na determinação das pressões ao longo da tubulação na rede.
2)	Dados calculados.
Pressões ao longo da tubulação: com a verificação destes dados o usuário pode ser alertado quanto à ocorrência de pressões fora dos limites estabelecidos em projeto ao longo da rede de gás.
Pressão a montante das estações ERP e ERPM: o sistema especialista usa estes dados para fazer inferências quanto à situação operacional das estações e da rede. Em caso de pressão baixa, o sistema indica a possibilidade de problemas em garantir o fornecimento ao cliente.
3)	Parâmetros operacionais.
Ajustes de pressão nas válvulas das estações: estes ajustes devem ser definidos pelo usuário antes de fazer uma avaliação do cenário operacional, e servem para estabelecer os limites para as variáveis de pressão na rede.
4.2.3	Definição do público alvo
Ao identificar os usuários do sistema especialista, deve-se investigar o grau de instrução dos usuários, sua afinidade com computadores e familiaridade com o domínio do problema.
Segundo GONZALEZ e DANKEL (1993), é relevante determinar se o sistema servirá como uma ferramenta de apoio à decisão ou se tomará decisões de maneira independente.
Abaixo, apresenta-se a opinião de um especialista da SCGÁS sobre o perfil dos usuários do sistema. Esta resposta foi retirada de um dos questionários iniciais do estudo de viabilidade.
EC: Descreva o perfil do usuário que terá envolvimento direto com o sistema.
Especialista:
O usuário do programa deverá ter nível técnico. O software deverá, entretanto, fornecer informações gráficas para que a informação seja assimilada com rapidez e facilidade, diminuindo o risco de interpretação errônea.
Ao final do estudo de viabilidade ficou definido que o sistema especialista seria instalado na central de operação da rede de distribuição de gás da SCGÁS, localizada em Florianópolis-SC. Os usuários do sistema seriam os próprios técnicos responsáveis por monitorar a operação da rede com o uso do sistema de aquisição de dados.
4.2.4	Restrições gerais
Uma restrição significativa para qualquer software é a plataforma na qual o produto final será executado. No presente caso, decidiu-se desenvolver o sistema para ser executado em um micro-computador Pentium II (ou mais atual) com velocidade de processamento mínima de 233 MHz. Embora o custo de hardware represente uma pequena parcela do custo de desenvolvimento do sistema, ele é decisivo caso haja intenção de difundir o sistema ou transformá-lo em ferramenta comercial.
Outra restrição importante é a velocidade de execução do sistema especialista. Alguns sistemas protótipos têm performances aceitáveis, mas pioram significativamente quando são expandidos. Definições realistas dos requisitos de velocidade de execução são importantes para evitar problemas posteriores no processo de desenvolvimento, segundo GONZALEZ e DANKEL (1993).
No caso em estudo, por se tratar de uma aplicação associada ao monitoramento da rede de gás, ficou definido que a velocidade de operação do sistema deveria ser da ordem de segundos.
Em relação à segurança do sistema especialista, restou determinado que os usuários não poderiam fazer alterações na base de conhecimento, sendo esta uma tarefa exclusiva do engenheiro de conhecimento.
4.3	Projeto Preliminar
Considerável conhecimento geral sobre o domínio, obtido dos especialistas ou de fontes bibliográficas, pode ser necessário, nesta fase, para tomar decisões consistentes acerca do paradigma de representação e da ferramenta (GONZALEZ e DANKEL, 1993).
4.3.1	Paradigma de representação do conhecimento
A representação do conhecimento é um aspecto muito importante nos sistemas especialistas. A forma como o sistema especialista representa o conhecimento afeta o desenvolvimento, a eficiência, a velocidade e a manutenção do sistema (GIARRATANO e RILEY, 1994).
A seleção do paradigma de representação de conhecimento também afeta, diretamente, a escolha da ferramenta de implementação do sistema especialista. Esta etapa do projeto exige atenção, pois uma seleção mal feita de qualquer um dos dois pode comprometer, severamente, o sucesso do sistema.
Buscando simplificar a discussão a respeito da escolha do paradigma de representação de conhecimento para o desenvolvimento de sistemas especialistas, GONZALEZ e DANKEL (1993) classificam as opções em dois grupos principais. Num grupo estão as regras e os conceitos de lógica em geral. No outro grupo estão as técnicas que representam relações entre diferentes entidades, em especial redes semânticas, frames e orientação por objetos.
Para o desenvolvimento do sistema em questão, optou-se pelos dois tipos de representação, aplicando, simultaneamente, os conceitos de regras e orientação por objetos. A utilização de representações múltiplas para o domínio de conhecimento é característica de sistemas denominados híbridos.
A justificativa para a escolha dos métodos de representação está na natureza do domínio do problema. Para emular a capacidade de diagnóstico de falhas de um especialista humano, é necessário entender de que maneira o conhecimento deste profissional está organizado. Especialistas tendem a expressar o conhecimento, acumulado ao longo dos anos, na forma de associações empíricas (ALVES, 2001). Este tipo de conhecimento geralmente é adequado ao paradigma baseado em regras.
A uniformidade com que o conhecimento é representado na forma de regras facilita a criação de uma base de conhecimento modular e de fácil modificação. Esta é uma característica fundamental para garantir a mantenabilidade de um sistema especialista.
Uma das principais desvantagens do paradigma baseado em regras é que os fatos e as regras não podem representar eficientemente a estrutura e os relacionamentos inseridos, mesmo nos mais simples conceitos de objetos (GONZALEZ e DANKEL, 1993).
Segundo SIMON e ANDO (citado por BOOCH (1994)), a complexidade de um sistema físico pode ser representada por uma hierarquia, segundo a qual, um sistema complexo é composto por subsistemas, que, por sua vez, têm seus próprios subsistemas, e assim por diante, até encontrar componentes considerados elementares.
DYM e LEVITT ((1991), citado por SILVA (1998)), afirmam que somente regras não são suficientemente poderosas para formular e resolver isoladamente problemas de engenharia complexos, porque não têm a capacidade de representar entidades complexas, quando estas entidades têm vários atributos e procedimentos agregados.
O paradigma de orientação por objeto é mais adequado para domínios constituídos em entidades complexas possuindo inter-relações que precisam ser modeladas de maneira explícita. Através de herança e mensagens, este paradigma permite a representação de conhecimento mais profundo e com maior estrutura de relacionamento entre classes de entidades.
Uma estrutura de classes é uma boa maneira de descrever um sistema mecânico como uma rede de distribuição de gás. Componentes da rede como tubulação, estações e equipamentos são inseridos em um modelo conceitual de estrutura de classes para se ter uma visão inicial do seu relacionamento. Detalhes posteriores sobre os atributos e características das classes podem ser obtidos através de uma análise posterior. Embora a configuração das rede de distribuição de gás natural seja bastante variada, é possível identificar características comuns na maioria delas, o que permite seu modelamento por uma única estrutura de classes.
A única desvantagem do uso simultâneo dessas duas técnicas é o aumento da complexidade e dificuldade de implementação do sistema. Existem, entretanto, ferramentas de implementação que suportam ambas as técnicas de representação escolhidas.
4.3.2	Escolha do método de inferência
A escolha do método de inferência em um sistema especialista depende do tipo de problema a ser resolvido e do paradigma de representação de conhecimento aplicado.
Conforme mencionado no item anterior, técnicas de representação de conhecimento que permitem a representação do relacionamento entre entidades, tais como redes semânticas e orientação por objetos, não possuem capacidade de inferência. No caso de se escolher uma dessas técnicas como paradigma exclusivo de representação do conhecimento, é necessário desenvolver um mecanismo de inferência, uma vez que elas não possuem um método natural de progredir das entradas para as saídas.
Com a utilização de regras como paradigma de representação de conhecimento, as opções de método de inferência são claras: encadeamento direto, encadeamento reverso, ou uma combinação de ambos. As diferenças conceituais entre estes dois métodos de inferência são apresentadas no capítulo 2.
Problemas de planejamento e projeto tipicamente utilizam o encadeamento direto. Em geral, problemas desta natureza envolvem uma grande variedade de possíveis saídas, e um número limitado de entradas ou dados iniciais. Uma de suas características determinantes é o fato de necessitar que os dados iniciais sejam conhecidos no início do problema para que se possa chegar a uma solução. Esta característica combina com o método de encadeamento direto, no qual a conclusão, ou saída, é inferida a partir da combinação das entradas.
Problemas de diagnóstico, onde existem apenas algumas conclusões possíveis e um grande número de estados iniciais, são mais adequados para o encadeamento reverso. Nestes problemas, não estão todos disponíveis, de início, todos os dados de entrada, os quais são solicitados ao longo do processo de inferência na tentativa de comprovar as hipóteses assumidas para a conclusão.
O argumento utilizado na seleção prévia do método de inferência do presente sistema especialista foi a definição da sua função principal, ou seja, o diagnóstico. O termo “diagnóstico”, por si só, é um forte indício de que o encadeamento reverso é o método adequado para o problema.
Esta suspeita foi confirmada quando da verificação da forma como um especialista resolve problemas em estações da rede de distribuição. Primeiramente ele observa os sintomas presentes nas estações, que podem ser ruídos em equipamentos, ausência de vazão ou alguma irregularidade na pressão de entrada ou saída da estação. Em seguida ele cria hipóteses para as causas do problema observado e, posteriormente, começa a buscar por evidências que comprovem suas hipóteses.
ALVES (2001) propõe um sistema especialista para diagnóstico de falhas em sistemas hidráulicos, utilizando-se do método de encadeamento reverso. Uma das justificativas apresentadas para a escolha deste método é a seguinte:
“É a forma que o especialista pensa, pois este necessita ir juntando informações durante a sessão para provar que a hipótese que está tentando comprovar é verdadeira. ”
Em decorrência dos fatos expostos, ficou definido no projeto preliminar o uso do encadeamento reverso como método de inferência para o sistema especialista.
Contudo, apesar dos argumentos apresentados acima, a decisão pelo método de encadeamento reverso não foi definitiva. Algumas peculiaridades da aplicação presente foram identificadas mais adiante no processo de desenvolvimento, as quais levaram a uma redefinição do método de inferência para o encadeamento direto. Esta mudança é descrita com mais detalhes no item 4.5.1.
4.3.3	Ferramenta de implementação
No presente trabalho utilizou-se o ambiente CLIPS - C Language Integrated Production System - um ambiente shell desenvolvido pela NASA (National Aeronautics and Space Administration).
Vários fatores contribuíram para a escolha:
•	afinidade do engenheiro de conhecimento com a ferramenta;
•	foi desenvolvido por uma instituição reconhecida mundialmente (NASA) e possui uma grande comunidade de usuários, o que torna a ferramenta confiável;
•	é uma ferramenta de fácil portabilidade e está disponível na internet.
•	permite o uso de objetos e regras como paradigma de representação de conhecimento. Conhecimento pode ser encapsulado em regras e objetos. Condicionais de regras podem coincidir com objetos e com fatos. Alternativamente, objetos podem operar de maneira independente de regras;
Em muitos casos, o sistema especialista deve ser integrado com outros programas existentes. Deve-se dedicar atenção para a questão de comunicação e coordenação das entradas e saídas do sistema especialista com estes programas. Pode ser ainda desejável ativar o sistema especialista como um procedimento a partir de uma linguagem de programação convencional, e o sistema deve suportar este tipo de aplicação.
O CLIPS é um shell que usa a estratégia de encadeamento direto no processo de inferência, e não possui o recurso de encadeamento reverso. Para resolver este problema, GIARRATANO e RILEY (1994) propõem a implementação de um conjunto de regras que adaptam o processo de inferência do CLIPS para o encadeamento reverso.
4.3.4	Interface com o usuário
Dependendo da definição do público alvo e das necessidades dos usuários do sistema especialista, a interface com estes pode ser uma simples orientação textual ou uma tela sofisticada com gráficos de alta resolução.
A definição dos requisitos de interface foi feita em conjunto com os especialistas e futuros usuários do sistema na SCGÁS. Determinou-se quais os recursos esperados e as variáveis e informações que deveriam ser mostradas ao usuário, para auxiliar em suas tarefas do dia a dia. Foram identificados os seguintes requisitos básicos para a interface com o usuário:
•	visualização gráfica da rede, incluindo a localização das estações e dos clientes;
•	acesso às variáveis de processo, como pressões e vazões nas estações;
•	apresentação do resultado dos diagnósticos de forma simples e organizada.
o sistema especialista, o CLIPS. Esta facilidade é fornecida por um aplicativo chamado CLIPS OCX, que possui o protocolo necessário à comunicação entre CLIPS e Visual Basic.
4.4	Criação de protótipos
A criação de protótipos é uma técnica largamente difundida para o processo de desenvolvimento de sistemas especialistas. Baseia-se no uso da flexibilidade e potencialidade de shells disponíveis comercialmente para criar rapidamente protótipos funcionais do sistema final previsto.
Uma das vantagens do uso desta técnica está na criação de um protótipo inicial do sistema. Através da aquisição e representação de conhecimento de um aspecto limitado do domínio do problema, a equipe de desenvolvimento é capaz de criar um protótipo simplificado no início do projeto, o qual permite uma visão das capacidades do sistema final. Isto permite antecipar à equipe de desenvolvimento o escopo do conhecimento, as necessidades dos clientes e a validade das decisões tomadas na etapa de projeto preliminar do sistema (GONZALEZ e DANKEL, 1993).
Outros protótipos podem ser desenvolvidos até se chegar à versão final do sistema. Estes protótipos são implementados de acordo com as correções de rumo impostas ao projeto após a avaliação do protótipo inicial. Protótipos intermediários geralmente possuem estrutura semelhante ao sistema final e, de acordo com o conceito de desenvolvimento incremental, contribuem à identificação de ajustes e correções necessárias no projeto.
Pode-se perceber que o desenvolvimento de protótipos caracteriza um ciclo de desenvolvimento modificado. Para o protótipo inicial, as fases de análise e especificação devem ser realizadas com uma visão do sistema completo, mas o projeto e a implementação são feitos brevemente e de maneira preliminar. Isto fornece um sistema operacional que pode ser avaliado para obter-se o retorno necessário. O protótipo inicial pode então ser descartado, quando o retorno necessário é obtido, ou aperfeiçoado de maneira incremental para servir como um subsistema do sistema final. Na maioria dos casos ele é descartado em razão das dificuldades de modificá-lo para acomodar todas as idéias geradas durante o desenvolvimento. Tipicamente é mais fácil iniciar um novo processo de desenvolvimento, buscando seguir as várias etapas com mais detalhes (GONZALEZ e DANKEL, 1993).
No presente projeto, foram desenvolvidas, ao todo, 4 versões do sistema. Nas próximas seções serão descritas as duas primeiras versões, SEGRED-SCGAS 1.0 e 1.1. A versão 1.0 foi desenvolvida dentro do conceito de protótipo inicial, e é descrita no item 4.4.1. A versão 1.1, descrita no item 4.4.2, já buscava estabelecer a estrutura computacional do sistema final. Esta
versão consiste em um protótipo intermediário do sistema, e enfoca a aplicação do modelo de desenvolvimento incremental no projeto. A versão final do sistema, denominada SEGRED-SCGAS 1.3, é descrita com mais detalhes no capítulo 5.
4.4.1	Protótipo Inicial - SEGRED-SCGAS 1.0
A criação de um protótipo inicial é uma fase importante no desenvolvimento do sistema especialista. Seu principal objetivo é implementar imediatamente as decisões feitas no projeto preliminar, e testar a sua validade no contexto do problema. Estas decisões devem ser justificadas ou corrigidas com base no conhecimento obtido dos especialistas durante o desenvolvimento do protótipo.
Se uma mudança de paradigma ou de ferramenta for necessária, isto pode ser feito o mais cedo possível para minimizar o desperdício de esforços e despesas com softwares e hardwares desnecessários (GONZALEZ e DANKEL, 1993).
O protótipo inicial deve parecer com o sistema final, exceto que ele será limitado em sua abrangência. Deve seguir as especificações de requisitos tanto quanto possível. Deve incluir uma interface com o usuário bem evoluída e uma base de conhecimento razoavelmente robusta para que os usuários julguem sua aceitabilidade e aplicabilidade. Porem isto não significa que o protótipo deve ser altamente robusto. Deve apenas refletir o sistema final que será desenvolvido.
O protótipo inicial, neste projeto, foi denominado SEGRED-SCGAS 1.0. Foi direcionado exclusivamente para o problema de diagnosticar falhas em válvulas de redução de pressão de estações ERP e ERPM na rede de distribuição de gás natural da SCGÁS. Definiu-se como domínio de aplicação a rede de distribuição da cidade de Joinville-SC. Na época em que o protótipo foi implementado, somente alguns clientes estavam consumindo gás, e apenas estes foram considerados na implementação. Este protótipo inclui as seguintes funções:
Configuração do cenário operacional - permite ao usuário modificar as variáveis de processo, para testar as respostas do sistema especialista em diferentes situações operacionais. Verificação da situação operacional da rede - apresenta um resumo com os problemas detectados nas estações.
Diagnósticos em estações - realiza o diagnóstico de falhas em equipamentos de estações.
Para construir a base de conhecimento foram utilizadas as informações obtidas através da análise de falhas em válvulas de redução de pressão, feita juntamente com os técnicos e
engenheiros da SCGÁS. O método de inferência então escolhido era o encadeamento reverso, que corresponde à forma como os especialistas procuram pelas causas das falhas no processo de diagnóstico.
Para o projeto da interface gráfica do protótipo, buscou-se seguir os requisitos definidos no projeto preliminar. Foi criada uma representação gráfica da rede, em uma versão aproximada ao que seria a versão final do sistema, com acesso às informações referentes às estações e clientes que a integram. A Figura 4.2 apresenta a tela principal do protótipo inicial implementado.
Figura 4.2 - SEGRED-SCGAS 1.0 - tela principal
Embora simplificada, a tela principal fornece uma visualização da configuração da rede e da localização das suas estações e dos seus clientes, e permite identificar os diâmetros de tubulação, utilizados nos ramais da rede. Além disso, ela permite acessar as demais janelas e recursos oferecidos pelo protótipo.
O usuário pode acessar o ambiente específico para visualização de estações ERP ou ERPM da rede a partir da tela principal. A seguir, a Figura 4.3 mostra um exemplo de ambiente para estações, referente a uma estação ERPM da rede.
Figura 4.3 - SEGRED-SCGAS 1.0 - tela de ERPM
Neste ambiente, o usuário tem acesso a informações e variáveis operacionais referentes à estação. No lado esquerdo estão listados os valores de ajuste de pressão aplicados às válvulas reguladoras, válvulas de alívio e de bloqueio automático da estação. Á direita encontram-se as variáveis de pressão a jusante e montante da estação e o consumo instantâneo de gás do cliente. Mais abaixo existe um campo referente a sintomas observados em campo na estação.
Não havia, nessa ocasião, a disponibilidade de dados pelo sistema de aquisição, pois este se encontrava em fase de implantação na empresa. As variáveis de consumo de gás e pressões a montante e jusante da estação precisavam ser inseridas pelo usuário manualmente. Com a inserção destes dados, o usuário testava as respostas do sistema para diferentes cenários operacionais na rede. As informações referentes a sintomas específicos observados a estação também precisavam ser selecionadas pelo usuário antes de processar um diagnóstico. Estas informações eram usadas, juntamente com as variáveis de processo, como entradas do sistema especialista.
Ao solicitar uma verificação da situação operacional da rede, é apresentada ao usuário uma janela contendo um breve relatório, indicando os problemas detectados nas estações da rede. A Figura 4.4 mostra um exemplo de relatório.
Figura 4.4 - SEGRED-SCGAS 1.0 - verificação de situação operacional da rede
A detecção de problemas em estações é feita com base nas variáveis de processo inseridas pelo usuário. O usuário pode, então, solicitar o diagnóstico em uma estação, para investigar as causas dos problemas encontrados.
A intenção deste protótipo foi testar a abordagem do problema pelo encadeamento reverso. Desta forma, o processo de diagnóstico consiste em gerar hipóteses para as causas dos problemas encontrados e buscar por informações que comprovem estas hipóteses. Estas informações são solicitadas ao usuário em uma seqüência de perguntas, cuja ordem depende da prioridade definida na base de conhecimento. A Figura 4.5 mostra um exemplo de
O resultado do diagnóstico depende das respostas do usuário, e é apresentado na forma de um relatório, contendo todas as informações processadas e a conclusão.
Após a avaliação do protótipo pelos especialistas, constatou-se que sua aplicação seria mais adequada como uma ferramenta de treinamento de pessoal técnico na área de manutenção da rede de distribuição de gás. Porém, sua aplicação como ferramenta de apoio à operação da rede seria inviável. Embora de acordo com a prática dos especialistas, a abordagem proposta para o diagnóstico apresentou complicações, devido à natureza das informações solicitadas ao usuário.
Conforme apresentado mais adiante, no item 4.5.1, esta constatação implicou na mudança mais significativa ocorrida nas definições do projeto, qual seja, a substituição do método de inferência pelo encadeamento direto.
Este tipo de mudança é uma conseqüência esperada do processo. A maioria dos autores da área recomendam que o protótipo inicial seja descartado após sua avaliação, com o desenvolvimento do sistema final partindo do início. O reaproveitamento do seu código fonte para as próximas versões só deve ser cogitada caso todas as decisões tomadas inicialmente mostrem-se acertadas e justificáveis no protótipo inicial. O mais comum é que algumas decisões feitas durante o desenvolvimento do protótipo inicial, revelem-se inadequadas e dependentes de revisão pela equipe de desenvolvimento. Nestes casos, o esforço necessário para reaproveitar o código do protótipo inicial buscando refletir as revisões de projeto, raramente compensa.
4.4.2	Protótipo intermediário - SEGRED-SCGAS 1.1
O segundo protótipo desenvolvido no projeto, foi denominado SEGRED-SCGAS 1.1. Apresenta muitos avanços em relação à versão 1.0. Em sua implementação, buscou-se formalizar uma estrutura computacional definitiva para o sistema.
Este protótipo empregou o conceito de programação orientada a objetos, o qual já havia sido definido como paradigma de representação de conhecimento no projeto preliminar, embora não implementado no protótipo inicial.
apenas algumas alterações e detalhamentos que são descritos no capítulo 5. A Figura 4.6 apresenta, de maneira simplificada, a estrutura de classes implementada no protótipo.
Figura 4.6 - SEGRED-SCGAS 1.3 - estrutura de classes
O uso da programação orientada a objetos permitiu uma maior organização das informações do sistema. Nos atributos das classes ficam armazenados os dados que definem a relação semântica entre os elementos, os parâmetros operacionais da rede e as variáveis de processo. As funções implementadas neste protótipo são as seguintes:
•	Configuração do cenário operacional;
•	Acesso a informações de componentes da rede;
•	Cálculo de perda de carga nas tubulações;
•	Verificação da situação operacional da rede;
•	Diagnósticos em estações.
Além da adição das funções de acesso a informações de componentes e cálculo de perdas de carga, todas as funções mencionadas apresentam uma significativa evolução em relação ao protótipo inicial.
A representação gráfica da rede de distribuição em forma de esquema, neste protótipo, possui o mesmo formato da versão inicial, todavia, com maior riqueza de detalhes e mais informações, conforme mostrado na Figura 4.7. Além dos recursos presentes na versão inicial, este esquema inclui a representação de válvulas de bloqueio de linha e a indicação de pontos de interferência com obras urbanas, através de ícones distribuídos ao longo da tubulação. No ambiente referente à estas válvulas, o usuário tem acesso a informações como código da válvula, purgas, localização etc. O mesmo é feito para um ponto de referência, conforme mostrado na figura 4.7.

ALTERA VALORES ALERTAS AJUDA SAIR
FLUXOGRAMA da rede de distribuição DE GAS NATURAL - RiGIÂO A: JOINVILLE
Localização
R. Dona Francisco; e:
frente ao ne 580 (Mercearia Guia Lopes)
Válvula 41 .01 01 I
válvula de Bloqueio Consumidores kterf. eom obras es. Redução Concéntrica
Figura 4.7 - SEGRED-SCGAS 1.1 - tela principal
O cálculo de perdas de carga na tubulação da rede permite a determinação das pressões estimadas a montante das estações. Este recurso, em conjunto com a inclusão de novas informações da base de conhecimento, fez aumentar a quantidade e qualidade das respostas do sistema especialista na parte de diagnósticos e de verificação da situação operacional da rede.
O sistema faz considerações em relação às vazões na rede, indica problemas de dimensionamento na tubulação, bem como a possibilidade da ocorrência de vazamentos em um ramal específico.
A Figura 4.8, abaixo, apresenta a janela referente a uma estação ERPM, a qual pode ser acessada a partir da tela principal do protótipo. Destaca-se a representação gráfica da estação e seus equipamentos e a apresentação das observações referentes à situação operacional da estação. As informações de ajustes de pressão (set) são mostradas junto à representação das válvulas, e as variáveis de processo, como vazão e pressão, são mostradas na posição em que são realmente obtidas, na estação.
Figura 4.8 - SEGRED-SCGAS 1.1 - tela de ERPM
A determinação das causas de um problema detectado na tela anterior pode ser feito através da solicitação do diagnóstico. O sistema apresenta, então, as conclusões em forma de relatório, conforme exemplo da Figura 4.9.
Figura 4.9 - SEGRED-SCGAS 1.1 - diagnóstico de falhas em ERPM
O diagnóstico não é feito como na versão do protótipo inicial, com perguntas ao usuário. O sistema apresenta um relatório contendo uma descrição do problema, ou falha, e uma relação das possíveis causas. Na descrição das causas, o sistema especialista tenta identificar os componentes de válvulas, medidores ou filtros, que podem estar com defeito. Juntamente com esta descrição são sugeridas ações corretivas para o problema.
O método de inferência adotado neste protótipo foi o encadeamento direto, de acordo com a redefinição feita no projeto.
4.5	Ajustes no Projeto do Sistema
Como já mencionado anteriormente, foram necessários alguns ajustes nas definições de projeto do sistema especialista, ao longo do processo de desenvolvimento, os quais visam uma correção de rumo, em função de necessidades ou dificuldades identificadas com a aplicação do procedimento incremental.
4.5.1	Mudança de método de inferência
Após a avaliação do protótipo inicial, identificou-se uma peculiaridade no problema de diagnosticar falhas em estações de redes de distribuição de gás natural, a qual esta relacionada com a forma de obter os dados para processar o diagnóstico, ou seja, as entradas do sistema especialista.
A fonte principal de dados de entrada para o sistema especialista é o sistema de aquisição de dados da SCGÁS. Dele são obtidos, automaticamente, os dados de pressão e vazão de todas as estações da rede. Com estes dados o sistema especialista faz uma verificação de problemas e um diagnóstico prévio destas estações, gerando hipóteses e indicando os equipamentos que podem estar em falha.
O passo seguinte consiste em refinar o diagnóstico, pelo qual se determina as causas das falhas apontadas. Pela abordagem através do encadeamento reverso, adotada inicialmente, a máquina de inferência busca informações que comprovem as hipóteses geradas. O sistema especialista solicita informações ao usuário na forma de perguntas durante o processo de diagnóstico. A maioria das perguntas refere-se a informações sobre os equipamentos das estações, as quais precisam ser observadas em campo. Em alguns casos, estas perguntas somente poderiam ser respondidas através de uma inspeção interna dos equipamentos.
Como o desenvolvimento do sistema visa o diagnóstico de problemas a distância, o usuário que opera o sistema em geral não se encontra junto à estação e, por essa razão, não pode fornecer as informações solicitadas.
A partir desta constatação definiu-se que o sistema especialista utilizaria, como entradas, somente os dados provenientes do sistema de aquisição de dados da SCGÁS. Estes dados são transferidos para o sistema automaticamente no início de cada sessão de diagnóstico, o que caracteriza uma aplicação típica de monitoramento da rede.
Segundo GIARRATANO e RILEY (1994), problemas de monitoramento tendem a ser adequados ao uso de ferramentas de sistemas baseados em regras de encadeamento direto, devido à sua natureza orientada a dados. Tipicamente, um conjunto de entradas ou valores de sensores são lidos durante algum ciclo do programa. O processo de inferência ocorre até que o sistema derive todas as possíveis conclusões que podem ser extraídas dos dados de entrada.
Em função desta reavaliação do problema, ficou definido que o método de inferência para o sistema especialista seria o encadeamento direto. Por esta abordagem, a inferência das conclusões a partir das entradas transcorre sem a interferência do usuário. Segundo GIARRATANO e RILEY (1994), isto é consistente com uma abordagem orientada a dados, na qual o raciocínio ocorre dos dados em direção às conclusões que podem ser derivadas dos dados.
4.5.2	Ajustes na interface
No desenvolvimento do protótipo procurou-se dedicar especial atenção na interface com o usuário. Segundo informações obtidas dos especialistas da SCGÁS durante o desenvolvimento do estudo de viabilidade, o aspecto de interface demonstrou ter grande importância.
As modificações necessárias para a interface gráfica foram identificadas ao longo do projeto, através das avaliações dos protótipos feitas pelos especialistas. Os especialistas faziam sugestões para a interface e a equipe de desenvolvimento avaliava as sugestões e buscava implementá-las na medida do possível. Estas modificações foram geralmente referentes ao aspecto visual da interface.
O aspecto visual da interface diz respeito à forma como o usuário visualiza os resultados e informações apresentados pelo sistema. Foram implementadas as seguintes modificações:
•	Criação de um campo permanente na tela principal para visualização dos alertas fornecidos pelo sistema;
•	Visualização do perfil de vazão, pressão ou diâmetro na tubulação ao longo da rede através de uma escala de cores;
•	Inclusão de um esquema da estação nas janelas referentes a ERP e ERPM;
•	Identificação visual de equipamentos em falha na tela das estações;
•	Criação de janelas específicas para cada equipamento das estações, contendo uma representação esquemática e informações a seu respeito;
•	Criação de uma janela para as válvulas de bloqueio de linha, que permita visualizar informações como localização, código, e se o seu estado é “aberta” ou “fechada”.
Os recursos implementados na interface gráfica estão ilustrados no capítulo 5.
4.5.3	Adaptação à disponibilidade de informações
Refere-se, neste item, às informações utilizadas como entrada no sistema especialista. Embora tenha sido feita uma investigação da disponibilidade de dados e informações durante o estudo de viabilidade, algumas restrições foram impostas às entradas do sistema no decorrer do seu desenvolvimento.
Um exemplo de restrição é o caso das informações solicitadas ao usuário sobre os equipamentos das estações durante o diagnóstico, citado anteriormente. Esta mudança forçou a mudança de método de inferência empregado.
Outras restrições são descritas a seguir:
Pressão a montante das estações - inicialmente o sistema considerava a leitura de pressão a montante das estações para a realização de inferências sobre o estado operacional destas. Estes valores eram utilizados, também, para comparação com a pressão calculada pelo sistema, permitindo a ele indicar irregularidades nas medições ou possibilidade de vazamentos na tubulação. Somente em uma fase adiantada do projeto constatou-se que estas informações não estariam disponíveis via sistema de aquisição de dados, o que limitou a capacidade de diagnóstico do sistema.
Pressão a jusante de estações ERP - para o caso das ERP, descobriu-se que nem mesmo os dados de pressão a jusante estariam disponíveis para o sistema. Isto inviabiliza as funções verificação de diagnóstico para estas estações. Além disso, estes dados são necessários para a determinação das pressões a montante das estações ERPM, através do cálculo de perda de carga nas tubulações.
dispor deste dado através do sistema SOI, por se tratar de um parâmetro monitorado pela empresa transportadora.
Apesar destas limitações, o sistema realiza várias funções de grande utilidade para os operadores da rede. O sistema foi implementado com as portas de entradas para estas variáveis, para o caso de serem disponibilizadas no futuro.
Algumas funções do sistema que dependem destes dados, como cálculo de pressões a montante das estações, são realizadas usando-se estimativas e suposições. Como exemplo cita-se o caso das pressões a jusante de ERP, para os quais adota-se o valor do próprio ajuste de pressão da válvula reguladora. Neste caso considera-se que a estação está operando de maneira ideal. O mesmo é feito para a pressão no City-gate.
4.5.4	Inclusão de informações
As tarefas sucessivas de aquisição de conhecimento, implementação e validação do sistema, fornecem ao engenheiro de conhecimento um entendimento cada vez mais profundo do domínio do problema. Ao mesmo tempo, a implementação de novos recursos e saídas para o sistema especialista força o detalhamento cada vez maior das informações envolvidas no processo. Isto faz com que o sistema receba, constantemente, incrementos na base de conhecimento.
Boa parte das informações incluídas no sistema são representadas pelo detalhamento de sua estrutura de classes, seja na forma de atributos, novas classes ou especialização de classes. A evolução da estrutura de classes do sistema pode ser vista nos Apêndices A e B, que apresenta os diagramas de classes do SEGRED-SCGAS 1.1 e SEGRED-SCGAS 1.3, respectivamente. Outras informações traduzem-se em incrementos na base de conhecimento.
Como exemplo destes incrementos na base de conhecimento pode-se citar:
Atributos das classes - a cada novo recurso implementado no sistema surgiam novas informações a serem inseridas na estrutura de classes. Algumas informações foram solicitadas pelos especialistas, tais como códigos de válvulas, localização de estações, dados de clientes, etc. Outras se referem a variáveis internas do sistema, utilizadas em métodos implementados nas classes, como cálculos de pressões e vazões para cada elemento que compõe a rede, definições de estado de objetos, resultados de inferência, relação entre objetos, etc.
Classes referentes a equipamentos de estações - o crescimento da estrutura computacional do sistema especialista forçou o engenheiro de conhecimento a criar classes para representar
equipamentos de estações, como válvulas, filtros e medidores, bem como seus respectivos dados. Antes da criação destas classes, estes dados estavam contidos nas classes de estações. Regras para diagnóstico - com o progresso da aquisição de conhecimento no domínio do problema, novas regras para o diagnóstico e verificação de problemas foram sendo cria dos e implementados na base de conhecimento. Como exemplo, cita-se as regras que detectam falhas nos filtros e medidores das estações.
Conhecimento voltado para a área comercial - com a disponibilidade de informações e conhecimento dos especialistas, o engenheiro adicionou à base de conhecimento algumas regras na que não se referem, propriamente, a questões de diagnóstico. Por exemplo, aspectos referentes ao perfil de consumo dos clientes foram considerados.
Estação de Medição - no decorrer do projeto, um novo tipo de estação começou a ser instalado na rede de distribuição da SCGÁS, as Estações de Medição (EM). Estas estações são responsáveis pela entrega de gás aos postos de gás natural veicular. Foi necessário criar a classe EM, uma especialização da classe ESTAÇÃO, para incluir o novo elemento no modelo da rede. Pelo fato de possuírem uma configuração mais simples que as outras estações, consistindo basicamente em um filtro e um medidor de vazão, a adição destas estações ao sistema não gerou impacto significativo na base de conhecimento para a parte de diagnóstico. Apenas algumas regras para verificação de limites operacionais foram implementadas.
A inclusão das informações anteriormente descritas com relativa facilidade mostrou que este sistema possui algumas das características desejáveis para um sistema especialista, a modularidade da base de conhecimento e a facilidade de modificação.
4.6	Validação do sistema
A verificação do sistema foi feita simultaneamente ao processo de implementação, através de testes repetidos com o sistema para verificar as modificações implementadas. Este processo é facilitado pelo desenvolvimento incremental, onde se procura construir o sistema através de incrementos na base de conhecimento. A verificação de cada regra, ou função, logo após sua inclusão no sistema, é uma maneira eficiente de realizar o processo.
Os resultados obtidos com a validação do sistema, feita pelo pessoal técnico da SCGÁS, foram satisfatórios. De uma maneira geral, os avaliadores do sistema evitaram, até certo ponto, aprofundar-se nas questões referentes à consistência da base de conhecimento. A maioria dos comentários feitos espontaneamente pelos avaliadores foram referentes à interface gráfica e a aspectos funcionais do sistema. Considerações sobre o conteúdo das respostas do sistema foram feitas somente por alguns dos avaliadores, mesmo assim com a participação intensiva do engenheiro de conhecimento para o levantamento destas questões. Pela interpretação do autor, isto ocorreu pela falta de definição de um especialista responsável pelo projeto na organização.
Os protótipos foram apresentados aos especialistas, técnicos e engenheiros, da SCGÁS em entrevistas programadas. Durante estas entrevistas os especialistas tinham a oportunidade de experimentar o sistema e corrigir as ações implementadas pela equipe de desenvolvimento, aprovando ou não a abordagem adotada pelo engenheiro de conhecimento. Nestas oportunidades ainda os especialistas faziam sugestões diversas para o sistema, as quais serviam de orientação para modificações no mesmo de acordo com as reais necessidades da empresa.
Para as versões protótipo, 1.0 e 1.1, utilizou-se a técnica de elaboração de questionários de avaliação, a serem respondidos pelos especialistas durante os testes com o sistema. Esta técnica trouxe bons resultados, mas sua utilização foi dificultada por alguns fatores. Em geral, especialistas possuem pouca disponibilidade para dedicar-se a este tipo de atividade, o que torna difícil a realização de testes sem o auxílio do engenheiro de conhecimento. A presença do engenheiro de conhecimento, por outro lado, tende a tornar o teste do sistema um processo informal, o que empobrece o conteúdo das respostas do questionário.
Boa parte das informações resultantes da validação dos protótipos foi transmitida ao engenheiro de conhecimento de forma verbal. Estas informações foram, posteriormente, registradas de forma escrita para sua consideração na implementação do sistema.
Capítulo 5 - Descrição do Sistema
5.1	Definição do Sistema
A versão final do sistema é denominada SEGRED-SCGAS 1.3, e consiste em uma ferramenta computacional, baseada nos princípios de sistemas especialistas, para o apoio ao gerenciamento operacional de redes de distribuição de gás natural. Seu objetivo é fornecer suporte ao pessoal técnico da SCGÁS na detecção e diagnóstico de problemas operacionais na rede. Para inferir suas conclusões, o sistema combina os seguintes elementos:
•	conhecimento prático de especialistas em operação e manutenção;
•	representação dos elementos que compõem a rede por meio de classes e objetos;
•	monitoramento remoto das variáveis de processo;
•	simulação do escoamento do gás.
Dentro do contexto da operação da rede, o presente sistema complementa as tarefas executadas pelo sistema de monitoramento remoto da rede utilizado pela empresa, denominado SOI. A Figura 5.1 mostra a forma como as funções de ambos os sistema interagem no processo de monitoramento da rede de distribuição de gás
SOI
Banco de
Dados
Verificação dos Dados
Combinação
Inferência
Base de Regras
&gt; Diagnóstico
(saídas)
&gt;	Y
(entradas)
Fatos (alertas)
SEGRED
Figura 5.1 - Suporte para operação da rede - SEGRED x SOI
O SOI possui um banco de dados onde armazena as variáveis de processo das redes de distribuição de gás da SCGÁS. Ele permite aos usuários visualizar as variáveis armazenadas no histórico e também as variáveis sendo lidas na rede a cada ciclo de aquisição. Além de disponibilizar estes dados aos operadores da rede, o SOI pode ser configurado para fornecer
alarmes acerca de situações irregulares na rede. Basicamente, o usuário define limites operacionais de pressão, vazão ou temperatura, e o sistema gera um alarme sempre que alguma variável lida ultrapassar o limite estabelecido.
O tipo de alarme gerado pelo SOI pode ser interpretado como a constatação de uma irregularidade, feita a partir da análise de uma única variável, independentemente das demais variáveis do sistema. Do ponto de vista de um sistema especialista, estas constatações correspondem a fatos. O estado de uma rede, mais propriamente de suas variáveis, em um determinado momento, é definido por um conjunto de fatos. O sistema SEGRED-SCGAS 1.3 combina estes fatos em sua base de regras, por meio de inferências, para derivar conclusões. Este processo oferece maior riqueza na interpretação das informações e permite definir a situação operacional da rede e de seus componentes, fazendo o diagnóstico de falhas em suas estações.
5.2	Domínio de aplicação
O domínio de aplicação consiste no sistema físico modelado, para o qual o sistema especialista realiza as inferências. O SEGRED-SCGAS 1.3 foi desenvolvido para a rede de distribuição de gás da cidade de Joinville-SC. A representação da rede é feita através da criação de instâncias para os elementos que a compõem, de acordo com a estrutura de classes definida.
A escolha desta rede de distribuição de gás foi feita em função de diversos fatores, como complexidade, importância dos clientes e histórico de operação. Esta rede é uma das que contêm o maior número de clientes no estado de SC, e foi a primeira a entrar em operação. Uma representação em forma de esquema da rede, apresentada no Anexo 1, permite visualizar as características desta instalação.
É importante comentar que a base de conhecimento e a estrutura de classes do sistema especialista foram feitas através da abstração dos conceitos de uma rede de distribuição de gás e seus componentes, buscando representar suas características da forma mais genérica possível. Isto garantiu ao sistema a facilidade para modificação do domínio de aplicação, o que permite que o sistema seja adaptado para operar com outras redes de distribuição através da criação das instâncias da nova rede.
5.3	Funções do Sistema
O principal ponto de atuação do sistema é no diagnóstico de falhas em estações, com ênfase para as informações sobre o funcionamento dos equipamentos das estações e falhas em seus componentes, advindas da interação com os especialistas na manutenção da rede.
Apesar disto, outras funcionalidades foram implementadas para complementar as saídas do sistema.
A implementação destas funções foi conseqüência das sucessivas etapas de aquisição de conhecimento, implementação e avaliação dos resultados, realizadas de acordo com o modelo de desenvolvimento incremental. As expectativas e necessidades dos usuários e especialistas foram sendo identificadas ao longo do processo e puderam ser implementadas em função da disponibilidade de informações.
As funções do sistema podem ser descritas de maneira resumida como segue:
•	Visualização da rede, parâmetros operacionais e variáveis de processo;
•	Acesso a informações de componentes da rede;
•	Simulação do escoamento do gás;
•	Avaliação de cenários reais e hipotéticos.
•	Verificação da situação operacional da rede;
•	Verificação da situação operacional de estações;
•	Diagnósticos em estações;
•	Verificação da situação de consumo dos clientes;
Para cada uma destas funções o sistema apresenta saídas específicas, que são descritas nos tópicos seguintes.
Como entradas, o sistema utiliza basicamente dados de monitoramento obtidos do sistema de aquisição de dados da SCGÁS. Algumas informações usadas no processo de inferência são resultados da simulação do escoamento e cálculo de perda de carga, feitos pelo próprio sistema a partir dos dados monitorados.
Para o caso específico de avaliação de um cenário hipotético são necessárias informações inseridas pelo próprio usuário.
Os dados de entrada empregados pelo sistema especialista estão listados na Tabela 5.1 .
Tabela 5.1 - Entradas para o sistema especialista
Entradas para o sistema especialista	
Dados provenientes do sistema de aquisição (SOI)	Pressões instantâneas a jusante de estações ERPM e EM (kgf/cm2) Pressão média das últimas 24h a jusante de estações ERPM e EM (kgf/cm2) Vazão instantânea nas estações ERPM e EM (m3/h) Vazão média das últimas 24h nas estações ERPM e EM (m3/dia) Vazão média do último mês nas estações ERPM e EM (m3/dia)
Dados provenientes da simulação do escoamento	Vazões volumétricas ao longo da rede (city-gate, ERP e tubos) (m3/h) Velocidade de escoamento do gás na tubulação da rede (m/s) Pressões na tubulação ao longo da rede (kgf/cm2) Pressões a montante de estações (ERP, ERPM e EM) (kgf/cm2)
Dados inseridos manualmente pelo usuário (configuração de cenários operacionais)	Ajustes de pressão (set’s) nas válvulas de estações (kgf/cm2) Pressão instantânea a jusante de estações (kgf/cm2) Vazão instantânea em estações ERPM (m3/h)
5.3.1	Visualização da rede de distribuição
Buscando atender às expectativas dos usuários, a interface gráfica foi aprimorada no desenvolvimento das várias versões do sistema, sempre buscando acrescentar informações e funcionalidades e simplificar seu uso. A implementação da interface gráfica do sistema foi feita pelo Sr. Luiz Galaz, que participou do desenvolvimento do projeto SEGRED.
Em relação à visualização da rede de distribuição, chegou-se a uma concepção de interface não muito diferente das primeiras versões do sistema, porém com ajustes que facilitaram o acesso a informações. A tela principal do sistema, Figura 5.2, apresenta uma representação esquemática da rede, conforme as versões anteriores, incluindo apenas os clientes e os diâmetros de tubulação em escala de cores. Acrescentou-se uma janela para visualização de alertas e um campo com a indicação do cenário sendo avaliado (monitoramento). Foram acrescentados clientes e modificações ocorridas na rede, mas algumas informações que eram apresentadas na versão 1.1 foram suprimidas. É o caso das indicações das válvulas de bloqueio de linha, pontos de interferência e nomes de ruas. Estas
informações, embora úteis, atrapalhavam a visualização da rede e complicavam a operação da interface.
Figura 5.2 - SEGRED-SCGAS 1.3 - Tela principal do sistema
5.3.2	Acesso a informações de componentes e equipamentos
O sistema contém informações de componentes e equipamentos da RDGN, definidos na estrutura de classes e armazenados nas instâncias correspondentes. Considerando que pode ser muito útil para um operador da rede acessar estas informações de maneira rápida através da interface gráfica, foram criadas opções específicas para alguns equipamentos contendo informações como códigos, localização, ajustes e outros.
Figura 5.3 - SEGRED-SCGAS 1.3 - válvulas de bloqueio de linha
Além do exemplo mostrado acima, existem janelas específicas para estações (Figura 5.6), válvulas reguladoras (Figura 5.7), válvulas de bloqueio automático e medidores de vazão (Figura 5.8), que são mostradas mais adiante. Algumas destas informações disponíveis nestas telas, como ajuste de pressão em válvulas de estações, são necessárias para que o usuário possa avaliar as respostas fornecidas pelo sistema especialista.
5.3.3	Simulação do escoamento
O sistema realiza a simulação do escoamento de gás na tubulação da rede de distribuição, considerando apenas efeitos resistivos. Através desta simulação pode-se determinar as pressões à montante das estações da rede. Este recurso é de grande utilidade para o sistema especialista, devido ao fato de o sistema de aquisição de dados da SCGÁS não incluir a leitura da pressão a montante das estações.
•	Alerta para pressão insuficiente a montante de estações;
•	Indicação de trechos de rede sub-dimensionados;
•	Indicação de velocidade de escoamento excessiva a montante de estações;
•	Perfil de pressão na tubulação da rede;
•	Perfil de vazão na tubulação da rede.
Como exemplo, cita-se uma inferência feita com base no cálculo de velocidade de escoamento na tubulação a montante de uma estação. O sistema alertar o operador da rede quanto ao perigo de arrastamento de partículas da tubulação para o elemento filtrante da estação, o que pode comprometer a operação. O sistema sugere o aumento da pressão a montante para evitar o problema.
Através da interface gráfica, o usuário pode visualizar as variáveis calculadas ao longo da rede. Como exemplo, a Figura 5.4 apresenta uma tela mostrando em um trecho da rede, onde pode-se visualizar o perfil de vazão na tubulação através de uma escala de cores.
Figura 5.4 - SEGRED-SCGAS 1.3 - perfil de vazão em um trecho da rede
5.3.4	Verificação de situação operacional da rede
Ao ser solicitada uma avaliação de um cenário operacional na rede, real ou hipotético, o sistema dá início a um novo procedimento, que, para efeito de controle interno, é denominado “Atualizar o sistema”. Este procedimento é composto por várias etapas, e é descrito com detalhes mais adiante, na seção sobre o controle do processo do SE.
Para efeitos gerais, as etapas do processo incluem a atualização das variáveis do sistema, análise das variáveis de processo e criação de instâncias de alarmes para indicar problemas. Estes alarmes podem ser visualizados em um campo específico da tela principal do sistema, conforme mostrado na Figura 5.5.
Figura 5.5 - SEGRED-SCGAS 1.3 - alerta acerca de problema detectado na rede
Para gerar os alarmes, é ativado um grupo específico de regras da base de conhecimento, o qual avalia as informações sobre as variáveis de processo e indica a presença de problemas ou irregularidades. Este processo é explicado com mais detalhes adiante, na seção sobre a base de conhecimento.
Abaixo são listados os tipos de alarmes gerados pelo sistema:
•	Pressão insuficiente para operação de estações.
•	Pressão de entrega aos clientes fora de limites definidos em contrato.
•	Pressão acima dos limites de segurança.
•	Vazão excessiva ou tubulação sub-dimensionada.
5.3.5	Verificação de situação operacional de estações
Esta função refere-se a um processo que envolve significativo conhecimento heurístico. O sistema especialista faz uma avaliação das informações disponíveis sobre as variáveis de processo e os parâmetros operacionais da estação para tirar conclusões sobre a situação em que a estação está operando. São apontados irregularidades e problemas com a estação e seus equipamentos. Um grupo de regras da base de conhecimento é ativado para fazer as inferências. Estas regras contêm conhecimento adquirido de especialistas. A Figura 5.6 apresenta o ambiente de uma estação ERPM da rede.
Esta janela contém uma representação esquemática da estação com indicação das variáveis de processo e dos parâmetros operacionais de equipamentos. Abaixo, existe um campo para apresentação de informação textual, onde são apresentadas as conclusões do sistema especialista sobre a situação da estação. Quando existe a indicação de um problema em um dos equipamentos da estação, o respectivo símbolo do equipamento se destaca.
Figura 5.6 - SEGRED-SCGAS 1.3 - estações ERPM
Este processo também é explicado com mais detalhes adiante, na seção sobre a base de
conhecimento do sistema.
São exemplos de saídas fornecidas pelo sistema especialista nesta etapa:
•	Pressão a montante da estação insuficiente para operação.
•	Pressão a jusante de ERPM insuficiente para o fornecimento ao cliente.
•	Equipamentos operando fora dos limites especificados pelo fabricante.
•	Falhas em equipamentos.
•	Vazão excessiva ou tubulação sub-dimensionada.
•	Velocidade de escoamento muito alta.
•	Consumo de cliente fora das definições de contrato.
5.3.6	Diagnóstico em estações
O diagnóstico em estações é o processo seguinte à verificação do estado da estação. Tem por objetivo identificar a origem dos problemas detectados nas estações. Este processo de inferência consiste em partir de hipóteses de falhas geradas no processo anterior e chegar às causas dessas falhas, indicando-as ao usuário como defeito provável. Dentro do contexto de análise de falhas, o processo de diagnóstico assume equipamentos como sistema a ser avaliado. Uma explicação mais detalhada do processo é apresentada na seção 5.4.3 sobre a base de conhecimento.
A Figura 5.7 e Figura 5.8 correspondem ao ambiente para visualização de informações de válvulas reguladoras e medidores de vazão, respectivamente. Além dos dados referentes aos equipamentos, estas janelas apresentam um campo textual para visualizar as conclusões do sistema especialista sobre os problemas encontrados. Estas figuras mostram exemplos de resposta do sistema especialista.
Figura 5.7 - Tela para válvula de redução de pressão
O exemplo de resposta do sistema, mostrado na Figura 5.7, corresponde a um diagnóstico de falha em uma válvula reguladora de pressão para uma situação em que a pressão lida a jusante da estação está acima da faixa de regulagem definida para a válvula. A resposta do sistema é transcrita, na integra, a seguir:
A pressão a jusante da estação está fora da faixa normal de regulagem da válvula reguladora ativa. Isto indica a possibilidade de problemas com esta válvula. Deve-se verificar uma das possibilidades abaixo:
•	Válvula reguladora desajustada. Caso a válvula não tenha sido regulada recentemente, sugere-se conferir o seu Set de pressão.
•	válvula reguladora com diafragma rompido. Nestas condições a válvula está em colapso. efetuar a substituição do diafragma.
•	válvula reguladora não aceita ajuste. Caso a válvula continue a operar de forma inadequada após efetuado ajuste, verificar:
- Eixo central da válvula travado;
Mola do eixo cansada ou mal especificada;
Figura 5.8 - Tela para medidor de vazão
A Figura 5.8 mostra um exemplo de resposta do sistema referente a um medidor de vazão de gás, de uma estação de medição. Representa uma situação em que a vazão no medidor está abaixo da faixa de operação recomendada pelo fabricante. A seguir, a resposta mostrada é transcrita juntamente com um outro exemplo de diagnóstico efetuado em medidores de vazão. Este segundo exemplo refere-se a um problema de temperatura.
A vazão atual não corrigida na estação é de 1.42 m3/h. Este valor está abaixo da faixa operacional recomendada pelo fabricante do medidor. Nestas condições a medição de consumo não é confiável.
A temperatura indicada a jusante da estação é de 51 °C. Considera-se improvável que a temperatura a jusante de uma estação ultrapasse os 50 °C. É possível, portanto, que o transdutor de temperatura deste medidor esteja com defeito ou descalibrado.
5.3.7	Alteração de parâmetros nas estações
Passada esta fase, este recurso mostrou-se de grande utilidade, tanto para a área de operação e manutenção da rede como para a área de projeto.
O sistema permite ao usuário alterar manualmente ajustes de válvulas e variáveis de processo no ambiente de estações ERPM. Na Figura 5.6, mostrada anteriormente, observa-se campos numéricos correspondentes à pressão, vazão e temperatura, os quais permitem a edição por parte do usuário.
O processo de inferência que o sistema realiza é o mesmo para um cenário hipotético ou para um cenário real. Os resultados da avaliação de um cenário hipotético e de um cenário real são exibidos ao usuário da mesma forma, como saídas do sistema.
5.4	Estrutura do Sistema
A estrutura básica do sistema SEGRED-SCGAS 1.3 pode ser descrita pela Figura 5.9.
Figura 5.9 - Arquitetura funcional do sistema
Esta arquitetura foi adotada para o sistema desde o início do desenvolvimento do projeto, sendo que a integração com o sistema de aquisição de dados ocorreu apenas na presente versão. Os módulos definidos para o sistema especialista são implementados em CLIPS. Abaixo descreve-se sucintamente estes módulos:
Simulador - consiste em uma rotina procedural para o cálculo de perdas de carga do escoamento de gás na tubulação. Esta rotina é apresentada no Anexo 2.
Domínio de aplicação - é a definição do sistema físico sendo considerado no problema, que no presente caso é a rede de distribuição de gás de Joinville. Esta rede é representada por uma estrutura de classes, e seus elementos são instancias destas classes. O domínio de aplicação contém as informações referentes ao relacionamento entre os componentes, as informações e variáveis do sistema e os métodos que definem procedimentos. As variáveis são representadas por atributos dos objetos.
Base de regras - a base de regras contém as regras que definem o restante do código do sistema, incluindo regras de controle e regras que definem o conhecimento de especialistas implementado. As regras de controle definem a seqüência de execução das diferentes etapas de processamento. As regras que contêm conhecimento compõem a base de conhecimento do sistema.
A forma como estes módulos do sistema especialista foi implementada é descrita com mais detalhes nas seções seguintes.
5.4.1	Estrutura de Classes
A estrutura de classes tem como principal objetivo representar os elementos que compõem a rede, com seus respectivos atributos e métodos.
Atributos referem-se a características dos elementos representados por uma classe. Neles ficam registradas as variáveis de processo, os parâmetros operacionais e outras informações relacionadas a estes elementos.
Métodos consistem em procedimentos especificados para uma classe. Visam modelar as características funcionais dos elementos descritos pela classe e são definidos por meio de algoritmos. Executam a maioria das tarefas de natureza procedural no sistema especialista.
Métodos e atributos são recursos da orientação por objetos, que facilitam a organização do código e aumentam a modularidade do programa. De acordo com os princípios de herança e polimorfismo, os atributos e métodos definidos em uma classe são automaticamente estendidos para suas subclasses, bem como podem ser redefinidos nas subclasses para representar especializações.
O primeiro protótipo a utilizar a orientação por objetos como paradigma de representação de conhecimento foi o SEGRED-SCGAS 1.1, descrito no capítulo 4. O diagrama de classes detalhado da versão 1.1 é mostrado no Apêndice A.
A estrutura de classes final do sistema é o resultado de sucessivos incrementos realizados ao longo do desenvolvimento dos protótipos. O diagrama de classes do SEGRED-SCGAS 1.3 é mostrado de maneira simplificada na Figura 5.10. O detalhamento deste diagrama está apresentado no Apêndice B.
Figura 5.10 - Diagrama de classes do sistema
A seguir faz-se uma breve descrição das principais classes da estrutura proposta e seus atributos e métodos mais importantes:
Classe: COMPONENTE
Representa os elementos que compõem a estrutura geral de uma RDGN, quais sejam, tubos, estações e válvulas de bloqueio de linha. Uma característica comum a estes componentes é que são conectados uns aos outros, o que representa sua relação semântica dentro do contexto da rede. Estabelecida esta relação, métodos implementados na classe permitem calcular as variáveis de processo ao longo de toda a rede. Os objetos desta classe armazenam ainda o resultado da avaliação de sua situação operacional.
Atributos:
•	compMontante - nome do componente conectado a montante.
•	compJusante - nome do componente conectado a jusante.
•	analise - resultado da avaliação da situação operacional do componente.
Métodos:
•	get-pressMontante - determina a pressão a montante, resgatando a pressão a jusante do componente que o antecede.
•	get-pressJusante - contém procedimentos para determinar a pressão a jusante.
•	get-vazaoMassica - contém procedimentos para determinar a vazão mássica de gás total no componente.
Classe: TUBO
É uma especialização da classe COMPONENTE. Representa os tubos que compõem RDGN, contendo informações sobre as suas características de projeto, parâmetros operacionais e variáveis de processo calculadas. Esta classe é imprescindível para representar o comportamento da rede e fazer a simulação do escoamento de gás. Em seus métodos, são definidos procedimentos para o cálculo da perda de carga no tubo.
Atributos:
•	comprimentoPR - comprimento do tubo.
•	diametro - diâmetro interno do tubo.
•	fatorRugPR - fator de rugosidade que determina a resistência imposta ao escoamento de gás.
•	pressaoMaxPR - pressão máxima de projeto admitida no tubo.
•	temperatura - temperatura do gás no interior do tubo.
•	vazãoVolumetrica - vazão volumétrica calculada no interior do tubo.
•	velEscoamento - velocidade de escoamento calculada no interior do tubo.
•	pressEntrada - pressão no início do tubo.
•	pressSaida - pressão no final do tubo.
Métodos:
•	get-pressJusante - este método é redefinido nesta classe, contendo o procedimento para o cálculo de perda de carga no tubo utilizando a rotina apresentada no Anexo 2.
Classe: ESTACAO
É uma especialização da classe COMPONENTE. Representa as estações contidas na RDGN: CITYGATE, ERP, EM e ERPM. Contém informações sobre a estação e a definição
dos subsistemas que a compõem. Em seus métodos, são definidos procedimentos para avaliar a situação das variáveis de processo em relação aos parâmetros operacionais da estação. Uma característica comum às estações é que estas são compostas por um subsistema de redução de pressão (SRP) e ou um subsistema de medição (SM), descritos em seguida.
Atributos:
•	subsistemas - contém uma referência aos subsistemas que compõem a estação.
•	pressMontanteCalc - valor de pressão a montante da estação, calculado pelo sistema.
Métodos:
•	define-estado-velEscoamento - cria fatos que definem a situação da velocidade de escoamento na estrada da estação.
•	define-estado-temperatura - cria fatos que definem a situação da temperatura do gás na saída da estação.
Classe: SRP
É uma especialização da classe SUBSISTEMA e representa subsistemas de redução de pressão, os quais são parte integrante de estações de redução de pressão da RDGN. Contém a definição dos tramos de redução que o compõem e as variáveis de pressão a montante e a jusante da estação. Em seus métodos são definidos procedimentos determinar a válvula reguladora que está operando na estação.
Atributos:
•	tramos - contém uma referência aos tramos de redução que compõem o subsistema.
•	pressMontante - valor de pressão a montante da estação.
•	pressJusante - valor de pressão a jusante da estação.
Métodos:
•	get-valvula-operando - define a válvula reguladora que está operando na estação.
Classe: SM
É uma especialização da classe SUBSISTEMA e representa subsistemas de medição, os quais são parte integrante de estações de medição da RDGN. Contém informações sobre o
medidor de vazão instalado na estação e outras variáveis de processo obtidas do sistema de aquisição de dados.
Atributos:
•	medidor - referência ao medidor de vazão da estação.
•	temperatura - temperatura lida no medidor.
•	pressao - pressão lida no medidor.
•	pressMedDia - pressão média das últimas 24h.
•	vazao - vazão lida no medidor.
•	vazaoNormMedDia - vazão média das últimas 24h.
•	vazaoNormMedMes - vazão média dos últimos 30 dias.
Classe: EQUIPAMENTO
Representa os equipamentos que compõem uma estação, tais como MEDIDOR, VBLOQAUT, VREG, VSEG e FILTRO, definidos em especializações da classe EQUIPAMENTO. Nos objetos desta classe ficam armazenados os resultados do diagnóstico de falhas, feito pelo sistema especialista. Informações mais detalhadas dos equipamentos são definidas nas subclasses. Estas informações consistem em parâmetros operacionais dos equipamentos, como limites para a pressão, a temperatura e a vazão de trabalho, e outras características funcionais.
Existem, ainda, classes que servem para auxiliar na organização de informações e controle do processo de inferência. É o caso das classes GERENTE e ALARMES.
A classe GERENTE, Figura 5.11, contém informações que servem para auxiliar no controle dos passos de execução do sistema e facilitar a comunicação com a ferramenta de interface. Possui, por exemplo, a definição das escalas de valores para compor as legendas apresentadas na interface. Esta classe também é responsável por criar instâncias da classe ALARME.
GERENTE
+legendaDiametro +legendaVazao +legendaPressao +tempVB : Single +alarmes
+zerarAlarmes() +geraAlarme() +defineEscalaVazao() +defineEscalaPressao()
Figura 5.11 - Classe GERENTE
A classe ALARME, Figura 5.12, contém a definição dos campos que definem um alarme apresentado na interface. Uma instância desta classe é criada sempre que um problema na rede de distribuição for constatado através da análise das variáveis de processo. A criação de alarmes constitui uma etapa do processo de inferência do sistema especialista, sendo descrita com mais detalhes no item 5.4.3.
ALARME
+componente : COMPONENTE +display : Single
+mensagem : String
+gravidade : Single
Figura 5.12 - Classe ALARME
5.4.2	Fatos
Conforme descrito no Cap. 2, fatos correspondem à memória operacional do sistema especialista. Eles contêm informações que representam as características do problema corrente em cada etapa do processo de inferência.
Fatos não possuem uma estrutura definida, podendo ser construídos da forma mais conveniente para a representação do problema. Especificar uma estrutura de fatos é importante para fornecer uma boa estética às informações. Por exemplo, um fato do tipo (2.0) não tem muito significado semântico. Se a este fato for adicionada informação, como (pressão-jusante 2.0), ou ainda (estação-1 pressão-jusante 2.0), os símbolos estação-1 e pressão-jusante dão maior significado ao fato. Nota-se que este fato está no formato convencional objeto-atributo-valor, o qual é mais conveniente para uma pessoa ler e entender.
O CLIPS permite que este tipo de representação seja usado em regras por meio de fatos, templates e também objetos. A máquina de inferência vasculha constantemente a memória
operacional do sistema, buscando satisfazer as premissas das regras. A comparação de um fato ou objeto com a premissa de uma regra pode ser definida como a tentativa de confirmar uma verdade, visando legitimar as conclusões ou ações desta regra.
No presente sistema usou-se simultaneamente a representação através de fatos e objetos na memória operacional. A representação por meio de objetos depende da existência de classes e de objetos instanciados. Os valores para os atributos destes objetos são identificados por campos específicos dentro de uma premissa da regra. Existindo um objeto cujos atributos coincidam com os valores definidos na premissa, esta é satisfeita.
A declaração de objetos nas premissas de uma regra pode ser feita como no exemplo abaixo, extraído de uma regra da base de conhecimento do sistema:
(object (is-a ESTACAO) (name ?estacao) (pressMontanteCalc ?pressMontanteCalc)) (object (is-a EQUIPAMENTO) (name ?equipamento) (pressaoMaxPR ?pressaoMax))
No exemplo mostrado, não foram declarados valores nos campos referentes aos atributos dos objetos, apenas variáveis. Neste caso, ao encontrar objetos que satisfaçam o formato declarado, a máquina de inferência atribui a estas variáveis os respectivos valores dos atributos dos objetos.
Fatos são utilizados no sistema tanto para controlar o processo de inferência quanto para realizar as verificações e os diagnósticos. No caso da verificação da situação operacional da rede e das estações, os fatos utilizados representam as informações geradas a partir da análise das variáveis de entrada, logo após sua aquisição no início do processo. Esta análise classifica a situação das variáveis em relação aos parâmetros operacionais da rede de distribuição e seus equipamentos, transformando dados numéricos em informação simbólica na forma de fatos. Estes fatos possuem vários campos, conforme mostrado a seguir:
Campo:	“analise”	estação	variável	descrição	equipamento
Tipo:	símbolo	nome de instância	nome de atributo	símbolo	nome de instância
Comentário:	identifica estes fatos no controle interno do processo	código da estação onde o problema foi detectado	nome da variável de entrada considerada	descreve a situação da variável	código do equipamento de referência (opcional)
Exemplos:
(analise [ERPM001] pressMontante acima-pressaoMax [VREG003])
(analise [ERPM005] pressJusante abaixo-faixa-regulagem)
Para o processamento de diagnósticos em equipamentos, existe um outro grupo de fatos, criados durante a verificação da situação operacional das estações. Estes fatos correspondem às hipóteses de falha geradas para os equipamentos e servem para orientar o diagnóstico. Estes fatos são semelhantes aos mostrados anteriormente, com uma pequena diferença na
estrutura:
Campo:	“analise”	estação
descrição
equipamento
Tipo:
símbolo
nome de instância
símbolo
nome de instância
Comentário:
identifica estes fatos no controle interno do
código da estação onde o problema foi detectado
descreve uma hipótese de falha
código do equipamento relacionado à
processo
falha
Exemplos:
(analise [ERPM001] vReg-desregulada-menos [VREG001])
(analise [ERPM002] vBloqAut-bloqueada [VBLOQAUT003])
Uma alternativa para a sintaxe destes fatos seria o formato de Templates, também suportado pelo CLIPS. Templates possuem a mesma flexibilidade que os objetos declarados nas premissas das regras.
5.4.3	Base de conhecimento
O sistema SEGRED-SCGAS 1.3 é implementado basicamente na forma de regras e classes. As classes contêm a definição da rede de gás, as variáveis envolvidas no processo e a definição de métodos procedurais para a execução de algumas tarefas. As regras são usadas para fazer o controle dos processos do sistema e para armazenar o conhecimento dos especialistas na solução do problema. Esta seção descreve a estrutura das regras que contêm o conhecimento dos especialistas, ou a base de conhecimento.
A base de conhecimento do sistema é dividida em grupos de regras, ou módulos, para a realização de diferentes etapas de inferência sobre a rede de gás. As etapas são as seguintes:
•	Gerar alarmes para a situação operacional da rede;
•	Verificar a situação operacional das estações;
•	Diagnosticar falhas em equipamentos das estações.
Todas as regras são semelhantes em termos estruturais. Cada módulo de regras é identificado por uma premissa correspondente ao fato de controle que determina qual processo está sendo executado. Existem diferenças apenas com relação às informações consideradas nas premissas e no detalhamento das conclusões.
Para realizar inferência com os três grupos de regras mencionados, é necessário que o sistema tenha feito previamente a análise das variáveis de entrada e a geração dos fatos descritos na seção anterior.
As regras responsáveis por gerar os alarmes para a rede são as mais simples em termos de conhecimento heurístico envolvido. São baseadas nos limites operacionais da rede, e derivam suas conclusões diretamente dos fatos que definem a situação das variáveis de processo. A Tabela 5.2 apresenta a estrutura básica das regras pertencentes a este módulo.
Tabela 5.2 - Regras: gerar alarmes para a situação operacional da rede
Premissas	Ações
Fato de controle:	
(ativar-alarmes)	
Objetos:	Gera instância da classe
ESTACAO; EQUIPAMENTO;	ALARME
TUBO	
Fatos de análise de variáveis:	
(analise ...)	
As instâncias da classe ALARME são geradas quando existe alguma irregularidade nas variáveis lidas ou calculadas na rede, em geral junto a uma estação. A criação destas instâncias é feita através de um método definido na classe GERENTE.
Estas instâncias são usadas para apresentar o problema ao usuário por meio da interface gráfica e devem conter uma descrição resumida do problema, a cor indicando a gravidade e
uma referência ao componente onde o problema foi detectado. Abaixo apresenta-se um exemplo de instância:
[ALARME01] of ALARME
(componente [ERPM003])
(display “ClienteXY”)
(mensagem "Pressão jusante muito alta para CLIENTE")
(gravidade vermelho)
Para as regras que avaliam a situação operacional das estações de entrega de gás aos clientes, as premissas são muito semelhantes às anteriores, porém a avaliação é mais detalhada e feita somente para uma estação de cada vez. A Tabela 5.3 apresenta a estrutura básica das regras pertencentes a este módulo.
Tabela 5.3 - Regras: verificação da situação operacional das estações
Premissas	Ações
Fato de controle: (ativar-analise ?estação) Objetos: ERPM; EM; EQUIPAMENTO; TUBO Fatos de análise de variáveis: (analise ?estação ...)	Gera descrição da situação operacional da estação Gera hipóteses (fatos) de falha em equipamentos (analise ?estação falha ?equipamento)
A descrição da situação operacional da estação é feita de maneira textual e armazenada no atributo “analise” da própria estação, o qual é herdado da super-classe COMPONENTE. Esta descrição é feita com base na combinação dos fatos que definem a situação das variáveis de processo e envolve o conhecimento heurístico dos especialistas.
Como exemplo de heurística para esta análise, cita-se a combinação dos valores de pressão a montante e jusante da estação. Ao invés de simplesmente indicar um problema de pressão baixa a jusante da estação, o sistema avalia simultaneamente a pressão a montante e informa ao usuário se o problema é conseqüência de falha na estação ou se é decorrente da insuficiência de pressão na tubulação da rede.
Ao mesmo tempo em que descreve a situação operacional da estação, as regras deste módulo geram fatos que indicam os equipamentos que podem estar causando um problema constatado através das variáveis. Estes fatos constituem as hipóteses de falha para a estação, as quais servirão como metas para o posterior processo de diagnóstico nos equipamentos.
O módulo de diagnóstico corresponde ao último processo de inferência na avaliação das condições de operação da rede. Tem por objetivo identificar as causas potenciais de falhas em equipamentos de estações, como válvulas, medidores ou filtros. Consiste em um processo semelhante de detecção de causas de falhas executado na etapa anterior, porém em um nível mais específico dentro da hierarquia de sistemas da rede. Enfoca um equipamento específico como sistema para a análise de falhas e tenta indicar o elemento, ou peça, que pode ser a causa da falha no equipamento.
Estas regras são baseadas nas informações sobre modos de falha dos equipamentos, obtidas dos especialistas e organizadas na forma de árvores de falhas (FTA), conforme descrito no Cap. 3. Além dos fatos e objetos utilizados como premissas nas regras das etapas anteriores, as regras de diagnóstico utilizam os fatos que representam as hipóteses de falha para a estação. A Tabela 5.4 apresenta a estrutura básica das regras de diagnóstico.
Tabela 5.4 - Regras: diagnóstico de falhas em equipamentos das estações.
Premissas	Ações
Fato de controle: (ativar-diagnostico ?estação) Objetos: MEDIDOR; EQUIPAMENTO; VREG; VBLOQAUT; FILTRO Fatos de análise de variáveis: (analise ?estação ...) Fatos de hipóteses de falhas: (analise ?estação falha ?equipamento)	Gera relatório para o equipamento: descrição do problema (falha); possíveis causas da falha; sugestão de ações corretivas.
O relatório de diagnóstico do equipamento é feito de maneira textual e armazenado no atributo “diagnostico” do próprio equipamento, o qual é herdado da super-classe EQUIPAMENTO. A visualização destas informações pode ser feita através da interface gráfica, acessando a janela do respectivo equipamento.
5.4.4	Controle do processo
No SEGRED-SCGAS 1.3, o módulo de sistema especialista não opera de maneira independente, pois para realizar suas funções ele precisa interagir com a interface gráfica e com o módulo de aquisição de dados, os quais são implementados em Visual Basic.
O processamento de informações no sistema pode ser dividido em sete etapas bem definidas, desde o início da execução até a conclusão dos diagnósticos. Estas etapas são apresentadas na Figura 5.13.
i___________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
Figura 5.13 - Etapas do processamento de informações no sistema.
O Sistema Especialista realiza as etapas 3 a 7, conforme ilustrado na figura. O controle do processo é passado para o sistema especialista em duas etapas diferentes do processo: Atualizar variáveis do sistema e Analisar situação operacional de estação. Quando isto acontece o SE passa a controlar o próprio fluxo de informações e realiza o encadeamento das etapas subseqüentes.
Uma sistema especialista não permite que o programador especifique exatamente como a solução do problema deve ser implementada. Na verdade, isto consiste em uma de suas principais vantagens, já que é necessário apenas especificar as metas e deixar que o sistema determine como alcançá-las. É necessário, no entanto, estabelecer-se um controle macroscópico do fluxo de informações no sistema. Para esta finalidade existem diferentes métodos, dentre os quais destaca-se o uso de Fatos de Controle nas premissas das regras (SILVA, 1998). Como vantagens, esta abordagem permite que as regras de controle sejam separadas da base de conhecimento e possibilita organizar a base de conhecimento em grupos de regras, o que torna o sistema mais fácil de desenvolver e de manter. Esta técnica permite um maior controle no disparo de regras.
A partir do uso desta técnica, a seqüência de execução dos vários processos e grupos de regras da base de conhecimento do sistema fica condicionada à criação de fatos de controle. Estes fatos são criados por duas regras de controle principais: Atualizar-sistema e Atualizar-estação. Estas regras criam fatos que disparam outras regras, e assim por diante. A Figura
5.14	e Figura 5.15 mostram a ação destas regras sobre as etapas do processo no SE. As informações colocadas entre parênteses representam os fatos de controle. Notar que mesmo as regras de controle principais são disparadas por fatos de controle.
Figura 5.14 - Regra de controle "atualizar-sistema".
O processo “Atualizar o sistema”, mostrado na Figura 5.14, é executado sempre que é solicitada a avaliação de um novo cenário operacional. O objetivo é fazer a atualização de todas as variáveis do sistema e avaliar a situação operacional da rede, com a geração de alarmes. Neste ponto, o usuário pode observar os resultados do processo somente na tela principal, pois não há ainda uma avaliação da situação das estações.
Atualizar as variáveis do sistema - feita a aquisição de dados da rede, o sistema precisa atualizar suas variáveis internas, como cálculos e legendas de cores, definidas nas instâncias. Trata-se de um processo tipicamente procedural, onde as regras de controle apenas estabelecem a seqüência de execução dos cálculos, definidos nos métodos das classes. Nesta etapa, a atualização é feita na seguinte seqüência: 1) pressão calculada a montante das estações; 2) vazão nos tubos; 3) legendas de vazão e pressão; 4) cores nos tubos; 5) coeficiente linear da curva de pressão das válvulas reguladoras.
Analisar as variáveis de processo - neste ponto é feita a comparação das variáveis de processo da rede com os parâmetros e limites operacionais da rede, suas estações e
equipamentos. Esta comparação tem por objetivo definir a situação de cada variável e gerar os fatos utilizados nos processos de inferência posteriores.
Processar alarmes - ativa a base de conhecimento para fazer as inferências sobre a situação operacional da rede. Este processo já foi descrito na seção anterior.
Figura 5.15 - Regra de controle "atualizar-estacao".
O processo “Atualizar estação”, mostrado na Figura 5.15, é executado sempre que é solicitada a avaliação da situação operacional de uma estação. É neste processo que são feitos os diagnósticos de falhas na rede e é executado sempre para uma estação de cada vez. A base de conhecimento é ativada e o sistema realiza inferências para detectar problemas nas estações, indicar possíveis falhas em equipamentos e diagnosticar estas falhas. Neste ponto, o usuário pode observar os resultados do processo na tela de visualização da estação e de seus equipamentos.
Cada um dos processos mostrados acima possui sua própria regra de controle para gerenciar a seqüência de operações e o fluxo de informações. Desta forma, estabelece-se uma hierarquia de controle formada por regras independentes da base de conhecimento do sistema.
Capítulo 6 - Conclusões e Recomendações
O presente trabalho focou no uso da técnica de Sistemas Especialistas para auxiliar no gerenciamento operacional de uma rede de distribuição de gás natural e fazer diagnóstico de falhas em seus componentes e subsistemas. Dentro dessa perspectiva, investigou-se os problemas e as falhas que podem ocorrer nos subsistemas e equipamentos da rede e aplicou-se essas informações no desenvolvimento de uma ferramenta computacional baseada em conhecimento. Esta ferramenta aproveita recursos computacionais disponíveis, como o monitoramento de variáveis físicas e a simulação do escoamento do gás, para fornecer suporte à operação e manutenção da rede de distribuição através de uma interface gráfica amigável. O principal aspecto abordado no trabalho foi o emprego da metodologia existente no desenvolvimento de um Sistema Especialista aplicado a uma RDGN real, numa parceria com a SCGÁS - Companhia de Gás de Santa Catarina. Destacam-se também o estudo das falhas da rede e o uso de técnicas de análise de falha para estruturar a base de conhecimento do sistema. Além disso, a implementação e validação dos protótipos propiciaram uma melhor visão das potencialidades de um sistema desta natureza aplicado como ferramenta de apoio na operação de uma RDGN.
6.1	Análise de falhas em uma RDGN.
Um dos benefícios do estudo realizado acerca das falhas e problemas que podem ocorrer em uma RDGN é a organização e documentação das informações e do conhecimento dos especialistas da organização. Este estudo buscou identificar problemas operacionais na rede e falhas em equipamentos de suas estações.
A expressão “problemas operacionais” deve ser entendida como situações indesejadas que podem ocorrer devido a um consumo irregular de gás por parte dos clientes. Por exemplo, em um determinado horário, vários clientes de um ramal resolvem consumir um volume de gás maior do que o esperado pela equipe de projeto da rede. Esta situação pode acarretar uma sobrecarga de vazão na tubulação, causando a diminuição da pressão nas extremidades da linha, o que compromete o fornecimento de gás.
Para a questão de falhas em equipamentos foram considerados possíveis defeitos ou mau funcionamento de seus componentes internos, que podem comprometer o funcionamento correto de uma estação. Esses problemas são de difícil previsão e ocorrem devido ao tempo de uso ou à operação irregular.
Em ambos os casos, utilizou-se as técnicas de análise de falhas, conhecidas como FMEA e FTA, para a organização das informações obtidas dos especialistas. A forma de interpretação dos eventos do tipo “causa e efeito” viabiliza a aplicação destas técnicas, haja vista que os problemas na rede são detectados, quase sempre, por meio das variáveis de processo monitoradas. Classificando os defeitos nos equipamentos ou o consumo irregular como causa, e manifestação destes nas variáveis de processo como efeito, tem-se uma forma eficiente de visualizar as relações entre estas informações.
As técnicas de análise de falhas empregadas mostraram-se adequadas para organizar o conhecimento dos especialistas acerca da operação e da manutenção da rede. Este recurso facilitou muito a comunicação entre o engenheiro de conhecimento e os especialistas, por fornecer uma forma unificada de documentar as informações.
A tradução das informações de uma árvore de falhas para a forma de regras é praticamente direta, especialmente no caso do encadeamento reverso. Para o encadeamento direto, esta tradução pode ser feita por meio da inversão do sentido de interpretação dos eventos.
6.2	Projeto do sistema SEGRED-SCGAS.
No desenvolvimento do projeto, executou-se, com relativa fidelidade, as etapas propostas na metodologia adotada, a qual mostrou-se bastante eficiente no auxílio às definições necessárias à construção do sistema especialista.
O estudo de viabilidade, realizado antes do início do projeto, trouxe o benefício de permitir uma avaliação realista do problema por parte da equipe de desenvolvimento, sem as pressões decorrentes da necessidade de apresentar resultados. A correta identificação do problema foi de fundamental importância para o sucesso na implementação do sistema especialista.
A implementação do protótipo inicial, denominado SEGRED-SCGAS 1.0, permitiu a melhor identificação das características do problema na fase inicial do projeto. A partir da avaliação deste protótipo, foram feitas algumas correções nas decisões do projeto, dentre as quais destacam-se: a mudança no método de inferência adotado e as adaptações nas entradas do sistema. Esta versão inicial foi desenvolvida segundo o princípio da criação rápida de protótipos, facilitada pela flexibilidade do ambiente shell, sem maiores preocupações com a estrutura computacional do sistema. Esforços adicionais na definição da estrutura do protótipo inicial não compensariam, uma vez que o reaproveitamento do seu foi código inviabilizado pelas modificações efetuadas no projeto.
O modelo de desenvolvimento incremental, caracterizado principalmente pela implementação das versões posteriores ao protótipo inicial, forneceu bons resultados na evolução do sistema especialista. Com o reaproveitamento de boa parte dos códigos, foi possível aperfeiçoar o sistema gradativamente, através de sucessivas etapas de validação e ajustes nos protótipos.
Uma dificuldade enfrentada no projeto foi a questão relacionada à aquisição do conhecimento. Este é um problema normalmente presente no desenvolvimento de sistemas dessa natureza. É necessário um grande esforço para manter os especialistas interessados e cooperando no projeto. É comum os especialistas demonstrarem grande interesse durante as primeiras interações e afastarem-se nas fases seguintes do desenvolvimento. Este problema pode estar associado a uma falha na abordagem adotada pelo engenheiro de conhecimento. Buscar uma interação dinâmica, por meio de incrementos feitos no protótipo de maneira rápida, para refletir as sugestões dos especialistas, pode ser a solução para o problema da aquisição de conhecimento.
Com a experiência obtida no desenvolvimento do projeto, constatou-se que o engenheiro de conhecimento deve buscar gradativamente conhecer mais sobre o domínio do problema. Normalmente, o especialista consultado não fornece o conhecimento espontaneamente, num formato que possa ser implementado. Muitas vezes, o especialista não consegue explicar o próprio conhecimento. Nestes casos, a atuação do engenheiro de conhecimento consiste em compreender os métodos de solução adotados pelo especialista e, posteriormente, implementar a base de conhecimento por intermédio da sua própria interpretação a respeito do problema.
Na maioria das vezes, o conhecimento fornecido pelo especialista carece de detalhes, precisando ser interpretado juntamente com outras informações, disponíveis sobre o domínio do problema, antes de ser codificado de maneira coerente. Em função do exposto, o autor considera que a noção de que o engenheiro de conhecimento não necessita compreender detalhadamente o domínio do problema e que atua como um mero codificador do conhecimento fornecido pelo especialista, faz parte de uma visão romântica, classicamente associada à aplicação de sistemas especialistas.
6.3	Monitoramento assistido por sistemas especialistas
A versão final do sistema, SEGRED-SCGAS 1.3, apresenta funções de grande utilidade para o pessoal técnico das áreas de operação e manutenção da rede de distribuição de gás. As respostas fornecidas combinam as vantagens de um típico sistema de monitoramento com a
riqueza na interpretação das informações, esta possibilitada pelo uso do conhecimento de especialistas.
A aplicação do sistema no monitoramento da rede traz o benefício de aliar a detecção automática de problemas com a realização dos respectivos diagnósticos e a sugestão de ações corretivas, através da análise simultânea das variáveis de processo. Isto implica em um ganho significativo de eficiência no gerenciamento operacional da rede.
O sistema detecta os problemas ocultos nas estações, como por exemplo, medidores operando fora da faixa de vazão especificada pelo fabricante. No referido caso, a conseqüência é a medição imprecisa do consumo do cliente. Este tipo de situação não é evidente para os operadores da rede, pois não se manifesta através das variáveis de processo monitoradas, e não implica em conseqüências imediatas no comportamento do equipamento. Todavia, a indicação de tais problemas é de grande valia para o gerenciamento operacional da rede.
O SEGRED-SCGAS 1.3 foi implementado para operar apenas na rede de distribuição de Joinville-SC. Entretanto, sua estrutura modular permite a adaptação para as demais redes de distribuição, bastando instanciar os elementos da rede e fazer modificações na interface gráfica e no módulo de aquisição de dados, para incluir a representação gráfica e as variáveis de processo da nova rede.
6.4	Recomendações futuras
O estudo das falhas na rede de distribuição pode incluir informações sobre suas respectivas taxas de ocorrência. Esta probabilidade pode ser representada por um índice a ser definido de acordo com a incidência de cada evento. No entanto, estas taxas devem ser definidas de maneira realista para não comprometer a credibilidade do sistema. Em geral, não recomenda a definição destes índices com base, tão somente, na opinião dos especialistas. O ideal é realizar um estudo da probabilidade de ocorrência dos modos de falha por meio do histórico de manutenção dos equipamentos.
conhecimento. A inclusão de informações a respeito dos elementos da rede, ou seja, a adição de novos atributos nas classes do sistema, também representa um potencial aumento das funções e respostas do sistema.
Um ganho significativo para as saídas do SEGRED-SCGAS, seria obtido pela inclusão das leituras de pressão a montante das estações nas entradas. Contudo, para que isto ocorra, estes dados devem ser disponibilizados por meio do sistema de aquisição. Sua utilização permitiria a realização de novas inferências sobre o estado operacional da rede através da comparação entre os valores lidos e calculados.
Para transformar o sistema especialista implementado em uma ferramenta comercial é necessário reestruturá-lo para facilitar a inclusão de novas redes no seu domínio de aplicação. Este recurso não precisa permitir a inclusão ou modificação de uma rede por parte do usuário, podendo ser disponibilizado apenas à equipe de desenvolvimento, que, em geral, é mais indicada para este tipo de ação.
Referências Bibliográficas
ALMEIDA, J. C. Transporte e distribuição. 1999. Relatório interno - Companhia Paranaense de Gás - COMPAGAS. Disponível em: http://www.gasnet.com.br/gasnet_br/distribuicao/art02.htm
ALVES, G. D. Sistema especialista protótipo para diagnóstico de falha em um sistema hidráulico naval. 2001. Dissertação (Mestrado em Engenharia Mecânica) - Programa de Pós-Graduação em Engenharia Mecânica (PPGEM), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis.
ANP - Agência Nacional do Petróleo. Disponível em: http://www.anp.gov.br/; 2000
ASSOCIAÇÃO BRASILEIRA DE NORMAS TÉCNICAS. NBR 12712 - Projeto de sistemas de transmissão e distribuição de gás combustível. Rio de Janeiro: ABNT, 1993.
BEN - Balanço Energético Nacional. Oferta de demanda de energia. Departamento Nacional de Desenvolvimento Energético, 1997.
BITTENCOURT, G. Inteligência artificial - ferramentas e teorias. 1. ed. Florianópolis, Brasil: Editora da UFSC, 1998.
BOOCH, G. Object-oriented analysis and design. Inc: Addison-Wesley Publishing Company, 1994.
BUCHANAN, B. G., SHORTLIFFE, E. H. Rule-based expert systems, the MYCIN experiments of the Stanford heuristics programming project. MA: Addison Wesley, 1984.
CARRICO, M. A., GIRARD, J. E., JONES, J, P. Building knowledge systems - developing &amp;amp; managing rule-based applications. 1. ed. USA: McGraw-Hill, 1989.
CONPET - Conselho Nacional do Petróleo, 1996.
DE NEGRI, V. J.; SILVA, J. C.; KINCELER, R.; CASTELANI, M. R. Estudo de viabilidade de desenvolvimento de software para gerenciamento da rede de distribuição de gás natural de S.c.. Relatório para Companhia de Gás de Santa Catarina SCGÁS - Departamento de Engenharia Mecânica (EMC), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis, 2000.
DURKIN, J. Expert systems design and development. New Jersey, USA: Prentice Hall, 1994.
GASCAT INDUSTRIA E COMERCIO LTDA. Regulador de pressão piloto - operado ARGOS: Catálogo. Indaiatuba - S. P.
GASCAT INDUSTRIA E COMERCIO LTDA. Security shutoff - GIPS/GDPS: Catálogo. Indaiatuba - S. P.
GIARRATANO, J.; RILEY, G. Expert systems - principles and programing. 2. ed. Boston, USA: PWS Publishing Company, 1994.
GONZALEZ, A. J.; DANKEL, D. D. The engineering of knowledge-based systems: theory and practice. Englewood Cliffs, New Jersey, USA: Prentice-Hall, 1993.
KINCELER, R.; DE NEGRI, V. J. Modelagem de linhas de transporte e distribuição de gás natural utilizando-se bond graphs. 2001. Relatório Parcial n° 1 do Projeto SEGRED - Departamento de Engenharia Mecânica (EMC), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis.
KINCELER, R.; DE NEGRI, V. J. Modelagem do regulador de pressão piloto - operado ARGOS de duas polegadas. 2002. Relatório Parcial n° 2 do Projeto SEGRED -Departamento de Engenharia Mecânica (EMC), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis.
KRITPIPHAT, W., TONTIWACHWUTHIKUL, P., CHAN, C.W. Pipeline network modeling and simulation for intelligent monitoring and control: a case study of a municipal water supply system. Industrial and Engineering Chemistry Research Journal, v. 37, p.1033-1044, 1998.
McCARTHY, J., MINSK, M. L., ROCHESTER, N., SHANNON, C. E. A proposal for the Dartmouth summer research project on artificial intelligence. 1955. Disponível em: http://www-formal. standford.edu/j mc/hi story/dartmouth.html.
MINSKY, M. A framework for representing knowledge. MIT-AI Laboratory Memo 306, June, 1974.
NBR 12712 - Projeto de sistemas de transmissão e distribuição de gás combustível. ABNT - Associação Brasileira de Normas Técnicas, 1993.
NEWELL, A., SIMON, H. A. Human problem solving. Englewood Cliffs, New Jersey, USA: Prentice-Hall, 1972.
NGUYEN, T. A., PERKINS, W. A., LAFFEY, T. J., PECORA, D. Knowledge base verification. AI Magazine, vol. 8, no. 2 (Summer), pp. 69-75.
OLIVEIRA, J. B. Curso sobre gás natural: gás natural no Brasil e no mundo. Instituto Brasileiro de Petróleo - IBP. Florianópolis, SC: junho de 1997.
PAULETTI, M. C. Iniciação a operação e manutenção de sistemas de gás. Senai/CTAI, Florianópolis, 2000. Trabalho não publicado.
RICH, E.; KNIGHT, K. Inteligência artificial. 2. ed. São Paulo: Makron Books do Brasil Editora Ltda., 1994.
SAKURADA, E.Y. As técnicas de análise dos modos de falhas e seus efeitos e análise da árvore de falhas no desenvolvimento e na avaliação de produtos. 2001. Dissertação (Mestrado em Engenharia Mecânica) - Programa de Pós-Graduação em Engenharia Mecânica (PPGEM), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis.
SILVA, A. C. Jr., SILVA, J. C. Integração entre sistemas especialistas e simulação para o monitoramento de redes de transporte de gás natural. In: CONGRESSO NACIONAL DE ENGENHARIA MECÂNICA, 2002
SILVA, J. C. Expert system prototipe for hydraulic system design focusig on concurrent engineering aspects. 1998. Tese (Doutorado em Engenharia Mecânica) - Programa de Pós-Graduação em Engenharia Mecânica (PPGEM), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis.
VINADÉ, C. A. C. Sistematização do processo de projeto para confiabilidade e mantenabilidade aplicado a sistemas hidráulicos e implementação de um sistema especialista. 2003. Tese (Doutorado em Engenharia Mecânica) - Programa de Pós-Graduação em Engenharia Mecânica (PPGEM), Centro Tecnológico, Universidade Federal de Santa Catarina (UFSC), Florianópolis.
WATERMAN, D. A. A guide to expert systems. 1. ed. USA: Addison-Wesley, 1986.
AREA
-clientesPR -primeiraValvula -vazaoVolumetricaTotal -vazao MassicaT otal -pressaoEntrada -analise
+zerarAnalise() +vazaoVolumetrica() +vazaoMassica() +get-pressaoValvula()
ELEMENTO
-nome -analise -diagnostico +zerarAnalise()
GERENTE
-interface -analiseGeral +zerarAnaliseGeral()
CITYGATE
-cidade -elementoJusantePR -tempe raturaOP -pressaoJ usanteOP -vazaoOP
-vazao MassicaCitygate -vazaoMassicaRede +vazao MassicaCitygateO
ESTACAO
-codigo -elemento Monta ntePR -elementoJusantePR -set1 -set2 -set3 -set4 -alivio -shutOff -pressaoMontanteMin -pressaoMontanteCalc -tempe raturaOP -pressaoMontanteOP -pressaoJusanteOP -vazaoMassicaMontante -vazaoOP
TUBULACAO
-comprimentoPR -diametroPR -temperaturaOP -fatorRugPR -elementoMontantePR -elementoJusantePR -pressaoMaxPR -deltaPeCalc +get-pressaoJusanteOP() +get-pressaoMontanteOP() +get-vazaoMassicaMontante() +get-vazaoMassicaJusante() +get-vazaoVolMontante()
TE
-elementoMontantePR -elementoJusantel PR -elementoJusante2PR +get-pressaoJusanteOP() +get-pressaoMontanteOP() +get-vazaoMassicaMontante() +get-vazaoMassicaJusante()
VES
-elementoMontantePR -elementoJ usa ntePR +get-pressaoJusanteOP() +get-pressaoMontanteOP() +get-vazaoMassicaMontante() +get-vazaoMassicaJusante()
Apêndice A - Diagrama de classes do protótipo 1.1
ERP
+get-vazao MassicaJ usante() +get-vazaoVolumatricaJusante()
I
ERPM
-tipoCliente
+get-vazaoMassicaJusante()
COMPONENTE		
+compMontante : COMPONENTE +compJusante +analise +prognostico		♦	AREA +estacoes +primeiraValvula : VES +vazaoVolNormal : float +pressEntrada : float +analise +zerarAnalise() 4-vazaoVolNormalQ
+zerarAnalise() +zerarDiagnostico() +get-pressJusanteO +get-pressMontante() +get-vazaoMassica() 4-calcula-vazaoVolNormalQ		
GERENTE
TUBO
PIG
ESTACAO
ALARME
+componente : COMPONENTE +display : Single
+mensagem : String
+gravidade : Single
+legendaDiametro +legendaVazao +legendaPressao +tempVB : Single +alarmes +zerarAlarmes() +geraAlarmeO +defineEscalaVazao() 4-defineEscalaPressaoQ
SUBSISTEMA
•estacao : ESTACAO
♦
EQUIPAMENTO
+tag : String +diagnostico
+comprimentoPR : float +diametroPR : float +temperatura : float +fatorRugPR : float +pressaoMaxPR : float +deltaPeCalc +velEscoamento : float +vazaoVolumetrica : float +vazaoVolNormal : float +pressEntrada : float +pressSaida : float +corDiametro : String +corVazao : String +corPressao : String +get-pressJusante() +get-pressMontante() +vazaoVolMedia() +defineCorDiametro() +defineCorVazao() 4-defineCorPressaoQ
+codigo : String +subsistemas +pressMontanteCalc : float +get-pressMontante() +get-pressJusante() +get-subsistema()

A
SM
SRP
VES
+modelo : String +codigo : String +purgas : String +localizacao : String +estado : String
+medidor: MEDIDOR +dados
+temperatura : float +pressao : float +pressMedDia : float +vazao : float +vazaoNormMedDia : float +vazaoNormMedMes : float
+tramos +pressMontante : float +pressJusante : float +get-tramoO
TRAMO
+funcao : String +situacaoFiltro : String +vBloqAut +vRegMonitora +vRegAtiva
+vSeg
+estado : String
MEDIDOR
CITYGATE
ERP
EM
ERPM
+cidade : String +vazaoVolNormalLida : float +vazaoVolNormal : float +pressReceb : float +pressRecebContr: float
+cliente : CLIENTE
+get-vazaoMassicaO
+cliente : CLIENTE
4-get-vazaoMassicaQ
+tipo : String +vazaoMin : float +vazaoMax : float
VALVULA
+set : float +estado : String
TV
FILTRO
+difPressao : float +estado : String
n
CLIENTE
+nome : String +tipo : String +vazaoContratada : float +pressMin : float

VBLOQAUT
+tipoFalha : String
VREG
VSEG
+funcao : String +tipoFalha : String +coefAng : float +coefLin : float +erro : float
Apéndice B - Diagrama de classes do prototipo 1.3	139
Apêndice C - Resultados da validação do sistema SEGRED-SCGAS
Este anexo apresenta os resultados do processo de validação do sistema realizado com o pessoal técnico da SCGÁS. Apresentam-se na forma de relatórios, contendo as principais correções e sugestões feitas durante a avaliação dos protótipos.
Para as versões protótipo 1.0 e 1.1, foram feitas várias rodadas de teste, com especialistas diferentes. Foi elaborado um relatório para cada um dos protótipos contendo o resultado das avaliações.
A versão SEGRED-SCGAS 1.3 foi avaliada em uma única seção de testes na SCGÁS, na presença de três coordenadores de bases operacionais e uma técnica em operação da rede. Os avaliadores redigiram um relatório com a síntese de suas observações.
O anexo está estruturado da seguinte forma:
Relatório de avaliação do protótipo SEGRED-SCGAS 1.0
Autor - Eng. Márcio Ricardo Castelani
Projeto SEGRED
20/09/2001
Procedimento de Avaliação
O protótipo foi avaliado em duas bases operacionais da SCGÁS, Criciúma (Região D) e Joinville (Região A). A avaliação realizou-se em um período de 2 horas no turno matutino com os especialistas das bases, seguiu o procedimento abaixo:
1)	Definição dos objetivos da avaliação - foi esclarecido aos especialistas sob que aspectos o protótipo deveria ser analisado, e de que forma os resultados desta análise deveriam ser apresentados (respostas ao questionário).
2)	Apresentação do protótipo - o mesmo já encontrava-se instalado em um “Leptop” da SCGÁS. O Eng. Márcio Castelani fez uma demonstração detalhada, explicando a operação do programa, as funções implementadas. Foram simuladas condições para o disparo de diagnósticos e alertas.
3)	Breve discussão a respeito da abordagem adotada, da aplicabilidade e validade das respostas do sistema.
4)	Respostas ao questionário.
Cronograma
•	Base Operacional de Criciúma
Data- 04/09/2001
Participantes:
Eng. Marcio R. Castelani - projeto SEGRED
Eng. Luis Galaz - projeto SEGRED
Luiz Forte - Gerente de Base
Stefane Bonelli Porto - Supervisor da base (Sotel)
André Luiz - Técnico da base (Sotel)
Waldoir Valentim Gomes Junior - Estagiário (SCGÁS)
•	Base Operacional de Joinville
Data- 06/09/2001
Participantes:
Eng. Marcio R. Castelani - projeto SEGRED
Eng. Luis Galaz - projeto SEGRED
Luiz Forte - Gerente de Base
Marcelo C. Cardinot - Supervisor da base (Sotel)
Waldoir Valentim Gomes Junior - Estagiário (SCGÁS)
Resultados
Parte 1 - Interface Gráfica
Em função da forma como as avaliações foram conduzidas, a validação da interface do protótipo ficou prejudicada nos aspectos de operacionalidade do sistema. O sistema foi apresentado pelo engenheiro do projeto e os especialistas não tiveram a oportunidade de opera-lo diretamente. Desta forma, itens como facilidade de acesso de funções e inserção de dados não foram devidamente explorados na avaliação. A validação da interface do sistema ficou assim resumida à avaliação da interface gráfica e da forma como as respostas, ou saídas, são apresentadas ao usuário.
As opiniões foram bastante variadas a respeito da interface gráfica do protótipo. Em Criciúma os especialistas não fizeram uma avaliação da interface separadamente, vinculando-a a aspectos de funcionalidade e aplicabilidade do sistema. Os especialistas em Criciúma reprovaram a interface do protótipo, considerando-a inadequada e ineficiente para a operação local da rede. Já em Joinville, o Supervisor da base achou a interface gráfica do sistema ideal para o tipo de atividade relacionada com a operação.
Observações e recomendações do especialistas
A principal crítica feita à interface do sistema foi com relação à forma de realizar os diagnósticos. Os avaliadores foram unânimes ao afirmarem que o método de fazer perguntas ao usuário torna inviável a aplicação prática do sistema, pois o usuário necessita checar as informações em campo a cada pergunta. Segundo eles os técnicos da empresa, ao saírem a campo, já possuem o processo de diagnóstico mentalizado. Uma sugestão dada foi possibilitar a impressão de um “guia” de solução de problemas, na forma de uma tabela sintoma/causa, para auxiliar no diagnóstico em campo.
O protótipo foi apresentado como uma versão prévia do sistema, no qual a atualização de dados on-line é substituída pela inserção manual de dados de vazão e pressão, apenas para fins de testar as reações e respostas do mesmo. Embora este aspecto da inserção de informações pelo usuário não fizesse parte da avaliação, este foi considerado pelos técnicos um ponto muito negativo do sistema, ficando a recomendação de que este sistema será eficiente somente com a atualização automática de dados. Isto nos mostra que a interação com o usuário deve ser minimizada, buscando-se sempre as inferências baseadas nos parâmetros disponíveis.
A representação da rede em forma de fluxograma é apropriada para a finalidade do sistema. Segundo os especialistas, esta representação auxilia bastante a visualização e operação da rede. Foi sugerida a inserção de informações complementares no gráfico da rede de distribuição, como:
-	válvulas esfera de bloqueio de linha;
-	indicação de pontes ou outros pontos de referência;
-	identificação visual para cada tipo de cliente (símbolo gráfico);
-	informações sobre tipo ou tamanho de estações e tubulações;
Com relação a aspectos gerais de interface foram feitas ainda as sequintes recomendações:
-	criar uma tela anterior à tela principal de trabalho, permitindo o acesso a outros city-gates;
-	criar uma tela para representar graficamente a estação de redução de pressão. Esta tela pode conter um isométrico da estação com a indicação e codificação dos equipamentos, seus parâmetros, histórico de calibrações, “Datasheet”, etc;
-	quando houver algum problema na rede, este problema deveria ser diagnosticado naturalmente com o icone fazendo algum sinal (piscando) e um sinal sonoro;
-	utilizar as cores padrões para os diâmetros nos dutos. Caso não houver cor padrão com relação ao diâmetro, criar cores mais fortes. Os traços poderiam possuir diferenças de espessura;
Fazendo uma analogia entre o SEGRED e o sistema de aquisição sendo implantado na SCGÁS, o Eng. Gustavo Zanin sugeriu que se permitisse no SEGRED a inclusão automática de novos clientes sem a necessidade de se fazer alterações no código do sistema. Tal idéia vai de encontro com a definição feita no projeto de se implementar o sistema para uma rede fixa. Segundo o Eng avaliador, no sistema de aquisição da SCGÁS o usuário tem liberdade de criar uma nova estação, representando-a por um ponto isolado sobre um fundo em forma de mapa geográfico de Santa Catarina. Vale lembrar que, ao contrário do SEGRED, tal sistema não leva em consideração nenhuma relação semântica destes pontos, ou estações, em relação à rede de distribuição.
Foram feitas ainda observações e recomendações mais específicas relacionadas a detalhes da interface do protótipo avaliado:
-	Utilizar a mesma identificação que é usada pela SCGÁS nas estações de redução de pressão. Ex: 44.2??.?? não ERP/ERPM 1,2,3....
-	as unidades elevadas ao quadrados não estão corretas. EX: m2 deveria ser m2.
-	os valores numéricos deveriam ser separados por centena com um ponto. EX: 1234 deveria ser 1.234.
-	as informações que ficam abaixo do gráfico de consumo, leituras e valores, não estão bem organizados.
Parte 2 - Regras de Diagnóstico
Os avaliadores não tiveram a oportunidade de testar exaustivamente o protótipo para validar a base de conhecimento. Por outro lado foi realizada uma demonstração bastante completa dos tipos de inferências feitas. Foram simulados diferentes condições de diagnósticos e alarmes, buscando varrer toda a base de conhecimento implementada. Desta forma os especialistas puderam perceber alguma incoerências existentes no protótipo.
De uma forma geral os especialistas ficaram bastante satisfeitos com o tipo de diagnóstico realizado pelo sistema. Embora a forma de abordagem do problema tenha sido considerada imprópria para a operação da rede, os especialistas acharam-na muito importante como forma de registrar as ocorrências e documentar o conhecimento dos especialistas. Foi
destacada a aplicabilidade do sistema para o treinamento de pessoal novo na empresa e também como ferramenta didática para treinamento em cursos técnicos como SENAI.
Observações e recomendações do especialistas
Novamente foi criticada a forma de interrogar o usuário nos processos de diagnóstico. Tal processo é considerado inviável para a operação da rede nas bases. Neste ponto se encaixa a sugestão de possibilitar a impressão de um “guia” de solução de problemas, na forma de uma tabela sintoma/causa, para auxiliar no diagnóstico em campo. A troca de informação com o operador deve ser o mais suscita possível, pois o operador já sabe os procedimentos a tomar, o tempo é fator decisivo.
Foram destacados algumas incoerências encontradas na base de conhecimento durante os testes do protótipo:
-	em caso de pressão alta a jusante de uma ERPM, deve-se considerar a hipótese de o cliente haver suspendido o consumo repentinamente, fato que provoca o fechamento das válvulas reguladoras a uma pressão acima do valor do Set (até 2,6 kgf/cm2). Segundo os técnicos, este é o fator com maior probabilidade de ocorrência;
-	em caso de haver problemas com a válvula reguladora de pressão ativa, a pressão a jusante da estação oscila, ao contrário de permanecer em um valor fora da faixa aceitável;
-	a consideração de haver falha nas duas válvulas reguladoras, monitora e ativa, para valores de pressão acima do Set é duvidosa. Quando há falha das duas válvulas, a pressão fica acima do Set por tempo limitado, visto que a tendência é haver o fechamento da válvula “shut-off’ e o conseqüente abaixamento da pressão a jusante;
-	o valor de 1 kgf/cm2 para DP no filtro está fora da realidade. Na prática, valores acima de 0,1 kgf/cm2 são considerados altos, exigindo uma verificação em conjunto com a análise de outros fatores como vazão, localização da estação, tipo de estação, etc. Para o valor de 1 kgf/cm2 de DP no filtro, este estaria praticamente bloqueado pela sujeira.
Os especialistas destacaram ainda que os diagnósticos devem ser realizados de maneira distinta para ERPM's e ERP’s, assim como para ERPM’s de diferentes clientes. Estações de redução de pressão comportam-se de maneira particular, dependendo de fatores como tipo de perfil de consumo do cliente, ordem de grandeza do consumo e até mesmo do tipo e estado do equipamento que a compôe. Um exemplo disso é o caso de possibilidade de fechamento da válvula “shut-off’ em função do bloqueio repentino de consumo de gás nas ERPM’s. Em ERP’s isto não ocorre freqüentemente em função de haver uma média de consumo dos clientes.
Em relação a panes ou erros ocorridos durante a realização dos diagnósticos foi observado o seguinte:
-	problema na atualização dos dados para verificar alertas: o sistema não esta atualizando dados para fazer os ALERTAS, somente após fazer DISGONSTICOS;
-	a opção de sintoma “dp alto no filtro” dispara duas vezes a mesma pergunta no módulo de diagnóstico;
-	Resultados dos ALERTAS/DIAGNOSTICOS: nas mensagens, podem ser acrescentados os valores das variáveis. Ex: “A pressao jusante de DOHLER (11.0) esta acima da faixa considerada normal de operação (09.0)”;
-	quando for disparada a ultima mensagem com resposta “Infelizmente a base de conhecimento e....” , mostrar esta mensagem em uma janela de MSGBOX, indicando o fim da consulta;
-	quando o operador interage com o sistema para fazer um diagnóstico e erra uma das respostas “sim” ou “não”, é necessário iniciar todo o procedimento novamente.
De uma forma geral os diagnósticos realizados pelo protótipo despertaram o interesse dos especialistas. No entanto, sugeriu-se uma análise mais cuidadosa das hipóteses geradas para o diagnóstico, respeitando a ordem de probabilidade de ocorrência dos eventos, e uma melhoria nas informações apresentadas ao usuário nos diagnósticos e alertas.
Parte 3 - Questões Gerais
Uma questão muito discutida durante as avaliações foi o monitoramento da rede. Para a operação da rede, maior importância é dada para o monitoramento. Os especialistas destacaram repetidamente seu interesse nos alertas que o sistema pode fornecer. Segundo eles, para fins de operação da rede de distribuição de gás a base de conhecimento especialista só agrega valor ao sistema se combinada com a atualização on-line de parâmetros, mostrando-os continuamente em uma tela de operação juntamente com os respectivos alertas de situações anormais. Este ponto foi muito enfatizado pelo pessoal técnico da base durante a avaliação.
Outro ponto bastante discutido foi o acesso da equipe técnica ao sistema, ou seja, quais serão os usuários do sistema dentro da empresa. O pessoal técnico das bases mostrou-se muito interessados no acesso às informações que o SEGRED pode fornecer, principalmente na parte de alertas e diagnósticos com base na medição dos parâmetros da rede on-line.
Em relação à aplicação do SEGRED na operação da rede, o Eng. Gustavo sugeriu a criação de aplicativos ou senhas especiais para as bases operacionais, que permita acesso personalizado à correspondente região da rede, de onde os técnicos podem atualizar dados de parâmetros, históricos, assim como responder perguntas de escopo local do sistema.
Já o Gerente da base, Luiz Forte, tem a opinião de que o sistema deveria atuar em uma central de operação da rede 24 horas, seguindo o modelo adotado pela TBG. Operadores experientes acompanhariam remotamente o funcionamento da rede e as informações e medidas de emergência seriam repassadas para as bases através de telefone.
O sistema deve proporcionar uma agilidade nas operações, dando informações precisas ao operador a respeito dos problemas detectados em campo. Deve auxiliar o técnico na confecção dos relatórios, tornando as informações claras e organizadas, disponibilizando dados como: falhas mais freqüentes, histórico dos equipamentos, etc.
Além da temperatura e pressão a jusante e vazão nas estações, deveriam ser monitoradas as pressões a montante e a posição das válvulas “shut-off”. Isto tanto para ERPM quanto para ERP. Os técnicos justificam isto pela possibilidade de adiantar a ocorrência de problemas pela detecção de possíveis variações acentuadas na pressão a montante das estações.
Uma aplicação interessante do sistema seria a indicação das válvulas de bloqueio a serem acionadas em caso de isolamento de um trecho da rede para manutenção ou furação em carga.
A freqüência de amostragem de dados de 1 hora, estimada pelo especialista responsável pela instalação do SOI, é insuficiente para o monitoramento a nível de operação.
Recomendações Futuras
1)	Criação de um histórico de manutenção para os equipamentos. Este histórico pode ser atualizado para cada equipamento separadamente através da tela de representação gráfica do equipamento, referenciada anteriormente.
2)	Criação de um cadastro de procedimentos da SCGÁS, o qual vai facilitar a documentação e acesso a esses procedimentos. Tais cadastros podem ser editados em arquivos “pdf”.
3)	Criação de funções relacionadas ao “DaraSheet” da empresa, possibilitando o acesso a relatórios contendo listagens de equipamentos de estações, regulagens, históricos de parâmetros, etc.
4)	Controle de calibração dos equipamentos. Períodos e sugestões de intervalos entre calibrações.
Conclusão
O protótipo foi considerado bom para uma versão preliminar. Apresentou excelente desempenho em relação ao tempo de resposta. Sabe-se também que a base de conhecimento pode ser facilmente expandida e combinada com funções de simulação e monitoramento, o que indica um forte potencial de desenvolvimento do sistema. Além disso, foi de fundamental importância para a análise do trabalho desenvolvido e para a geração de idéias. Através de sua avaliação se obteve uma visão melhor do potencial de uso deste sistema, permitindo fazer-se correções no trabalho para atingir os resultados esperados.
Vale destacar alguns aspectos do projeto que, após os processo de avaliação, carecem de uma definição:
-	acesso ao sistema pelos diferentes usuários da empresa;
-	abordagem relação à questão de aquisição de dados (monitoramento da rede);
-	nível de detalhamento nos diagnósticos;
-	forma de interação com o usuário nos diagnósticos;
-	considerar monitoramento de pressão à montante das estações;
-	considerar monitoramento de posição das válvulas “shut-off”.
Relatório de avaliação do protótipo SEGRED-SCGAS 1.1
Autor - Márcio Ricardo Castelani
Projeto SEGRED
20/12/2001
Entrega do protótipo - 05/11/2001
O protótipo inclui a maioria das modificações sugeridas pelos especialistas durante as avaliações do primeiro protótipo e ainda outras definidas pela equipe de desenvolvimento. É totalmente orientado a objetos e realiza cálculo de perda de carga na tubulação para escoamento em regime permanente.
Procedimento de Avaliação
O protótipo foi avaliado na sede da SCGÁS em Florianópolis e na base operacional de Joinville (Região A). Todas as avaliações seguiram o procedimento abaixo:
-	Definição dos objetivos da avaliação - foi esclarecido aos especialistas sob que aspectos o protótipo deveria ser analisado, e de que forma os resultados desta análise deveriam ser apresentados (comentários e respostas do questionário).
-	Apresentação do protótipo - o Eng. Márcio Castelani fez uma demonstração detalhada, explicando a operação do programa e as funções implementadas. Foram simuladas condições para o disparo de diagnósticos e alertas.
-	Breve discussão a respeito da abordagem adotada e das respostas do sistema.
-	Anotação das sugestões e críticas do pessoal técnico.
Em função do tempo disponível para as avaliações e do diferente grau de especialidade dos técnicos envolvidos, as críticas e recomendações foram mais voltadas para os aspectos de interface gráfica e funcionalidades do protótipo apresentado. Pouco se discutiu a respeito da validade das respostas dadas pelo sistema, assunto que será explorado em oportunidades futuras.
Cronograma
• Sede da SCGÁS em Florianópolis
Data- 29/11/2001
Eng. Marcio R. Castelani - projeto SEGRED
Dr. Ing. Arno Bollmann - consultor SCGÁS
Eng. Daisy Lovera - Gerente de Planejamento e Novos Negócios da SCGÁS Eng. Ricardo Borba - depto. Comercial
Data- 20/12/2001
Eng. Marcio R. Castelani - projeto SEGRED
Eng. Luis Galaz - projeto SEGRED
Eng. Ricardo Borba - depto. Comercial
Data- 20/12/2001
Eng. Marcio R. Castelani - projeto SEGRED
Eng. Luis Galaz - projeto SEGRED
Eng. Mauro - Gerente interino depto. de Operações
• Base Operacional de Joinville
Data- 18/12/2001 Participantes:
Eng. Marcio R. Castelani - projeto SEGRED
Luiz Forte - Gerente de Base
Marcelo C. Cardinot - Supervisor da base (Sotel) Pedrinho - Técnico da base (Sotel)
Avaliação Individual:
Adib Paulo Abdalla Kurban - Coordenador técnico TBG
Parte 1 - Interface Gráfica
Todos os especialistas mostraram-se bastante surpreendidos com a evolução da interface do protótipo em relação às versões anteriores. De uma forma geral a interface foi considerada apropriada para o tipo de aplicação almejada para o sistema. O Coordenados técnico da Base operacional de Joinville adicionou ao questionário de avaliação o seguinte comentário: “O sistema apresentado mostrou grande evolução de interface em relação à última versão, mostrada em agosto de 2001, estando cada vez mais próximo do objetivo inicial”.
Os principais pontos comentados a respeito da interface durante as avaliações foram os seguintes:
-	Indicação de situações de emergência - sugeriu-se desenvolver a forma de apresentar os alertas ao usuário. Os tais alertas deveriam aparecer automaticamente (supondo que haja monitoramento on-line dos parâmetros) na tela do sistema indicando o problema com o uso de recursos gráficos, como mudança de cores ou elementos que piscam, e sinal sonoro;
-	Modificação da rede - os avaliadores foram unânimes em afirmar que o sistema deve permitir ao usuário a modificação e expansão da rede via interface gráfica, sob pena de não ser aplicável à realidade dinâmica da empresa.
O engenheiro Giancarlo L. Bedin do departamento de engenharia e projeto da SCGÁS, GEREN, testou o sistema rapidamente na ocasião da entrega e forneceu os seguintes comentários:
-	as janelas que mostram os códigos e localização de válvulas e também pontos de interferência da rede são pouco práticas e tornam-se inconvenientes, pois sua remoção da tela de trabalho é difícil;
-	nas telas de trabalho das estações de redução e clientes o sistema deveria mostrar as pressões calculadas pelo sistema, juntamente com as pressões inseridas pelo usuário, sem que seja necessário haver um problema para que tal dado torne-se acessível;
O Sr. Arno Bollmann, consultor financeiro da SCGÁS, fez alguns comentários a respeito do protótipo em uma apresentação feita na empresa, dentre os quais pode-se destacar:
-	permitir a inserção de novos clientes e também a alteração de clientes ou elementos da rede já existentes;
-	proporcionar visualização de situações de emergência de forma mais simplificada e com a utilização de recursos gráficos e sonoros. Ex: sinal luminoso;
-	permitir visualização de vazões, pressões e diâmetros na tubulação por meio de faixas de cores, permitindo, entre outras coisas, identificar o tramo da rede com maior demanda instantânea de gás rapidamente;
-	para a visualização dos resultados deve-se buscar os padrões de unidades adotados pela empresa para cada parâmetro. Ex: vazão de gás em m3normal/dia. Para alguns casos há variação de unidades entre os departamentos da empresa, então pode-se optar por apresentar estes parâmetros operacionais em diversas unidades;
-	é interessante evitar a indicação repetida de situação normal de operação dos elementos, sob pena de tornar a operação do sistema cansativa para o operador;
-	no protótipo em questão foi usado o mesmo símbolo para pontos de interferência da rede e pontos de espera para clientes futuros. Alterar o símbolo usado para representar pontos de espera de clientes;
O Sr. Adib Kurban, coordenador técnico da TBG em Florianópolis, também fez algumas sugestões para o protótipo da SCGÁS em uma reunião realizada no LASHIP. Dentre outros comentários vale destacar os seguintes:
-	em relação às unidades dos parâmetros operacionais da rede, seria interessante empregar o sistema internacional de unidades, buscando uma maior padronização no setor;
-	ao contrário do que afirmou o Sr. Arno, Adib achou interessante a indicação de situação normal de operação da rede, embora não na forma que é feita no protótipo. Tal indicação seria mais adequada se fosse feita por meio de cores ou outros recursos gráficos;
O Coordenador da base operacional de Joinville, Marcelo Cardinot, novamente elogiou a aparência do sistema. Segundo ele a interface gráfica é muito prática e funcional para a operação nas bases. Fez ainda os seguintes comentários:
-	o desenho da rede já estava defasado na data das avaliações. Há novos clientes operando na mesma, os quais devem ser inseridos;
-	a janela de trabalho do City-gate deve apresentar uma foto do city-gate da SCGÁS, assim como uma lista de componentes e os respectivos parâmetros operacionais abaixo. Talvez fosse conveniente, dada a definição de city-gate adotada no protótipo, excluir a janela de trabalho do mesmo e incluir as respectivas informações juntamente com a ERP1, pois a definição de city-gate, na forma como está, se confunde com a definição da ERP1;
-	retirar o sombreado do fundo na tela principal;
-	corrigir os isométricos das ERP's. Estas estações não possuem by-pass, ou ligação entre os tramos. Inserir a representação dos filtros, manómetros, termômetros e computadores de vazão;
-	melhorar o contraste das cores para diferentes diâmetros de tubulação;
-	permitir a alteração dos set's nas válvulas de redução;
-	incluir janela do sistema de odorização, SOD;
-	incluir janela para os retificadores de proteção catódica;
-	incluir Alerta sonoro com tela de alarme piscando;
O engenheiro Mauro, então gerente interino de operações, fez a seguinte recomendação para a interface do sistema:
- criar uma janela específica para cada equipamento das estações ou subsistemas da rede, tais como válvulas de redução e segurança, cuja manutenção ou acompanhamento faz parte da rotina de operação da rede. Estas janelas devem incluir dados de manutenção sobre os respectivos componentes.
Abaixo apresenta-se um modelo sugerido para estas janelas:
-----------M------------------
TAG:		M			► Almoxarifado
Válvula ‘xyz'....		—►
Diâmetro: 6”		Oficina
Histórico		
Última regulagem:			
Em relação aos alertas fornecidos pelo sistema, um dos aspectos mais comentados pelos avaliadores do sistema, o Gerente da Base operacional de Joinville, Luiz Forte, forneceu uma classificação preliminar para a prioridade no disparo de alertas em situações de emergência:
1	- falta de gás
2	- pressão excessivamente alta (acima shut-off)
3	- vazão muito alta
4	- pressão excessivamente baixa
Funções do sistema
Os técnicos e engenheiros da empresa ficaram satisfeitos com o resultado do protótipo e concordaram com as funções apresentadas. No entanto, durante as avaliações, concentraram-se em divagar sobre as funcionalidades que podem ainda ser acrescentadas ao sistema. Desta forma, o que deveria ser uma validação do sistema tornou-se uma lista de recomendações para implementações futuras, o que também é importante para o projeto
Pode-se destacar como principais aspectos comentados pelos especialistas os seguintes:
-	Monitoramento on-line - interligação do SEGRED com o SOI (sistema de aquisição de dados) para aquisição de parâmetros da rede lidos em campo, visando principalmente a rápida identificação de problemas operacionais;
-	Simulação em regime transiente - utilização deste recurso para prever tempo remanescente de fornecimento ou possibilidade de falta de fornecimento em casos onde haja aumento repentino de consumo de gás ou fechamento de um ou mais tramos para manutenção;
-	Modificação da rede - permitir, conforme citado anteriormente, a modificação ou expansão da rede de forma facilitada para que o usuário possa, inclusive com o uso de simulação dinâmica, realizar tarefas de projeto como contratação e inclusão de novos clientes.
O engenheiro Giancarlo Bedin ateve-se basicamente a estas questões funcionais listadas acima. Suas observações foram as seguintes:
-	o sistema deve operar integrado com o sistema de aquisição de dados on-line (SOI);
-	o sistema deveria permitir a expansão da rede, com a possibilidade de inclusão de novos clientes. Na sua opinião este ítem é importante pois a realidade da SCGÁS é muito dinâmica;
O Sr. Arno acrescentou mais algumas idéias:
-	incluir informações a respeito de prioridade interna no consumo de gás para cada cliente. Alguns clientes possuem linha de produção bem estruturada e sabem informar que fornos podem ou não ser desligados em caso de haver deficiência no fornecimento de gás por parte da rede. O sistema deve conter estas informações e usá-las quando necessário;
-	fazer comparações com vazão sendo consumida e vazão esperada para cada cliente, indicando problemas de fornecimento;
O Coordenador Técnico da base norte (Joinville), Marcelo C. Cardinot, mostrou-se muito empolgado em relação à aplicabilidade do sistema dando suporte à operação nas bases. Destacou a importância do sistema como uma forma de integração entre os dados de registro e histórico dos equipamentos da rede e seus parâmetros operacionais, além da representação gráfica da rede e dos diagnósticos do sistema. Destacam-se as seguintes recomendações:
-	Monitoramento em tempo real de todas as variáveis da rede de gás, incluindo pontos intermediários como tubulação e medidores em ERPS, o que hoje é inexistente fisicamente;
-	Identificar cada equipamento mostrado na rede, incluindo dados de “data sheet” das ERPS/ ERPMS. Esta recomendação estáde acordo com àquela feita pelo eng. Mauro, ilustrada anteriormente. Deve-se pesquisar os dados hoje disponíveis em forma de “datasheet” na empresa para incluí-los no sistema;
O engenheiro Ricardo Borba, do departamento comercial da empresa, deu sua primeira contribuição ao projeto participando desta avaliação. Suas recomendações para o sistema estão relacionadas ao seu ramo de atividades na empresa, que consiste em avaliar novas contratações e estimar faixas de consumo permitidas para novos clientes:
-	verificar a influência da vazão de pico (VP) de um ou mais clientes sobre os demais clientes da rede. Deve-se considerar os seguintes aspectos:
-	simulação em regime transiente.
-	freqüência mínima de atualização de 1h.
-	considerar VP = 1,2 * VM como padrão estimado.
-	incluir uma análise probabilística da ocorrência de picos simultâneos para os clientes da rede com base em dados de históricos de consumo. À princípio simular toda a rede, mas prevendo a simulação de ramais isolados.
-	inclusão de novos clientes e o efeito de seu consumo na rede de distribuição. Para fins de contratação, determinar máximos VM e VP para um novo cliente e em que horários;
-	Permitir ao usuário alterar os parâmetros de referência de gás natural (P, T, Pcs). Incluir a composição do gás para os cálculos;
-	Em situações de emergência, considerar os seguintes fatores para priorizar ações:
-	Volume consumido;
-	Prejuízo com a parada de fornos;
-	Hospitais e outros (prioridade maior).
-	Numero de tramos de redução da estação;
-	Em caso de emergência, indicar o nome e telefone da pessoa de contato para cada um dos clientes envolvidos, para negociar redução de consumo ou avisar possível parada de fornecimento;
As recomendações do eng. Mauro em relação às funcionalidades oferecidas pelo SEGRED seguem a mesma linha de outros avaliadores anteriormente descritos, levemente adaptada para a visão operacional da GEOP (depto. de operação da SCGÁS):
-	Importa para a GEOP a previsão de problemas operacionais. Tal previsão deve ser feita com base com base nos perfis de consumo dos clientes e na simulação do escoamento. A simulação pode ser em regime transiente ou permanente, desde que atenda aos requisitos mínimos de segurança na análise do fornecimento de gás;
-	Monitoramento de parâmetros operacionais, considerando não só leituras instantâneas, mas comportamento ao longo do tempo. Segundo o eng. Mauro, é importante perceber quedas ou aumentos acentuados de pressão junto às estações;
Relatório de avaliação do sistema SEGRED-SCGAS 1.3
SCGÁS março de 2003
Após a avaliação da versão final do sistema, feita pelos coordenadores de três bases operacionais da SCGÁS na presença do engenheiro de conhecimento, foram feitas as seguintes observações:
1.	Levar em consideração para determinação da vazão máxima e mínima em uma estação, a “grelha” instalada nas válvulas reguladoras e a placa restritora instalada na saída das estações GASCAT e EM, onde houver medidor rotativo tipo Lóbulo.
2.	Desejável monitorar pressões à montante das ERPs, ERPMs e EMs para se providenciar ações inerentes à sobre-pressão na RCGN e falta de gás.
3.	A comunicação SOI/SEGRED deve apresentar total conformidade (isto inclui especialmente situações em tempo real).
4.	A velocidade de escoamento, deverá servir de parâmetro para assegurar a integridade do odorante (obs: velocidade mínima do escoamento para não degenerar o odorante).
5.	Observar condições especiais para pressão e temperatura de entrega (Caso EM, Veja do Sul).
6.	Recomendação de regulagem de pressão para compensação de insuficiência de instalação do cliente deverá ser removida, pois não pode-se regular para uma pressão diferente.
7.	Enviar mensagens para determinadas situações, tais como: “Foi registrada uma queda de pressão na Rede”. Criar um sistema de registro de anomalias. (Deverão ser definidas juntamente dom a GEOPE).
Anexo 1 - Fluxograma da rede de distribuição de gás de Joinville-SC
Fstrnda da Ilha
Anexo 2 - Rotina para o cálculo da perda de carga em tubos
;* Este arquivo contém a definição da classe DELTAPE, e métodos inerentes
;* A classe DELTAPE é o protótipo de um simulador de estado permanente. Ela
;* fornece recursos para cálculo da perda de carga em uma tubulação, considerando
;* o estado permanente
;* As unidades padrão para uso das funções:
;* Pressão -&gt; [N/m2]
;* Temperatura -&gt; [K]
;* Vazão -&gt; [Kg/s]
;* Comprimento -&gt; [m]
.*
;* PROPRIEDADES:
;* cteGas, vAbs, *pAtm*, *zeroAbs*, tubo
;* MÉTODOS:
;* massaEspecifica, vazaoMassica, pressaoAbs, inPram, CPraK, areaTubo,
;* deltaPe, reynolds, velocidadeEscoamento, ffriccao, resistenciaEscoamento,
;* setPressaoFinal, KgfPraPa, PaPraKgf
.*
;* Autor: Alvino C. da Silva Junior
;* Florianópolis, 05 de novembro de 2001
;* Constantes usadas em cálculos
(defglobal
;* Pressão atmosférica em [Pa]
?*pAtm* = 101325
;* Zero absoluto em [K]
?*zeroAbs* = 273
)
;* Definição da classe
(defclass DELTAPE (is-a USER) (role concrete)
.*
;* MANIPULADORES
.*
(message-handler velocidadeEscoamento)
(message-handler reynolds)
(message-handler ffriccao)
(message-handler resistenciaEscoamento)
(message-handler deltaPe)
(message-handler calculePressJusante)
.*
;* PROPRIEDADES
.*
;* Funções usadas especificamente nesta classe
;* Calcula a massa específica de um gás em [kg/m3] dado a pressão
;* em [N/m2] e a temperatura em [K]
(deffunction massaEspecifica (?pressao ?temperatura ?cteGas)
(/ ?pressao (* ?cteGas ?temperatura) )
)
;* Calcula a área da seção transversal de um tubo em [m2], dado o diâmetro do tubo em [m]
(deffunction areaTubo (?diametro)
(/ (* (pi) (** ?diametro 2) ) 4 )
)
;* Transformação de unidades de [in] para [m]
(deffunction inPram (?comprimento)
(* ?comprimento 0.0254)
)
;* Transformação de unidade de [oC] para [K]
(deffunction CPraK (?temperatura)
(+ ?temperatura ?*zeroAbs*)
)
;* Transformação de unidades de [N/m2] ou [Pa] para [Kgf/cm2]
(deffunction PaPraKgf (?pressao)
(* ?pressao 0.0000101972)
)
;* Transformação de unidades [Kgf/cm2] para [N/m2]
(deffunction KgfPraPa (?pressao)
(* ?pressao 98066.5)
)
;* Transforma pressão relativa dada em pressão absoluta em [Pa]
(deffunction pressaoAbs (?pressao)
(+ ?pressao ?*pAtm* )
)
;* Manipuladores
;* Calcula a velocidade de escoamento em um tubo em [m/s],
;* assumindo o regime como sendo permanente. para tal são usados os
;* parâmetros de pressão, vazão e temperatura, colocados no objeto que representa
;* a tubulação.
(defmessage-handler DELTAPE velocidadeEscoamento (?tempTubo ?pressTubo ?vazaoTubo ?diamTubo)
;* Massa específica do gás dentro do tubo
(bind ?roi (massaEspecifica (pressaoAbs ?pressTubo) ?tempTubo (dynamic-get cteGas) ) )
;* A velocidade de escoamento
(/ ?vazaoTubo (* ?roi (areaTubo ?diamTubo) ) )
)
;* Manipulador que calcula o número de Reynolds
(defmessage-handler DELTAPE reynolds (?tempTubo ?pressTubo ?vazaoTubo ?diamTubo)
;* A velocidade de escoamento
(bind ?vel (send ?self velocidadeEscoamento ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo) )
;* Massa espacífica do gás dentro do tubo
(bind ?roi (massaEspecifica (pressaoAbs ?pressTubo) ?tempTubo (send ?self get-cteGas) ) )
;* O número de Reynolds
( / (* ?roi ?vel ?diamTubo) (send ?self get-vAbs) )
)
;* Manipulador que calcula o coeficiente de fricção do tubo
(defmessage-handler DELTAPE ffriccao (?fatorRug ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo)
;* Cálculo do número de Reynolds
(bind ?Re (send ?self reynolds ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo) )
(if (&gt; ?Re 2300)
then
(/ (* 4 0.0625) (** (log10 (+ (/ ?fatorRug 3.7) (/ 5.74 (** ?Re 0.9) ) ) ) 2) )
else
(/ 64 ?Re)
)
)
;* Manipulador que calcula a resistência ao escoamento em [ms-1]
(defmessage-handler DELTAPE resistenciaEscoamento (?compTubo ?fatorRug ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo)
;* A velocidade de escoamento
(bind ?vel (send ?self velocidadeEscoamento ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo) )
;* O fator de fricção
(bind ?ffric (send ?self ffriccao ?fatorRug ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo) )
;* A resistencia ao escoamento
(/ (* ?ffric ?compTubo ?vel) (* 2 ?diamTubo (areaTubo ?diamTubo) ) )
)
;* Este manipulador calcula a queda de pressão relativa no tubo em [Pa].
;* A queda de pressão é igual à resistencia ao escoamento vezes a vazão mássica.
(defmessage-handler DELTAPE deltaPe (?compTubo ?fatorRug ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo)
;* Resistência ao escoamento
(bind ?R (send ?self resistenciaEscoamento ?compTubo ?fatorRug ?tempTubo ?pressTubo ?vazaoTubo ?diamTubo) )
;* A queda de pressão no tubo em [Pa]:
(* ?vazaoTubo ?R)
)
;* Este método faz o cálculo do delta pe em uma tubulação, dividindo a amesma em "?n"
;* partes de modo que o comprimento de cada parte seja&amp;lt;= 1000 m.
(defmessage-handler DELTAPE calculePressJusante (?tubo)
;* Recuperação das variáveis de interesse na tubulação e converção das unidades
(bind ?tempTubo (CPraK (send ?tubo get-temperatura) ) )
(bind ?pressTubo (KgfPraPa (send ?tubo get-pressMontante) ) )
(bind ?vazaoTubo (send ?tubo get-vazaoMassica) )
(bind ?diamTubo (inPram (send ?tubo get-diametroPR) ) )
(bind ?compTubo (send ?tubo get-comprimentoPR) )
(bind ?fatorRug (send ?tubo get-fatorRugPR) )
;* O comprimento discretizado. O tubo é dividido de modo que cada
;* comprimento fique com no máximo 1000 m.
;* Cálculo do número de divisões do tubo:
(bind ?n (round (+ (/ ?compTubo 1000) 0.5) ) )
;* Divisão do tubo:
(bind ?compDiscreto (/ ?compTubo ?n) )
;* Cálculo de deltaPe nas tubulações discretizadas
;* A pressão de entrada para a primeira parcela do tubo subdividido.
;* Ela é igual a pressão à montante do tubo em [Pa]
(bind ?pressEnt ?pressTubo)
;* Criação da variável que guarda a pressão de saída desta tubulação.
;* Esta variável será recalculada até que se chegue na última parcela do tubo
(bind ?pressSai ?pressEnt)
(loop-for-count (?i 1 ?n)
;* Cálculo da pressao de saída com base na pressão de entrada atualmente
;* ajustada na tubulação. É a pressão à jusante da atual parcela da
;* tubulação subdividida, que é calculada com base na pressão a montante da mesma. (bind ?pressSai (- ?pressEnt
(send ?self deltaPe ?compDiscreto ?fatorRug ?tempTubo ?pressEnt ?vazaoTubo ?diamTubo) ) )
;* Coloca a ?pressSai desta parcela como ?pressEnt da parcela seguinte. (bind ?pressEnt ?pressSai)
)
;* retorna a pressão de saida na tubulação, ou pressão à jusante em [Kgf/cm2] (PaPraKgf ?pressSai)
)</field>
	</doc>
</add>