<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.21309</field>
		<field name="filename">5027_Silva_AdrianoCavalcantida_M.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">	UNIVERSIDADE ESTADUAL DE CAMPINAS
^4 UNICAMP	Faculdade de engenharia elétrica e de COMPUTAÇÃO
DEPARTAMENTO DE ENGENHARIA DE SISTEMAS
Otimização do Transporte em Oleodutos Utilizando Algoritmos Genéticos e Programação Linear
por: Adriano Cavalcanti da Silva
orientadores: Prof. Dr. Jurandir F. R. Fernandes
Prof. Dr. Takaaki Ohishi
Dissertação submetida à Faculdade de Engenharia Elétrica da Universidade Estadual de Campinas, para preenchimento dos pré-requisitos parciais para obtenção do Título de Mestre em Engenharia Elétrica
Sq lir.al da tese |
la tjomiscãa í
Abril de 1999
FICHA CATALOGRÁFICA ELABORADA PELA BIBLIOTECA DA ÁREA DE ENGENHARIA - BAE - UNICAMP
Si38o
Silva, Adriano Cavalcanti da
Otimização do transporte em oleodutos utilizando algoritmos genéticos e programação linear. / Adriano Cavalcanti da Silva.--Campinas. SP: [s.n.], 1999.
Orientadores: JurandirF. R. Fernandes, Takaaki Ohishi.
Dissertação (mestrado) - Universidade Estadual de Campinas, Faculdade de Engenharia Elétrica e de Computação.
1. Algoritmos genéticos. 2. Programação linear. 3. Petróleo - Transporte. 4. Oleodutos. I. Fernandes, JurandirF. R.. n. Ohishi, Takaaki. IH. Universidade Estadual de Campinas. Faculdade de Engenharia Elétrica e de Computação. IV. Título.
UNIVERSIDADE ESTADUAL DE CAMPINAS
FACULDADE DE ENGENHARIA ELÉTRICA E DE COMPUTAÇÃO
DEPARTAMENTO DE ENGENHARIA DE SISTEMAS
TESE DE MESTRADO
Título :	Otimização do Transporte em Oleodutos Utilizando Algoritmos
Genéticos e Programação Linear
Autor :	Adriano Cavalcanti da Silva
Orientadores :	Prof. Dr. Jurandir F. R. Fernandes
Prof. Dr. Takaaki Ohishi
APROVADO POR:


/
Prof. Dr. Jurandir Fernando R/beiro Fernandes, Presidente
Prof. Dr. Fernando de Almeida França
Prof. Dr. Paulo Morel ato França
Campinas, 26 de abril de 1999
Esta pesquisa teve o suporte financeiro do Conselho Nacional de Desenvolvimento Científico e Tecnológico (CNPQ).
Agradecimentos
Meu especial agradecimento ao Prof. Jurandir pela força e orientação na elaboração desta pesquisa, e incentivo para que eu siga alcançando novos horizontes.
Ao Prof. Takaaki pela amizade e imenso companheirismo dedicado durante a elaboração deste trabalho, pela determinação e estímulo, me levando a atingir todos os resultados desejáveis do modelo desenvolvido. Meu eterno agradecimento Taka.
Ao Prof. Fernando França por sua paciência e colaboração de grande importância neste trabalho.
A Alexandre de Sousa Mendes, pela sua especial colaboração sobre o tópico algoritmos genéticos, muito obrigado.
Aos Professores Hermano Tavares, Leo Pini, Christiano Lyra, Sebastião Amorin, Clóvis Perin, Paulo França, Secundino Soares, Vinícius Armentano, Beatriz Daltrini, pela acolhida e amizade.
À Companhia Petrolera Perez Companc S.A., pelo interesse ao disponibilizar toda uma equipe técnica em minha visita na unidade de Entre Lomas, e a todas as pessoas que lá me acompanharam de forma tão amável. Em especial ao senhor Antonio Koharic, gerente da área Entre Lomas, pela confiança que demonstrou na viabilidade da proposta deste trabalho. Aos senhores Mario Brarda e Carlos Aramburu pelo companheirismo demonstrado e interesse ao enfatizarem os principais aspectos para um modelo de automação voltado ao problema de transporte com fluxo constante. Aos senhores Mattias Santiago e Luis Badia pela paciência ao responderem a todas as perguntas que fiz durante e após a minha estada em Neuquén.
À Professora Eng. Eliana A. R. Delgado, da Universidade Nacional dei Comahue, pelo apoio ao intermediar junto a empresa Petrolera Perez Companc a visita que resultou neste trabalho. Por ter me recebido em sua residência por um mês, de forma muito acolhedora.
À CNPq que possibilitou o suporte financeiro necessário ao desenvolvimento deste trabalho, resultado de minha dedicação exclusiva ao mestrado.
Aos grandes amigos que encontrei no DENSIS e na Elétrica de um modo geral que participaram desta caminhada, os quais estarão para sempre em minhas memórias, entre eles: Leandro Sauer, J. E. Claudio Arroyo, Alexandre S. Mendes, José Raimundo G. P., Fernando Villas Boas, Alda M. P. Oliveira, Eduardo Quaglia, Jeanne Dobgenski, Claudio F. M. Toledo. Ao Walcir Fontanini, administrador do laboratório, com quem pude contar mesmo em finais de semana.
Aos meus pais, Dionice e Nitercílio, que tomaram realidade este projeto e ao meu irmão Adenilson, pelo companheirismo.
1. Resumo
Este trabalho aborda o problema do transporte de petróleo, extraído de poços e estocado em tanques, de forma a ser entregue em urna planta de pré-processarnento. A finalidade desta planta é separar a agua e o sal mesclados ao petróleo, para depois enviá-lo para as refinarias que produzem os diversos derivados do petróleo.
O objetivo do presente trabalho é o de garantir uma taxa de fluxo constante, para o ponto de entrega na planta de pré-processamento, de maneira a evitar flutuações em sua capacidade, devido as implicações negativas no processo de injeção de produtos, estabilidade física e química nos processos realizados na planta.
A metodologia proposta consiste de um procedimento híbrido, no qual a resolução do problema é decomposto em T subproblemas, um para cada intervalo de tempo, sendo que estes subproblemas são resolvidos seqüencialmente a partir do primeiro intervalo de tempo até o último intervalo. A primeira etapa trata somente do problema com variáveis inteiras, e a segunda etapa trata somente das variáveis contínuas.
A análise da solução é proposta pela utilização de algoritmos genéticos e programação linear, baseada na modelagem matemática que permite atingir ótimos resultados com um pequeno esforço computacional.
A busca no espaço de soluções combinatórias baseia-se no controle do funcionamento das bombas, com o objetivo de controlar a entrega do petróleo a planta de pre-process amento. A seleção da contribuição de cada bomba é feita com base no regime de enchimento de seu tanque, que por sua vez depende da contribuição dos poços.
A aplicação deste método é de grande utilidade para atingir as condições de um estado contínuo em redes de transporte, redes de distribuição, problemas de controle de petróleo e gás, e muitos outros tópicos correlacionados, especialmente para refinarias de processos químicos e operações de sequenciamento em linhas de produção. Permite também otimizar o uso de instalações existentes evitando gastos extras e possibilitando a automação das operações de sequenciamento, diminuindo falhas humanas. A implementação também busca uma minimização das pressões exercidas sobre a rede de dutos, aumentando assim a vida útil das linhas, bombas e equipamentos auxiliares.
1. Abstract
The goal of present work is to warranty a constant flow rate, at the inlet of the oil treatment plant, in order to avoid fluctuations on the capacity, which have implications on dosing of products, stability of physical and chemical processes that take place within the plant.
The methodology proposed consist in a hybrid proceeding, in that the problem resolution is decomposed in T problem steps, one to each interval, and this steps in the problem are resolved sequentially from the first interval through the last interval of time. The first step treats only the problem with integer variables, and the second step of resolution treats only the continue variables.
The solution analysis were proposed by means with Genetic Algorithms and Linear Programming, based on applied mathematical modeling, which allows to reach optimal results at a short computational effort.
The combinatorial effort is focused on the solutions possibility space to control pumps functioning, with the objective to control the oil delivery from those pumps to the central treatment plant. The selection of each pump contribution is made on the basis of its container own filling regime, which in turn, depends on the wells contribution.
Applications of this method are helpful to reach steady state conditions in transport nets, distribution nets, oil and gas control problems, and many other related subjects, especially for plant processes and scheduling operations in production plants. Also permits to optimize the use of existing installations avoiding extra expenditures and allows automating the operations schedule, avoiding human errors. The implementation also seeks for the minimization of pressure in pipes networks, thus increasing the life of lines, pumps and ancillary equipment.
"A quem deva caminhar cem milhas... deve-se pensar ao atingir noventa como sendo a metade." *
(*) Provérbio Zen-budista
Para minha esposa Ester, pela compreensão e apoio.
Conteúdo
Agradecimentos	ii
Resumo	iv
Abstract	v
Dedicatória	vi
Conteúdo	vii
Introdução Geral	1
Capítulo 1 O Problema de Escoamento da Produção de Petróleo	3
1.1	Introdução  ...............................................    3
1.2	O estado da arte.............................................. 7
1.3	Sistema de produção da Petrolera Perez Companc
- área Entre Lomas........................................     9
1.3.1	Descrição das estações de coleta de petróleo e da configuração da rede..................................... 10
1.4	Mecânica de fluídos.......................................    14
Capítulo 2	Formulação do Problema	18
2.1	Introdução...............................................     18
2.2	Formulação do problema....................................... 18
2.3	Metodologia proposta........................................  21
Capítulo 3	Algoritmos Genéticos	23
3.1	Introdução..................................................  23
3.2	Detalhes de implementação de um AG........................... 27
4.1	História da programação linear................................   34
4.2	Método Simplex..............................................     35
Capítulo 5	Metodologia de Resolução	40
5.1	Introdução.......................................................40
5.2	Aplicação do Algoritmo Genético para a seleção de bombas........ 41
5.3	Despacho das bombas............................................. 46
Capítulo 6	Análise dos Resultados	49
6.1	Validação do Modelo.......................................       49
6.2	Sistema completo................................................ 49
6.3	Avaliação de estabilidade do AG implementado..................   63
6.4	Uma análise multibojetivo....................................... 65
6.5	Contingência simples............................................ 69
6.6	Estudo da variação dos parâmetros............................... 75
Conclusão Geral	79
Referências Bibliográficas	82
Apêndice A	Implementação da Rotina de Execução Dinâmica do Pacote CPLEX	86
índice das Figuras
Figura 1.1: Mapa da fronteira (Argentina-Chile ).............................   9
Figura 1.2: Mapa da província de Neuquén - Patagônia........................... 9
Figura 2.1: Algoritmo que integra AG com PL para o transporte de petróleo............................... 22
Figura 3.1: Pseudo-código de um algoritmo genético...................................................... 26
Figura 3,2: Representação do estado das bombas conectadas ao oleoduto................................... 27
Figura 3.3: Exemplo da ação de um operador de mutação............................................... 29
Figura 3,4: Exemplo da ação de um operador de mutação................................................... 30
Figura 3,5: Um exemplo genérico de crossover uniforme................................................... 31
Figura 3.6: Um exemplo de escolha aleatória pelo método roleta.......................................... 31
Figura 3.7: Seleção dos pais através da roleta para o próximo cruzamento................................ 32
Figura 4,1: Forma genérica de um problema linear........................................................ 35
Figura 5,1: Pseudocódigo da implementação do AG........................................................ 42
Figura 5.2: Representação do estado das bombas conectadas ao oleoduto.................... 43
Figura 5,3: Layout da rede de dutos.................................................................     45
Figura 5.4: Produção por ramal.......................................................................... 46
Figura 6,1: Layout da rede de dutos...................................................................   53
Figura 6.2: Série histórica de tanques representativos.................................................. 54
Figura 6.3: Histograma de volumes.....................................................................   55
Figura 6,4: Série histórica de tanques representativos................................................   57
Figura 6.5: Histograma de volumes....................................................................... 57
Figura 6,6: Série histórica de tanques representativos..................................................... 59
Figura 6,7: Histograma de volumes60
Figura 6,8: Série histórica de tanques representativos...................................................... 62
Figura 6,9: Histograma de volumes....................................................................... 62
Figura 6.10: Boxplot do número de partidas de máquinas...................................................64
Figura 6,11: Boxplot do número de partidas de máquinas...................................................65
Figura 6.12: Comparação entre os quatro tempos de intervenção: volume dos tanques. 66
índice de Tabelas
Tabela 3.1: Termos utilizados em AG e a suas associações dentro da matemática................................... 26
Tabela 6.1.1:	Comportamento	em	dois	dias	(intervenções	a cada meia	hora)............... 51
Tabela 6.1.2:	Comportamento	em	dois	dias	(intervenções	a cada meia	hora)............... 51
Tabela 6.1.3:	Comportamento	em	dois	dias	(intervenções	a cada meia	hora)............... 52
Tabela 6.1.4:	Comportamento	em	dois	dias	(intervenções	a cada meia	hora)............... 52
Tabela 6.2: Pressão máxima na rede (intervenções a cada meia hora)............................................... 53
Tabela 6.3.1:	Comportamento	em	dois	dias	(intervenções	a cada	uma hora)................... 56
Tabela 6.3.2:	Comportamento	em	dois	dias	(intervenções	a cada	uma hora)...................	56
Tabela 6.4: Pressão máxima na rede (intervenções a cada uma hora)..............................................   57
Tabela 6.5.1:	Comportamento	em	dois	dias	(intervenções	a cada	uma hora e meia).......	58
Tabela 6.5.2:	Comportamento	em	dois	dias	(intervenções	a cada	uma hora e meia)........... 59
Tabela 6.6: Pressão máxima na rede (intervenções a cada uma hora e meia)........................................  59
Tabela 6.7: Comportamento do modelo com intervenções a cada duas horas........................................... 61
Tabela 6.8: Pressão máxima na rede com intervenções a cada duas horas...................... 61
Tabela 6.9: Estatística descritiva - intervenção a cada meia hora................................... 64
Tabela 6.10: Estatística descritiva..................................................................................... 65
Tabela 6.11: Estatística descritiva dos volumes......................... ........................................ 66
Tabela 6.12: Estatística descritiva das partidas de bombas.............................................. 68
Tabela 6.13.1: Contingência simples: 4CB........................................................................ 70
Tabela 6.13.2: Contingência simples: 4CB........................................................................ 70
Tabela 6.13.3: Contingência simples: 4CB........................................................................ 70
Tabela 6.13.4: Contingência simples: 4CB........................................................................ 70
Tabela 6.14.1: Contingência simples: 6CB...........................	71
Tabela 6.15.3: Contingência simples: 6PB...................................... 73
Tabela 6.15.4: Contingência simples: 6PB...................................... 73
Tabela 6.16: Contingência simples: 4CB........................................ 74
Tabela 6.17: Contingência simples: 6CB........................................ 74
Tabela 6.18: Contingência simples: 6PB......................................   75
INTRODUÇÃO GERAL
A utilização de técnicas de otimização são muitas e vem demonstrando os seus benefícios nas mais diversas áreas de aplicação. O estudo conduzido trata da aplicação de algumas técnicas a uma situação real em um campo de produção de petróleo. É apresentado a elaboração de um conjunto de heurísticas através das quais procura-se a melhor forma de operar um conjunto de 16 bombas que realizam o transporte do petróleo para uma planta de pré-processamento. Esta planta de pré-processamento trabalha com processos físicos-químicos; desta forma que é desejável a menor variação na entrega do fluído para o tratamento. O armazenamento da produção de inúmeros poços é estocada em 16 tanques, estando cada poço conectado a um único tanque. Cada tanque apresenta uma distinta velocidade de enchimento e capacidade de estoque, precisando periodicamente ser esvaziado.
A formulação para o problema pretende alcançar o estado contínuo da vazão do petróleo, garantindo a realização desta tarefa sem a alteração de tubulações na rede de dutos ou a troca de bombas.
1.	Organização do trabalho
No capítulo 1 é apresentada a idéia geral do funcionamento de um campo de petróleo, desde a saída do poço, o armazenamento nas estações de coleta, e as especificações sobre aspectos ambientais considerados na produção petrolífera.
No Capítulo 2 faz-se a representação matemática para o problema, discutindo-se as ferramentas que estarão sendo utilizadas para otimizar o transporte em dutos. São também enfatizados os aspectos de programação mista, inerentes ao problema.
No Capítulo 3 é detalhada a utilização de algoritmos genéticos, apresentando-se os principais operadores empregados pelos algoritmos genéticos: cruzamento, mutação, roleta. É discutido o critério de seleção utilizando a técnica da roleta, valorizando o aspecto evolutivo para seleção do melhor indivíduo.
No Capítulo 4 será apresentado a história da programação linear e discutido o algoritmo simplex.
No Capítulo 5 estão sendo detalhados a implementação e o algoritmo aplicado na resolução do problema. Será apresentada a representação do problema necessária à resolução do genético.
No Capítulo 6 é feita uma análise dos resultados, sendo apresentado o comportamento de quatro instâncias diferentes para o modelo geral aplicado ao problema de transporte em oleodutos. Dois foram os aspectos avaliados na escolha do tempo para intervenção no sistema de bombeamento: número de partidas e o nível de ocorrência do volume máximo entre os tanques.
Em Conclusão Geral é apresentado uma análise sobre os principais resultados e aplicações da pesquisa, sendo sugerido possíveis abordagens para futuros trabalhos.
CAPITULO 1. O PROBLEMA DE ESCOAMENTO DA PRODUÇÃO DE PETRÓLEO
1.1	Introdução
•	O petróleo
O homem tem conhecimento do petróleo há tempos, porém apenas nos últimos 100 anos é que se descobriu o seu valor econômico e utilidade, pois passou a liderar a matriz energética mundial. O petróleo bruto serve de matéria prima para diversos derivados de grande importância econômica na cadeia produtiva da maior parte dos países industrializados, fornecendo desde insumos agrícolas até a energia termoelétrica. Nossas necessidades de consumo de petróleo experimentam dia após dia um aumento contínuo.
•	Sistema de Produção numa Jazida Petrolífera
O sistema de produção de petróleo inicia-se com a sua extração através dos poços, sendo depois realizado o transporte por meio de oleodutos até as refinarias. Para a produção de seus derivados, o petróleo passa em geral por mais de uma refinaria até chegar ao consumidor final. O primeiro passo neste processo consiste em purificar em uma planta de pré-processamento o petróleo extraído, para daí encaminhar às refinarias de petróleo. Este trabalho trata do transporte do petróleo extraído dos poços até a planta de pré-processamento.
Ao longo dos anos de exploração de uma jazida, a pressão natural positiva existente no interior dos poços devido aos processo de formação das capas de petróleo diminui, de forma que se faz necessário bombear o petróleo do subsolo até as estações de captação de petróleo.
Estando os poços ligados às estações de captação mais próximas de seu setor, o fluxo de material lavrado “multifásico” (o petróleo extraído do subsolo emerge à superfície na forma de uma mescla: água salgada, gás natural e petróleo bruto) é gerido por um equipamento próprio de coleta (manifold). Neste equipamento é centralizada a produção proveniente de diversos poços de petróleo e então o fluído é enviado para a estação de coleta em que este encontra-se ligado.
Cada estação de coleta é provida de unidades de separação de líquido/gás, cada fase recebendo um tratamento específico. No caso do petróleo, toda estação conta com um tanque de armazenamento de fluídos ligado a rede de dutos principal que conduz o petróleo até uma planta de pré-processamento de petróleo (PPP).
O gás, ao sair da unidade de separação, passa por um processo onde terá a umidade relativa reduzida, seguindo diretamente para um compressor. Na sequência, o gás é direcionado para um gasoduto que segue paralelamente ao oleoduto cujo destino será a PPG (planta de processamento de gás rico). Na PPG ocorre o tratamento onde se extrai do gás rico diversos subprodutos do gás natural. Chamamos de gás rico aquele gás que contém uma mescla de onde se pode extrair butano, pentano, isopropano e metano. Até finais dos anos 70 todo o gás extraído dos poços de petróleo era queimado na atmosfera, através de um processo conhecido como “venteio ", dado o seu pouco valor econômico na época.
A PPP não pode ser considerada como uma refinaria propriamente dita pois, numa refinaria teríamos fases voltadas ao processo químico de onde obteríamos os mais diversos produtos derivados do petróleo. Na realidade, a PPP efetua apenas um controle sobre níveis de especificação química do petróleo a ser vendido, ou seja, a diminuição do percentual da água junto ao petróleo e sua salinidade via processos físico-químicos. De uma forma geral, o produto deverá estar dentro das seguintes especificações: apresentar no máximo 1% de água e impurezas, sendo permitido até 100 gramas de sal por m3. Essa análise das
propriedades e qualidade do petróleo são realizadas de acordo com um conjunto rígido de normas fixado como padrão pelo API (American Petroleum Instituí) e pela ASTM (American Society for Testing and Materiais).
É interessante observar que em conjunto à separação física, ocorre a adição de reagentes químicos cujo foco de ação é a decantação de resíduos e separação de sais, para que o produto a ser vendido esteja dentro das especificações.
Na etapa física do processo de tratamento do óleo na PPP, sería ideal a minimização dos estados transientes de ingresso do petróleo, pois uma variação no fluxo do petróleo na PPP dificulta o procedimento da fase de separação. Operacionalmente este sistema de transporte está sujeito a uma série de restrições, tais como: capacidade de armazenamento dos tanques, capacidade e características das bombas, e máxima pressão suportada pelos dutos. O problema da operação deste sistema se resume então em determinar quais bombas irão operar a cada intervalo de tempo, de modo que todas as restrições sejam satisfeitas e a vazão de alimentação da PPP apresente pouca variação.
• Meio ambiente
Até a década de 70 a agua que era separada do petróleo, por não possuir valor econômico, era normalmente jogada na superficie do solo ou eventualmente em rios próximos às instalações de tratamento do petróleo, sem haver maiores preocupações com os danos do meio ambiente. Entretanto, com os desequilíbrios climáticos da década de 80 e o crescente interesse de preservação ao meio ambiente, este procedimento mudou radicalmente.
Seguindo as normas ambientais da área de petróleo, ISO 14001, a água extraída da mescla do petróleo passou a ser reinjetada nos poços de onde foram extraídas, evitando-se o seu despejo a céu aberto. Esta água antes de ser reinjetada, requer uma filtragem cuidadosa pois a existência de resquícios de areia ou resíduo sólido seria o suficiente para causar a perda de um poço de petróleo avaliado em milhões de dólares. Isto ocorre por que a
estrutura do subsolo de onde se extraí o petróleo trata-se de uma matriz de rocha porosa, e eventuais resíduos vedam os orifícios por onde o petróleo precisa escoar para a extração.
Este trabalho é justificado para uma empresa que pretenda manter uma boa aceitação do seu produto pois, mercados internacionais exigem da operadora de petróleo a certificação ISO 14001 quando fecham um pedido de compra. Além do aspecto ambiental, esta reinjeção serve para a manutenção de pressão dos poços - pressão que estimula a extração do petróleo, processo conhecido como recuperação secundária. Esta recuperação secundária de poços pode se realizar também pela reinjeção de gás natural, conhecido por gaslift.
• O transporte
Nas jazidas de extração de petróleo é comum a existência de poços perfurados a dezenas e às vezes a centenas de quilômetros de distância dos equipamentos que deverão realizar o processamento químico deste produto bruto.
Há duas fases de transporte do petróleo: a primeira que é de transportar o petróleo desde o poço até as refinarias, e a segunda que consiste em transportar os seus derivados até o consumidor final. O processo de refino é complexo, podendo em alguns casos o produto ser transportado através de diversas refinarias até que o produto acabado seja obtido.
Oleodutos
O transporte através de dutos data do período romano, quando utilizavam-se sistemas hidráulicos para levar água até as populações de centros urbanos da época. Hoje vemos a utilização do transporte de produtos alimentícios e produtos químicos através de tubulações, dado sua praticidade e viabilidade econômica.
Um dos investimentos mais altos na estruturação da capacidade de escoamento de petróleo via dutos está na fase da construção de sua rede de dutos. Após esta construção, pode ocorrer deficiências na capacidade de escoamento da rede devido a um aumento
expressivo na vazão, isto devido a um mal dimensionamento no projeto, ou a um crescimento expressivo de demanda, ou mudanças nos requisitos operacionais. Os gastos envolvidos num redimensionamento desta rede são extremamente altos.
Este redimensionamento pode se realizar com a troca de bombas por outras com novas capacidades, o que geralmente obrigaria a uma substituição de dezenas de quilômetros de dutos. Tal operação é muitas vezes inviável e adiada não só pelo custo envolvido mas, também pelos transtornos causados com uma parcial paralisação na linha de produção.
1.2	O estado da arte
É extenso o número de publicações a respeito de pesquisas aplicadas a sistemas ligados ao transporte e produção de hidrocarbonetos, dada a sua importância econômica na sociedade industrializada.
Bobok [2] utilizando-se de um sistema de fluxo anular, onde mesclava água com reagentes químicos a um petróleo de densidade pesada, minimizou os gastos envolvidos no transporte em dutos de uma jazida petrolífera situada na Hungria. O seu modelo possibilitou uma diminuição no esforço realizado pelas bombas no envio do fluido até o ponto de processamento.
Um sistema de regras de aprendizagem e algoritmos genéticos (AG) foi empregado por Goldberg [9], para acompanhar a operação de uma rede de dutos, onde foi avaliado o fluxo de gás e seu comportamento durante alterações na operação no conjunto de compressores utilizados.
Um sistema especialista foi empregado por Sun [27] para otimizar a operação de gasodutos, utilizando regressão linear e lógica fuzzy e técnicas de inteligência artificial. O modelo decide qual o melhor momento para ligar ou desativar determinado compressor na rede de dutos, diminuindo assim custos com os transporte.
Reis [19] utilizou AG na resolução de problemas de configuração na localização de válvulas utilizadas no transporte de fluídos em dutos, assegurando um melhor controle operativo do sistema de bombeamento.
Flaniga [8] realizou a otimização na operação de compressores empregando as seguintes ferramentas matemáticas: o Método de Newton-Raphson e a Interpolação Lagrangeana, para a modelagem e otimização do modelo, tendo utilizado-se da fórmula de Panhandle para efetuar o cálculo de perda de carga. Com o programa desenvolvido conseguiu minimizar as perdas de cargas necessárias para o transporte do gás através de uma rede de dutos.
A utilização de lógica fuzzy por Rocha [21] possibilitou o desenvolvimento de um sistema especialista aplicado a condições reais para auxílio a tomada de decisões, voltada a extração de petróleo e ativação de poços sob condições climáticas áridas ou condições de exploração desfavoráveis, evitando acidentes causados por erros quanto à pressão incorreta em tais poços e a respectiva perda de produtividade, dado a morosidade com que se realizam tais análises sem o auxílio deste sistema.
Foi desenvolvido por Alegre [20] um sistema de redes neurais onde é realizado o reconhecimento de padrões para inferir o comportamento da vazão em poços e determinar a melhor forma de operação das bombas de extração do fluído.
A identificação do regime de fluxo bifásico foi proposto por Ishii [12], onde realizando a análise das imagens captadas por um sensor, conseguiu através de redes neurais determinar com maior precisão a melhor forma de operação para um sistema de controle de bombeamento vertical.
Taylor [28] utilizando técnicas de simulação de sistemas conseguiu analisar o comportamento de uma linha de transporte de gás em condições transientes, o que possibilitou a escolha de uma melhor configuração quanto à operação de seus compressores.
No trabalho utilizando programação dinâmica realizado por Sani/Ana [22] constatou-se a viabilidade de uma melhor distribuição dos compressores utilizados no Gasoduto
Bolívia Brasil. Os resultados mostraram que teria sido possível economizar 3% na construção do gasoduto, diante de um estudo mais extensivo em projeto.
1.3	Sistema de produção da Petrolera Perez Companc - área
Entre Lomas
Os dados utilizados para testes e validação do modelo são provenientes de um campo
petrolífero localizado ao sul da Argentina, na região da Patagônia, província de Neuquén
•SP?’:
(LasMêMtaasi-íÁtifííad tyAígeafira)

24®
Solivia
SanSáúdo/ ’ de s&amp;amp;juy. - ----- ■	■ í - -	- „.
f * -Safe	"''-^unción
riormos; descaman. Recenda* C^ca. tr&amp;amp;..°°'rier»“ lA	-a	v
i -	.	Santa/re
San Juan*.^oraoba» *	&gt;
ç	r-ç rara na-	•
Mendtça- ‘San Buermfuruguay
SanSago? Lpi« - Aires», «Montevideo t	. La Rata
. - -7-/ ; q f .vSants
Chir$; .Neuquén
K	O ■ -
ir	jviedma •,
Rosa
. . Rawson
r
i



i Ciíí':
L . fJ.'+ Ti.".: ZTT7
Argentina
Ushuaía
Figura 1.1: Mapa da fronteira (Argentina-Chile )
Figura 1.2: Mapa da província de Neuquén - Patagônia ( área petrolífera: retângulo em branco no mapa )
(figuras 1,1 e 1.2). Foí realizado o estudo de uma jazida localizada na provincia de Neuquén, que ocupa unía área de aproximadamente 3192 km2 (76 por 42 km) cuja rede de dutos interliga 16 estações de coleta distribuídas estrategicamente ao longo desta área.
A Petrolera Perez Companc S.A. forneceu todas as informações necessárias para a elaboração do modelo matemático e colocou-se à disposição quanto ao esclarecimento de eventuais dúvidas que foram surgindo no decorrer da pesquisa, autorizando inclusive a sua citação nas publicações realizadas a respeito deste trabalho. É uma empresa que conta com aproximadamente 2000 poços em operação somente nas áreas espalhadas pelo território Argentino, possuindo também diversas jazidas em outros países da América Latina, estando cada campo de extração petrolífera sob distintas condições de operação.
13.1	Descrição das estações de coleta de petróleo e da configuração da rede
Todas as estações de coleta contam com bombas que podem operar com vazão sempre superiores à vazão média que ingressa nos tanques. Na figura 1.3 faz-se a comparação, para cada tanque, entre a capacidade de vazão das bombas e a vazão (média) de alimentação do reservatório, considerado um cenário de meia hora.
Capacidade das estações cada meia hora
□ alimentação média do reservatório ■ vazão das bombas j
Figura 1,3: Produção dos poços
Essas estações de coleta possuem tanques que armazenam a produção de diversos poços, sendo possível visualizar as suas localizações na figura 1.4. A figura apresenta também a rede de dutos e as suas características relativas às dimensões de cada ramo.
No momento a empresa não conta com nenhum estudo feito com qualquer método, para minimizar a variação na vazão.
Automação
Atualmente os campos petrolíferos contam com um alto grau de automação. Desta forma, é possível controlar unidades de coleta e envio do petróleo até a PPP totalmente operadas por telemetria, funcionando automaticamente 24 horas de forma ininterrupta.
.....&lt;
1EC
Área ENTRE LOMAS
Estações de coleta de petróleo e rede de dutos
¿ Estações de coleta
Planta da tratamento do petróleo
&amp;amp;
Bombas com vaciadores
Ma	tez ial	y s	v Kjn
©	ERFV	6	3,0km
©	ERFV	8"	4,1 km
0	ERFV	6 ”	OAkm
o	ERFV	S"	2,0km
0	ERFV	8 "	2,2km
0	ERFV	6”	0.35km
®	ERFV	8'7	2.45 km
0	ERFV	ó	I4,5km
©	Acero	4"	O.Skm
e	ERFV	ó	3,6km
o	Acero	4	0,7km
©	Acero	4"	12.9km
Mstsrial		y ©	y Km
©	ERFV		3,lkm
&amp;amp;	ERFV	O'"	0,7 5km
©	ERFV	6”	LSkm
©	ERFV'	8”	3,5 km
©	ERFV	8 "	l,0km
©	ERFV	8 "	0,5km
©	ERFV7	6”	3,3km
©	ERFV	6	0,8ktn
©	Acero	4 ”	L7km
©	ERFV	6	2,4km
©	ERFV7	D	0,7km
Fonte: Petrolera Pérez Com pano SA
Figura 1.4: Layout do oleoduto
Nas estações de captação, há um sistema de acionamento das bombas para que realizem o envio do petróleo armazenado nos tanques, mantendo um nível entre 65% e 75% de sua capacidade. A empresa utiliza este nível por motivos de gerenciamento e segurança, pois na situação da quebra de uma bomba, os técnicos contam com um intervalo de tempo para efetivar os reparos necessários, antes de ser atingida a capacidade máxima de armazenamento dos tanques com problemas para a remessa do óleo. No caso da impossibilidade de uma estação de captação realizar o envio do óleo acumulado no seu tanque, a rede ainda conta com outras 15 estações funcionais para atender a demanda de processamento da PPP.
No modelo proposto, como veremos adiante, será adotada outra margem operacional quanto aos níveis máximo e mínimo de capacidade para os tanques.
Por um sistema chamado SCADA (Supervisory Control and Data Acquisition), é realizado à distância o monitoramento de cada unidade de coleta do petróleo. Esse sistema recebe uma leitura a cada 5 minutos de medidores que transmitem por rádio qual a condição de pressão nas tubulações, o nível dos tanques de coleta do petróleo, acionando e desligando a operação de envio de cada uma das bombas.
Capacidades de estoque
Figura I.5: Capacidade de estoque por tanque
No momento, esse sistema de automação não conta com nenhum critério otimizador para priorizar uma fila de ativação das bombas que remetem o petróleo até a PPP. A única regra adotada para a operação das bombas é o de se atender primeiro as baterias mais
cheias, respeitando as restrições de limite de pressão das tubulações. Como resultado, a PPP sofre variações muito bruscas do fluxo de petróleo a ser tratado no decorrer do dia. Desta maneira pode haver um ingresso alto de petróleo em um determinado instante e logo a seguir, um período de baixo ingresso para o mesmo processamento deste fluido.
O sistema de transporte apresenta variações na vazão superiores a 12%, de alimentação na PPP (figura 1.6). Para a realização do transporte do petróleo, cada uma das 16 estações de coleta na rede possui uma bomba, a qual eleva a pressão do petróleo no ponto de partida, ou seja na saída das estações de coleta (ou ainda na boca de recalque da bomba) para que o fluído escoe até a PPP.
A maior parte dessas bombas permite apenas dois modos de operação: ligado, desligado. No todo, a rede possui 13 estações com bombas que apresentam esta característica. As 3 bombas restantes operam com variadores de frequência, o que permite uma variação contínua no fluxo de petróleo bombeado, sempre que haja a necessidade.
Por questões de segurança, cada estação de coleta conta sempre com dois tanques de emergência de igual capacidade ao tanque em operação. Tal medida serve para que nas
emergências, existindo a necessidade da paralisação no envio do petróleo pela rede, não seja necessário paralisar a extração de petróleo de qualquer um dos poços. A extração contínua dos poços é motivada não só pelo aspecto econômico mas, principalmente, havendo a necessidade de paralisar um poço, a sua reativação gera uma série de problemas e trabalhos operativos extras.
O modelo leva em consideração o volume em estoque por estação de coleta de petróleo, como uma unidade composta com seus respectivos tanques e a sua referida bomba, ou seja, o problema contará com 16 unidades a serem monitoradas.
1.4	Mecânica de fluídos
Visando a otimização do sequenciamento e o transporte de petróleo, ao aplicar um conjunto de heurísticas, o modelo simula e acompanha o envio do óleo por uma rede de tubulações partindo das estações de coleta até a PPP. Num trajeto com quilômetros de extensão, são avaliados aspectos como pressão no interior dos dutos e a vazão resultante. O modelo desenvolvido atende as principais leis de mecânica dos fluídos. Segundo Campbell [3], pode-se calcular o comportamento de uma rede de dutos de petróleo observando-se os fatores:
Equações:
A partir de uma formulação simplificada da Primeira lei da Termodinâmica, é escrita a seguinte equação:
(tl)
Onde :
V = volume específico do fluido
P = pressão do fluido
g = aceleração da gravidade
AX = mudança de elevação do fluido
Av = mudança da velocidade do escoamento
Wf = trabalho específico (trabalho por unidade de vazão mássica bombeada) dissipado (efeito viscoso)
W = trabalho específico realizado pela bomba
O trabalho dissipado por efeito viscoso em uma tubulação é diretamente proporcional à energia cinética do escoamento, ao seu comprimento L, e inversamente proporcional ao diâmetro D. O fator de proporcionalidade é denominado fator de atrito.
(1.2)

onde:
f = fator de fricção, proporcionalmente constante.
O fator de atrito é uma função do número de Reynolds do escoamento, e da rugosidade relativa da tubulação,
(1-3)
Na equação (1.3) Re é o número de Reynolds e e é a rugosidade da parede interna da tubulação. A partir da combinação das equações (1.1) e (1.3), e assumindo que o volume específico do fluído é constante (V = constante) e dividindo todos os termos por g, é obtida para a aceleração da gravidade:
(1.4)
que é a equação básica utilizada amplamente no cálculo de transporte de fluídos.
O fator de fricção “f ’ deve ser avaliado a partir de correlações, como as obtidas pelo diagrama de Moody, que expressa o fator de fricção “f* como um valor em função ao Número de Reynolds, e da rugosidade da tubulação. O valor do número de Reynolds irá determinar se o fluxo é turbulento ou laminar.
É possível utilizar diferentes equações, conforme Streeter [25], onde a obtenção do fator de fricção esteja dentro das seguintes categorias:
a)	Equações onde o fator de fricção “f ’ é uma constante numérica (fórmula de: Rix, Pole, etc)
b)	Equações onde o fator de fricção “f' é uma função do diâmetro interno do duto (fórmula de: Spitglass, Weymouth, Unwin, etc).
c)	Equações onde o coeficiente de fricção é uma função somente do número de Reynolds (fórmula de: Pandhandle, Blasius, etc).
d)	Há algumas equações onde o fator “f” é uma função do número de Reynolds e do diâmetro interno da tubulação (fórmula de: Fritzsche, etc.).
O número de Reynolds , é expresso da seguinte forma:

onde:
d = diâmetro interno do ramo
v = velocidade
p = densidade
li = viscosidade dinâmica
Com estas equações básicas em qualquer conjunto de unidade, é possível realizar cálculos para determinar:
1	- Diâmetro de tubulações
2	- Vazão no ramo e no sistema
3	- Queda de pressão no ramo e no sistema
4	- Potência da bomba instalada.
Passo 1 - Identifique todos os ramos enumerando-os de acordo com a seqüência/direção que a vazão segue rumo ao ponto de entrega;
Passo 2 - Enumere em cada ramo o número de ramos que são imediatamente seu predecessores, identificando-os;
Passo 3 - Efetue sequencialmente os cálculos de queda de pressão na rede: ramo 0
Faça
Se “n_ramos_predecessores" = 0 é um ramo produtor: Se bomba - ligada
P/"”0 pressão da saída da bomba
Senão
Senão
É um nós em um ramo intermediário, portanto resolva o sistema:
p2	p™°~' _Ápran&gt;0^ _
P2 p™™-2	-AX
pramo	n
F\ F^
ramo&amp;lt;- ramo+1
Enquanto ramo&lt;Total_de_Ramos
Passo 4 - Fim
Figura 1.7: Pseudocódigo da rotina de cálculo de pressões
No estudo em questão, não será realizada a alteração de bombas, nem ampliada a configuração das presentes instalações. A rede de dutos já encontra-se dimensionada, sendo somente necessário o cálculo das pressões exercida pela vazão do petróleo no atual sistema de transporte, averiguando os pontos críticos.
Na figura 1.7 é apresentado o algoritmo implementado para o cálculo de pressões do sistema de transporte.
CAPÍTULO 2. FORMULAÇÃO DO PROBLEMA
2.1	Introdução
Este trabalho trata do problema de escoamento do petróleo bruto, extraído de poços e armazenado em tanques, até uma planta de pré-processamento de petróleo (PPP). A função desta refinaria é retirar água e sal que vêm juntamente com o petróleo, para daí encaminhar o petróleo à outras refinarias para a produção dos derivados. Para que o processo de separação, constituído de processo químicos e físicos, seja mais eficaz é importante que a vazão de alimentação desta refinaria com o petróleo extraído apresente pouca variação. O objetivo é desenvolver uma metodologia para determinar um programa de operação dos tanques de modo que a vazão de alimentação da refinaria seja o mais constante possível.
2.2	Formulação do problema
Apresentamos a seguir uma formulação matemática para este problema, e o propósito deste modelo é determinar um programa de operação de todas as bombas, considerando um horizonte de curto prazo a princípio, de um dia a uma semana à frente. O cenário considerado é o de um campo composto de n tanques, cada um pertencente a uma estação de coleta, sendo que cada estação de coleta conta uma bomba. Algumas estações possuem bombas com controle de rotação; há uma rede de dutos que interliga os tanques à refinaria, cada trecho desta rede tem uma capacidade de escoamento; supõe-se também conhecida a produção média dos poços durante o período de estudo e com isso supõe-se conhecida a quantidade média de petróleo extraído que será armazenada em cada tanque por unidade de tempo; o período de estudo será discretizado em T intervalos de tempo, a principio de mesma duração. Como para bombas sem controle de rotação temos dois estados possíveis :
desligada ou operando com a frequência nominal, então, em termos matemáticos isto caracteriza um problema com variáveis inteiras (booleanas) para designar estes únicos dois estados.
Minimizar	(jyJ 4- y2)	(2.1)
í=i
Sujeito a :
pJC')=«’7(^)	/=i,r	(2.4)
x? =fj‘i x^-,ieN ; t = l,T	(2'5)
-ieO,	, t = i,r	(2.6)
,t	— V; i = l,n	(2.7)
mm	t	ixicix * j	= l,T;i = Ln	(2.8)
p'^pT	t	~1,T	(2-9)
1A e {0,1} ; t -	l.T	(2.10)
Onde :
t, i, j : índices de tempo, tanque e ramo respectivamente.
T :	número de períodos correspondentes a determinado cenário.
N :	conjunto dos tanques com bombas sem variador de frequência.
C :	conjunto dos tanques com bombas com variador de frequência.
L :	conjunto dos ramos da rede de dutos.
y¡ , y2 : respectivamente o excesso e déficit em relação à vazão média m desejada.
Xj1:	* vazão média que passa pelo ramo j durante o intervalo t.
x?:	vazão média bombeada pelo tanque i durante o intervalo t.
xq’ :	vazão de alimentação total recebida pela PPP durante cada intervalo,
e/ :	volume armazenado no tanque i ao final do intervalo t.
z¡1:	quantidade de petróleo armazenado no tanque i durante o intervalo t.
m :	vazão média desejada de alimentação da PPP durante cada intervalo de tempo.
I(j) :	conjunto dos ramos que injetam vazão diretamente no ramo j.
pj(xj1) : pressão no ramo j quando por ele passa uma vazão x/. cpj(Xjl) : função que fornece a pressão no ramo j em função de x.
Pí1 :	variável booleana que indica se a bomba i está ligada (1) ou não (0) no intervalo t.
As variáveis y/ e y2l representam respectivamente o excesso e o déficit durante o intervalo t em relação à vazão média de alimentação desejada, com isso a função objetivo penaliza tanto o excesso quanto o déficit; a equação (2.2) calcula o desvio em relação à vazão média desejada; a equação (2.3) fomece a vazão no ramo j em função da vazão dos ramos cujas vazões alimentam diretamente o ramo j; a equação (2.4) calcula a pressão em um dado ramo; a restrição (2.5) representa as bombas sem controle; as restrições (2.6) representam os limites de vazão para as bombas com controle; a restrição (2.7) é a equação dinâmica dos volumes armazenados nos tanques; a restrição (2.8) fixa os limites de armazenamento no tanque i; a restrições (2.9) são os limites dos ramos em termos de pressão máxima suportada.
Supondo que o intervalo de discretização seja de meia hora, e um campo com 10 bombas, isto resultará em um problema com 480 variáveis inteiras para um período de 24horas, o que toma inviável a sua resolução através de metodologias de otimização mista. Resta, portanto, procurar uma solução sub-ótima através de soluções heurísticas. A alternativa adotada neste trabalho consistiu em decompor T subproblemas, que serão resolvidos sequencialmente.
2.3	Metodologia Proposta
A metodologia proposta consiste de um procedimento híbrido, no qual a resolução do problema é decomposto em T subproblemas, um para cada intervalo de tempo, sendo que estes subproblemas são resolvidos sequencialmente a partir do primeiro intervalo de tempo até o último intervalo.
Cada subproblema é resolvido em duas etapas. O primeiro passo é determinar quais bombas irão atuar neste intervalo de tempo. Na segunda etapa determina-se quanto exatamente cada bomba irá escoar durante o intervalo de tempo. A primeira etapa trata somente do problema com variáveis inteiras, e a segunda etapa trata somente das variáveis contínuas. Neste trabalho a primeira etapa é resolvida através de metodologia baseada em algoritmos genéticos (AG) e a segunda etapa é resolvida utilizando-se modelos de programação linear (PL). Ao primeiro subproblema denominamos escolha das bombas e o segundo subproblema denominamos despacho das bombas.
A idéia do subproblema de escolha das bombas é escolher quais bombas serão ativadas num dado intervalo de tempo, procurando priorizar o esvaziamento dos tanques mais cheios, evitar a sobrecarga nos dutos e distribuir a vazão bombeada de modo a manter equalizado o armazenamento dos tanques nos diversos ramais que compõem a rede de dutos. Quanto ao segundo subproblema o objetivo é determinar em que velocidade cada uma das bomba escolhidas com controle deve operar, de modo que a vazão de alimentação seja o mais próximo possível da vazão média desejada.
Na figura 2,1 apresentamos o algoritmo elaborado para a resolução do problema proposto. No passo 2 são realizados todos os procedimentos de AG, na seleção de quais são as bombas que deverão ser ativadas para o envio do petróleo. Sendo o algoritmo genético um método populacional onde se geram populações de soluções, após a análise de todas estas soluções geradas, é obtida a melhor combinação de bombas para determinado instante, considerando-se todas as restrições do sistema de transporte de petróleo.
otimização utilizado na resolução do problema (veja exemplo da implementação no Anexo A).
PSEUDOCÓDIGO DO ALGORITMO
Passo 1 — Iniciar os tanques a a% de sua capacidade, t = 1
Passo 2 - Escolha das bombas para o intervalo t
Passo 2.1 - Ativar um conjunto de bombas para funcionamento no intervalo t
e calcular:
•	O desvio da vazão por ramal em relação a sua produção média
•	O cálculo de fluxo do Petróleo, obtendo o ponto com a pressão crítica na rede de dutos
•	O desvio da vazão total em relação a meta estabelecida
Passo 2.2 - Avaliação da solução, devendo ser adotada a de melhor valor
Passo 3 - Despacho das bombas no intervalo t
Determinar a vazão das bombas selecionadas, de forma a minimizar o desvio em relação à vazão de alimentação desejada
Passo 4 - Atualizar os volumes das baterias:
Volume 1 - Volume ^^Input{;
Se a bateria foi ativada:
Volume = Volume - Output Z;
Passo 5 - Se t &amp;lt;T, t = t+1:
Voltar ao passo 2 para definir as bombas ativadas no intervalo de tempo subsequente;
Passo 6 - Fim.
Figura 2.1: Algoritmo que integra AG com PL para o transporte de petróleo
No passo 4, após executado o PL (problema de Programação Linear), realiza~se uma atualização dos volumes em cada tanque para iniciar a próxima iteração no instante t, influenciada pela decisões tomadas em t-1.
No passo 5, é finalizada a execução após um número de cenários que representem T intervalos de tempo, no ciclo real de produção do campo de petróleo.
CAPÍTULO 3. ALGORITMOS GENÉTICOS
3.1	Introdução
Os Algoritmos Genéticos (AG) têm por base heurísticas de busca adaptativa baseada nas idéias evolucionárias da seleção natural e da genética. Eles têm a capacidade de obter boas soluções até mesmo quando a dimensão do problema cresce, e por esta razão têm sido aplicados com sucesso em uma variedade de problemas NP-Completos e NP-Árduos [17,10].
Os Algoritmos Genéticos foram introduzidos em meados de 1976 por John Holland [11] e seus colaboradores da Universidade de Michigan, contudo o seu pleno desenvolvimento só ocorreu a partir da última década. Embora recente, estas técnicas têm alcançado enorme sucesso na solução de problemas de elevada complexidade.
Classificados na literatura como Metaheurísticas, os algoritmos genéticos têm solucionado deficiências históricas dos algoritmos convencionais de busca heurística, como por exemplo, o problema de paradas prematuras em ótimos locais distantes da melhor solução em problemas de otimização.
Uma parcela importante dos problemas de tomada de decisão consiste em alguma forma de busca : dada uma certa coleção de elementos, deseja-se encontrar nela um ou mais elementos que atendam a algumas condições previamente especificadas.
Assim, imagine uma solução qualquer desejada para um problema combinatorial, onde partindo de uma solução factível, possamos alcançar uma outra combinação que resulte para o nosso problema numa solução mais eficiente. Este estudo em busca da combinação ótima se realiza através da análise de um conjunto de soluções possíveis ao problema em questão.
Os processos de resolução dos problemas de busca dependerão fortemente do ambiente no qual esta busca se dá e das condições a serem satisfeitas pela solução. Entretanto, qualquer algoritmo de busca requer pelo menos:
“&gt; Uma forma de representar possíveis soluções para o problema;
Operadores capazes de gerar novas soluções candidatas;
“&gt; Geração de uma solução candidata;
"&gt; Teste da solução candidata.
De acordo com sua generalidade, os algoritmos de busca podem ser classificados como fracos, quando podem ser aplicados a uma gama variada de problemas, ou fortes, quando são projetados para aplicações mais específicas, fazendo uso de uma quantidade maior de informações que são disponíveis para tal situação.
A medida que aumenta o conhecimento sobre o espaço de procura, especializam-se os algoritmos de busca para este espaço, com o aumento de eficiência e perda de generalidade, ou seja, pode-se passar de algoritmos mais fracos para algoritmos mais fortes.
Outra classificação importante é quanto à inclusão ou não de algum componente probabilístico no algoritmo. Quando alguma decisão é tomada a partir do valor de um número gerado aleatoriamente diz-se que o algoritmo é probabilístico ou estocástico, e, em caso contrário, ele é dito detenninístico. No primeiro caso, o gerador de números aleatórios é sempre inicializado com algum valor (fornecido pelo usuário, por exemplo) e, assim, cada execução do algoritmo pode, em princípio, levar a um resultado diferente.
Para exemplificar duas características desejáveis, mas em geral conflitantes num algoritmo de busca, considere o problema enfrentado por uma companhia de petróleo. Numa primeira fase, ela deve ser capaz de identificar em diversas regiões - seu espaço de busca - aquelas áreas mais promissoras no que tange à existência de petróleo de qualidade e em quantidade adequada. É a etapa de diversificação, ou perfuração de novos poços.
Mas isso não é tudo. Uma vez localizada uma região promissora é necessário, de maneira eficiente, retirar a maior quantidade possível de petróleo utilizando o mínimo possível de recursos. Esta etapa recebe o nome de intensificação, ou levantamento artificial da pressão dos poços. Assim, um algoritmo de busca deverá ter também a melhor combinação possível de suas capacidades de diversificação e intensificação.
Em otimização, uma boa capacidade de diversificação do espaço de busca é requerida se é desejado encontrar um extremo (máximo ou mínimo) global, ou pelo menos, uma boa solução.
No AG o operador do tipo cruzamento realiza a recombinação de duas soluções, que servirão de matriz para uma nova solução em problemas combinatórios. Normalmente este operador apresenta características de intensificação na busca pela melhor solução, pois há um maior incentivo para a recombinação e geração das novas soluções filhas, a partir de soluções pais que sejam as mais promissoras. Esta intensificação tende a gerar uma perda acentuada de diversidade, que é continuamente compensada por um processo de mutação, aplicado sobre as soluções filhos.
A mutação altera o estado de alguns dos componentes de uma solução. Ao elaborar o algoritmo para a mutação, pode-se determinar o tipo de mutação: mutação pesada ou mutação simples. No caso do problema em estudo foi aplicado a mutação simples, onde inverte-se o estado de apenas um dos componentes em uma dada uma solução. A escolha é aleatória tanto de qual componente quanto de quais soluções sofreram ou não a mutação, como será visto mais adiante.
Assim, quando há uma diminuição da diversidade nas soluções, ou seja, a população realmente convergiu para uma região próxima a um mínimo local, o AG busca a diversificação, saindo deste mínimo local através do processo chamado “mutação pesada”. Veremos mais detalhadamente logo adiante o processo de “cruzamento” e “mutação”.
É aí que entram os Algoritmos Genéticos, que têm como uma das suas principais características a facilidade de não ficar preso a mínimos locais, explorando uma gama muito maior de pontos, podendo com isso chegar com mais chances a mínimos globais.
Os AG constituem uma classe de ferramentas muito versátil e robusta que são utilizados na solução de problemas de otimização.
AG	Matemática
1 população de soluções / indivíduos / cromossomos	1 conjunto de soluções
1 cromossomo	1 solução
1 gene	1 componente de uma solução
Tabela 3.1: Termos utilizados em AG e a suas associações dentro da matemática
Para facilitar a notação, mostramos na Tabela 3.1, algumas relações entre termos usados nos AG e suas associações dentro da matemática.
AG genérico
início
•Gerar a população inicial (de n indivíduos)
•Avaliar os indivíduos na população Enquanto a geração não convergir
repita
•Selecione dois pais da geração atual para reprodução
•Aplique operadores genéticos (de recombinaçao aos pais) para produzir filhos
•Avalie os novos indivíduos
•Insira os novos indivíduos na população, substituindo os indivíduos antigos até algum critério de parada ser satisfeito.
fim
fim
Figura 3.1: Pseudo-código de um algoritmo genético.
Um AG aplicado a um determinado problema consiste basicamente dos seguintes componentes :
Uma representação genética das soluções viáveis do problema.
Determinar uma população de cromossomos.
Definir uma função de avaliação de cromossomos
-&gt; Definir um operador genético eficaz na criação de novos cromossomos.
-&gt; Definir parâmetros usados nos AG tais como : tamanho da população, critérios de parada, critérios de renovação de cromossomos, etc.
Um pseudo-código capaz de descrever de forma genérica a maioria dos AG existentes é mostrado na figura 3.1 .
3.2	Detalhes de Implementação de um AG
• Representação e Codificação das Soluções Viáveis
A primeira etapa para se resolver um dado problema utilizando um AG consiste no estabelecimento de um esquema de codificação / representação para cada elemento do espaço de busca em questão, já que os AG não operam sobre tais elementos diretamente, e sim sobre uma codificação dos mesmos. Os AG podem ser construidos utilizando-se de uma codificação dita real para as variáveis, o que é bastante natural, já que as mesmas são, por definição, contínuas. Normalmente uma solução de um problema está associada a um cromossomo p representado na forma de um vetor ou uma lista no Rr' : p = (x/, p, x„) onde cada x¡ representa um gene (ou uma variável real que caracteriza a solução do problema).
Uma vantagem da codificação real é o fato de, em geral, ser mais intuitivo conceber operadores de cruzamento (crossover) e de mutação para um dado problema lançando mão de conhecimento já previamente adquirido no domínio da aplicação.
Para o caso do exemplo no sistema da Petrolera Perez Companc, um cromossomo representará a configuração das bombas em operação em um dado instante. Como temos 16 bombas, então o cromossomo será representado por um vetor de 16 elementos, cada elemento correspondente ao estado de cada bomba pertencente a um tanque. O valor “1” indica que a bomba está em operação, e “0” caso contrário (figura 3.2).
Bomba	1	2	3	4	5	6	7	8		10	11	12	13	14	15	16
Estado	1	0	1	1	1	0	0	0	11	1	1	1	1	1	0	0
Figura 3.2: Representação do estado das bombas conectadas ao oleoduto
• População Inicial de um Algoritmo Genético
A população de um AG é um conjunto de soluções viáveis (representadas na forma de cromossomos) para um determinado problema. O procedimento de gerar uma população inicial para um AG é muito simples para a maioria dos problemas. Normalmente utilizam-se desde procedimentos aleatórios até algoritmos heurísticos para este fim. Por exemplo, introduzindo-se na população inicial um ou mais indivíduos “interessantes”, como soluções aproximadas conhecidas ou contendo algum tipo de informação prévia.
Cada execução de um AG pode ser replicada no computador bastando para isto fornecer a mesma “semente” para o algoritmo gerador de números aleatórios. Um valor diferente da semente dá origem a uma outra sequência de números aleatórios e, consequentemente, uma nova população inicial. Para dar uma idéia do comportamento de um AG numa dada aplicação, é comum computar-se estatísticas para um conjunto de resultados correspondentes a diferentes valores da semente. Note que independentemente do valor da “semente” utilizada, um AG robusto deve sofrer pouca influencia dos mecanismos aleatórios, retomando sempre soluções de boa qualidade.
• Função de Avaliação de Cromossomos
Esta função é responsável pelo processo de classificação dos cromossomos e deve indicar a qualidade de cada cromossomo na população. Fazendo um paralelo com a programação matemática, ela é equivalente à função objetivo que se deseja minimizar ou maximizar.
A análise da função objetivo deve se realizar de forma que, através de sucessivas amostragens ao longo do processo evolutivo, forneça indicações sobre a localização do ótimo. Por exemplo, uma função de avaliação que retoma um valor unitário para a única solução do problema (como a combinação que abre um cofre) e zero para qualquer outra tentativa é incapaz de guiar a busca. A busca se toma completamente cega e todos os algoritmos são equivalentes a uma busca aleatória: encontrar a solução é uma questão de sorte.
• Operadores Genéticos
Urna vez definida a representação dos elementos da população é possível construir operadores genéticos que, atuando sobre uma população de cromossomos, produzam novos indivíduos.
O desenvolvimento de operadores genéticos está muito ligado à representação de uma solução do problema original na forma de um cromossomo. Isso significa, que dada uma solução S, devemos codificá-la na forma de um cromossomo p, e após as atualizações efetuadas pelo operador genético em p, o novo cromossomo p’ será decodificado para obter a nova solução S’ do problema associado. Existem basicamente 2 tipos de operadores genéticos convencionais para gerar novas soluções:
Operadores do tipo Mutação
Operadores do tipo Cruzamento
O processo de escolha das duas soluções pais que participam da mutação ou cruzamento é feito através do seguinte operador:
-&gt; Operador de seleção: tipo Roleta
Operador do tipo Mutação
Um ou mais operadores de mutação são normalmente introduzidos num AG. São operadores unários que, operando sobre um dado elemento da população, produzem uma modificação que dá origem a um novo indivíduo que será avaliado posteriormente. Operadores do tipo Mutação alteram um ou mais genes de um cromossomo, baseado normalmente num processo aleatório ou baseado num esquema pré-definido. Assim se tivermos o Indivíduo (P) mostrado na figura 3.3 de nossa população, e o operador de mutação resolvesse alterar o valor de um de seus genes, neste caso tendo escolhido aleatoriamente a posição 7 para esta inversão, de forma que obteríamos o Indivíduo (P’) modificado.
Posições	1	2	3	4	5?		.7...	8	9	10	11	12	13	14	15	16
Individuo (P)	1	0	1	1	1	0	0..	0	1	1	0	1	1	1	0	0
Individuo (P’)	1	0	1	1	1	0	-U,	0	1	1	0	1	1	1	0	0
Figura 3.3: Exemplo da ação de um operador de mutação
Também o operador mutação pode gerar outra nova solução P” fazendo uma permuta entre partes de P’. Por exemplo fazendo a permuta entre os genes x3 = 1 e 0 gera-se P” :
í Posições	1	2		4	5	6	7	8	9	10	11	12	13	14	15	16
í Individuo (P’)	1	0	1	1	1		I	0	1	1	0	1	1	1	0	0
| Individuo (P”)	1	0		1	1	1	1	0	1	1	0	1	1	1	0	0
Figura 3.4: Exemplo da ação de um operador de mutação
Estas operações são efetuadas de maneira que a probabilidade pm de ocorrência de mutação de um dado gene (cromossomo) seja geralmente pequena. Esta idéia também é oriunda da Genética e visa preservar alguma diversidade genética na população que vai perdendo-a à medida que a evolução avança e os indivíduos vão se tornando mais e mais semelhantes tendendo a uma solução que, nos casos de sucesso do AG, é uma boa solução para o problema. Além disso, quando há uma perda da diversidade, lança-se mão de uma mutação pesada, onde muitos genes são alterados de uma única vez. Com isso aumenta-se a diversidade e atinge-se novas regiões do espaço de busca.
A mutação proporciona uma forma de exploração do espaço de busca já que ela gera novos indivíduos, a serem avaliados, que podem revelar novas regiões promissoras no espaço de busca.
Operador do tipo Cruzamento - Recombinação
O termo cruzamento é normalmente empregado na literatura que versa sobre Algoritmos Genéticos. Assim, cruzamento representa a geração combinatória de novas soluções a partir do cruzamento de soluções pais. O operador do tipo cruzamento visa promover a recombinação do material genético de, pelo menos, dois “pais” para a geração de um ou mais “filhos” que serão avaliados posteriormente.
Para o operador do tipo cruzamento, dois ou mais cromossomos são escolhidos e com uma probabilidade pz, são submetidos à operação de recombinação. Uma posição do cruzamento é sorteada e o material genético dos “pais” é recombinado conforme o esquema da figura 3.5.
No exemplo acima, as posições 2,3,6,7,9,10,12,14 e 15 possuem os mesmos valores em ambos os pais. Desta forma, os valores foram copiados automaticamente para o filho gerado. O Pai A foi selecionado para transmitir suas característica nas posições 1, 5, 11 e 16. Enquanto que no Pai B foram escolhidas as posições 4, 8 e 13, Para posições onde os Pais tivessem valores distintos, a seleção foi aleatória com probabilidades equivalentes.
Operador de seleção: tipo Roleta
Consiste da escolha dos pais que participarão no cruzamento de forma aleatória, baseada em intervalos de probabilidade proporcionais ao valor retornado pela função de avaliação dos indivíduos de uma população.
Probabilidade de seleção
0,48%
Avaliação de cada individuo
H individuo 1: 0,713106]
■ individuo 2: 1.464286 j
□	individuo 3: 1.9749331
9 individuo 4: 1.989683 i
□	individuo 5: 9.182728I
M individuo 6:13.96281 |
População com
6 indivíduos
Figura 3.6: Um exemplo de escolha aleatória pelo método roleta
Na literatura clássica do AG, a função objetivo guarda uma relação estreita com a função de avalição. Essa função, que mede a qualidade da solução deve ser maximizada. Assim, as soluções ou indivíduos da população que apresentem um maior valor são aquelas
que se encontram mais próximas do ponto ótimo. Por isso, falamos que tais indivíduos apresentam uma maior aptidão. A esses indivíduos a roleta atribuirá sempre uma maior chance para que sirvam de pais para o cruzamento e geração de uma nova população de soluções.
A atribuição das probabilidades para cada indivíduo é feita da seguinte forma: considere o valor da avaliação de todos os 6 indivíduos de nossa população na figura (3.6), onde obtemos o valor 29,28755 como sendo a somatória total de todos esses valores. Dividindo-se a avaliação de uma solução pela somatória total das avaliações, obtemos a fração da contribuição do valor deste indivíduo em relação ao valor da população.
Exemplo de seleção de pais feito pela roleta
Valor gerado aleatoriamente pela roleta: 0,133 o indivíduo 3 (figura 3.4) é o selecionado para ser o primeiro pai;	---------------------'
Elemento 1
[0 - 0,020]
Elemento 2
[0,021-0,070]
Elemento 3
[0,071-0,14]
Elemento 4
[0,15-0,21]
Valor gerado aleatoriamente pela roleta: 0,956 *■&gt; o indivíduo 6 éo selecionado para
ser o segundo pai;
Figura 3.7: Seleção dos pais através da roleta para o próximo cruzamento
Gerado os intervalos, é obtido aleatoriamente números com uma distribuição uniforme U[0,l], em que o seu valor determinará sua escolha para se tornar pai para o próximo cruzamento (figura 3.7). Desta forma, indivíduos melhor adaptados tendem a apresentar uma maior probabilidade de serem escolhidos.
Porém, aos indivíduos com um valor ruim também é permitida, com uma menor probabilidade, a oportunidade de cruzamento. Isto, para não incorrermos no risco de convergirmos para uma população de indivíduos iguais muito rapidamente.
De uma forma geral, sempre que nos deparamos com problemas combinatoriais pode-se afirmar uma performance satisfatória dos Métodos Heurísticos [30]. Onde na maior parte
das vezes, com um custo computacional relativamente baixo se encontram excelentes resultados para uma grande gama de problemas.
• Definição dos parâmetros nos Algoritmos Genéticos
A questão principal deste item se refere à definição do tamanho da população que deve ser utilizada no AG. Testes experimentais mostram a princípio, que quanto maior for a população, melhores serão os resultados alcançados. Mas, por outro lado, quanto maior a população, maiores serão também os tempos computacionais exigidos por iteração.
Outro parâmetro importante, também presente em muitos AG, é o número de iterações. Como o parâmetro anterior (tamanho da população), este também está ligado à relação melhora do custo versus maior consumo de tempo. Em um AG existem vários outros parâmetros, como por exemplo:
-&gt; Taxa de recombinação: determina-se um percentual da população que fará recombinação em cada geração;
Taxa de mutação: é fixado a probabilidade de um indivíduo sofrer mutação em um de seus genes para cada geração.
A especificação destes parâmetros na maioria das vezes é específico ao problema que está sendo tratado. O que tem ocorrido na prática é usar o bom senso e o conhecimento prévio do problema para a definição dos parâmetros nos AG.
Este conhecimento prévio tem levado a crer que parâmetros que apresentem bons resultados geralmente apresentam taxas de recombinação altas (60 a 80%), enquanto para mutação o ideal são taxas bem menores (menores que 5%).
CAPÍTULO 4. PROGRAMAÇÃO LINEAR
Veremos neste capítulo urna das ferramentas mais populares na área de modelagem matemática: a programação linear. Portanto, teremos uma breve descrição sobre a historia da PL (Programação Linear), e a apresentação do Método Simplex.
4.1	Historia da Programação Linear
George B. Dantzig, em 1947, iniciou o estudo de problemas de programação linear, num período em que trabalhava para Força Aérea do Estados Unidos, o que resultou no desenvolvimento do Método Simplex.
T.C. Koopmans, em 1951, foi quem sugeriu a utilização pela primeira vez do termo “Programação numa estrutura Linear”[5]; expressão que veio a se consagrar como Programação Linear.
Diversos pesquisadores tem contribuído para o amadurecimento da programação linear, desde sua aparição. Muito tem sido feito quanto a se aprimorar sua teoria matemática, com a criação de novos algoritmos. Novas possibilidades para a utilização deste método tem sido uma constante.
O grande número de pesquisas focalizando métodos de otimização linear explica-se devido a sua enorme aplicação. São inúmeros os problemas presentes na indústria, economia, medicina entre outras áreas, que tem contado com resultados ótimos devido a utilização da programação linear.
Geralmente são evitados algoritmos com tempo de convergência exponencial, sendo que teoricamente o método Simplex possui tempo de convergência exponencial para análise de pior caso. Porém, na maioria das aplicações onde vemos a utilização do Simplex, verifica-se que o método conta com um bom desempenho. Assim, podemos deduzir que na
realidade sua convergência na maior parte dos problemas é bem mais rápida do que a convergência do pior caso.
L.V. Kantorovich e T. C. Koopmans foram escolhidos para o Prêmio Nobel de Ciências Econômicas de 1975. por “contribuições para a teoria de distribuição ótima de recursos"[7].
L. G. Khachian concluiu que o Método dos Elipsoides encontra uma solução ótima de problemas de programação linear num tempo polinomial. Todavia, não realizou-se uma aplicação em problemas práticos para constatar esta superioridade teórica[13J.
N. Karmarkar publicou em 1984 uma técnica que ficou conhecida como Método de Pontos Interiores. Esse método projetivo apresentou desempenho superior ao Simplex em alguns problemas de grande porte. A partir do trabalho apresentado por Karmarkar foram desenvolvidos novos algoritmos também inspirados numa busca a partir de uma trajetória central [6],
4.2	Método Simplex
Problemas de programação linear caracterizam-se por possuírem uma função objetivo e restrições lineares. Assim, genericamente podemos representar um problema linear como vemos na figura 4.1.
Min z - CiXi+...+cnxn
Sujeito a aiiXi+aí2X2+...+ainxn = b1
a21Xi+a22X2+...+a2nXn = b2
amiX|+am2X2_h..+aínnxn — bm
XbX2,...,Xn&gt;=0
Figura 4.1: Forma genérica de um problema linear
Também podemos utilizar notação matricial para representar o problema apresentado na figura 4.1, como vemos a seguir:
Min z — c!x
s.a. Ax = b
x&gt;0,
(Al)
(4.2)
(4.3)
Em (4.1) o vetor c1 trata-se de um vetor transposto c1 ~ (ci,...,cn) que representa o custo relativo a cada variável de determinado problema; a variável x em (4.3) determina a quantidade ótima de insumos a utilizar ou produtos a produzir, de forma que este vetor deve assumir sempre valores maiores ou iguais a zero; x, b são vetores colunas, como podemos ver:
X =		 X X 	1	b-	“bi ” b2
	xn		LbmJ
(4.4)
A trata-se de uma matriz que representa as restrições:
	^íi	#12 ....	• «1»
A =		&amp;amp; 22 ....	. «2»
		^2 -•	■
(4.5)
O objetivo do Método Simplex é determinar um vetor x que satisfaça as restrições do problema e apresente o menor valor da função objetivo.
O que tomou o Simplex tão popular é a facilidade encontrada ao se manipular qualquer representação de um problema dentro de sua forma padrão.
Para a aplicação do Método Simplex faz-se necessário a decomposição do sistema
(4.2)	em variáveis básicas (B) e variáveis não básicas (N). Supondo posto completo (posto de A = m) e m &amp;lt;n. para nossa matriz poderemos selecionar m colunas que formam uma matriz básica não singular. Assim, generalizando temos a partição de A da seguinte maneira:
a = [b\n},
(4-6)

e
x =
sendo a matriz base descrita anteriormente B e Rn'!n\ e N e Rmín ' a matriz não básica. O vetor Xb representa as variáveis básicas, sendo as variáveis não básicas (independentes) representadas por xN. Se reescrevermos o sistema (4.2) obtemos:
Bxb+NXn = B=&gt;Ibxb - B~lb — B~'lNxBr,	(4.7)
ao substituir (4.7) na função objetivo:
(4.8)
t , t z—cx+cx
BB N N
=c( (B~1b-B~lNx )+cr X
Bv	N N N
= ctB~Xb-ctB~iNx^+ctx^
B	B N N N
=z+ X
JeI(N) J J J
Diz-se que o vetor x é uma solução básica de (4.2) quando em (4.7) xs=B^b e xN=0;
se xB&gt;“0 então, a solução básica é uma solução básica factível para o sistema.
Pelo Teorema Fundamental da Programação Linear [5] temos que, “se existe uma
solução ótima para o problema, existirá uma solução básica ótima”. Assim pode-se
restringir a procura de soluções ótimas ao conjunto de soluções básicas factíveis.
A interpretação geométrica de um problema de programação linear leva-nos a delimitar a região chamada região factível, através das restrições do problema que formam um conjunto convexo (y={xeRn|Ax=b,x&gt;=0}). Este conjunto convexo representa onde estão as suas soluções factíveis.
Todo ponto extremo desse conjunto corresponde a uma solução básica factível; e o Simplex “caminha” pelos pontos extremos sempre melhorando a função objetivo, até encontrar o ponto ótimo. Deve-se enfatizar que o Método Simplex não precisa explorar todos os pontos extremos factíveis para chegar à uma solução básica factível ótima.
A cada iteração a condição de otimalidade é verificada, isto é, se para cada variável não básica (xj) o seu custo relativo (Cj-Zj), j e I(N) de (4.8) são maiores ou iguais a zero (ou seja, aumentam o valor da função objetivo) então a solução corrente é ótima; caso contrário uma variável não básica que melhora o valor da função objetivo se toma básica. Em seguida, são feitas as atualizações necessárias para a continuação deste processo iterativo.
Pode ocorrer de um determinado problema não possuir uma base inicial factível B. Quando isso acontece, aplicamos mecanismos que encontrem uma solução básica factível inicial que possiblitará o procedimento iterativo de buscar a solução ótima. Há vários métodos para realizar esse trabalho de localizar a base factível inicial B. Entre eles o Método das Duas Fases e o Método do Big-M [1]. Tais métodos introduzem variáveis artificiais no problema diante da falta de uma solução inicial factível.
• Algoritmo Simplex
O Método Simplex pode ser iniciado após ter sido encontrado uma base inicial factível com xb 0, x\ ™0. Ele é resumido na sequência de passos abaixo.
Passo 1 - Escolher uma base inicial (Fase I).
Passo 2 - Resolva o sistema Bxg^b.
xn=Q e z ~ csB~xb = cBxB
Passo 3 - Calcule os custos relativos referente a todas as variáveis não básicas, ou seja:
c'n-C'bB~'N=	&lt;4'9)
Verifique se existe algum j tal que cj - zj&amp;lt;=0.
Se não existir, pare; a solução é ótima.
Senão, selecione uma variável xk para entrar na base sendo que,
c, -z. = min {c. -z(4.10)
Passo 4 - Observe a coluna k da matriz de restrições A.
Se todos os elementos dessa coluna (yi&lt;) forem menores ou iguais a zero, yk&lt;-0, pare; a solução é ilimitada.
Se ao menos um elemento nessa coluna k tal que yk &gt; 0, prossiga.
Passo 5 - A variável xk deve entrar na base; a variável de bloqueio x, que deixará a base deve ser identificada através do teste da razão:
bf ' íÍ)i | m
-L = min{—| yA&gt;0}
yrk yik
Passo 6 ~ Atualize a matriz B'1 efetuando operações de pivoteamento. O elemento ark deve ser reduzido a unidade, enquanto alk. i#r é reduzido a zero.
Ou seja:
Quando i#r faça
ay = a---------
ark
Senão, faça
-
a'j a
Atualize os custos relativos e o vetor b.
Passo 7 — Repita o algoritmo a partir do Passo 3 até o processo parar no Passo 3 ou 4.
CAPÍTULO 5. METODOLOGIA DE RESOLUÇÃO
Este capitulo apresenta a metodologia de resolução do problema de transporte de petróleo. Basicamente, o problema é resolvido através de heurística, com a decomposição em um subproblema para cada intervalo de tempo. Em cada subproblema há ainda a etapa de escolha das unidades que irão bombear em um dado intervalo de tempo, e em outra etapa faz-se o despacho das bombas selecionadas no subproblema anterior, no qual é determinado quanto cada uma das bombas selecionadas irá bombear. O primeiro subproblema trata da parte inteira do modelo e é resolvido através de AG (Algoritmos Genéticos), enquanto que o segundo cuida das variáveis contínuas e é tratado através de PL (Programação Linear).
5.1	Introdução
Tratando-se de um problema composto por variáveis inteiras e contínuas, buscamos um enfoque que procura identificar o melhor conjunto de ferramentas aplicáveis a sua resolução.
Desta maneira, na modelagem do problema, a primeira fase de otimização é caracterizada pela tomada de decisão sobre quais bombas deverão ser ou não ativadas. Optamos pela utilização de uma metodologia baseada em Algoritmos Genéticos, para a resolução deste problema. A função objetivo no AG busca o atendimento de vazão requerida pela PPP (Planta de Pré-processamento de Petróleo), dando prioridade aos tanques mais cheios (em relação a sua capacidade máxima); procura a minimização das pressões na rede de dutos, dada a importância desta restrição, para evitar o rompimento das tubulações; e tenta também equilibrar o armazenamento entre os diferentes ramais.
Após ser decidido qual o conjunto de bombas que será ativado observando todas as restrições, buscamos atingir a meta de vazão de alimentação requeria pela PPP a cada intervalo de tempo.
O algoritmo fornecerá ao PL uma relação das bombas que deverão ser ativadas. Para ocorrer o ajuste de vazão, a programação linear depende da existência de pelo menos uma bomba com variador de frequência presente na seleção pelo AG.
Embora o AG seja em síntese um método não-determinístico, um dos critérios para seleção de qual estação de coleta terá a bomba do tanque de armazenamento ligada é o volume de petróleo relativo à sua capacidade máxima. O modelo foi construído para tentar manter os volumes em um intervalo arbitrário entre 35% a 80% da capacidade dos tanques. Outros intervalos de capacidade para a operação poderiam ser perfeitamente considerados na simulação, embora por questões de segurança seja pouco aconselhável operar com níveis muito acima de 80%.
O AG considera as bombas providas com variador de frequência operando com sua capacidade máxima de envio. Enquanto que o PL irá ajustar as vazões das bombas com variadores de frequência selecionadas para minimizar o desvio em relação à vazão de alimentação desejada.
A implementação do modelo utilizado para o problema em estudo foi feita através da linguagem de programação C, no seguinte ambiente: compilador G-H-, estação Sparc IPX com 64 MB de RAM, sistema operacional SunOS 4.1.1.
5.2	Aplicação do Algoritmo Genético para a seleção de bombas
Na otimização de fluxo para a rede de oleodutos podemos fazer a representação do estado de vazão da rede de forma binária, representação mais utilizada nas aplicações das técnicas de AG. A rede é constituída de um conjunto com 16 bombas hidráulicas, onde deve-se obter a cada iteração dois subconjuntos: um com as bombas desligadas e outro com as bombas ligadas. Assim, uma representação compatível com as necessidades de implementação de algoritmos genéticos foi obtida através da utilização de um vetor de
A implementação do Algoritmo genético
Passo 1 - Gerar aleatoriamente uma população inicial de soluções
Passo 2 - Avaliar todos as soluções, guardando o melhor valor como a melhor solução
Passo 3 ~~ Ordenar todas as soluções conforme o seu valor obtido no passo 2
Faça
Faça
Passo 4 - Aplicar o método da roleta para seleção de dois novos pais Passo 5 - Gerar a nova solução a partir dos pais selecionados:
•	Copiar todos os genes idênticos em ambos os pais para o filho
•	Para genes diferentes:
Escolha a cada posição aleatoriamente de qual pai copiar o gene para o filho
Passo 6 - Faça mutação aleatória em 10% dos indivíduos gerados no passo 5, trocando aleatoriamente o estado de um gene da solução
Passo 7 - Insira as novas soluções no lugar dos 30% piores indivíduos, descartando as piores antigas, mesmo se o valor das novas soluções criadas seja pior que o das priores soluções antigas
Passo 8 - Avalie a nova solução gerada e seu valor for o melhor que a melhor solução encontrada até o momento, guarde~a como a melhor solução.
Enquanto [ número novas soluções &amp;lt;30% número total de indivíduos ]
Passo 9 — Ordenar todas as soluções conforme o valor obtido na sua avaliação
Se [ 60% dos valores das soluções idênticos população convergiu ]
•	Gere uma nova população aleatoriamente
•	Avalie todos os indivíduos desta nova população
•	Ordenar todas as soluções conforme o valor obtido na sua avaliação
Enquanto [ Condição de parada não for satisfeita ]
Passo 10 - Fim
Figura 5.1: Pseudocódigo da implementação do AG
dimensão igual ao número de bombas, como pode ser observado na figura 5.2. O número “1” na psição i indica que a bomba i está ligada, e “0” caso contrário
Na figura 5.1 é apresentado um pseudocódigo resumindo o AG utilizado no problema de escolha de bombas.
Bomba	1	j 2	3|	4	5	6	7	8	9	10	11	12	13	14		16
Estado	1	1°	1	1	1	0	0	0	1	1	0	1	1	1	1°	0
Figura 5.2: Representação do estado das bombas conectadas ao oleoduto
Desta forma o espaço de soluções a ser pesquisado compõe-se de 2n possibilidades representando os estados das bombas que alimentam a planta de produção, com n - 16.
Função de Avaliação
A função de avaliação no algoritmo genético toma-se o elemento evolutivo chave para a seleção de possíveis soluções. Uma boa avaliação atribuirá a uma boa solução um grau de maior adaptabilidade, e com maiores probabilidades de ser “pai” de uma nova solução no processo evolutivo. Uma boa avaliação deve evitar que o algoritmo descarte qualquer boa solução. Ou seja, é desejável um maior incentivo para as melhores soluções, representando-as com uma maior probabilidade para reprodução.
Este problema apresenta uma função de avaliação multi-objetivo, com diversos parâmetros representando diferentes aspectos da operação do sistema, entre os quais pode-se citar: a pressão em cada ramo na rede de dutos; o desvio da vazão enviada em relação à vazão de alimentação desejada; o volume dos tanques presentes na rede; a necessidade de adequação entre o envio de petróleo de cada ramal em relação a sua produção diária.
( \
Desta forma, as soluções apresentarão um maior valor para f quão mais adequada estas forem em relação aos parâmetros acima mencionados.
Onde, na função objetivo:
•	StateoFF*
É feito a somatória dos volumes futuros de todos os tanques selecionados para estarem desligados em determinado intervalo de tempo. Assim, boas soluções apresentarão os menores valores possíveis para esta variável, indicando que os tanques que estarão desligados encontram-se com os seus níveis baixos, atendendo aos padrões de segurança necessários para operação destes. Adotou-se sempre o intervalo de tempo para visualizar os estados dos tanques nas duas horas subsequentes.
•	MaxPressure:
Na resolução é exigido que o algoritmo atribua a esta variável o ponto com a maior pressão da toda rede. Foi observado durante todas as experimentações que o sistema de transporte do petróleo operou dentro de pressões factíveis para a rede, ou seja, a máxima pressão registrada foi de 90% em relação a capacidade total suportada por um ramo.
•	TotalFlow:
É o volume de alimentação na PPP em m3 em um dado intervalo de tempo, calculada pelo AG com a seleção de bombas buscando convergir para um valor pré-estabelecido quanto ao envio de petróleo a cada intervalo de tempo.
• goal pathl1 - flow path1:
Procura igualar a escolha das bombas por ramal, para que o montante de seu envio corresponda a sua produção relativa, de forma a equilibrar os estoques entre os ramais.
Ao todo a rede apresenta 2 ramais: no ramal 1 estão as estações 1EC, 2EL, 1EL, 6PB, 2PB, 3PB, 3CB e 6CB; no ramal 2 as estações 4PB, 1PB, 8PB, 7PB e 2CB; estando as estações 5CB, 1CB, 4CB conectadas diretamente a PPP. A produtividade relativa de cada ramal pode ser vista na figura 5.4, sendo o ramal 1 o que apresenta a maior produção 46%, e a visualização simbólica do ramal três com 32%, apresentando a produção das estações 5CB, !CBe4CB.
Produção média por ramal
H ramal! m ramal 2 □ ramal 3
Figura 5.4: Produção por ramal
5.3	Despacho das bombas
0 AG informa qual a combinação ótima de bombas em operação durante o intervalo de tempo t. No conjunto de bombas selecionadas para estarem ligadas, algumas das bombas não possuem controlador e por isso sempre operam em sua potência nominal. As bombas com controladores (variador de frequência) irão atuar de modo a atingir a vazão de alimentação desejada; o nível de operação das bombas com variador serão determinadas através da solução de um problema de PL. Assim, para manter coerência com as variáveis inteiras na modelagem, é utilizado o artifício de exigir uma vazão em x¡ igual a vazão fornecida das bombas sem variadores de frequência quando operado em seu valor nominal. As bombas que contam com variadores de frequência podem variar de zero até a sua máxima potência.
Formulação do problema
A resolução do problema é proposta através de programação linear, sendo um sistema que apresenta traços de programação multi-objetivo por minimizar o desvio na vazão de
alimentação na PPP e maximizar o envio das bombas com controle, minimizando seus estoques.
Kl	j.	C	j-
Min y (? + y + y a e\) Pi	jP J 7
s.a.
M 1	¿
fiiéij P] j j
P n t y t t y y eMBMe1 ~xl.
Adi 1	*-i 1
xt &amp;lt;xmax
j ' J
xt = xmax
i i
(5.1)
(5-2)
(5.3)
(5.4)
(5.5)
(5.6)
(5.7)
Descrição do modelo
(5.1)	Na função objetivo está sendo respectivamente minimizado o desvio em relação
a vazão desejada, considerando-se a vazão de todas as bombas: com e sem variador de frequência. O segundo termo em (5.1), aplicável apenas às bombas com controle, incentiva a maior vazão das estações de coleta de petróleo que apresentem níveis de tanques mais elevados ( e( ) proporcionalmente a sua capacidade de armazenamento ( a¡).
Dado o seguinte conjunto de restrições:
(5.2)	O valor de ( yln ) representa o excesso e o déficit durante o intervalo t em relação à vazão média de alimentação desejada ( m ).
(5.3)	A vazão total entregue a PPP em determinado instante ( Ql), será a somatória dos envios de todas as bombas naquele instante.
(5.4)	A vazão em cada bomba com variador de frequência ( Xj ) está limitada pela
quantidade disponível em estoque para envio ( er; ). mais o volume médio que esteja ingressando neste tanque (p ).
(5.5)	A vazão em cada bomba sem variador de frequência ( x*, ) está limitada pela
quantidade disponível em estoque para envio ( e1, ) mais o volume médio que esteja ingressando neste tanque ( p).
(5.6)	A vazão de cada bomba com variador de freqüência ( x j) para o instante t será positiva e menor ou igual a capacidade de envio de sua bomba.
(5.7)	A vazão de cada bomba sem variador de freqüência ( x\ ) para o instante t será
igual a capacidade nominal de sua bomba.
CAPÍTULO 6. ANÁLISE DOS RESULTADOS
6.1	Validação do Modelo
O modelo matemático desenvolvido para a resolução do problema de transporte de petróleo foi aplicado ao sistema da Petrolera Peres Companc SA, como apresentado no Capítulo 1. Inicialmente, considerou-se um cenário no qual todos os tanques estão em operação (sistema completo), e as simulações foram efetuadas para um período de 48 horas. Para este sistema foram testado 4 diferentes intervalos de discretização (30, 60, 90 e 120 minutos). Um outro cenário considerado foi a ocorrência de contingências simples, no qual supôs-se que uma das bombas com controlador ficou todo o período fora de operação.
A vazão fixada em 177 m3 representa sempre montante entregue a cada 30 minutos. Assim, quando forem apresentadas as intervenções no controle das bombas com discretização a cada 1 hora, 1 % hora, ou 2 horas, o valor 177 m3 representará a quantia entregue de forma constante para cada 30 minutos em relação a PPP; por exemplo: para intervenção a cada 2 horas, isto significaria 177 m3 x 4 - uma vez que duas horas compõe-se de 120 minutos (4 vezes 30 minutos).
6.2	Sistema Completo
Teste 1 ; Sistema completo com discretização de meia hora
Na tabela 6.1 é mostrado o comportamento do sistema num cenário de 48 horas para uma discretização de meia hora. A Ia linha indica os intervalos de tempo; cada intervalo de tempo corresponde a um período de 30 minutos. Na 2a linha estão as vazões de alimentação em m\ determinadas pelo PL (problema de Programação Linear) e na 3a linha estão as
vazões calculadas através de AG (Algoritmos Genéticos). As demais linhas mostram o comportamento de cada um dos tanques. Para cada tanque a primeira linha mostra o estado das bombas (ligado ou desligado) e a segunda linha apresenta os volumes armazenados ao final de cada intervalo em termos percentuais; o ingresso médio, a capacidade operativa das bombas, e a capacidade máxima de estoque em cada tanque estão descritos no Capítulo 1 (figuras 1.3 e 1.5).
Há uma diferença entre a vazão calculada pelo PL e pelo AG, pois o valor calculado através do AG supõe que todos os tanques irão bombear a sua vazão máxima. Na solução do PL estas bombas não escoam obrigatoriamente esta quantidade, pois o objetivo do PL é minimizar o desvio na vazão de alimentação. Em outras palavras, na solução do PL os tanques com controle bombeiam o suficiente para minimizar o erro na vazão de alimentação.
A solução apresentada na Tabela 6.1 obteve para todos os intervalos de tempo uma vazão de alimentação igual à desejada (2a linha). Nesta solução todas as restrições de armazenamento, limites operativos das bombas e restrições de pressão nos dutos foram atendidas. A segunda linha da tabela 6.2 mostra para cada um dos intervalos de tempo qual o duto (ramo) com a maior pressão da rede, e a sua respectiva pressão registrada em percentuais relativos a sua pressão máxima permitida (3a linha).
Na linha “volume” (tabela 6.1) foi atribuída uma coloração vermelha para os tanques com volume acima de 80% de sua capacidade nominal, como alerta indicando a ultrapassagem dos níveis desejáveis. A coloração amarela nas células serve para alertar o contrário: a existência de tanques muito vazios. Embora tanques com volumes baixos não indiquem uma situação grave, se comparados a tanques superlotados, não trata-se de uma situação desejada pois, o esvaziamento excessivo sem acompanhamento pode chegar a extremos com o bombeamento de ar, dado um tanque vazio. Há entretanto, um outro aspecto de maior importância no acompanhamento de tanques com níveis baixos: a escolha excessiva e desnecessária de um tanque para entrar na solução sobrecarrega tanques mais cheios, que deveriam estar sendo escalados para enviarem seus estoques. Tal situação ocorre no algoritmo quando um tanque mais cheio ao entrar na solução, causa um aumento na pressão do sistema hidráulico se comparado com uma com pressão menor mas com um volume relativamente mais baixo.
Tabela 6.1.1: Comportamento em dois dias (intervenções a cada meia hora)
31
32
27
33
34
35
36
37
38
45
46
47
48
28
29
30
39
40
41
42
43
44
25
26
1/2h
instante
Tabela 6.1.2: Comportamento em dois dias (intervenções a cada meia hora)
1/2h	instante	49	50	51	52	53	54	55 I 36		57	58	59	60	61	62	63 [ 64		65	66	67	68	69	70	71	72
vazão total	PL	177	177	177	177	177	177	1771177		177	177	177	177	177	177	177]177		177	177	177		177	177	177	177
	AG	180	180	206	192	180	185	2031181		190	179	226	180	197	179	180 1189		197	239	180	182	227	180	180	180
4PB	bomba	0	*	1	0	.J. .		■ I	o			1		-	0			i	rt u			’ :	: 0 : I Í 1 : 1 : 1						
	volume	62	61	59	64	62	61	59 I 64		62	61	59	64	62	61	59 j 64		62|61|59 [ 64 | 62					161	59	57 70 r69Z
1PB 7PB	bomba		0	:	1		0	4 : !			0		•			: Í 0			0 I t i : i 4					0 71 0	
	volume bomba	69 ■JÍRÍ	72 0	71 0	70 0	69	72 0	71 ! 70 ! i 1		691 0	72	71 0	70	69 0	69	68 1 70 1 69 -loo			72 1 71 1 7ÕT6ÕT69 0	0 Hi 0 j 0						
	volume	68	69	69	70	69	70	69 I 68		69	68	68	67	68	67	66 I 67 j 67			68 1 69	68 1 68	69					69	
2CB	bomba volume	0 53	4gj45		^J36 "T ; 0 39 | 45		o L.A71 oil i ; 1 1 0 47 ¡43 | 54 [50145 141 | 52							• =_ 1 i i 1 0	: : t :'o t ’ ¡ 3 i ! t 48T43¡39 ¡ 50 ¡46TITl'si' r48T44|""55^											
5C8	bomba	0 ; ' j ’					1 ! 1 • 1 ’ ’ j 0 , ' Í ~ * J '■ 0 \ ' - i ■ :	0 - J-i • Í ■ i “ ■ 1 43 741 740 [38] 44 [42 ¡41 ¡39] 45 [ «¡421401^1 44 1 43 1 41 T39[ 45 144																		
	volume ■ 4-i		42	40																					
1CB	bomba ■ I 1																								
	volume	4-	40	37			33 1 47 1 43 ! 40 1 36					32 1 46 1 43 j 39 [ 35 | 32 [46 | 42 [ 39 | 35 | 31 J 45 j 42 J 38 j 34 j 48 1 i 1 : • A ! : 1 1 1 : fl 1 : ' 1 0 ■ • I ’ I '■ ■ ’ i “7 ■															
4CB 60S 3CB 3PB	bomba ■ 1 ¡	? : 0							1 : 0																	
	volume J 70 bomba b&amp;amp;y volume [ 68		69 j 72 o : 1 'ra'Tss		72 0 73	71 70	70 68	69 0 72	72 69	72 0 73	71 70	73 68	72 65 0	72 0 69	71 0 73	70 1 70 rafes		69	72 0 : 1 72 I 75		71 73	70 70	73 I 72 t j o	 68]	71™		71 69 0	7Í" 0 73
	Volume [ 46 Bomba j 0		45 0	45 0	44 0	43 0	43 0	42 0	41 0	40 0	40 0	39 0	46 0	46 0	45 0	44 0	44 0	43	42 o te»		41 0	41 0	40	39 0 1 0		47 0	46 0
	Volume ¡ 67		67	67	67	68	68	68	68	68	68	69	69	69	69	69	69	70 ¡64		64	65	65 j 65		65	¡65
2PB	Bomba j 0					0			t	0			0			0		t	-»		0					
	Volume! 71		70	70	69	70	70	69	69	70	70	69	70	70	69	71	7p	7°T69		70	¡70	69	69	68	67
6PB	Bomba i 1									1	1					1									1
	Volume! 05		64	661	67	66	65	r 67	66¡	66	65	67	66 I	I 671	r 66	65	65I	66! 69¡		67	67	69	¡68	67	66
1EL 2EL	Bomba ] 1 Volume] 72 Bomba I !		72 0	71 0	70 0	70 0	69 0	0 73	72 0	F72 0	71 0	70	70	r 69 0	ligi 0	0 72 0	72 0	Imito 0 0		¡70	69 0	0 73 0	72&amp;lt;1	72 0	71 0
	Volume 1 67		68	68	69	69	70	68	69	69	70	68	67	67	68	68	69	69 i 70		68	69	69.	68	68	69
1EC	Bomba [iíífe;		0	mu			0					0				0					0				
	Volume [ 69		72	71	ir	I 69	72	71	70	69	69	72	71	r70	69	72	71	70 [ 69		69	72	71	70	69	68
8PB	Bomba ' 1		0	0		■	0	0		0	1	0		0	0	0		0 ■ ’		0	0		0	!	
	Volume [ 68		69	70	69	68	68	69	68	69	68	69	68	68	69	70	69	70 1 69		69	70	69	70	69	68
Tabela 6.1.3: Comportamento em dois dias (intervenções a cada meia hora)																									
1/2h	instante	73	74	75	76	77	78	79	80	81	82	83	84	85	86	87	88	89	90	91	92	93	94	95	96
vazão total	PL	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177
	AG	199	187	189	183	180	187	235	197	180	181	179	208	183	180	205	180	220	180	208	180	179	180	180	200
4PB	bomba	0			0				0				0				0		1	' 1		0			0
	volume	62	61	I 59	64	62	61	59	64	62	61	59	64	62	61	59	64	62	61 I	59	57	62	6ll	59	64
1PB	bomba		0				0				0	4			0					0			1		0
	volume	69	72	71	70	69	72	71	70	69	72	711	70	69I	72	¡71	70	69	69l	71	70	69	69	68	70
7PB	bomba	0	0		0		0	0		0	0		0			0		0	sÉÉÉl		0	0	0	0	0
	volume	69	70	69l	69	69	69	70	I 69’I	69	70	69	70	69	68	69	68	68	67	66	67	68	68	69	69
2CB	bomba		0				0	1 1 1		0	1			0			0	□			0	1		0	
	volume	42™¡	53	49	451	40	51	47 I 43		54	50 : 45		41	52	48	43	55	50	46	41	53	48	44	55	51
5CB	bomba				0			1 ¡ 1		Í1 ■&gt;/		1			0	1			0			1	0		1
	volume	42	40	39	45	43	41	40 Í 38		44	42	41		39	37	43	42	40	38	44	43	41	39	45	44	42
1CB	bomba					0		1	•	1	0 ■ 1					0					0				1
	volume	45	4ll	37	34	48	44	40 i 37		33	47 : 43		40	¡36	32	46	43	39	35	32 I	46	42	39		31
4CB	bomba			0			1	1		1	1 i 1				0				1			0			
	volume	70	69	72	T2\	71	70	73	72	72	71 ! 70		I 70	69	72	71	70	72 j	71	70	69	72	[72	71	70
6CB	bomba	1		0	1	0			0		1 I o			0	1	1	0		0	?	1	0		0	!
	volume	70	6sl	71	69j	73	70	68	72	70	67 I 71		68	72	70	67	71	68	72	70	67	71	68	72	70
3CB	bomba										1 I 0							*		■I			0		
	volume	45	45	44	43	43	42	41	40	40	39	46		46	45	44	^44	43	42	41	41	40	39	47	46	45
3PB	bomba	0	0	0	0	0	0	0	0	0	0 I 0		0	0	0	0	0	0	0	0	0	0	0	0	0
	volume	65	65	66	66	66	66	66	66	67	67	67	67	67	67	68	68	68	68	68	68	69	69	69	69
2PB	bomba	0	0	TOjgg			0			0			0	Í				0		0				1	0
	volume	69	70			69	70	70	69	70	70 [69		71	70	70	69	68	70	69	71	70	70	69	68	70
6PB.	bomba 1		67167^^																						
	volume	67				65	65	67	68	67 I 66		65 0	67 [ 67 [ 65 I 67 I 66					69	68	70	69	68	67	66	67
1EL	bomba			t I 0 : 1															0	1					
	volume	70	r 7o	69	73	72	72	71	70	70	69	73	72	72	71	70	70 I 69		73	72	72	71I	70	70	69
2EL	bomba	0	0		0	0	0		0		0	0	0		0	0	1 i 0			0	0	—			0
	volume	69	70	681	69	69	70	68 I	69	67	68	68	69	67	68	68	67 1 67		66	66	67	65	64	62	63
1EC	bomba	0	1		0				■		0		1	0	1	1	I 1			0 111			0		
	volume	71	70	69	72	72	71	70	69	68	71	70	69	72	72	71	70 ¡69		68	71	70 J	69	72	72	71
8PB	bomba	0	0	0	!		0	0	i	0	0		0	1	0		■ : 0		0	0			0	0	0
	Volume	69	69	70	69	68	□9	70	69	69	70	69	70	69	70	69	68 J 68		69	70 I 69 I 68			69	69	70
Tabela 6.1.4: Comportamento em dois dias (intervenções a cada meia hora)
V2h	instante	1	2	3	4	5	6	7	8	3	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24
crítico	Ramo	5	5	7	7	5	5	5	7	7	7	5	7	7	7	5	7	7	5	10	7	5	7	10	7
	pressão	64	66	77	72	66	66	66	77	72	77	66	77	68	77	66	77	77	66	85	73	66	72	85	77
critico	instante	25	26	27	28	29	30	31	32	33	34	35	36	37	38	39	40	41	42	43	44	45	46	47	48
	Ramo	5	7	7	5	7	7	7	5	7	7	5	7	7	7	5	7	7	10	5	7	7	5	7	7
	pressão	66	77	68	66	77	77	77	66	77	73	66	72	77	77	66	72	73	85	66	77	77	66	77	73
critico	instante	49	- 50-	51	52	53	54	55	56	57	58	53	60	61	62	63	64	65	66	67	68	69	70	71	72
	Ramo	5	7	7	7	5	7	7	7	5	7	7	5	7	7	5	7	7	7	5	7	7	10	7	7
	oressão	66	72	77	77	66	72	78	77	66	77	77	66	77	77	64	77	77	77	66	72	73	85	77	77
crítico	instante	73	74	75	76	77	78	79	80	81	82	83	84	85	86	87	88	89	90	91	92	93	94	95	96
	Ramo	5	5	10	7	7	5	10	7	5	7	7	5	7	7	7	10	5	7	5	7	10	7	10	5
	pressão	66	66	85	68	77	66	85	77	66	72	73	66	77	77	77	85	66	78	66	77	85	77	85	66
Tabela 62: Pressão máxima na rede (intervenções a cada meia hora)
Na tabela 6.1 as bombas com variadores de frequência estão com as correspondentes células com tons em cinza. 0 mesmo critério é empregado para a apresentação dos valores de todas as tabelas apresentadas nos demais intervalos de intervenção. Veja a figura 6.1 se desejar situar o comportamento das pressões no layout da rede; a pressão máxima é de 35 kg do ramo 0 ao ramo 4, e 75 kg nos demais ramos. A avaliação do comportamento da rede de dutos deixa claro a existência de alguns pontos com maior pressão, que são os dutos 5, 7 e 10 (tabela 6.2), destacando-se que o ramo 10 atingiu a maior pressão, 85%. Isto é um fato facilmente compreensível se observado que
46% da produção deve necessariamente passar pelo ramal 1 para atingir a PPP (Planta de Pré-processamento de Petróleo).
Todos os tanques foram inicializados com os volumes a 65% de sua capacidade de armazenamento. Na figura 6.2 temos o comportamento dos tanques 5CB e 1CB que apresentam uma alta produção, a 6CB que é uma estação com variador de frequência e a 3PB que trata-se de um tanque com uma produção baixa. Da análise do comportamento dos volumes armazenados nota-se que após alguns intervalos de tempo, quando dilui-se o efeito da condição inicial, os volumes apresentaram-se bastante estáveis.
Série histórica
95
85
75
65
55
45
35
25
15
a


01
E
£
3
&gt;
1	"$"¿"1"! ri"i1 t"T"j"r"7"T rrnrr r r	TT'rvT'i'b'r ? v tti ¿ rr rur i"Tr'•=iii'''i''rT'i'r1 rn'r r ¡'íTrr ru'i t i
-	C£&gt;	CO v-CDt-ÍO
t-t- cm cm co co '^’¡rmiDCDCDi^r^cococncn Discretização de meia hora: cenário de dois dias
5CB 1CB —6CB —3PB
Figura 6.2: Série histórica de tanques representativos
A grande maioria dos tanques está operando com seus volumes entre 65% e 75% de suas capacidade (figura 6.3), sem nunca ultrapassar os 75%, Na operação atual do sistema da Petrolera Peres Companc o patamar de 75% da capacidade dos tanques é considerado extremamente seguro. Nota-se também que há poucas ocorrências com volumes abaixo de 35%.
Comportamento dos níveis nos tanques
Intervenção meia hora
Figura 6.3: Histograma de volumes
Observou-se num cenário de 48 horas que o número médio de partidas por bomba foi igual a 19,46 - um bom resultado: o número médio no sistema em operação é de 24,01.
Teste 2 : Sistema completo com discretizaçâo de uma hora
Ficou constatado que a solução com a discretizaçâo de uma hora (Tabela 6.3) tem um comportamento similar ao caso com discretizaçâo de meia hora. Novamente obteve-se uma vazão de alimentação igual a vazão desejada em todos os intervalos de tempo e sem nenhuma violação de restrições.
Através da Figura 6.5 pode-se notar que a amplitude da variação dos volumes armazenados nos tanques é maior do que no caso anterior, sendo possível observar alguns tanques com níveis abaixo do nível mínimo desejável, com volumes próximos a 25% da capacidade de armazenamento. Pela figura 6.6 pode ser observado com maior clareza que a maior parte dos tanques também operaram com seus volumes numa faixa entre 65 a 75% da capacidade de armazenamento, porém já apresentam valores um pouco maiores que o caso anterior.
Constatou-se também através da tabela 6.4 que os ramos 0, 5, 7 e 10 são os que apresentam a maior pressão percentual na rede. O ramo 5 registrou a maior pressão: 90%.
1h	instante	1	2	3	4	5	6	7	8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24
vazão	PL	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177 177	177	177	177	177	177	177	177	177
Total 4P8	AG bomba	180	182	180 •	180	197 0	180 i	180 0	190	183 i	198	180	199 0	179	205	180 181 1 0	221	178	191 0	180	218	195	182 0	227 1
1PB	volume bomba volume	61 0 69	57 0 73	54 72	51 70	61 69	57 "7“ 67	67 0 72	64 70	61 ■ 69	r57 0 73	54 72	64 70	61 69	i 57 0 73	[ 54] 64 "72170	61 69	57 67	67 0 72	64 70	61 69	57 0 73	67 /Ç	64 70
7PB	bomba	1	0		0	0		0	0	0	0	0	0		0	0	■■	0		0		0	0		0
	volume	63	64	62	63	64	63	64	65	66	L57	69	70	68	69	70 1 69	""id	'"os""	’ 69_	^7"'	69	70	68	69
2CB	bomba		1	1	1	0		0				0				0	:		0				0		
	volume	56	47	38	30	52	43	66	FS7	48	40	62	53	45	36	58 ! 50	41	63	55	46	37	60	51	42
5CB	bomba			1						0				0				0					0	-f
1CB 4CB	volume bomba volume bomba volume	61 57 0 70	¡ 58 50 1 69	54 42 0 75	51 35 74	r 47 28 73	44 0 56 71	41 48 70	37 41 68	50 34 0 75	46 0 62 J 73	43 54 72	39 47 70	52 40 69	48 : 32 0 	75 :	45 £41 0 1 " 60 I 53 74 I 72	38 46 77	50 39 75	47 31 74	43 0 59 73	40 52 73	37 45 71	49 37 70	45 J 30 71
8GB	bomba		0	0			0		0			0		0		-■ I 0				0			0	
3CB	volume bomba volume	59 63	67 61	74 60	70 59	65 57	'72-1 56	67 54	75 53	r701 52	^65 50	"vn 49	67 ] 47	75' 46	r 70 45	' 65 ¡ 72 43 1 42	78 40	73 39	68 0 54	76 52	73 51	68 50	75 48	74 47
3PB	bomba	0	0	0	0	0	0	0	0		0	0	0	0	0	0 1 0		0	0	0	0	0	0	0
	volume	65	65	65	66	66	66	67	67	67	68	68	68	69	69	69 [ 70	59	59	60	60	60	61	61	61
2PB	bomba	0	0		0	1			0			SB	0			1 I ■	Q	0				0	■*	
	volume	67	70	69	72	71	70	691	72	70	69	68 1	71	70	69	67 [ 66	69	72	r?1	1 70	69 I	72	70	69
6PS	bomba			1	0								i			; ’	0							
	volume	62	60	58	63	65	63,	L 61	6V	60	62	sol	62	60	64	S1J59	65	[62	62	60	65	67™	65	70
1EL	bomba	0			0					1			0	■1				0						1
	volume	71	70	69	75	74\	73	r72	71	70	69	Í68	74	73	72	71 £70	69	75	74	nr	r72	71	70	69
2EL	bomba	0	0		0	0	0	0	0				0	0	0	0 0	0		0	0	0		1	0
	volume	66	67	64	65	66	67	68	69	70	67	64	65	66	67	68 J 69	70	67]	68	,69	70	67	64	65
1EC	bomba	0	1	0			1	0					0			! I 0	-			1	0	!		
	volume	70	69	75	73 I	71	69	75	7p	72	70	69	75		71	69 I 75	74	721	/0	69	75	73	71	69
8PB	bomba volume	0 66	0 68	0 69	0 71	69	67	64	0 66	0 68	0 69	0 71	69	0 70	68	1 : 0 66] 68	0 69	0 71	69	67	0 68	0 70	68	0 69
Tabela 6.3.1: Comportamento em dois dias (intervenções a cada uma hora)
1h	Instante	25	26	27	28	29	30	31	32	33	34	35	36	37	38	39	40	41	42	43	44	45 j 46	47	48
vazão total	PL	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177	177 177	177 177
	AG	180	179	180	222	180	181	197	180	202	180	182	179	197	227	180	179	,186	196	180	182	197j180	183 177
4PB	bomba	;			0	!		0				0				0				0			0 ■ i
	volume	61	57	54	64	1611	57	67	64	61	57	67	64	I 61	57	67	64	61	57	67	64		67 j 64
1PB	bomba	1		0			0				0				0				0			: j 0	
	volume	69	67	72	70	69	73	72	70	69	73	72	701	69	73	72^	70	'59	73	72	70	69 j 73	72 I 70
7PB	bomba	0	■1		0	0	0			0	t		0	0	0	0	0		0	1	0	0 [ 1	0 :■ i
	volume	70	69	67	68	69	70	69	67	68	66	64	66	67	68 J	69	70	69	70	68	69	70 £69	70	68
2CB	bomba	0				0				0	1		0	1			0			0			0 : 1
	volume	65	56	47	38	61	52	43	35	57	48	40	62	53	45	36	58	50	41	63	55	46] 37	60 j 51
5CB	bomba			0					0				0					0				1 0	
	volume	4F	39	51	47	i 44	41	37	50	46l	431	39	52	48	[45	41	38	50	47	43	40	37 ¡ 49	45 ¡42
1CB	bomba	0					0					0				0					0		
	volume	58	51	43	36	29	57	50	42 1	35	28	56	48	41	34J	62	54	47	40	32	60	53 J 46	39 I31
4CB	bomba	!		0							0					1		0				1 i 0	74172
	volume	70	68]	75	75	74	72	71	70	™gg	74	73	71	70	72	70	69	75	73	72	[70	69 1 75	
6CB	bomba	4	0			0	■t	5	0		0			0			0		1	0		0 . 1 ] 1 i 0	
	volume	69	76	m	69	76	pT	Tael	74	69	76	71	66	74	721	67	75	70	65 1	72	'67	75 I 70 j 65 1 72	
3CB	bomba					1		0						t	1	1		Í	0	1			
	volume	45	44	I 43	41	40	38	53	52	50 I	I 49	47	46	45	43	42	40	39	54	52	51	50	48	47	45
3PB	bomba	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0 0	0 0
	volume	62	62	62	63	63	63	64	64	64	65	65	65	65	66	66	66	67	67	67	68	68 68	69	69
2PB	bomba		0			0			0				0			0					C : ’ Í 3		
	volume	68 ] 71 | 70 j 69 1 72 j 70 1 69 T 72 i 71 I 70 I 69 I 72 ! 70 Í 69 Í 72 I 71 I 70 ! 69 I 67 I 70 [ 69 ¡ 72 Í 71 J 70																					
6PB																							
	volume	68 ( 66 I 63 I 69 I 66 J 64 J 66 I 64 ! 67 I 65 j 63 I 61 I 63 I 68 J 66															63 ¡ 63 [ 64 I 62 [ 60 I 62 I 60						59 I 64 0 ■ !
1EL	bomba		0 i 1		1 ¡ 1 Í 1 Í 1 ! 1 I 0 i 1 ■ Í j-y f, J . 1 Q																		
	volume	68	74	73	72 1 71		70	69		68 1 74 j 73			72	71	70	69 67	75	74	73	72	71	70	69	68	“74 j ’73 ’
2EL	bomba	0	0	0	0 I i		0 j 0		1J 0 0			0	0	0			0	0	0	1	0	0 0	0 : 1
	volume	66	67	68	69 J 66		67 I 68		65 1 66 ¡67			68	69	70		64	65	66	67	64	65	66	67	68 I 65
1ÊC	bomba	1	0	r	: i I		0 1ÍÍÍ					0	1					0	1		0		
	volume	68	74	72	70	69	75 I 73		71 j 69 I 68			74	72	70	69	67	65	71	69	68	74	72 i 70	69	67
8PB	bomba	■	0	0	68	-	0 I 0		0:1;’			0	1	0	0	0			0		0	0 ’	0 0
	volume	67	69	70		66	68 I 69		71 I 69 I 67			68	66	68	69	71			68	66	68	69 f 67	69	70
tabela 6.3.2: Comportamento em dois dias (intervenções a cada uma hora)
1h	instante	1	2	3	4 | 5	6	7	8	9	10	11	12 I 13	14	15	'""ie"’]'	TtTis"'	19 I 20	21 j 22	23	24
crítico	Ramo	5	5	7	5 I 7	7	7	5	7	10	10	5	7	7	7	7	0 [ 5	7	7	7	5	10	7
	pressão	64	66	77	90	77	77	72	66	77	85	85	64	77	77	77	72	57 1 66	77	77	72	66	85	77
critico	instante	25	26	27	28 I 29	30	31	32	33	34	35	36 | 37	38	39	40 1 41	42	43	44	45	46	47	48
	FRamo	7	5	7	7 I 5	7	7	5	7	7	7	5 ! 7	10	5	777	10	5	7	5	7	0
	pressão	77	64	77	77 I 66	72	77	66	73	77	72	66 | 77	85	66	77 1 72 1 77	85 [ 66	77 | 66	73	57
Tabela 6.4: Pressão máxima na rede (intervenções a cada uma hora)
Com port amento dos níveis nos tanques
£0
O Q £
h o ra
Figura 6,5: Histograma de volumes
Observou-se num cenário de 48 horas que o número médio de partidas por bomba foi igual a 10,55.
Teste 3 : Sistema completo com discretização de uma hora e meia
A solução obtida para o intervalo de discretização de uma hora e meia também atendeu a vazão média desejada e também não violou nenhuma restrição. Porém, o comportamento do volume armazenado do tanque 6CB já atingiu níveis críticos ( 80% de sua capacidade). Embora por um tempo relativamente baixo, é um comportamento indesejável, por questões de segurança, supondo-se uma situação de emergência.
Tabela. 6.5.1: Comportamento em dois dias (intervenções a cada uma hora e meia)
193|222 j		180	181	195	183 0	212
	0|					
53	' 74!	69	64	59	74	69
			0			0*
71	69]	66	73	71	69	75
0	OI			0	0	0
56	57	57	58	58	59	591 60		60	61	61	|62
			0			□ f				0	
72	¡70	68	73	71	69	74 i	72	70	68j	73	I71
75	71	68	68 j q|	65	71	67
69	68	66	76f	74	73	71
46	46	47 í	47
69	0 74	72?	70
0 66	71	69)	75
Tabela 6.5.2: Comportamento em dois dias (intervenções a cada uma hora e meia)
1h1/2	instante	1	2	3	4	5	6|	7	8	9	10	11 12	• 13	14	15! 16
crítico	Ramo	7	5	5	0	7	5	10	7	5	10	7	7	5	10	7	5
	pressão	77	66	66	57	77	66	85	56	66	85	77	73	66	85	771 66
critico	instante	17	18	19	20	21	22¡ 23	24	25	26	27¡ 28	29	30	311 32
	Ramo	7	7	7	5	7	7|	5	7	7	7	5|	7	0	5	7|	7
	pressão	72	77	77	66	73	72 ¡ 66	77	77	68	66| 77	57	66	721 77
Tabela 6.6: Pressão máxima na rede (intervenções a cada uma hora e meia)
Série histórica
□scretizaçao de uma hora e meia: cenário de dois dias
5CB ■—®—1CB —6CB
3PB |
Figura 6.6: Série histórica de tanques representativos
O comportamento do nível dos tanques apresenta uma maior variabilidade, havendo tanques que alternam seus níveis de volumes altos para volumes baixos (figura 6,6).
Comportamento dos níveis nos tanques
Intervenção uma hora eme ia 
Figura 6.7: Histograma de volumes
Nota-se pelo histograma dos volumes armazenados que a intervenção no sistema de bombeamento a cada uma hora e meia trabalha com volumes máximos maiores do que os dois casos anteriores, embora a grande maioria ainda opere com níveis entre 65 e 75% (figura 6.7).
Observou-se num cenário de 48 horas que o número médio de partidas por bomba foi igual a 19,45.
Teste 4 : Sistema completo com discretização de duas horas
Finalmente, para o intervalo de discretização de duas horas também se obteve uma solução com a vazão de alimentação desejada em todos os intervalos de tempo e também sem nenhuma violação de restrições. Porém, como já se tinha observado no teste 3, esta solução resulta em volumes máximos ainda maiores que todos os casos anteriores. Por exemplo, o tanque 1CB apresentou um volume de 89% sobre sua capacidade por quatro horas dentro de um cenário de 48 horas (tabela 6.7). Este foi o maior volume ocorrido neste
teste, sendo explicável dado as características da 1CB que possui alta produtividade em relação a sua capacidade nominal de armazenagem, resultando num rápido enchimento onde o tanque passa de um nível de 32% para 89% após estar desligado por duas horas o seu bombeamento.
2h	instante	1 I 2		3	4	5	6	7 I 8		9	10	11	12	13	14	15	16	17 I 18		19	20	21	22	23	24
vazão total	PL	177	177	177	177	177	177	1771177		177	177	177	177	177	177	177	177	177 177		177	177	177	177	177	177
	AG	180	205	195	180	179	181	180|180		237	18Q	179	219	180	180	204	219	195|180		183	205	181	180	186	180
4PB	bc:m:&gt;a ■ '		0				4	0		4	0		:		0	•.				0	!		...	0	!
	volume	57	78	71	64	57	51	HJ..64J		57	78	71	64	57	78	71	64	57 j 51		71	64	57	51	71	64
1PB	bomba		0			*	:	o ta		0	Op		0			*•	0				0			:	0
	volume	61	70	67	64I	61	58	67 | 64		73	70I	67	76	73	70	67	76	73 I 70		67	76	73	70	67	76
7PB	bomba		1	0		0	Q	•. : 0		0	-		0			0	0	o 	•		0	0	0	0	0	0
	volume	61	57	60	56	58	61	57 [ 60		62	sal	55	57	54	50	52	55	57 | 54		56	58	61	63	66	68
2CB	bomba		1	0			0	*. : 1			0				0			0				0			0
	volume	47	30	75	67 J	40^	iã	67 | 50		32]	77	60	42	25	70	52	35	■	62	^451	27	72	55	37	
5CB	bomba					0		4	!	«				0	í		■	0				0					I	0
	volume	58	51	44	37	62 | 55 | 48 j 41				35	28	52	45	39	32	56	50 | 43 I 36			60	54	ázl	40	33	58
1CB	bomba				0	1 í 1 I 1 í Q							»	0			■ í 1 ! 0							0	1
	volume	50	35	20	76	62	47	32 i	■'■i			59 ■ 45		30		71	57	42 | 28			69 1	54	4CH	25	81 I 57	
4CB	bomba	0				1 i C ; 1			1 | 1 i 1 í 1					1								0	•	1 *	
	volume	77	75	74	72	69 j’.S2í		SO	p-'	¿4		81 i 79			77	76	741	76 1 75 [ 73 | 70				"ST		79	76 1 74	
6CB	bomba	0	•—Z—		0			0				0		1 0			1 : 1		"èr'76		71	63	0 78		
	volume	79	74	69		75 1 67 1 74 | 76					67		77^	69 j.tS,		79 í "4		69							
3CB	bomba	•				1					0	m		1 i 1		nnu	lililí:						0	1 1	
	volume	61	59	56	53	50	4/ $ -tO		42 | 39		68	66	63	60	57	54	52	49	46	43	40õ	38	67	64	61
3PB	bomba	0	0	0	0	0	0 0		o fUl		0	0	0	0	0	0	0	0	0	0	0	0	0	0	
	volume	65	66	66	67	68	68 I 69		70 | 48		49	50	50	51	52	52	53	54	54	55	55	56	57	57	36
2PB	bomba	0		0		1 ; i i 1			1 i 0		0			0				0			0				0
	volume	70	68	74	72	69 | 67 I 64			62 j 68		74	72		75	i 73	70	68	74	72	69	75	73	70	168	74
6PB	bomba					0 = -	! i			0 1		1	I														0
	volume	60	64	63	58	68 | 63 [ 58			63 ■ 79	74 ' 68				77	72	| 66	70	79	78 "1	73	68	72	67	62	58	68
1EL	bomba	SUB	0			«	C í ’		*?-:■» T «					o ■■ l							0				
	volume	62	75	73	71	69			78 | 75		73 | 71		m -			78	75	73	71	69			78	[75	73
2EL	bomba	SÉll	0	0	0		0	0	! | 0		mi o		0	0 ! 1		0	0	0	0	0	0	0		0	
	volume	59	61	63	65	59	61	63	57 | 59		53 | 55		57	59 : 53		55	57	59	61	63	65	67	61	63	57l
1EC	bomba	0		•			1	0		o				0 ; 1						0			0		
	volume	76	73	69	66	63	59	71	68		76 ¡73		69 MU 78			75	71	68	64	76	73	69	liglli	78	75
8PB	bomba	■	0	0 ’		0	lililí			¡ 0	i» o		0	0 : 1		0	0	0	1	0	0	0		0	1
	volume	60	63	67 I 62		65	61	57	53 ¡ 56		52 j 55		58	61 | 57		60	63	67	62	65	69	72	68	71	67
Tabela 6.7: Comportamento do modelo com intervenções a cada duas hora
Os tanques das estações de coleta 2CB, 4CB, 6CB, 1EL, 1EC também operaram com volumes altos, tendo sido registrado que na média 18,8% do tempo há algum tanque operando com volumes acima dos 80%. Tal taxa é pouco recomendável devido aos aspectos de segurança para a realização do transporte do petróleo e o controle dos tanques, mesmo não tendo ocorrido o enchimento total de nenhum dos tanques em operação.
2h	ínstame	1	2	3	4	5	6	7	8	9	• 10	11	■12:	13	44	15	16	17	18	19	20		22 ;	23	24
critico	Ramo	5	7	5	7	0	7	7	0	5	5	7	7	5	10	7	7	5	7	7	5	7	7	7	0
	pressão	66	73	66	77	57	73	72	57	66	66	77	77	64	85	77	77	66	77	72	66	77	77	77	57
Tabela 6.8: Pressão máxima na rede com intervenções a cada duas horas
O comportamento das pressões na rede de dutos continuou a apresentar um resultado similar aos outros intervalos de intervenção no sistema de bombeamento (tabela 6.8),
enfatizando que para este sistema o aspecto pressão nos dutos não demonstrou-se proibitivo. Novamente os ramos que registraram a maior pressão foram 5, 7 e 10, tendo nível de pressão mais alto ocorrido no ramo 10 com 85% de capacidade.
Série histórica
Discretização de duas horas: cenário de dois dias
—5CB ™^1Cg -^-6CB _^3pg l
Figura 6.8 - Série histórica de tanques representativos
A figura 6.8 mostra a grande variação nos níveis dos volumes armazenados nos tanques com amplitudes ainda maiores que os casos anteriores, ocasionado pelo longo intervalo que as bombas ou ficam ligadas ou desligadas (figura 6.8). Dos dados apresentados na figura 6.9 pode-se notar que os volumes máximos são maiores do que todos os casos anteriores, embora poucos casos ultrapassem os 80%.
Comportamento dos níveis nos tanques
V o lu mes
I ntervencao duas horas
Figura 6.9: Histograma de volumes
6.3	Avaliação de estabilidade do AG implementado
O AG é uma metodologia que tem uma componente aleatória e a cada nova execução do algoritmo obtém-se uma nova solução. Para testar a estabilidade do algoritmo genético, foi analisado o comportamento do número de partidas por bomba, uma vez que todas as soluções obtiveram as vazões desejadas. A semente utilizada no gerador aleatório em cada execução foi inicializada com os valores hora, minutos e segundos obtidos do relógio onde o programa foi rodado. Com sementes distintas, observando sempre um cenário de dois dias, executou-se 5 vezes cada um dos modelos, ficando demonstrado a estabilidade de seus comportamentos.
Obtidos esses valores, fizemos a sua análise através da ferramenta estatística boxplot (ver figura 6.10). O boxplot é uma ferramenta estatística onde os dados são todos ordenados do menor valor para o maior. Esses valores são igualmente distribuídos em grupos de 25%, que denominamos quartis. Ao olhar para o primeiro quartil, a haste inferior do gráfico, é possível ter uma idéia do valor mínimo do conjunto de dados, situado na extremidade inferior desta haste, bastando fazer a interseção deste ponto com o valor no eixo y. O segundo quartil é representado pela caixa inferior do gráfico. Para localizar a mediana entre os dados em observação basta correlacionar a parte superior do 2o quartil com o eixo y. O 3o quartil, representado pela segunda caixa no gráfico, também identifica na sua parte inferior a mediana, e em sua extremidade superior o ponto correspondente a 75% dos valores ordenados. O último quartil trata-se da haste superior, registrando a existência do maior valor no conjunto de dados por sua extremidade superior. Toda vez que algum valor no conjunto de dados apresentar um comportamento muito distinto dos demais itens analisados, o gráfico apresenta um asterisco fora de uma das hastes, na extremidade que corresponda ao ponto de ocorrência deste valor. Este valor fora dos padrões é citado na literatura como um ponto de ^outlyer” ou fora do normal.
A tabela 6.9 apresenta os dados para a discretização de meia hora. “Ql” representa o primeiro quartil e “Q3” o terceiro quartil, sendo que “Média” representa o número médio de partidas das bombas no cenário de dois dias.
Teste	Média	Mediana	Mínimo	Máximo	Ql	Q3
l/2h 1	19,62	21,50	1,00	37,00	12,75	26,50
l/2h 2	19,25	20,00	1,00	36,00	12,75	27,50
l/2h3	19,56	20,50	1,00	38,00	13,50	26,75
l/2h 4	19,31	20,50	1,00	36,00	12,00	27,00
l/2h 5	19,56	21,00	1,00	36,00	11,75	27,75
Tabela 6.9: Estatística descritiva - intervenção a cada meia hora
Neste teste o número médio de partidas ou inicialização de bombas foi de aproximadamente 19,4 e com uma variação menor do que 2%. O valor mínimo que uma
das máquinas foi inicializado é sempre igual a um, sendo que o número máximo de partidas também apresenta pouca variação.
Figura 6.10: Boxplot do número de partidas de máquinas
A tabela 6.10 e a figura 6.11 mostram os resultados para a discretização de duas horas, e nota-se um comportamento similar ao caso de meia hora. De modo que para este sistema o AG demonstrou-se bastante estável. Na figura 6.11, o último boxplot não apresenta a haste superior pois, o valor máximo coincide com o valor do 3o quartil em relação ao eixo y (veja os respectivos valores na última linha da tabela 6.10).
lestes	Média	Mediana	Mínimo	Máximo	Qí	Q3
2 h 1	5,50	6,00	2,00	8,00	3,50	7,00
2 hl	5,37	6,00	1,00	8,00	4,00	7,00
2h3	5,43	6,00	1,00	8,00	3,50	7,00
2 h 4	5,62	6,00	1,00	9,00	4,00	7,00
2 h5	5,56	6,00	2,00	7,00	4,25	7,00
Tabela 6.10: Estatística descritiva
Numero de partidas nas bombas
Intervenção a cada duas horas
Figura 6.11: Boxplot do número de partidas de máquinas
6.4	Uma Análise Multiobjetivo
Como o objetivo principal, que era obter uma vazão de alimentação constante, foi alcançado, é necessário analisar outros aspectos para direcionar a escolha da melhor alternativa em termos do intervalo de discretização. Nesse sentido dois aspectos são importantes : o número máximo de partidas e o volume máximo dos tanques.
O número máximo de partidas de bombas é um aspecto a ser otimizado, pois quando um motor elétrico é inicializado, há um pico de demanda de energia até estabilizarse, além de um número alto de partidas poder danificar os equipamentos. Desta maneira, o ideal seria manter um sistema de transporte onde possa ser obtido o menor número de partidas possível. Por sua vez, um modelo com baixos números de partidas requer um
menor número de intervenções no sistema de bombeamento. e consequentemente opera-se com volumes maiores e maior variação no volume dos tanques, o que é indesejável.
Foi adotada uma margem operativa de segurança para o volume dos tanques como sendo menor que 80% de sua capacidade nominal. O nível dos tanques quanto mais distante do seü limite superior representará um indício de maior segurança na operação do sistema de transporte de uma petroleira.
Figura 6.12: Comparação entre os quatro tempos de intervenção: volume dos tanques
Quão maior o espaço de tempo para intervir no sistema, acentua-se mais os extremos dos volumes nos tanques, tanto para os tanques que atinjam um elevado volume quanto aos que apresentem níveis abaixo (figura 6.12). Os asteriscos dos quatro casos na haste inferior do gráfico boxplot ocorrem devido a alguns tanques que por serem escalados muitas vezes, operam com níveis mais baixos que a média dos outros tanques.
Intervenção	Média	Mediana	Mínimo	Máximo		Q3
!4ht	62,28	68,00	31,00	75,00	59,00	70,00
1 ht	62,82	67,00	28,00	78,00	59,00	70,00
I 1/2 ht	63,42	68,00	24,00	80,00	57,00	71,00
2 ht	63,43	66,00	20,00	89,00	57,00	73,00
Tabela 6.11: Estatística descritiva dos volumes
Um fato interessante e importante a destacar dos resultados apresentados na tabela 6.11 é que no volume médio (Ia coluna) há pouca variação entre a discretização de meia hora e duas horas, algo em torno 0,25%. mas os volumes mínimo e máximo (respectivamente as 4a e 5a colunas) apresentão uma significativa variação quando comparadas estas duas discretizações; estas variações são respectivamente da ordem de 42% e 17%. Donde pode-se concluir, mais uma vez, que o intervalo de discretização influi fortemente sobre o aspecto da segurança sobre a capacidade de armazenamento dos tanques.
Comparacao de partidas nas bombas
1 ntervencoes-m eia, um a, um a e m eia, e duas noras
Figura. 6.13: Comparação das partidas de bombas entre os quatro tempos de intervenção
O número máximo de partidas com intervenções a cada duas horas é significativamente menor em comparação com a realização de intervenções de meia hora no sistema de bombeamento (figura 6.13). Os dois asteriscos na parte inferior dos modelos uma hora e uma hora e meia deve-se a uma bomba com um tanque onde a baixa produção na estação de coleta faz com que essas duas discretizações no modelo escolha ativar esta bomba um número muito baixo de vezes, se comparado às ativações das bombas nas outras estações de captação do petróleo.
Modelos	Média	Mediana	Mínimo	Máximo	Q1	Q3
1/2 ht	19,46	21,00	1,00	38,00	13.25	27,00
1 ht	10,55	11,00	1,00	18,00	9,00	14,00
1 1/2 ht	7,27	7,50	1,00	12,00	6,00	9,00
2ht	5,50	6,00	1,00	9,00	4,00	7.00
Tabela 6.12: Estatística descritiva das partidas de bombas
Comparando-se a intervenção de meia hora com a de duas horas, constata-se uma brutal diminuição de 76% do número máximo de partidas em bombas, com um acréscimo todavia de 19% no maior nível de volume armazenado entre os tanques. Embora a intervenção no sistema de envio de petróleo a cada duas horas seja ideal do ponto de vista da diminuição das partidas em bombas, notamos que há uma alta significativa nos tanques com maior produção, chegando a ser registrado níveis de 89% sobre a capacidade de armazenamento de alguns tanques.
Figura 6.14: Diferentes tempos de intervenção no envio de petróleo e o volume máximo
Fazendo-se uma análise do volume dos tanques sobre a ocorrência do maior nível, num cenário de 48 horas, constata-se que se comparado a intervenção no sistema de bombeamento de meia em meia hora com a intervenção de uma hora, obtêm-se uma diminuição de 53% do número máximo de partidas em bombas (figura 6.14) com um acréscimo apenas de 3% no maior nível registrado entre os tanques. Portanto, uma diminuição significativa em que o volume máximo dos tanques opera a 78% de sua
capacidade (tabela 6.11), um nível de operação que pode ser considerado bom sob os aspectos de segurança que resultaria em economia de partidas e menor estresse aos equipamentos. O nível médio dos tanques para a intervenção a cada meia hora se comparado a intervenção de hora em hora quase não se altera, isto pode ser avaliado pelo valor do primeiro quartil e terceiro quartil dos dois casos que possuem os mesmos valores (ver respectivamente Q1 e Q3, tabela 6.11).
6.5	Contingência simples
O modelo que foi elaborado para conseguir atingir a vazão constante necessita contar sempre com as estações de coleta que possuem bombas com controle de frequência. Para conferir qual a margem de controle do sistema quando uma destas bombas estiver fora de operação foram realizados testes onde supomos cenários em que uma das três bombas com controlador está quebrada. Simulamos esta situação para cada uma das três bombas fora de operação, para as discretizações de meia hora e de duas horas num cenário de 48 horas. A seguir é mostrado nas tabelas de contigência simples o comportamento apenas das estações que possuem o controle sobre as suas vazões: 4CB, 6CB e 6PB.
Teste 5 : Contingência simples com discretização de meia hora
• Bomba da estação 4CB fora de funcionamento
A tabelas 6.13 mostra a solução para as bombas com controle. Como um tanque está fora de operação (4CB) diminui a produção total do campo, de modo que influi também no volume de alimentação desejado, que passou de 177 nT a cada meia hora no caso do
O
sistema completo para 160 m a cada meia hora com a bomba 4CB supostamente quebrada. Nota-se portanto que mesmo com esta bomba excluída foi possível estabilizar a vazão de alimentação ao nível desejado (2a Linha).
Os tanques tendo sido iniciados em 65%, observa-se que o tanque 4CB começa a transbordar o petróleo do tanque operacional para os tanques de segurança a partir da 5a
iteração, que corresponderia ao inicio da 2d hora em operação. Neste cenário, porém, o controle do volume de algumas bombas (6PB) é mais crítico do que o caso com o sistema
completo.
1/2h	instante	1	2	3	4	5	6	7	8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24
vazãe total	PL	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160
	AG	163	162	161	164	161	163	163	162	190	163	196	194	160	164	191	164	165	164	178	169	161	189	176	164
4CB	bomba	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
	volume	67	70	74	77																				
6CB	bomba			o : : o T o				* ■■ o 5 ; o s i ; i 2 i ■■ i ■	t o ■ - &amp;lt;-														0 ' H		0 73 T 70	
	volume	63	60	64	63	66 | 70		68	72 69 | 73 | 71 | 69 ( 73 [70 | 68 ( 71 | 69 j 73 I 70 í 68													71 I 69			
6PB	bomba	0	0		0			0																	
	volume	67	70	68	71	7Ò	68	71	70	72	71	74	76	75	74	76	75	74	73	74	74	72	74	75	74
critico	Ramo	5	6	5	7	5	10	7	5	5	7	5	7	7	7	5	7	7	7	5	7	5	7	7	7
	pressão	61	32	66	56	66	85	90	66	66	77	66	77	68	77	66	77	77	72	66	73	66	72	77	77
Ta							bela 6.13.1: Contingência simples: 4CB																		
1/2h	instante	25	26	27	28	29	30	31	32	33	34	35	36	37	38	39	40	41	42 I 43		44	45	46	47	48
vazão total	PL	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160 J160		160 160		160	160	160	160	160
	AG	164	16S	205	162	162	175	179	162	206	169	163	192	183	163	162	164 187		166 167		171	163	182	214	162
4CB	bomba volume	0	0 0	0	0	0	0	0	0	0	0_	0 0	0	0	0 0	0	0 I 0		ojo		0	0 0	0	0	0 . 1
SCB	bomba					C ■ &amp;lt;T 1 1 0											A)			0					
	volume	[68	71	71	69	73 1 70 1 68 J 71				72	^69	73	70	68	72	69	73	70 I	68	72	69	73	70	72	70
6PB	bomba																								
	volume	73	72	75	74	73 j 73 I 74 | 73				75	75	74	76	78	76	75	74	76	75	75	75	73	75	77	76
crítico	Ramo pressão	5 66	7 77	7 73	5 66	10	7	7	5 85 ¡ 77 j 72 I 66				7 77	7 73	5 66	7 72	7	7 77	5 66	7 72	7 73	5 66	10 85	7 77	7 77	5 66	10 85	7 85
Tabela 6.13.2: Contingência simples: 4CB
1/2h	instante	49	50	51	52	53	54 55 56	57	58	59	60 61 I	62	63	64	65	66	67	68	69	70	71	72
vazão	PL	160	160	160	160	160	160 160 160	160	160	160	160 160	160	160	160	160	160	160	160	160	160	160	160
total	AG	163	164	199	201	163	164 207 162	183	165	168	163 194	76a	163		175	*93	163	’63		163	165	162
4CB	bomba	0	0	0	0	0	0 0 0	0	0	0	0 0 I	0	0	J	n	Cr	0	0	0	0	0	0
	volume																		275			
6CB	bomba 1		0		■w	0	«SWIM	0		0	S0»1É	0	*	1	0				0	0		0
	volume	67	71	70	69	■3	70 I 71 : 68	72	Ô9	73	71 I 68 j	72	70	67	71	69	57		68	72	69	73
6PB	bomba 1						; t	■	’	.A t		■	’ L ' j 1			1	•					■		1
	volume	75	AÀ	77	79	73	7 7 .’M ! 73	30	79	78	77	;'9		78		-.80.		.32.	rao	3(J	79	73	77
critico	Ramo	7	7	5	7	Lj	1 5 j 7	5	7	7	10	5	7 j	10	7	5	7	7	7	5	7	7	5	10
	pressão	73	72	66	77	77	66 j 78	66	77	72	85	66	77 j	85	77	66	77	77	77	66	68	77	66	85
Tabela 6.13.3: Contingência simples: 4CB
1/2h	instante	73	74	75	76	77	78	79	80	81 I	82	83	84	85	86	87	88	89	90	91	92	93	94	95	96 1
vazão	PL	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160
total	AG	185	166	176	163	162	166	206	206	163	162	164	180	164	178	162	162	206	166	169	164	164	163	174	164
4CB	bomba	0	0	0	0	Q	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0 i
	volume	237.	290	293		w	W	ãq?	[W	311Í	314	W		3J3		W	S	iàs							357.Í
6CB	bomba			0	1	f' (J	-i			1 I		0		0	1	3	1					0	!	1	c ;
	volume	1	53	72	69	,"■3	7-1	71	71	63 1	□6	¿0	rj7	7 -	63	j'7	■rr	70	S7	7-	69	72	73	57	71 í
6PB	bomba		lllllll	1	*				1	1 j	■1	1 ■ i ; 1 ¡ 1 i : :	; 1 ■ ’ : - i ‘ j 1 ■ i i ’ j 1 i													
	volume	73	77	73	77	■6	75	; 7	3ET	■79 j	73	77	■73	77	77	7:5	75	■rs ■ u	7 í	7Ç	75	74	~3		: 3 !
critico	Ramo		5	7	-	■0	5				T	19		7		'0	8		7	5	7	7			
	pressão	72	66	77	73	85	66	77	77	77 j	66	106	66	77		77	85	66	71	68	66	77	77	77	66	77 i
Tabela 6.13.4: Contingência simples: 4CB
O tanque com defeito passa a utilizar-se do terceiro tanque de segurança a partir do instante 45, que ocorreria às 22 horas e 30 minutos após o momento em que a sua bomba ficou paralisada. Na iteração de número 78, que corresponde a 39a hora do cenário simulado mesmo o terceiro tanque de segurança encontra-se lotado, caso a bomba não
tivesse sido concertada ainda, o que implicaria na necessidade de estarem desligados a partir deste instante todos os poços de petróleo conectados a esta estação de coleta, para não haver derrámente de petróleo.
A pressão na rede de dutos apresenta o comportamento típico, com pressões altas mas factíveis nos ramos esperados.
• Bomba da estação 6CB fora de funcionamento
No caso em que simulamos a estação 6CB com a sua bomba quebrada a meta estipulada para o volume passou a ser 159 m3 - 1/2 hora. O sistema de transporte respondeu bem ao atendimento da nova meta para vazão, apresentando uma variação 0 em relação ao fluxo estipulado (tabelas 6.14).
1/2h	instante	1	2	3	4	5	6	7	8	9	10 ! 11 I 12	13	14	15	16	17	18	19	20	21	22 [ 23	24
vazão tota!	PL	159	159	159	159	159	159	159	159	159	159 159 159	159	159	159	159	159 159	159	159	159	159 159	159
	AG	162	161	161	162	162	162	162	162	173	160 J162)160	163	162	162	162	177 173	168	163	162	187|197	163
4CB	bomba			0			0		0	■1			0					0	m	—Í Í“:	
	volume	64	64	67	67	66	69	69	72	71	70 | 70 ¡70	69	72	72	71	70170	69	72	721		70
6CB	bomba	0	0	0	0	0	Q	0	0	0	0 I 0 I 0	0	0	0	0	0 I 0	0	0	0	0 | 0	0
	volume	68	72	75	79 i.».-		'IM		.94	■d»:f											
6PB	bomba	0	0	1	0 i 1		i ■	0	1	i	1	0 : t			0					0		■
	volume	67	70	68	71	/ú	69	71	70	71	69	72	70	69	68	71	70¡	71	71	70	69	72	74 77	76
crítico	Ramo	7	0	5	0	5	7	0	7	5	7	0	7	7	10	0	7	7	5	7	7	0	7	7	7
	pressão	56	57	66	57	64	77	57	73	66	77	57	77	72	85	57	73	77	66	77	77	57	72	77	77
Tabela 6.14.1: Contingência simples: 6CB
1/2h	instante	25	26	27	28	29	30	31	32	33	34	351’36”	37 [ 38	39	40	41 I 42	43	44	45 | 46		47	48
vazão total	PL	159	159	159	159	159	159	159	159	159	159	159 159	159 159	159	159	159)159	159	159	159 159		159	159
	AG	162	189	160	161	175	166	170	162	197	160	162¡176	174)171	161	162	167)162	183	162	162|162		197	161
4CB	bomba	-		0	-!				0						0	1 ! ’	1		0 «		1	1 !
	volume	70	69	72	71	71	70	69	72	72^	72	711 70	70)69	68^	71	70 [70	69	68	71	71		71	71
6CB	bomba	0	0	0	0	0	0	0	0	0	0	0 1 0	0 I 0	0	0	0 1 0	0	0	0 | 0		0	0
	volume 157.																					
6PB	bomba ' 1		t		1		mu	1 i 1		1 1		i	i	1 1	1	BB	1 1	1	I	1	0	MB	■
	volume	75	77	76	74	75	74	74	73	76 1 74		73	74	74	74	73	72	71	70	71	70	69	72	75	73
crítico	Ramo	5	7	7	5	7	7	7	5	7	7		5	7	7	7	5	7	7	5	10	7	7	0	7	7
	pressão	66	77	68	66	77	77	72	66	77 J 73		66	72	77 77	66	72	73	66	85 j 77		77	57	77	73
Tabela 6.14.2: Contingência simples: 6CB
1/2h	instante	49	50	51	52	53	54	55	56	57	58	59 | 60	61	62	63	64	65	66	67	68	69	70	71	72
vazão	PL	159	159	159	159	159	159	159	159	159	159	159 159	159	159	159	159	159	159	159	159	159	159	159	159
total	AG	161	163	176	192	161	162	172	164	185	162	204I162	185	164	161	192	176	196	162	162	190	162	161	162
4CB	bomba		1	0			•		0	1							0						0	1
	volume	70	69	72	72	71	70	69	72	72	71	72 l 72	71	70	70	69	72	72	Ai	70	70	69	72	71
6CB	bomba	0	0	0	0	0	0	0	0	0	0	0 í 0	0	0	0	0	0	0	0	0	0	0	0	0
	volume	245	249																					
6PB	bomba 1		1	■	1 i 1			1	7					1 1	1	1		1	1 ■*		t ! ’•		■f	-1		
	volume	72	71	72	74	73	72	72		73	72	74 73	75	74	73	76	76	79	78	77	79	78	77	75
crítico	Ramo	7	5	7	7	5	7	7	5		7	7	5	7	7	5	7	7	7	5	7	7	5	7	7
	pressão	77	66	77	77	66	72	73	66	77	72	77 66	77	73	66	77	77	77	66	77	73	66	85	77
Tabela 6.14.3: Contingência simples: 6CB
1/2h	instante	73	74	75	76	77	78	79	80	81	32	83	84	85	86	87	88	89	90	91	92	93	94	95	96
vazão	PL	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159
tota!	AG	179	162	197	162	162	162	188	197	162	163	167	164	162	180	168	161	176	162	190	163	177	162	162	185
4CB	bomba	!	■		■■	0	A -=	ÜBHIÜ		■	1		0					0				í			
	volume	71	70	70	69	72	72	71	71	70	70	69	72	71	71	70	69	72	72	71	70	69	72	72	71
6CB	bomba	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
	volume																								
																									
□FD	Domoa																								
	volume	75	75	78	77	76	75	77	79	78	77	77	76	75	76	75	74	75	74	76	75	76	75	74	75
Cfítico	Ramo	7	5	7	7	10	5	7	7	5	7	7	5	10	7	7	5	7	7	5	7	7	7	5	7
	pressão	77	66	77	73	85	66	72	77	66	72	73	66	85	72	77	66	77	68	66	77	77	72	66	77
Tabela 6.14,4: Contingência simples: 6CB
Na discretização de meia hora, sob a situação de contingência para a estação 6CB não foram observados níveis de tanques acima do desejado. No caso do tanque 6CB que encontra-se com a bomba paralisada, nota-se que o seu volume começa a transbordar para a Io tanque de segurança a partir do instante 10, que corresponde a 20a hora na simulação, atingindo o 2o tanque de segurança no instante 37 (18 horas e 30 minutos da simulação), que passa transbordar no instante 64 (32a hora no cenário), quando seria necessário todos poços de produção pertencentes a estação com problemas estarem paralisados. As pressões no oleoduto foram sempre factíveis.
• Bomba da estação 6PB fora de funcionamento
Com a bomba da estação 6PB não podendo realizar o envio de petróleo, a meta estabelecida para o envio do petróleo passa a ser 156m3 - 1/2 hora. O recebimento da vazão na PPP registra-se constante para todos os instantes no cenário testado para dois dias (tabelas 6.15).
Quando a estação 6PB está com sua bomba fora de funcionamento fica registrado para o tanque 6CB a ocorrência de níveis acima de 80%, mesmo para a presente discretização.
As pressões na rede de dutos apresentaram-se da maneira esperada: pressões factíveis e com os valores maiores nos ramos de costume.
Tabela 6.15.1: Contingência simples: 6PB
Ramo
bomba volume
0
1/2h	instante	25 1 26	27 1 28	29	30 I 31	32	33	34	35	36	37	38	39	40 j 41	42	43	44	45	46 ! 47	48
vazão	PL	156|156	156 156	156	156 156	158	156	156	156	156	156	156	156	156 156	156	156	156	156	156j156	156
tota!	AG	1591165	1781158	172	163¡159	209	194	157	159	173	171	168	158	162|187	159	172	159	159	179 194	158 ¡
4CB	bomba	1 : 0			1 i 0													0		
volume 69
bomba
6CB
volume 74
6PB
crítico
Tabela 6.15.2: Contingência simples: 6PB
1/2b	instante	49	50 I 51	52 1 53	54	55	56	57 I 58 I 59 I 60	61	62	63	64	65 I 66	67 j 68	69 i 70	71	72
vazão	PL	156	156 156	156(156	156	156	156	156 156 156 156	156	156	156	156	156 156	156(156	156 156	156 156
total	AG	159	159(173	189(159	177	192	157	194|160]179(159	161	156	160	166	199(193	159]159	187(159	160 158
4CB	bomba		1 | 0						0							
	votos	70	69 j 72	72 I 71	'70	71	7G|	¡71 | 70|69|69	72	71	¡70	70	[my	77(70	70 j 69	68(68
6CB	bomba															
	volume	74	172(73	77 I 75	771		78		79	77	75	75	79			79 ( 77
6PB	bomba volume	0	ojo	ojo	0	0	0	OjOjOjO	0	0	0	0	ojo	o] 0	0|0	ojo
critico	Ramo	0	sTo	oTo	7	7	0	TproTo	0	7	0	5	oTo	0(7	7|0	oTo
	pressão	57	56 j 57	57 j 57	56	90	57	57 j 56 I 57 j 57	57	90	57	56	57 j 57	57 j 77	90 I 57	57 I 57
Tabela 6.15.3: Contingência simples: 6PB
1/2h	instante	73	74	75 I 76	77	78	79	80	81	82	83	84	85	86	87	88	89	90 i 91	92	93	94	95	96
vazão total	PL AG	156 164	156 159	156 156 194(159	156 158	156 159	156 186	156 1189	156 159	156 160	156 164	156 159	156 159	156 177	156 172	156 158	156 173	156 156 159(187	156 160	156 182	156 159	156 160	156 175
4CB	bomba	0				0						0					0					0	
	volume	71	70	71 ¡701	69	72	72	71	71	70	69	72	7z1		70	69 I	72	72\ 711	70	70	69	72	71
6CB	bomba					*																	
	volume	76	74	78(76	74	72	76	79	78	76	75	73	71	73	74	72	73		73	76	74	73I	74
6PB	bomba volume	0	0	ojo	0	0	0	0	0	0	0	0	0	0	0	0	0	0 1 0	0	0	0	0	0
crítico	Ramo	7	0|0|7|0]7(0|0[0[7|7j0|0|7(0													0(0	6	0	0	0	7	0	0							
	pressão	56 j 57 | 57 | 90 [ 57 | 77 ] 57 | 57 | 57 | 56 ( 90 | 57 | 57 | 56 | 57														57 j 57 | 32 I 57 j 57 j 57 I 77 j 57 j 57 I							
Tabela 6.15.4: Contingência simples: 6PB
O petróleo dos poços pertencentes a estação 6PB passa a ter a sua vazão desviada para o Io tanque de segurança a partir do instante 14, correspondente a 7a hora no cenário de 48 horas simulado. Sendo que no instante 52 esta vazão passa a ingressar no 2o tanque de segurança (26a hora), registrando a necessidade de ser paralisada a atividade de todos os poços ligados a 6PB no instante 89, após 44 horas e 30 minutos do instante em que foi paralisado o funcionamento do transporte da 6PB.
Teste 6 : Contingência simples com discretização de duas horas
Os gráficos e tabelas a seguir apresentados demostram que mesmo para um intervalo de discretização de 2 horas sempre foi possível obter uma vazão de alimentação estável. Quanto aos volumes máximos, os resultados confirmaram as expectativas, quais sejam de que o seu controle seria mais difícil do que os casos com discretização de meia hora. De qualquer forma estes resultados reforçam a robustez e a flexibilidade do modelo implementado.
• Bomba da estação 4CB fora de funcionamento
2h	instante	1	2	3	4	5	6	7 I	8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24
vazão	PL	160 160 160 160 160 160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160	160
total	AG	163 163 174 164 165 163	164	164	223	163	171	198	163	163	162	165	181	163	165	164	181	161	168	163
4CB	bomba	0 0 0 0 0 0	0 I	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
	volume	ema a.:-aa	15Õ]	162		186					247	,25&amp;amp;	W	284-236		308	320|333		.345	:357
6CB	bomba i	o ; *■ ! i i 0 :	0:t:1			1 1	1 i 1							1 : 1 : 0 ■ ■				'■O’.			
	volume	57 j 72 f67 j 60 1 75 ! 56	81 1	'5	89-	J»	7’&gt;	83	75	66	81	T5	!,ty	62	77	7ü		30	73	■55
6PB	bomba	El	El		0		1 I i i j			■i			r*				9	—-—,	i		
	volume	75 1 70	68	79	76	70	eel	77	37	32	79	81	75	70	65	75			69	79	31	“75Tm		66
crítico	Ramo	0	7	5	0	7	5	7	0	7	5	7	7	5			S	5	y			7		y	3
	pressão	57 1 73 66 57	77 66	77 1	57	72	66	77	77	66	77	72	57	66	72	77	57	77	35	72	66
Tabela 6.16: Contingência simples: 4CB
• Bomba da estação 6CB fora de funcionamento
2h	instante	1	2	3	4	5	6 I 7		8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24
vazão total	PL	159	159	159	159	159	159 159		159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159	159
	AG	162	163	165	161	¡172	163j185		167	193	«162	162	163	161	162	163	189	165	162	179	175	177	150	162	162
4CB	bomba		0	4	*																	*		0	í
	volume	64	76	74	73	72	70T72		71	79	78	76	76	74	72	72	75	74	72	72	71	70	68		79 0
6CB	bomba	0	0	0	0	0	0 j 0		0	0	0	0	0	0	0	0	0	0	0	0	0	0	0 I 0		
	volume	79	g:																						
6PB	bomba	0	*	B	El		«H»	■	E		D	O	0 . 1 I 1			0¡	1	ia	ai	aaaaa				as	Õ
	volume	75	71	67	I 78 J 77		72	76	73	76	70	65	76	70	65	75		76	70	73	74	75	69	65	75
crítico	Ramo	0	5	5	0	7	5	7	7	7	5	7	0	5	10	7	7	5	7	7	5	7	7	10	0
	pressão	57	66	66	57	72	66	77	77	72	66	77	57	66	85	77	77	66	77	77	66	77	72	85	57
Tabela 6.17: Contingência simples: 6CB
• Bomba da estação 6PB fora de funcionamento
2h
4CB
instante
PL
AG bomba volume bomba volume bomba volume
69	60
0	0
	
6CB
6P3
Critico	Parno	7	0	5	7	0	0	0	0	7 í Q	0	0	0	7	0	0	0	7	0	5	0	7	0	0
	pressão	56	57	90	77	57	57	57	57	56 1 57	57	57	57	56	57	57	57	77	57	90	57	56	57	57
Tabela 6.18: Contingência simples: 6PB
6.6	Estudo da variação dos parâmetros
Foi estabelecido um conjunto de parâmetros para a utilização do AG. Assim, foi observado o conjunto que melhor respeitasse as restrições do problema, mantendo razoável o atendimento e comportamento dos níveis dos tanques de forma a evitar a ocorrência de transbordamento.
•	Análise do nível dos tanques
Foram realizados testes sobre a visualização do estado futuro dos tanques, de forma a ser analisado o comportamento dos volumes apenas em relação ao tempo futuro em operação: ou seja, no modelo de intervenção no sistema hidráulico a cada uma hora e meia, avaliar o estado futuro para as próximas uma hora e meia ao invés de duas horas. Tal análise demonstrou uma piora no comportamento do modelo, dado a uma ação muito imediatista quanto a seleção para acionar bombas.
•	Limites para ativação e desativação obrigatória de bombas
No algoritmo genético foi introduzido um conjunto de regras para evitar que ocorresse tanques muito cheios que permanecessem desligados e em contra partida, tanques muito vazios ligados. Todavia, o estabelecimento dos parâmetros quanto aos limites ideais para ativação e desativação foi o resultado de análise e experimentação.
Limite inferior dos tanques:
Constatou-se que se estabelecidos níveis muito baixos para a desativação de uma bomba, isto resultaria na possibilidade de tanques mais cheios ficarem desativados por mais tempo. Este tanques mais vazios eram selecionados preferencialmente pelo algoritmo genético devido a menor pressão resultante. Vários testes foram realizados e observou-se que o limite minímo de 35% era o mais adequado.
Limite superior dos tanques:
Para o limite superior, notou-se que para valores muito baixos, resultava em um desvio grande em relação a meta de vazão de alimentação da PPP, Este desvio era sempre positivo pois, supondo que um número grande de bombas estivessem com seus tanques a, digamos 70 % de seus volumes, resultava em muitas bombas ligadas automaticamente, com uma vazão além da desejada, no caso do modelo proposto de 177 metros cúbicos para cada intervalo de tempo.
• Regra para ativação de bombas com maior produtividade
O trabalho de modelagem que foi realizado precisou atentar para o fato da rede contar com diferentes estações de coleta, cada uma com um índice de produtividade diária e capacidade de armazenamento própria.
Isto influiu para que no sistema de regras de ativação automática de um tanque, em observação ao seu limite superior, a análise do volume atual e futuro de um determinado tanque, se ajustasse para que tais parâmetros de ativação fossem funcionais nos quatros testes realizados.
O estudo passou a observar que o parâmetro de ativação automática quanto ao limite superior dos tanques não resultava em um funcionamento factível, se aplicado ao modelo de intervenção a cada duas horas para as estações de coleta com uma alta produtividade, que sempre transbordavam dado sua alta velocidade de enchimento, quando estas não
haviam sido selecionadas para estarem ativadas, num cenário em que no instante anterior (duas horas anteriores) contassem com um nível de 60% de sua capacidade nominal, digamos.
Desta forma, foi necessário estimular um limite superior diferenciado para as estações de coleta com baixa produtividade e das estações com alta produtividade, no tocante a regra de ativação automática. Sendo que para as estações com alta produção aplicamos o parâmetro de 65% enquanto para os tanques com média e baixa produção mantivemos os limites superiores a 75% de sua capacidade.
• Meta de vazão para o Algoritmo Genético
A etapa de seleção das bombas que entrarão na resolução é diretamente influenciada pelo valor da vazão estabelecido como meta para o AG. Assim, o estabelecimento de um valor demasiadamente próximo dos 177 metros cúbicos, vazão que será atendida pelo modelo linear, demonstrou muitas vezes resultados onde o comportamento da função objetivo caminhava para valores como 176 ou 175 metros cúbicos.
No caso da seleção de envio no algoritmo genético resultar em valor acima da meta no PL, o sistema obtém o atendimento da meta com a diminuição de envio junto as bombas com variadores de frequência. Entretanto, na situação contrária, onde a sua vazão é inferior ao valor desejado, resulta num estado onde a meta não pode ser atendida satisfatoriamente.
A resolução deste aspecto levou a uma modelagem onde há uma minimização do desvio em relação ao valor de vazão estabelecido para o AG, e estabelece-se como meta de
□
envio 177 + A m . Todavia, a determinação deste A mostrou que caso o valor fosse muito •3
acima dos 177 m pretendidos para o sistema, teríamos problemas com os tanques com variadores. Estes tanques transbordavam pois, quando o valor de envio está muito acima do desejado, o modelo protela esse excesso de vazão reduzindo demasiadamente as saídas que estejam estabelecidas para os tanques com variadores de frequência. Assim, a meta de 177 nr é atendida, mas a longo prazo transborda o volume destes tanques.
Ficou estabelecido como parâmetro ótimo A = 3 m3. Este valor provou ser o melhor para os quatro modelos de intervenção no sistema de bombeamento pois, evitou que os
tanques com variadores de frequência transbordassem, ao mesmo tempo sempre atendendo a demanda de envio requerida para a resolução do PL em relação a demanda do sistema.
• Tamanho de população e tempo de execução
No sistema de transporte da petroleira, o tempo máximo para o programa retomar a melhor solução, independentemente da plataforma em que estiver rodando, será sempre:
Para t - 1	5 minutos de execução
Para t &gt; 1	5 minutos + tempo para próxima intervenção no sistema de
bombeamento.
Sendo este um problema dinâmico, a busca do genético foi executada n vezes para a obtenção da melhor solução para cada intervalo de tempo, ou instante de intervenção no sistema de bombeamento. Nesta busca para a seleção das bombas que entrarão na solução básica do modelo linear, foi observado que um número médio de 500 iterações era o suficiente para a obtenção do resultado ótimo aplicado a solução de determinada instância na seleção de bombas. No ambiente onde executamos o programa, tal número de iterações no genético era atingido com um tempo computacional inferior 15 segundos. Portanto, estabelecemos o tempo de busca para o genético em 15 segundos.
Após experimentações, o tamanho ideal da população estabeleceu-se como sendo um número de 100 indivíduos. Um número menor de indivíduos por população foi testado e embora proporcione ganho quanto ao esforço computacional, em algumas vezes os resultados quanto a vazão não foram satisfatórios, ficando abaixo da meta. Isto é decorrente do fato de uma população com um número de indivíduos reduzida restringir o espaço de busca.
CONCLUSÃO GERAL
1.	Objetivos
O principal objetivo deste trabalho foi investigar a utilização de Algoritmos Genéticos e Programação Linear na solução do problema de transporte de petróleo em dutos. de forma a atingir um estado contínuo em sua vazão, sob as condições dinâmicas de uma jazida de petróleo. Foram propostos quatro discretizações viáveis para as características existentes no sistema de produção da Petrolera Perez Companc, empresa que disponibilizou dados para a modelagem aplicada ao problema.
Os testes realizados com as quatro formas de intervenção, onde faziam-se intervenções no sistema de bombamente a cada meia hora, uma hora, uma hora e meia, ou duas horas, demonstrou a estabilidade do modelo que garantiu uma vazão com variação zero em relação ao valor estabelecido como ideal para o fluxo a ser recebido na PPP (Planta de Pré-processamento de Petróleo).
2.	Resultados
A metodologia apresentada neste trabalho mostrou-se adequada para a aplicação presente, tanto na modelagem do problema, como também no tempo de execução para resolução do modelo. Quanto ao modelo, as principais restrições de operação dos tanques,
bombas e dutos foram satisfatoriamente consideradas, e a utilização das bombas com variadores de frequência como as variáveis de folga para se atingir a vazão de alimentação desejada foi suficiente.
Os resultados obtidos mostraram que para o exemplo tratado, a combinação do modelo de algoritmos genéticos com o modelo de programação linear possibilitou a decomposição em um subproblema de alocação de bombas e em um subproblema de operação das bombas. A princípio, outras metodologias para as resoluções dos dois subproblemas poderiam ser utilizadas, como por exemplo a utilização de regras, ou também resolver o subproblema de alocação utilizando técnicas de Busca Tabu.
A aplicação da metodologia ao sistema da Petrolera Peres Companc obteve os resultados esperados, quais sejam de uma vazão de alimentação estável e o atendimento das restrições operativas do sistema. Dos resultados obtidos na aplicação em questão, conclui-se que é importante a escolha adequada do intervalo de discretização porque este parâmetro tem grande influência sobre o controle do volume máximo armazenado; o aspecto das pressões nos dutos não se mostrou crítico pois, em todas as soluções em nenhum ponto da rede as pressões atingiram valores infactíveis - superiores a 100%.
Um outro ponto em relação às bombas com controle de frequência é de que mesmo com a eventual saída de operação de uma destas bombas, somente com as duas outras foi possível obter uma solução com vazão de alimentação estável. Embora neste contexto o comportamento dos volumes máximos armazenados seja mais critico do que no caso do sistema completo, na prática dificilmente um equipamento fica 48 horas fora de operação, de modo que na aplicação real os volumes máximos devem ter um comportamento ainda melhor.
Finalmente, há a questão do número de partidas versus volume armazenado. Estes dois aspectos estão relacionados com o tamanho do intervalo de discretização; quanto maior o intervalo, menor é o número de partidas mas também maior é o volume máximo armazenado, e vice-versa para os intervalos de discretização menores. A decisão sobre que intervalo de discretização adotar irá depender de que aspecto é mais importante : trabalhar com os volumes armazenados mais controlados, ou minimizar o número de partidas ou ainda buscar uma solução intermediária.
3.	Análise econômica
Através da execução do modelo apresentado foi possível acompanhar o comportamento da malha de dutos e identificar os pontos onde apresentam-se as sobrecargas no sistema de transporte. Tais simulações permitiram identificar igualmente quais os principais tanques onde ocorrem sobrecarga de estoques dado suas altas taxas de produção. Assim, todos esses dados podem ser utilizados para análise econômica quanto a uma alocação de recursos mais racional, na hipótese de haver alguma disposição por parte da empresa em projetar futuras expansões na capacidade operativa do sistema de produção da petroleira.
REFÊNCIAS BIBLIOGRAFICAS
[1]	Bazaraa, M. S., Jarvis, J.J., Sherali, H. D., “Linear Programming and Network Flows”, John Wiley &amp;amp; Sons, New York, 1990.
[2]	Bobok, E., Udvardi, G., “Heavy Oil Transport Through Lubricated Pipeline”, U. of Miskolc, Society of Petroleum Engineers Paper, 1996.
[3]	Campbell, J. M., “Gas conditioning and Processing”, Volume two, Published by Campbell Petroleum Series, 1994.
[4]	CPLEX Optimization, Inc., “Using the CPLEX Callable Library”, version 3.0, 1989-1994.
[5]	D antzig, G.B., “Linear Programming and Extensions ”, Princenton University Press, New Jersey, 1963.
[6]	Dob gen ski, J., “Programação Linear para Aproximação de Funções aplicada ao Projeto de Filtros Digitais”, Densis-FEEC-Unicamp, Tese de Mestrado, Campinas 1997.
[7]	Fang, S. C., Puthenpura, S., “Linear Optimization and Extensions: Theory and Algorithms ”, Prentice Hall, New Jersey, 1993.
[8]	Flaniga, O., “Constrained Derivatives in Natural Gas Pipeline System optimization ”, Arkansas Louisiana Gas Co, Society of Petroleum Engineers Paper, 1972.
[9]	Goldberg, D. E., “Computer-Aided gas pipeline operation using genetic algorithms and rule learning”, University of Alabama, Society of Petroleum Engineers Paper, 1985.
[10]	Goldberb, D •E., “Genetic Algorithms in Search, Otimization and Machine Learning ”, Addison-Wesley, Reading MA, 1989.
[11]	Holland, J.H., “Adaptation in Natural and Artificial Systems”, University of michigan Press, Ann Arbor, MI, 1975.
[12]	Ishii, M., Mi, Y., Tsoukalas, L.H., Kim, S., “New objective approaches for characterization of interfacial structures in two-phase flow”, Proceedings of the ASME Heat Transfer Division vol. 5 1998.
[13]	Luenberger, D., “Linear and Nonlinear Programming”, Addison-Wesley, New York, 1984.
[14]	Manning, F. S., Thompson, R. E., “Oilfield Processing, Volume Two: Crude OU”, PennWell Books, 1993.
[15]	Martínez, M., “Cálculo de tuberías y Redes ”, Editorial de la Universidad del Zulia, Maracaibo, Venezuela, 1993.
[16]	McCabe, W. L., Smith, C. J., Harriott, P., “Operaciones Básicas de Ingeniería Química”, Madri, 1991.
[17]	Mich ale wicz, Z., “Genetic Algorithms + Data Structures — Evolution Programs”, Springer-Verlag, New York, 1996.
[18]	Pitts, D. R., Sissom, L., “Fenómenos de Transporte”, Ed. McGraw Hill do Brasil, Rio de Janeiro, 1988.
[19]	Reis, L.F.R., Porto, R.M., Chaudhry, F.H., “Optimal location of control valves in pipe networks by genetic algorithm”, USP, Journal of water resources planning and managment, 1997.
[20]	Rocha, A. F., Morooka, C. K., Alegre, L., “Intelligent diagnosis of rod pumping problems”, Unicamp Petrobras, Society of Petroleum Engineers Paper, 1993.
[21]	Rocha, A. F., Morooka, C. K., Alegre, L., “Smart oil recovery”, Unicamp Petrobras, IEEE Spectrum July, 1996.
[22]	Sant'Ana, C.C., Correia, P. B., “Otimização do transporte de gás natural usando um modelo de programação dinâmica”, XI Congresso Brasileiro de Automática, São Paulo, 1996.
[23]	Silva, A.C., Fernandes, J.F.R., Ohishi, T., Mendes, A.S., França, F.A., Delgado E.A.R., “Intelligent Control of Transport in a Pipeline Network by Genetic Algorithm and Simplex Method”, XV Congresso Brasileiro de Engenharia Mecanica - Cobem'99, Águas de Lindóia, Brasil 1999.
[24]	Silva, A.C., Fernandes, J.F.R., Ohishi, T., Mendes, A.S., França, F.A., Delgado E.A.R., “Using Genetic Algorithm and Simplex Method to stabilize an oil treatment plant inlet flow”, III International Seminar Exploration and Exploitation of Petroleum and GAS -Ingepet'99, Lima, Peru 1999.
[25]	Streeter, V. L., Wylie, B., “Fluid Mechanics ”, McGraw-Hill, Michigan, 1996.
[26]	Stroustrup, B., “The C++ programming language”, Addison-Wesley, 1997.
[27]	Sun, C., Chan, C. W., Tontwiachwuthikul, Paitoon, “A fuzzy expert system for optimizing pipeline operation ”, Canadian Conf. On Electrical and Computer Engineering, V. 2, p. 777-780,1997.
[28]	Taylor, T.D., Wood, N. E., Powers, J. E., “A computer simulation of gas flow in long Pipelines ”, U. Oklahoma, Society of Petroleum Engineers Paper, 1962.
[29]	Teixeira, E. M. A., “Programação horária de Peças em uma célula flexível de manufatura ”, Campinas, FEE, Unicamp, 1993.
[30]	Voss, S., “Meta-Heuris tics : Advances and Trends in Local Search Paradigms for Optimization ”, Meta-Heuristies International Conference, Kluwer Academic Pub, 1998.
[31]	Weiss, M. A., “Efficient C programming : a practical approach”, Englewood Cliffs : Prentice-Hall, c 1995.
Apêndice A
IMPLEMENTAÇÃO DA ROTINA DE EXECUÇÃO
DINÂMICA DO PACOTE CPLEX
A.1 Introdução
As rotinas descrita na sequência realizam o trabalho de ligação entre o programa principal de otimização do transporte de petróleo em dutos com o pacote de programação linear Cplex. O problema otimizado apresentava características dinâmicas, ou seja, o resultado da resolução no instante t influenciava no resultado do instante t+1, e assim sucessivamente.
O programa utilizando algoritmos genéticos após verificar quais foram as bombas selecionadas para estarem ligadas, realiza na rotina OUTPL a saída formatada do problema linear resultante. Assim, o arquivo gerado em OUTPL (denominado	será
utilizado pelo Cplex.
Na sequência o programa executa a rotina ChamaCplex que escreve o arquivo form.com, utilizado pelo Cplex para ler os comandos determinando as instruções para a resolução do problema linear; O problema a ser resolvido pelo pacote Cplex, escrito anteriormente no arquivo form“t”.lp, é executado tendo os resultados direcionados para o arquivo de saída form“t".doc.
Finalmente é mostrado a rotina Ler resultado Cplex. onde foi elaborado um código que leia os resultados obtidos da execução do Cplex, encontrados no arquivo form“t”.doc, de forma que é necessário apenas informar o número de bombas que estão escaladas para
aquela solução, lembrando que em cada instância as bombas e o número de bombas selecionadas também mudam. Ou seja, mesmo o arquivo de saída apresentando diferentes formatações para distintas variáveis, indiferentemente de quais variáveis apresentarão qual formatação de saída (ver item A.5), a rotina realiza a leitura do valor atribuído a cada envio.
A.2 Código fonte
O programa abaixo apresenta as rotinas necessárias para uma execução dinâmica, ligando o Cplex com um programa C. O código apresentado está escrito da maneira mais documentada possível, com comentários a cada passo de maneira a ser de fácil entendimento para um programador C com certa experiência. Cabe o comentário que na rotina OUTPL, onde está escrito “itoa” é implementado o procedimento para conversão de um valor número para caracter, com a intenção de poder denominar os arquivos de formulação do problema e leitura dos resultados a serem utilizados pelo Cplex, conforme o instante correspondente ao cenário da simulação dinamicamente. No ambiente Unix a rotina “itoa” não faz parte da biblioteca dos compiladores C e C++.
// Last modification : 28/02/99 (domingo)
// Autor: Adriano Cavalcanti da Silva
void CPLEX (int qtdde_bat, int num_problema) ;
void OUTPL (int qtdae_bat,int numjproblema) ;
int OUTPL—Goal (int seq__out,int nenhuma);
void Chama_Cplex(int num_problema, int qtdde_bat);
void Ler__resultado_Cplex (int num__problema, int qtdde_bat) ;
FILE *ontPut;
void CPLEX (int qtdde_bat f int num_probleiaa)
{
OUTPL(qtdde_bat,num_problema) ;
Chama__Cplex (num_problema, qtdde_bat) ;
Ler_resultado__Cplex (num_problema, qtdde bat) ;
}
void OUTPLÍint qtdde_bat, int n)
{
int t, seq__out, linha,posicao, nenhuma,pare; int vetor_Bat_variadores [3] ; int metaPL;
metaPL= (int)METAPL;
//-------- itoa(var,probl, 2)	----------------------------------------/
char probl[5];
char nomearq[10] = {"form"}; char extensão[4] = {".Ip"};
sprintf(probl,"%d",n) ; strcat(nomeara,probl) ; strcat (nomearq, extensão) ;
//----------------------------------------------------------------------------------/
//----------------------------------------------------------------------------------/
outPut=fopen(nomearq, "w") ;
vetor_Bat_variadores [0]=6;
vetor_Bat_yariadores [ 1 ] =7 ;
vetor_Bat_variadores [2 ] =11;
nenhuma=l;
entrou em OÜTPL ####################//
//------------funcao objetivo ------------------//
fprintf (outPut, "WProblem name: PROBL%d.lp \n\n",n);
fprintf(outPut,"Maximize\n	") ;
for(t=l; t&lt;=4; t++)
fprintf (outPut,	10 yl__%d - 10 y2_%d ”,t,t);
}
fprintf(outPut," \n") ;
for (seq_out=0; seq_out&lt;qtdde__bat; seq_out+e)
(
for (t=l;t&lt;=4;te+)
{ fprintf(outPut," + x%d_%d", sequencia [seq__out ] , t) ;
}
if(sequencia[seq_outj !=6&amp;amp;Ssequencia[seq_out]!=7&amp;amp;&amp;amp;sequencia[seq_out]1
=11)
{ //nao forem bateria com variadores
//-------------trabalho de + ou - na fç obj . ----------------------/
nenhuma= OUTPL_Goal (seq__out,nenhuma) ;
//-------------{¿o trabalho de + ou ~ na fç obj. ------------------/
)
else//forem baterias com variadores
{ if (pbat[sequencia[seq_out]].escalada) //caso esteja escalado
{ f or (t=l; t&lt;=4 ; tee)
{ fprintf (outPut," - 5 v%d_%d", sequencia [seq__out] , t) ;
}
fprintf(outPut,"\n");
//
}
}
fim da fe objetivo
/
fprintf (outPut, "Subject To \n") ;
linha=l;
//-----------Desvio em reí. a media--------------•----/
for(t~l;t&lt;=4;t++)
{
fprintf(outPut, " c%d: yl_%d - y2__%d", linha+4-, t, t) ;
for (seq_out-u; seq_out&lt;qtdde_bat; seq_out++)
&lt;
fprintf(outPut,” + x%d_%d",secuencia [sequent] , t);
}
if(t&lt;=TIPO)
{ fprintf(outPut," = %d \n",metaPL);
}
else
{ fprintf(outPut," = 0 \n’’);
}
//------------fim: desvio em relacao a media------------------/
//------------ limitante Volume: estoque -------------------/
for (seq_out=0; seq__out&lt;qtdde_bat; seq__out++)
{
t=l;
fprintf (outPut,’’ c%d: v%d_%d 4- x%d_%d = %d\n", linha++, sequencia[seq_out],
t, sequencia [seq__out] , t,
pbat [sequencia [seqyout] ] .input+pbat[sequencia[seq_out] ] .vol);
for (t=2 ; t&lt;=4 ; t4-+)
{
fprintf (outPut, " c%d: v%d_%d + x%d_%d - v%d__%d&amp;lt;= %d\n", linha++, sequencia [seq__out] , t, sequencia [seq_out ], t, sequencia [seq _out],
t~l, obat[sequencia[seq_outj].input) ;
}
//-----------des crimina o input----------------/
for (seq__out=0; seq_out&lt;qtdde_bat; seq_out++)
fprintf(outPut," c%d: input_%d ~ %d\n",linha++,sequencia[seq_out], pbat [sequencia [seq__out] ] . inpu t) ;
}
//-----------Descrimina o Total que Cplex determinou na outPut p/Bat --------
for (seq_out=0; seq__out&lt;qtdde_bat; seq_out++)
{
fprintf (output, ’’ c%d: - x%d_Total" r linha+e, sequencia [seq_out] ) ;
for(t=l;t&lt;~4;t++)
(
fprintf (outPut, " 4- x%d__%d”, sequencia [seq_out], t) ;
}
fprintf(outPut," = 0 \n");
//-----------meta das baterias--------------------/
for (seq__out”0; seq_out&lt;qtdde_bat; seq_outw)
{
if(sequencia[seq_out] 1=6 &amp;amp;&amp;amp; sequencia [seq__out]1=7 &amp;amp;&amp;amp;
sequencia[seq_outj 1=11)
{
fprintf (outPut," c%d: x%d_Total = %d\n",linha+^,sequencia[seq_out], pbat[sequencia[seq_out]].meta);
}
else
fprintf (outPut, " c%d: x%d__Total&amp;lt;= %d \n", linha-i-+, sequencia [seq_out], pbat[sequencia[seq_out]].meta) ;
}
//------------meta das baterias--------------------/
//------------limitante vazao------------------/
fprintf(outPut,"Bounds\n");
for (seq_out=0; seq_out&lt;qtdde__bat; seq__out++)
{
for (t=l;t&lt;=4;te+)
(
fprintf(outPut," x%d_%d&amp;lt;= %d\n’’, sequencia [seq_out] , t, pbat[sequencia[seq_out]].output) ;
}
fprintf (output, "Endin’’) ;
fclose(outPut);
puts ("========== executou system	;
1
void Chama_Cplex(int num_problema, int qtdde_bat)
{ '
FILE *arq;
int vetor_Bat__variadores [31 , seq_out, t, posicao, i, pare; printf("\t ChamaCplex :: qtdde_bat %d\n ",qtdde_bat); vetor Bat variadores[0]=6;
vetor Bat variadores[1]=7;
vetor_Bat_variadores[2 j =11;
arq=f open ( "form, com", "w" ) ;
printf ("\t\t num_problema =%d ”,num_problema) ;
fprintf (arq, "read form%d. lp\noptimize\n", nurn_problema) ; //comando do Cplex read
//-------------------------direciona arquivo de outPut---------------------------/
fprintf (arq, "set\nlogfile\nformíd. doc\n", num_problema) ;
//------------Relacao das baterias na resolução p/ "dis sol "--------------/
//------Envio de fluxo das baterias em cada um dos instantes "t"-----------/
for (seq__out=0; seq_out&lt;qtdde_bat; seq_our-aj
(
for (t=l;t&lt;=4; t+-H
í fprintf(arq,"display solution\n x%d_%d\n",sequencia[seq_out], t) ;
}
}
//-----------Total enviado de cada baterias na solucao ---------------------/
for (seq_out=0; seq~out&lt;qtdde_bat; seq_oute+)
fprintf (arq, "display solutionXn x%d__Total\n", sequencia [seq_out] ) ; seq_bat__Cplex [seq_out ] =sequencia [seq_out] ;
printf("seq_bat_Cplex[sequent 1 = %d\n",seq_bat_Cplex[seq_out]);
}
//------------Fim da relacao das baterias na resolução p/ "dis sol "----------------
fprintf(arq,"\nquit\n") ;
fclose(arq);	// fim da escrita no arquivo form.com
// necessário para a execussao do cplex
//manda executar o Cplex conforme especificacoes no arquivo form.com system("cplex &amp;lt;form.com"};
}
void Ler_resultado_Cplex(int numjproblema, int qtddejbat)
{
FILE *arq2;
char *auxl,aux2 [1 ] , buffer [50] , nome_solucao[20] , var [200 ] ; int i,pare,conta,conta_var, step,seq_out,fluxo,conta_y;
char S2[50]="The”;
//atribui em nome__solucao o nome arquivo
sprintf 'nome^solucao, "form%d.doc", num problema) ; arq2= fopen (nome_solucao, "r") ;
conta=l;
conta_y=0;
while(conta&lt;=5)
(
if ( !stremp(buffer,"\n"} )
{conta-i-+;
}
fgets(buffer, 200,arq2) ;
sscanf(buffer,"%s", Svar) ; //descarta lixo —&gt; linhas
printf(buffer) ;
conta++;
seq_out=0;
conta_var=0;
step-0;
while(!feof(arq2))
(
if (! strcmp (buffer, "\n") )
{	fgets(buffer,200,arq2);
sscanf(buffer,"%s", &amp;amp;var); //escreve a linha na string var auxl=£var[0];
conta=0;
}
//-------------------------------------------/
if(strstr (buffer,S2) )
{ // verifica se deve pular linha
// (THE) indica que o fluxo na variavel foi igual a zero fluxo=0;
//---------------------------------------------/
fgets(buffer,200,arq2); //pula linha em branco
sscanf(buffer,"%s", ívar) ; //escreve a linha na string var auxl=&amp;amp;var[0];
//---------------------------------------------/
}
else
{
if(!strchr (buffer,'x') )
{ fgets(buffer,200, arq2) ; //le para próxima linha sscanf(buffer, "%s", &amp;amp;var); //escreve a linha na string var auxl=&amp;amp;var[0];
}
//--------------------------------------/
auxl=&amp;amp;buffer[0] ; auxl+=strlen(buffer) ; for ( i=0;i&lt;ll;i+e) { auxl—;
}
f or (i=0 ; i&lt;3; i+-+)
{ aux2 [i] =*auxl; auxl-?+;
// Valor da variavel convertida de caracter para inteiro fluxo=atoi(aux2) ;
fgets(buffer,200, arq2) ; //pula linha em branco sscanf(buffer, "%s", &amp;amp;var) ; //escreve a linha na string var auxl-&amp;amp;var[01;
//-------------------------------------/
}
//leio os valores õe x__t e x_total
//-------------------------------------------------/
if (conta_var+-í-&lt;4*qtdde—bat) { //pega variáveis de xq_t // atribuo a vazao da bomba q no intante t em m3 pbat[seq_bat_Cplex[seq_out]].x_t[step]= fluxo;
step++;
if(step&gt;3) { //atualiza seq_out apos 4 iterações —&gt; eh nova bomba step=0;
seq_out-í-+;
}
e 1 s e
{ //pega variavais de xq_Total
//atualiza seq__out a cada iteracao —&gt; eh nova bateria pbat [ seq__bat__Cplex í seq_out 1 ] . xTotal==fluxo; seq out++;
} ”
//-----------~--------------------------------------/
if(conta_yar==4*qtdde_bat)
{seq_out=0;
}
fclose(arq2);
}
int OUTPL_Goal (int seq__out,int nenhuma)
{
int t;
if(pbat[sequencia[seq_out]].vezes&gt;=4)
{//-----------------------------------------------/
for (t=l; t&lt;=4; t
{ fprintf(outputt " - 100 v%d_%d", sequencia [seq_out], t) ;
}
fprintf(outPut,”\n”);
//------------------------------------------------/
}
else
{ //---------------------------------------------------/
for(t=l;t&lt;=4;t++)
{ fprintf(outPut," - 100 v%d_%d",secuencia[seq_out1,t); }
fprintf(outPut,"\n");
i f(nenhuma)
{ nenhuma=0;
i
else
í
nenhuma=l;
}
}
return (n enhu ma);
}
A.3 Arquivo form.com
Arquivo salvo sempre com o nome form.com, denominação necessária para que o pacote Cplex entenda que se trata do arquivo com o conjunto de comandos a serem executados. Apresenta o conteúdo escrito pela rotina Chama Cplex.
read forml.lp optimize
set logfile forml.doc
display	solution
xO_l	
display	solution
x0_2	
display	solution
x0__3	
display	solution
x0_4	
display	solution
x3^1	
display	solution
x3 2	
display	solution
x3_3	
display	solution
x3 4	
display	solution
x4_l	
display	solution
x4_2	
display	solution
x4_3	
display	solution
x4_4	
display	solution
x5_l	
display	solution
x5_2	
display	solution
x5^3	
display	solution
x5 4	
display	solution
x6_l	
display	solution
x6' 2	
display	solution
x6_3	
display	solution
x6_4	
display solution
x8_l
display solution
x8_2
display solution
x8_3
display solution
x8__4
display solution
xll_l
display solution
xl 1 2
display solution
xll_3
display solution
xll_4
display solution
x!2_l
display solution
x!2_2
display solution
xl2_3
display solution
xl2_4
display solution
xl5_l
display solution
x!5_2
display solution
xl5_3
display solution
xl5_4
display solution
xO_Total
display solution
x3_Total
display solution
x4__Total
display solution
x5 Total
display solution
x6 Total
display solution
x8 Total
display solution
xll Total
display solution
xl2 Total
display solution
xl5 Total
quit
A.4 Arquivo formatado em programação linear
Salvo com o nome probll.lp, variando o número conforme o instante da resolução, ou seja, no instante 23 o arquivo apresenta a denominação probl23.1p. Conteúdo escrito pela rotina OUTPL.
\Prcblem name : PROBL1.lp
Maximize
	~ 10 yi„i	-	10 y2__l -	i° yi_2	- 10	y2 2 - 10 :	yi_3 "	10 y2	_3 -	10	yi_4 - i°
y2„	_4										
+	x0_l + x0_2	4-	x0_3 a x0.	4 - 100	v0_l	- 100 v0_2	- 100	v0 3	- 100	v0	4
+	x3 1 4- x3_2	"ri	x3_3 4- x3	_4 - 100	v3 1	- 100 v3_2	- 100	v3 3	- 100	v3	“4
4-	x4_l 4- x4_2	4-	x4_3 4- x4.	~4 - 100	v4 1	-100 v4_2	- 100	v4 3	- 100	v4	_4
+	x5 1 + x5__2	4-	x5 3 4- x5	~4 - 100	v5 1	- 100 v5 2	- 100	v5J	— 100	v5	4
4-	x6 1 4- x6 2	4-	xê 3 4- x6	4 ~ 5 v6 1 -		5 v6 2-5	v6 3 -	- 5 v6	4		
4-	x8_l + x8_2	4-	x8 3 4- x8	~4 - 100	v8 1	- 100 v8 2	- 100	v8_3	- 100	v8	4
+	xll 1 + xll.	2	4- xll 3 +	xll 4 -	5 vil	1-5 vil	2-5	vil 3	- 5	vil	_4
4-	xl2 1 4- xl2.	2	4- xl2 3 4-	xl2_4 -	100 v!2 1 - 100		vl2 2	- 100	v!2_	3 -	100 v!2 ‘
+	xl5_l + X15'	”2	4- xl5_3 a	x!5 4 -	100 vis“l - 100		vl5_2	- 100	vl5	3 -	100 vl5_j
Subject To
cl: yl 1 - y2_l t xO__l + x3_l + x4_l -a x5_l a x6_l + x8__l a xll_l + xl2_l + xl5_l ="177
c2: yl_2 - y2_2 + x0_2 + x3_2 + x4_2 a x5__2 -a x6__2 +	4- xll_2 4- xl2_2 4-
xl5_2 -“177
c3: yl 3 - y2__3 + x0__3 + x3_3 + x4_3 a x5_3 a x6_3 + x8_3 +■ xll__3 + xl2_3 4-xl5 3 =”0
c4 :	yi_4	-		4-	x0 4	4-	x3 4 4- x4 4 4- x5 4 4- x6 4 4- x8 4 4- xll 4 + xl2 4 4-
xl5__	4 = 0						
c5:	v0_l	+	x0_l	=	124		
C6:	v0_2	+	x0 2	-	v0 1	&lt;=	9
c7 :	vO 3	4-	x0_3	-	v0_ 2	&lt;=	9
c8:	v0 4	4-	x0 4	-	v0 3	&lt;=	g
c9:	v3 1	+	x3 1	=	122		
clO:	v3_2	+	x3_2	-	v3_l	&lt;=	18
cll:	v3__3	+	x3_3	-	v3_2	&lt;=	18
cl2:	v3^4	+	x3_4	-	v3_3	&lt;=	18
cl3:	v4_l	+	x4_l	=	209
cl4 :	v4__2	+	x4_2	~	v4_l	&lt;=	18
cl5:	v4 3	4-	x4_3	-	v4_2	&lt;=	18
cl6:	v4^4	+	~	v4„3	&lt;=	18
C17:	v5_l	a	x5_l	-	129
C18:	v5_2	4-	x5_2	-	v5_l	&lt;=	23
cl9:	v5_3	+	x5_3	~	v5_2	&lt;=	23
c20:	v5__4	e	x5_4	-	v5_3	&lt;~	23
c21:	v6 1	a	x6__l	=	37 9
c22:	v6™2	4-	x6_2	-	v6_l	&lt;=	17
c23:	v6_3	+	x6__3	-	v6_2	O	17
c24:	v6_4	4-	x6_4	-	v6_3	&lt;=	17
c25:	v8__l	+	x8_l	=	206
C26:	v8_2	+	x8_2	-	v8_l	&lt;=	21
c27:	v8_3	+	x8__3	-	v8_2	&lt;=	21
c28:	v8_4	+	x8_4	-	v8_3	&lt;=	21
c29: vil 1 + xll 1 = 533
c30	vll_	2	+	xll_	2	- vil		1	&lt;=	21
c31	vll_	“3	4-	xll	“3		vil	"2	&lt;=	21
C32	vll__		+	xll_	'4	-	vil	“3	&lt;=	21
c33	v!2	"1	+	xl2	'1	=	122“			
c34	vl2_	2	4-	x!2	2		V12	1	&lt;=	6
c35	v!2_	3	4-	X12	3		vl2__	'2	&lt;=	6
c36	v!2	4	4-	xl2_	’4		vl2	“3	&lt;=	6
c37	v!5_	1	4-	x!5~	1	=	24 9~			
o38	- vl5_	2	4-	x!5	2		v!5		&lt;=	3
q3 9	vl5	3	+	xl5	3		vl5	'2	&lt;=	3
q40	v!5	'4	4-	xl5_	4	-	V15	3	&lt;=	3
c41	input_		_0	—	Q						
c42 c43 c44 c45 c46 C47 C4 8 c49 c50 c51 c52 c53 c54 c55 c5 6 c57 c58 c59 c60 c61 c62 c63 o64 o65 c66
input_3 input__4 input_5 input_6 ir;put_8 input__ll input__12 input_15
xO__Total + xO 1	+	xO 2	+ xO	3	4-	x0_4 =	0	
x3__Total T x3 1	4-	x3_2	4- x3	3	4-	x3 4 =	0	
x4 Total + x4 1	4*	x4 2	4- x4	3	4-	x4 4 =	0	
x5_Total + x5_l	4-	x5 2	4- x5_	3	4-	x5 4 =	0	
x6__Total t x6 1	4-	x6_2	4- x6	3	4-	x624 =	0	
x8 Total + xB 1	4-	x8_2	4- x8	l3	4-	x6 4 =	0	
xll_Total	xll_	1	4- Xll	2 4-	xl	1	_3 4- xll	4	= 0
x!2 Total + xl2		4- X12	~2 4-	X12		’3 + xl2	"”4	= 0
xl5_Total + xis2	*1	4- xl5	__2 4-	xl		~3 4- X15	Z4	= 0
!_Total = 24								
; Total = 50								
Total =46								
&gt;_Total =58								
¡ Total&amp;lt;= 42								
xO.
x3
x4
x5
x6
x8_Total =46 xll_Total&amp;lt;= 66 xl2 Total = 14
1 = 14
c67:		xl5 Tota
xO	xu* 1	B&amp;lt;= 12
xO	'2	&lt;= 12
xO	‘3	&lt;= 12
x0~	”4	&lt;= 12
x3	*1	&lt;= 25
x3_	'2	&lt;= 25
x3	'3	&lt;= 25
x3	'4	&lt;= 25
x4	'1	&lt;= 23
x4	2	&lt;= 23
x4	'3	&lt;= 23
x4	*4	&lt;= 23
x5		&lt;=2 9
x5	’2	&lt;=2 9
x5	'3	&lt;=2 9
x5	’4	&lt;=2 9
x6_		&lt;=21
x6	’2	&lt;= 21
x6	’3	&lt;=21
x6	4	&lt;= 21
x8	1	&lt;= 23
x8	2	&lt;=2 3
x8m	3	&lt;=2 3
x8	4	&lt;= 23
xll.	1	&lt;= 33
xll	2	&lt;=3 3
xll	3	&lt;=3 3
xll	„4	&lt;=3 3
xl2^	1	&lt;= 7
x!2	2	&lt;= 7
x!2‘	3	&lt;= 7
x!2	4	&lt;= 7
xlS	_1	&lt;= 7
X15’	2	&lt;= 7
xl5	3	&lt;= 7
xlS	_4	&lt;=	7
End		
A.5 Arquivo com resultados
Arquivo salvo com o nome forml.doc, também variando conforme o número do cenário simulado seqüencialmente. Supondo o instante 7, o arquivo será denominado form7.doc. Conteúdo lido pela rotina Ler resultado Cplex.
Log started (V3.0)
Thu Apr 15 19:39:34 1999
Variable Name xO_l
Variable Name xO 2
Solution Value
12.000000
Solution Value
12.000000
The variable *x0 3’ is 0.
The variable 'x0__4'		is	0 .
Variable Name x3_l			Solution Value 25.000000
Variable Name x3_2			Solution Value 25.000000
The variable ' x3.	3 ’	is	0.
The variable 'x3_	_4 '	is	0.
Variable Name x4_l			Solution Value 23.000000
Variable Name x4 2			Solution Value 23.000000
The variable ’x4.	_3'	is	0.
The variable ’x4	4 '	is	0 .
Variable Name x5__l	Solution Value 29.000000	
Variable Name x5~2		Solution Value 29.000000
The variable 'x5_	_3' is	0.
The variable * x5_	_4 ' is	0.
Variable Name x6_l		Solution Value 21.000000
Variable Name x6_2		Solution Value 18.000000
The variable ’x6	3 ’ is	0.
The variable 'x6	4 * is	0.
Variable Name x8_l		Solution Value 23.000000
Variable Name x8_2		Solution Value 23.000000
The variable *x8	3' is	0.
The variable ’x8	4’ is	0.
Variable Name xll_l		Solution Value 30.000000
Variable Name xll__2		Solution Value 33.000000
The variable 'xll	_3' is	0.
The variable 'xll	_4 ’ is	0.
Variable Name xl2_l		Solution Value 7.000000
Variable Name x!2_2		Solution Value 7.000000
The variable ’xl2	„3’ is	0.
The variable 'x!2	_4 ’ is	0.
Variable Name x!5_l		Solution Value 7.000000
Variable Name xl5_2		Solution Value 7.000000
The variable 'x!5	_3 ' is	0.
The variable *xl5	_4’ is	0.
Variable Name xO__Total		Solution Value 24.000000
Variable x3 Total	Name	Solution Value 50.000000
Variable	Name	Solution Value
x4 Total		46.000000
Variable	Name	Solution Value
x5 Total		58.000000
Variable	Name	Solution Value
x6_Total		39.000000
Variable	Name	Solution Value
x8_Total		46.000000
Variable	Name	Solution Value
xll_JTota;		63.000000
Variable	Name	Solution Value
x!2 Total		14.000000
Variable	Name	Solution Value
x!5 Total		14.000000</field>
	</doc>
</add>