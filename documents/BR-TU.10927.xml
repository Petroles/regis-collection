<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.10927</field>
		<field name="filename">16130_348525.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">
UNIVERSIDADE FEDERAL DE SANTA CATARINA

DEPARTAMENTO DE ENGENHARIA MECA?NICA

Gabriel Silva de Matos

LASER TRIANGULATION SENSOR WITH

REFRACTION MODELLING FOR UNDERWATER 3D

MEASUREMENT

Floriano?polis

2017





Gabriel Silva de Matos

LASER TRIANGULATION SENSOR WITH

REFRACTION MODELLING FOR UNDERWATER 3D

MEASUREMENT

Dissertac?a?o submetida ao Programa

de Po?s-Graduac?a?o em Engenharia Meca?nica

para a obtenc?a?o do Grau de Mestre

em Engenharia Meca?nica.

Orientador: Tiago Loureiro Figaro da

Costa Pinto, Dr. Eng.

Floriano?polis

2017





Gabriel Silva de Matos

LASER TRIANGULATION SENSOR WITH

REFRACTION MODELLING FOR UNDERWATER 3D

MEASUREMENT

Esta Dissertac?a?o foi julgada aprovada para a obtenc?a?o do T??tulo
de “Mestre em Engenharia Meca?nica”, e aprovada em sua forma final
pelo Programa de Po?s-Graduac?a?o em Engenharia Meca?nica.

Floriano?polis, 8 de Maio 2017.

Jonny Carlos da Silva, Dr. Eng.
Coordenador

Tiago Loureiro Figaro da Costa Pinto, Dr. Eng.
Orientador

Banca Examinadora:

Tiago Loureiro Figaro da Costa Pinto, Dr. Eng.
Presidente

Armando Albertazzi Gonc?alves Ju?nior, Dr. Eng.

Marcelo Ricardo Stemmer, Dr.-Ing.

Walter Antonio Kapp, Dr. Eng.

Marco Antonio Martins Cavaco, PhD.





ACKNOWLEDGEMENTS

To my parents, Daniel and Anesia, who have always supported
me and taught me the importance of education.

To Marcella, my life partner, thank you for all the love, trust
and companionship.

To Prof. Tiago Pinto, for believing in my capabilities and for
the valuable advice, availability and cooperation throughout this work.

To all the LABMETRO staff for their assistance throughout the
progress of this work. Especially, to Pedro for sharing the technical
discussions, to Fabio for guidance during the mechanical design and
Rosana, who was always ready to help.

To the Brazilian Institute of Oil Gas and Biofuels (IBP), who
provided the funding for this work.

And to all my family and friends for accompanying me along this
path.





RESUMO

Medic?o?es tridimensionais em ambientes subaqua?ticos sa?o u?teis
em diversas aplicac?o?es. Por exemplo, a indu?stria de petro?leo e ga?s
possui muitos equipamentos utilizados na extrac?a?o de petro?leo que ne-
cessitam de manutenc?a?o constante, a biologia tem grande interesse
em investigar a vida submarina e investigac?o?es de naufra?gios podem
fornecer dados u?teis. No entanto, nem sempre e? uma tarefa fa?cil obter
dados subaqua?ticos confia?veis, porque a luz espalha-se, e? absorvida e
refrata e o som nem sempre pode fornecer uma boa resoluc?a?o em curtas
dista?ncias. Estes obsta?culos devem ser considerados para alcanc?ar os
melhores resultados de medic?a?o poss??veis.

Este trabalho esta? dividido em quatro partes: uma revisa?o das
te?cnicas de digitalizac?a?o 3D subaqua?ticas dispon??veis, o projeto meca?nico
e o?ptico do sistema para atender aos objetivos descritos, os algoritmos
de calibrac?a?o e de medic?a?o utilizados com o sensor e uma avaliac?a?o final
com comparac?o?es entre o me?todo proposto e um me?todo de refere?ncia.

Atualmente, diversos me?todos sa?o utilizados para realizar a dig-
italizac?a?o destes ambientes, alguns destes sa?o: Sound Navigation and
Ranging (sonar) , Light Detection And Ranging (LiDAR), visa?o este?reo
e triangulac?a?o laser. O sonar e? amplamente utilizado em embarcac?o?es
mar??timas para obter informac?o?es sobre a profundidade e o fundo do
mar e para a localizac?a?o e mapeamento simulta?neos (SLAM) associa-
dos a ve??culos operados remotamente (ROVs). Mas eles tambe?m podem
ser usados em medic?o?es tridimensionais sendo por vezes chamados como
ca?meras acu?sticas. Eles sa?o baseados na emissa?o de um pulso sonoros
e na medic?a?o do tempo de vo?o do sinal. Sendo eles divididos em u?nico
feixe, que fornece informac?a?o de azimute e dista?ncia; mu?ltiplos feixes,
que fornece mu?ltiplos azimutes e dista?ncias e de feixe lateral, que uti-
liza uma onda em forma de cone para obter uma imagem acu?stica.
Uma das grandes vantagens dos sonares e? a capacidade de obter da-
dos confia?veis mesmo em a?guas muito turvas. LiDAR tambe?m e? uma
te?cnica de tempo de vo?o, entretanto ele utiliza a luz para obter o tempo
de retorno do sinal.

A fotogrametria e? uma te?cnica que utiliza imagens para obter
informac?o?es como dista?ncias e geometrias da cena. Exemplos de fo-
togrametria sa?o a visa?o este?reo e a triangulac?a?o laser. Entretanto, ela
possui limitac?o?es em ambientes subaqua?ticos, porque a luz sofre diver-
sas influe?ncias da a?gua. Apesar disto, em medic?o?es de curta dista?ncia,



ate? 10 m, elas possuem as menores incertezas entre as outras te?cnicas
apresentadas. Uma considerac?a?o comum na fotogrametria e? a consid-
erac?a?o da ca?mera pinhole: todos os raios de luz passam pelo centro
de pupila da ca?mera e projetam-se no plano imagem. Neste modelo a
calibrac?a?o consiste em obter a matriz de projec?a?o da ca?mera, a matriz
que projeta um ponto 3D qualquer em um ponto na imagem.

Te?cnicas de visa?o este?reo utilizam duas ou mais ca?meras para
obter a nuvem de pontos tridimensionais. Nelas a matriz de projec?a?o
e? utilizada para projetar retas de pontos homo?logos, mesmo ponto 3D
representado em diferentes imagens. O cruzamento destas retas resulta
no ponto 3D medido. Para obter estes pontos homo?logos a cena pode
ser iluminada com projec?a?o de luz estruturada ou iluminac?a?o passiva.
Um exemplo de luz estruturada e? a projec?a?o de franjas senoidais, pos-
sibilitando a assinatura u?nica dos diversos pontos 3D. Assim, a busca
de pontos homo?logos resume-se em buscar pontos na imagem com o
mesmo valor de fase.

A triangulac?a?o laser pode ser considerada uma forma de fo-
togrametria com iluminac?a?o estruturada, ja? que um laser e? utilizado
para iluminar a cena e uma ca?mera observa-o com certo a?ngulo. Os
principais para?metros que definem um sistema de triangulac?a?o laser
sa?o: o baseline (dista?ncia entre o centro do pinhole da ca?mera e o eixo
do laser), o a?ngulo de triangulac?a?o (a?ngulo entre o eixo da ca?mera e o
eixo do laser), o foco da lente, o tamanho do pixel da ca?mera e a res-
oluc?a?o da ca?mera. Dois me?todos de calibrac?a?o do sistema sa?o demon-
strados. No primeiro, polino?mios sa?o ajustados para correlacionar o
pico laser detectado com o ponto 3D medido. No segundo, o modelo
pinhole e? utilizado em conjunto com um ajuste matema?tico do plano
laser, tornando, assim, poss??vel trac?ar uma reta da ca?mera que cruza
com o plano laser ajustado.

Embaixo d?a?gua, a luz sofre diversas alterac?a?o quando com-
parada com seu comportamento no ar. As principais alterac?o?es sa?o:
absorc?a?o, espalhamento e refrac?a?o. A absorc?a?o acontece principal-
mente nos comprimentos de onda pro?ximos do vermelho (650 nm) . Ja?
o espalhamento tem uma maior influe?ncia nos comprimentos de onda
azuis (450 nm), resultando na cor dos oceanos. Assim, uma soluc?a?o de
compromisso e? necessa?ria, sendo, geralmente, lasers pro?ximos do verde
escolhidos para medic?o?es em dista?ncias maiores. A refrac?a?o resulta em
uma ”distorc?a?o 3D”, pois o desvio do raio depende da dista?ncia do
objeto. Entretanto, conhecendo-se o eixo de refrac?a?o, as dista?ncias en-
tre as interfaces de refrac?a?o e o primeiro raio de projec?a?o da ca?mera e?
poss??vel determinar o raio final da refrac?a?o.



O sistema proposto possui os seguintes objetivos: o sensor deve
ser projetado para medir um quinto da secc?a?o transversal exterior de
um tubo de 300 mm de dia?metro, a incerteza de medic?a?o final deve ser
pro?xima de de?cimos de mil??metros, a dista?ncia do sistema de medic?a?o a?
superf??cie de interesse deve ser suficiente para garantir a seguranc?a do
equipamento, por fim, o sistema tambe?m deve ser modular, para per-
mitir mudanc?as futuras no volume de medic?a?o, com alterac?o?es na base-
line do sistema e no a?ngulo de triangulac?a?o. Apo?s diversos ca?lculos e
simulac?o?es o sensor que cumpre estes requisitos tem as seguintes carac-
ter??sticas: baseline de 265 mm, a?ngulo de triangulac?a?o de 35?, dista?ncia
focal da lente de 12.5 mm, resoluc?a?o do sensor de 1280x1024 pixels e
tamanho do pixel de 5.5 ?m. Esta configurac?a?o garante uma profun-
didade de medic?a?o de 220 mm com uma dista?ncia m??nima de medic?a?o
de 200 mm e um comprimento de 180 mm ao longo da linha laser no
stand-off. Ale?m do sistema, uma bancada para medic?a?o e calibrac?a?o
tambe?m foi constru??da. Ela consiste em uma mesa de deslocamento
linear, um tanque para medic?a?o, um tanque de armazenamento e de
um sistema hidra?ulico, permitindo, assim, a medic?a?o tanto no ar como
na a?gua em todo o volume de medic?a?o.

Algoritmos de medic?a?o e calibrac?a?o foram desenvolvidos. A
medic?a?o consiste em trac?ar o caminho inverso do raio de luz, da ca?mera
ate? o plano laser. O primeiro passo e? obter o raio saindo do pico laser
detectado na imagem utilizando a matriz de calibrac?a?o da ca?mera.
Depois, o cruzamento deste raio com o plano de refrac?a?o e? medido
utilizando a dista?ncia do centro o?ptico ate? a janela de refrac?a?o. O
raio e?, enta?o, refratado e o cruzamento deste raio com o plano laser
e? computado. Para obter a dista?ncia do centro o?ptico ate? a janela de
refrac?a?o uma calibrac?a?o e? proposta. Nesta calibrac?a?o, uma aquisic?a?o
subaqua?tica de um degrau e? realizada e a altura do degrau e? medida
utilizando-se dista?ncias de janela pro?ximas a?s do projeto meca?nico. A
dista?ncia com a menor diferenc?a para com a altura real e? a utilizada
durante as medic?o?es.

Para avaliar o sistema diversas medic?o?es foram realizadas de di-
versos objetos. O principal objeto de avaliac?a?o sa?o duas esferas com
dista?ncia entre seus centros calibrada. A bancada foi utilizada para
comparar os resultados do ajuste polinomial e dos algoritmos desen-
volvidos tanto no ar quanto na a?gua. Foram avaliados tambe?m a consid-
erac?a?o de apenas uma refrac?a?o ou duas refrac?o?es na janela dos sistema
e a utilizac?a?o de uma ou mais aquisic?o?es do degrau para otimizac?a?o da
dista?ncia da janela. A considerac?a?o de uma refrac?a?o provou-se superior
a? de duas refrac?o?es e ao menos tre?s imagens do degrau fora necessa?rias



para calibrar o sistema na melhor dista?ncia de janela. Os resultado do
me?todo proposto e do ajuste polinomial foram bastante semelhantes
tanto no ar quanto na a?gua, sendo as medic?o?es na a?gua com menores
erros do que as medic?o?es no ar, conseque?ncia da diminuic?a?o do cone de
visa?o no ambiente subaqua?tico, resultando em uma melhor resoluc?a?o.

Assim, o sistema desenvolvido, composto tanto dos componentes
f??sicos quanto dos algoritmos provou-se capaz de realizar as medic?o?es
em laborato?rio, tendo resultados pro?ximos ao me?todo de refere?ncia.
Poss??veis trabalhos futuros incluem o acoplamento do sensor a mo?dulos
de movimentac?a?o, como ROVs, para a realizac?a?o de medic?o?es fora do
laborato?rio.

Palavras-chave: Digitalizac?a?o subaqua?tica. Sensores de trian-
gulac?a?o laser. Modelo de refrac?a?o. Projeto o?ptico.



ABSTRACT

Underwater tridimensional measurement has many applications, for ex-
ample, to control underwater equipment during optimized maintenance
procedures in the oil and gas industry. Systems with laser triangulation
sensors (LTS) are being used underwater at present and some under-
water problems with LTS have already been discussed. Among these
challenging obstacles are poor image quality, due to light absorption
and backscattering, and refraction, due to optical window interfaces
between water and air inside the camera chamber. The refraction ef-
fect can be predicted knowing the distance from the camera pinhole
center to the surface of refraction, the axis of refraction, the refractive
index of the mediums and the thickness of the optical window. This
work analyses two methods for underwater LTS calibration using real
experiments with a built LTS, in-air and underwater. The first method
uses a polynomial adjustment correlating to the laser peak for each
camera image line with a 3D point. This method needs a complete
calibration in the underwater environment. The second method pro-
posed is based on the pinhole camera model and a fitted mathematical
plane for the projected laser light plane. In air measurements, a line
can be defined through the lens center using the pinhole projection
matrix for each laser peak detected in the image. The intersection of
this line with the laser mathematical plane leads to a measured 3D
point. For high quality underwater LTS measurements, it is necessary
to additionally consider the refraction effect on the window and water
interface. Considering the optical window normal to the camera axis,
a ray path is defined on the plane of refraction according to the Snell?s
law to intercept the laser plane, defining a 3D point. The calibration
for underwater measurement needs to estimate the window distance
from the camera. In the proposed method, after the in-air calibration,
a step standard is measured underwater and the window distance from
the camera is optimized. The method is evaluated according to the
guidelines of VDI/VDE 2634 and multiple objects were evaluated.
Keywords: Underwater digitalization. Laser triangulation sensors.
Refraction modelling. Optical design.





LIST OF FIGURES

Figure 1 Images from different sonar types. (HORNER et al., 2009;
COIRAS; PETILLOT; LANE, 2007). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31

Figure 2 Acoustic lens schematic. (ROSENBLUM; KAMGAR-PARSI,
1992) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31

Figure 3 Echoscope equipment and measurement result. (CO-
DAOCTOPUS. . . , 2017; CRISP. . . , 2017) . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32

Figure 4 BlueView equipment and measurement result.(BLUVIEW. . . ,
2017; BLUEVIEW. . . , 2017). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32

Figure 5 Scopos Investigator equipment, measurement result and
subject. (SCOPOS. . . , 2017; SUBSEA. . . , 2017) . . . . . . . . . . . . . . . . . . . . . 33

Figure 6 STIL technique. (MCLEAN, 1999) . . . . . . . . . . . . . . . . . . . . . . 34

Figure 7 Pinhole camera schematic. (PINHOLE. . . , 2017). . . . . . . . . 34

Figure 8 Pinhole mathematical model. Adapted from Hartley and
Zisserman (2004). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35

Figure 9 Stereo system. (CHOOSING. . . , 2017) . . . . . . . . . . . . . . . . . . . 39

Figure 10 Homologous points and epipolar geometry in stereo vi-
sion. Source: Author’s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40

Figure 11 Commercial active stereo systems. Source: Author’s own
work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40

Figure 12 Accuity laser. (COMPACT. . . , 2017) . . . . . . . . . . . . . . . . . . . . 41

Figure 13 2G Robotics underwater laser triangulation sensor and
measurement example. (ULS-500. . . , 2017; OFFSHORE. . . , 2017) . . . . 42

Figure 14 Laser triangulation model. Adapted from Gan and Tang
(2011). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43

Figure 15 Uncertainty limit for a LTS.(DORSCH; HA?USLER; HER-
RMANN, 1994) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44

Figure 16 Scheimpflug configuration in a LTS. Adapted from Gan
and Tang (2011) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45

Figure 17 The standoff of a LTS is in the middle of the measurement
range. Source: Author?s own work. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46

Figure 18 Occlusion during measurement. Source: Author?s own
work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47

Figure 19 Laser plane fitting measurement. (SANTOLARIA et al.,
2009) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48



Figure 20 Light absorption in different oceans. 1 is in the Central
Pacific; a very clear, deep-sea water, 6 is in the Atlantic ocean,
(WOZNIAK; DERA, 2007). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50

Figure 21 Image of the same pattern in the same position, with and
without water, respectively. The images were captured through a
flat glass and the optical axis was normal to the glass. Source:
Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51

Figure 22 Refraction model. Adapted from Glassner (1989) . . . . . . 52

Figure 23 Dome window correcting the refraction. (NEWTON; BALD-
WIN; FRYER, 1989) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54

Figure 24 Non-SVP while looking through a flat interface. (TREIB-
ITZ; SCHECHNER; SINGH, 2008) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55

Figure 25 Multi-layer flat refractive geometry. (AGRAWAL et al.,
2012) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56

Figure 26 Designed sensor. Source: Author?s own work. . . . . . . . . . . 60

Figure 27 Inscribed pentagon side sized in a 300 mm diameter cir-
cle. Source: Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61

Figure 28 LTS 3D model optimization with in-air values. Source:
Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62

Figure 29 Angled wall water tank used in final evaluation. Source:
Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63

Figure 30 Camera positioning.(a) The positioning ?U? shape.(b)
The camera fixed on the ?U? shapes. (c) The auxiliary fixing el-
ement positioning. (d) The camera mounted on the auxiliary ele-
ment. (e) The auxiliary positioning element with respect to the lid.
(f) The camera mounted on the lid. Source: Author?s own work . . 64

Figure 31 Laser positioning. Source: Author?s own work . . . . . . . . . 65

Figure 32 Details of the back flanges. Source: Author?s own work 66

Figure 33 Clamped and unclassified configurations.(HARRIS, 1999) 66

Figure 34 Window resistance values. (HARRIS, 1999) . . . . . . . . . . . . . 67

Figure 35 Sensor fixing during calibration. Source: Author?s own
work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67

Figure 36 Back and superior fixing holes for auxiliary moving sys-
tems. Source: Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68

Figure 37 Hardware used to build the LTS. (MQ013MG-E2, 2017;
HF12. . . , 2017; MINI. . . , 2017) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68

Figure 38 Built LTS. (a) is the camera module and (b) is the laser



module. Source: Author?s own work. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69

Figure 39 Complete measuring bench: displacement system (a),
hydraulic system (b) and mounting structure (c). Source: Author?s
own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70

Figure 40 The linear slide and the motor. Source: Author?s own
work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71

Figure 41 Mounting structure details. Source: Author?s own work 72

Figure 42 Measurement model. Source: Author?s own work . . . . . . 73

Figure 43 Measurement procedure. Source: Author?s own work. . . 74

Figure 44 Resulting image from the step standard used during win-
dow distance calibration. Source: Author?s own work. . . . . . . . . . . . . 76

Figure 45 3D point result for different window distances d. Source:
Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77

Figure 46 Calibration procedure. Source: Author?s own work. . . . . 77

Figure 47 Evaluation objects: two fixed spheres, welding beads, a
plane and a dummy head. Source: Author?s own work. . . . . . . . . . . . 80

Figure 48 Calibration Standard. Source: Author?s own work . . . . . 82

Figure 49 Step Standard. Source: Author?s own work . . . . . . . . . . . . 82

Figure 50 Calibration layout used to adjust the laser and the cam-
era, also showing the OCS. Source: Author?s own work . . . . . . . . . . . 83

Figure 51 Calibration layout used to acquire the calibration images.
First the table is aligned (a), then the LTS is aligned (b), both with
a spirit level. Source: Author?s own work. . . . . . . . . . . . . . . . . . . . . . . . . 84

Figure 52 Acquisition layout. Source: Author?s own work . . . . . . . . 86

Figure 53 First, the original acquired image, then the processing
result and the labels. Source: Author?s own work. . . . . . . . . . . . . . . . . 87

Figure 54 Laser image processing to peak search. First, the original
image, then, the filter and the laser peak position (not shown with
subpixel resolution). Source: Author?s own work . . . . . . . . . . . . . . . . . 87

Figure 55 Sphere acquisitions.(a-c) images shown in-air. (d-f) im-
ages underwater. Respectively close to the system, on the stand off
and farther from the system. Source: Author?s own work . . . . . . . . . 88

Figure 56 (a) (c) and (e) are in-air images. (b) (d) and (f) are un-
derwater images. Respectively from the dummy head, the welding
beads and the PVC tube. Source: Author?s own work . . . . . . . . . . . . 90

Figure 57 Sensor movement direction during acquisitions. Source:
Author?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91

Figure 58 Z(v) polynomials examples from one of the top, middle



and bottom image lines, in-air and underwater. Source: Author?s
own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92

Figure 59 Y(Z) polynomials examples from one of the top, middle
and bottom image lines, in-air and underwater. Source: Author?s
own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93

Figure 60 Dummy head measurements in-air and underwater using
the polynomial adjustment. Source: Author?s own work . . . . . . . . . . 94

Figure 61 Welding bead measurements in-air and underwater using
the polynomial adjustment. Source: Author?s own work . . . . . . . . . . 95

Figure 62 300 mm diameter pipe measurements in-air and under-
water with the polynomial method. Source: Author?s own work . . 95

Figure 63 Dummy head measurements in-air (a) and underwater
(b) with the proposed method. Source: Author?s own work . . . . . . . 100

Figure 64 Welding bead measurements in-air and underwater using
the proposed method. Source: Author?s own work . . . . . . . . . . . . . . . . 100

Figure 65 300 mm diameter pipe measurements in-air (a) and un-
derwater (b) with the proposed method. Source: Author?s own
work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101

Figure 66 Comparison of all the measurement results. Source: Au-
thor?s own work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102

Figure 67 Y direction measurement volume. Source: Author?s own
work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105



LIST OF TABLES

Table 1 System parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63

Table 2 Underwater sphere measurement errors for the polyno-
mial adjustment. The worst measurement for each parameter is
highlighted. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93

Table 3 in-air and underwater plane measurement errors for the
polynomial adjustment. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94

Table 4 Relation between the number of step standard images
used during calibration and the refractive window distance . . . . . . . 97

Table 5 Measurement errors considering one or two refractions
during spheres evaluation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98

Table 6 Underwater sphere measurement errors for the proposed
method. The worst measurement for each parameter is highlighted 99

Table 7 Underwater plane measurement errors for the proposed
method.. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99

Table 8 Spheres spacing percent error. . . . . . . . . . . . . . . . . . . . . . . . . . . 103

Table 9 Proposed method underwater uncertainty evaluation. . . . 104





LIST OF ABBREVIATIONS

AUV Autonomous Underwater Vehicle

CCS Camera Coordinate System

CMM Coordinate Measuring Machine

DLT Direct Linear Transformation

FOV Field of View

LTS Laser Triangulation System

OCS Object Coordinate System

PC Personal Computer

PE Probing Error

PVC Polyvinyl chloride

ROV Remotely Operated System

SLAM Simultaneous Localization and mapping

Sonar Sound Navigation and Ranging

SSE Sphere Spacing Error

SVP Single View Point

ToF Time of Flight

USB Universal Serial Bus





LIST OF SYMBOLS

X
¯

3D coordinate in OCS

x
¯

Image coordinate

C
¯

Camera pinhole center

P
¯

Projection matrix

K Intrinsic parameters matrix

R Rotation matrix

t Translation matrix

?t Triangulation angle

f Focal length

x?, y? Undistorted image coordinates

k1, k2 Radial distortion coefficients

? Image plane

B Baseline

?t Triangulation angle

sx, sy Pixel size

? Light wavelength

?s Scheimpflug condition angle

k Lens magnification factor

? Medium index of refraction

vn Vector during refraction on layer n

d Distance from the camera pinhole center point to the plane
of refraction

T Transmitted ray

I Incidence ray

N Refraction interface normal vector

?T Transmitted angle

?I Incidence angle

tw Window thickness

Aw Unsupported aperture diameter

?Pw Pressure differential

Sf Fracture strength

N Refraction interface normal vector



? Degrees of freedom



CONTENTS

1 INTRODUCTION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25

1.1 WORK PURPOSES . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26

1.2 WORK OVERVIEW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26

2 UNDERWATER MEASUREMENTS. . . . . . . . . . . . . . . . 29

2.1 MAIN METHODS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29

2.1.1 Sonars . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29

2.1.2 LiDAR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31

2.1.3 Photogrammetry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33

2.1.4 Laser Triangulation Systems . . . . . . . . . . . . . . . . . . . . . . . 41

2.1.4.1 Laser Triangulation Principle . . . . . . . . . . . . . . . . . . . . . . . . . 41

2.1.4.2 Laser Plane Fitting Calibration . . . . . . . . . . . . . . . . . . . . . . . 47

2.1.4.3 Polynomial Regression Calibration . . . . . . . . . . . . . . . . . . . . 49

2.2 INFLUENCES ON UNDERWATER IMAGES . . . . . . . . . . . . . 50

2.3 UNDERWATER CAMERA CALIBRATION . . . . . . . . . . . . . . 55

3 UNDERWATER DEVELOPED SENSOR . . . . . . . . . . . 59

3.1 MECHANICAL DESIGN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59

3.1.1 Design Requirements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59

3.1.2 System Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60

3.1.3 Measuring Bench . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70

3.2 DEVELOPED ALGORITHMS . . . . . . . . . . . . . . . . . . . . . . . . . . 72

3.2.1 Measurement Algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . 72

3.2.2 Refraction Calibration Algorithm . . . . . . . . . . . . . . . . . . 76

4 SYSTEM EVALUATION . . . . . . . . . . . . . . . . . . . . . . . . . . 79

4.1 EVALUATION OBJECTS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79

4.2 CALIBRATION STANDARDS . . . . . . . . . . . . . . . . . . . . . . . . . . 81

4.3 CALIBRATION LAYOUT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83

4.4 ACQUISITION LAYOUT. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85

4.5 IMAGES PROCESSING . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86

4.6 ACQUIRED IMAGES . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87

4.7 POLYNOMIAL CALIBRATION . . . . . . . . . . . . . . . . . . . . . . . . . 92

4.7.1 Polynomial Adjustment Results . . . . . . . . . . . . . . . . . . . . 93

4.8 PROPOSED CALIBRATION . . . . . . . . . . . . . . . . . . . . . . . . . . . 96

4.8.1 Number of Underwater Images to Calibrate d . . . . . . 96

4.8.2 Refraction between Glass and Air . . . . . . . . . . . . . . . . . . 97

4.8.3 Proposed Method Results . . . . . . . . . . . . . . . . . . . . . . . . . . 98

4.8.4 Results Comparison . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102



4.8.5 Uncertainty Evaluation for the Proposed Method

Underwater . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
4.8.6 Y Direction Measurement Length . . . . . . . . . . . . . . . . . . 105
5 CONCLUSIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
5.1 FUTURE WORKS. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
References. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109



25

1 INTRODUCTION

Underwater tridimensional measurement has many applications,
in the oil and gas industry. The area of interest of the present work,
for example, are the applications on the underwater equipment control
and maintenance procedure optimization. Other applications include
archeology (DRAP et al., 2007) and biology(GIBSON; ATKINSON; GOR-
DON, 2016) investigation.

Multiple techniques can be used in these environments to ac-
quire distances and geometrical information, such as Sound Navigation
and Ranging (sonar) and Light Detection and Ranging (LiDAR). How-
ever, the optical techniques are, still, the most suitable ones for close
range measuring, up to 10 m. Among the optical techniques, some
that can be adapted for underwater measurements are stereo vision, si-
multaneous localization and mapping (SLAM), and laser triangulation
sensors (LTS). All of these techniques have advantages and disadvan-
tages, mainly that acoustic techniques, such as the sonar, have the best
performance for long range measurements, greater than 10 m and the
optical methods have the smallest uncertainties for close range mea-
surements.

The LTS is a very known technique in air (BESL, 1988; JI; LEU,
1989a) and some underwater problems with the LTS have already been
discussed in other works (CACCIA, 2006; CHANTLER; CLARK; UMA-
SUTHAN, 1997), a few of these obstacles are light absorption, light
scattering, and refraction.

Overcoming these obstacles is a fundamental step to obtain reli-
able 3D information with a LTS. Light absorption and scattering can be
diminished, for example, by selecting the right wavelength and the re-
fraction can be considered in the measurement procedure. These steps
can take the underwater measurement uncertainties closer to the in-air
uncertainties.

This work, then, proposed a LTS design and a method for its
measuring and calibrating procedures. The LTS was built in order to
achieve some objectives, such as measuring a 300 mm diameter pipe
with an uncertainty of a tenth of a millimeter as well as maintaining a
safe distance from the measured subject.

Along with the built sensor, a method for calibration and mea-
suring was proposed and evaluated. This method is based on the esti-
mation of the refractive window distance from the camera center. This
distance is ray traced from the camera to the laser plane and creates



26

the point cloud. The method is compared with a reference calibration
to evaluate its effectiveness.

1.1 WORK PURPOSES

The main objective of this work is to design, build and validate a
light sheet laser triangulation system for underwater environment oper-
ation up to 5 m deep. This sensor must consider the additional effects
due to the refraction and it must be able to acquire quality underwater
images, resulting in a reliable three-dimensional point cloud.

The specifics objectives of this work are:

? Develop calibration and measurement algorithms specific to un-
derwater measurements with laser triangulation systems, taking
into account the refraction effect.

? Flexible, compact and modular mechanical design for underwater
applications. The systems design must consider the attachment to
measurement robots, linear guides, ROVs or underwater robots.

? Extract quantitative parameters from scenes and objects of in-
terest, through three-dimensional measurements and be able to
consider the system movement to allow point cloud concatena-
tion.

? Evaluate the developed system errors.

1.2 WORK OVERVIEW

This work is divided into five main chapters: introduction, un-
derwater measurements, underwater developed sensor, system evalua-
tion and conclusion.

The introduction presents the motivation to build an underwater
LTS, the objectives to achieve the desired sensor and the work overview.

Underwater measurements presents the main methods to achieve
underwater digitalization and the challenges in underwater environ-
ments. The main methods covered are sonar, LiDAR and photogram-
metry techniques. A more detailed description is given to the laser
triangulation method and the main obstacles are focused in underwa-
ter images.



27

Underwater developed sensor presents the designed and built
LTS and its algorithms. All the calculations and simulations to achieve
the chosen sensor characteristics are described. Followed by the descrip-
tion of the algorithms applied to the calibration and measurement.

System evaluation presents the evaluation to estimate the sen-
sor errors with the proposed method and a reference polynomial ad-
justment method, both underwater and in air. Multiple objects were
measured to evaluate the capabilities of the sensor.

In the conclusion, the methods are compared and some obser-
vations are made along with proposed future works for the designed
sensor.



28



29

2 UNDERWATER MEASUREMENTS

Three dimensional measurements of underwater environments
are useful on many applications. The oil and gas industry utilizes
a lot of equipment for oil extraction that need constant maintenance
(DEY; OGUNLANA; NAKSUKSAKUL, 2004), biologist have great interest
in investigating the underwater life abundance (GIBSON; ATKINSON;
GORDON, 2016) and archaeological sites provide historical knowledge
(DRAP et al., 2007). Usually light and sound are used as means to
gather the measurement information. However, it is not always an
easy task to obtain reliable underwater point clouds, because the light
scatters, is absorbed and refracts and the sound cannot always provide
a good resolution. These obstacles must be considered to reach optimal
measurement results.

There are a few methods used nowadays in a varying number of
applications. A brief review of the main methods will be made showing
their results, advantages and disadvantages. After this review, the laser
triangulation method, the focus of this work, will be explained more
deeply.

2.1 MAIN METHODS

Underwater 3D reconstruction methods can be divided in time of
flight (ToF) techniques and triangulation techniques (MASSOT-CAMPOS;
OLIVER-CODINA, 2015). The ToF methods are, for example, sonar and
LiDAR and some of the triangulation methods are stereo vision and
laser triangulation.

2.1.1 Sonars

Sonar is a widely used ToF technique in maritime vessels to
obtain depths and sea floor information. They are also used in SLAM
applications, associated with remotely operated vehicles(ROVs) (RIBAS
et al., 2006). Nonetheless, they can also be used in three-dimensional
measurements being, sometimes, called acoustic chambers or acoustic
cameras (TAO et al., 2003; ROSENBLUM; KAMGAR-PARSI, 1992).

Sonar systems create a pulse of sound and wait for its reflection.
The time of reflection is then correlated with the object distance. Since



30

sound propagates well underwater, they can reach distances as far as
kilometers and can operate with little to zero visibility conditions. How-
ever, they also have higher uncertainties in close range measurements,
when compared with other digitalization method, such as optical ones
(MASSOT-CAMPOS; OLIVER-CODINA, 2015).

Because the measurement is dependent on the sound wave prop-
agation speed, this is a source of uncertainties. The propagation speed
underwater is determined by the medium pressure, which changes with
depth and density, which changes with temperature and salinity. (DI-
VISION; DIVISION; ECKART, 1946)

The simplest sonar is the single forward looking beam. After
the signal generation, the beam is shaped within the desired angle and
direction. Then, the resulting image has information of azimuth and
distance, but the elevation cannot be acquired with a single acquisition.

However, aside from using a single beam (GUO, 2013; HORNER et
al., 2009) a sonar can also use multiple beams (PATHAK; BIRK; VASKE-
VICIUS, 2010) or side beams (COIRAS; PETILLOT; LANE, 2007; ROSEN-
BLUM; KAMGAR-PARSI, 1992) to gather data. To create a point cloud,
the single beam must be moved with a known distance and orientation,
but the multiple beams can create a 3D reconstruction with a single
acquisition. The side beam sonar uses a beam in the form of cone
that can later be processed to acquire a three dimensional point cloud
(COIRAS; PETILLOT; LANE, 2007).

The acquisition result of a single beam sonar is shown in Figure
1 a. The elevation is lost during acquisition, the distance is the Y
axis and the azimuth is the angle. A side scan sonar image is shown
in Figure 1 b. The image is equivalent to a photo, because the lost
information is the depth.

Sonar with low frequency can survey wide areas of the ocean
floor, but can only distinguish features larger than tens of meters. On
the other hand, the resolution is proportional to the frequency and side
scan sonar can produce dozens of millimeters of resolution, in exchange
for a loss in range.

The acoustic lens are a set of highly directional acoustic trans-
ducers attached to a shell forming a retina, shown in Figure 2. . This
way, the delay has the range information and the transducer position
estimation that provides the azimuth and elevation, allowing a full 3D
reconstruction.

One example of a commercial 3D sonar is the Echoscope in Fig-
ure 3, an acoustic chamber ultrasound 3D inspection system with a
resolution of 30 mm and a maximum reach of 120 m.



31

(a) Single beam sonar image (b) Side scan sonar image

Figure 1: Images from different sonar types. (HORNER et al., 2009;
COIRAS; PETILLOT; LANE, 2007)

Figure 2: Acoustic lens schematic. (ROSENBLUM; KAMGAR-PARSI,
1992)

Another example of sonar is the BV5000 in Figure 4 manufac-
tured by BlueView. It also makes 3D measurements and enables inte-
gration with laser triangulation systems. It has a resolution of 10 mm
and a maximum reach of 10 m.

2.1.2 LiDAR

Light detecting and ranging (LiDAR) is a ToF technique, such
as the sonar, but it uses light signals. Some in-air systems can reach
resolutions of 0.8 mm in a 10 m range (SCAN. . . , 2017). ). Consider-



32

Figure 3: Echoscope equipment and measurement result. (CODAOCTO-
PUS. . . , 2017; CRISP. . . , 2017)

Figure 4: BlueView equipment and measurement result.(BLUVIEW. . . ,
2017; BLUEVIEW. . . , 2017)



33

Figure 5: Scopos Investigator equipment, measurement result and sub-
ject. (SCOPOS. . . , 2017; SUBSEA. . . , 2017)

ing underwater applications, most LiDAR systems are used as airborne
scanners being able to recover both the surface and the sea bottom
resulting in a high range reconstruction (MASSOT-CAMPOS; OLIVER-
CODINA, 2015). LiDAR systems are also used in underwater ranging
applications, where only the distance is obtained (WALDRON; MULLEN,
2009). However, one commercial system built for underwater measure-
ments is the Scopos Investigaton 5, which has two ranges: 250 m and
1500 m and the resolutions are not given by the manufacturer.

Another LiDAR technique is the Streak Tube Imaging LiDAR
(STIL), which is very similar to the single-beam sonar technique (MCLEAN,
1999). A cylindrical lens is used to form a fan beam and a photocathode
with a slit and a sweep plate is used to resolve the range and azimuth
data. The process is repeated as the aircraft moves forward and a full
3D image is obtained as shown in Figure 6. The sensor can reach a 10
m range with 2.6 mm resolution.

2.1.3 Photogrammetry

In the photogrammetry techniques, images are used to create
a 3D point cloud. A camera or set of cameras and passive or ac-
tive techniques are used to obtain the three-dimensional points. While



34

Figure 6: STIL technique. (MCLEAN, 1999)

underwater, the light is highly attenuated, meaning that the range
of measurement for these kinds of sensors is much smaller than the
sonar. However, much smaller uncertainties can be achieved using these
techniques (MASSOT-CAMPOS; OLIVER-CODINA, 2015). Stereo vision,
structure from motion and laser triangulation are some of the most
commonly used photogrammetry techniques. Since the main focus of
this work is the laser triangulation technique, it will be presented in a
separate section.

Camera calibration is an important component for various pho-
togrammetry techniques. The main camera calibration method consid-
ers a pinhole model, in which all rays pass through a small hole in a
closed box. These rays form, on the opposite side of the box an upside
down image, as shown in Figure 7. (HARTLEY; ZISSERMAN, 2004)

Figure 7: Pinhole camera schematic. (PINHOLE. . . , 2017)

To simplify this model the image plane is considered between the



35

pinhole center and the object. So, considering Figure 8, a point X in
3D object coordinate system (OCS) being observed by a camera with a
projection center or pupil C and an image plane. The X projection on
the image plane will be x, which is the result of the crossing between
the line from X through the pinhole center C and the image plane.

C

y

x

z

Camera Axis

Image Plane

f

X

Y

Z

OCS

X

x

Figure 8: Pinhole mathematical model. Adapted from Hartley and
Zisserman (2004).

In this model, the calibration parameter is the projection ma-
trix, the matrix that projects the 3D point X in OCS to its respective
projected camera pixel x. The projection matrix P is a 3x4 matrix
that contains both the extrinsic and intrinsic parameters of the cam-
era. The extrinsic parameters are the rotation and translation matrices
[R t] that transform the 3D coordinates from the OCS to the CCS.
The intrinsic parameters are the focal point f and the principal sensor
point, coordinates x0 and y0, which allows the CCS shift to the center
of the imaging sensor.(HARTLEY; ZISSERMAN, 2004)

x = PX (2.1)

Where P = K[R t], K is a 3 × 3 matrix and [R t] is a 3 × 4
matrix that contains the rotation, R in a 3×3 matrix and the translation
in a 3 × 1 matrix.

Matrix K contains the intrinsic parameters and is as follows:

K =

?

?

fx 0 x0
0 fy y0
0 0 1

?

?



36

Where fx and fy are the camera?focal length and x0 and y0 are
the camera?s principal point in CCS.

There are many ways to obtain the camera projection matrix,
two main methods will be presented. Both methods need a set of 3D
points and its image correspondence. The problem with finding the
projection matrix with these conditions is called the resection problem.
The first approach is the direct linear transformation (DLT) method
and the other uses plane homographies. After the applied method, some
optimization techniques are applied, such as the Levenberg-Marquardt
algorithm (LOURAKIS, 2005).

The DLT approach formulates a homogeneous, usually overde-
termined, linear system of equations and solves this by finding an ap-
proximate null space. Let pi, i = 1, 2, 3 be the 4 × 1 vectors containing
the rows of projection matrix P , that is

P =

?

?

pT
1

pT
2

pT
3

?

?

And PX can be written as

PX =

?

?

pT
1
X

pT
2
X

pT
3
X

?

?

Since x = PX the cross product x × PX is zero. Considering
x = (x, y, 1), since x is in homogeneous coordinates, this cross product
can be written explicitly as

x × PX =

?

?

y pT
3
X ? pT

2
X

pT
1
X ? x pT

3
X

x pT
2
X ? y pT

1
X

?

?

Then, since pTi X = X
T pi and isolating the variable pi

?

?

0 ?X y X
X 0 ?x X
y X x X 0

?

?

?

?

p1
p2
p3

?

? = 0

Where each 0 represents a 1×4 null matrix, resulting in a linear
system Ax = 0. In addition, because the third row can be written as a
combination of the first two rows, matrix A is singular, thus the linear
equations to be solved are



37

[

0 ?X y X
X 0 ?x X

]

?

?

p1
p2
p3

?

? = 0

Because the matrix can be scaled, there are 8 variables and since
each point leads to two equations, a 4 point set leads to an exact so-
lution. However, since the system is affected by image noise, more
points leading to an overdetermined system is a more viable solution.
One way to find the A matrix null space approximation is through the
eigenvector with the smallest eigenvector of AT A. But, this is a poorly
conditioned matrix since the third column will be orders of magnitude
higher than the other columns, considering that the image coordinates
can be as large as thousands of pixels. This can be solved normalizing
the data before matrix A is built. The image points can be normalized
by translating every point so the centroid of the points is the system
coordinate center and scaled so the average points distance to the cen-
ter is

?
2 resulting in average point of (1,1). The 3D points can be

normalized the same way but with an origin center distance of
?
3 so

the average point is (1,1,1). This is a suitable normalization for most
configurations. (HARTLEY; ZISSERMAN, 2004)

It follows that, the full projection matrix is obtained. Neverthe-
less, this method requires three dimensional standards, because the use
of planar standard results in one coordinate always being null, which
leads to a singular A matrix.

A second common way to calibrate a camera is through plane
homographs (ZHANG, 1999). This method does not require a three di-
mensional standard, just a set of planar standard images with different
rotations and translations is enough to provide the system calibration
parameters. This method considers the Z coordinate to be null, thus,

s

?

?

x
y
1

?

? = K
[

r1 r2 r3 t
]

?

?

?

?

X
Y
0
1

?

?

?

?

= K
[

r1 r2 t
]

?

?

X
Y
1

?

?

Being s a scalar factor. Considering a homography H = [h1h2h3]
is related to the projection matrix by

[

h1 h2 h3
]

= ?K
[

r1 r2 t
]

Where ? is an arbitrary scalar. Since r1 and r2 are orthonormal



38

hT
1
K?T K?1h2 = 0 (2.2)

hT
1
K?T K?1h1 = h

T
2
K?T K?1h2 (2.3)

Considering B = A?T A?1 and the vector b = [B11, B12, B22, B23, B33]
T

After some equations adjustments and considering

vij = [hi1hj1, hi1hj2+hi2hj1, hi2hj2, hi3hj1+hi1hj3, hi3hj2+hi2hj3, hi3hj3]
T

(2.4)
The equation

[

vT
2

(v11 ? v22)T
]

b = 0

Results in a likewise Ax = 0 equation system

Vb = 0 (2.5)

From the projection matrix, the intrinsic and extrinsic parame-
ters can be separated. The translation is the fourth projection matrix
column. The intrinsic parameters and the rotation are obtained from
the three remaining columns. This is done by RQ-factorization, which
separates one matrix into one right triangular and another as orthog-
onal, being the camera matrix as right triangular and the rotation as
orthogonal. After this, the matrices must be scaled so that the third
line, third element of the intrinsic parameters is one.

Besides the pinhole model, the lens distortions can also be es-
timated during calibration (BROWN, 1971). The lens distortions can
be divided in radial and tangential distortions. In today’s commercial
lenses, the radial distortion is the most influential during image forma-
tion and usually just two coefficients are enough to correct the distorted
image. (ZHANG, 1999). The optimization, then, has to find the optimal
values for the equations

x? = x + x[k1(x
2 + y2) + k2(x

2 + y2)2] (2.6)

y? = y + y[k1(x
2 + y2) + k2(x

2 + y2)2] (2.7)

Where x? and y? and the normalized corrected pixel coordinates
and k1 and k2 are the distortion coefficients.

After this estimation, the alternation between estimation of the



39

other parameters and the distortion coefficients are usually capable of
evaluating the initial guesses to initialize the non-linear optimization.
And finally, the calibration parameters are estimated to minimize the
equations of both the projection matrix and the distortion coefficients.

The stereo vision techniques use two or more fixed cameras, as
shown in Figure 9, to capture the scene and construct the point cloud.
Through camera calibration, the position of one camera in respect to
the others is solved and triangulation is possible using homologous
points.

Figure 9: Stereo system. (CHOOSING. . . , 2017)

The homologous points are image points that represent the same
3D point in each different captured image of the scene, in Figure 10
the homologous points are x and x?, respectively on the image planes
? and ??. These image points are projected into lines from the image
centers C and C? by applying the camera projection matrix. The cross
between these lines is the measured 3D point X. In practice, the lines
do not cross due to image noise, so an approximation is made. The
procedure is then repeated until a full point cloud is constructed.

In photogrammetry techniques, the homologous points used in
triangulation can be obtained using passive or active techniques. The
active methods use light with some kind of information projected onto
the surface of interest while the passive illumination techniques do not
project any additional information to the scene.

The fringe projection technique is an example of active pho-
togrametry. The projected image has a sinusoidal pattern that assign
a phase value for each image line or column. The use of calibrated cam-
eras allows the epipolar geometry to be used. The epipolar geometry
is built uniting the two pinhole centers generating the triangle shown
in Figure 10. Then, the same phase is searched on the other images
along the l line. The process is repeated for each image pixel and the



40

???

CC?

X

xx?
l

Figure 10: Homologous points and epipolar geometry in stereo vision.
Source: Author’s own work

point cloud is built. In Figure 11 a commercial system that uses fringe
projection is presented. (HARTLEY; ZISSERMAN, 2004)

Figure 11: Commercial active stereo systems. Source: Author’s own
work

The passive illumination methods do not project any additional
information on the surface of interest, for example the structure from
motion technique (JORDT, 2014). In this technique, a single camera is
moved whilst observing the surface of interest. After some image pro-
cessing, the homologous points are established along with the camera
position in each acquired image and the 3D mesh is constructed. These
systems can easily be implemented in underwater environments, since
all it needs is a moving camera that can be mounted, for example, on
a ROV. All the image processing can be done after a video recording.

Stereo vision techniques are present in underwater measurements
(BIANCO et al., 2013; BRUNO et al., 2011; BUSCHINELLI et al., 2016). The
underwater environmental influences on images are further explored in
the next sections.



41

2.1.4 Laser Triangulation Systems

A laser triangulation sensor (LTS) uses a laser projector and a
camera to obtain required information, being, therefore, an active op-
tical technique. Such information can be, for example, displacements,
distances and three-dimensional points. The main principle behind LTS
is the geometrical triangulation principle.

One example of commercial laser triangulation measurement sen-
sor is the profiler scanCONTROL 2600-50 manufactured by Micro-
Epsilon, presented in Figure 12, which presents a resolution of 4 ?m
and a measurement range of 60 mm.

Figure 12: Accuity laser. (COMPACT. . . , 2017)

Laser triangulation is one of the most used 3D underwater mea-
surement methods. They have one of the lowest uncertainties among
the presented methods and are used for short range measurements (up
to 10 m), mainly due to light signal degradation.(MASSOT-CAMPOS;
OLIVER-CODINA, 2015)

The company 2G Robotics has a LTS for underwater uses, shown
in Figure 13, but the uncertainty is unspecified. The range goes from
0.13 m to 10 m and the resolution goes from 0.03 mm up to 0.31 mm,
respectively.

2.1.4.1 Laser Triangulation Principle

The LTS uses some form of laser projection fixed with a certain
distance and angle from a camera (JI; LEU, 1989b; GAN; TANG, 2011).
The laser is, then, projected on a surface of interest and suffers some
level of diffuse reflection. Some of the light rays from the surface pass
through the focal point of the lens and the result of the intersection



42

Figure 13: 2G Robotics underwater laser triangulation sensor and mea-
surement example. (ULS-500. . . , 2017; OFFSHORE. . . , 2017)

between the laser and the surface is captured by an image sensor. In
the captured image, the detected laser peak pixel can be associated
with the desired dimension.

The simplest LTS is composed of a laser dot projector and a
camera observing it with an angled view. As the camera observes an
object getting closer to the laser, the laser image on the camera also
moves along the image columns or lines. After proper calibration, the
association between the distance from the laser and the image pixel
position containing the laser peak can be done, resulting in distance
measurement.

System characteristics such as, the measurement volume and the
system resolution are defined by some parameters. The main system
parameters, shown in Figure 14, are: the baseline B, the triangulation
angle ?t, the pinhole center point C given by the lens focal length f,
the pixel size and the sensor resolution. One very important initial
observation is that the relation between system resolution and mea-
surement volume is inversely proportional considering the same sensor
being used.

The baseline is the distance between the pinhole center and the
laser projector. The triangulation angle is the angle between the camera
axis and the laser optical axis. The pixel size and the resolution are
characteristics of the sensor, and the pinhole center point depends on
the selected lens. A relation between these characteristics and the
system resolution can be derived, considering the sensor pixel size sx
and u the number of pixel from the image center and the CCS presented
in 14. By triangle similarity (GAN; TANG, 2011)



43

Laser
Image Plane

C

f

?t

B

X

x

Z

X

Figure 14: Laser triangulation model. Adapted from Gan and Tang
(2011)

Z =
Bf

f tan ?t ? sxu
(2.8)

After the Eq. 2.8 derivative, the sensor resolution can be cal-
culated, i.e. how the distance and pixel variation displacement are
related. The derivative is (GAN; TANG, 2011)

?Z =
Bfsx

(f tan ?t ? sxu)2
?u (2.9)

This equation can be applied to estimate the sensor resolution
along the Z coordinate. Since sx is very small compared to f the factor
inverse of (f tan ?t)

2 is the most influential. The same procedure can
be made in the Y direction, along the laser line in the captured image.
Using the same similarity principle, Y is

Y =
B cos ?tfsyv

f tan ?t ? sxu
(2.10)

Which has a derivative

?Y =
vB cos ?tsysx

(f tan ?t ? sxB cos ?t)2
?u +

syB cos ?t
f tan ?t ? sxu

?v (2.11)

The defined object coordinate system is arbitrary and in this



44

case the X coordinate is always null.
The laser peak detection has a great influence on the measure-

ment uncertainty. There are a few approaches to reach a sub pixel
detection level. The center of mass, the zero crossing and the curve
adjustment are some examples. There are some comparisons between
methods with some advantage for the zero crossing method (NAIDU;
FISHER, 1991).

The theoretical uncertainty limit is defined by the laser speckle
(DORSCH; HA?USLER; HERRMANN, 1994). The speckle occurs when co-
herent light is projected onto a diffuse surface. The coherence enables
the constructive and destructive interference between the various laser
reflections on the surface and a granular pattern is formed. The smaller
the size of the speckle grain, the smaller the uncertainty limit, because
the peak detection can be more exact. The speckle grain size charac-
teristics depends on the wave length, the lens aperture and the distance
between the camera and the measured surface. One way to make the
grain smaller is to open the camera aperture. However, this also makes
the depth of focus smaller, which makes the laser peak detection more
inaccurate. Therefore, there is a compromised relation between the
speckle grain size and the depth of focus length. In Figure 15 the rela-
tion between the detectable peak difference ?xcog, the light wavelength
? and the system angle of aperture u is shown.

Figure 15: Uncertainty limit for a LTS.(DORSCH; HA?USLER; HER-
RMANN, 1994)

The depth of focus influence can be minimized by applying the
Scheimpflug principle which is widely used in LTS, with some consider-



45

Laser

ImageP lane

?t

Laser

ImageP lane

?t

?s

Figure 16: Scheimpflug configuration in a LTS. Adapted from Gan and
Tang (2011)

ations (MIKS; NOVAK; NOVAK, 2013). The Scheimpflug condition is met
when the angle between the image plane and the lens axis, as shown in
Figure 16, ?s is

tan ?t = k tan ?s (2.12)

Where k is the magnification factor. This is also called tilt and
shift in photography. When the angle ?s, changes, the plane of focus
also changes. Then, it is possible to always maintain the laser plane in
focus, therefore, optimizing the measurements for all the measurement
volume, since the portion of the image with the laser line will always
be in focus. The sensor tilt enables a wider lens aperture, decreasing
the speckle influence on the measurement.

Instead of projecting a dot, a line or multiple lines can be pro-
jected on the surface of interest. The line can capture more 3D points
from the scene within a single image acquisition, since each laser peak
for each image line or column is a 3D point. The multiple line projec-
tion has the advantage of measuring the sensor orientation with respect
to the object with only one acquisition, since a plane can be adjusted
with the captured information, but it requires multiple lasers or special
optics.

A fundamental procedure to create a dense point cloud with a
LTS is to move the sensor, because in one acquisition, only a small part
of the object of interest is measured, only where the laser is hitting the



46

object. Therefore, the sensor must be mounted on equipment with
known displacement, which can be a moving table, a robot or, in un-
derwater cases, a ROV or autonomous underwater vehicle (AUV). This
mounting requires another calibration to locate the sensor coordinate
system in respect to the moving equipment coordinate system. One
example of this calibration is to use an auxiliary object as a reference
coordinate system (SANTOLARIA et al., 2009). This object has its coor-
dinate system defined both by the LTS and an auxiliary machine, such
as a coordinate measuring machine (CMM) Hence, the transformation
between the LTS and the coupling between the sensor and the moving
equipment coordinate system coordinate systems are possible.

Another important system characteristic is the stand-off, the op-
timal distance from the system to perform the measurement. It is the
distance between the camera and the center of the measurement vol-
ume, as shown in Figure 17. The system parameters, such as lens and
laser focus are adjusted for this distance. Accordingly, this is the best
area in the measurement volume to acquire images.

Laser

Image Plane

C

Standoff
Measurement

Range

Figure 17: The standoff of a LTS is in the middle of the measurement
range. Source: Author?s own work

Some limitations in regards to the surface being measured and
surface discontinuities appear during measurements with a LTS. Since
the laser must be observed by the camera from an angled view, the
surface must have some level of diffuse reflection, so the laser can be
seen in the image. When the surface has low diffuse reflection, the
laser power can be raised to get more light into the sensor. Surface
discontinuities may cause occlusions during measurement, this occurs



47

when the own surface appears as an obstacle between the camera and
the laser, as shown in Figure18. Therefore, when occlusions occur, the
laser peak cannot be detected. Occlusions can be avoided by measuring
the surface in different orientations.

Laser
ImageP lane

C

X

x

Discontinuity

Figure 18: Occlusion during measurement. Source: Author?s own work

The calibration of laser sheet sensors allows the acquired im-
age to be transformed into three-dimensional points. Two calibration
methods will be used in this work, both considering one laser line being
projected. The first method considers a pinhole camera model and a
mathematical plane (SANTOLARIA et al., 2009, 2011), in which it is nec-
essary to calibrate both the camera and the laser plane. This method
will be adapted to consider a refraction during measurement. The sec-
ond method is a model-less method, with polynomials fitted for each
line, relating the laser peak and the 3D point, this method will be used
as a reference method.

2.1.4.2 Laser Plane Fitting Calibration

This calibration needs a calibrated camera, i.e. the intrinsic and
extrinsic parameters must be estimated in a previous step. After the
camera calibration, the laser plane fitting calibration is performed. It is
based on approximating the laser plane as a mathematical plane with
the plane coefficients according to the plane equation: Ax+By +Cz +
D = 0. The measurement is based on projecting the detected laser
peak, by applying the camera calibration parameters, and crossing this



48

projection with the mathematical plane, as shown in Figure 19.

Figure 19: Laser plane fitting measurement. (SANTOLARIA et al., 2009)

To obtain the laser plane coefficients, a set of 3D points on the
laser plane in various locations in the measurement volume is used to
adjust a best fitted plane.

The plane point cloud can be obtained with a simple procedure,
considering the OCS with X direction normal to the laser plane,the Z
direction parallel to the laser projector axis and the origin at the mea-
surement volume center. First, a plane with a known Z OCS coordinate
on the XY plane containing the laser line is captured by the camera.
After the image distortion correction, for each image line, the laser peak
is detected and for each detected peak, a line is back projected to the
OCS using the projection matrix. The projection provides two equa-
tions for a three variable system, which can be solved by the known
Z coordinate. The process is then repeated for several Z coordinates
until a laser plane point cloud is built and the mathematical plane is
adjusted. The process can be improved by using the same image to cal-
ibrate the laser and the camera. Thus, ensuring that the plane images
used are contained on the XY plane in OCS, since the OCS is defined
during the camera calibration. Therefore, the plane movement during
plane calibration is only in the Z direction.

Some sources of uncertainties arise during this kind of calibra-
tion. The moved plane flatness influences the measured points to con-
struct the laser plane, because all the laser peaks are considered to be
on the same Z coordinate. The plane displacement uncertainty leads to
a different Z coordinate used in calibration. Also, since the laser plane



49

calibration and the measurement procedure use the projection matrix,
the camera calibration errors have a direct influence on uncertainty
measurement. Finally, the measurement quality is influenced by the
laser light sheet quality, i.e. how ?flat?is the projected laser plane, this
error can be minimized changing the adjusted surface to an equation
that better represents the projected surface.

2.1.4.3 Polynomial Regression Calibration

This method correlates the laser peak and the 3D point through
polynomial equations and is based on Trucco, Fisher and Fitzgibbon
(1994). This is a ?black-box? approach, therefore the errors from cam-
era and laser calibration, presented in the previous calibration, are
absorbed into the adjusted equations. In this calibration, the ZY plane
in OCS is considered to be on the laser plane, so the Y coordinate is
aligned with the observed laser line and the X coordinate is always null.
It is considered that the laser line captured on the image is along the
image columns, therefore the peaks are established for each line.

A set of known 3D points and the images column with the laser
peak are the variables and two polynomial equations are fitted for each
image line.

The first polynomial equation correlates the image column pixel
to the laser peak to the Z coordinate Pu(v) = Z and the second
polynomial equation correlates the Z coordinate to the Y coordinate
Pu(Z) = Y . Polynomial equations must be adjusted since the sensitiv-
ity changes throughout the measurement volume, so the non-linearity
is compensated. During the measurement, after the laser peak column
is obtained, the Z coordinate is calculated with the first equation, then
the Z is applied to the second equation. After that, the process is
repeated for each image line.

The second equation is needed because of the camera amplifica-
tion factor. Since the number of image lines is always the same, the
Y variation for each line is bigger when the object is farther from the
laser, so the Z distance for each line influences the Y coordinate.

The utilised 3D points to adjust the equations are the main
source of uncertainties in this kind of calibration. If a moving plane is
used to obtain the 3D points the plane flatness affects the considered
3D point errors, thus affecting the measurement uncertainty.



50

2.2 INFLUENCES ON UNDERWATER IMAGES

Underwater images taken with a camera inside housing are dif-
ferent than in air images, as the objects appear to be closer than they
are and the observable distance is much lower. Light absorption, light
scattering and refraction are the three main image quality and distor-
tion influences when taking underwater images. They are dependent on
many factors, some of which are, water salt concentration, particles in
suspension and travelling light wavelength, thus all these factors have
some kind of influence on the measurement result.

Light absorption occurs when the photons are absorbed while
interacting with different particles in suspension in the water (WOZ-
NIAK; DERA, 2007). Increasing the light source power can help reach a
longer distance when this has a large influence. As shown in Figure 20,
the light wave-length with the least underwater absorption is around
450 nm to 550 nm, the green and blue range. This is the reason why
the ocean color is blue, because the most absorbed range is on the red
spectrum.

Figure 20: Light absorption in different oceans. 1 is in the Central Pa-
cific; a very clear, deep-sea water, 6 is in the Atlantic ocean, (WOZNIAK;
DERA, 2007)



51

Light scatter is divided in backscatter and forward scatter (SCHECH-
NER; KARPEL, 2005). They both occur when the light is deflected when
colliding with particles in water. The deflection can occur guiding the
light back to the receptor, backscattering, or to the object of interest,
forward scattering. They have a higher influence on light propagation
the more turbid the water is. When the light is backscattering, the
increase in light power can decrease the image quality, since more light
can come from scattering on the water itself than from the object of
interest. The backscatter leads to a loss of contrast and the forward
scatter causes a loss of sharpness. The use of higher wave-lengths re-
duces the scattering effect.

The light absorption and scattering are, then, on opposite sides.
The least absorbed wave length is on the green and blue spectrum,
but the least scattered is in the red spectrum. Generally, the green is
chosen as a middle ground between the two, although for small ranges,
the absorption does not play a major role, so the red spectrum is also
usable.

Refraction is the light ray deflection when the transmission medium
index of refraction changes. In underwater images, the refraction oc-
curs on the interfaces between water, glass and air. The effect of a
refraction in underwater images can be seen in Fig 21. The same pat-
tern on the same distance and position from the camera is shown in
both images, but the first one is underwater and the second in air. The
refraction depends on the index of refraction of the medium, in the
case of water, its index is dependent mainly on pressure, temperature,
wavelength and salt concentration (QUAN; FRY, 1995).

Figure 21: Image of the same pattern in the same position, with and
without water, respectively. The images were captured through a flat
glass and the optical axis was normal to the glass. Source: Author?s
own work



52

The refraction can be modelled (GLASSNER, 1989) as shown in
Figure 22. The incidence ray I on a medium with index of refraction
?1 reaches a surface with an angle of incidence ?i with respect to the
vector N, which is normal to the interface of refraction. The ray is
transmitted to the medium with index of refraction ?2 in the direction
T with an angle of ?t.

?1

?2

N

-N’

I

T?t

?i

Figure 22: Refraction model. Adapted from Glassner (1989)

Because the transmitted ray is in the same plane as the normal
and the incidence ray it can be written as a combination of both

T = ?I + ?N (2.13)

The Snell? s Law states

sin ?t
sin ?i

=
?i
?t

= ?it (2.14)

From squaring both sides of Eq. 2.14

sin2 ?i ?
2

it = sin
2 ?t (2.15)

And because sin2 ? + cos2 ? = 1 and (N · N) = 1



53

(1 ? cos2 ?i) ? 1 = cos2 ?t
= [?N · T]2

= [?N · (?I + ?T)]2

= [?(?N · I) + ?(?N · N)]2

= [? cos ?1 ? ?]2

(2.16)

Because T has unit length

1 = T · T
= (?I + ?N) · (?I + ?N)
= ?2(I · I) + 2??(I · N) + ?2(N · N)
= ?2 ? 2?? cos ?i + ?2

(2.17)

By solving Eq.2.16 and Eq.2.17 for ? and ? and selecting the
vector on the forth quadrant, the transmitted ray equation is

T = ?itI + (?it(N · ?I) ?
?

(1 + ?2it((N · ?I)2 ? 1))N (2.18)

Slight variations in the refractive index can cause a substantial
difference in the acquired image, since an angle variation can represent
many pixels in image coordinates. The refraction causes a problem de-
scribed as a 3D distortion on the image (TREIBITZ; SCHECHNER; SINGH,
2008). It happens because the apparent focal length varies depending
on the light ray incidence angle, thus the pinhole model, in which all
the rays pass through a single point, which is not a physically valid
model. One way around the refraction is the dome windows (NEWTON;
BALDWIN; FRYER, 1989), as seen in Figure 23, they minimize the re-
fraction effect acting as a slightly positive lens. They must be mounted
so that the dome center of curvature is coincident with the pinhole
center, which makes the dome specific for the designed lens and casing
set.

All these factors have many impacts on both the designing un-
derwater sensors and on the measurement method. The light source
choice and considering the refraction during the measurement are some
of the actions to minimize the various water effects. In the LTS case, i.e.
short ranges, refraction is one of the most impacting effects, therefore,



54

Figure 23: Dome window correcting the refraction. (NEWTON; BALD-
WIN; FRYER, 1989)

a calibration that takes this matter into account is essential.



55

2.3 UNDERWATER CAMERA CALIBRATION

The main effect to be considered during underwater camera cal-
ibration is refraction. The ray deflection caused by it can reflect into a
several pixels position error. Refraction depends on the kind of housing
being applied, domes and flat windows are the most commonly used.
The flat window is the easiest to build, but the most influenced by the
refraction. In this work, the main focus is to use the flat window and
to predict the refraction using the measurement software, thus reduc-
ing the building costs. The camera in underwater environments inside
a flat window housing is affected by a focal length variation effect, as
shown in Figure 24, the objects appears to be bigger than when they
are in-air, because of the reduced field of view (FOV). There are two
main ways to counteract this effect: to consider the camera axial or
to approximate this effect to a radial distortion also leading to a new
system focal length.

Figure 24: Non-SVP while looking through a flat interface. (TREIBITZ;
SCHECHNER; SINGH, 2008)

The first possible solution is to consider the camera as axial
(AGRAWAL et al., 2012), i.e., the focal point is variable with the light
ray angle of incidence. This is a more physically accurate method, since
each ray is traced following its actual path. However, in this model,
new calibration parameters must be estimated, thus the calibration
becomes more complex. Even though the camera is considered axial,
all the rays still physically pass through the pinhole center point.

The underwater camera model used on the axial camera con-



56

sideration is as follows, shown in Figure 25. Considering a pinhole
model camera watching a 3D point through n, perfectly flat windows,
i = 1, 2, ..., n, with an angle between the camera axis and the window
normal vector. Building the light path from the camera to the object
points, the first ray is v0 in the medium with refractive index µ0, this
ray reaches the first interface of refraction on the point q0 with a dis-
tance d0 from the pinhole center point. The ray is, then, refracted on
the plane of refraction that contains the vector v0 and the axis of refrac-
tion and the process is repeated for each layer. Thus, ray tracing the
light ray from the camera is possible knowing the axis z1,the distance
between each interface di and each refraction index µi. These are the
new calibration parameters, apart from the other camera parameters
to be considered on this model. All these parameters can be obtained
with only one underwater planar standard acquisition, for instance a
check board. When considering a camera housing, watching the un-
derwater environment through a flat window, some simplifications can
be made. For example the glass width can be measured with a mi-
crometer, which can have negligible errors or only one refraction can
be considered (between water and air) instead of the two that actually
happen (between water and glass and glass and air).

Figure 25: Multi-layer flat refractive geometry. (AGRAWAL et al., 2012)

A second possible way to consider the refraction during the mea-
surement is to approximate the underwater distortion as a 2D radial
distortion (KANG; WU; YANG, 2012). This technique can have good re-
sults in certain conditions where the refraction does not have a large
influence, such as a smaller than 30? FOV. However, this also requires



57

a focal length approximation, since each light ray converges to a dif-
ferent point, depending on the angle of incidence. In this method, a
set of 3D points is acquired on the measurement conditions, i.e. the
camera mounted inside the housing and underwater. This set of points
are used to calibrate the camera using the same methods used in-air.
The results will be very different from the in-air ones, the focal length
and the distortion coefficients will both be larger. This, then, requires
a set of underwater acquisitions on the measurement environment.

Both methods have advantages and disadvantages. Mainly that
the axial camera is more physically accurate, thus more flexible for
different system configurations, but it is harder to implement than the
SVP approximation. In this work the focus will then be the more phys-
ically accurate method, since the developed software will be applicable
for different configurations.



58



59

3 UNDERWATER DEVELOPED SENSOR

The built LTS and the algorithms developed for measurement
and calibration methods are described in this section. The designed
LTS is optimized for underwater measurements using both the algo-
rithms.

3.1 MECHANICAL DESIGN

The sensor was designed and was built by following the decisions
described here. First, some design requirements are listed aiming at the
oil and gas industry, then the system features to reach these goals are
chosen and implemented in the built sensor.

3.1.1 Design Requirements

The sensor is aimed at the oil and gas industries need to verify
underwater equipment. These procedures are essential to grant the
whole safety and maintenance of the system. One of the most usual
pieces of equipment are oil and gas ducts with a typical duct diameter
of 300 mm.

Thus, the main LTS requirements are:

? The sensor must be designed to measure one fifth of a 300 mm
diameter tube transversal section. This is a common procedure
in the oil and gas industry to estimate the equipment condition.

? The final measurement uncertainty must be close to tenths of
millimeters to gather the required object state.

? The distance from the measurement system to the surface of in-
terest must ensure the equipment safety. Here, the considered
distance is of at least 150 mm.

? The system must also be modular, to enable future changes in
the measurement volume by changing the system baseline and
triangulation angle.

The requirements are used to fulfill the equations used to model
the LTS and decisions made during designing. The procedures and
equations used during the process are described in the next section.



60

3.1.2 System Design

The system design consists of choosing the right system features
to satisfy the design requirements and build the system in accordance
with the safety rules. The LTS features to be chosen are triangulation
angle and baseline. The hardware to be chosen is a, image sensor, a
lens, a laser and laser line projection optics. Then, the housing must
be designed to seal and fix the sensor components for underwater use.
The final designed sensor is presented in Figure 26.

Figure 26: Designed sensor. Source: Author?s own work

The first tests were made using a laser triangulation mathemati-
cal model. The triangulation angle, camera and lens choices were made
based on this model. Using a water tank to simulate underwater mea-
surements the base line was later adjusted to fulfill the requirements.

Three requirements were initially considered: measuring one fifth
of a 300 mm diameter pipe transversal section, tenths of millimiters
uncertainty sensor and the required distance from the sensor to the
measured surface to allow the system safety. The uncertainty here is
approximated as a sensor resolution, i.e. the mm variation per pixel.
This is a reasonable initial approximation, because, even though the
final uncertainty is bigger than the sensor resolution, the laser peak is
detected with sub-pixel resolution.

The measuring of a 300 mm diameter tube in 5 divisions requires
a minimum of 176.3 mm along the laser line, as shown in Figure 27.

To estimate the Y measurement range, the equation 2.11 is used.
Then, the result is multiplied by the number of pixels in the corre-
sponding Y direction. Because the Y resolution changes within the
measurement volume, the stand-off was used.

The Equation 2.9 was used to estimate the LTS resolution on
the Z direction.



61

1
7
6
.3

m
m3

0
0
m
m

Figure 27: Inscribed pentagon side sized in a 300 mm diameter circle.
Source: Author?s own work

?Z =
B cos ?tfsx

(f tan ?t ? sxB cos ?t)2
?u (3.1)

The initial desired ?Z is 0.2 mm per sensor pixel considered the
image center. The first choices were the triangulation angle and the
image sensor.

Triangulation angles can vary from 15? up to 80?, an initial es-
timate is, the bigger the angle, the smaller the measurement volume
and consequently, better the resolution. Since the sensor is aimed at
mid range measurements, the initial considered triangulation angle was
35?.

The selected camera must have a global shutter, because the
whole laser line must be captured in the same moment. This way if
the sensor is moving during a measurement, for example, attached to
an ROV, the measurement results are not affected. The chosen camera
resolution is 1.3 mega pixels as an array of 1280 pixel columns and
1024 pixel lines and a pixel size of 5.3 ?m. This is also a camera with
medium resolution among the machine vision cameras.

The baseline and focus were left as variables. The considered mid
FOV lenses were 8 mm and 12.5 mm focal lengths. Another variable was
the camera position in respect to the laser line: the laser line along the
sensor line or the laser line along the sensor columns, which allow a
bigger measurement length along the Z or Y directions, respectively.

The last requirement is the distance from the sensor to prevent
accidents, the considered safety distance was of at least 150 mm from
the beginning of the measurement volume. This distance can be geo-
metrically approximated by drawing the current configuration. After
applying the equations, and the geometrical approximation the 8 mm



62

lens could not reach the required Y range within the safety distance, so
the 12.5 mm lens was chosen. The baseline was set, as a first approx-
imation to 240 mm with the laser line along the sensor columns. The
underwater influence was approximated to make the resolution 1.33
higher, i.e. a magnification of 1.33. After choosing the camera, the
lens and the laser, the free variables are the triangulation angle and
the baseline.

The FOV lens with the selected camera was obtained by posi-
tioning a graph paper at known distances from the lenses. The FOV
was used to simulate the final measurement volume in a 3D model soft-
ware, as shown in Figure 28. The desired Y direction distance along
the laser and the object distance to the sensor, were also optimized
during this procedure. The desired requirements were obtained with
an adjustment to the baseline.

Figure 28: LTS 3D model optimization with in-air values. Source:
Author?s own work

Subsequently, the camera and laser were positioned outside of a
water tank, shown in Figure 29, with an angled wall to reproduce the
final sensor positioning. In this set-up, the baseline was finally chosen.

Consequently, the system equipment and characteristics that
meet the desired requirements are shown in Tab. 1.

The next step is to build the sensor housing and positioning
structure. The sensor consists of the camera module, the laser module
and the positioning structure. The modules are positioned by two
aluminum sheets and four parallel pins, two in each module. These
aluminum sheets also have holes to mount possible systems for auxiliary



63

Figure 29: Angled wall water tank used in final evaluation. Source:
Author?s own work

Table 1: System parameters

Baseline 265 mm

Triangulation Angle 35?

Resolution 1.3 mega pixels

Pixel Size 5.5 µm

Orientation Laser along the sensor columns

Focal length 12.5 mm

movement. This module set-up was chosen since, after changing the
aluminum sheets, the modules can be positioned in different distances
and angles, enabling a measurement volume variation.

The camera and laser were fully positioned without theoretical
redundant alignments. Both the camera and the laser are positioned
with respect to the superior aluminum sheet that permits the specified
sensor baseline and triangulation angle.

The camera positioning and mounting is shown in Figure 30. The
camera is fixed by two ?U shapes?, but is only positioned by the superior
?U shape?, which has a smaller inner space. The positioning features
are: the plane behind the shape, one side of the ?U shapes?interior and
the superior plane inside the ?U?. The ?U? shapes are fixed into another
auxiliary element and positioned by three planes on this element. The



64

auxiliary element is then positioned on the lid by an internal cylinder,
a plane and a positioning pin. The lid is positioned on the aluminum
sheet support by a plane and two pins. The support is again positioned
by two pins and a plane on the aluminum sheet.

(a) (b) (c)

(d) (e) (f)

(g) (h)

Figure 30: Camera positioning.(a) The positioning ?U? shape.(b) The
camera fixed on the ?U? shapes. (c) The auxiliary fixing element po-
sitioning. (d) The camera mounted on the auxiliary element. (e) The
auxiliary positioning element with respect to the lid. (f) The camera
mounted on the lid. Source: Author?s own work

The laser axis must be perpendicular to the window and coin-
cident with the lid axis, this positioning is shown in Figure 31. The
laser is fixed by a claw mechanism that is also centered in the window
center. Then, the laser claw mechanism has an inside cylinder that fits



65

inside the front lid. Finally the laser lid is fixed to the aluminum sheet
in the same way as the camera lid.

Figure 31: Laser positioning. Source: Author?s own work

Besides the camera and laser positioning, the system is also fixed
by another aluminum sheet under the sensor and the back lids also have
additional holes for fastening the aluminum sheets.

The sensor, therefore, has four lids, two for each module. The
lids have O-ring grooves for both the window and the housing. Addi-
tionally, the camera lid has reserved open space for the lens, so the focus
and aperture can be adjusted while the camera is in the measurement
position.

The modules housing are pneumatic cylinders and their sizes
were selected by the camera and laser sizes. The camera has a diago-
nal length of 37.33 mm, models were created with each commercially
available cylinder and the 63 mm diameter was chosen for the camera
and the 50 mm for the laser.

The sensor sealing was made according to ISO 3601 (FLITNEY,
2011). The system uses two axial tandem O-rings in each window and
two more radial O-rings in each of the frontal and back lids in the laser
and camera modules. The aluminum tubes were measured in a CMM
so that the O-ring squeeze is in the designed range. The camera FOV
was used to optimize the spaces reserved for the O-rings.

The cables were connected to the inside of the housings by hoses



66

and sealed by hose barbs and O-rings on the flanges, as shown in Figure
32. Since the sensor is designed to dive to a maximum depth of 5 m,
the hose barb is enough to grant the sealing. The hose diameter is
31.75 mm in the camera module and 12.7 mm in the laser module. The
camera hose diameter is big enough to allow an USB 3.0 connector to
move freely. The laser hose diameter is enough to insert the power
supply cable.

Figure 32: Details of the back flanges. Source: Author?s own work

The windows were projected to resist a pressure differential of
1000 kPa aiming for the safety of the system.

Considering the window configurations shown in Figure 33.

Figure 33: Clamped and unclassified configurations.(HARRIS, 1999)

Where tw is the window thickness, Aw is the unsupported aper-
ture diameter and ?Pw is the pressure differential. The window thick-
ness tw must be greater than (HARRIS, 1999)

tw = 0.5Aw

[

Kwfs
?Pw
Sf

]1/2

(3.2)



67

Where fs is the safety factor (usually 4) and Sf is the fracture
strength. Examples of fracture strength values are found in Figure 34.

Figure 34: Window resistance values. (HARRIS, 1999)

The resulting thickness for the designed housing is 5.53 mm con-
sidering the camera module as the weaker window since it is the one
with the larger unsupported aperture. Hence, the mounted window
thickness is 6 mm, the closest available commercial thickness.

It is important to notice that the aluminum sheets are fixed to
the front lid of each module and the auxiliary fixing element is used
to fix the sheet to the lid, as shown in Figure 35. This way the sensor
calibration can be made in the same configuration where the measure-
ment will occur. Accordingly, adjustments, for example, in camera and
laser focus, can be made in measurement positioning.

Figure 35: Sensor fixing during calibration. Source: Author?s own work

The aluminum sheets also have auxiliary holes to mount the
system into a moving system. The holes are to fit in a ABB robot. The
sensor can be fixed from above or from behind, as shown in Figure 36.



68

Figure 36: Back and superior fixing holes for auxiliary moving systems.
Source: Author?s own work

The system hardware, shown in Figure 37, is composed of a
camera, a lens, a laser and line generator optics. The camera is a
Ximea MQ013MG-E2, as mentioned, it has a resolution of 1.3 mega
pixels and a pixel size of 5.3 ?m. The lens is a Fujinon HF12.5HA-1B,
which has a focal length of 12.5 mm and adjustable focus and aperture.
The laser is a mini structured light laser diode modules with 635 nm
wavelength, it uses line formation optics to project a line with an angle
of aperture of 45? and has power of 7 mW.

(a) Camera (b) Lens (c) Laser

Figure 37: Hardware used to build the LTS. (MQ013MG-E2, 2017;
HF12. . . , 2017; MINI. . . , 2017)

In Figure 38, the built LTS is shown.
The resulting ?s angle, to change the camera plane of focus to the

laser plane is 87.9?, thus the Scheimpflug condition was not considered.
The sensor speckle limit resolution considering the f number of

4, at the standoff of 250 mm and the focal length of 12.5 mm is 16 ?m.



69

Figure 38: Built LTS. (a) is the camera module and (b) is the laser
module. Source: Author?s own work



70

3.1.3 Measuring Bench

The LTS must be displaced to build a dense point cloud. The
sensor displacement and the new orientation must be known, allowing
the point clouds concatenation. In this case, the displacement system is
used both during calibration and measurement. The measuring bench
allows this displacement to be controlled with good alignment between
the elements.

The measuring bench is composed of a displacement system, a
hydraulic system and a mounting structure. The complete measuring
bench can be seen in Figure 39.

Figure 39: Complete measuring bench: displacement system (a), hy-
draulic system (b) and mounting structure (c). Source: Author?s own
work



71

In this work, the displacement system used to move the LTS is
a linear slide, shown in Figure 41. It has a length of 750 mm and it
is ball screw driven. The table is driven by the bipolar step motor
AK23/15F6FN1.8, the driver AKDMP164.2A and a 42 V DC power
source with 4 A peak current. The system is controlled by an Arduino
micro controller which communicates via serialization with a personal
computer. Apart from the slider control, the Arduino is also used along
with a transistor to control the laser.

Figure 40: The linear slide and the motor. Source: Author?s own work

The threaded rod has a lead of 5 mm and the motor has 400 steps
per revolution, which results in a displacement resolution of 0.0125 mm
per step. The driver allows motor micro steps, but this feature was not
used.

The hydraulic system has a measuring tank, a storage tank, a
water pump and the connecting pipes. During underwater measure-
ments, the measure tank is filled by the height difference. Then, for
in-air measurements, the water pump is turned on to drain out the wa-
ter from the measurement tank to the storage tank. The system also
has valves to allow a water change in the storage tank.

The mounting structure is made of aluminum profiles and it
fastens the displacement table, the LTS and the calibration standard on
the measuring tank. The LTS can be mounted facing downward (during
measurement) or horizontally (during calibration). More details of both
positions are presented in the evaluation section.



72

Figure 41: Mounting structure details. Source: Author?s own work

3.2 DEVELOPED ALGORITHMS

Algorithms for measurement and calibration were developed.
The calibration model considers one refraction between water and air
to estimate the distance between the interface of refraction and the
pinhole center. This distance, along with the camera calibration pa-
rameters, is used to ray trace the crossing between the laser peak ray
with the laser plane.

To perform the underwater calibration, the system must already
be calibrated in-air. The camera projection matrix, the distortion co-
efficients and the laser plane coefficients are, therefore, known.

First, the measurement procedure will be shown. This is a more
logical sequence because the calibration procedure uses a very similar
algorithm as the one used during measurement.

3.2.1 Measurement Algorithm

The measurement method considers a refraction, between air
and water to back trace the crossing point between the detected laser
peak and the laser plane. The following approximations where made :

? The camera is calibrated with the protective window, so the re-
fraction on the glass is not considered, being approximated as a



73

radial distortion.

? The camera axis is considered normal to the refractive window,
so that the axis of refraction is coincident with the camera axis.

? The laser plane is perpendicular to the protective window, there-
fore its refraction is not considered.

The influence of these considerations was also weighted during
system evaluation.

The following model, shown in Figure 42, was used. A camera
with pinhole center C and distance d from the interface of refraction
observes a scene. An arbitrary ray I from the pinhole center reaches
the interface of refraction at the point q, then it is refracted and trans-
mitted on the T direction . The crossing between the ray T and the
laser plane is the 3D point X.

Z

?it Water

Air

N

-N?

C

I

T

q

d

X

Figure 42: Measurement model. Source: Author?s own work

The back trace from the image laser peak to the crossing with the
laser plane is used to perform the measurement. During the ray tracing,
each ray from each image line detected peak is refracted separately.
The whole measurement procedure is shown in Figure 43. All the
measurements are made in the CCS.

Before starting the measurement, the system must have all in-
air parameters shown in Figure 43 estimated: distortion coefficients,
camera matrix, window distance, refraction index and laser plane coef-
ficients.

The first step is to acquire an image of the laser line projected
on the surface of interest. After the acquisition, the image is corrected



74

Acquires an im-
age of the laser line

Undistort the acquired image

Find the laser peak
for each image line

Distortion
Coefficients

Define vectors I
from laser peaks

Camera
Matrix

Find the points of intersec-
tion of the projected rays with

the interface of refraction

Window
Distance d

Ray refraction
Refraction

Index

Find the 3D point of intersection X of
the refracted ray with the laser plane

Laser Plane
Coefficients

Figure 43: Measurement procedure. Source: Author?s own work

from its distortion with the distortion coefficients. Then, the image is
processed to extract the image coordinate containing laser peak for each
image line. The first directional vector, v, which is also the incidence
vector I, is obtained from the laser peak pixel and the inverse of the
intrinsic parameters matrix K

K?1x = I (3.3)

Where x is the laser peak pixel coordinate and I is the refraction
incidence vector. After this, the point of intersection between this
vector and the refractive window is found. The refractive window is
considered a plane parallel to the image sensor, hence with normal, N,
pointing in the Z direction in CCS, i.e. with coordinates (0, 0, 1). The
distance from the pinhole center to the refractive window is used in the
interface of refraction plane equation. Point p

0
is, then, (0, 0, d) where

d is the distance from the pinhole center to the window of refraction



75

and the plane equation for a point p on the window of refraction is

p ? (0, 0, d) · N = 0 (3.4)

And the crossing between the line with direction I from the origin
and the plane of refraction is the point q

q =
d

I · N
I (3.5)

The directional vector I is refracted on the plane of refraction
and the transmitted ray T direction is given by the Eq. 2.18, presented
again below

T = ?itI + (?it(N · ?I) ?
?

(1 + ?2it((N · ?I)2 ? 1))N (3.6)

The refracted ray has the equation

pt = kT + q (3.7)

Where k is a scalar in IR.
The final step is to compute the crossing between the refracted

ray equation and the laser plane, which is a plane with coefficients A,
B, C, D.

Then, its normal direction vector is Nl = (A, B, C) and one
point on the plane is P0l = (0, 0, ?D/C) which results in the plane
equation for a general laser plane point Pl

(Pl ? P0l) · Nl = 0 (3.8)

And the crossing between the laser plane and the transmitted
ray T is

X =
(P0l ? q) · Nl

T · Nl
T + q (3.9)

Resulting in the 3D point X. The whole process is repeated for
each image line forming the 3D point cloud for this sensor position.
The point cloud is then transformed to the OCS, where the X vector
is normal to the laser plane, to make the later concatenation of point
clouds easier.

After this, the sensor is moved in the direction normal to the laser
plane, which is the direction ± X in OCS, with a known displacement
value. A new point cloud is obtained and, after the transformation to



76

OCS, the X coordinate is added to the displacement value, accomplish-
ing the concatenation. The results from each acquisition are united,
making the final three-dimensional point cloud.

Most of the parameters used during the measurements are ob-
tained during camera calibration and laser calibration. The refraction
index can be estimated with refractometers or some previous knowl-
edge. So, the remaining window distance is the aim during the new
developed calibration process.

3.2.2 Refraction Calibration Algorithm

The main idea of the refractive calibration algorithm is to mea-
sure some known underwater feature to optimize the window distance
parameter used during measurement. Then, the proposed method con-
sists, first, of a complete in-air calibration, i.e. intrinsic and extrinsic
camera parameters, distortion coefficients and laser plane coefficients.
After this calibration, some underwater acquisitions are taken from
a standard with a known characteristic. The standard must have a
feature possible to evaluate with only one line along the object, for
example, here, the height between steps of a standard. The result of
one acquisition of this object is shown in Figure 44. This underwater
acquisition is used to estimate the distance from the pinhole center to
the window of refraction, the distance d.

Figure 44: Resulting image from the step standard used during window
distance calibration. Source: Author?s own work

The measured 3D point depends on the refraction interface dis-



77

tance to the pinhole center and has an influence in the final result, as
shown in Figure 45. However, this is a distance dependent on the cam-
era and lens configuration, manufacturing tolerances and mechanical
design, which is not always easy to estimate.

?it

Air
Water

C

I

T

d1

X

?it

Air
Water

C

I

T

d2

X

Figure 45: 3D point result for different window distances d. Source:
Author?s own work

The main objective of the proposed underwater calibration method
is to estimate the window distance that minimizes the measurement er-
ror. The whole calibration procedure is shown in Figure 46.

In-air Camera and
Laser Calibration

Underwater Standard Acquisition

Standard measurements
with window distances d

Window dis-
tances d to test

Selection of the window
distance d with minimized error

Figure 46: Calibration procedure. Source: Author?s own work



78

After the in-air system calibration, some acquisitions of a stan-
dard are made underwater. This standard must allow the measurement
of some feature with only one laser line. In the step case, it can have
its height estimated. The standard must have the evaluated feature
measured with a negligible uncertainty compared with the LTS uncer-
tainty.

The underwater acquisition of the standard is used to repeat the
whole measuring algorithm for a set of window distances to test. The
result is a point cloud for each tested window distance with one acqui-
sition. After this, the point cloud of each tested window is separately
evaluated. In the step case, a line is adjusted in one of the steps and
the mean distance from the points on the other step to the adjusted
line is the measured height for this window distance. The calibration
results is the window?s distance d that minimized the evaluated error
and is used in the measurement model.



79

4 SYSTEM EVALUATION

The evaluation was made using both the developed method and
the polynomial adjustment, the latter used as a reference. All the re-
sults are compared with measurements in-air and underwater. The
polynomial adjustment requires all the acquisitions to be underwater
and the proposed method requires an in-air calibration and some un-
derwater images of a standard in any non-previously known position.

To evaluate the system, two fixed calibrated spheres, a plane, a
dummy head, welding beads and a 300 mm diameter pipe were mea-
sured. The spheres were calibrated with a CMM; the dummy head and
the welding beads were measured with a commercial fringe projection
system.

The camera and laser calibration were performed with a circle
pattern standard. Additionally, to estimate the distance between the
pinhole center and the refraction layer, a step standard was used, min-
imizing the measured height error.

The system mounting and alignments during calibration and ac-
quisitions are also described in this section. They are aimed to minimize
the influence of first order errors.

The calibration results using one or multiple underwater step
images to estimate distance d were compared and the considerations of
one or two refractions were evaluated. In the two refraction case the
system was calibrated without the window and two refractions were
considered during measurement.

After each calibration, in-air and underwater, the sensor is fixed
in a linear displacement table to acquire images of all the described
objects, then the images are processed using either the polynomial ad-
justment method or the proposed method.

4.1 EVALUATION OBJECTS

After all the calibrations, a few objects were measured to evalu-
ate the system errors. They were measured both underwater and in-air
using the polynomial method and the proposed method. Some objects
were used to evaluate the LTS errors inside the various measurement
volume portions, since the resolution varies along the volume, and other
objects are presented as measurement examples.

The objects used to evaluate the method and the system, shown



80

Figure 47: Evaluation objects: two fixed spheres, welding beads, a
plane and a dummy head. Source: Author?s own work

in Figure 47, are: two fixed spheres, welding beads, a glass plane, a
dummy head and a 300 mm diameter PVC pipe. All the objects, except
for the PVC pipe, were painted white to provide a diffuse surface.

The sphere standard is the main evaluation object, following
the VDI/VDE 2634 (OPTISCHE. . . , 2000), the guidelines for optical
3D measuring systems. It consists of two fixed spheres with calibrated
diameters and distance between its centers. The spheres were calibrated
in a CMM. The sphere 1 has a diameter of 50.12 ± 0.01 mm and the
sphere 2 has a diameter of 50.14 ± 0.01 mm. The distance between
its centers is 99.18 ± 0.01 mm. The main parameters evaluated in
the spheres with the LTS are the sphere spacing error (SSE) and the
probing error (PE). The SSE is the difference between the measured
distance between the spheres centers by the sensor and the calibrated
distance. The range of distances, i.e. the peak and valley difference, of
the measured 3D point to the fitted spheres is the PE. The standard
deviation (STD) of these distances were also evaluated.



81

The spheres images were acquired in six positions along the mea-
surement volume. Two acquisitions closer to the system, two on the
stand-off and two on the end of the measurement volume. In each po-
sition, 38 images were taken, each moving the sensor 1 mm in the X
direction in OCS.

The plane images were also taken closer to the system, on the
stand-off and farther from the system. In each position, the plane was
positioned both perpendicular to the laser plane and rotated around
the Y axis at approximately 30?. Afterwards, 150 images were taken
in each configuration. After each plane point cloud construction the
range error (RE) is estimated. The RE is the range of distances, i.e.
the peak and valley difference, of the measured 3D point to the best
fitted plane. The standard deviation (STD) of these distances were also
evaluated.

As measurement examples, a dummy head, welding bead and
a 300 mm diameter PVC pipe were also measured with the presented
techniques. The dummy head presents challenges for a LTS as the nose
generates occlusions and discontinuities, which pose an obstacle to the
laser peak search. The welding bead measurement aims to evaluate
the capability of the sensor to measure smaller details. The 300 mm
diameter pipe is the main sensor application objective as described in
the mechanical design section. One set of acquisitions for each object
on the stand-off was made.

4.2 CALIBRATION STANDARDS

The calibration standards are the objects used to calibrate the
parameters needed during measurement. Two calibration standards
were used for this work. One to calibrate the camera and the laser, a
plane with a circle pattern, and the other to calibrate the refraction
window distance, a step attached to a mirror.

To obtain the 3D points in the OCS used in the calibrations, a
calibration standard, shown in Figure 48 is employed. The calibration
standard consists of a glass plane with circular patterns. The OCS
during calibration is defined by the circles and the table movement
direction. Three circles at the center are black and define the origin
and the X and Y coordinate directions. The Z coordinate is the vector
normal to both directions. The X and Y variations in OCS are obtained
from the distances between the circle centers, which were measured with
a measuring microscope and are 9.375 mm in X direction and 9.372



82

mm in the Y direction. The Z coordinate was measured by known
displacements of the linear slider.

Figure 48: Calibration Standard. Source: Author?s own work

The step, shown in Figure 49, is formed by glued steel parallelo-
grams on a mirror. The distance between steps was measured in mul-
tiple positions with a microscope and a linear stage and has a height
of 23.17 ± 0.02. The mirror is important to minimize the influence of a
rotation around the X axis during the acquisition, which introduces a
first order error in the step measurement.

Figure 49: Step Standard. Source: Author?s own work



83

While the step standard can be aligned using only the mirror,
the circular pattern must be moved by the slider and properly aligned
with respect to the LTS. This requires some calibration layouts, as well
as a layout to adjust the lens and the laser.

4.3 CALIBRATION LAYOUT

The calibration layouts are the methods to mount and to align
the planar standard and the LTS. Two calibration layouts were used:
in the first, shown in Figure 50, the laser and camera are adjusted and
in the second, shown in Figure 51, the planar standard images used
during calibration are acquired.

X

Y

Figure 50: Calibration layout used to adjust the laser and the camera,
also showing the OCS. Source: Author?s own work

In the first layout, the laser focus and the camera aperture and
focus are adjusted, since the sensor is without the housing. They are
both adjusted with the standard at the standoff distance. The first
step is to focus the laser, after this, both the camera focus and the
aperture are adjusted. The aperture is set to fully open and the focus
is adjusted, then the standard is moved to the end of the measurement
volume and the aperture is closed up until the image is in focus. This
allows the speckle to be as small as possible while the laser line is in



84

(a) Slide alignment

(b) LTS alignment

Figure 51: Calibration layout used to acquire the calibration images.
First the table is aligned (a), then the LTS is aligned (b), both with a
spirit level. Source: Author?s own work



85

focus. Next, the laser is positioned perpendicularly to the top sensor
fixing aluminum sheet, this element will be used as reference to fix the
LTS later during measurement. Hence, the LTS is aligned with the
linear slide movement direction.

In the second calibration layout, the calibration standard is fixed
on the measuring tank mounting structure and the LTS is moved by
the linear slide. The aim of this positioning is to minimize the error
from the misalignment between the table movement direction and the
Z coordinate from the LTS OCS.

The calibration standard is fixed on the aluminum structure with
thick acrylic adhesive double sided tape and a square is used to align
the standard with the profile. Then, the structure with the standard is
fixed on the linear slider mounting structure.

A spirit level is used to align the laser with the table displacement
during calibration.

The OCS used during calibration is based on the calibration
standard. This coordinate system does not have the YZ plane on the
laser plane. Later, during measurement, the OCS will be changed so
that the X coordinate is mathematically perpendicular to the laser
plane, i.e. the table displacement direction, thus minimizing the error
from this misalignment. Although, even with these considerations, this
misalignment will still be a source of uncertainty for the measurement
result.

The calibration standard is moved 10 mm between acquisitions
and there is is a wait time of 1 second, both underwater and in-air. The
standard covered a distance of 300 mm in-air and 220 mm underwater
in the Z direction.

4.4 ACQUISITION LAYOUT

In the acquisition layout, shown in Figure 52, all images used
later during the measurement were acquired. Here, the LTS is moved
by the linear slide and the measured object is fixed.

The OCS is defined so that the X direction is perpendicular to
the laser plane. The LTS is aligned based on the linear slider with a
spirit level, so the laser plane is perpendicular to the direction of move-
ment. This results in a displacement vector close to the X direction,
thus making the concatenation easier and more accurate.

During the measurements, the LTS is moved 1 mm between im-
age acquisitions. To avoid error due to vibrations, there is a one second



86

Figure 52: Acquisition layout. Source: Author?s own work

wait after the movement. Then, the images are processed using either
the polynomial adjustment or plane adjustment calibrations. The same
positioning was used in all the acquisitions.

4.5 IMAGES PROCESSING

The image processing is an essential step during a LTS measure-
ment and calibration. All the acquired images are processed to better
find both the circle centers of the calibration standard and the laser
peaks. Even though the image is separated in pixels, the aim of the
image processing is to reach the sub-pixel level through image process-
ing operations and interpolations.

The image processing to estimate the circles centers is shown
in Figure 53. The following sequence of processing operations is ap-
plied: median filter with a size of 5 x 5 and 12th order, threshold with
background correction, circle hole filling, elimination of particles on the
border , removal of small particles and estimation of each ellipse center
by the function IMAQ Fit Ellipse 2 in LabVIEW. The ellipses?center
coordinates are used to find the circles with a black center on the origi-
nal image and the coordinate system X and Y direction is built. Finally,
the ellipse centers are given 3D coordinates using the real distance be-
tween centers in mm.

The laser peaks are estimated after a threshold with background
correction and a 5 x 5 size low pass filter. Then, quadratic equations



87

Figure 53: First, the original acquired image, then the processing result
and the labels. Source: Author?s own work

Figure 54: Laser image processing to peak search. First, the original
image, then, the filter and the laser peak position (not shown with
subpixel resolution). Source: Author?s own work

are adjusted every few columns along the line being evaluated and the
peaks are estimated. The process is shown in Figure 54.

The processing of circle centers is used as references to calibrate
the camera and the laser. The processing of the laser peaks is used dur-
ing both calibration and measurement. The detection of these features
is an important source of uncertainty.

4.6 ACQUIRED IMAGES

The image acquisition process is a great source of uncertainty.
Since the sensor must be displaced to create a dense point cloud, the



88

acquisition direction and the distance displaced by the slider are some
of these sources. Some acquisition images are presented along with the
sensor movement direction. All the presented images are still distorted.

The spheres were positioned in three different distances from the
sensor, as shown in Figure 55, in-air and underwater.

(a) (b) (c)

(d) (e) (f)

Figure 55: Sphere acquisitions.(a-c) images shown in-air. (d-f) images
underwater. Respectively close to the system, on the stand off and
farther from the system. Source: Author?s own work

The plane, the dummy head, the welding beads and the PVC
tube image examples are shown in Figure 56. The main difference
between in-air and underwater images is the measurement volume. For
example, the laser line is completely captured during underwater PVC
tube measurement, but in-air, the line does not appear in all image
lines.



89

The sensor movement direction for the sphere, the dummy head
and the welding beads are presented in Figure 57. These are examples
of meshes created by the LTS. The sensor movement direction aims to
minimize the linear slider influence on the measurement result.



90

(a) (b)

(c) (d)

(e) (f)

Figure 56: (a) (c) and (e) are in-air images. (b) (d) and (f) are under-
water images. Respectively from the dummy head, the welding beads
and the PVC tube. Source: Author?s own work



91

(a) Spheres (b) Dummy head (c) Welding beads

Figure 57: Sensor movement direction during acquisitions. Source:
Author?s own work



92

4.7 POLYNOMIAL CALIBRATION

As a comparison with the proposed method, a modeless calibra-
tion was also adopted. This is considered a reference method, because
all the considerations made in the proposed method are absorbed dur-
ing the polynomial adjustment.

The calibration with the polynomial equations were made in-
air and underwater. For each line, two sixth-degree polynomials were
fitted: one relating the laser peak column v with the Z coordinate Z(v)
and another relating the Z coordinate with the Y coordinate Y(Z).
After the laser peak detection, the detected column v is applied to the
Z(v) equation and the resulting Z coordinate is applied to the Y(Z)
equation. Resulting in the Z and Y coordinates for the detected peak.
The process is repeated for each line.

These polynomial are, then, correlated with the image peaks
detected from the acquisitions. The Z(v) polynomial equations have a
mean residual of 0.06 mm in-air and underwater. The Y(Z) polynomial
equations have a negligible mean residual error.

Examples of the adjusted polynomial equations are plotted in
Figure 58 and Figure 59. The plotted polynomial equation are from one
of the first image lines (top), from the image center (middle) and from
one of last lines of the image (bottom). The distinct slope is noticeable
when comparing the Z(v) polynomial equations in-air and underwater,
because the underwater resolution is higher than in-air. The Y(Z)
polynomial equations show the camera FOV in the Y direction as noted
in the different equations for the top, middle and bottom image lines.

200 400 600 800

?150

?100

?50

50

100

150

v(pixel)

Z
(m

m
)

Z(v) in Air

Bottom
Middle
Top

200 400 600 800

?150

?100

?50

50

100

150

v(pixel)

Z
(m

m
)

Z(v) Underwater

Bottom
Middle
Top

Figure 58: Z(v) polynomials examples from one of the top, middle and
bottom image lines, in-air and underwater. Source: Author?s own work



93

?80 ?30 20 70

?150

?100

?50

50

100

Z(mm)

Y
(m

m
)

Y(Z) in Air

Top
Middle
Bottom

?80 ?30 20 70

?150

?100

?50

50

100

Z(mm)

Y
(m

m
)

Y(Z) Underwater

Top
Middle
Bottom

Figure 59: Y(Z) polynomials examples from one of the top, middle and
bottom image lines, in-air and underwater. Source: Author?s own work

4.7.1 Polynomial Adjustment Results

Polynomial equations were adjusted in-air and underwater and
the results for each measured sphere standard and plane position are
shown in Table 2 and in Table 3, respectively.

Table 2: Underwater sphere measurement errors for the polynomial
adjustment. The worst measurement for each parameter is highlighted

PE (mm) STD (mm) SSE (mm)

in-air Underwater in-air Underwater in-air Underwater

Closer 1 0.58 1.08 0.10 0.17 0.17 0.06

Closer 2 0.47 0.97 0.09 0.17 0.33 0.15

Stand-off 1 0.57 0.86 0.10 0.14 0.28 0.02

Stand-off 2 0.49 0.69 0.08 0.13 0.32 0.11

Farther 1 0.50 0.66 0.09 0.11 0.20 0.25

Farther 2 0.48 0.65 0.08 0.11 0.39 0.10

The results in Table 2 show that the PE is bigger underwater and
the SSE is bigger in-air. The underwater PE is worse in more distant
acquisitions, one of the possible causes for this is the light absorption,



94

which intensifies the farther the object is. The SSE is expected to be
bigger in-air, since the LTS has a better resolution underwater.

Table 3: in-air and underwater plane measurement errors for the poly-
nomial adjustment.

RE (mm) STD (mm)

In-air Underwater In-air Underwater

Closer 0.36 0.55 0.05 0.07

Closer Rotated 0.80 0.75 0.08 0.12

Standoff 0.34 0.62 0.06 0.10

Standoff Rotated 0.49 0.41 0.09 0.06

Farther 0.33 0.62 0.05 0.10

Farther Rotated 0.36 0.51 0.06 0.08

The measurement results using the polynomial method for the
dummy head, welding beads and PVC tube are presented in Figures
60, 61 and 62. All the color map scales are presented with two standard
deviations.

Figure 60: Dummy head measurements in-air and underwater using
the polynomial adjustment. Source: Author?s own work



95

Figure 61: Welding bead measurements in-air and underwater using
the polynomial adjustment. Source: Author?s own work

(a) In Air (b) Underwater

Figure 62: 300 mm diameter pipe measurements in-air and underwater
with the polynomial method. Source: Author?s own work

The dummy head and the welding beads have very similar color
maps in-air and underwater. This shows the sensor?s capability to
measure more complex forms. These results are taken as a reference



96

for this LTS configuration.

4.8 PROPOSED CALIBRATION

The proposed calibration has two steps: one in-air sensor cali-
bration and some underwater acquisitions. First, the intrinsic camera
calibration parameters are obtained and, after, the window of refraction
distance to the pinhole center is estimated.

In the first step, the same pattern used in the polynomial cali-
bration is used for the in-air sensor calibration and the 3D points were
obtained in the same way as in the polynomial calibration. First, the
parameters of the camera are calibrated by direct optimization. Then,
for each planar pattern position, an image with the laser turned on
is also captured. For each laser peak in image coordinates, a line is
projected using the camera matrix and its intersection with the planar
standard at a known Z position is computed. The procedure is repeated
for each standard position and a 3D point cloud that defines the laser
plane is acquired.

After the in-air calibration, a step standard was used to calibrate
the refractive window distance to the pinhole center. To validate this
step, the nominal distance from the window to the pinhole center is
approximated by combining the camera calibrated focal length, i.e., the
distance from the camera imaging sensor to the lens focal point, and
the distance between the sensor and the window from the mechanical
design. The distance from the CMOS to the inner side window is
75.8 mm. According to the calibration, the focal length is 13.0 mm.
Subtracting the mechanical distance by the focal length results in a
refractive window distance of 62,8 mm.

4.8.1 Number of Underwater Images to Calibrate d

The estimated window distance variation with one and multiple
images were also evaluated. Up to 9 images were used for comparison:
three images from each position inside the measurement volume.

The results were compared using the spheres SSE parameter
mean for all the acquired sphere positions. The step images were ac-
quired closer to the sensor, at the stand-off and farther from the sensor.
The resulting window distance when combining only the images from
one region were also compared. The results are presented in Table 4.



97

Table 4: Relation between the number of step standard images used
during calibration and the refractive window distance

D (mm) SSE (mm) Mean (mm) SSE (mm)

46.3 0.09

Closer 42.6 0.23 46.2 0.09

46.2 0.09

47.1 0.12

Stand-off 43.4 0.17 45.6 0.09

45.6 0.09

45.1 0.10

Farther 47.8 0.16 47.8 0.16

47.9 0.16

The result when using all the images is a window distance of
46.3 mm, this is a 16.5 mm difference from the mechanical project
estimation. The regions closer to the sensor and at the standoff have
the best estimation with the least number of images and three images
from these areas were enough to estimate the optimal distance.

4.8.2 Refraction between Glass and Air

Although only one refraction is considered in the developed method,
two refractions happen during acquisitions: between the air inside the
camera housing and the window glass and between the glass and the
water outside of the housing. One refraction approximation allows the
system to be calibrated with the glass, bringing the calibration condi-
tion closer to the measurement condition.

To measure the influence of this consideration, the spheres were
also measured considering two refractions. To consider this additional
refraction, the system was calibrated without the glass and the window
thickness was measured. The window thickness was measured with a
micrometer in multiple positions and is 5.93±0.02 mm. The glass index
of refraction was considered 1.52.(III; VASCOTT, 2005)

The same nine step acquisitions used during the calibration with



98

refraction were used to calibrate the glass window distance, resulting
in a new distance d of 40.7 mm.

After the calibrations, the spheres were measured and the results
comparison are on Table 5.

Table 5: Measurement errors considering one or two refractions during
spheres evaluation.

One Refraction Two Refractions

PE (mm) SSE (mm) PE (mm) SSE (mm)

Closer 1 0.07 0.11 0.07 0.05

Closer 2 0.08 0.01 0.08 0.05

Stand-off 1 0.04 0.04 0.04 0.12

Stand-off 2 0.06 0.02 0.07 0.04

Farther 1 0.06 0.19 0.06 0.29

Farther 2 0.10 0.16 0.10 0.26

Mean 0.07 0.09 0.07 0.14

The mean resulting SSE for the one refraction consideration is
36% smaller than the two refraction consideration. A probable cause
is the addition of new variables that were not optimized during cali-
bration: the window thickness and the glass index of refraction. These
may have been absorbed during the calibration in-air with the window.

4.8.3 Proposed Method Results

The final window distance after a calibration using all nine step
standard images is 46.3 mm. The sphere and plane measurement errors
are presented respectively in Table 6 and Table 7.

The results in Table 6 show a slightly worse PE underwater and
a worse SSE in-air. These results are similar to the polynomial adjust-
ment results.

The measurement results using the proposed method for the
dummy head, welding beads and PVC tube are presented in Figures
63, 64 and 65. The color maps are scaled to two standard deviations.

Similar to the polynomial results the color map of the dummy



99

Table 6: Underwater sphere measurement errors for the proposed
method. The worst measurement for each parameter is highlighted

PE (mm) STD (mm) SSE (mm)

In-air Underwater In-air Underwater In-air Underwater

Closer 1 0.48 0.69 0.09 0.12 0.29 0.08

Closer 2 0.47 0.66 0.08 0.14 0.34 0.06

Stand-off 1 0.51 0.51 0.08 0.12 0.35 0.09

Stand-off 2 0.44 0.51 0.08 0.11 0.45 0.02

Farther 1 0.47 0.46 0.08 0.10 0.35 0.23

Farther 2 0.36 0.48 0.07 0.10 0.44 0.18

Table 7: Underwater plane measurement errors for the proposed
method.

RE (mm) STD (mm)

In-air Underwater In-air Underwater

Closer 0.47 0.62 0.09 0.10

Closer Rotated 0.52 0.59 0.08 0.10

Standoff 0.37 0.50 0.07 0.09

Standoff Rotated 0.62 0.45 0.12 0.08

Farther 0.33 0.50 0.06 0.09

Farther Rotated 0.42 0.47 0.08 0.08

head and the welding beads are very related.



100

(a) In-air (b) Underwater

Figure 63: Dummy head measurements in-air (a) and underwater (b)
with the proposed method. Source: Author?s own work

Figure 64: Welding bead measurements in-air and underwater using
the proposed method. Source: Author?s own work



101

(a) In-air (b) Underwater

Figure 65: 300 mm diameter pipe measurements in-air (a) and under-
water (b) with the proposed method. Source: Author?s own work



102

4.8.4 Results Comparison

The full comparison is presented in Figure 66. The SSE and
PE results are from the spheres. The values of the plane, dummy
head, welding beads (WB) and the tube PE are one standard deviation
for the measured object with the indicated method in the indicated
environment.

0 0.2 0.4 0.6 0.8 1

SSE

Spheres PE

Spheres STD

Plane RE

Plane STD

Dummy

WB

PVC

mm

Results Comparison

Underwater Proposed
Underwater Polynomial

In Air Proposed
In Air Polynomial

Figure 66: Comparison of all the measurement results. Source: Au-
thor?s own work

The highest errors are presented in-air both with the polynomial
and proposed methods while evaluating the SSE, however when com-
paring the probing error for all the objects, the in-air measurements
had better results. Since in-air and underwater measurements have
different measurement volumes, the errors must be compared with the



103

volume variation. In-air, the measurement length in the Z direction is
330 mm and underwater is 220 mm. The percent error related to the
measurement volume is presented in Table 8, which is the division of
the error by respective measurement length in the Z direction.

Table 8: Spheres spacing percent error

In air Underwater

Polynomial Proposed Polynomial Proposed

SSE 0.12% 0.14% 0.12% 0.08%

Nevertheless, the uncertainty is more than two times higher in-
air than underwater for the proposed method. This is hardly an ac-
quisition error, since the probing error is lower in-air. One possible
influence for this result for the proposed method is the underwater
step acquisition and subsequent calibration, which adds another vari-
able to minimize the errors. The residual errors from the camera and
laser calibration are some of the strongest influences for these results.

4.8.5 Uncertainty Evaluation for the Proposed Method Un-

derwater

To further evaluate the proposed method underwater, the sources
of uncertainty contributions to the error were weighted. In the proposed
method, the temperature affects the water index of refraction and the
distance between the spheres? center. The sphere standard also has
a calibration uncertainty and the developed system has a resolution
between object displacement and pixel displacement. Finally, since six
measurements were made, the repeatability of these measurements were
evaluated.

? U? The temperature during measurements was considered to be
25 ± 5?C. This range causes an index of refraction variation of
1.3315±0.0005 (BASHKATOV; GENINA, 2003). This causes a vari-
ation of 0.06 mm in the distance between center measurements
at the stand-off. This source is considered to have a uniform
distribution.

? Ute This temperature range also causes a variation of ±0.011 mm
in the standard dimension due to thermal expansion. This source



104

is considered to have a uniform distribution.

? Res The resolution of a pixel in the Z direction at the stand-off
distance is 0.22 mm. In the Z direction, the sensor has a subpixel
peak search, therefore the effective resolution is considered to be
one tenth of the pixel resolution.

? Ustd The spheres were calibrated in a CMM, which has an un-
certainty of ±0.004mm for a 98.28 mm distance.

? SSE The repeatability was considered to be the standard devia-
tion of the 6 measurements. The correction is the mean distance
error.

All the results are shown in Table 9. C is the correction, U is the
uncertainty, DoF is the degrees of freedom and total % in the source
weight in the final value. The table was adjusted to 20?C since the
measurements took place at the mean temperature of 25?C.

Table 9: Proposed method underwater uncertainty evaluation

Sources of Uncertainty mm

Symbol Uncertainty (±) C Distr. u ? Total %

U? Index of refraction(?) 0.030 0.060 Uni. 0.017 ? 0.9%

Ute Standard Expansion 0.010 0.011 Uni. 0.006 ? 0.1%

Res Resolution 0.011 - Uni. 0.006 ? 0.1%

Ustd Standard Calibration 0.002 - Norm. 0.002 ? -

SSE Sphere Spacing Error 0.110 0.040 Norm. 0.110 5 37.6%

PE Probing Error 0.140 - Norm. 0.140 ? 61.2%

The combination of these sources results in 35 degrees of freedom.
The expanded uncertainty is ± 0.37 mm and the combined correction
is +0.11 mm resulting in a maximum error of ± 0.48 mm.

The cylindricity of the PVC tube and the real diameter were
not evaluated with another system. Therefore, the obtained diameters
cannot be compared with a calibrated value.

Overall, the proposed method and the polynomial adjustment
method have very close underwater measurement uncertainties, but the
proposed method has the advantage of fewer underwater acquisitions,
besides being more physically accurate.



105

4.8.6 Y Direction Measurement Length

The minimum measurement length in the Y direction which al-
lows five measurements to cover a 300 mm diameter tube is 176.3 mm.
To confirm this designed LTS capability, the 300 mm diameter PVC
tube was measured at the stand-off distance. The result is shown in
Figure 67, which shows a length of 185.27 mm.

Figure 67: Y direction measurement volume. Source: Author?s own
work



106



107

5 CONCLUSIONS

In this work, a laser triangulation sensor (LTS) for underwater
measurements was built aiming to fulfill the oil and gas industry?s need
to measure underwater equipment. The main objective was to measure
a 300 mm diameter pipe with an uncertainty of half millimeter. The
sensor was then built and two algorithms for calibration and measure-
ment were developed and evaluated by multiple object measurements.

The sensor characteristics are: a lens focal length of 12.5 mm,
265 mm baseline, 35? triangulation angle, the measurement length in
the Z direction starts at 200 mm from the sensor and goes up to 420 mm
and at the stand-off, the laser line measures 184 mm. This permits the
measurement of one fifth of a 300 mm diameter tube transversal section
and a safety distance from the object of interest. It is also modular,
allowing a measurement volume change by replacing the positioning
sheets.

Two methods for calibration and measurement with LTS un-
derwater were compared: the polynomial equation adjustment and a
proposed two step method.

The polynomial adjustment is based on a correlation between
the detected laser peak with the real 3D point. This requires a full un-
derwater calibration with know standard displacements, since multiple
non-planar 3D points are required.

The second, proposed method requires an in-air calibration and
some underwater acquisitions of a step pattern. These underwater ac-
quisitions are used to calibrate the window of refraction distance from
the camera pinhole center, thus allowing the ray tracing from the cam-
era to the laser plane, resulting in a measured 3D point.

The methods were evaluated by measuring multiple objects re-
sulting in both having very similar underwater results. A standard
with two spheres with calibrated distance between centers was the main
evaluated object. After six acquisitions, both methods had a mean un-
derwater distance between their centers error of 0.08 mm along the
measurement and the proposed method had a maximum error of 0.48
mm. Apart from the spheres, multiple objects with varying shapes were
measured having very similar results for both in air and underwater.

When comparing the in-air and underwater results, both meth-
ods also had similar results: better probing errors in-air, but better
sphere spacing errors underwater. One cause for this effect is the mea-
surement volume variation, since the measurement volume is smaller



108

underwater, leading to a higher resolution. Another probable cause for
this result considering the proposed method is the additional images
used during underwater calibration.

Ultimately, the designed sensor and the algorithms have proven
to be suitable for the designed application. The proposed method accu-
rately performs the ray tracing being applicable in other configurations.

5.1 FUTURE WORKS

Both the system and algorithms still have room for improvement.
Considering the proposed method, more parameters can be cal-

ibrated in situ within the underwater acquisition, such as the water
index of refraction, lowering the sources of uncertainties from this esti-
mation.

The step standard itself can be improved, because the built qual-
ity influences the refraction window distance estimation. A standard
with a small parallelism error between the two steps may result in a
more reliable estimation and may not need several images to grant the
optimum distance.

The sensor can be mounted to a displacement system such as an
ROV and algorithms of integration between the ROV locating system
can be developed resulting in an out-of-laboratory measurement.

Additionally, since the sensor is modular, new configurations of
the baseline, lens, camera, laser and triangulation angle can be tested
for further evaluations.



109

REFERENCES

AGRAWAL, A.; RAMALINGAM, S.; TAGUCHI, Y.; CHARI, V. A
theory of multi-layer flat refractive geometry. In: Computer Vision
and Pattern Recognition (CVPR), 2012 IEEE Conference on. [S.l.:
s.n.], 2012. p. 3346–3353. ISSN 1063-6919.

BASHKATOV, A. N.; GENINA, E. A. Water refractive index in
dependence on temperature and wavelength: a simple approximation.
In: INTERNATIONAL SOCIETY FOR OPTICS AND PHOTONICS.
Saratov Fall Meeting 2002: Optical Technologies in Biophysics and
Medicine IV. [S.l.], 2003. p. 393–395.

BESL, P. J. Active, optical range imaging sensors. Machine vision and
applications, Springer, v. 1, n. 2, p. 127–152, 1988.

BIANCO, G.; GALLO, A.; BRUNO, F.; MUZZUPAPPA, M.
A comparative analysis between active and passive techniques
for underwater 3d reconstruction of close-range objects. Sensors,
Multidisciplinary Digital Publishing Institute, v. 13, n. 8, p.
11007–11031, 2013.

BLUEVIEW BV5000 Harbor Scan. 2017. https://www.youtube.
com/watch?v=MWL3mBOUk-I. Accessed: 2017-04-05.

BLUVIEW 3D Multibeam Scanning Sonar. 2017. http://www.
blueview.com/products/3d-multibeam-scanning-sonar/3/.
Accessed: 2017-04-05.

BROWN, D. C. Close-range camera calibration. PHOTOGRAMMET-
RIC ENGINEERING, v. 37, n. 8, p. 855–866, 1971.

BRUNO, F.; BIANCO, G.; MUZZUPAPPA, M.; BARONE, S.;
RAZIONALE, A. Experimentation of structured light and stereo vision
for underwater 3d reconstruction. ISPRS Journal of Photogrammetry
and Remote Sensing, Elsevier, v. 66, n. 4, p. 508–518, 2011.

BUSCHINELLI, P. D.; MATOS, G.; PINTO, T.; ALBERTAZZI, A.
Underwater 3d shape measurement using inverse triangulation through
two flat refractive surfaces. In: IEEE. OCEANS 2016 MTS/IEEE
Monterey. [S.l.], 2016. p. 1–7.



110

CACCIA, M. Laser-triangulation optical-correlation sensor for rov
slow motion estimation. IEEE Journal of Oceanic Engineering, IEEE,
v. 31, n. 3, p. 711–727, 2006.

CHANTLER, M. J.; CLARK, J.; UMASUTHAN, M. Calibration and
operation of an underwater laser triangulation sensor: the varying
baseline problem. Optical Engineering, International Society for Optics
and Photonics, v. 36, n. 9, p. 2604–2611, 1997.

CHOOSING a 3D vision system for automated robotics
applications. 2017. http://www.vision-systems.com/
articles/print/volume-19/issue-11/features/

choosing-a-3d-vision-system-for-automated-robotics-applications.

html. Accessed: 2017-04-05.

CODAOCTOPUS Sound Underwater Inteligence. 2017. http:
//www.codaoctopus.com/product-list/3d. Accessed: 2017-04-05.

COIRAS, E.; PETILLOT, Y.; LANE, D. M. Multiresolution 3-d
reconstruction from side-scan sonar images. IEEE Transactions on
Image Processing, IEEE, v. 16, n. 2, p. 382–390, 2007.

COMPACT laser scanner for profile transmission. 2017.
http://www.micro-epsilon.com/2D_3D/laser-scanner/

scanCONTROL-compact/. Accessed: 2017-04-05.

CRISP real-time 3D sonar imagery. 2017. http://www.codaoctopus.
com/products/use. Accessed: 2017-04-05.

DEY, P. K.; OGUNLANA, S. O.; NAKSUKSAKUL, S. Risk-based
maintenance model for offshore oil and gas pipelines: a case study.
Journal of Quality in Maintenance Engineering, Emerald Group
Publishing Limited, v. 10, n. 3, p. 169–183, 2004.

DIVISION, U. of California (1868-1952). Division of W. R.
S. D.; DIVISION, C. U. D. of W. R. S. D.; ECKART, C.
Principles of Underwater Sound. Research Analysis Group,
Committee on Undersea Warfare, National Research Council,
1946. (Summary technical report of the National Defense Research
Committee: Summary technical report of Division 6, NDRC).
&lt;https://books.google.com.br/books?id=9kQrAAAAYAAJ&gt;.

DORSCH, R. G.; HA?USLER, G.; HERRMANN, J. M. Laser
triangulation: fundamental uncertainty in distance measurement.



111

Applied Optics, Optical Society of America, v. 33, n. 7, p. 1306–1314,
1994.

DRAP, P.; SEINTURIER, J.; SCARADOZZI, D.; GAMBOGI, P.;
LONG, L.; GAUCH, F. Photogrammetry for virtual exploration
of underwater archeological sites. In: Proceedings of the 21st
international symposium, CIPA. [S.l.: s.n.], 2007. p. 1e6.

FLITNEY, R. K. Seals and sealing handbook. [S.l.]: Elsevier, 2011.

GAN, Z.; TANG, Q. Visual Sensing and Its Applica-
tions: Integration of Laser Sensors to Industrial Robots.
Zhejiang University Press, 2011. (Advanced topics in
science and technology in China). ISBN 9787308080514.
&lt;https://books.google.com.br/books?id=nmYemwEACAAJ&gt;.

GIBSON, R.; ATKINSON, R.; GORDON, J. A review of underwater
stereo-image measurement for marine biology and ecology applications.
Oceanography and marine biology: an annual review, CRC Press,
v. 47, p. 257–292, 2016.

GLASSNER, A. S. (Ed.). An Introduction to Ray Tracing. London,
UK, UK: Academic Press Ltd., 1989. ISBN 0-12-286160-4.

GUO, Y. 3d underwater topography rebuilding based on single beam
sonar. In: IEEE. Signal Processing, Communication and Computing
(ICSPCC), 2013 IEEE International Conference on. [S.l.], 2013.
p. 1–5.

HARRIS, D. C. Materials for infrared windows and domes: properties
and performance. [S.l.]: SPIE press, 1999.

HARTLEY, R. I.; ZISSERMAN, A. Multiple View Geometry in
Computer Vision. Second. [S.l.]: Cambridge University Press, ISBN:
0521540518, 2004.

HF12.5HA-1B. 2017. http://www.fujifilmusa.com/products/
optical_devices/machine-vision/2-3-15/hf125ha-1b/. Accessed:
2017-04-05.

HORNER, D.; MCCHESNEY, N.; MASEK, T.; KRAGELUND, S.
3D Reconstruction with an AUV Mounted Forward-Looking Sonar.
[S.l.], 2009.



112

III, T. P. S.; VASCOTT, T. High temperature glass melt property
database for process modeling. [S.l.]: Wiley-American Ceramic Society,
2005.

JI, Z.; LEU, M.-C. Design of optical triangulation devices. Optics &amp;amp;
Laser Technology, Elsevier, v. 21, n. 5, p. 339–341, 1989.

JI, Z.; LEU, M.-C. Design of optical triangulation devices. Optics &amp;amp;
Laser Technology, Elsevier, v. 21, n. 5, p. 339–341, 1989.

JORDT, A. Underwater 3D reconstruction based on physical models
for refraction and underwater light propagation. [S.l.]: Citeseer, 2014.

KANG, L.; WU, L.; YANG, Y.-H. Experimental study of the influence
of refraction on underwater three-dimensional reconstruction using
the svp camera model. Appl. Opt., OSA, v. 51, n. 31, p. 7591–7603,
Nov 2012.&amp;lt;http://ao.osa.org/abstract.cfm?URI=ao-51-31-7591&gt;.

LOURAKIS, M. I. A brief description of the levenberg-marquardt
algorithm implemented by levmar. Foundation of Research and
Technology, v. 4, n. 1, 2005.

MASSOT-CAMPOS, M.; OLIVER-CODINA, G. Optical sensors and
methods for underwater 3d reconstruction. Sensors, Multidisciplinary
Digital Publishing Institute, v. 15, n. 12, p. 31525–31557, 2015.

MCLEAN, J. W. High-resolution 3d underwater imaging. In:
INTERNATIONAL SOCIETY FOR OPTICS AND PHOTONICS.
SPIE’s International Symposium on Optical Science, Engineering, and
Instrumentation. [S.l.], 1999. p. 10–19.

MIKS, A.; NOVAK, J.; NOVAK, P. Analysis of imaging for laser
triangulation sensors under scheimpflug rule. Optics express, Optical
Society of America, v. 21, n. 15, p. 18225–18235, 2013.

MINI Structured Light Laser Diode Modules. 2017. https:
//www.edmundoptics.com/lasers/laser-diode-modules/

mini-structured-light-laser-diode-modules/2273. Accessed:
2017-04-05.

MQ013MG-E2. 2017. https://www.ximea.com/en/products/
usb3-vision-cameras-xiq-line/mq013mg-e2. Accessed:
2017-04-05.



113

NAIDU, D.; FISHER, R. B. A comparative analysis of algorithms for
determining the peak position of a stripe to sub-pixel accuracy. In:
BMVC91. [S.l.]: Springer, 1991. p. 217–225.

NEWTON, I.; BALDWIN, R.; FRYER, J. Underwater
photogrammetry. Non-Topographic Photogrammetry, American
Society for Photogrammetry and Remote Sensing: Bethesda, MD,
USA, p. 147–166, 1989.

OFFSHORE Laser Scanning for Asset Management. 2017.
https://www.2grobotics.com/offshore/. Accessed: 2017-04-05.

OPTISCHE 3D-Messsysteme: VDI-VDE-Handbuch
Meßtechnik. Bildgebende Systeme mit fla?chenhafter An-
tastung : VDI-VDE 2634, Blatt 2 Entwurf. Blatt
2. 2634,2E. Beuth, 2000. (VDI-VDE-Richtlinien).
&lt;https://books.google.com.br/books?id=mlrmZwEACAAJ&gt;.

PATHAK, K.; BIRK, A.; VASKEVICIUS, N. Plane-based registration
of sonar data for underwater 3d mapping. In: IEEE. Intelligent Robots
and Systems (IROS), 2010 IEEE/RSJ International Conference on.
[S.l.], 2010. p. 4880–4885.

PINHOLE Camera. 2017. https://commons.wikimedia.org/wiki/
File:Pinhole-camera.png. Accessed: 2017-04-05.

QUAN, X.; FRY, E. S. Empirical equation for the index of refraction
of seawater. Applied Optics, Optical Society of America, v. 34, n. 18,
p. 3477–3480, 1995.

RIBAS, D.; RIDAO, P.; NEIRA, J.; TARDOS, J. D. Slam using an
imaging sonar for partially structured underwater environments. In:
IEEE. Intelligent Robots and Systems, 2006 IEEE/RSJ International
Conference on. [S.l.], 2006. p. 5040–5045.

ROSENBLUM, L.; KAMGAR-PARSI, B. 3d reconstruction of
small underwater objects using high-resolution sonar data. In:
IEEE. Autonomous Underwater Vehicle Technology, 1992. AUV’92.,
Proceedings of the 1992 Symposium on. [S.l.], 1992. p. 228–235.

SANTOLARIA, J.; AGUILAR, J.-J.; GUILLOMA?A, D.;
CAJAL, C. A crenellated-target-based calibration method
for laser triangulation sensors integration in articulated
measurement arms. Robotics and Computer-Integrated
Manufacturing, v. 27, n. 2, p. 282 – 291, 2011. ISSN 0736-5845.



114

Translational Research a??“ Where Engineering Meets Medicine.
&lt;http://www.sciencedirect.com/science/article/pii/S0736584510000876&gt;.

SANTOLARIA, J.; PASTOR, J. J.; BROSED, F. J.; AGUILAR,
J. J. A one-step intrinsic and extrinsic calibration method for
laser line scanner operation in coordinate measuring machines.
Measurement Science and Technology, v. 20, n. 4, p. 045107, 2009.
&lt;http://stacks.iop.org/0957-0233/20/i=4/a=045107&gt;.

SCAN Station P20. 2017. http://w3.leica-geosystems.com/
downloads123/hds/hds/ScanStation_P20/brochures-datasheet/

Leica_ScanStation_P20_DAT_en.pdf. Accessed: 2017-04-05.

SCHECHNER, Y. Y.; KARPEL, N. Recovery of underwater visibility
and structure by polarization analysis. IEEE Journal of oceanic
engineering, IEEE, v. 30, n. 3, p. 570–587, 2005.

SCOPOS Tailormade Solutions. 2017. http://www.scopos.no/
index.php/en/products/investigator.html. Accessed: 2017-04-05.

SUBSEA, Deepwater Camera For Underwater Measurements.
2017. https://www.youtube.com/watch?v=YqyKJCPxi7g. Accessed:
2017-04-05.

TAO, L.; CASTELLANI, U.; FUSIELLO, A.; MURINO, V. 3d
acoustic image segmentation by a ransac-based approach. In: IEEE.
OCEANS 2003. Proceedings. [S.l.], 2003. v. 2, p. 1098–1101.

TREIBITZ, T.; SCHECHNER, Y. Y.; SINGH, H. Flat refractive
geometry. In: Computer Vision and Pattern Recognition, 2008. CVPR
2008. IEEE Conference on. [S.l.: s.n.], 2008. p. 1–8. ISSN 1063-6919.

TRUCCO, E.; FISHER, R. B.; FITZGIBBON, A. W. Direct
calibration and data consistency in 3-D laser scanning. [S.l.]:
Department of Artificial Intelligence, University of Edinburgh, 1994.

ULS-500 PRO. 2017. https://www.2grobotics.com/products/
underwater-laser-scanner-uls-500/. Accessed: 2017-04-05.

WALDRON, D. L.; MULLEN, L. Underwater optical ranging: A
hybrid lidar-radar approach. In: IEEE. OCEANS 2009, MTS/IEEE
Biloxi-Marine Technology for Our Future: Global and Local
Challenges. [S.l.], 2009. p. 1–7.

WOZNIAK, B.; DERA, J. Light absorption in sea water. [S.l.]:
Springer, 2007.



115

ZHANG, Z. Flexible camera calibration by viewing a plane from
unknown orientations. In: IEEE. Computer Vision, 1999. The
Proceedings of the Seventh IEEE International Conference on. [S.l.],
1999. v. 1, p. 666–673.


</field>
	</doc>
</add>