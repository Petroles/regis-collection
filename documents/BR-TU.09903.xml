<?xml version="1.0" encoding="utf-8"?>
<add>
	<doc>
		<field name="docid">BR-TU.09903</field>
		<field name="filename">14917_PFC-20121-RodrigoLeaoCarvalho.pdf</field>
		<field name="filetype">PDF</field>
		<field name="text">DAS Departamento de Automação e Sistemas
CTC Centro Tecnológico
UFSC Universidade Federal de Santa Catarina
Automaçao de Teste de Ferramenta de Perfuraçao
Monografia submetida à Universidade Federal de Santa Catarina como requisito para a aprovação da disciplina:
DAS 5511: Projeto de Fim de Curso
Rodrigo Leão Carvalho
Florianópolis, Junho de 2012
Automação de Teste de Ferramenta de Perfuração
Rodrigo Leão Carvalho
Esta monografia foi julgada no contexto da disciplina DAS 5511: Projeto de Fim de Curso e aprovada na sua forma final pelo
Curso de Engenharia de Controle e Automação Industrial
Banca Examinadora:
Eng. Geraldo Antonio Signorini Filho Orientador na Empresa
Prof. Agustinho Plucenio
Orientador do Curso
Prof. Ricardo Jose Rabelo Responsavel pela disciplina
Prof. Daniel Juan Pagano, Avaliador
Academico Diego Ferreira de Oliveira, Debatedor
Academico Guilherme Campos Angeloni, Debatedor
Agradecimentos
É irônico pensar que, depois ter escrito a monografia inteira, a parte mais difícil do trabalho e escrever os agradecimentos. Primeiramente, nao e simples traduzir em palavras a gratidao que tenho pelos meus pais, Andréa e Antonio Carlos. Nao e algo que pode ser traduzido por numeros ou teorias que sao ensinadas na escola de engenharia. Essa gratidao pode ser definida pela sensacao de que nao foi em vao todo o esforco e confianca depositados em mim em todos esses anos, que todo amor e carinho que recebi da minha família me deram forca para superar as mais diversas dificuldades e ter certeza que estava trilhando o caminho certo. Dedico todos os frutos do meu trabalho a eles e espero poder oferecer muito mais do que isso no futuro.
Tambem nao e facil resumir em apenas um parágrafo o apoio que tive de todos meus amigos de Florianópolis. Apoio de colegas de sala que dividiram noites sem dormir para honrar os compromissos da faculdade. Tambem houve noites sem dormir, e verdade, para festejar a melhor fase da minha vida na companhia de grandes amigos, e essas foram inesquecíveis! Seria injusto nao agradecer em especial ao Igor, pela sua sincera amizade e companheirismo, ao Guilherme e Bruno, meus socios empreendedores, aos amigos petroleiros de Macae e a todos os amigos do nosso ’’seleto grupo de e-mails”.
Durante o estagio tambem tive fundamental ajuda de algumas pessoas que nao posso deixar de agradecer. Geraldo, pela sua amizade, paciencia, didatica e confianca. Diogo, pelo espírito de equipe e pelo constante incentivo. Aos outros es-tagiarios e trainees pelo companheirismo, e a confianca de toda a gerência do segmento de Drilling and Measurements.
Deixo tambem um agradecimento especial a Lara. Sem suas palavras confortantes, sua paciencia e seu carinho durante todo o período de estagio, eu nao teria tido tanta seguranca de que, no final, tudo daria certo.
Resumo
Este documento apresenta a documentação do projeto de estágio desenvolvido na empresa Schlumberger Serviços de Petroleo como parte fundamental das atividades do ultimo semestre do curso de Engenharia de Controle e Automacao da Universidade Federal de Santa Catarina. As atividades foram realizadas entre os meses de janeiro e junho de 2012, no contexto da disciplina DAS 5511: Projeto de Fim de Curso.
A Schlumberger se destaca por ser a atual líder mundial na prestacao de servicos para a industria do petroleo. Com mais de 80 anos de atuacao no setor, a Schlumberger atua no Brasil ha mais de 35, tendo a sua maior base operacional do mundo localizada na cidade de Macae, Rio de Janeiro.
Entre os diversos segmentos em que a Schlumberger e dividida, o segmento de Drilling and Measurements e o foco desse trabalho. O objetivo geral e aumentar a produtividade do processo de manutencao de um tipo de ferramenta de perfuracao direcional chamada de push-the-bit.
O escopo do trabalho foi delimitado a um processo de manutencao conhecido na empresa como Flow Loop Test. Esse processo tem a finalidade de testar o comportamento das ferramentas do tipo push-the-bit em um ambiente que simula uma operacao real. O desenvolvimento do trabalho foi dividido em 5 etapas: definicao; medicao; analise; processo de melhoria e controle.
A primeira etapa de desenvolvimento do projeto partiu de uma analise da situacao inicial do processo, apontando os principais problemas e oportunidades de melhoria. A partir dos problemas encontrados, foi realizada uma investigacao de causas e, em seguida, uma analise de viabilidade de possíveis solucoes. A quarta etapa do projeto foi realizar o desenvolvimento tecnico, que e o foco principal desse trabalho. Por ultimo, foram levantadas medidas para a manutencao das melhorias implementadas.
O desenvolvimento tecnico resumiu-se a elaboracao de um sistema automatico de controle de vazao na planta de teste e a elaboracao de um sistema supervisorio. O projeto contou com restricoes de custo, o que motivou o desenvolvimento de um sistema inteiro atraves de tecnologias open-source.
O sistema de controle de vazao se dividiu no projeto de um controlador PI (Proporcional-Integral) e de um hardware .O hardware foi composto de uma placa
de aquisição de dados desenvolvida a partir do Arduino. Arduino e uma plataforma de prototipagem eletrônica de hardware livre, composta de uma placa microcontrolada. Arduino vem sendo bastante utilizada em projetos de automacao e suas principais características sao: flexibilidade, rápida curva de aprendizado e custo extremamente baixo para esse tipo de aplicacao.
O sistema supervisorio tambem foi elaborado com iniciativas de código aberto, ou do ingles open-source. O software foi desenvolvido atraves da plataforma Java e contou com o uso de bibliotecas e APIs (Application Pogramming Interface) de distribuicao livre.
Palavras-chave: Automacao, controle digital de processos contínuos, Arduino, desenvolvimento de placa de aquisicao de dados, sistema supervisorio, Java.
Abstract
This report presents the internship project developed for Schlumberger Oilfield Services Company. The internship is the main activity of the last semester of the Control and Automation Engineering course at Federal University of Santa Catarina.
Schlumberger is the world's largest oilfield services company. It is present in the oilfield area for more than 80 years and has been providing services in Brazil for more than 35. Its biggest base in the world is in Macae, Rio de Janeiro.
Schlumberger is divided in several segments. "Drilling and Measurements’^ one of these segments and it is the focus of this work. The general goal is to increase the productivity of a directional drilling type of tool called push-the-bit.
The project's scope is the maintenance process known in the company as Flow Loop Test. The goal of this process is to test the push-the-bit tool behavior in a simulation enviroment. The project development was divided in 5 steps: defining, measuring, analyzing, improving and controlling.
The first development step was to analyze the initial state of the Flow Loop Test and to point the main problems and improvement opportunities. Then it was investigated the root cause of the problems and how it could be solved. The fourth step was related to the technical development, that is the main goal of the internship project. Finally, actions for the improvement maintenance were raised.
The technical development was related to the development of a automatic system to control the flow in the test area and a supervisory system. Cost constraints led the development of the entire system to be done through open-source technologies.
The flow control system was divided in the PI (Proportional-Integral) controller design and the hardware development. The hardware is composed by an electronic acquisition board developed through an open-source electronics prototyping platform called Arduino. Basically, Arduino is a microcontroller board that has been very used for automation projects and is: flexible; has a fast learning curve and it is cheap.
The supervisory system was also designed with open source technologies. It was used Java Platform to program the software and free libraries and APIs (Application Pogramming Interface).
Keywords: Automation, digital control of continuous processes, Arduino, acquisition board design, supervisory system, Java.
Sumário
Lista de Figuras	ix
Lista de Tabelas	xiii
Simbologia	xiv
1	Introdução	1
1.1	Historia do Petróleo no Brasil.................................... 1
1.2	Momento Atual da Indústria do	Petróleo............................ 3
1.3	Schlumberger Serviços de Petroleo ................................ 5
1.3.1	Segmento de Drilling and Measurements...................... 6
1.4	Apresentação do Problema.......................................... 9
1.5	Objetivos do Projeto............................................. 12
1.6	Estrutura do Documento........................................... 13
2	Processo de Manutençao de Ferramentas push-the-bit	15
2.1	Flow loop Test .................................................. 16
2.1.1	Define.................................................... 17
2.1.2	Measure .................................................. 18
Identificando	as Causas dos	Problemas...................... 21
2.1.3	Analyze .................................................. 22
2.1.4	Improve................................................... 24
2.1.5	Control................................................... 24
2.2	Cronograma ...................................................... 25
3	Hardware	26
3.1	Inversor de Frequencia............................................ 26
3.1.1	1o Bloco-CPU............................................... 27
3.1.2	2o Bloco-IHM............................................... 27
3.1.3	3o Bloco	- Interfaces...................................... 28
3.1.4	4o Bloco	- Etapa	de potencia............................... 28
3.2	Transmissor de vazao.............................................. 29
3.3	Projeto da Placa de Aquisicao de Dados............................ 31
3.3.1	Projeto de Circuito para Controle do Inversor.............. 32
3.3.2	Projeto de Circuito para Leitura da Vazao.................. 36
3.4	Prototipagem...................................................... 40
4	Modelagem e Controle	43
4.1	Conceitos Basicos de Controle..................................... 43
4.2	Objetivos de Controle ............................................ 44
4.3	Levantamento do Modelo............................................ 45
4.3.1	Sistemas de Primeira Ordem ................................ 46
4.4	Projeto do Controlador ........................................... 48
4.5	Algoritmo de Controle............................................. 53
4.5.1	Discretizacao de Controlador Continuo ..................... 54
4.5.2	Obtencao da Equacao de Diferencas a partir da Transformada Z 56
4.6	Resultados........................................................ 56
5	Software Supervisorio	59
5.1	Visao Geral do Sistema............................................ 59
5.2	Levantamento	de Requisitos ..................................... 59
5.3	Plataforma de	Desenvolvimento ................................... 61
5.4	Comunicacao	com o Hardware...................................... 62
5.4.1	Protocolo de comunicação ............................. 63
5.5	Implementação................................................ 65
5.6	Telas do Sistema Supervisorio................................ 71
6	Resultados	74
7	Conclusões e Perspectivas	76
Referencias	78
Apêndice A: Funcionamento Básico dos Inversores de Frequência	83
Apêndice B: Medidor de Vazão Tipo Magnetico	86
Anexo A: Diagrama do Inversor de Frequência Varispeed E7 - Yaskawa 89 Anexo B: Lista de Componentes	90
Anexo C: Tabela de Transformadas	91
Lista de Figuras
1.1	Matriz Energética Mundial - 2009. [7]................................... 3
1.2	Segmentos da Schlumberger............................................... 6
1.3	Subseguimentos de D&amp;amp;M................................................... 7
1.4	Ferramenta de MWD [5]................................................... 8
1.5	Modulacao de sinal pela ferramenta de MWD [5]........................... 9
1.6	Tipos de perfuracao.................................................... 10
1.7	Steerable motor - Ferramenta do tipo point-the-bit..................... 11
1.8	PADS - Atuadores mecanicos para ferramentas push-the-bit [5]........... 11
1.9	Localizacao espacial das ferramentas de perfuracao no fundo do poco
[5].................................................................... 12
1.10	Flow Loop Test - Tecnico medindo o torque de ferramenta push-the-bit	13
2.1	Ferramenta push-the-bit [5]....................................... 15
2.2	Fluxograma do processo de manutencao de ferramenta push-the-bit . .	16
2.3	Analise SIPOC - Suppliers, Inputs, Process, Outputs, Customers	....	18
2.4	Visao geral do Flow Loop Test..................................... 18
2.5	Fluxograma detalhado do FlowLoop Test ................................. 18
2.6	Valvula do tipo esfera............................................ 19
2.7	Inversor de Frequencia............................................ 19
2.8	Motor de 400V utilizado para acionar bomba d'agua e linha de vazao do
teste. ................................................................ 20
2.9	Timeline do processo antes do projeto............................. 22
2.10	Processo feito manualmente pelos tecnicos com alta taxa de erro	humano	22
2.11	Controlador do inversor de frequencia............................ 23
2.12	Processos do Flow Loop Test que devem ser alterados.............. 23
3.1	Blocos de um inversor de frequência [21].................................... 27
3.2	Display de controle do inversor	modelo Varispeed	E7	-	Yaskawa ....	28
3.3	Modulo de controle do inversor	- Posicao automático e	manual....	29
3.4	Medidor de vazao por placa de	orificio..................................... 29
3.5	Medidor de vazao por deslocamento positivo.................................. 30
3.6	Medidor eletromagnetico de vazao..................................... 30
3.7	Medidor SITRANS F M MAGFLO Mag5000, Siemens.......................... 30
3.8	Placa Arduino Uno.................................................... 31
3.9	Modulo de entrada analógica do inversor de frequencia - Sinais +V, A1
e AC............................................................. 33
3.10	Transistores bipolares NPN e PNP.................................... 34
3.11	Utilizando transistor para amplificar sinal PWM do Arduino ................ 35
3.12	Princípio de funcionamento dos optoacopladores...................... 36
3.13	Circuito para controle da entrada analogica do inversor de frequencia	.	36
3.14	Modulo de saída analogica do transmissor de vazao Mag5000 ................. 37
3.15	Princípio de funcionamento do circuito utilizado para ler sinal de corrente	37
3.16	Teste da relacao entrada-salda do optoacoplador 4N35................ 38
3.17	Resultados do teste da relacao entrada-saída do optoacoplador 4N35	.	39
3.18	Faixa de operacao aproximadamente linear do optoacoplador 4N35 .	.	39
3.19	Circuito para leitura do sensor de vazao............................ 40
3.20	Sinal de corrente com ruido......................................... 40
3.21	Sinal de corrente filtrado.......................................... 40
3.22	Circuito final do projeto ................................................. 41
3.23	Placa de circuito impressa com escala em mm ............................... 41
3.24	Soldagem de componentes eletrônicos ....................................... 42
3.25	Hardware............................................................ 42
4.1	Sistema de controle de vazao em malha aberta......................... 43
4.2	Sistema de controle em malha fechada............................... 44
4.3	Ensaios ao degrau.................................................. 46
4.4	Resposta de sistema de primeira ordem para entrada degrau, (a) sem
zero, (b) com zero [32] ........................................... 47
4.5	Diagrama polo-zero da Equacao 4.8 com realimentacao negativa ....	50
4.6	SISOTOOL - Ferramenta do Matlab que auxilia o projeto de controladores 50
4.7	Resposta a um degrau de amplitude unitaria......................... 51
4.8	Diagrama Simulink para teste de robustez........................... 52
4.9	Resposta ao degrau para teste de robustez.......................... 52
4.10	Sistema de controle digital....................................... 53
4.11	Relacao entre os sinais de entrada e saída de um conversor A/D...	54
4.12	Transformacao de pulsos em degraus atraves de um ZOH.............. 55
4.13	Mudanca de set-point da referência de vazao para 130 GPM.......... 57
4.14	Comportamento do controlador para diferentes set-points........... 57
5.1	Requisitos funcionais do modo de controle do motor................. 60
5.2	Requisitos funcionais sobre o Downlink............................. 60
5.3	Requisitos funcionais sobre teste de torque........................ 61
5.4	IDE: Eclipse....................................................... 62
5.5	IDE: NetBeans...................................................... 62
5.6	Comunicacao serial do Arduino atraves de conexao USB............... 63
5.7	FIRMATA: protocolo de comunicacao entre o Arduino e o software. ...	64
5.8	Secoes principais do software...................................... 65
5.9	Painel de monitoramento principal.................................. 65
5.10	Aba Home.......................................................... 66
5.11	Aba Downlink.	  67
5.12	Aba Testing....................................................... 68
5.13	Fluxograma do teste de torque..................................... 69
5.14	Torquímetro digital CEDAR - DIW 15.	  70
5.15	Relatórios gerados na forma de planilhas do Microsoft Excel....... 71
5.16	Controlador de vazão ............................................. 72
5.17	Downlink.......................................................... 72
5.18	Teste de Torque .................................................. 73
6.1	Estado inicial do processo de teste................................ 74
6.2	Estado final do processo de teste.................................. 75
6.3	Analise quantitativa das melhorias................................. 75
7.1	Sinais do inversor de frequencia em um ambiente idustrial.......... 76
A.1 Estrutura basica de um inversor de frequencia trifasico............. 83
A.2 Componentes de um motor de inducao [28]............................. 84
A.3 Modulacao PWM [21].................................................. 84
A.	4 Duty Cicle de um sinal PWM [21].................................... 85
B.	1 Princípio de funcionamento de medidores eletromagneticos	de vazao .	87
B.2 Quadro comparativo entre tipos de medidores de vazao................ 88
Lista de Tabelas
2.1	Planejamento	do estágio 1	do projeto............................. 25
2.2	Planejamento	do estágio 2	do projeto............................. 25
2.3	Planejamento	do estagio 3	do projeto............................. 25
3.1	Sinais do modulo de entrada analógico do inversor................. 33
4.1	Modelos experimentais ............................................ 48
5.1	Funcionalidades da tela	de monitoramento geral do sistema......... 66
5.2	Funcionalidades da aba	Home....................................... 67
5.3	Funcionalidades da aba	Downlink................................... 68
5.4	Funcionalidades da aba	Testing ................................... 69
B.1 Lista de componentes............................................... 90
Simbologia
ANP : Agencia Nacional do Petroleo, Gas Natural e Biocombustiveis. SLB : Schlumberger.
D&amp;amp;M : Drilling and Measurements.
DD : Directional Drilling.
MWD : Measure While Drilling.
LWD : Logging While Drilling.
BHA : Bottom Hole Assembly.
PWM : Pulse With Modulation.
CC : Corrente Continua.
CA : Corrente Alternada.
IGBT : Transistor Bipolar de Porta Isolada.
PCB : Placa de circuito impressa (Printed Circuit Board).
OSI : Open Systems Interconnection.
DTE : Data Terminal Equipment.
DCE : Data Communication Equipment.
IDE : Integrated Development Environment.
Capítulo 1: Introdução
1.1: Historia do Petróleo no Brasil
No Brasil, a existência do petróleo foi relatada pela primeira vez durante os tempos do regime imperial com a extracao de betume nas margens do rio Marau, na Bahia. Contudo, apenas na decada de 1930 foi criado o CNP - Conselho Nacional do Petróleo - que determinou varias as diretrizes sobre a propriedade e exploracao das reservas nacionais [1].
Apesar das primeiras descobertas de petróleo no Brasil terem sido em pequena escala, o surgimento dessa nova riqueza incentivou, em 1953 com a Lei no 2004, a oficializacao do monopolio estatal sobre a atividade petrolífera. Assim, nesse ano, foi criada a empresa estatal ’’Petróleo Brasileiro S.A.”, mais conhecida como Petrobras
[1].
Na decada de 1960, novas medidas ampliaram o grau de atuacao da Petrobras na economia brasileira. No ano de 1968, a empresa passou a desenvolver um projeto de extracao iniciando a exploracao de petróleo em aguas profundas. Apos as primeiras descobertas, outras prospeccoes ampliaram significativamente a producao petrolífera brasileira. Em 1974 foi descoberto petróleo na Bacia de Campos, a maior reserva de petróleo do país [1].
Em 1997, a Lei no 9.478, tambem conhecida como nova lei do petróleo, revogou a lei de 1953, citada anteriormente. Com a nova lei do petróleo, alem da Petrobras, outras empresas constituídas sob as leis brasileiras e com sede no Brasil passam a poder atuar em todos os elos da cadeia do petróleo [2], ou seja, do poco ao posto (em ingles, from well to wheel), em regime de concessao ou mediante autorizacao do poder concedente - a Uniao. Ate o advento desta lei, outras empresas so podiam atuar no downstream isto e, apenas na venda dos derivados do petróleo. A Petrobras perdeu, assim, o monopolio da exploracao e do refino de petróleo no Brasil.
Tambem atraves da Lei no 9.478, em 1997, foi criada a Agencia Nacional do Petróleo, Gas Natural e Biocombustíveis (ANP). A ANP e o orgao regulador das atividades que integram as industrias de petróleo e gas natural e de biocombustíveis no Brasil. A ANP tem a finalidade de estabelecer regras, contratar e zelar pelo cumprimento das normas nas atividades de exploracao, desenvolvimento e producao de
petróleo e gás natural no país.
Com o passar do tempo, o Brasil se tornou uma das Únicas nações a dominar a tecnologia de exploraçao petrolífera em aguas profundas e ultra profundas. De porte dessa tecnologia avançada, o Brasil conseguiu em 2007 descobrir uma grande reserva de petroleo conhecida como Prê-Sal.
Em termos mundiais, o Pre-Sal descoberto em Tupi foi a maior descoberta da decada para a industria do petroleo. Segundo a Petrobras, sendo conservador, o petroleo do Pre-Sal pode, no mínimo, dobrar as reservas de hidrocarbonetos do Brasil [6]. Por enquanto a reserva do Pre-Sal situa-se do litoral de Santa Catarina ate o litoral do Espírito Santo, com indícios de que pode ir ate o Ceara [10].
Em 2009, o governo aprovou novas regras para exploracao e producao de petroleo e gas natural na area de ocorrência da camada Pre-Sal e em areas que venham a ser consideradas estrategicas. Esse novo conjunto de regras e conhecido como o novo marco regulatorio da industria de petroleo no Brasil e define que o regime de exploracao e producao de petroleo e gas natural no Brasil podem ser por concessao, partilha de producao ou cessao onerosa.
A principal característica do sistema de concessao e que as atividades sao realizadas por conta e risco do concessionario, sem interferência ou maior controle dos governos nos projetos de exploracao e producao, respeitada a regulacao existente [4]. Com o novo marco regulatorio, a primeira grande mudanca esta na troca do modelo de concessao (que sera mantido para os blocos ja licitados) para o contrato de partilha da producao, adotado em países com grandes reservas, como Arabia Saudita, Venezuela, Ira e Iraque [3].
No contrato de partilha, o Estado e as empresas dividem entre si a producao de oleo e gas, permitindo a Uniao capturar a maior parte da riqueza gerada com a renda do petroleo. Nesse novo modelo o governo podera contratar a Petrobras para produzir diretamente no pre-sal e em areas estrategias ou contratar empresas privadas por meio de licitacao, assegurando a estatal uma fatia mínima de 30% em cada bloco. Nesse regime, a Uniao sera representada por uma nova estatal, a Petro-Sal [3].
A cessao onerosa de direitos preve que a Uniao podera ceder a Petrobras o direito de exercer atividades de exploracao e producao, em determinadas areas do Pre-Sal, sem licitacao, no limite de ate 5 bilhoes de barris de petroleo e gas natural. A companhia arcara com todos os custos e assumira os riscos de producao. O valor desta cessao onerosa sera avaliado segundo as melhores praticas da industria do
petróleo, e a Petrobras pagará à União este valor [4].
1.2: Momento Atual da Indústria do Petróleo
Fontes de energia não renováveis, como o petróleo, têm prazo para acabar, pois demoram milhoes de anos para serem criadas pela natureza e suas reservas vem diminuindo ou ficando inacessíveis a medida que o tempo passa. Muitas iniciativas para a substituicao do petroleo por fontes renovaveis de energia tem sido tomadas, entretanto, o petroleo ainda e, e sera, a principal matriz energética mundial por varios anos.
Matriz Energética Mundial (2009)
Carvão
27%
Outras
11%
Nuclear
6%
Óleo&amp;amp; Gás
54%
Hidroelétrica_
Ü
Figura 1.1: Matriz Energética Mundial - 2009. [7]
A Figura 1.1 mostra o comparativo entre as principais matrizes energéticas mundiais. Estudos realizados pela Agencia Internacional de Energia (IEA) mostram que ate 2030 o petroleo continuara sendo a fonte primaria de energia [8].
Atualmente, a agricultura moderna e 90 % dos meios de transportes estao fortemente associados ao petroleo. A seguranca alimentar de quase sete bilhoes de indivíduos depende de uma agricultura bastante dependente dos derivados de petroleo por dois grandes motivos. O primeiro e que o petroleo e o combustível para grande parte do maquinario utilizado no cultivo dos alimentos. Alem disso, grande parte das areas de producao agrícola sao distantes dos centros consumidores, o que torna o
escoamento da produção também dependente de meios de transportes movidos a petróleo.
Em meio a esse panorama, o Brasil ve sua riqueza proveniente do ouro negro se valorizar mais a cada dia. Com as estimativas do Pre-Sal, o Brasil se encontra entre os seis países que possuem as maiores reservas de petroleo do mundo, ficando atras somente de Arabia Saudita, Ira, Iraque, Kuwait e Emirados Árabes [9].
Ate 2011 as reservas de petroleo brasileiras totalizaram 15 bilhoes de barris. Com a incorporacao das reservas nao provadas do pre-sal as reservas brasileiras de petroleo e gas serao elevadas para 30 bilhoes de barris, segundo o gerente executivo de Desenvolvimento da Producao da Petrobras, Osmond Coelho Junior [11]. Em valor de mercado, atualmente a Petrobras ja e a segunda maior empresa do continente americano e a quarta maior do mundo, no ano de 2010 [16].
Para conseguir se adaptar a essa nova realidade, o Conselho de Administracao da Petrobras aprovou um plano de investimentos de R$ 487,2 bilhoes entre 2012 e
2016.	O que corresponde a uma media de US$ 47,3 bilhoes por ano em aplicacoes. A maior parte dos recursos sera destinada a atividades de exploracao e producao (E&amp;amp; P) no total de US$ 141,8 bilhoes [13].
A Petrobras tambem divulgou um plano de investimentos da ordem de US$
31,2	bilhoes para ampliacao do parque nacional de refino de petroleo ate 2017. Esse investimento significara um aumento na capacidade de refino do país de 2 milhoes para 2,4 milhoes de barris de petroleo por dia ate 2014 [14]. O investimento no refino do petroleo traz consigo um aumento no valor agregado do petroleo e um grande benefício para a economia nacional.
Para atender a demanda desse aumento de producao, o Brasil precisara de muitos profissionais capacitados. A industria de oleo e gas, incluída a cadeia de fornecedores, estima que, apenas no nível tecnico, ate 2015 vao surgir mais de 50 mil oportunidades de emprego por ano. Para isso, a Agencia Nacional de Petroleo, Gas Natural e Biocombustíveis (ANP) financia programas de capacitacao de profissionais como o PRH (Programa de Recursos Humanos - ANP), com recursos proprios e tambem por meio da Clausula de P&amp;amp;D dos contratos de concessao (obrigatoriedade de investimentos em P&amp;amp;D de 1 % da receita bruta dos campos de grande producao). Tambem existem programas como o Prominp, o Programa de Formacao de Recursos Humanos da Petrobras (PFRH), o Ciencia Sem Fronteiras para o setor do petroleo e os programas dos centros de formacao de profissionais para Marinha Mercante (Ciaga
e Ciaba).
Diante desses novos desafios, o curso de Engenharia de Controle e Automacao da Universidade Federal de Santa Catarina proporciona aos seus alunos uma (ótima oportunidade de terem contato com projetos de pesquisas na area de petroleo e gas e se prepararem para o mercado de trabalho. Desde os primeiros anos do curso, os alunos podem participar de projetos de P&amp;amp;D da Petrobras ou ate de fazer parte do programa de capacitacao da ANP, o PRH-34.
1.3: Schlumberger Serviços de Petroleo
Na industria do petroleo, podemos dividir as empresas, de forma generalista, em operadoras e prestadoras de servicos. A Petrobras, por exemplo, e a maior operadora do Brasil. Em 2008, ela contava com 63 sondas de exploracao (terra e mar) e 13174 pocos de producao [16]. Enquanto as empresas operadoras possuem os direitos exploratorios das reservas de petroleo, existem as empresas prestadoras de servicos que oferecem as mais avancadas tecnologias para viabilizar a exploracao e producao dessa riqueza. A Schlumberger Servicos de Petroleo (SLB)e uma dessas empresas.
A Schlumberger e uma empresa francesa que atua na area de petroleo ha mais de 80 anos, estando presente no Brasil ha mais de 35. Nesse período, ela conseguiu se tornar a maior empresa prestadora de servicos da industria do petroleo no mundo, estando presente em mais de 80 países e empregando mais de 110 mil pessoas. A Schlumberger oferece servicos como:
•	Aquisicao e processamento sísmico;
•	Prospeccao, perfuracao e manutencao de pocos de petroleo;
•	Fraturacao e estimulacao hidráulica;
•	Consultoria e desenvolvimento de sistemas de informacao.
Para conseguir prestar servicos em quase todos os passos do ciclo de exploracao do petroleo, a Schlumberger se divide em diversos segmentos. A Figura 1.2 mostra essa divisao.
Localizar o reservatório:
WesternGeco
Acessar o reservatório:
Drilling &amp;amp; Measurements
Gerenciamento de projetos:
Integrated Project Management
Sistemas de Informação: Schlumberger Information Systems &amp;amp; DCS
Produzir o reservatório:
Well Completions &amp;amp; Productivity
Otimizar o reservatório:
Well Services
'-•«Mr

Figura 1.2: Segmentos da Schlumberger.
1.3.1: Segmento de Drilling and Measurements
Em meados dos anos 70, a atividade de perfuracao estava extremamente alta e a Schlumberger era a líder mundial. Entretanto, os clientes comecaram a exigir novas tecnologias para que, durante a operacao de perfuracao, se pudesse avaliar o ambiente, formacao e dados dos pocos em tempo real. Nessa epoca, a SLB tinha um segmento chamado Schlumberger Drilling Servicers (SDS) e que, em 1977, comprou a Analysts - que era uma companhia composta por analistas de perfis de lama ou geologistas, que pegavam amostras de lama da sub-superfície e a avaliavam [17].
A Analysts uniu-se ao SDS e formou-se a ANADRILL, que hoje e chamada de Drilling and Measurements (D&amp;amp;M). A visao de D&amp;amp;M e "fornecer solucoes de perfuracao em tempo-real atraves de pessoas e tecnologia de ponta". D&amp;amp;M busca prover a industria do petróleo com servicos de perfuracao com alto volume e em tempo real visando encontrar oleo e gas eficientemente, de maneira segura e aceitavel do ponto de vista do meio-ambiente [17].
Figura 1.3: Subseguimentos de D&amp;amp;M.
A Figura 1.3 mostra como D&amp;amp;M é dividida. Seus principais serviços são:
•	Directional Drilling (DD): Processo de guiar um poço para seguir o melhor caminho geométrico para alcancar seu objetivo ou seguir uma tendencia geológica;
•	Logging While Drilling (LWD): É um processo utilizado para fazer medidas da formacao geologica enquanto o poco e perfurado. Algumas medidas comuns de ferramentas de MWD sao: taxa de emissao natural de gamma-ray, resistivi-dade da formacao, densidade e porosidade. Com essas medidas o cliente pode inferir que tipo de formacao esta sendo perfurada e se ha ou nao presenca de hidrocarbonetos.
•	Measurements While Drilling (MWD): Possui uma funcao chave para a area de D&amp;amp;M. Atraves das ferramentas de MWD, as medidas tomadas a cada instante pelas ferramentas de LWD podem ser enviadas a superfície em tempo real atraves de tecnicas de telemetria. Outro papel fundamental das ferramentas de MWD e fornecer energia para as ferramentas de LWD a partir da energia gerada pela sua turbina (transforma a energia mecanica do fluido de perfuracao em energia eletrica).
Para uma melhor compreensao do projeto nos capítulos posteriores, e necessário entender como se da a comunicacao das ferramentas do BHA (Bottom Hole Assembly - e a parte da coluna de perfuracao que vai da broca ate, geralmente, a ultima ferramenta de D&amp;amp;M) com os equipamentos de superfície. Uma vez que nao ha cabos conectando as ferramentas de D&amp;amp;M com a superfície, toda a troca de comunicacao entre eles deve utilizar outro meio de propagacao.
As ferramentas de MWD podem utilizar 2 formas para enviar os dados de medição do fundo do poço para a superfície. Para os casos em que a perfuraçao usa fluido de perfuraçao gasoso, as ferramentas enviam as informações atraves de ondas eletro-magneticas. Na maioria dos çasos, o fluido perfuraçao usado nao e gasoso e sim líquido, ou mais çonheçido çomo ”lama”. Nesses çasos, as ferramentas de MWD modulam os dados em sequençias binarias e as transmitem para a superfíçie por pulsos de lama. Para modular os dados a ferramenta çonta çom modulador çonstituído de um estator e um rotor, Figura 1.4.
Figura 1.4: Ferramenta de MWD [5].
Em uma proçesso de perfuraçao normal, a lama e bombeada da superfíçie ate a ponta da broça por dentro da çoluna de perfuraçao. Isso signifiça que a lama passa pela ferramenta de MWD em direçao a broça, e, a medida que a lama vai passando, o rotor do modulador vai girando. Como o estator do modulador nao se move, os lobulos do rotor se alinham e desalinham çom os lobulos do estator o tempo inteiro. Com isso, quando os lobulos estao desalinhados,a lama tem difiçuldade de passar pela ferramenta de MWD e gera um aumento de pressao dentro da çoluna. Da mesma forma, quando os lobulos estao alinhados a lama pode passar livremente e ha uma queda de pressao na çoluna, Figura 1.5.
Para çodifiçar a informaçao ha um motor que çontrola a veloçidade de giro do rotor, podendo mudar a frequençia e defasagem de fase do sinal. Na superfíçie existem sensores de pressao que identifiçam a variaçao de pressao dentro da çoluna e enviam essa informaçao para que os dados sejam demodulados no çomputador.
Figura 1.5: Modulaçao de sinal pela ferramenta de MWD [5].
1.4: Apresentaçao do Problema
O estagio na Schlumberger foi realizado na area de Drilling and Measurements e o projeto foi relacionado com a area de Directional Drilling. Resumidamente, pocos direcionais sao pocos que nao sao exatamente verticais, que possuem uma trajetória calculada por pessoas especializadas, como por exemplo, por geologos. A Figura 1.6 mostra a diferenca entre cada tipo de perfuracao. Essas trajetorias sao calculadas por diversos motivos, entre eles:
•	Acessar regioes inacessíveis por pocos verticais;
•	Aumentar a produtividade dos pocos;
•	Perfuracao em solo salino;
•	Desviar de pocos ja existentes na regiao.
Nesse contexto, a Schlumberger possui diversas tecnologias para prover a perfuracao de pocos direcionais, ou horizontais. Basicamente, essas tecnologias sao dividias em
Figura 1.6: Tipos de perfuração.
ferramentas de perfuração point-the-bit e push-the-bit. Ferramentas do tipo point-the-bit fazem çom que o eixo da broca seja desalinhado em relaçao ao eixo do resto da coluna de perfuraçéío,formando um «ângulo que, a medida que o poço vai sendo perfurado a broça vai seguindo uma determinada direçao em relaçao a vertiçal, veja a Figura 1.7. Ferramentas do tipo push-the-bit possuem um meçanismo diferente. A medida que a çoluna gira e o poço e perfurado, a ferramenta utiliza o fluido de perfuraçao para açionar alguns dispositivos meçaniços, çhamados de pads, que çolidem çontra a formaçao do poço e empurram a ponta da broça para a direçao desejada. A Figura
1.8	mostra esses dispositivos meçaniços.
Ferramentas do tipo push-the-bit possuem três pads independentes que, a medida que a çoluna gira, eles sao açionados de forma a çompensar a rotaçao da çoluna e ”empurrar”a broça sempre para uma mesma direçao e inçlinaçao. Para poder fazer o çalçulo da veloçidade de abertura e e qual dos três pads deve ser açionado
Figura 1.7: Steerable motor - Ferramenta do tipo point-the-bit
Figura 1.8: PADS - Atuadores mecânicos para ferramentas push-the-bit [5].
em cada momento, as ferramentas push-the-bit possuem circuitos eletrônicos de controle e sensores para determinar a sua localizacao espacial. A localizacao especial possui duas referencias, uma em relacao ao sentido do campo gravitacional e a outra em relacao ao norte magnetico terrestre, veja a Figura 1.9. Esses sensores sao constituídos por magnetometros e acelerometros.
Por envolver bastante tecnologia e custos de operacao, qualquer erro desse tipo de ferramenta pode custar muito dinheiro para a empresa. Para minimizar falhas, a Schlumberger prove uma serie de testes de manutencao em suas ferramentas de perfuracao. Um desses testes para as ferramentas do tipo push-the-bit e chamado de Flow Loop Test, e e o foco desse trabalho.
No Flow Loop Test, as ferramentas de perfuracao push-the-bit sao testadas em uma planta que simula algumas operacoes de campo. Para isso, sao conectadas mangueiras na ferramenta por onde e bombeado agua a uma pressao de 0 a 2000 GPM (galoes por minuto). Essa e a faixa de operacao da maior parte das ferramentas de perfuracao.
ISOrvéyJpóiñt]
Horizontal
Syofwelli
irojeclion ore
JSuryey point:
Direção em relação ao Norte
Magnético
Inclinação em relação à direção do Campo Gravitacional
Direction angle
*
Figura 1.9: Localização espacial das ferramentas de perfuração no fundo do poço [5].
No teste, a ferramenta fica parada sobre um cavalete e é programada para simular a acao de ”empurrar”a broca para uma determinada direcao. Basicamente, como a ferramenta nao esta girando, se ela for programada para ”perfurar”em uma determinada direcao, apenas um dos pads deve ser acionado e permanecer aberto durante todo o tempo, uma vez que em operacoes de campo os outros pads sao acionados apenas para compensar o giro da coluna. Partindo desse princípio, o Flow Loop Test analisa o comportamento da ferramenta para diversos comandos e tambem mede o torque que a ferramenta fornece para o acionamento dos pads. A Figura 1.10 mostra um Flow Loop Test em andamento na planta.
1.5: Objetivos do Projeto
O objetivo desse trabalho é fazer um estudo detalhado sobre como o Flow Loop Test vem sendo feito na Schlumberger, propor e implementar melhorias no processo. A ideia e aumentar a produtividade do processo de manutencao das ferramentas do tipo push-the-bit, fazendo com que o trabalho dos tecnicos seja feito de forma mais pratica e com melhor qualidade. Os requisitos basicos do projeto foram: ter baixo custo e utilizar equipamentos/componentes disponíveis na regiao de Macae.
Antes da implementacao do projeto, o teste demorava aproximadamente 1,5 h para ser realizado; era necessario ter 2 tecnicos durante todo o período e a taxa de retrabalho era de ate 20% devido a erros humanos, o que representava um atraso da
Figura 1.10: Flow Loop Test - Técnico medindo o torque de ferramenta push-the-bit
ordem de 30 min no teste.
Nesse contexto, foram definidos dois objetivos:
•	Tornar o teste factível por apenas um tecnico;
•	Eliminar erros humanos no teste.
1.6: Estrutura do Documento
Esta monografia e composta por 7 capítulos, Apendices e Anexos. O primeiro capítulo contextualiza o assunto abordado pelo trabalho e aponta os objetivos gerais do projeto.
O Capítulo 2 define a metodologia que o projeto foi desenvolvido e faz uma analise aprofundada do problema. A partir dessa analise, sao definidos os objetivos específicos, e justificado o porque do trabalho e definido um cronograma para pesquisas e desenvolvimento tecnico.
O Capítulo 3 aborda a primeira questao relacionada diretamente ao curso de Engenharia de Controle e Automacao, que e o desenvolvimento de uma placa eletrônica
de aquisição de dados. Além do embasamento teórico necessário para o desenvolvimento da placa, esse capítulo mostra como foi possível construir um prototipo para testes.
No Capítulo 4 e demonstrado a teoria basica de modelagem de sistemas dinamicos e metodos de analise e controle de sistemas realimentados. Tambem sao demonstrados os resultados de testes do sistema de controle projetado aplicados na planta real.
O Capítulo 5 apresenta o produto final do projeto, que e um software super-visorio comunicando com a placa de aquisicao de dados projetada anteriormente. Esse capítulo apresenta as especificares do sistema e a implementacao do mesmo.
Os resultados do projeto sao apresentados no Capítulo 6 e as conclusões finais e perspectivas futuras estao no Capítulo 7.
Os Apendices A e B apresentam alguns conceitos tecnicos necessarios para o desenvolvimento do hardware. Os Anexos mostram algumas informacoes adicionais que podem ser interessantes para consultas futuras.
Capítulo2: Processo de Manutenção de Ferramentas push-the-bit
As ferramentas do tipo push-the-bit são compostas por basicamente 3 módulos: Bias Unit, Control Unit e Control Collar. A Figura 2.1 mostra como e a disposicao de cada modulo na ferramenta.
Figura 2.1: Ferramenta push-the-bit [5].
•	Control Collar: É responsável por manter a integridade física da ferramenta. É formado por material nao-magnetico de alta tecnologia, resistente a choques, temperatura etc. Mesmo sendo a parte mecanicamente mais simples, e o modulo mais caro da ferramenta.
•	Bias Unit: É um sistema constituído de atuadores mecanicos (pads) protegidos por um colar nao-magnetico. Seu objetivo e converter a pressao hidráulica do fluido de perfuracao, que passa por dentro da ferramenta em direcao a broca, em energia mec&lt;anica para direcionar a perfuracao do poco.
•	Control Unit: É o ”cerebro”da ferramenta. Contem toda a parte eletrônica e de sensores utilizadas para direcionar o poco. Fica instalado dentro do Control
Collar em um local isolado da pressão ambiente. Possui um conjunto de acoplamentos mecânicos que controlam o funcionamento do Bias Unit.
Conforme e mostrado na Figura 2.2, o processo de manutencao das ferramentas push-the-bit se divide em tres grandes areas, uma para cada modulo.
Figura 2.2: Fluxograma do processo de manutenção de ferramenta push-the-bit
O Flow Loop Test e a última etapa da manutencao do Control Unit e uma das mais importantes de todo o processo.
2.1: Flow loop Test
O desenvolvimento do projeto de melhorias do Flow Loop Test seguiu um conjunto de praticas originalmente desenvolvidas pela Motorola para melhorar sistematicamente os processos ao eliminar seus defeitos. Esse conjunto de praticas e conhecido como Seis Sigma ou Six Sigma [19]. Seis Sigma tambem e definido como uma estrategia gerencial para promover mudancas nas organizacoes, fazendo com que se chegue a melhorias nos processos, produtos e servicos para a satisfacao dos clientes [18].
Projetos Six Sigma seguem duas metodologias inspiradas pelo Plan-Do-Check-Act Cycle de Walter A. Shewhart (amplamente difundidas por Edwards Deming, no Japao pos-guerra). Estas metodologias, compostas de cinco fases cada, sao chamadas pelos acrônimos DMAIC e DMADV.
•	DMAIC e usado para projetos focados em melhorar processos de negocios ja existentes;
•	DMADV e usado para projetos focados em criar novos desenhos de produtos e processos.
Para o Flow Loop Test, o metodo DMAIC foi escolhido para guiar a gestao do projeto. DMAIC significa Define, Measure, Analyze, Improve e Control.
•	Define: e usado para definir o problema;
•	Measure: coletar dados importantes e mensura-los;
•	Analyze: analisar as causas do problema e escolher a melhor solucao;
•	Improve: melhorar e otimizar o processo baseado na analise dos dados;
•	Control: controlar o futuro estado de processo para se assegurar que quaisquer desvios do objetivo sejam corrigidos antes que se tornem em defeitos.
2.1.1: Define
A partir do DMAIC, a primeira etapa a ser seguida e definir o problema e delimitar o escopo do projeto. Para isso, foi feita uma analise junto ao time de engenheiros de manutencao de D&amp;amp;M sobre a atual situacao do Flow Loop Test e entao foi utilizada uma ferramenta chamada SIPOC (Suppliers, Inputs, Process, Outputs, Customers) para delimitar o escopo do projeto. Os resultados foram:
•	Problema relacionado a custos: durante toda a duracao do teste, um dos dois tecnicos responsaveis fica ocioso por mais da metade do tempo, o que significa uma subutilizacao de recursos humanos;
•	Problema relacionado a qualidade: em media, de 10 a 20% dos testes apresentam retrabalho, e através de uma analise mais detalhada percebe-se que na maior parte das vezes esse retrabalho e resultado de erro humano.
O mapeamento da Figura 2.3 possibilita uma melhor visao sobre o escopo do processo bem como quais sao seus fornecedores e clientes, mostrando os inputs necessários para o início do processo e quais sao os outputs esperados depois do processo finalizado [20]. Para o Flow Loop Test eí interessante notar que o time de Directional Drilling e, ao mesmo tempo, cliente e fornecedor do processo.
Figura 2.3: Análise SIPOC - Suppliers, Inputs, Process, Outputs, Customers
2.1.2: Measure
Antes de mensurar os dados do Flow Loop Test, e preciso conhece-lo. Para entender o processo e poder identificar os possíveis pontos de melhoria, o projeto mapeou todas as etapas do teste. A Figura 2.4 mostra uma visao geral do processo e a Figura 2.5 mostra cada uma das etapas em detalhes.
Figura 2.4: Visão geral do Flow Loop Test
measuring!
Fill out the spreadsheet
Dumping the tool
Starting pump
Yes
Saving the spreadsheet
Moving Tools
Programming Tool
Setting up
i Moving the ' Control Collar to Flow Loop
&amp;lt;area /
Setting flow for torque test set point
Measuring the anti clockwise torque
Fill out the spreadsheet
Measuring the clock wise torque
DOWNLINK LOOP
Connecting the Control Unit Test cable to the Upper Torquer spindle connector and programming the tool using ToolScope
Turning the pump on
4 Z
Set flow for 130
GPM
Setting flow for
the Downlink&amp;lt;- Waiting 2 min set point
Installing the Control Unit into the appropriate Collar.
Moving the Control Collar to the Flow Loop's rack
Prepari ng the setup
Checking if the Downlink was accepted
Disassembling the setup
Measuring the torque friction
Executing		Waiting
HIGH or LOW		Downlink
Command		time
Figura 2.5: Fluxograma detalhado do Flow Loop Test
De forma resumida, o teste e constituído de 7 etapas. Primeiro e necessário
mover o Control Collar para o cavalete da planta. O tempo de movimentação da ferramenta varia bastante, pois depende da disponibilidade das talhas do chao de fabrica.
Logo em seguida, deve-se conectar um cabo entre o Control Unit e um computador para programar a ferramenta. Tendo a ferramenta programada, desconecta-se o cabo e inicia-se o procedimento de carregar o Control Unit para dentro do Control Collar e parafusa-lo. Em seguida, conectam-se as mangueiras no Control Collare abrem-se as valvulas da Figura 2.6.
Figura 2.6: Válvula do tipo esfera
A quarta etapa do teste e ligar o inversor de frequência, Figura 2.7, que controla a bomba d’agua.
Figura 2.7: Inversor de Frequência
Na Figura 2.8, o número ”3”aponta o motor, de potência superior a 40kW utilizado para bombear a agua. O número ”1”aponta o reservatório para cerca de nove mil litros de agua e o numero ”2”mostra parte da linha que leva a agua ate a ferramenta.
Figura 2.8: Motor de 400V utilizado para acionar bomba d’água e linha de vazão do teste.
Depois de ter a ferramenta montada e a bomba ligada, o proximo passo do teste e enviar um downlink para a ferramenta. Downlink e um procedimento que utiliza a mesma base teorica da telemetria do MWD, mas com objetivos diferentes. Algumas ferramentas de perfuracao direcional, como as do tipo push-the-bit da SLB, podem ser reprogramadas para mudar a direcao de perfuracao no meio de uma operacao, sem ter que trazer a ferramenta para superfície. Para isso, a pessoa responsavel por realizar a perfuracao (directional driller) pode enviar um downlink para a ferramenta.
Downlink nada mais e do que enviar um comando para a ferramenta utilizando uma sequencia binaria. Essa informacao e enviada para dentro do poco através de pulsos de lama e interpretado pelo circuito eletrônico da ferramenta. Para identificar esses pulsos de lama, a ferramenta push-the-bit supervisiona, durante todo o tempo, a taxa de rotacao de sua turbina e consegue inferir mudancas de vazao da lama. Para
enviar os pulsos de lama, o directional driller varia a taxa de bombeio de lama das bombas na superfície.
No Flow Loop Test, o downlink e simulado utilizando-se agua no lugar da lama, e um inversor de frequencia para controlar a vazao de fluido bombeado para a ferramenta.
O sexto e mais complexo passo do teste e o teste de torque. O teste de torque mede se o torque que o Control Unit esta exercendo no Bias Unit e suficiente para o bom funcionamento da ferramenta. Para isso, um dos tecnicos conecta um torquímetro no eixo da ferramenta e realiza as medidas de torque. Enquanto isso, o outro tecnico confere no display do sensor de vazao, a vazao naquele exato instante. Apos ter coletado o valor de torque e vazao no mesmo instante, os dados sao inseridos em um software que calcula se a ferramenta esta funcionando bem, ou nao.
O teste de torque e feito para 7 diferentes set-points de vazao. Para cada setpoint e realizada uma medida de torque no sentido horario e outra no sentido antihorario.
O ultimo passo do teste e desmontar todo o set-up e analisar os dados do teste que ficaram gravados na memoria do Control Unit. Se todos os dados estiverem certos e os valores de torque estiverem dentro de faixas aceitaveis, a ferramenta esta pronta para continuar seu ciclo de manutencao.
Identificando as Causas dos Problemas
Antes de projetar uma solucao para os problemas de custo e qualidade relacionados com o Flow Loop Test, e preciso identificar as causas de cada um. Para identificar o problema de custo, foi realizado a modelagem do processo no decorrer do tempo, Figura 2.9. Analisando esse diagrama e possível ver que, apos ajudar na movimentacao da ferramenta, o tecnico 2 fica ocioso por mais de 60% do teste. Esse tempo ocioso e a maior causa de desperdício no Flow Loop Test e sera o foco das acoes de reducao de custo.
Para identificar a causa da alta taxa de retrabalho no teste, foi feito um estudo detalhado em cada bloco do fluxograma da Figura 2.5. Como resultado, foi identificado que na grande maioria das vezes em que o processo sofria retrabalho, a causa era erro humano. A Figura 2.10 mostra a fonte desses erros humanos: o downlink. Como downlink e uma forma de transmitir informacao para a ferramenta por uma sequencia
binária, os ”zeros”e ”uns”da sequência (que são pulsos positivos e negativos na vazão do fluido que passa pela ferramenta) devem ser enviados nos instantes corretos. Esse processo de downlink era feito de forma completamente manual pelos tecnicos.
Figura 2.9: Timeline do processo antes do projeto.
Figura 2.10: Processo feito manualmente pelos técnicos com alta taxa de erro humano
O técnico dispunha de um cronômetro, uma tabela com os tempos em que cada sinal binario deveria ser enviado para a ferramenta e um botao que envia os sinais ”ze-ros”e ”uns”para o inversor de frequencia, Figura 2.11. Cada downlink dura em media 5 min e durante todo esse tempo o tecnico deve enviar diversos ”zeros”e ”uns”para a ferramenta nos instantes exatos. Como essa atividade requer boa precisao e atencao total durante todo o tempo, e compreensível que a taxa de erro humano seja tao elevada.
2.1.3: Analyze
Para eliminar a necessidade do tecnico 2 participar do teste, e necessario modificar 3 processos do Flow Loop Test, veja Figura 2.12.
1.	O processo de preparar o set-up vinha sendo realizado por dois tecnicos, uma vez que uma pessoa sozinha nao conseguia movimentar e instalar o Control Unit no Control Collar. Entretanto, foi testado realizar esse mesmo processo
Figura 2.11: Controlador do inversor de frequência.
Figura 2.12: Processos do Flow Loop Test que devem ser alterados.
ra l_ c	b S			£ E	c	3			
o o	i S	5	5	o			“O	□	
H	e E ? E	0	js	Cfl L.&amp;lt;o		s fl	Ul	&lt;T u Q	S 0 E í E 2
&lt;U U.	2O-	1S‘	8. 1 O.	«y		5 C 10'	o O	s	V 1—	1- 14-	* s i £ **"	15‘
			4		S'	r			
			O						
rn			'2.						
a. C	&lt;U	•		CD				&lt;U	ra
&lt;J CJ	k.							3	
O E	&lt;u	0	Oi	OJ				cr	0)
	Q.	e	“O	□	L			o	Q.
2 t		&amp;amp;					&lt;ü		W)
&lt;U	LU	t	ts	LU			1-		LU
LL.	í0-	15*	i	io-	*			w		16'	15*
			hr						
com apenas um técnico através de um cart (carrinho projetado para transporte de ferramentas) com regulagem de altura. Os resultados da utilizacao do cart foram muito bons e, com isso, o processo de "preparar o set-up”passou a ter sua realizacao factível por apenas um tecnico.
2.	O processo de realizar o teste de fricção pelo tecnico 2 ao mesmo tempo que o tecnico 1 prepara a planilha do Flow Loop Test poupava cerca de 5 min do tempo final do teste. Entretanto, o fato das duas atividades serem realizadas simultaneamente nao era um requisito do processo, podendo enteio, ser realizado apenas por uma pessoa.
3.	O teste de torque e o processo mais complexo de ser alterado. Como foi explicado anteriormente, o teste de torque envolve a medida do torque no eixo do Control Unit ao mesmo tempo que a deve-se medir a vazao do fluido que passa pela ferramenta. Para que esse processo seja factível por apenas um tecnico, e
necessario que haja um software que receba em tempo real as medidas de torque e vazao e, ao comando do tecnico, armazene os valores medidos naquele instante.
Para solucionar os problemas de erros humanos foi decidido automatizar o downlink. Para isso e necessario que haja um software em que o usuario possa escolher qual downlink ele deseja realizar. Esse software se comunicaria com uma placa de aquisicao de dados que, por sua vez, controlaria o motor atraves do inversor de frequencia.
Portanto, a solucao a ser implementada deve ser capaz de ler em tempo real o valor da vazao na ferramenta, do torque no eixo do Control Unit e conseguir controlar o motor atraves de um software. Com isso, o processo de teste de torque e de downlink serao feitos de forma automatica e coordenados por apenas um tecnico.
2.1.4: Improve
Para o desenvolvimento da automacao do teste foram impostas algumas restricoes. A primeira e que o projeto deve ser de baixo custo e contar apenas com componentes locais (que podem ser comprados na cidade de Macae ou com rapida entrega pela Internet). A segunda restricao e que o set-up do Flow Loop Test deve ter o mínimo de modificacoes possíveis. Por ultimo, apos a implementacao do projeto, devera ainda ser possível realizar todo o procedimento de forma manual, para eventuais falhas no projeto e/ou a realizacao de um teste fora das especificacoes do sistema.
A parte de desenvolvimento tecnica do projeto esta registrada nos capítulos posteriores.
2.1.5: Control
Apos a finalizacao do projeto de estagio, o time de manutencao de ferramentas direcionais foi treinado para utilizar o sistema desenvolvido. A equipe de engenharia de manutencao de D&amp;amp;M ficou responsavel por futuras melhorias no processo e divulgacao dos resultados obtidos para outras bases da Schlumberger.
No capítulo de conclusao sera abordado com maiores detalhes os resultados do projeto.
2.2: Cronograma
O desenvolvimento do projeto foi dividido em tres estagios. O primeiro estagio contou com o desenvolvimento do hardware, representado pela placa de aquisicao de dados. O segundo estagio contou com o desenvolvimento do software e da interface do sistema com a leitura de torque. Por ultimo, foi feito uma pesquisa com o time de manutencao da ferramenta push-the-bit para realizar melhorias de projeto baseado na experiencia dos usuarios.
Tabela 2.1: Planejamento do estágio 1 do projeto
Estagio 1	
Tarefa	Duraçao (sem.)
Especificação/Projeto de placa de aquisição de dados	2
Comunicação entre a placa de aquisiçao de dados e o inversor	2
Leitura do sensor de vazao atravás da placa	2
Implementação de controlador PI	1
Tabela 2.2: Planejamento do estágio 2 do projeto
Estagio 2	
Tarefa	Duração (sem.)
Desenvolvimento da interface gráfica do software	2
Implementação de protocolo de comunicação com a placa	1
Implementação de protocolo de comunicaçao com torquámetro	1
Prototipagem do sistema	2
Tabela 2.3: Planejamento do estágio 3 do projeto
Estagio 3	
Tarefa	Duração (sem.)
Acompanhamento de uso do protátipo e levantamento de melhorias	1
Implementação de melhorias no projeto	1
Capítulo3: Hardware
A parte de hardware necessaria para automatizar o processo e composta, basicamente, de uma placa eletronica capaz de controlar a bomba d'agua, adquirir o sinal de saída do transmissor de vazao e trocar informacoes com um sistema supervisorio instalado em um computador.
Para projetar a placa, primeiro e preciso conhecer o funcionamento do inversor de frequencia que aciona a bomba e, em seguida, do medidor de vazao.
3.1: Inversor de Frequencia
Inversor de Frequencia e um dispositivo eletrico ou eletromecéànico capaz de converter um sinal eletrico CC (corrente contínua) em um sinal eletrico CA (corrente alternada). Para converter um sinal de tensao ou corrente contínua em alternada, os inversores usam componentes eletrônicos como transistores, IGBTs ou MOSFETs para chavear o sinal de entrada [23]. Existem diversas aplicacoes para os inversores de frequencia, entre elas esta o acionamento de motores eletricos. No Apendice A e explicado de forma mais detalhada como funciona um inversor de frequencia e quais sao as suas vantagens.
Para controlar a bomba d'agua, a placa eletronica a ser desenvolvida nesse projeto deve conseguir controlar a frequencia do motor de inducao que bombeia agua para a ferramenta. Como o inversor jaí possui todo interfaceamento de controle do motor, o problema do projeto consiste em controlar o set-point da referencia de frequencia do inversor. Para que seja possível desenvolver um sistema capaz de enviar esse sinal de referencia para o inversor, e necessário conhecer um pouco melhor como ele funciona. A Figura 3.1 mostra os principais blocos que compoes um inversor de frequencia.
Figura 3.1: Blocos de um inversor de frequência [21].
3.1.1: 1o Bloco-CPU
A CPU (Unidade Central de Processamento) de um inversor de frequência pode ser formada por um microprocessador ou por um microcontrolador. Isso depende apenas do fabricante. De qualquer forma, e nesse bloco que todas as informaccíes(par&lt;âmetros e dados do sistema) estao armazenadas, visto que tambem uma memoria esta integrada a esse conjunto. A CPU nao apenas armazena os dados e parâmetros relativos ao equipamento, como tambem executa a funcao mais vital para o funcionamento do inversor: geracao dos pulsos de disparo, por meio de uma logica de controle coerente para os IGBT's [21].
3.1.2: 2o Bloco-IHM
O segundo bloco e a IHM (Interface Homem Maquina). É atraves desse dispositivo que podemos visualizar o que esta ocorrendo no inversor (display) e configurâ-lo de acordo com as necessidades da aplicacao. A Figura 3.2 mostra o IHM do inversor utilizado nesse projeto.
Figura 3.2: Display de controle do inversor modelo Varispeed E7 - Yaskawa
3.1.3: 3o Bloco - Interfaces
A maioria dos inversores pode ser comandada por dois tipos de sinais: analógicos ou digitais. Normalmente, quando deseja-se controlar a velocidade de rotacao de um motor AC no inversor, utilizamos uma tensao analogica de comando. Essa tensao se situa entre 0 a 10 Vcc. A velocidade de rotacao (RPM) e proporcional ao seu valor, por exemplo: 1 Vcc = 1000 RPM, 2 Vcc = 2000 RPM. Para inverter o sentido de rotacao, basta inverter a polaridade do sinal analogico (de 0 a 10 Vcc sentido horario e -10 a 0 Vcc sentido anti-horario). Alem da interface analogica, o inversor possui entradas digitais. Com um parámetro de programacao, podemos selecionar a entrada valida (analogica ou digital) [21]. A Figura 2.11 mostra como o usuario pode controlar as entradas analogicas do inversor.
3.1.4: 4o Bloco - Etapa de potencia
A etapa de potencia e constituída por um circuito retificador, que alimenta (atraves de um circuito intermediario denominado ”barramento DC”) o circuito de saída do inversor (modulo IGBT).
Antes da implementacao do projeto, a referencia de frequencia do inversor era ajustada atraves do modulo manual de controle mostrado na Figura 2.11. Esse controlador manual enviava um sinal analogico de tensao para o inversor, que por sua vez controlava a frequencia do motor. Como especificacao do projeto, visando evitar alteracoes no set-up do teste, a placa eletrônica a ser desenvolvida devera usar tambem um sinal analogico de tensao para controlar o inversor. A ideia e desenvolver um projeto em que nao seja necessario modificar nenhuma configuracao do inversor,
sendo possível que o usuário possa optar em realizar o teste de forma manual ou automática apenas mudando a posicao de uma chave no modulo de controle. A Figura
3.3	mostra esse conceito.
Figura 3.3: Módulo de controle do inversor - Posição automático e manual
3.2: Transmissor de vazão
Atualmente, inumeros instrumentos capazes de medir a vazao volumetrica de um fluido sao utilizados na industria. Esses instrumentos podem utilizar diversos princípios de funcionamento, como por exemplo, medidores por obstrucao, mostrado na Figura 3.4, medidores por deslocamento positivo, Figura 3.5 e medidores eletro-magneticos, Figura 3.6. Em [26] e demonstrado a teoria por tras da maioria dos instrumentos de medicao de vazao utilizados na industria.
Figura 3.4: Medidor de vazão por placa de orifício
Figura 3.5: Medidor de vazão por deslocamento positivo
Figura 3.6: Medidor eletromagnetico de vazão
Entre os três medidores de vazão mostrados nas Figuras 3.4, 3.5 e 3.6, o medidor eletromagnético se destaca por nao interferir no escoamento do fluido, evitando perdas de cargas. Alem disso, a sua utilizacao independe do conhecimento de propriedades do fluido, quer sejam termo-físicas (viscosidade) ou termodinamicas (massa específica, temperatura, pressao) [26]. Contudo, os medidores eletromagneticos exigem que o fluido tenha uma condutividade eletrica mínima. O Apendice B detalha melhor o funcionamento de medidores eletromagneticos de vazao.
Figura 3.7: Medidor SITRANS F M MAGFLO Mag5000, Siemens
O transmissor de vazao utilizado no Flow Loop Test e o modelo SITRANS F M MAGFLO Mag5000 da Siemens, um tipo de medidor eletromagnetico, Figura 3.7. O Mag5000 possui circuitos eletrônicos que amplificam o sinal do sensor, o filtram, corrigem nao-linearidades e o convertem para um sinal de saída, digital ou analogico. Em aplicacoes industriais, e comum que os transmissores de vazao utilizem sinais de saída do tipo analogico, atraves correntes eletricas na faixa de 4 a 20 mA.
3.3: Projeto da Placa de Aquisição de Dados
A placa eletronica de aquisicao de dados deve ser capaz de receber um sinal de corrente (4 a 20 mA) do sensor de vazao; controlar o inversor de frequencia atraves de um sinal de tensao (0 a 10 V) e, ao mesmo tempo, se comunicar em tempo real com o software supervisorio que estara sendo executado no computador. Para atender aos requisitos de projeto, foi definido o uso de uma placa microcontrolada chamada Arduino, Figura 3.8.
Figura 3.8: Placa Arduino Uno
Arduino é uma plataforma de prototipagem eletrônica de hardware livre, ou também chamada de open-hardware, que significa que a placa pode ser adquirida em alguma loja ou montada pelo proprio usuario atraves de manuais disponibilizados na internet. A placa e projetada com um microcontrolador Atmel AVR, com suporte
de entrada/saída embutido e uma linguagem de programação padrão, na qual tem origem em Wiring, e e essençialmente C/C++. Arduino pode ser usado no desenvolvimento de sistemas stand-alone, que funcionam de forma independente, ou em sistemas controlados por softwares em execuçao em algum computador [27].
A plataforma Arduino vem ganhando bastante mercado nos ultimos anos e, atualmente, conta uma grande variedade de placas projetadas com propósitos específicos para diferentes tipos de operacao. Nesse projeto, a placa utilizada foi a Arduino Duemilanove, com processador ATmega328. Essa placa conta com 14 pinos de entrada/saída digitais, sendo que 6 deles podem ser configurados para fornecer saída com PWM. Tambem estao presentes 6 pinos de entrada analogica e um cristal oscilador de 16 MHz.
A escolha pela placa Arduino se deu por inumeras razoes, entre elas esta a rapida curva de aprendizagem; baixo custo; alta flexibilidade e facil suporte para desenvolvedores, pela Internet. A placa atende as especificares do projeto, uma vez que possui entradas analogicas para leitura da vazao e saída PWM para acionamento do inversor. No Apendice A e demonstrado como funciona um sinal PWM.
Com o uso do Arduino, o projeto de hardware se torna muito mais simples, ja que a placa Duemilanove possui funcionalidades intrínsecas de placas de aquisicao de dados, sendo extremamente facil programa-la para enviar valores de leitura para um software e receber set-points para as suas saídas digitais e PWM. Sendo assim, o problema do projeto de hardware se limita a desenvolver os circuitos de interfacea-mento do Arduino com o inversor e com o transmissor de vazao. Nas proximas secoes seraí relatado como foi o projeto desses circuitos e quais foram as dificuldades encontradas.
3.3.1: Projeto de Circuito para Controle do Inversor
O inversor Varispeed E7 conta com um modulo de entrada analogica para controle da referência de frequencia do motor. Essa entrada analogica pode ser um sinal de tensao de 0 a 10 V ou um sinal de corrente de 4 a 20 mA. Por padrao, o inversor utiliza o sinal de tensao como entrada.
O inversor possui uma fonte de tensao de 15 V, sinal +V, uma referência de 0 V, sinal AC, e um canal de entrada A1, veja a Figura 3.9. O modulo de controle manual da Figura 3.3 utiliza um potenciometro de 2 kQ para dividir a tensao da fonte e controlar
o valor do sinal A1.
Oto 10V
I3
2kfl [V
1
Módulo de Entrada
Analógica do Inversor
Analog Input 1: Master frequency reference Oto 10V (20kQ)
Analog input power supply +15V. 20mA
E(G) Shield terminal
Figura 3.9: Mádulo de entrada analógica do inversor de frequência - Sinais +V, A1 e AC
Tabela 3.1: Sinais do modulo de entrada analógico do inversor
Sinal	Descrição
+ V	sinal de 15 V vindo da fonte do inversor
A1	sinal de controle de 0 a 10 V para o inversor
AC	sinal de 0 V vindo da fonte do inversor
Para controlar o valor de tensao do sinal A1, veja Tabela 3.1, sera utilizado o sinal de saída PWM do Arduino. Para isso, e preciso estar atento a alguns detalhes. Primeiro, o sinal PWM do Arduino opera na faixa de 0 a 5 V, enquanto o sinal A1 opera entre 0 e 10 V. Alem disso, como os circuitos sao independentes pode haver problemas de aterramento, ou problemas de acoplamento. Isso significa, de forma grosseira, que a referência de 0 V para o Arduino pode nao significar 0 V para o inversor, o que pode causar diversos problemas no funcionamento da placa.
É possível resolver o problema da faixa de operacao do sinal PWM do Arduino atraves de transistores bipolares. O principio do transistor e poder controlar a corrente que passa entre dois dos seus terminais. Ele eí montado em uma estrutura de cristais semicondutores, formada por tres camadas. Cada uma dessas camadas recebe
um nome em relação à sua função na operação do transístor. As extremidades são chamadas de emissor e colector, e a camada central e chamada de base.
Os transistores funcionam de forma a liberar a passagem de corrente entre o coletor e emissor quando ha uma determinada corrente na base. A corrente necessaria na base do transistor pode ser de ordem muito inferior a corrente que passa entre os outros terminais. Os transistores bipolares podem ser do tipo PNP ou NPN, Figura
3.10.
Figura 3.10: Transistores bipolares NPN e PNP
Existem centenas de formas diferentes para a utilização dos transistores. Nesse trabalho vamos utiliza-los como amplificadores e como chaves "liga-desliga”, em ingles switches. Para amplificar a escala do sinal PWM de 0 a 5 V para 0 a 10 V, e necessario que haja um fonte que forneca uma tensao de, pelo menos, 10 V. Como o sinal PWM e uma onda quadrada, quando ele estiver em nível alto a saída do Arduino ira gerar um sinal de 5 V, quando ele estiver em nível baixo a saída sera de 0. Assim, se o pino de saída do Arduino for conectado em um resistor de valor R, toda vez que o PWM estiver em nível alto sera gerada uma corrente i que entrara na base de um transistor bipolar NPN. O transistor, por sua vez, chaveara o sinal da fonte e, com isso, amplificara a saída PWM. A Figura 3.11 mostra o esquemático desse circuito.
O uso do circuito da Figura 3.11 em teoria resolve o problema do controle do inversor, uma vez que e possível utilizar os sinais + V e AC como uma fonte externa. Na pratica, esse circuito nao se mostrou uma boa opcao. Todas as vezes que o circuito era montado e iniciava-se os testes para controlar a referência de frequencia do inversor, a placa do Arduino reinicializava sozinha e cortava a comunicacao com o computador. A razao desse comportamento instavel e que, com esse tipo de acoplamento entre os circuitos, muitos ruídos e picos de corrente vinham do inversor de frequencia ate o Arduino, o que causava o mal funcionamento do mesmo.
Para desacoplar eletricamente os circuitos e necessario a utilizacao de optoa-copladores. Optoacopladores, tambem conhecidos como optoisoladores ou fotoisola-
Figura 3.11: Utilizando transistor para amplificar sinal PWM do Arduino
dores, sao componentes eletrônicos projetados para transferir sinais eletricos através de ondas de luz, isolando eletricamente dois circuitos diferentes. A ideia principal do uso de optoacopladores e ”evitar que altas tensoes, ou variacoes rapidas de tensao, de um lado do circuito cause danos no circuito do outro lado” [29].
A ligação otica utilizada pelos optoacopladores se da entre um diodo emissor de luz e um outro componente sensível a luz, como por exemplo um foto transistor. No caso do foto transistor, o feixe de luz emitido pelo diodo age como uma corrente na base de um transistor bipolar, chaveando os terminais do coletor e emissor. Os optoacopladores sao projetados para resistir a altas voltagens (500 V a 10 kV) entre sua entrada e saída. Esse e o principal parâmetro que indica a sua funcao de isolador eletrico. A Figura 3.12 mostra o esquema do circuito integrado (CI) de um optoacoplador.
Como o optoacoplador jaí utiliza um foto transistor, ele pode ser utilizado para
1
Figura 3.12: Princípio de funcionamento dos optoacopladores
resolver o problema da ampliação do sinal PWM discutido anteriormente, sem a necessidade do uso de outro transistor. A Figura 3.13 mostra o circuito final para controle do inversor. O funcionamento basico do circuito e o mesmo da Figura 3.11, com a diferenca de que o terra do Arduino nao esta conectado junto a referencia de 0 V do inversor.
Figura 3.13: Circuito para controle da entrada analógica do inversor de frequência
3.3.2: Projeto de Circuito para Leitura da Vazão
O circuito projetado para ler o sinal de corrente vindo do transmissor de vazao e bastante simples. Através da Figura 3.14 e possível notar que o transmissor utiliza dois cabos para transmitir o sinal. Um cabo e conectado no pino 31 (daqui pra
frente chamado de S+), de onde parte a corrente, e outro no pino 32 (daqui pra frente chamado de S-), por onde a corrente retorna ao transmissor fechando o loop.
Figura 3.14: Módulo de saída analógica do transmissor de vazão Mag5000
A entrada analógica do Arduino consegue ler um sinal de tensão de 0 a 5 V, drenando uma corrente maxima de 40 mA por pino. A leitura de tensao nessa faixa de operacao e feita com uma resolucao de 10 bits, o que significa que um sinal de 5 V e dividido em 1024 (210) partes, sendo, portanto, a placa capaz de identificar um alteracao de aproximadamente 0,5 mV () no sinal.
Como o sinal analogico que vem do transmissor e um sinal de corrente, e preciso utilizar um valor de resistencia conhecido para que a tensao sobre ele seja medida pela placa e o valor da vazao seja inferido. Partindo da Lei de Ohm, em que U = R.i, onde U e o sinal de tensao, R a resistencia e i a corrente, se temos uma corrente maxima de 20 mA, e para esse valor devemos ter uma tensao maxima de 5 V, a resistencia a ser utilizada no circuito deve ser de, no maximo, 250Q, R = U .A Figura 3.15 esquematiza esse circuito.
Figura 3.15: Princípio de funcionamento do circuito utilizado para ler sinal de corrente
Entretanto, o circuito mostrado na Figura 3.15 nao funcionou na pratica. Da mesma forma que no circuito utilizado para controlar o inversor nao foi possível aterrar
o Arduino em comum com o sinal de 0V da fonte, nao foi possível fazer o mesmo com o circuito de leitura da vazao. Sendo assim, foi necessario mais uma vez o uso de optoacopladores para isolar eletricamente os circuitos.
Antes de projetar um circuito utilizando optoacopladores, foi necessario estudar a relacao entrada/saída desse componente para diferentes valores de corrente. Para realizar o estudo foi feito um teste com o componente 4N35, conectando uma fonte de corrente na entrada do diodo, alimentando o coletor do transistor com uma fonte de 5V e conectando o emissor em uma das entradas analógicas do Arduino. A Figura 3.16 mostra o circuito montado para o teste.
Figura 3.16: Teste da relação entrada-saóda do optoacoplador JN35
O teste foi realizado variando a corrente na entrada do optoacoplador de 4 a 40mA e medindo a leitura da porta analogica do Arduino (valores de 0 a 1024). A Figura 3.17 mostra os resultados desse teste, em que foi possível notar um forte comportamento nao linear do optoacoplador. Entretanto, o optoacoplador apresentou um comportamento razoavelmente linear para valores de ate 14mA. Veja a Figura 3.18.
Para contornar o problema da nao-linearidade, foi projetado um divisor de corrente para fazer com que a corrente que entra no optoacoplador esteja dentro da faixa de operacao desejada.
Como pode haver variacoes no comportamento de cada componente, foi incluído um trimpot no circuito. Trimpot nada mais e do que um resistor variavel, em que o usuario pode alterar seu valor dentro de uma determinada faixa. A Figura 3.19
Figura 3.17: Resultados do teste da relação entrada-saída do optoacoplador JN35
Figura 3.18: Faixa de operação aproximadamente linear do optoacoplador JN35
mostra o circuito completo de leitura do sinal de corrente.
É possível notar no circuito da Figura 3.19 um resistor e um capacitor entre o optoacoplador e a porta de entrada analógica do Arduino. Esses dois componentes formam um filtro passa-baixa que foi projetado para filtrar ruídos de alta frequencia. A frequencia de corte do filtro (fc) deve ser proxima a 2 Hz, portanto a constante de tempo RC, que e calculada por RC =	, deve ser aproximadamente 10-1 s. Em [30]
sao demonstradas maiores informacoes sobre filtros passa-baixa.
A Figura 3.20 mostra o sinal lido pela placa sem a utilizacao do filtro e a Figura 3.21 mostra o sinal filtrado.
Figura 3.21: Sinal de corrente filtrado
3.4: Prototipagem
O circuito completo do projeto envolveu a juncao dos circuitos das Figuras 3.19 e 3.13. A Figura 3.22 mostra o circuito final. Nesse circuito foi acoplado tambem um
buzzer para que o sistema seja capaz de enviar sinais sonoros de sinalizacao para os usuarios. O Anexo B apresenta a lista completa de componentes utilizados no prototipo.
Figura 3.22: Circuito final do projeto
Apos ter o esquema do circuito pronto e ter feito varios testes em uma protoboard, foi desenvolvido um protótipo. A primeira etapa para a construcao do protótipo foi a fabricacao de uma placa de circuito impressa (PCB) com o esquema da Figura 3.22.
Para a criacao da PCB foi utilizada uma versao de testes do software EAGLE PCB Software. O software se mostrou bastante intuitivo e pratico. A Figura 3.23 mostra o circuito da PCB.
Figura 3.23: Placa de circuito impressa com escala em mm
A Fabricacao da PCB foi feita de forma completamente manual. De forma resumida, o circuito da Figura 3.23 foi impresso em papel fotográfico em uma impressora a laser; em seguida o desenho foi transferido para uma placa de fenolite utilizando um ferro de passar roupas. Aptos ter o desenho do circuito estampado na placa, foi utilizado percloreto de ferro para corroe-la. O procedimento completo pode ser encontrado em [31]. Por fim, a placa foi furada e os componentes eletrônicos soldados, como pode ser visto na Figura 3.24.
Figura 3.24: Soldagem de componentes eletrônicos
A Figura 3.25 mostra como ficou o prototipo do hardware do projeto de automacao do Flow Loop Test.
Figura 3.25: Hardware
Capítulo4: Modelagem e Controle
Em uma das etapas do Flow Loop Test, conforme foi detalhado no Capítulo 2, e necessario realizar sucessivos testes de torque no Control Unit das ferramentas do tipo push-the-bit. O teste de torque da ferramenta se divide em sete etapas. Para cada etapa existe uma referencia de vazao para a linha de teste da ferramenta. Por exemplo, o primeiro teste de torque deve ser feito com uma vazao de 300 GPM enquanto o segundo com uma de 350 GPM, e assim por diante. Sendo assim, faz-se necessario ter um sistema de controle automático da vazao.
4.1: Conceitos Básicos de Controle
Define-se como um sistema monovariável todo sistema com uma unica entrada e uma unica saída. O sistema de controle da vazao e um desses sistemas mono-variaveis, uma vez que a entrada do processo e a frequencia do motor e a saída e a medida de vazao que passa pela ferramenta, Figura 4.1.
Figura 4.1: Sistema de controle de vazão em malha aberta.
Anteriormente ao desenvolvimento desse trabalho, o controle da vazao no Flow Loop Test era realizado em malha aberta. Um sistema de controle em malha aberta, Figura 4.1, e um sistema em que a saída nao e medida e nem realimentada para comparacao com a entrada. Assim, para cada entrada de referência ha uma condicao de operacao fixa, ou seja, que nao se altera com a evolucao da saída. O controle por malha aberta possui varios pontos negativos, como por exemplo, na presenca de perturbacoes o sistema sai do seu ponto de operacao e pode nao desempenhar a funcao desejada, sendo entao necessario haver monitoramento do sistema durante todo o tempo por um operador.
Em geral, a operacao de um dado sistema em malha aberta (MA) nao e satisfatória. Por isso, a aplicacao de um dispositivo (ou elemento) de controle em malha fechada (MF)tem por objetivo melhorar o desempenho do sistema tanto em regime
transitório como em regime permanente. Este dispositivo de controle e comumente chamado de controlador, ou tambem de compensador. O controle de sistemas em malha fechada consiste, basicamente, em analisar o sinal de erro (diferenca entre "valor da saída’’e a referencia) e aplicar uma correcao no sinal de entrada da planta (ou sistema a ser controlado).
Na pratica, normalmente deseja-se que o sistema em malha fechada tenha um desempenho satisfatorio tato para a rejeiçao de perturbares como para o seguimento de referências. A Figura 4.2 mostra o esquema de um controlador em MF.
Figura 4.2: Sistema de controle em malha fechada.
4.2: Objetivos de Controle
Os objetivos de controle, ou especificares de controle, sao um conjunto de características de comportamento que deseja-se impor no sistema a ser controlado. Tipicamente, as especificares de controle se dividem em regime transitorio e especificares de regime permanente [32].
As especificares de regime transitorio estabelecem, para um determinado tipo de excitacao, as diferencas maximas aceitaveis entre a saída e um determinado padrao de resposta. Em geral os padroes de resposta estao definidos atraves de parâmetros como picos máximos, tempos para atingir um certo percentual do valor de regime permanente, etc. Ja as especificares de regime permanente estabelecem condicoes de seguimento ou rejeicao de determinados sinais que atuam sobre o sistema considerado e que devem ser mantidas quando o sistema encontra-se no ponto de operacao [32].
As especificares para o controlador de vazao desse projeto foram bastante conservadoras, uma vez que o tempo de resposta do sistema nao e o ponto crítico do Flow Loop Test. Sao elas:
•	O sistema deve ter erro nulo em regime permanente;
•	O sistema nao deve apresentar sobressinal;
•	O tempo de resposta do sistema (5%) deve ser menor que 30 s;
•	O sistema deve rejeitar perturbações do tipo degrau.
Para que essas especificares temporais possam ser consideradas na analise e projeto de controladores lineares, e necessario recorrer ao uso de modelos matemáticos para representacao do modelo da planta. Neste caso, sera considerado que o comportamento dinamico do processo em malha aberta e fechado pode ser modelado por uma funcao de transferência. Assim, a resposta do sistema a determinados sinais de entrada podera ser relacionada as características da funcao de transferência, seja utilizando diagramas polo-zero ou diagramas de resposta em frequencia do sistema.
4.3: Levantamento do Modelo
A aproximacao de sistemas reais por modelos matemáticos deve ser fiel suficiente para conseguir representar os seus aspectos essenciais de forma adequada para uma utilizacao particular [34]. A forma com que esses modelos matemáticos sao determinados pode ser dividida em duas categorias de procedimentos, a analise físico-matemática e a analise experimental [35].
A analise físico-matematica, ou fenomenologica, baseia-se na caracterizacao pelas leis da física. O ideal seria identificar todos os sistemas baseados nessas leis ja que as leis da física sao universais, mas na pratica existem processos industriais tao complexos que inviabilizam essa analise. Ja a analise experimental baseia-se em observacoes de dados do sistema e pode aplicar algoritmos computacionais para automatizar o processo de determinacao do modelo. Pela facilidade no uso e falta de necessidade de ter conhecimento previo do sistema, a analise experimental e a mais usada em ambiente industrial [35].
Nesse trabalho o modelo foi levantado a partir de uma analise experimental. Foram aplicados degraus em diversos pontos de operacao e, em seguida, foram analisadas as respostas do sistema. A Figura 4.3 mostra o resultado do ensaio.
Analisando a Figura 4.3 e possível notar que o sistema possui um comportamento diferente para cada ponto de operacao, variando por exemplo, o ganho do modelo. Alem disso, tambem e possível afirmar que, para qualquer ponto de operacao, o modelo pode ser bem aproximado por uma funcao de transferência de primeira ordem.
4.3.1: Sistemas de Primeira Ordem
Sistemas de primeira ordem sao representados pela funcao de transferencia da Equacao 4.1. Entretanto, sistemas de primeira ordem com zero, como mostra a Equacao 4.1, apresentam acoplamento direto entre a entrada e a saída. Ou seja, esse tipo de sistema apresenta resposta instantanea e, por esse motivo, nao e comum ser usado para modelar sistemas físicos reais.
G(s) = e-'-*Ke(1 + Ts)
1 + TS
(4.1)
Nesse trabalho, iremos estudar o comportamento de sistemas de primeira ordem representados pela Equacao 4.2.
G(s)
e t-s
Ke
1 + TS
(4.2)
E possível relacionar os parâmetros ke, T e t com as formas de onda da resposta ao degrau do sistema. O termo e-taS representa um atraso de transporte de ta segundos. Para o caso de sistemas estaveis, que e o caso do sistema em estudo, o valor de ke fornece a relacao estatica entrada-saída (ganho estatico) para uma entrada que tende a uma constante [32], Equacao 4.3.
Ke =
Uf — Ui
(4.3)
O parámetro t é definido como constante de tempo do sistema e dele depende
a forma da resposta da Figura 4.4. Além disso, t se relaciona com a resposta através da Equacao 4.4.
Figura 4.4: Resposta de sistema de primeira ordem para entrada degrau, (a) sem zero, (b) com zero [32]
t5% ~ 3t
(4.4)
Atraves do ensaio representado pela Figura 4.3 foi possível confirmar que o modelo do sistema pode ser aproximado por uma funcao de transferencia de primeira ordem do tipo ”a”, representado pela Figura 4.4. Ou seja, e um sistema sem zero e sem resposta instantanea.
A partir das equacoes 4.3, 4.4 e da analise do atraso de transporte na Figura
4.3,	foram levantados 17 modelos para a equacao 4.2. Veja a Tabela 4.1.
Tabela 4.1: Modelos experimentais
ID	Ui [%]	Uf [%]	Vi [GPM]	Vf [GPM]	Ke	ta [S]	T [s]
1	10	15	12	250	47,6	2,01	1,99
2	15	20	255	421	33,2	1,52	1,16
3	20	30	421	694	27,3	1,62	0,72
4	30	35	694	826	26,4	1,56	0,62
5	35	45	826	1084	25,8	1,07	0,89
6	45	50	1084	1210	25,2	2,36	0,84
7	50	60	1210	1459	24,9	1,60	0,95
8	60	70	1459	1702	24,3	1,57	0,84
9	70	75	1702	1819	23,4	0,39	0,53
10	75	80	1819	1858	7,8	1,37	0,22
11	80	70	1858	1693	16,5	1,45	0,24
12	70	60	1693	1431	26,2	1,34	0,47
13	60	50	1431	1198	23,3	1,26	0,51
14	50	40	1198	976	22,2	0,98	0,79
15	40	30	997	721	27,6	1,02	1,28
16	30	20	721	458	26,3	0,78	1,46
17	20	15	430	246	36,8	0,73	1,67
Mídia					25,8	1,4	0,8
4.4: Projeto do Controlador
Pelos objetivos de controle levantados anteriormente, um simples controlador PI (Proporcional-Integral) consegue atender as especificares. Em [33] e demonstrado as relacoes entradas/saídas para degraus na referencia e degraus na perturbacao e e comprovado que, para sistemas de primeira ordem controlados por controladores com acao integral, ha garantia de erro nulo em regime permanente. Como a planta a planta do Flow Loop Test e representada por um modelo de primeira ordem, o projeto do controlador se torna uma tarefa bastante simples.
O metodo de projeto de controladores pele lugar das raízes foi utilizado para alocar os polos e zeros do controlador de forma a atender as especificares de regime transitorio e permanente, mantendo a estabilidade do sistema. Em relacao a robustez, e necessario atentar-se ao valor do ganho do controlador, pois como ha atraso de transporte no modelo, um valor de ganho alto pode instabilizar a planta.
Dentre todos os modelos levantados no ensaio, o modelo utilizado utilizado para o projeto foi definido com o valor medio de cada variável (t, Ke e ta) e e mostrado na Equacao 4.5. A saída do modelo e o valor de vazao em GPM e a entrada e o sinal de
controle para o inversor de 0 a 100% (o que significa o mesmo que 0 a 60Hz).
G(s) = e-1,4s 25,8	(4.5)
1 + 0, 8s
Dependendo da faixa de frequencia em analise, o atraso de transporte presente na equacao 4.5 pode ser aproximado por um polinomio atraves da Equacao 4.6.
e taS
e»= i(i - n i)
1(1 + t2S )í( 1)
(4.6)
Esta formula de cálculo é conhecida como de Padée. Uma aproximação de Padee de primeira ordem e representada pela Equacao 4.7.
e-taS
1 - s
1 + t2S s
(4.7)
Para o projeto do controlador, o atraso de transporte do modelo foi aproximado para 2s, diferentemente do modelo da Equacao 4.5. Essa consideracao foi feita pois na planta real esse seria um valor bem próximo ao maior atraso de transporte encontrado e que deve ser considerado para projetar um controlador robusto. A Equacao
4.8	mostra o modelo utilizado para o projeto do controlador, substituindo o valor de 2s do atraso de transporte pela aproximacao de Padee de primeira ordem, mostrada na Equacao 4.7.
G(s) =	25,8(1 - s)
()	(1 + 0, 8s)(1 + s)
(4.8)
O controlador PI a ser ajustado para esse problema tem sua formula mostrada na Equacao 4.9.
C (s) = Kc
(Tis + 1)
s
(4.9)
O problema de projeto do controlador PI se resume ao ajuste de Ti e de Kc, que significa o posicionamento do zero do controlador no diagrama do lugar das raízes e o ajuste do ganho. Para que o zero nao seja dominante no sistema, ele deve ficar a esquerda do ”p2”no diagrama da Figura 4.5 e o ganho deve ser pequeno o suficiente para que os polos de malha fechada sejam posicionados de forma a atender as especificacões de projeto.
Figura 4.5: Diagrama polo-zero da Equacão 4.8 com realimentação negativa
Os polos de malha fechada devem permanecer sobre o eixo real negativo para que o sistema seja estavel e nao tenha sobressinal. A Ferramenta SISOTOOL do Matlab foi utilizada para fazer os ajustes de ganho e da posicao do zero. A Figura 4.6 mostra a tela de ajustes do SISOTOOL.
O controlador PI projetado tem a funcao de transferência mostrada na Equacao
4.10	e, para uma mudanca na sua referencia do tipo degrau, apresenta a resposta temporal mostrada na Figura 4.7.
C (s) = 0.006
(0.67 * s + 1)
s
(4.10)
Figura 4.6: SISOTOOL - Ferramenta do Matlab que auxilia o projeto de controladores
Para testar a robustez do controlador em relacao a variacao paramétrica dos
Vazão x Tempo
400		a.	I	I	\	
				
_ 300 s				
				
o				
200				
:&gt;				
100				
				Vazão Referencia
				
0	- s	i	I I	
0	5	10	15	20	25	30
Tempo [s]
Sinal de Controle x Tempo
					
					
					
[							| — Sinal de Controle | I	
0	5	10	15	20	25	30
Tempo [s]
Figura 4.7: Resposta a um degrau de amplitude unitaria
modelos da planta, foi realizada uma simulação no Simulink com 8 modelos de planta diferentes e o mesmo controlador da Equaçao 4.10. Simulink e uma ferramenta para modelagem, simulaçao e analise de sistemas dinamicos da empresa The MathWorks. O diagrama montado para o teste e mostrado na Figura 4.8 e a resposta temporal dos modelos para o controlador projetado e mostrado na Figura 4.9.
Vazão x Tempo
800
600 -
200 -
o.
O “ 400 -
O
!(ú
N
5
45	50
Tempo [s]
45	50
Tempo [s]
Sinal de Controle x Tempo
Modelo 1
------ Modelo 2
20 -
------ Modelo 3
Modelo 4
15 -
Modelo 5
10-
Modelo 6
------ Modelo 7
Modelo 8
o
O
O O
a&gt; ■u
-------Modelo	1
------Modelo 2
------Modelo 3
------Modelo 4
------Modelo 5
Modelo 6
------Modelo 7
...... Modelo	8
Figura 4.9: Resposta ao degrau para teste de robustez
A Figura 4.9 mostra que o controlador consegue ter uma resposta estável e dentro das especificares do projeto mesmo com as variacoes paramétricas encontradas no modelo real. Com isso, o projeto mostrou-se robusto o suficiente para ser implementado e testado na planta.
4.5: Algoritmo de Controle
Praticamente todos os sistemas de controle implementados atualmente sao baseados em sistemas controlados por computador. Esse tipo de sistema de controle e conhecido como controle digital e e basicamente composto de um processo real (planta analogica), um sistema digital processado e conversores A/D (analogico-digital) e D/A (digital-analogico) [36]. A Figura 4.10 mostra o diagrama de blocos de um controlador digital. Como o desenvolvimento desse projeto baseia-se em em mi-crocontrolador e um software, o controlador da vazao devera ser do tipo digital, sendo implementado por um algoritmo de controle.
Figura 4.10: Sistema de controle digital
O projeto do controlador digital pode ser feito de duas maneiras basicas: utilizando a teoria de controle analogico ou a teoria de controle digital. A primeira maneira consiste em projetar o controlador analogico e, em seguida, discretiza-lo para um controlador digital utilizando algum metodo de integracao numerica de equacoes diferenciais. A segunda maneira de se projetar um controlador digital e utilizando metodos discretos. Como foi visto nas secoes anteriores, esse trabalho utilizou o projeto de um controlador analogico para, em seguida, ser discretizado na forma de um controlador digital.
Antes de discretizar o controlador analogico, e necessario conhecer algumas características do hardware em que o sistema de controle sera implementado. No contexto desse trabalho, e necessario saber, por exemplo, como sao os conversores A/D e D/A da placa eletronica. Como foi discutido no Capítulo 3, o hardware projetado para o projeto utiliza uma placa de aquisição de dados baseada no Arduino. Atraves de testes de comunicacao entre o Arduino e o computador, pelo protocolo de
comunicação serial RS-232, foi constatado que o Arduino consegue enviar os dados de suas portas de entrada analógica para o software a cada 100 ms. Portanto, o período de amostragem do sistema de controle deve ser de, no mínimo, 100 ms. Alem disso, o Arduino utiliza um conversor D/A do tipo sustentador de ordem zero.
4.5.1: Discretizacao de Controlador Contínuo
Considere-se um sinal e(t), e sua transformada de Laplace E(s). Se aplicarmos esse sinal a um A/D, obteremos na saída, o sinal e(t) amostrado, que e representado por e*(t). A este sinal correspondera a transformada de Laplace E*(s), conforme e mostrado na Figura 4.11 [37].
e(t)
E(s)
Figura 4.11: Relacão entre os sinais de entrada e saída de um conversor A/D.
Pode-se representar E*(s) como mostra a Equacao 4.11, em que T e o período de amostragem.
E*(s) = J2 e(kT )e-kTs	(4.11)
k=0
Efetuando a mudanca de variavel z = eTs, pode-se afirmar que:
E (z) =	e(kT )z-k	(4.12)
k=0
A Equacao 4.12 corresponde a definicao de Transformada Z. O conceito de Transformada Z e necessario na solucao do problema de conectar um sistema discreto com um sistema contínuo atraves de um interpolador.
O interpolador utilizado no projeto foi do tipo ZOH (Zero-Order Holder), ou interpolador de ordem zero, Figura 4.12.
A funcao de transferencia do ZOH e dada pela Equacao 4.13.
Bo(s) = 1(1 - e-sT)	(4.13)
s
Figura 4.12: Transformação de pulsos em degraus através de um ZOH.
Para discretizar o controlador C(s) = 0.006(0'67ss+1), deve-se aplicar a formula da
Equação 4.14, conforme e discutido em [38].
BoG(z) = (1 - z-1)Z
(-)
BoG(z) = (1 - :	10.006°'67jj + 1
BoG(z) = 0.006(1 — z --------------1—
(4.14)
Como nesse caso o tempo de resposta do sistema em malha aberta é mais rápido que o tempo em malha fechada, o tempo de amostragem foi calculado baseado no tempo de acomodacao do sistema em MA. O valor de T foi calculado por , aproximadamente 200 ms. A partir da tabela de transformada do Anexo C, e possível chegar a equacao 4.15.
C (z) = 0.006(1 — z-1)
0.67	0.2z-1
(1 — z-1) + (1 — z-1)2
C(z) = 0.006
0.67+
0.2z-1 ’
1 - z-1
C(z) = 0.006
0.67 — 0.47z-1
1- z-1
C(z) =
0.00402 — 0.00282z-1
1 - z-1
(4.15)
Multiplicando os termos da Equacao 4.15 por z, e encontrada a equacao do controlador discretizado C(z) 4.16.
^z ,	0.00402z - 0.00282
C (z) =------------;-------
z — 1
(4.16)
4.5.2: Obtenção da Equação de Diferenças a partir da Transformada Z
Neste item e apresentado como obter a equacao de diferencas correspondente a funcao de transferência do controlador em tempo discreto, C(z), que sera implementada em computador.
Para se obter a equacao de diferencas equivalente a uma funcao de transferência em z, primeiro e preciso colocar a funcao C(z), da Equacao 4.16, em funcao de potencias negativas de z. Para isso, divide-se o numerador e denominador por z chegando-se a Equacao 4.17.
^z . 0.00402 - 0.00282: 1	. _
C (z) =------.	------ (4.17)
Como a funcao de transferência de C(z) representa a relacao entrada-saída entre o sinal de controle U(z) e o sinal do erro E(z), a Equacao 4.17 pode ser reescrita na forma da Equacao 4.18.
U(z) - z-1U(z) = 0.00402E(z) - 0.00282z-1E(z)	(4.18)
Calculando-se a Transformada Z Inversa da equacao 4.18, obtem-se a equacao de diferencas 4.19, que foi utilizada na implementacao da lei de controle no software [38].
u(k) = 0.00402e(k) - 0.00282e(k - 1) + u(k - 1)	(4.19)
4.6: Resultados
O controlador projetado se portou de forma satisfatoria nos testes realizados na planta. As Figuras 4.13 e 4.14 mostram os gráficos do valor da vazao e do sinal de controle no software supervisorio.
O projeto de um controlador conservador, com tempos de resposta moderados, fez com que o sistema de controle mantivesse o nível de robustez desejado. O algo-
Figura 4.13: Mudança de set-point da referência de vazão para 130 GPM.
Figura 4.14: Comportamento do controlador para diferentes set-points.
ritmo conseguiu atingir os objetivos de controle para todas as faixas de operacao de forma satisfatoria.
Pelo desenho da planta, nao havia uma maneira trivial de inserir perturbacao
no sistema e analisar a ação de controle. Com isso, como não se tratava de um ponto crítico para o sistema, nao foi relatado resultados referentes a rejeiçao de perturbações do tipo degrau.
Capítulo5: Software Supervisorio
5.1: Visão Geral do Sistema
Para que o processo do Flow Loop Test seja automatizado e se torne factível por apenas uma pessoa, e necessário que se tenha um sistema de controle super-visorio. A partir desse sistema, o tecnico podera monitorar e controlar as variáveis relacionadas ao processo de teste das ferramentas do tipo push-the-bit.
5.2: Levantamento de Requisitos
Antes de desenvolver o software, e preciso ter bem definido quais sao as especificacoes do sistema. Para isso, foram levantados quais sao os requisitos funcionais e nao funcionais do sistema supervisorio. Requisitos funcionais representam as funcoes basicas do sistema, enquanto os requisitos nao funcionais estao vinculados as restricoes dos requisitos funcionais.
As Figuras 5.1,5.2 e 5.3 mostram quais sao esses requisitos.
F1 Controlar vazão			Oculto (	)
Descrição: O sistema deve ser capaz de receber de controlar a vazão do teste em malha aberta e malha fechada. Para controlar a vazão em malha aberta o usuário deve ser capaz de escolher a porcentagem de uso do motor. Para o controle em malha fechada o usuário deve selecionar a vazão desejada.			
Requisitos Não - Funcionais			
Nome	Restrição	Categoria	Permanente
NF1.1 - Escolha do modo de operação	O sistema deve apresentar ao usuário as opções de modo de controle da vazão por malha aberta ou fechada.	Usabilidade	(X)
NF1.2-Controle da vazão em malha aberta	O sistema deve ser capaz de receber qualquer valor entre 0 e 100% e convertê-lo em um sinal de referência de 0 a 60Hz para o inversor de freqüéncia.	Tempo	(X)
NF1.3 - Controle da vazão em malha fechada	O sistema deve ser capaz de receber qualquer seí-pcmtde vazão dentro da faixa de operação da planta e ajustar automaticamente o valor do sinal de controle para alcançar a vazão desejada.	Tempo	(X)
NF1 j4- Monitoramento das variáveis	0sistema deve apresentar de forma visual e em tempo real o valor de leitura da vazão e do sinal de controle.	Interface	(X)
Figura 5.1: Requisitos funcionais do modo de controle do motor.
F2 Realizar Downlink automático			Oculto (	)
Descrição: 0 sistema deve ser capaz de realizar de forma automática todos os as sequências de Downlink utilizadas nas ferramentas do tipo push-the-bit.			
Requisitos Não - Funcionais			
Nome	Restrição	Categoria	Permanente
NF2.1 - Escolha do Downlink	Osistema deve apresentar ao usuário todas as opções de Downlink de forma prática e intuitiva.	Interface	(X)
NF2.2 - Monitoramento do Downlink	Osistema deve apresentar de forma visual e em tempo real o andamento do Downlink automático.	Tempo	(X)
Figura 5.2: Requisitos funcionais sobre o Downlink.
F3 Teste de Torque automático			Oculto (	)
Descrição: 0 sistema deve ser automatizar alguns passos do teste detorque de forma que o processo possa ser feito por apenas uma pessoa.			
Requisitos Não - Funcionais			
Nome	Restrição	Categoria	Permanente
NF3.1 - Carregar teste	Osistema dleve apresentar ao usuário a opção de escolher o tipo de ferramenta que será testada e carregar as informações de teste da mesma. As informações sobre o teste são constadas no manual de manutenção.	Especificação	(X)
NF3.2 - Ajustar set-pcmtde vazão para teste	Osistema deve ser capaz de ajustar a vazão correta para cada deste.	Especificação	(X)
NF3.3 - Adquirir dados	Osistema deve ser capaz de receber dados do leitor de forque e do sensor de vazão em tempo real.	Usabilidade	(X)
NF3Z - Armazenar e processar dados	Osistema deve ser capaz de armazenar os dados durante o teste de forque e processá-los de forma a atender o manual de manutenção da ferramenta.	Especificação	(X)
NF3.5 - Visualizar teste	Osistema dleve apresentar de forma visual e em tempo real o andamento do teste de forque.	Interface	(X)
NF3.6 - Gerar relatório	Osistema deve ser capaz de gera relatório com os dados do teste de forque	Especificação	(X)
Figura 5.3: Requisitos funcionais sobre teste de torque.
5.3: Plataforma de Desenvolvimento
A linguagem de programacao escolhida para o desenvolvimento do software foi Java. Java e uma linguagem de programacao orientada a objeto desenvolvida na decada de 90 por uma equipe de programadores na empresa Sun Microsystems. Diferentemente das linguagens convencionais, que sao compiladas para codigo nativo, a linguagem Java e compilada para um bytecode que e executado por uma maquina virtual. A linguagem de programacao Java e a linguagem convencional da Plataforma Java, mas nao sua unica linguagem [39].
A utilizacao de Java nesse projeto deu-se, primeiramente, por questões de custo, uma vez que um sistema desenvolvido em Java pode utilizar apenas tecno-
logia open-source, ou seja gratuita. Alem disso, Java apresenta características muito importantes no contexto desse projeto, como portabilidade, suporte e flexibilidade.
No contexto do desenvolvimento de softwares, portabilidade significa que programas escritos em Java possuem independencia de plataformas computacionais, ou seja, um programa escrito em Java deve funcionar em qualquer computador, em qualquer sistema operacional. Suporte se refere a outra característica importante do Java que e a sua grande comunidade de desenvolvedores. E possível encontrar bibliotecas gratuitas na Internet que implementam uma infinidade de funcionalidades e facilitam muito o trabalho do programador e possibilita alto grau de flexibilidade para o desenvolvimento de solucoes customizadas. Nesse trabalho, por exemplo, foram utilizadas bibliotecas que implementam gráficos em tempo real, API para comunicacao serial e para interface grafica, entre outros.
Foram utilizadas duas diferentes IDE (Integrated Development Environment) para o desenvolvimento do software:
• Eclipse Indigo: onde foi realizado a maior parte do software.
ellipse
Figura 5.4: IDE: Eclipse.
• Netbeans 7.1.1: onde foi programada toda a interface grafica.
Figura 5.5: IDE: NetBeans.
5.4: Comunicação com o Hardware
Para que o programa escrito em Java se comunique com a placa eletrônica desenvolvida, e necessario que haja um meio e um protocolo de comunicacao. A placa Arduino utilizada nesse projeto possui uma porta serial (tambem conhecida como UART ou USART) que utiliza os pinos digitais 0 (RX) e 1 (TX) para implementar o
Figura 5.6: Comunicação serial do Arduino atraves de conexão USB
protocolo RS-232. O meio de comunicaçao com o computador da-se atraves de uma conexão USB, como mostra a Figura 5.6.
Em telecomunicacoes e ciencia da computacao, comunicacao serial e o processo de enviar dados um bit de cada vez, sequencialmente, num canal de comunicacao ou barramento. E diferente da comunicacao paralela, em que todos os bits de cada símbolo sao enviados juntos. A comunicacao serial e usada em toda comunicacao de longo alcance e na maioria das redes de computadores, onde o custo de cabos e as dificuldades de sincronizacao tornam a comunicacao paralela impraticável. Para curtas distancias, barramentos seriais estao se tornando cada vez mais comuns devido ao ponto em que as desvantagens dos barramentos paralelos (densidade de interco-nexao) superam suas vantagens de simplicidade [40].
Exitem varios protocolos de comunicacao serial, como por exemplo RS-232, RS-423, RS-485 e Ethernet. No protocolo de comunicacao RS-232, caracteres sao enviados um a um como um conjunto de bits entre um DTE (terminal de dados -Data Terminal Equipment) e um DCE (comunicador de dados - Data Communication Equipment). Hoje, o protocolo de comunicacao RS-232 vem sendo, gradualmente, suprimido pelo USB para comunicacao local. O protocolo USB e mais rápido, possui conectores mais simples de usar e tem um melhor suporte por software.
5.4.1: Protocolo de comunicaçao
A implementação de um prôtôcôlô de comunicaçao serial entre a placa de aquisiçao de dados e o software esta diretamente relacionado com a camada de en
lace do modelo OSI (Open Systems Interconnection). OSI é um modelo de arquitetura para sistemas abertos, visando permitir a comunicacao entre maquinas heterogeneas e definindo diretivas genéricas para a construcao de redes de computadores independente da tecnologia de implementacao.
A camada de enlace e responsável por detectar e, opcionalmente, corrigir erros que possam acontecer no nível físico da comunicacao. A camada física diz respeito aos meios de conexao através dos quais irão trafegar os dados, tais como interfaces seriais, LPTs, hubs ou cabos coaxiais. A camada de enlace representa, portanto, um protocolo de transmissao e recepcao (delimitacao) de dados e pelo controle de fluxo da comunicacao entre sistemas diretamente conectados.
Existe uma iniciativa open-source de criacao de um protocolo genérico para comunicacao entre microcontroladores e softwares chamada FIRMATA, Figura 5.7. Esse protocolo estabelece uma comunicacao ente o Arduino e um software através de uma comunicacao serial e implementa todas as funcoes da camada de enlace. O objetivo do protocolo e oferecer um controle total sobre o Arduino pelo software que estaí sendo executado em um computador.
Figura 5.7: FIRMATA: protocolo de comunicação entre o Arduino e o software.
Apesar dessa iniciativa estar em fase de testes e não ter todas as funcionalidades do Arduino implementadas no protocolo, ela consegue suprir todos os requisitos desse projeto que sao: ler entrada analógica e escrever nas portas digitais da placa. O uso desse protocolo poupou muito tempo de desenvolvimento, uma vez que nao foi necessário implementar algoritmos de controle de fluxo de dados, controle de erros etc.
5.5: Implementação
O desenvolvimento do software foi baseado na solução dos requisitos de projeto das Figuras 5.1, 5.2 e 5.3. A interface grãfiça do programa e divida basicamente em duas seçoes principais, conforme e mostrado na Figura 5.8. A primeira e uma tela de monitoramento geral, que permanece ativa durante qualquer operacao do usuário, apresentando resumidamente o status do sistema. A segunda tela e específica para as operacoes de cada etapa do teste.
Figura 5.8: Seções principais do software.
A Figura 5.9, mostra a seção 1 em detalhes e tem as suas funcionalidades apresentadas na Tabela 5.1.
Figura 5.9: Painel de monitoramento principal.
Tabela 5.1: Funcionalidades da tela de monitoramento geral do sistema
ID	Descrição	Relação com	os requisitos
1.1	percentual de uso do motor	
1.2	valores de leitura em tempo real da vazao e torque	
1.3	tempo de duracão do teste e um quadro com informações sobre o status do downlink	NF2.2
A seção identificada pelo número 2 na Figura 5.8 e composta por um conjunto de 3 abas. A primeira e chamada de ’’Home’’, a segunda de ’’Downlink”e a terceira de ’’Testing”. Cada uma delas sera detalhada a seguir.
A aba Home, apresenta as informações principais do controle de vazão do teste. Suas funcionalidades visam o atendimento do requisito F1 e seus requisitos nao funcionais. A Figura 5.10 mostra os principais componentes dessa aba.
Figura 5.10: Aba Home.
Tabela 5.2: Funcionalidades da aba Home
ID	Descrição	Relação com	os requisitos
2.1.1	seletor de modo de controle, automático (Set Flow) ou manual (Set Frequency)	NF1.1
2.1.2	inicializa o controlador automático para o set-point desejado	NF1.3
2.1.3	ajusta a entrada do sistema de controle em malha aberta (percentual de uso do motor)	NF1.2
2.1.4	envia set-point do controlador em malha aberta	NF1.2
2.1.5	interrompe a ação do sistema de controle em malha fechada	NF1.3
2.1.6	gráfico em tempo real com o valor da vazao em galoes por minuto	NF1.4
2.1.7	gráafico em tempo real com o valor da açcãao de controle (%)	NF1.4
A aba Downlink, como o proprio nome diz, apresenta todas as informacoes ne-cessarias para realizar um downlink automatico. Ha uma tabela onde constam todos os downlinks existentes e algumas informacoes sobre eles. E importante destacar que existe um downlink que e utilizado apenas para o Flow Loop Test e que, por essa razao, a sua frequencia de utilizacao e muito maior que as demais em testes de manutencao, havendo uma funcionalidade exclusiva para ele no software. A Figura
5.11	mostra essa aba e seus componentes.
Figura 5.11: Aba Downlink.
Tabela 5.3: Funcionalidades da aba Downlink
ID	Descrição	Relação com	os requisitos
2.2.1	quadro com a descrição do programa de downlink selecionado	N2
2.2.2	interrompe o downlink em andamento	N2
2.2.3	iniciar o downlink do Flow Loop Test	NF2.1
2.2.4	seleciona downlink através de uma caixa suspensa de opções	NF2.1
2.2.5	tabela com todos os downlinks existentes. E possével selecionar o downlink desejado clicando sobre a linha desejada na tabela	NF2.1
2.2.6	inicia downlink selecionado	N2
O requisito NF2.2 e atendido pela funcionalidade 1.3.
A abra Testing é apresentada na Figura 5.12 e e possível perceber que o número de funcionalidades relacionadas ao teste de torque sao maiores que as demais. A Tabela 5.4 mostra quais sao essas funcionalidades.
Figura 5.12: Aba Testing.
Tabela 5.4: Funcionalidades da aba Testing
ID	Descrição	Relação com	os requisitos
2.3.1	inicializa a comunicação serial com o leitor de torque	NF3.3
2.3.2	interrompe a comunicacão serial com o leitor de torque	NF3.3
2.3.3	preenche no software os valores do teste de fricção da ferramenta	
2.3.4	preenche o numero serial da ferramenta que esta sendo testada	NF3.1
2.3.5	seleciona o tipo de teste a ser realizado. O tipo de teste escolhido irá afetar os set-points da vazão para o teste de torque.	NF3.1
2.3.6	carrega set-points de vazão para o teste de torque de acordo com o teste selecionado pela funcionalidade 2.3.5	NF3.1
2.3.7	inicializa controlador de vazão para o set-point atual	NF3.2
2.3.8	inicializa processamento dos dados de leitura de torque e autoriza o preenchimento automático da tabela	NF3.4
2.3.9	apaga dados anteriores de teste	
2.3.10	exporta os dados de testes presentes na tabela para uma planilha do Excel	NF3.6
2.3.11	armazena os dados atuais do teste	NF3.4
2.3.12	monitora os valores de torque em funcao do tempo	NF3.5
Por ser um procedimento chave no projeto, e interessante detalhar um pouco mais como e realizado o teste de torque através do procedimento automatizado. A Figura 5.13 mostra o fluxograma do teste de torque. A partir do momento que o tecnico verifica visualmente que a ferramenta aceitou o downlink, o teste de torque e iniciado. É importante lembrar que a medicao de torque acontece em 7 etapas e que cada uma dessas etapas tem um set-point de vazao diferente.
Teste de Torque
Downlink Aceito
Figura 5.13: Fluxograma do teste de torque.
O primeiro passo na realização do teste de torque, conforme é mostrado na Figura 5.13, e a inserçao dos dados da ferramenta no software. Esse procedimento e realizado através das funcionalidades 2.3.3, 2.3.4 e, 2.3.5. Em seguida, deve-se
carregar os dados do teste de acordo com as informacoes inseridas no passo anterior. Essa etapa, por sua vez, relaciona-se com a funcionalidade 2.3.6.
Apos ter carregado as informacoes, o software gerencia automaticamente as 7 etapas do teste de torque. Antes de cada uma dessas etapas e necessario, entretanto, ajustar a vazao correta, o que e mostrado no quarto bloco do fluxograma da Figura
5.13	e e relacionado com a funcionalidade 2.3.7.
O quinto e sexto blocos do fluxograma sao relacionados com a funcionalidade
2.3.8	do software, que e a leitura de torque na ferramenta. Para que o software receba os dados de leitura de torque, antes de mais nada e preciso ter um torquímetro digital conectado ao computador. Para estabelecer e/ou interromper a comunicacao entre o torquímetro e o software, existem as funcionalidades 2.3.1 e 2.3.2.
Nesse trabalho, um torquímetro modelo CEDAR - DIW 15, Figura 5.14, foi utilizado para a medicao do torque em tempo real. Esse modelo de torquímetro transfere dados no formato ASCII atraves de comunicacao serial com o PC com um baud-rate de 19200 bps utilizando um cabo mini-USB. Para implementar a comunicacao serial RS-232 entre o torquímetro e o software, foi utilizada uma API chamada RXTX.
Figura 5.14: Torquímetro digital CEDAR - DIW 15.
Apos ter realizado o loop de leitura de torque (quarto, quinto, sexto e setimos blocos da Figura 5.13) sete vezes, o usuario finalmente pode utilizar a funcionalidade 2.3.10 do software, que e a geracao de relatórios. Para a geracao desses relatórios, foi utilizada uma API chamada jexcel. Essa API possibilita que programas escritos em Java possam manipular planilhas do Micrososft Excel. Para a automacao do Flow Loop Test, foi programada uma rotina de exportacao dos dados de testes no modelo da Figura 5.15.
Figura 5.15: Relatórios gerados na forma de planilhas do Microsoft Excel.
5.6: Telas do Sistema Supervisorio
As telas das figuras 5.16, 5.17 e 5.18 mostram as telas finais da interface gráfica do sistema supervisorio.


Starting Procedure
MOTOR'S FREQUENCY
■
00:02:18
WAITING FOR DOWNLINK...
[ Home ] Downlink ] Testing ]
Motor's frequency set-point
34 %
(•) Set Flow
Flow's set-point:
GPM
Stop controller j
96000
102000
105000
72000
7S000
90000
102000
114000
120000
126000
132000
13S000
108000
114000
117000
120000
123000
126000
129000
132000
138000
141000
Figura 5.16: Controlador de vazao
Figura 5.17: Downlink
Figura 5.18: Teste de Torque
Capítulo6: Resultados
O estudo de como o FlowLoop Test vinha sendo feito antes do desenvolvimento desse trabalho apresentou dois grandes problemas. Um relacionado a custo e outro a qualidade. Durante o processo de teste foi constatado que um dos dois tecnicos alocados nessa atividade permanecia ocioso por quase 60% do tempo, o que caracteriza desperdício para a empresa. Outro problema encontrado foi a alta taxa de retrabalho no teste causada por erros humanos.
O objetivo da automacao do FlowLoop Test e a reducao do numero de tecnicos necessarios para a realizacao do teste para apenas uma pessoa e a eliminacao do índice de retrabalho relacionado a erro humano.
Conforme foi mostrado no Capítulo 2, a Figura 6.1 aponta as atividades que cada um dos tecnicos era responsavel no decorrer do teste.
Figura 6.1: Estado inicial do processo de teste
Com as mudancas apontadas, tambem, no Capítulo 2 foi possível otimizar o processo de forma a economizar um total de 1,21 homen-hora por teste. A Figura 6.2 mostra como ficou o timeline do teste apos a implementacao das melhorias.
Figura 6.2: Estado final do processo de teste
Atraves da Figura 6.2 e possível notar que a unica atividade do Flow Loop Test que exige mais de uma pessoa para ser feita e a operacao de mover ferramentas. Esse processo nao pode ser modificado porque ele e protegido por normas de seguranca da empresa, uma vez que e necessário a utilização de talha.
Outra analise importante dos resultados do projeto e a reducao de atividades que nao agregam valor ao produto. A Figura 6.3 mostra que alem de uma reducao de quase 40% em homens-hora utilizadas no teste, houve a eliminacao de processos que nao agregam valor.
Capítulo7: Conclusões e Perspectivas
O programa de estágio na empresa Schlumberger foi uma excelente oportunidade para conhecer melhor a industria do petróleo. As atividades realizadas durante o estagio possibilitaram, ao mesmo tempo, um estudo aprofundado sobre operacoes de perfuracao de pocos de petroleo, um contato direto com processos produtivos de chao-de-fabrica, como por exemplo Lean Manufacturing, e tambem possibilitou o desenvolvimento do projeto descrito nesse trabalho.
O projeto envolveu o estudo de varias disciplinas do curso de Engenharia de Controle e Automacao. Foram utilizados conceitos de eletrônica, informatica industrial, fenômenos dos transportes, instrumentacao, controle de sistemas dinamicos, entre outros.
O uso de novas tecnologias no desenvolvimento tecnico do projeto se provaram promissoras e, ao mesmo tempo, apresentaram algumas restricoes. Por exemplo, o uso do Arduino em ambientes industriais deve ser usado com bastante cautela. A Figura 7.1 mostra os sinais +V(sinalizado pela curva ”C”) e A1 (sinalizado pela curva ”D”) trocados entre o inversor de frequencia e a placa de aquisicao de dados. Pela figura, fica claro que esses sinais contam com muitos ruídos que, atraves de investigacao de causa realizadas na planta, sao causadas por interferencia eletromagnetica. Esse tipo de ruído deve ser minimizado ao maximo pois o Arduino e uma placa bastante sensível a esse tipo de interferência.
Figura 7.1: Sinais do inversor de frequência em um ambiente idustrial
Pelos resultados alcançados por esse trabalho, outras bases da Schlumberger
se mostraram interessadas na implementacao do projeto. Sendo assim, como perspectivas futuras, o projeto sera publicado pela equipe de engenheiros de manutencao de D&amp;amp;M em canais internos de comunicacao da empresa e ter a sua documentacao compartilhada entre as mais de 80 bases ao redor do mundo.
Referências
[1]	Brasil Escola - Historia do Petróleo no Brasil http://www.brasilescola.com/brasil/historia-do-petroleo-no-brasil.htm Acesso em Junho de 2012.
[2]	CPDOC-FGV. A Petrobras e a auto-suficiencia na producao de petroleo, por Adelina Novaes e Cruz, Carlos Eduardo Barbosa Sarmento e Regina da Luz Moreira
[3]	O Estado de Sao Paulo - O que muda com o novo marco regulatorio do pre-sal http://www.estadao.com.br/noticias/economia,o-que-muda-com-o-novo-marco-regulatorio-do-pre-sal,427579,0.htm
Acesso em Julho de 2012.
[4]	Petrobras -12 perguntas para voce entender o novo marco regulatorio http://www.petrobras.com.br/minisite/presal/pt/perguntas-respostas/ Acesso em Julho de 2012.
[5]	SCHLUMBERGER - OIL CD - Confidencial
[6]	Petrobras - Pré-Sal - Vivendo uma revolucao http://www.petrobras.com.br/pt/energia-e-tecnologia/alternativo/transcricoes/pre-sal/
Acesso em Junho de 2012.
[7]	IEA- International Energy Agency
http://www.iea.org/stats/
Acesso em Julho de 2012.
[8]	WEBARTIGOS - Petroleo: Futuro Escasso ou Promissor http://www.webartigos.com/artigos/petroleo-futuro-escasso-ou-promissor/60809/ Acesso em Junho de 2012.
[9]	Veja.com - Pre-sal
http://veja.abril.com.br/idade/exclusivo/perguntas respostas/pre-sal/index.shtml Acesso em Junho de 2012.
[10]	BEZERRA, F Automação do Processo de Inspeção Elétrica de Ferramentas. Monografia para a Graduaçao no curso de Engenharia de Controle e Automaçao, UFSC, Florianópolis, 2011.
[11]	Portal Brasil - Reservas de petroleo e gas poderao chegar a 30 bilhoes de barris, diz Petrobras http://www.brasil.gov.br/noticias/arquivos/2012/05/16/reservas-de-petroleo-e-gas-poderao-chegar-a-30-bilhoes-de-barris-diz-petrobras
Acessado em Julho de 2012
[12]	Portal Brasil - Campanha da ANP capacita jovens para o setor de oleo e gas http://www.brasil.gov.br/noticias/arquivos/2012/06/25/campanha-da-anp-capacita-jovens-profissionalmente-para-setor-de-oleo-e-gas
Acessado em Julho de 2012
[13]	Portal Brasil - Petrobras deve investir US$ 236,5 bilhoes ate 2016 para aumentar producao de petroleo http://www.brasil.gov.br/noticias/arquivos/2012/06/15/petrobras-deve-investir-us-236-5-bilhoes-ate-2016-para-aumentar-producao-de-petroleo
Acessado em Julho de 2012
[14]	Portal Brasil - Ampliacao de parque de refino brasileiro recebera US$ 31,2 bilhoes da Petrobras aumentar producao de petroleo http://www.brasil.gov.br/noticias/arquivos/2012/06/25/ampliacao-de-parque-de-refino-brasileiro-recebera-us-31-2-bilhoes-da-petrobras
Acessado em Julho de 2012
[15]	BARBOSA,Rodolfo e ALVES, Aluísio. Petrobras ultrapassa Microsoft em valor de mercado, diz estudo. Sao Paulo: Agencia Reuters, 19/05/2008 - 15h17
[16]	Wikipedia - Petrobras em numeros
http://pt.wikipedia.org/wiki/Petrobras
Acessado em Julho de 2012
[17]	SFREDO, P B., Construcéío da Area de Calibracao da Ferramenta de Inducao e Estudo de Sua Funcionalidade para Analise de Propriedades Petrofísicas de Formacoes Geologicas. Monografia para a Graduacao no curso de Engenharia de Controle e Automacao, UFSC, Florianopolis, 2006.
[18]	BOARIN PINTO, Silvia Helena; MONTEIRO DE CARVALHO, Marly; LEE HO, Linda. Implementação de programas de aulidade: um Survey em empresas de grande porte no Brasil. Revista Gestao &amp;amp; Produçao. v.13, n.2, p191-203, mai.-ago. 2006.
[19]	Wikipedia - Seis Sigma
http://pt.wikipedia.org/wiki/DMAIC
Acessado em Julho de 2012
[20]	MELLO, A. E. N. S., Apliçaçao do mapeamento de processos e da simulaçao no desenvolvimento de projetos de proçessos produtivos. Dissertaçao submetida ao Programa de Pos-Graduaçao em Engenharia de Produçao. Universidade Federal de Itajuba, 2008.
[21]	DREHER, J. R., Modulo IV - Comandos Industriais II: Chaves de Partida Suave Soft-Starter e Inversor de Frequençia. Centro Federal de Eduçaçao Teçnologiça de Santa Catarina Unidade de Chapeço - CEFET/SC, 2008.
[22]	HENRIQUE, M., Conversores de Frequençia e Soft-Starters. Curso ministrado pela EJM Engenharia. http://www.ejm.çom.br/download/Inversores.pdf
[23]	Wikipedia - Inversor
http://pt.wikipedia.org/wiki/Inversor
Açessado em Julho de 2012
[24]	SCHNEIDER, P. S., MediçÉío de Veloçidade e Vazao de Fluidos. Universidade Federal do Rio Grande do Sul - UFRGS. 2000.
[25]	Meçatroniça Atual - Medidor de Vazao tipo Magnetiço http://www.meçatroniçaatual.çom.br/seçoes/leitura/790 Açessado em Julho de 2012
[26]	SCHNEIDER, P S., Mediçéío de Veloçidade e Vazao de Fluidos. Universidade Federal do Rio Grande do Sul - UFRGS. 2000.
[27]	Wikipedia - Arduino
http://pt.wikipedia.org/wiki/Arduino
Açessado em Junho de 2012
[28]	WEG AUTOMACAO, Guia de Aplicacao de Inversores de Frequencia, 2a Edicao.
[29]	LEE, J.S. et al. Building a Safe and Robust Industrial System with Avago Technologies Optocouplers. Avago Technologies. Retrieved November 2, 2010.
[30]	Wikipedia - Filtro passa-baixo
http://pt.wikipedia.org/wiki/Filtro passa-baixo
Acessado em Junho de 2012
[31]	Electronic's World - Como fazer sua PCI (Placa de Circuito Impresso) http://lucascavalheiro.wordpress.com/2008/10/22/como-fazer-pci/ Acessado em Junho de 2012
[32]	NORMEY-RICO, Introducao a Analise e Projeto de Sistemas de Controle Linear, Universidade Federal de Santa Catarina.
[33]	NORMEY-RICO, Funcionamento de Sistemas em Regime Permanente, Universidade Federal de Santa Catarina.
[34]	COELHO, A. A. R., Identificacao de Sistemas Dinamicas Lineares, Editora da UFSC, 2004.
[35]	CARVALHO, R. L., Desenvolvimento de Modelos e Algoritmos de Controle Avancado para Separadores Trifasicos, Relatorio de Estagio, Universidade Federal de Santa Catarina. 2011.
[36]	ASTROM, K. J., HAGGLUND, T. Automatic Tuning of PID Controllers. Estados Unidos da America: [s.n.]. 1988. 141 p.
[37]	SOARES, P. M. O. R., Discretizacao de Controladores Contínuos. Dissertacao submetida para satisfacao parcial do grau de mestre em Engenharia Elec-trotecnica e de Computadores. Universidade do Porto. Portugal, 1996.
[38]	NORMEY-RICO, Interconexao de Sistemas Contínuos e Discretos, Universidade Federal de Santa Catarina.
[39]	Wikipedia - Java (linguagem de programacao)
http://pt.wikipedia.org/wiki/Java(linguagemde_programa%C3%A7%C3%A3o)
Acessado em Junho de 2012
[40]	Wikipedia - Comunicação Serial
http://pt.wikipedia.org/wiki/Comunica%C3%A7%C3%A3o serial
Acessado em Junho de 2012
Apêndice A: Funcionamento Básico dos Inversores de Frequência
Há algum anos, para se ter um controle preciso de velocidade era necessário utilizar motores de corrente continua. Entretanto, isso acarretava em diversos problemas como custo do motor, necessidade de retificacao da tensao e manutencao. Com os avancos da eletrônica de potencia e com as necessidades de aumento de producao, uma serie de equipamento na area de automacao foram desenvolvidos e lancados no mercado.O inversor de frequencia e um desses equipamentos. Versatil e dinamico, os inversores de frequencia permitiram o uso de motores de inducao para controle de velocidade em substituiçao aos motores de corrente continua [21].
Para controlar a velocidade de motores de inducao trifasicos, o metodo mais eficiente consiste na variacao da frequencia de sua fonte alimentadora atraves de inversores de frequencia. O inversor de frequencia, tambem chamado por alguns fabricantes de conversor de frequencia, e um equipamento capaz de controlar a velocidade e torque de motores de corrente alternada. Esse equipamento pode ter varias filosofias de controle e varias potencias. Independentemente do fabricante e modelo, a estrutura basica do inversor e a mesma, conforme ilustra a Figura A.1. O que muda significativamente de um tipo para outro ei a filosofia de controle [21].
Figura A.1: Estrutura básica de um inversor de frequência trifásico.
A estrutura basica do inversor e composta por diodos, capacitores e transistores bipolares de porta isolada (IGBTs). Esse conjunto de componentes eletronicos tem a funcao de retificar a rede AC, filtrar o sinal e chavear a saida trifasica para o motor de inducao, esquematizado na Figura A.2.
(figura 2.8 - rotor e estator).
TAMPAS
TERMINAIS
CAIXA DE
LIGAÇÃO
ROLAMENTOS
(11lí
VENTILADOR
PROTEÇÃO DO VENTILADOR
NÚCLEO DE CHAPAS
NÚCLEO DE CHAPAS
ENTROLAMENTO
TRIFÁSICO
EIXO
BARRAS DE ANÉIS DE CURTO-CIRCUITO
Figura A.2: Componentes de um motor de indução [28].
O circuito que comanda os IGBTs e responsável pela geração de determinados pulsos que fazem com que os transistores chaveiem o circuito da Figura A.1, variando a tensao e frequencia do sinal enviado para o motor. O metodo de geracao desses pulsos e conhecido por modulacao PWM (Pulse With Modulation) e tem a forma mostrada na Figura A.3.
Figura A.3: Modulaçao PWM [21].
A sigla PWM em português significa "modulação por largura de pulso”. Ela e uma têcnica de controle de potência, tensao ou corrente atravês da largura do pulso de excitacao, oriundos dos sistemas de controle. Esse controle e feito atraves do seu ciclo de trabalho (Duty Cycle) da onda. O ciclo de trabalho e uma característica de uma onda quadrada, representada pela porcentagem do tempo do período de onda em que o sinal esta com amplitude máxima.
Essa técnica pode ser melhor compreendida através da Figura A.4. Nela notamos tres sinais cuja forma de onda e quadrada. A amplitude dos tres tambem e a mesma, igual a 5 Vcc. Como os tres tem mesmo período entao a frequencia tem o mesmo valor para todos (f =1/T ) [21]. Por exemplo, para o primeiro sinal da Figura A.4, durante metade do período de onda o sinal esta em nível alto (5 Vcc) e na outra metade do tempo ele esta em nível baixo (0 Vcc). Nesse caso o seu duty cicle e de 50%.
Para sistemas com cargas resistivas, como motores de inducao, o valor de tensao ”percebida”pelo sistema e equivalente ao duty cicle. Isto e, no exemplo da Figura A.4, para um duty cicle de 50%, um motor de inducao ”perceberia”um sinal de tensao com 50% do valor da amplitude, isto e, um sinal constante de 2,5 Vcc. Em outras palavras, a tecnica de PWM nao varia a tensao real do sinal, mas varia a tensao eficaz. Isso faz com que a tensao da fonte de alimentacao nao precise variar, variando apenas o sinal de controle. O uso de PWM possui grandes vantagens, a principal delas e a eficiencia, devido ao fato de que, teoricamente, um controle PWM nao dissipa potencia.
Apêndice B: Medidor de Vazao Tipo Magnético
O medidor de vazao magnetico, tambem conhecido como eletromagnetico ou por tensao induzida, e um medidor que utiliza um princípio de medicao antigo (lei de Faraday), que sera explicada melhor a seguir. O medidor de vazao magnetico atende a um gigantesco numero de aplicacoes como, por exemplo: medicao de vazao de iogurte, xaropes de glucose com alta concentracao, cerveja e derivados, polpa de celulose, polpa de minerio, acidos em geral, efluentes industriais, esgoto, lamas, pastas, etc [25].
Para que ele possa ser indicado em uma aplicacao basta que o líquido possua uma condutividade eletrica mínima admitida, dependendo de sua pressao, temperatura e velocidade de escoamento na tubulacao do processo, com certeza a vazao desse líquido podera ser medida precisamente, conforme a necessidade do usuario
[25].
O cientista Michael Faraday demonstrou pela primeira vez o princípio que leva o seu nome em 1832. Desde entao, foram desenvolvidos muitos equipamentos baseados na sua lei, o medidor de vazao magnetico e um desses equipamentos. O primeiro medidor de vazao magnetico foi desenvolvido no final da decada de 40, ja no seculo 20. No entanto, medidores de vazao magneticos modernos e realmente eficazes, so surgiram no final dos anos 70. Apesar do medidor de vazao magnetico ser baseado num princípio antigo, ele continua sendo aperfeicoado e customizado para algumas aplicacoes por alguns fabricantes [25].
A lei de Faraday utilizada para medidores de vazao, determina que o movimento do líquido (o qual devera possuir uma condutividade eletrica mínima admitida) atraves do campo magnetico induz uma forca eletromotriz que atravessa o líquido num sentido perpendicular ao campo magnetico, sendo essa f.e.m. diretamente proporcional a sua velocidade de escoamento [25], Figura B.1.
Devido ao campo magnetico empregado na inducao, o material do tubo medidor nao deve ser material nao magnetico, para nao conduzir e nem modificar a direcao do campo magnetico gerado. Por meio de dois eletrodos inseridos em um plano perpendicular ao campo magnetico, torna-se possível a medicao da forca eletromotriz induzida por meio de um milivoltímetro. Essa forca eletromotriz induzida (dada em mi-livolts), nao e afetada pela temperatura, viscosidade, pressao, turbulencia, densidades
Figura B.1: Princípio de funcionamento de medidores eletromagnéticos de vazão
específica/relativa e condutividade elétrica do líquido medido, desde que a condutivi-dade eietrica esteja acima do valor mínimo exigido [25].
Aiem do medidor eletromagnético de vazao, diversas outras tecnologias de instrumentacao tambem sao utilizadas. A tabela da Figura B.2 mostra as principais características de cada um.
Tipo	Ciasse	Faixa	Variação da faixa	Pressão máxima MPa	faixa de temperatura “C		viscosidade máxima cst (icrV ¿S	escala	indicação	incerteza padrão %		Material	perda de carga kPa	comprimento de linha cm	considerações especiais	alimentação	custo relativo
obstrução	Orifício	liq.	5:1	42	-270	-&gt;	4ÍMX)	raiz	remota	1-2		metais em	0.7 -&gt;200	4-» 30	tubo reto:	nenhu-	1.0
		0,012—&gt;220			1100			quadra-	pressão	fundo	de	geral			10 Diam.	ma	
		gás						da	diferencial	escala	de				montante		
		23—&gt;43000								pressão					3 Diam.		
										dderencial					jusante		
	Bocal	liq.	5:1	10	-50—&gt;	800	4000	raiz	remota	1-2		bronze.	0,7 -&gt; 140	2-» 60	tubo reto:	nenhu-	1.4
		0.031—&gt;950						quadra-	pressão	fundo	de	aço, aço			10 Diam.	ma	
		gás						da	diferencial	escala	de	inox, ferro			montante		
		45—&gt;240000								pressão					3 Diam.		
										diferencial					jusante		
	Venturi	liq. 0.03-&gt;	5:1	10	-50—&gt;	800	4000	raiz	remota	1-2		bronze.	0.7 -&gt; 100	2 —&gt; 60	tubo reto:	nenhu-	1,5
		950						quadra-	pressão	fundo	de	aço, aço			10 Diam.	ma	
		gás						da	diferencial	escala	de	inox. ferro.			montante		
		45—&gt;240000								pressão		plástico			3 Diam.		
										diferencia]					jusante		
arrasto	rotâmetro	liq. 0.1x10"5	10:1	2	-45-&gt;	200	ICX&gt;	linear	local	ou	1-2		metais em	0.05—&gt;7	0.6—&gt; lí)	montagem	nenhu-	1,0
	de vidro	-&gt; 16							remota	fundo	de	geral.			vertical	ma	
		gás 0.006							(elétrica ou	escala		plásticos e					
		—&gt;330							pneumática)			cerâmicos					
	rotâmetro	liq. 0.03	10:1	35	-180	-&gt;	100	linear	local	ou	1-2		metais em	0,3 -&gt;70	l,2-&gt;30	montagem	nenhu-	12
	de metai	250			870				remota	fundo	de	geral.			vertical	ma	
		gás 0,2 —&gt;							(elétrica ou	escala		plásticos e					
		470							pneumática)			cerâmicos					
	turbina ou	liq. 0.2X10-3	15:1	105	-270	-&gt;	30	linear	remota	0,5	da	alumínio.	14—&gt;70	0.3 -&gt; 90	qualquer	elétrica	5.0
	hélice	-&gt;3100 gás 0,2 —&gt;	10:1		540				elétrica	leitura		aço inox					
		140000 liq. limpo 0.02	10:1	1			2000		local	ou	1	da	bronze.	7-&gt; 140	1,2-&gt; 15	preferèn-	nenhu-	1,0
		—&gt;63			-15-&gt;	150			remota	leitura		aço. aço			cia	na	ma	
									elétrica			inox. ferro			horizontal		
magnéti-		líquidos	20:1	4	-130	-&gt;	1000	linear	remota	0,5 -&gt;	1	plástico.	muito	0,2 -&gt; 200	qualquer	elétrica	6,0
CO		condutivos			180				elétrica	fundo	de	aço inox	pequena				
		apenas 0,1 xlO*3 -&gt;								escala							
		3100															
Figura B.2: Quadro comparativo entre tipos de medidores de vazão
Anexo A: Diagrama do Inversor de Frequencia Varispeed E7 - Yaskawa
♦ Electrical Connection
■Wiring the Inverter
DC reactor to improve input power factor (optional)
Fig 4 Wiring Diagram
EN-8
Anexo B: Lista de Componentes
A lista de componentes necessarias para a construcao da placa eletrônica de aquisto de dados e mostrada na Figura B.1.
Tabela B.1: Lista de componentes
ID	Valor	Package	Tipo	Posiçao (nm)	Orientação
C2	10pF	E2-5	rcl	(57.69 21.15)	R180
JP1		1X06	pinhead	(38.7 6.05)	R0
JP2		1X06	pinhead	(56.45 6.05)	R0
JP3		1X08	pinhead	(32.05 54.15)	R180
JP4		1X08	pinhead	(53.9 54.15)	R180
OK1	4N35	DIL06	optocoupler	(40.41 23.36)	R0
OK2	4N35	DIL06	optocoupler	(40.41 23.36)	R0
R1	1.2kQ	0207/10	resistor	(21.62 13.76)	R180
R2	10kQ	0207/10	resistor	(21.64 9.54)	R0
R3	10kQ	0207/10	resistor	(37.74 13.94)	R0
R4	1.2kQ	0207/10	resistor	(30.8 49.4)	R0
R6	1kQ	RS3	pot	(28.2 22.9)	R270
R7	10kQ	0207/10	resistor	(56.89 13.27)	R180
R8	220Q	0207/10	resistor	(55.89 40.87)	R0
R9	10kQ	0207/10	resistor	(18.51 28.19)	R270
SP1	F/CM12P	F/CM12P	buzzer	(11.49 46.36)	R180
T1	2N3904	TO92	transistor	(56.24 33.05)	R270
X4		AK500/2	con-ptr500	(8.65 12.1)	R270
X5		AK500/3	con-ptr500	(8.85 28.2)	R270
Anexo C: Tabela de Transformadas
Table of Laplace and Z-transforms
		x(t)	x(kT) or x(k)	X(z)
1.	-	-	Kronecker delta ¿0(k) 1	k = 0 0	k * 0	1
2.	-	-	SJin-k) 1	n = k 0	n k	-k z
3.	1 s	1(t)	1(k)	1 1 - z-
4.	1 s + a	ei-a	e-atT	1 1 - e-aIz-'
5.	1	t	kT	Tz-1 (1 - z)2
6.	2 s	t	(kT)2	T3 z(1 + z) (1- z)
7.	6	t	(kT)3	T3 z(1+ 4z-1 + z-) (1-z)
8.	a s(s + a)	1 - ea	1 — e-'	(1 - z°- J2 (1 - z-1 )l e z-1)
9.	b - a	-at	-bt e — e	-akT	-bkT e — e	(-a - e~ib ]z-1
	(s + a)s + b)			(1 - e	z)1- e-bTz)
10.	1 (s + a)2	. -at te	kTe-aiT	Te~-az _l (1-(	)
11.	s (s + a)2	(1 - af)e~at	(1 - ak'Te-'	1-(1+ aT ) T (1-(	-)
12.	2 (4	2 -at te	(kT)2eatT	T z ' (1 + e a:- ) (-e-Tz- )3
13.	2 a	at - 1 + e"at	akT - 1 + e'"	|(aT -1+ e~ar )+ (1- e~aT - aTe~-r )z 1 |z 1
	s2 (s + a)			(-z 4 (-e	z-■)
14.	a s2 + a2	sin at	sin akT	z-1 sin aT 1-2z 1 cosaT + z-2
15.	s s2 + a2	cos at	cos akT	1- z_1 cosaT 1-2z 1 cosaT + z-2
16.	a (s + a)2 + a2	e-at sin at	e~-a'T sin aT	e~-a z _1 sin aT 1-2e~aa z 1 cosaT + e ~2aa z ~2
17.	s+a (s + a)2 + a2	e-at cos at	e-ak cos akT	1-e~aa z _1 cosaT 1-h^zcosaT + ez~2
18.	-	-	a	1 1	-1 1 - az
19.	-	-	II	-1 z 1	-1 1- az
20.	-	-	kat-‘	z-1 (1- az-■ )2
21.	-	-	j 2 k-1 ka	z _1 (1 + az _1) (1- az-1)3
22.	-	-	,3 k-1 ka	z_l (1+ 4az_l + a2z-2) (1 - az)
23.	-	-	,4 k-1 ka	z _l (1 + 11az _l + 11a2 z-2 + a3 z-3) (1- az-■ )5
24.	-	-	a cos kn	1 1+ az -1
x(t) = 0	for t &amp;lt;0
x(kT) = x(k) = 0 for k &amp;lt;0
Unless otherwise noted, k = 0, 1, 2, 3, ...</field>
	</doc>
</add>